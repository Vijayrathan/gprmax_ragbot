[
  {
    "url": "https://groups.google.com/g/gprmax/c/OqXpIagODkI",
    "title": "implementation of hertzian dipole",
    "original_post": {
      "author": "Hamed Ghorbani",
      "date": "Nov 15, 2024, 2:41:25PM",
      "content": "Hello dear gprmax team.\nthank you for creation of such a useful software.\n\nI am recently trying to produce a hertzian dipole response by analytic equations and compairing my result with gprmax result.\n\nI choosed a scenario as the below command considering the pml space.\n#title: test dipole\n#domain: 1.020 1.075 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 10e-9\n#waveform: ricker 1 1e9 my_ricker\n#hertzian_dipole: z 0.485 1.060 0 my_ricker\n#rx: 0.510 1.010 0\n\nI tried to implement hertzian dipole by using gprmax ricker codes exciting antenna and consider hertzian dipole equation in far-field condition as is showd in my below code. Ez is caculated in antenna height equals to 0.05m and surface distance of 0.025m.\nmy result problem is wrong small domain and Inconsistent time of calculated Ez. my result, gprmax result and normalized result are shown in figures attached.\n\nThank you in advance for your cooperation and help.\nHamed Ghorbani,\n\nimport numpy as np\nimport matplotlib.pyplot as plt\n#----------------------------------------------- \n#define scenario parameters                    |\n#-----------------------------------------------\nfrom scipy.constants import c\nfrom scipy.constants import epsilon_0 as e0\nfrom scipy.constants import mu_0 as m0\ntime_window = 10e-9 \nwidth_pix = 4241\ndt = time_window / width_pix\nfrequency = 1e9\nscan_length = 1.0 \nscan_step = 0.01\nantenna_distance = 0.05\nfrequency = 1e9\nwavelength = c / frequency \nbeta0 = 2 * np.pi / wavelength  # wave number\nl = 0.001 # hertzian dipole length\nprint(f'wavelength is {wavelength} m')\nr_min = 1/beta0\nprint(f'minimum distance for far field condition is {r_min} m')\n\n\n#----------------------------------------------------------------------------------\nclass WaveForm:  \n        #-----------------------------------------------\n    # defines the waveforms                        |\n    #-----------------------------------------------\n        def __init__(self):  \n        self.dt = dt  \n        self.freq = frequency  \n        self.t_max = time_window  \n            #-----------------------------------------------\n    # makes a ricker wavelet vector by time        |\n    #-----------------------------------------------\n\n    def ricker_wavelet(self):  \n        chi = np.sqrt(2) / self.freq  \n        zeta = np.pi ** 2 * self.freq ** 2  \n        t = np.arange(-self.t_max, self.t_max, self.dt)  \n                delay = t - chi  \n        normalise = 1 / (2 * zeta)  \n        wavelet = - (2 * zeta * (2 * zeta * delay ** 2 - 1) * np.exp(-zeta * delay ** 2)) * normalise  \n                zero_time = len(wavelet) // 2  \n        positive_wavelet = wavelet[zero_time:]    \n        time = t[zero_time:]  \n                return time, positive_wavelet  \n#----------------------------------------------------------------------------------\n\n#----------------------------------------------------------------------------------\ndef show_signal(x, y, title, frequency=None, time=None):\n         #----------------------------------------------------\n    # show the signals out put in time or fredomains |\n    #----------------------------------------------------\n           plt.plot(x, y)\n    plt.title(title)\n    if frequency:\n        plt.xlabel('freqency')\n    elif time:\n        plt.xlabel('time')\n    plt.ylabel(title)\n    plt.grid(True)\n    plt.show()\n#----------------------------------------------------------------------------------\n\n#----------------------------------------------------------------------------------\ndef hertzian_dipole(x, y, epsilon_r):\n\n    eta = np.sqrt(m0/(e0*epsilon_r))\n    phi = np. arctan(y/x)\n\n    wave = WaveForm()\n    t, wave_t = wave.ricker_wavelet()\n    #show_signal(t, wave_t, 'Time Domain Wave', frequency=None, time=True)\n    wave_t = -wave_t\n    # Fourier transform\n    wave_f = np.fft.fft(wave_t)\n    frequencies = np.fft.fftfreq(len(t), d=(t[1] - t[0]))\n    #show_signal(frequencies, wave_f, 'Frequency Domain Wave', frequency=True, time=None)\n\n    # Calculation of beta and phase\n    beta = 2 * np.pi * frequencies / c\n    beta_x = beta * np.cos(phi)\n    beta_y = beta * np.sin(phi)\n\n    # Apply positive phase\n    phase_shift = np.exp(1j * (x * beta_x + y * beta_y))\n    E_freq_shifted = wave_f * phase_shift\n\n    # Only the positive part of the frequencies\n    positive_frequencies = frequencies[:len(frequencies)//2]\n    positive_E_freq = E_freq_shifted[:len(E_freq_shifted)//2]\n\n    # Calculate the electric field in the frequency domain\n    E_f = (1j * positive_frequencies * eta * l * positive_E_freq)  / (4 * np.pi * (np.sqrt(x**2 + y**2)))\n    #show_signal(positive_frequencies, E_f, 'E Frequency Domain', frequency=True, time=None)\n\n    # Inverse Fourier transform to return to the time domain\n    reconstructed_wave_f = np.concatenate([positive_E_freq, np.conj(positive_E_freq[::-1])])\n    E_t = np.fft.ifft(reconstructed_wave_f)\n        # Coordination of length vectors\n    # Find the length of the longest vector\n    max_len = max(len(t), len(E_t))\n    # Set the length of the vectors to the length of the longest vector by adding 0\n    t = np.pad(t, (0, max_len - len(t)), 'constant')\n    E_t = np.pad(E_t, (0, max_len - len(E_t)), 'constant')\n\n    show_signal(t, E_t, 'E Time Domain', frequency=None, time=True)\n\n    return E_t \n#----------------------------------------------------------------------------------\n\ny = -0.05 # position of the antenna in the y axis\nx = antenna_distance/2  # surface distance in x axis\nepsilon_r = 1 # Dielectric constant\n\n# Calculate E_generator\nE_generator = hertzian_dipole(x, y, epsilon_r)"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 17, 2024, 9:30:28AM",
        "content": "Your model is 2D and the actual theoretical equivalence of your #hertzian_dipole: source is a line source. This is stated in the documentation.  The analytical equations are different. Using reduced equations after assuming you are in the far field is not a good way to test a numerical method because there is no clear boundary on where you are in the far field. This is mostly a guidance and not a theoretical zone the transition is not abrupt. Analytical expressions for a Hertzian dipole in 3D and a line source in 2D exist and are easy to find and I recommend to try those first. If you want to use the frequency domain solutions and iFFT back to time domain that is OK but gprMax uses a time delay to launch a pulse that depends on its centre frequency. This will introduce a phase difference in a frequency domain solution that you need to take into account or shift your time domain response accordingly. \n\nHope this helps\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MQTRse-gYSw",
    "title": "help me please~~~ i want to make Bscan ! You'll be blessed",
    "original_post": {
      "author": "전부환",
      "date": "May 17, 2023, 9:34:23AM",
      "content": "input file--------------------------------------------------------------\n#domain: 1.000 0.250 0.450\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5e-9\n#material: 3.5 0.01 1.0 0 bakelite\n#material: 6.0 0.01 1.0 0 rubber\n#material: 3.0 0.00001 2.0 0.01 dry_sand\n#material: 2.86 0.00048 1.0 9.75 TNT\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: y 0.100 0.110 0.360 my_ricker\n#rx: 0.100 0.140 0.360\n#src_steps: 0.006 0 0\n#rx_steps: 0.006 0 0\n#box: 0 0 0 1.000 0.250 0.200 dry_sand\n#cylinder: 0.500 0.125 0.150 0.500 0.125 0.147 0.056 rubber\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.094 0.056 bakelite\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.053 TNT\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.002 pec\n--------------------------------------------------------------------------------\nThank you for making great software like gprmax. Among the many conversations, I simulated a file similar to the input file that I wanted to do,\nAs I thought, the Bscan in the shape I wanted didn't come out.\n\nThe input file is as follows,\nThe code I used is running gprmax using colab\n!python -m gprmax \"filename\" -n \"number\"\n!python -m tools.outputfiles_merge /content/drive/MyDrive/gprmaxgroup\"\n!python -m tools.plot_Bscan \"/content/drive/MyDrive/gprmaxgroup_merged.out\" Ez\nI'll apply the code in order\n\nI created a Bscan image and it came out like a #1 file,\nI'd really appreciate it if you could tell me what parts I need to fix to make sure the parabola comes out like #2file!! Please help me"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 17, 2023, 10:31:58AM",
        "content": "You are running for only 10 traces and you have covered about 6 cm from 0.12 (mid point of Tx and Rx). if you want to perform a scan of about 90 cm to cover 0.1 to 0.9 in your model then you will need about 134 traces. You are using an end-fire arrangement for your Tx and Rx and that is no problem if this is what you meant to do. More common arrangement is broadside but that is not a problem or error if this is what you want to model! You should note that as you are 16 cm above the ground your direct wave will be the stronger and your reflection from the surface will be small and from your target even smaller. You should process the data to see something. Use Paraview to visualise the model and check that you do the right thing. I don't think this model will generate the reverse polarity hyperbola in your second image. It should give you a response. \n\nAlso, you need to be looking to the Ey component as this is the one your source is oriented to ('y') looking in the z component does not make much sense here unless you want to see the Hz (magnetic component) which I suppose can produce what you see in your second image. I did this for my PhD too many years ago ...\n\nIn gprMax the -n \"number\" is the number of traces (A-scans) you run by moving your source and receiver by the specified amount in #src_steps: and #rx_steps: commands.\n\nHope this helps\n\nGood advice is to always read the manual carefully and visualise your model and think carefully what you are plotting and why!\n\nAntonis\n\n\n\n"
      },
      {
        "author": "전부환",
        "date": "May 18, 2023, 3:31:33AM",
        "content": "Thank you very much. I tried to follow the principles\nThat's the image. The values of rx and src_step were slightly reduced to proceed a little less than that of trace.\n If you add more traces Can the parabola get steeper?\n2023년 5월 17일 수요일 오후 11시 31분 58초 UTC+9에 Antonis Giannopoulos님이 작성:\n"
      },
      {
        "author": "전부환",
        "date": "May 18, 2023, 3:34:28AM",
        "content": "like this image\n\n2023년 5월 18일 목요일 오후 4시 31분 33초 UTC+9에 전부환님이 작성:\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 18, 2023, 6:21:13AM",
        "content": "No, it will get smoother as you sample more of it. You need to think what affects the shape of the hyperbola and that is the background medium properties.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "전부환",
        "date": "May 24, 2023, 9:28:11PM",
        "content": "very thanks for your answer~!\nHow many parabolic lines are generated in Bscan\nIt's not proportional to the number of substances you set to be dry underground, is it?\nWhat I meant to say is the yellow circled part of the attached file.\n\n2023년 5월 18일 목요일 오후 7시 21분 13초 UTC+9에 Antonis Giannopoulos님이 작성:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/uSeq05G_T84",
    "title": "create a database",
    "original_post": {
      "author": "Nadjib Kemache",
      "date": "Jun 26, 2021, 9:27:54AM",
      "content": "Hello everyone\nI have a question, please, can I make a database by gprMax with the '' for '' loop, each time changing the default size and run the program, to do 1000 examples ."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 1, 2021, 3:19:06PM",
        "content": "You can import gprMax as a module into your Python script - look at the api function inside the main gprMax module. Then you should be able to call that inside a loop.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KKm0-uFQxs0",
    "title": "Received signal deformation and attenuation in air for a single layered material",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Jun 19, 2019, 4:45:02AM",
      "content": "Hello Craig and Antonis,\n\nI've created a basic model in gprMax with just one material layer and a voltage source as the emitter. Here is the model: \n\n\n\nHere's the code:\n\n#domain: 1.0 0.98 0.002\n#dx_dy_dz: 0.001 0.001 0.002\n#time_window: 10e-9\n\n#material: 5 0.001 1 0 asphalt_layer\n\n#box: 0.0 0.0 0.0 1.0 0.72 0.002 asphalt_layer\n\n#waveform: gaussiandotdotnorm 1 2.0e9 my_pulse\n#voltage_source: z 0.47 0.92 0 75 my_pulse\n\nMy idea was to observe the received signal from the material at various antenna heights (as shown in the figure above). However I observed two discrepancies:\nThe received signal seems to diminish when I increased the antenna height (My assumption was that since the propagation is in air, there should be no such attenuation)\nI also see that the signal (direct coupling between the Tx and Rx) and also the received signal is deformed. I used a symmetric gaussiandotdotnorm pulse centered at 2GHz. I was under the impression that since the free space (air) and my material layer are both homogeneous, There shouldn't be any such signal deformation (The signal should be an attenuated copy of the emitted pulse, right?)\nBelow are the figures for my queries (PFA for the high-res figures):\n\nFigure. Attenuation of the signal in air (Query 1)\n\nFigure. Amplitude deformation (Query 2)\n\n\nIs there anything that I may have misunderstood that could have led to this problem? \n\nThanks for the help!\n\n-----\nShreedhar"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 19, 2019, 7:33:44AM",
        "content": "Hi Shreedhar,\n\nBoth your assumptions are incorrect. First if you are not simulating the antenna structure is better if you use the hertzian dipole source and not the voltage source. The voltage source prescribes exactly the value of the electric field at a point but the hertzian dipole describes the shape of the current on an infinitesimal source. They are not going to be very different but this will depend on the excitation. In terms of the physics there are subtle differences that I have no time to discuss here. It is fundamental that the field from any source of finite extent suffers geometrical loss and not only material attenuation. So, your expectation on signal strength is wrong. Equally the fields radiated from a source are not replicas of the excitation function. The maths and physics of this are explained in standard books in electromagnetics. \n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/h4_efNSiDsI",
    "title": "Dataset Request",
    "original_post": {
      "author": "Neeraj Kumar",
      "date": "Sep 22, 2020, 9:34:57AM",
      "content": "Hello!\nWe are building an AI tool for the detection of landmines using GPR technology. It would be very helpful if someone can provide us with the raw data from the GPR or B-scan data of the simulated models."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kzoP6F--LGk",
    "title": "I don't understand and there are errors with the images obtained from Bscscan.",
    "original_post": {
      "author": "SS MM",
      "date": "Sep 1, 2024, 4:34:18AM",
      "content": "Sir, can I ask you a question? I have 2 questions.\nFirst, why doesn't my Bscan graph in image 1 show the entire area? And the graph looks wrong. Or did I set something wrong? What I want to show, I want it to show like in example image 4, which I don't know where I did wrong in setting. Or if anyone has an example code that can Bscan the entire area similar to image 4, can I study it? Teacher\n\nSecond, can we know the depth from Bscan? Because the graph is a graph with a time axis and n numbers, or do we have to create the formula ourselves?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 10, 2024, 11:13:09AM",
        "content": "The number of A-scans (number of times you run the model) and source/receiver steps govern the length of your B-scan. So check they are set as you need them.\n\nAs for converting the time axis to depth.....I would suggest you do some reading on GPR, this is a fundamental question! There are lots of helpful books, papers, and online material.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QrJHNqXVX08",
    "title": "GPU question.",
    "original_post": {
      "author": "Fabio da Silva",
      "date": "Oct 4, 2017, 12:03:31PM",
      "content": "Hello,\n\njust learned about gprMax and successfully installed it in two machines (laptop and desktop). The desktop has a Tesla K20c that I am trying to use for my simulations. I created a basic example named simple_domain.in:\n\n#title: Simple domain with a source\n#domain: 0.1 0.1 0.1\n#dx_dy_dz: 3e-3 3e-3 3e-3\n#time_window: 200\n\n#geometry_view: 0. 0. 0. .1 .1 .1 3e-3 3e-3 3e-3 simple_ex n\n\n#hertzian_dipole: y 0.05 0.05 0.01 t1\n#waveform: gaussian 1. 5e9 t1\n#rx: 0.05 0.05 0.04\n\nthat I can run on both machines without a problem using:\n(gprMax): python -m gprMax user_models/simple_domain.in\n\nOn the GPU machine, when I run:\n(gprMax): python -m gprMax user_models/simple_domain.in -gpu\n\nit outputs:\npycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\fcss\\AppData\\Local\\Temp\\tmp2vf3mt60.cu failed\n[command: nvcc --preprocess -arch sm_35 -m64 -Ic:\\programdata\\miniconda3\\envs\\gprmax\\lib\\site-packages\\pycuda\\cuda C:\\Users\\fcss\\AppData\\Local\\Temp\\tmp2vf3mt60.cu --compiler-options -EP]\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\n\nQuestion: How can I clean the stack prior to the simulation?\n\nAlso, when I add a snapshot code to the simple_domain.in file:\n#python:\nfrom gprMax.input_cmd_funcs import *\nfor i in range(1,201):\n snapshot(0. ,0. ,0. ,.1 ,.1 ,.1 ,3e-3 ,3e-3 ,3e-3, i,'snapshot' + str(i))\n#end_python:\n\nand run with:\n(gprMax): python -m gprMax user_models/simple_domain.in -gpu\n\nI get:\ngprMax.exceptions.CmdInputError: '#snapshot: 0 0 0 0.1 0.1 0.1 0.003 0.003 0.003 1 snapshot1' The #snapshot command cannot currently be used with GPU solving.\n\nQuestion: Is there another way to save snapshots when running with a GPU?\n\nThanks for any light you can shed on this.\n\nCordially\nFabio."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 4, 2017, 12:18:08PM",
        "content": "Hi Fabio,\n\nWelcome to the forum! \n\nTo answer the second part of your question first, it is not possible to used #snapshot with the GPU solver at the moment. The technical reason is that any file writing operation during the GPU solving would kill the speed.\n\nNow to the first part of your question - are you running on Windows 10? I think the problem you are seeing is exactly the same as one we are currently trying to debug with several users (all using Windows) on Github, see the Issue Tracker - https://github.com/gprMax/gprMax/issues/115 Perhaps you can contribute what you are experiencing.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Fabio da Silva",
        "date": "Oct 4, 2017, 1:32:46PM",
        "content": "Thanks, Craig.\n\nYes, I am running Windows 10 on both machines. I understand the issues with the snapshot slowing things down and wonder about ways to snapshot into RAM prior to the final dump...\n\nI have written GPU code in the past using nvcc in linux, but not with PyCUDA in Windows 10. My knowledge is scanty but I will look into it and get back to you once I find anything.\n\nStill, great software. Saved me a ton of time by not having me reinvent the [square] wheel. Went from zero to here in a few days.\n\nCordially,\nFabio"
      },
      {
        "author": "Samuel Lehner",
        "date": "Oct 5, 2017, 9:04:17AM",
        "content": "Hi Fabio,\n\nI got the same message but in my case it turned out that this is a aftereffect. Call the compiler command directly and see what's happen.\n"
      },
      {
        "author": "Fabio da Silva",
        "date": "Oct 5, 2017, 11:36:30AM",
        "content": "Hi Samuel,\n\nyou are right. The geometry file is generated successfully and the pycuda exception is thrown after that.\n\nWhen I ran the compile command, it generated a screen output that I dumped in to a file (1 Mbyte in size). For all I know, it has compiled properly, but it is not a standalone executable. The .cu source has calls to be used by the main .cu file and does not contain any memory reset commands such as cudaMemset or cudaDeviceSynchronize.\n\nFabio."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 5, 2017, 11:47:50AM",
        "content": "Hi guys,\n\nTake a look at the posts in our Issue Tracker - https://github.com/gprMax/gprMax/issues/115 where it seems the issue has been (at least partially) resolved. Somehow the MS 'cl.exe' compiler is not being found by 'nvcc' which is why the compilation is failing - 'cl.exe' is not on the path. You can try running the simple pycuda demo example in the thread to test outside of gprMax. Once 'cl.exe' is on your path everything works fine. We are still trying to determine what sequence of installation steps are required to make sure 'cl.exe' is on the path.\n\nBTW The geometry file is generated because it is done by the CPU (which does all the pre-processing and model building) before the solving part (which can be CPU or GPU) is done.\n\nCraig"
      },
      {
        "author": "Fabio da Silva",
        "date": "Oct 5, 2017, 12:50:37PM",
        "content": "Craig,\n\nthat's correct. When I executed the nvcc command the first time, I used the Windows Command app. I did notice that the cl.exe was missing and thought I should have used the VC++ Command app and my previous post came from that execution.\n\nSo, I went ahead and added the path to the system environment variables and sure enough, the code is executed in the GPU. Solving times are already a factor of 3 faster using the GPU for the example I posted with a #time_window: 20000.\n\nI am sure more questions will come, but for now, I really appreciate you guys' responses and interest in my problem. Glad to help in the future on whatever I can.\n\nCheers,\nFabio."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xSmFJIRClu8",
    "title": "Ricker waveform amplitude",
    "original_post": {
      "author": "ARKA BHATTACHARYYA",
      "date": "Dec 11, 2021, 8:52:16AM",
      "content": "Hi gprmax users,\nI have got a question regarding the Ricker waveform in gprmax. What is the actual amplitude of the electric field/power radiated by the transmitter and how to calculate it from the command, for example ricker 1 1.5e9 my_ricker? Because in Ascan one can see the electric field amplitudes at the receiver. In this regard how the electric field strength is mapped from the amplitude \"1\" of the ricker pulse. This is my question.\nThank you in advance."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 15, 2021, 8:37:56AM",
        "content": "It depends on what source model is used with the waveform.\n\nIf you use a Hertzian dipole then you are prescribing the current density at the source location - http://docs.gprmax.com/en/latest/input.html#hertzian-dipole\nIf you use a voltage source then it maybe an additive soft source (if it has internal resistance) or it maybe a hard source (zero internal resistance) and therefore you are directly prescribing the electric field at the source location - http://docs.gprmax.com/en/latest/input.html#voltage-source\n\nKind regards,\nCraig\n\n\n\n"
      },
      {
        "author": "ARKA BHATTACHARYYA",
        "date": "Dec 17, 2021, 2:15:11AM",
        "content": "Thank you very much Craig for reply. I have another question. How to plot or see the input waveform generated by the transmitter (suppose Hertzian dipole), for example if the waveform is ricker? Is there any options or commands to see that?\nThank you in advance.\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 17, 2021, 8:00:33AM",
        "content": "I am afraid the right answer to this is RTFM (if you do not know what it means google it ...)\n\nhttp://docs.gprmax.com/en/latest/plotting.html\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/k2-qMgxidEE",
    "title": "Antenna patterns",
    "original_post": {
      "author": "Heloisa Moraes",
      "date": "Apr 25, 2019, 10:18:46AM",
      "content": "Hi everyone,\nIs it possible to use the antenna patterns module to view a field pattern in a plane parallel to the air-ground interface (x-y)? I just want to see the antenna footprint.\nBest,\nHeloisa"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 29, 2019, 5:46:16AM",
        "content": "Hi Heloisa,\n\nThe antenna patterns module is there to help people get started and see how to create patterns with gprMax. Essentially you are just positioning receivers (#rx's) around the antenna at the points you want to measure the field. You can do this wherever you like, and automate it using a Python block in your input file. Have a look at the scripts in the patterns module to see.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6ymOqknzAP8",
    "title": "How the fractal dimension works",
    "original_post": {
      "author": "Antonin",
      "date": "Jun 5, 2024, 9:31:06AM",
      "content": "Hello,\n\nI'm trying to model stochastic lunar and Martian soils, which requires me to use the fractal box. I'd like to be able to enter in a python code an autocorrelation length of the studied characteristics to have a given fractal dimension that corresponds to the input parameters. However, I don't know how the fractal box actually works and how the fractal dimension is determined (according to which parameters). So I was wondering if you could tell me how it works?\n\nBest regards\n\nGardais.antonin"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 5, 2024, 9:49:55AM",
        "content": "Hi,\n\nI think in the new version the fractal dimension definition will be a bit more clear but in the current master branch the best way to understand what the algorithm does is to look at the Fractal generation code. It is rather straightforward on how it is generated as any such distribution is a weighted white noise process with a shape that determines the characteristics of the stochastic processes. Also, it is very easy to generate your geometry outside gprMax and then import it if you store it as an H5 file. Information on how to do this is in the documentation.\n\nhttps://github.com/gprMax/gprMax/blob/master/gprMax/fractals.py\n\nBest\n\nAntonis \n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/InLMuCP_WE4",
    "title": "Error: the lower coordinate should be less than the upper coordinate",
    "original_post": {
      "author": "Yue Chueng",
      "date": "Apr 16, 2017, 5:05:05AM",
      "content": "Hi everyone,\n\n  When I run my code, it showed me an error as followed. \n  I think my code is right cause I just copy it from a thesis which use gprMax2D. Therefore, I just changed some codes.\n  Can anyone help me?\n\nkind regards."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 16, 2017, 5:21:45AM",
        "content": "Yue,\n\n2D models in gprMax are a single cell slice of a 3D model. Therefore geometry (such as a box) with have a thickness of a single cell. In the example you have shown the box has no thickness in the z-direction, it extends from 0.0025 to 0.0025m. It should probably be 0 to 0.0025m.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yue Chueng",
        "date": "Apr 16, 2017, 8:14:38AM",
        "content": "Hi Craig,\n\nThanks for your reply. I have solved my problem.\n\nBest regards."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/w2rnA6PX8Z4",
    "title": "Issue creating geometry of model",
    "original_post": {
      "author": "Jack Barr-Baxter",
      "date": "Aug 30, 2023, 11:04:45AM",
      "content": "Good afternoon guys,\n\nHope you're doing well! I'm in the process of creating a model simulating the response of a reinforced concrete pad, overlying some soil. I've been running into an error with the inbuilt GSSI 1.5GHz antenna saying one of the box commands has lower defining coordinates greater than its upper defining coordinates. This doesn't seem to make sense, though, having looked at the coordinates it gives in the exception:\n\n\nI'll attach the input file I've been using too.\n\nKind regards,\nJack Barr-Baxter"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 30, 2023, 12:40:23PM",
        "content": "Hi Jack,\n\nThe issue is because the spatial resolution of your overall model is 5mm but the resolution of the antenna model is set to 2mm (which is the largest spatial resolution available for that antenna model). Therefore the antenna coordinates are being discretised and rounded in steps of 5mm which means some of the smaller #box dimensions won't work. Further up (not shown in your screenshot) should be an error message to this effect.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Jack Barr-Baxter",
        "date": "Aug 31, 2023, 8:24:03AM",
        "content": "Hi Craig,\n\nThanks for the quick reply. I don't see the error message, but I am perhaps not seeing something obvious. Decreasing the spatial resolution of the model did work, though! Ran into a different problem now with memory requirements; my poor laptop doesn't hack it. Will try on a more powerful computer.\n\nKind regards,\nJack\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/T6KoTocsSgM",
    "title": "Change axis x",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Nov 11, 2019, 8:33:34AM",
      "content": "Hello gprMax users,\n\nCan anyone who has ever modified the code to plot B-scan, can you give me a tip on how I can change the axis of trace numbers to distance X?\n\nkind regards,\n\nBarauna"
    },
    "responses": [
      {
        "author": "Kerem Ozkap",
        "date": "Nov 11, 2019, 9:26:06AM",
        "content": "Hi Bruno,\n\nYou need to modify  plot_Bscan.py under  \"tools\" folder. outputdata.shape [1] controls the trace number (line number 48).\n\nYou can multiply or divide the outputdata.shape [1] value by any number as needed. You can see a sample screenshot at the attached.\n\nBest,\n\nKerem"
      },
      {
        "author": "Bruno Barauna",
        "date": "Nov 11, 2019, 11:04:43AM",
        "content": "Kerem, \n\nThank you so much for your attention to me, it worked perfectly.\n\nKind regards,\n\nBruno"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8Y4ip8-1smc",
    "title": "Translation of the antennas",
    "original_post": {
      "author": "Carlo Gravante",
      "date": "Jul 30, 2022, 11:11:33AM",
      "content": "Hi, i want my antennas to move first horizontally for a certain distance and then vertically for another distance and get a single bscan. How can this be done? with the command src_steps and rx_steps it does not seem possible to do it directly."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 15, 2022, 11:24:17AM",
        "content": "#src_steps and #rx_steps are commands to allow basic movements of simple sources such as the Hertzian dipole.\n\nBest to use a block of Python in your input file and then you have access to the variable 'current_model_run' which you can use to position your source (I'm guessing it is a simple source and not a full antenna model?) - http://docs.gprmax.com/en/latest/python_scripting.html\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/cJ5IqmA6Y1s",
    "title": "vegetation modeling",
    "original_post": {
      "author": "yi yang",
      "date": "Sep 5, 2023, 7:06:02AM",
      "content": "Hi everyone,\n     I encountered problems while conducting vegetation modeling. No matter how I set its height range, it seems to have little change. Also, I don't know if there is a command to control its root range. Below is my modeling, and it is evident that there is a significant difference between the height in the image and the height I set."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 13, 2023, 7:25:02AM",
        "content": "Can you attach your input file (the .txt) please so we can take a look.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4hdDO8GXpgM",
    "title": "Re: paraview problem",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 24, 2020, 8:14:38AM",
        "content": "I can't help you with your problem but this is a really nice model, can you share the .in File?"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 25, 2020, 3:27:39PM",
        "content": "Panlei,\n\nI can't view the AVI you tried to share in your second post, I suspect it was perhaps too big to attach. As Paul-Benjamin said, can you provide the input file please. Also can you describe the problem more fully. Is this error message occurring when you are trying to 'play' the snapshots in Paraview?\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rwtmqgsoKoU",
    "title": "How to use gprMax to simulate SFCW GPR system based on python ?",
    "original_post": {
      "author": "匀斥乎（forever84353）",
      "date": "Nov 27, 2023, 9:33:39PM",
      "content": "My group is going to build a step-frequency GPR system based on VNA. And it is better for us to simulate this system."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 19, 2023, 6:15:59AM",
        "content": "This video from a online workshop we hosted may help - https://youtu.be/_FWNeqTr9nc?si=CO0uReyaKJ0JKERg\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NhiUYc3bODo",
    "title": "Modelling of a grass soil surface",
    "original_post": {
      "author": "Hannah",
      "date": "Sep 5, 2021, 8:49:58PM",
      "content": "Hello gprMax developers and users,\n\nI met a problem of fixing the geometry of a grass surface when perform a B-scan. \n\nThe input command I used is: #add_grass: f1 f2 f3 f4 f5 f6 f7 f8 f9 i1 str1 [i2]\n\n-Even if I fix the value of [i2], the grass distribution varies when I try to use the GSSI antenna to do a B-scan. Based on the description of the command: \"The blades of grass are randomly distributed over the specified surface area and a fractal distribution is used to vary the height of the blades of grass and depth of the grass roots. \" I assume the [i2] only controls the fractal distribution of the height of the blades of grass and depth of roots, but not the distribution of blades. I have used [i2] to successfully fix the distribution of heterogeneous soil or rough surface, but it does not work in this case.\n\n-I also tried an alternative method with the --geometry-fixed command, but it only works for simple TX and RX, not for a realistic antenna model such as the GSSI antenna. \n\nCould anyone please suggest me how to fix the distribution of grass when perform a B-scan with the GSSI antenna? Thank you very much!\n\nBest Regards,\nHannah"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Sep 6, 2021, 3:56:32AM",
        "content": "Hello Hannah,\n\nyou might look at hte command #geometry_objects_write and #geometry_objects_read\nfirst you have to built your model once - just the grass, no antennas.\n\nlater you can import your grass to your .in, add the antenna and calculate you A-scan.\n\nhope this helps\n"
      },
      {
        "author": "Hannah",
        "date": "Sep 7, 2021, 8:36:49AM",
        "content": "Thank you very much Michael! My question has been very well solved using your suggested method.\n\nBest Regards,\nHannah\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9Xgr-BkQwJs",
    "title": "Regarding this Image",
    "original_post": {
      "author": "savita K.B",
      "date": "May 5, 2021, 12:33:48PM",
      "content": "Hi\nHow to design this type of model in GPRMAX. Please send me the code of this."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 5, 2021, 4:20:43PM",
        "content": "Dear savikb,\n\nThis is not a valid question - we have no idea where this B-scan came from, and it is frankly quite rude to demand that someone send you code. This group is intended to be a forum for sharing advice about GPR modelling and gprMax in a friendly and respectful way.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Nn8GEo47aPA",
    "title": "Debye model with dielectric smoothing turned off",
    "original_post": {
      "author": "Zoe",
      "date": "Jan 29, 2021, 11:56:28AM",
      "content": "Hi dear masters, \n\nIn my simulation, I realized when I use debye model in my object, the dielectric smoothing at this position is automatically turned off even if I do not use 'n' in my model constructing. Is there any method to turn it on while using debye or other dispersive models? \n\nThank you.\n\nBest,\nZoe"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 29, 2021, 3:57:11PM",
        "content": "Dear Zoe,\n\nCurious to know for what reason(s) you are interested in using dielectric smoothing with Debye materials? In any case, it is not a trivial concept to do dielectric smoothing (material property averaging) when Debye materials are used. It is not possible to do in the current (v.3.x) version of gprMax, but will be available in the next release sometime in the first half of this year.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Zoe",
        "date": "Jan 29, 2021, 6:35:02PM",
        "content": "Thank you Craig! I am interested in constructing an inhomogeneous model considering water as one of its components. It is not soil, so peplinski model doesn't work for me. Great to know it will be included sometime in the future!\n\nBest Regards,\nZoe\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 1, 2021, 5:35:54AM",
        "content": "Hi Zoe,\n\nThats fine to be using the Debye model with media other than the Peplinski model. My question is why is the lack of dielectric smoothing important?\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Zoe",
        "date": "Feb 1, 2021, 1:15:23PM",
        "content": "Hi Craig,\n\nPlease correct me if I am wrong. I believe they will give me different answers with dielectric smoothing on and off. This is based on my experience in using the common add_material command. I tried to build a heterogeneous model with a high-dielectric component (say water) inside and found their results are different (not slightly) with dielectric smoothing on and off. So I assume the debye model with this feature on and off will give me similar situations. Thank you.\n\nBest,\nZoe\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 18, 2021, 3:30:14PM",
        "content": "Hi Zoe,\n\nYou will see differences with dielectric smoothing (material property averaging) turned on and off, especially with materials that have high dielectric constant. Obviously to test this in the current version of gprMax (v.3.x) these materials cannot have dispersive properties, such as Debye. So yes, if the differences are significant for the examples you are interested in, then having dielectric smoothing with Debye materials maybe useful to you.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gkqMpB4hBoE",
    "title": "GPU",
    "original_post": {
      "author": "Londstate",
      "date": "May 24, 2019, 10:21:05PM",
      "content": "Hello,Craig!\nI have meet some questions in my work.My computer has a GTX1080ti and 16G RAM.\nAnd I upload screenshots  in order.Can you help me?\n                                                               Yours ,  Londstate.\n\nTIM图片20190524224812.jpg\n\nTIM图片20190524224909.jpg\n\nTIM图片20190524224915.jpg\n\nTIM图片20190524224927.jpg"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 28, 2019, 4:34:58AM",
        "content": "Hi Londstate,\n\nI can't see any of your screenshots as they require permission via Google drive. Can you upload/attach them to your post please.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Londstate",
        "date": "May 31, 2019, 3:38:44AM",
        "content": ""
      },
      {
        "author": "Londstate",
        "date": "May 31, 2019, 3:39:30AM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "May 31, 2019, 5:46:58AM",
        "content": "Dear Londstate,\n\nStill confusing as to which errors relate to which commands you have tried. Anyway I suggest you firstly check that you can get a single trace (A-scan) working on a single GPU. Once that is the case, then try adding the mpi for using multiple GPUs. Make sure you understand the MPI task farm model we use and how to specify the GPU IDs - http://docs.gprmax.com/en/latest/gpu.html#combining-mpi-and-gpu-usage\n\nCraig"
      },
      {
        "author": "Londstate",
        "date": "Jun 3, 2019, 3:34:47AM",
        "content": "Dear Craig\n  I have tryied  a single trace (A-scan) ,it doesn't  work well. I have install CUDA of 1080 ti and pycuda successfully,but it still says I need to install them.\nAnd I'm sorry that I can't reply you beacuse it's too hard for us to get  an usefull vpn to use google group.\n                                          Yours"
      },
      {
        "author": "Londstate",
        "date": "Jun 3, 2019, 3:36:00AM",
        "content": ""
      },
      {
        "author": "Londstate",
        "date": "Jun 3, 2019, 3:49:33AM",
        "content": "ps:Does it only support CUDA8.0?I installed CUDA 9.0."
      },
      {
        "author": "Craig Warren",
        "date": "Jun 3, 2019, 4:44:40AM",
        "content": "There is no requirement for CUDA 8.\n\nI think your CUDA and PyCUDA installation is not correct. It looks like you perhaps installed CUDA 9 after PyCUDA? For some reason PyCUDA is looking for a CUDA library which you clearly don't have. Try uninstalling PyCUDA and re-installing, i.e.\n\npip uninstall pycuda\npip install pycuda --no-cache\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yQaWzmQJmSE",
    "title": "Subject: Inquiry About Antenna Bandwidth and Frequency Adjustability",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Feb 27, 2025, 4:28:32PM",
      "content": "Dear gprMax community, \nI hope you are doing well. I am currently working with GPR antennas and have some technical questions regarding the following models: https://docs.gprmax.com/en/latest/user_libs_antennas.html\nGSSI 1.5GHz (Model 5100)\nMALA 1.2GHz\nGSSI 400MHz\nCould you please provide the bandwidth specifications for these antennas? Additionally, can the operating frequency of any of these models be adjusted to 0.825 GHz, and if it is possible, what other considerations need to be made?\nYour insights would be greatly appreciated. I'm looking forward to hearing back from you.\n\nBest \n\nHiman"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 2, 2025, 3:07:57PM",
        "content": "Dear Himan,\n\nYou may be able to find the bandwidth of the real antennas that these models attempt to replicate on the manufacturers website. The numerical models should have a similar bandwith which you can calculate by running the models and looking at the frequency spectra of the output. Remember the bandwidth will be affected by the material that the antenna is placed next to, i.e. coupling.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2Vp8p92pRqM",
    "title": "asisymmetric 2D problem",
    "original_post": {
      "author": "jan brezina",
      "date": "Oct 26, 2023, 2:21:08AM",
      "content": "Dear GprMax developers,\n\nI want to simulate EM behavior of an experimental device for rock saturation around the well. Currently, we try 1x transmitter - 1x receiver setup with cylindrical antennas. We want to get basic insight how the sensitivity of the device  change with some free parameters in the design. As the problem posses rotational symmetry around well axis, I would like to \nreduce the 3D calculation into 2D axisymmetric problem. I'm new to the EM calculations, but it seems there are some works using this kind of symmetry. Can I trick gprMax to do this kind of 2d simulation? \n\nThank you for suggestions.\n\nJan Brezina,\nTechnical University of Liberec, Czech Republic"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 27, 2023, 6:28:43AM",
        "content": "Hi Jan,\n\nThe short answer is \"No\". A cylindrical coordinates simulation cannot be faked by our TMz 2D code. We have used the 3D Cartesian solver for borehole GPR in the past (there are some papers about it) but this was done because the medium around the borehole did not have rotational symmetry. In your case if such symmetry exists a cylindrical coordinates formulation will be best but gprMax cannot do it. If you do not have access to a cylindrical coordinate code and the problem is small then as a compromise a 3D Cartesian code will do it but obviously not the best tool for the job!\n\nBest\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZsaRXPcKZwE",
    "title": "Re: #add_surface_roughness for 2D",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "AISWARYA K P",
        "date": "Jul 12, 2024, 4:00:14AM",
        "content": "Hello, \nWith my little knowledge, I think this command is applicable to a fractal box. Maybe you have to provide #soil_peplinski and #fractal_box before this.\n\n#add_surface_roughness:\nAllows you to add rough surfaces to a #fractal_box in the model. A fractal distribution is used for the profile of the rough surface.\nThis is what is given in gprMax docs. Please refer.\nThank you.\nOn Friday, July 12, 2024 at 4:38:59PM UTC+9 Zohaib Akbar Khan wrote:\nHello,\nkindly check the input file for 2D profile of snow underlying soil. I tried lot to add the surface roughness but invain, could you guys tell us that can we add surface roughness in 2D profile along the #box option becasue in 3D it can be added easily with fractral _box./\nthanks \nregards"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 15, 2024, 4:33:38AM",
        "content": "You can use the #fractal_box command with a #material rather than a #soil_peplinski and then add the rough surface, e.g.\n\n#material: 6 0 1 0 half_space\n#fractal_box: 0 0 0 0.240 0.170 0.002 1.5 1 1 1 1 half_space my_fractal_box\n#add_surface_roughness: 0 0.170 0 0.240 0.170 0.002 1.5 1 1 0.165 0.175 my_fractal_box\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/cWZUMaq2oPE",
    "title": "Database construction",
    "original_post": {
      "author": "Nadjib Kemache",
      "date": "Jul 6, 2021, 8:40:00AM",
      "content": "Hello everyone\nI made a database of 1000 examples with gprMax software, each time I change the fault length and calculate the electric field. The default length starts with \"0.0001m\" up to \"0.1m\".\n---------------------------------------------------------------------------------------------------------------------\n#domain: 0.6 0.6 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 0.00000001\n#material: 4.0000 0.0000 1.0000 0.0000 Sable\n#material: 3.0000 0.0000 1.0000 0.0000 Cable\n#material: 4.0000 0.0000 1.0000 0.0000 Junction\n#box: 0.00000 0.0000 0 0.60000 0.3000 0.001 Sable\n#box: 0.00000 0.1000 0 0.60000 0.1500 0.001 Cable\n#box: 0.29995 0.1000 0 0.30005 0.1500 0.001 Junction\n#rx: 0.450000 0.300000 0\n#geometry_view: 0 0 0 0.6 0.6 0.001 0.001 0.001 0.001 Junction n\n#title: Junction\n#messages: y\n#waveform: gaussiandotnorm 1.00 1500000000.00 MyLineSource\n#hertzian_dipole: z 0.150000 0.300000 0 MyLineSource\n------------------------------------------------------------------------------------------------------------------------------------------\nThe problem I have encountered is that there   are overlapping signals, especially for small fault lengths. I tried to modify the discretization step #dx_dy_dz but it results in a mesh which exceeds the RAM.\nMy question, is there a possibility to refine the mesh only in the default. Or should I just change the frequency '' fc '' and size of the description ''#dx_dy_dz''?\nThank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 12, 2021, 6:43:09AM",
        "content": "We need some more information about your application to help, i.e. what do your mean by 'fault lengths', and 'default'?\n\nThe centre frequency of the waveform used for a source usually represents the centre frequency of the actual antenna used. The spatial resolution should be chosen to adaquately represent the targets you are trying to model and to mitigate numerical dispersion - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6B9IxHyay7E",
    "title": "About the veracity of 2D models and the late direct wave",
    "original_post": {
      "author": "Zoey",
      "date": "Apr 14, 2020, 3:23:18AM",
      "content": "Hi everyone!\n\nI have two questions.\n\n1.The 2D model relys on the 2D  maxwell equation, but the real world is 3D. So how the gprMax ensure the accuracy ?\n\n2.I made a model, which antenna is 1cm above the ground, but the direct wave appears at 1e-9 s. The height is 1e-9*3*e8/2=0.15 m (According to echo data).I do not know why. \n\nMany thanks in advance."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 15, 2020, 4:49:28AM",
        "content": "Dear Zoey,\n\n1.The 2D model relys on the 2D  maxwell equation, but the real world is 3D. So how the gprMax ensure the accuracy ?\n\ngprMax uses Maxwell's equations in 3 dimensions, with the invariant direction in 2D modelled as a single cell slice, see our docs for a description (with diagrams) of this - http://docs.gprmax.com/en/latest/gprmodelling.html#basic-concepts Indeed the real world is 3D. Therefore if you are trying to simulate it with a 2D model, then you are making simplifications. Sometimes these simplifications will be sufficient, but of course if you want a 'better' result then you need to make your model more representative of reality by making it 3D, adding antenna models, more realistic soil models etc... It is up to the user to decide how simple or complex they need there simulation to be, and therefore how close to reality it can be.\n 2.I made a model, which antenna is 1cm above the ground, but the direct wave appears at 1e-9 s. The height is 1e-9*3*e8/2=0.15 m (According to echo data).I do not know why. \n\nThe first part of the waveform consists of a combination of the wave that travels directly between the source and receiver (depends on source/receiver separation distance) and the wave that is reflected from the surface (depends on height of source/receiver). You can see these two waveforms separately if you raise the source/receiver far enough off the surface. Please show us the input file you used so we can see, for example, what the separation distance between source and receiver was.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Zoey",
        "date": "Apr 15, 2020, 10:42:19AM",
        "content": "Dear Craig,\n\nThank you very much for your patient response. Here is my .in  file. The distance of the source and reciver is 2cm,and the height is 1cm. But the echo displays just one waveform.\n\nLooking forward to your reply.\n\nZoey"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 16, 2020, 4:18:51AM",
        "content": "Dear Zoey,\n\nYour source and and receiver are separated by 2cm and are 4cm above the surface according to the input file you attached. So as I explained before the wave travelling directly between the source and receiver will overlap the wave reflected from the surface. Once you have performed your B-scan, if you apply some gain to your data you should more clearly see responses from the PEC cylinder and 'stone' box.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/94QcR9Svs6A",
    "title": "hertzian dipole output fields",
    "original_post": {
      "author": "Hamed Qorbani",
      "date": "Oct 3, 2024, 11:46:53AM",
      "content": "Dear gprMax Team,\n\nI trust you are having a great day.\n\nI am currently studying the performance of the Hertzian dipole antenna and have a question regarding whether the far-field equations for this antenna are updated in  gprMax  . Additionally, I would like to know where these equations are stored in the  gprMax   code and how I can access and review them.\n\nI have noticed that the relationships can be retrieved using the function `get_function`, but I haven't been able to locate the actual equations or the `get_function` implementation. If possible, I would greatly appreciate your assistance in helping me find and examine the relationships implemented in  gprMax  .\n\nThank you very much for your time and support.\n\nBest regards,  \nHamed Qorbani"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 20, 2024, 11:03:56AM",
        "content": "Dear Hamed,\n\nI'm not sure what you mean by 'get_function'? However, gprMax numerically solves Maxwell's equations, so if you are in the far-field of the Hertzian dipole then you will see far-field behaviour.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gyMzpYDkXcg",
    "title": "peplinski soil in cylinder",
    "original_post": {
      "author": "Semede",
      "date": "Nov 22, 2021, 1:54:02PM",
      "content": "Hi ,\nI want to known if it is possible to define a peplinki soil as a material for a cylinder. I know peplinski is used with a fractal box, but for my research I need to put it in a cylinder, but I don't see how. \nThanks for your suggestion"
    },
    "responses": [
      {
        "author": "Semede",
        "date": "Nov 26, 2021, 2:56:14PM",
        "content": "Hi, \nDoes someone have any advise for my question.\nIt  will be great to have any response to let me know if what I want is possible or not.\nThanks!\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 26, 2021, 5:04:17PM",
        "content": "Hi \n\nIf you want the distribution to be fractal but in a cylinder and not in a box then this is not currently possible without a decent amount of work to create a fractal volume mapped on a cylinder and not a box. This is an idea for future but I don’t think we have the capacity to do this now.\nIf you want a single material that is prescribed by a peplinski soil mixing model that is homogenous there are two ways to do this.\n\n1. You can see the definition of the peplinski parameters in the code or in the PhD thesis of Iraklis Giannakis and just compute the single Debye pole parameters and use them in a material command with added dispersion. \n\n2. You can trick gprMax to generate the materials thinking that they will be used in a fractal box but then use them in other objects. gprMax prints out the names of materials automatically generated for a fractal box and once created you can reuse them in other objects. This is a hack but it does work\nTo explain I will use one of the simple 2D gprMax examples\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\nHere create a soil_peplinski with a variation of water. You must have some variation but you can adjust it to get the range of materials you want. The number of materials created need to be more than 1 and they are determined by the following fractal box command that here tries to create a single cell fractal box. This is obviously not right but it is not going to be used in the model. This just tricks gprMax to create the materials. You can see their names if you run the model without specifying them in your other objects but it is easy to predict the name. It is always as |{:.4f}| a float number with 4 decimals in between vertical bars that is the water fraction. It is calculated as the mid point of the number of bins to represent the materials. If you want 5 materials you get five bins. From 0.1 to 0.5 you get 0.1500, 0.2500, 0.3500, 0.4500 and 0.5500\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.1 0.5 my_soil\n#fractal_box: 0 0 0 0.002 0.002 0.002 1.5 1 1 1 5 my_soil my_soil_box\n\nYou then override the same fractal box cell with a free space cell to be back to where you started in terms of an empty space and don't have this small cell in your model with different properties\n#box: 0 0 0 0.002 0.002 0.002 free_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\nNow you can use the peplinski soil with the parameters specified (e.g. this has a 0.15 water fraction) in other objects as boxes, cylinders, spheres etc.\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 |0.1500|\n\nHope this makes sense! We should easily create a peplinski soil command to create such homogeneous medium but this is for the future! Obviously, gprMax has a built in multi Debye material capability and you can compute the parameters from the theory and then use them directly. This is much preferred but the hack above will work unless you want a fractal cylinder and sadly the way to get this is a bit too complicated.\n\nBest\n\nAntonis\n\n\nOn 26 Nov 2021, at 19:56, Semede <sko...@gmail.com> wrote:\n"
      },
      {
        "author": "Semede",
        "date": "Nov 26, 2021, 8:48:55PM",
        "content": "Hi Antonis,\n\nThank you so much for you advice. It's very clear and helpfull.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3-WbD10KmFY",
    "title": "How to get additional information on the .out file",
    "original_post": {
      "author": "Daniel González",
      "date": "Aug 3, 2020, 5:01:14PM",
      "content": "Hi everyone!\nI'm looking to add some additional information on the .out file for the models I run. I was able to include the source polarization by adding the following into line 119 of the filed_output.py file: \n        grp.attrs['Polarisation'] = src.polarisation\n\nI have spent some time but cannot figure out how to add information about model geometry. Specifically I want to assign a reserved name to my ground material (e.g \"Soil\") and know where is the ground surface (in the z-axis) just below were I place my source and receiver. What can you advice me in order to add this functionality? Many thanks for your help."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 4, 2020, 3:14:19PM",
        "content": "Hi Daniel,\n\nGlad you managed to add the extra polarisation property to the output file. The output file was never designed to contain material or geometry information on the model. Also you have to remember that you are not building object, i.e. soil, you are just setting material properties (update coefficients) for Yee cells. So internally gprMax has no sense of where the surface of your soil is. You might be better just saving this information from your input file rather than trying to include it in the output.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Daniel González",
        "date": "Aug 4, 2020, 6:00:19PM",
        "content": "Many thanks for your answer Dr. Warren!\n\nI will retrieve the information from the input file as advised. \nAlthough I do have a problem when doing it that way: if there is surface roughness in the model, surface height at each point is really unknown. Do you think there is a way to extract this information?\n\nI know you can look up the materials list from the Grid object, but then I don't know how to use this info to inspect the Yee cells. I thought that by making a query to the cells that match the material properties (for a given x and y) I could pick the value with the highest z coordinate and that would be my surface. Unfortunately I couldn't find how to make the query. Maybe it is not possible so I'll figure out how to work with an estimate.\n\nThank you for your time.\nBest regards,\nDaniel"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 21, 2020, 5:27:09AM",
        "content": "Hi Daniel,\n\nThere are two arrays in the FDTDGrid object that contain geometry information - https://github.com/gprMax/gprMax/blob/301e9da1bbf13e4b041f7aea9db619f9f62562f2/gprMax/grid.py#L157\n\nThe solid array contains integers that refer to the materials table where the material is specified for an entire Yee cell. The ID array contain integers that refer to the materials table for every Yee cell edge, i.e. the material associated with every field component, in the entire domain.\n\nThe upcoming version of gprMax will have a much more fully featured API. I would just advise caution when you start interacting directly with FDTDGrid parameters - it is very easy to break things and not realise you have done so.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Daniel González",
        "date": "Sep 1, 2020, 11:50:23AM",
        "content": "Thanks Dr. Warren! Will try it out and if I get somewhere I'll post it right here.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/26oVFfZ2mf4",
    "title": "How to set irregular interface in the model ?",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Jan 19, 2019, 8:02:15AM",
      "content": "Hi everybody!\n\nI meet a problem when I use the gprMax to simulate the following model , I don't know how to set the  irregular interface as shown in the model picture ,is there anybody can help me ?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 19, 2019, 12:10:52PM",
        "content": "Hi Dongyang,\n\nIf the geometry is 2D or 2.5D, i.e. 3D but with invariant geometry in one dimension, then consider using the PNG to HDF5 script - http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2F2Sl6RjP7uJI%2Ff2GDybYwBAAJ\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KHaUvtkbVqI",
    "title": "How to write a CSP (Common shot point) in file?",
    "original_post": {
      "author": "xutao Liao",
      "date": "Sep 4, 2016, 7:33:59AM",
      "content": "Hi, everyone, \nI want to get a Bscan of Common shot point, that the source point is fixed, and a serial the receive points are arranged in line. How to write the in file that make the software just compute once? How to use the commands?\nS R1 R2 R3 Rn\n~ ........~\n..~......~\n...~..~\n......~\n#title: CSP B-scan from layer half-space\n#domain: 1 1 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 18e-9\n#material: 6 0 1 0 half_space2\n#material: 3 0 1 0 half_space1\n#waveform: ricker 1 0.8e9 my_ricker\n#hertzian_dipole: z 0.1 0.90 0 my_ricker\n#rx: 0.11 0.9 0\n#src_steps: 0 0 0 (???)\n#rx_steps: 0.02 0 0\n#box: 0 0 0 1 0.9 0.002 half_space1\n#box: 0 0 0 1 0.6 0.002 half_space2"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 5, 2016, 7:50:35AM",
        "content": "Hi \n\nYou just need a #hertzian_dipole: command to specify your source and then use the #rx_array: command to specify any number of receiver points in one line. Alternatively, you can specify any number of #rx: points individually but this is cumbersome if you have a lot of output points. \n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/SLm7uD6NyGU",
    "title": "Some Question about How to Simulatie Dispersive Media",
    "original_post": {
      "author": "HT.T",
      "date": "Aug 11, 2020, 10:34:24AM",
      "content": "I haven't seen you for a long time.\n\n   I want to use gprmax to simulate the propagation of radar waves in homogeneous dispersive media. The detection method is the common center point method. \n\nAfter removing the air direct wave and critical refraction wave, the phase velocity calculated by me is quite different from that calculated by the frequency \n\ndependent dielectric constant. I would like to explore whether gprmax is enough for this purpose, or that my model is not set up properly. Phase shift method is \n\nused to extract radar phase velocity.\n\n  Cheers, HT.T\n\n\nMy code:\n\n#domain: 1.4 0.7 0.002 \n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 40e-9\n\n## soil2500\n#material: 9.44294161392092 0 1 0 soil2500\n#add_dispersion_debye: 2 4.86015931256357 1.90072020211854e-11 72.0753821760911 5.56640670473131e-9  soil2500\n\n##time_step_stability_factor: 1e-11\n\n#box: 0.1 0.1 0 1.1 0.11 0.002 pec\n#box: 0.1 0.11 0 1.1  0.24  0.002 soil2500\n#waveform: ricker 10 900e6 my_ricker\n#hertzian_dipole: z 0.1 0.24 0.001 my_ricker\n#rx: 0.9 0.24 0.001\n#src_steps: 0.01 0 0\n#rx_steps: -0.01 0 0\n\nThis is phae shift  method to extract phase velocity ."
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Sep 2, 2020, 10:11:52AM",
        "content": "Hello HT.T,\n\nI am not 100% sure but I think gprMax has been used in the past for this purpose.\nCheck this publication \"Inversion of dispersive GPR pulse propagation in waveguides with heterogeneities and rough and dipping interfaces\".\n\nKind regards,\nDimitris"
      },
      {
        "author": "HT.T",
        "date": "Sep 6, 2020, 8:53:39PM",
        "content": "Dear Dimitris.\n\n    Thank you very much,you advise is very helpful,GPRMAX can simulatie the dispersive media well.\n\nKind regards,\nHT.T"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Ta-_mXCAow4",
    "title": "MemoryError: cuCtxCreate failed: out of memory",
    "original_post": {
      "author": "Kurt Soncco",
      "date": "Feb 17, 2023, 12:06:03AM",
      "content": "Good evening, \n\nI'm encountering the following error when performing several simulations in a loop for creation of synthetic datasets. A simplified code is shown below:\n\nAs the iteration goes, the memory in the GPU keeps adding up. \n\nMy hardware characteristics is shown:\n How can I free the memory in order to avoid this error? \n\nThanks,\nKurt Soncco"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 17, 2023, 5:10:11AM",
        "content": "Hi Kurt,\n\nNo immediate ideas/solution I'm afraid - looks like a similar issue to https://github.com/gprMax/gprMax/issues/326 Could you add your information to this bug report.\n\nIf you have the time/inclination you could see if the bug is present in our 'devel' branch which also has a much better Python API.\n\nThanks,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6yKkAvMZPaI",
    "title": "Hi all",
    "original_post": {
      "author": "savita K.B",
      "date": "Jun 16, 2021, 6:07:06AM",
      "content": "I am attaching my code below.In this code actually i changed only the radius of the cylinder i.e 15 mm. But in the output file that metal cylinder covers full 60 traces. Actually the size of the cylinder is  #cylinder: 0.120 0.080 0 0.120 0.080 0.002.In the output file why it is covering full 60 traces.Please help me in understanding this. I am attaching paraview outputfile also.In that picture also its clearly visible the size of the object. But when we check the .out file its covered all 60 traces .Please tell me the concept.Thank you in advance.\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.015 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 12, 2021, 6:36:37AM",
        "content": "There are a number of fundamental factors that you need to understand here, such as:\nThe starting and finishing positions of the source and receiver \nThe trace spacing, i.e. source and receiver step size\nThe number of times the model is run, i.e. the number of A-scans in your B-scan\nThe radius of the the cylinder\nThe velocity of the background material\nThese are just some of the factors that will effect what your hyperbolic response from your cylindrical target will look like.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sZQB13PDMjo",
    "title": "need help aboult non-uniform concrete medium,",
    "original_post": {
      "author": "panlei",
      "date": "May 26, 2020, 11:18:16AM",
      "content": "hi everyone and Craig\n\nI want to use gprmax to simulate the situation in the non-uniform concrete medium, but I don't know how to set the specific parameters of Debye model, such as F4 is the relaxation time (seconds). I hope you can give me some help. I am also considering whether it is feasible to refer to crim in the user manual. I hope Craig can provide me with some information for my study. thank you!\n\nStudious students\n\nPan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 27, 2020, 4:21:51AM",
        "content": "Dear Pan,\n\nReading the following papers may be useful for information about using a Debye model to simulate concrete:\n\n• H. Liu, B. Xing, H. Wang, J. Cui, and B. F. Spencer, “Simulation of ground penetrating radar on dispersive media by a finite element time domain algorithm,” J. Appl. Geophys., vol. 170, Nov. 2019, Art. no. 103821.\n• T. Bourdi, J. E. Rhazi, F. Boone, and G. Ballivy, “Modelling dielectricconstant values of concrete: An aid to shielding effectiveness prediction and ground-penetrating radar wave technique interpretation,” J. Phys. D, Appl. Phys., vol. 45, no. 40, 2012, Art. no. 405401.\n\nThere is no CRIM model currently in gprMax, the reference you have seen in the docs explains that it would be possible to implement one following the framework we have created for the Peplinski soil model.\n\nObviously make sure you have a basic understanding of the underlying principles of the Debye model before trying to use it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "panlei",
        "date": "May 27, 2020, 9:54:21AM",
        "content": "Thank you very much. I'll study these two papers immediately. But I was in a previous paper: a new heterogeneous model of concrete for numerical modeling of ground rendering radar, which is a model built through crim, but I'm not sure how to simulate it"
      },
      {
        "author": "Craig Warren",
        "date": "May 27, 2020, 3:02:35PM",
        "content": "There is no CRIM model in gprMax at the moment, so you would have to code it yourself. There is also then the challenge of distributing the CRIM properties. The example we already use for soils is the Peplinski model (http://docs.gprmax.com/en/latest/input.html#soil-peplinski) distributed using a fractal distribution (http://docs.gprmax.com/en/latest/input.html#fractal-box).\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 15, 2020, 11:25:04AM",
        "content": "I want to go further on this.\n\n\nRight now I'm trying to use the Peplinski class to create a Concrete Class.\n\nFollowing\n\n“Modelling dielectricconstant values of concrete: An aid to shielding effectiveness prediction and ground-penetrating radar wave technique interpretation,” I am trying to use their proposed Debye-Model\n\n\nHowever, the PeplinskySoil class has no input for frequecy, does it?\nThis seems to be because the paper your work is based on seems to \"smmarize\" over frequency ranges. \n\nHow would I translate that towards a debye-model for concrete?\n\nFurthermore, following the paper and the code, I find this line defining the real part of the relative permitiity:\n\ner = (1 + (self.rb / self.rs) * ((es**a) - 1) + (muiter[0]**b1 * erealw**a) - muiter[0]) ** (1 / a)\n\ncomapring with formula (2) in the paper, the -1 seems to be missing in the paper.\n\nAm I missing something here?"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2020, 3:41:58PM",
        "content": "Dear Paul-Benjamin,\n\nHaving had a very quick look at the paper http://dx.doi.org/10.1088/0022-3727/45/40/405401 you mentioned, they are using an extended Debye model to simulate concrete. There is no mention of a heterogeneous model for concrete though. So my assumption would be that they are simulating the concrete as a homogeneous material with dispersive properties (using the extended Debye model). If this is what you are trying to replicate, then you don't need the Peplinski model or any modification to it. Simply create a Debye material (http://docs.gprmax.com/en/latest/input.html#add-dispersion-debye) and apply it to your geometry, most likely a #box command.\n\nHowever, if you are also trying to create a heterogeneous model for concrete along the lines of how the Peplinski model works for soils, then that is a different prospect. I am not aware that one currently exists. It would be interesting to research as obviously concrete has more defined material components - aggregate, cement, and water - in known quantities than soil. There is also a consideration of the shape and distribution of the aggregate.\n\nKind regards,\n\nCraig\n\nPS I think we resolved the question of the equation in the Peplinski paper in your post on GitHub - https://github.com/gprMax/gprMax/issues/262"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 24, 2020, 8:10:38AM",
        "content": "Hey Craig.\n\nIt's kind of a mix. I am trying to simulate a heterogeneous concrete or asphalt model.\nFor that I figured I could use the Peplinski class and tune it to a model suited for what I wanna do. \n\nMy plan was plugging it into the fractal box with zcells=1 to get the 2D-case\n\nFor what I want to do, a first step would've been a fractally distributed moisture inside that box, simulating air/water-filled gaps, cracks  and the whole spiel.\n\nMy geometry will be a randomly generated model where the \"layers\" in my \"road\" are randomly undulating, just like what we see here at GGD when we do a conventional road survey(you wouldn't believe how \"anything but flat\" roads are under the pavement)"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IvHe6Ldk8sU",
    "title": "I use the -geometry-only command line parameter to build the model and generate the VTI file. How do I use paraview to generate graphics?",
    "original_post": {
      "author": "jie wang",
      "date": "Apr 20, 2017, 6:32:32AM",
      "content": "Computer installed paraview software, but open the generated VTI file with the following tips, how to use paraview software to run VTI file to generate graphics?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 20, 2017, 8:30:37AM",
        "content": "Have you managed to open any other files or example files given with Paraview? It might be a problem with Paraview reading the Path to the file as there are some strange characters in it. Try moving the file directly to the root of the drive C: and see if this works. If it does then is your Path.\n\nAntonis"
      },
      {
        "author": "jie wang",
        "date": "Apr 20, 2017, 10:11:36PM",
        "content": "Is the path of the problem, thank you very much for your solution. Changed the path after the open and did not figure out ah, is the following situation, how to solve it?"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 21, 2017, 3:21:23AM",
        "content": "Follow the instructions in the User Guide: http://docs.gprmax.com/en/latest/output.html#geometry-output\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MWNzmoQqljk",
    "title": "Bscans",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Nov 22, 2024, 6:25:07AM",
      "content": "Bonjour,\nI have developed a Python script to generate 100 unique input files for creating B-scans. My simulation domain spans 5 meters with a step size of 1 mm. Based on my calculations, each run requires 492 iterations. Running this for 100 input files results in 100 × 492 iterations, which is computationally very demanding.\nWould you suggest any efficient strategies or optimizations to handle this computation in a smarter way?\nKind regards,\nNaween"
    },
    "responses": [
      {
        "author": "Himan Namdari",
        "date": "Nov 26, 2024, 4:47:47PM",
        "content": "Hi, \n\n\nThe best way is to use HPC for your computation; if you need this configuration set, you may use HPC to generate it. \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5bqwluNBFBo",
    "title": "Unable to View animation in Paraview",
    "original_post": {
      "author": "AISWARYA K P",
      "date": "Jun 26, 2024, 12:27:56AM",
      "content": "Hello -\nI tried the models given in the gprMax documentation, and while trying to view the animation in Paraview, it was not running.  Can you please help me with this? \nI appreciate any help you can provide. Thank you.\n\n\n   input file commands\n\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\n#python:\ntime_increment = 0.1e-10 / 30\nfor i in range(1, 31):\n    print('#snapshot: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 {} SS{}'.format(i * time_increment, i))\n#end_python:"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 26, 2024, 9:49:46PM",
        "content": "Are you following these instructions in the docs to view snapshots? - https://docs.gprmax.com/en/latest/output.html#snapshots\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/maSc-H0LRWs",
    "title": "Bscan parameter error",
    "original_post": {
      "author": "Robert Gallagher",
      "date": "Apr 30, 2021, 6:03:23AM",
      "content": "Hi all,\n\nThis might be a noob error on my behalf but I am having trouble getting a response from my Bscan output. I have attempted to replicate an in-lab experiment of a metal sphere behind a concrete wall however my scan result is not displaying aby response from the sphere.\n\nI have tried to move the antenna closer to the target but with no result. could the error be possibly with my time window or another of my parameters? With my current hardware it takes 10+ hours to run this model so I would appreciate anything that could reduce my trial and error time. \n\nI have attached my code and screenshots of the geometry and scan output.\n\nKind regards,\nRob."
    },
    "responses": [
      {
        "author": "L1A2Mike",
        "date": "Apr 30, 2021, 6:31:22AM",
        "content": "Hi Rob,\n\nSo there is a few things I noticed here:\n\n1)  First, the plot of your E_y return is valid what you are getting is (I think) a superposition of the Direct Wave (Ricker goes from Tx Antenna directly to Rx Antenna) and the reflection from the concrete surface as your ground surface is so close to your antenna (I have that problem to in my simulations).  What I would recommend is that you increase the height of your antenna first by say 10 or 20 cms (at least 2 pulse widths of the 1.5Ghz Ricker) so that you can separate the Direct Wave from the surface reflection to make sure that is what you are getting and build a better understanding (that's what I did and actually seeing vice being told helped me learn)\n\n2) Secondly, run time, why do you have so much empty space that doesn't matter in your model, I agree your Tx and Rx shouldn't be in the PML so I usually give them about 10-20 discretization blocks as a buffer so like (2-4cm at 0.002 or 1-2 at 0.001). I would resize your model to speed it up (i.e. kill the dead space).Also I would use a discretization size of 0.002 for all your preliminary models the results will in general be ok and they run significantly faster (I think like 2^3 times faster(ish)). Then when you have a final copy set discretization to 0.001 hit run and go to sleep.\n\n3) Finally, Data Processing, gprMax does not produce processed GPR results it produces an unprocessed A,B or C scan depending how it is used, this means you need to process the data, here are some methods that worked for me:\n\nBackground subtraction run the exact same model, but without your target of interest this will record the background objects (clutter, concrete, direct wave, etc) in your half space. Take these results as a matrix and subtract them from your results from the model with the target this way you are left only with the responses from the difference between the two targets (aka background subtraction) not valid in the real world necessarily but shows great results.\n\nMean Subtraction - this works wonderfully for planar boundaries, take the row mean of all your values i.e. take the means over the cross range dimension rather than the depth and subtract it from each row, it should remove all your direct wave response as well as the response from your planar surface. It will however alter the response from small point targets as the point target creates a mean that is greater than the majority of the cross range indices in its applicable time index, this is very evident if you transform the plot into dB. \n\nSVD / PCA - Treat the data as a matrix and perform SVD on it, from here remove certain eigenvectors from your response by filtering. I have not tried this method but if you google / check on the IEEE transactions website you can find a bunch of papers that give some decent guidelines. \nFrom here after data processing you have some data that you can now look at doing more processing such as filtering or transformation (Fourier, wavelet, etc.) for analysis and classification\n\nCheers,\n\nMike\n"
      },
      {
        "author": "Robert Gallagher",
        "date": "May 2, 2021, 12:50:21PM",
        "content": "Hi Mike,\n\nThank you very much for taking the time to respond to my query. \n\nMy initial scan was with my Tx and Rx at 48cm above the concrete, as I thought this was my issue my second scan was lowered to 2cm above the concrete. I have since conducted another model with the antenna height at 30cm above the concrete and still no joy. \n\nI hope to examine the processing of my results in Matlab tomorrow, although as I have not done this before I am sure it will take some time. It would have been nice to see some response before moving to the processing but unfortunately, time is against me. I am hoping to avail of some beefier assets this coming week to try and speed up my model run time. \n\nRob.\n"
      },
      {
        "author": "Robert Gallagher",
        "date": "May 5, 2021, 2:04:03PM",
        "content": "Hi Mike/all,\n\nI have subsequently run a model with just the metal sphere and no concrete and I am still not receiving the type of response I would expect (see attached). I am really unsure now where I have gone wrong. I am currently running the reverse of this model with no sphere and just the concrete to compare the results.\n\nAny assistance would be much appreciated.\n\nKind regards,\nRob.\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 5, 2021, 5:01:31PM",
        "content": "Hi Rob,\n\nI'm not really sure what type of response you are expecting. You are modelling a small sphere with source and receiver at distance, so the response from the sphere is likely to be small compared with the direct wave. Here is an example of a similar model which will run fairly quickly and produce an A-scan. Attached are the results in which you can see the response from sphere, when zoomed in, or if you apply some post-processing gain.\n\nHope this helps.\n\nKind regards,\n\nCraig\n\n#domain: 0.5 0.5 0.5\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5e-9\n\n#sphere: 0.25 0.15 0.25 0.010 pec y\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.20 0.45 0.25 my_ricker\n#rx: 0.30 0.45 0.25\n\n#geometry_view: 0 0 0 0.5 0.5 0.5 0.002 0.002 0.002 sphere n\n\n"
      },
      {
        "author": "Robert Gallagher",
        "date": "May 6, 2021, 9:53:51AM",
        "content": "Hi Craig,\nThank you for your response. The model response I was hoping for was some identifiable response from the sphere. I have created a 2D version of my scene which has returned as expected (see attached) but for some reason not in 3D.\n\nThe scene I have used is a 1:10 scale of a real-life lab setup which I am looking to replicate as closely as possible.\n\nKind regards,\nRob\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 6:17:07AM",
        "content": "Hi Rob,\n\nSome differences between 2D and 3D:\nYour source in 2D is a line source, whereas in 3D it is a point source - assuming you are using the Hertzian dipole\nThe geometric spreading is different in 2D and 3D.\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KLKvou8yra0",
    "title": "Running from specific trace",
    "original_post": {
      "author": "andrew kudo",
      "date": "Jul 10, 2021, 1:58:16AM",
      "content": "Dear all,\nI am new in gprMax and I have a question that I'm running Bscan and it automatically stop at middle. Is there any command can use to start at trace that it stopped?\nFor examples, run 494 traces of Bscan and it automatically stop at trace 345th and I want to run next trace, but when running command python -m gprMax .../model.in -n 494, it will calculate from beginning. I fixed it by moving the souces to that position of that trace and running from that.\nSo I want to know is there any command that choose the specific trace to run from that and dont change the position of sources in input file. In my example is trace 345th.\nSorry for my bad English and thank you for read this!"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Jul 12, 2021, 12:51:54AM",
        "content": "yes, there is a command.\n\nsee http://docs.gprmax.com/en/latest/include_readme.html#running-gprmax\n\n-restart [trace where to start]\n\nI've used this one sometimes with mij huge models to complete the calculations after hardware-failure.\n\nCheers, Micha\n"
      },
      {
        "author": "andrew kudo",
        "date": "Jul 12, 2021, 7:39:58AM",
        "content": "Thank you so much!\n\nVào lúc 11:51:54 UTC+7 ngày Thứ Hai, 12 tháng 7, 2021, Michael Fehér đã viết:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Afil7liPgNk",
    "title": "This has bothered me for a long time",
    "original_post": {
      "author": "Haoyuan Cheng",
      "date": "Dec 2, 2022, 9:32:21PM",
      "content": "Dear  Dr.Craig,\nI have been troubled by the direction of the object I created in space for a long time. As you said before, it can  extend in the z direction. It is too difficult for me to modify the code, so I changed the writing of #box,make y and z swap positions so that The model is what I want, but the problem with the antenna model again, because I try to change the direction of the antenna it seems to only rotate in the xy plane, not parallel to my existing model. I tried #waveform and it seems that the Bscan object area has no results because of the excitation direction.Dr.Craig,could you give me some advice.\n\nkind regards,"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jFK5e6RgOhY",
    "title": "Query related to syntax given in the manual",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "May 6, 2021, 10:12:35AM",
      "content": "Dear sir,\n             I have been trying to simulate an example file of wire dipole antenna given in manual. The IN file is simulated successfully. But the syntax\npython -m tools.plot_antenna_params user_models/antenna_wire_dipole_fs.out is giving errors. It is giving that tools.plot_antenna_params module not found. Please tell me what is wrong with here.\n\nThank you\n\nRegards\nRohit"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rn93atLGIoM",
    "title": "#excitation_file",
    "original_post": {
      "author": "Bernd Schafferer",
      "date": "Jan 22, 2018, 4:40:58PM",
      "content": "Hi \n\nI'm having a problem with excitation_file and can't figure out what i'm doing wrong.\nI would like to run a simulation with two voltage source using two different waveforms ( nsrc_0, nsrc_1) from the ex.txt file.\nHowever, the simulation results indicate that only the waveform from the 2nd column ( nsrc_0 ) is used to drive both voltage sources:\n\n#voltage_source: y 0.15 0.12 0.27 0.1  nscr_0, \n#voltage_source: y 0.18 0.12 0.27 0.1  nsrc_1.\n\n\nThanks for your help,\nBernd\n\n \n\n\n\n#domain: 0.24 0.24 0.32 \n#dx_dy_dz: 0.001 0.001 0.001 \n#time_window: 3e-09 \n\n#waveform: gaussian  100 2.5e9 p_pulse\n#waveform: gaussian -100 2.5e9 n_pulse\n#waveform: gaussian  0 2.5e9 no_pulse\n\n#excitation_file: ex.txt\n\n#rx: 0.088 0.12 0.052\n\n#voltage_source: y 0.06 0.12 0.27 0.1  no_pulse\n#voltage_source: y 0.09 0.12 0.27 0.1  no_pulse\n#voltage_source: y 0.12 0.12 0.27 0.1  no_pulse\n#voltage_source: y 0.15 0.12 0.27 0.1  nscr_0\n#voltage_source: y 0.18 0.12 0.27 0.1  nsrc_1\n\n#geometry_objects_read: 0.02 0.02 0.02 a_load_geo.h5 a_load_mat.txt"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 23, 2018, 6:02:26AM",
        "content": "Hi Bernd,\n\nThanks for spotting this. It is indeed a bug that was recently introduced when we added interpolation functionality to the importing of user-defined waveforms via the excitation file. I've opened an issue in our bug tracker - https://github.com/gprMax/gprMax/issues/139 - and I have pushed a fix to the master branch. I'd be grateful if you could update your code, give it test, and let me know if it is fixed.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Bernd Schafferer",
        "date": "Jan 23, 2018, 11:21:06AM",
        "content": "Hi Craig,\n\nAs far as i can tell, it works now.  \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XQhvfTCQpiE",
    "title": "Parameters that control the surface roughness",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Mar 26, 2018, 11:45:02AM",
      "content": "Greetings Craig, Antonis,\n\n\nI have some queries regarding the introduction of roughness on a surface. I understand that we use #fractal_box along with #add_surface_roughness to add roughness. I am creating a two-layered structure with roughness at each interface. Here is a snippet of the code I used:\n\n#fractal_box: 0 0.25 0 1.0 0.45 0.002 1 1 1 1 1 layer1 my_soil_box\n#add_surface_roughness: 0 0.45 0 1.0 0.45 0.002 1 1 1 0.449 0.451 my_soil_box\n\n#fractal_box: 0 0 0 1.0 0.3 0.002 1 1 1 1 1 layer2 my_soil_box1\n#add_surface_roughness: 0 0.3 0 1.0 0.3 0.002 1 1 1 0.299 0.301 my_soil_box1\n\nI am actually supposed to refer to a document (link: https://www.mitutoyo.com/wp-content/uploads/2012/11/1984_Surf_Roughness_PG.pdf, see Page 2 for Roughness parameters) to control the roughness of my material.\n\nHowever, I would like to know which parameters control the arithmetic mean, mean peak width and mean roughness depth in the command #fractal_box. The manual presents the values for f7 through f10 for #fractal_box.  But I would like to know if I can relate these values to the parameters that I aim to use (i.e. arithmetic mean, mean peak width and mean roughness depth).\n\nThanks in advance and have a good day!\n\nCheers,\nShreedhar."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 26, 2018, 12:15:42PM",
        "content": "The formulation is based on the PhD work of Iraklis Giannakis. To understand what it does check paper number [2] in the Publications list on gprmax.com and maybe Iraklis's thesis that you can get from a link in the Contacts page.\n\nInformation there will make clear the approach taken to implement these features.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gGwXbT2gt3M",
    "title": "gprMax for FMCW simulation",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Oct 2, 2016, 4:01:50PM",
      "content": "Hi everyone,\nI am kind new to radar systems in general and gprMax in particular but I will like to know whether and how gprMax can be used for FMCW radar simulation. \n\nThanks\nIkechukwu"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 4, 2016, 5:28:51AM",
        "content": "Hi Ikechukwu,\n\nIn principle, an FDTD solver like gprMax can be used to simulate an FMCW radar scenario. The logistics for doing so are not that favourable as you will need very long runs. Approaching it in a simple fashion by running one single frequency at a time would take even longer. There might be some tricks you can play be simulating the numerical impulse response of the system and then use convolutions but these are not tested and you need to know what you are doing and have a good understanding of FDTD and how it works. In general, FDTD has been primarily used for time domain analyses and for obtaining wideband frequency information from these types of simulations in one run. It is not best suited to synthesize time responses by a number of frequency runs. \n\nHope that helps!\n\nRegards\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JUK78etrWAU",
    "title": "Will rough surface be stable in the B-scan simulation with a certain i1?",
    "original_post": {
      "author": "Yu LIU",
      "date": "Jan 26, 2019, 3:10:08AM",
      "content": "Hi experts,\n\nNice weekend.\nI have a little simple question about the command #add_rough_surface:\nthere is an optional parameter i1 which controls generating the fractals, but will it be effective in defining the topography?\nI mean that, when I simulate a B-scan using a certain i1, will the rough surface (topography) be stable when I move the antennas?\n\nThanks and hope this won't bother your happy day."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 26, 2019, 4:56:46AM",
        "content": "Yes, seeding the random number generator with a number will ensure the generated rough surface is the same between models. You probably want to do the same for the fractal box if you are using it to create a soil distribution.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yu LIU",
        "date": "Jan 26, 2019, 1:10:07PM",
        "content": "Wonderful!!!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MJpDP5lG3pQ",
    "title": "Problems to interpret of the A-scan",
    "original_post": {
      "author": "Emiliano",
      "date": "Oct 3, 2017, 9:22:00AM",
      "content": "Good morning,\nI'm sorry if the question in not relevant, but I can't find a solution to the following problems.\nI'm trying to draw the time-offset charts for the simple case of a horizontal discontinuity (input file below).\n\n#title: A-scan omogeneosteps\n#domain: 2.00 1.20 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 30e-9\n\n#material: 6 0 1 0 half_space\n#material: 15 0 1 0 sottofondo\n\n#waveform: ricker 1 0.9e9 my_ricker\n#hertzian_dipole: z 0.200 0.810 0 my_ricker\n#rx: 0.300 0.810 0\n#rx_steps: 0.300 0 0\n\n#box: 0 0.150 0 2.00 0.800 0.002 half_space\n#box: 0 0 0 2.00 0.150 0.002 sottofondo\n\n\nIn the outputs there are some results that I don't understand.\n\n1) The first signal is the air wave I suppose. Why does the waveform change increasing the offset?\n2) According to the theory, because of its arrival time, the second segnal is the first reflection caused by the discontinuity. But its amplitude (exept in the first case) is bigger than the air wave. The reflection coefficient can't be major than 1. Where i'm wrong? \n\nnb I have the same problems using as deepest layer the pec material and turning off the dielectric smoothing.\n\nThank you for all your assistance."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 3, 2017, 11:06:01AM",
        "content": "Hi Emiliano,\n\nIt is easier to see what is going on if you fix the amplitude scaling of the plots (see attached). I have plotted Tx/Rx separations of 10, 20, 30, 40, 60cm. The first part of the waveform is the combination of the direct air wave from Tx to Rx, and the reflected signal from the surface of the 'half_space'. You can see as the separation increases this combined waveform separates into the two distinct waveforms. The second part of the waveform is the reflection from the interface of the 'half_space' and the 'sottofondo' layer. And the last part of the signal is a multiple of this reflection. As the separation between the Tx and Rx increases most of the energy from the Tx is transmitted into the 'half_space' which is why the amplitude of the first part of the waveform decreases.\n\nHope this helps to clear things up a bit.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6kIH0bEAxXc",
    "title": "gprMax installation problem",
    "original_post": {
      "author": "alpergenc",
      "date": "Jan 11, 2019, 6:29:38AM",
      "content": "Hi,\n\nI want to install gprMax on my computer. I am using Ubuntu 18.04. I followed the instructions on \"https://github.com/gprmax/gprMax\". I have installed Miniconda and checked that the Python installation is set as the default.\n\nThen I have applied the following commands one by one:\n\n$ conda update conda\n$ conda install git\n$ git clone https://github.com/gprMax/gprMax.git\n$ cd gprMax\n$ conda env create -f conda_env.yml\n\nAfter the last command I got an error like below:\n\n\n\nI did not understand the problem. Please can anyone help me? I have added the entire failure commands below.\n\nThanks in advance,\nAlper\n(base) mmrguser@mmrguser-CASPER-NIRVANA:/Data/miniconda3/gprMax$ conda env create -f conda_env.yml\nSolving environment: done\nPreparing transaction: done\nVerifying transaction: done\nExecuting transaction: done\nCollecting mpi4py (from -r /Data/miniconda3/gprMax/condaenv.k9bp92ov.requirements.txt (line 1))\nUsing cached https://files.pythonhosted.org/packages/31/27/1288918ac230cc9abc0da17d84d66f3db477757d90b3d6b070d709391a15/mpi4py-3.0.0.tar.gz\nCollecting terminaltables (from -r /Data/miniconda3/gprMax/condaenv.k9bp92ov.requirements.txt (line 2))\nCollecting tqdm (from -r /Data/miniconda3/gprMax/condaenv.k9bp92ov.requirements.txt (line 3))\nUsing cached https://files.pythonhosted.org/packages/d1/f9/8cbd36ef8bf84c5281e4943eaa12fe34850a0e8204e44872d8ca0c0ec741/tqdm-4.29.0-py2.py3-none-any.whl\nBuilding wheels for collected packages: mpi4py\nRunning setup.py bdist_wheel for mpi4py ... error\nComplete output from command /Data/miniconda3/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-t3cxahzl/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/pip-wheel-7lg3wbxh --python-tag cp36:\nrunning bdist_wheel\nrunning build\nrunning build_src\nrunning build_py\ncreating build\ncreating build/lib.linux-x86_64-3.6\ncreating build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/run.py -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/bench.py -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/__init__.py -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/__main__.py -> build/lib.linux-x86_64-3.6/mpi4py\ncreating build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/server.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/__init__.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/aplus.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/__main__.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/pool.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/_base.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/_lib.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/libmpi.pxd -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/__init__.pxd -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/MPI.pxd -> build/lib.linux-x86_64-3.6/mpi4py\ncreating build/lib.linux-x86_64-3.6/mpi4py/include\ncreating build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.MPI.h -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.MPI_api.h -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.h -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.i -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi.pxi -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\nrunning build_clib\nMPI configuration: [mpi] from 'mpi.cfg'\nchecking for library 'lmpe' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -llmpe -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -llmpe\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'mpe' dylib library\ncreating build/temp.linux-x86_64-3.6\ncreating build/temp.linux-x86_64-3.6/src\ncreating build/temp.linux-x86_64-3.6/src/lib-pmpi\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/mpe.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/mpe.o\ncreating build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/mpe.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libmpe.so\nchecking for library 'vt-mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt-mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt-mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nchecking for library 'vt.mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt.mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt.mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'vt' dylib library\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/vt.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/vt.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libvt.so\nchecking for library 'vt-mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt-mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt-mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nchecking for library 'vt.mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt.mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt.mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'vt-mpi' dylib library\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-mpi.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-mpi.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-mpi.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libvt-mpi.so\nchecking for library 'vt-hyb' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt-hyb -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt-hyb\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nchecking for library 'vt.ompi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt.ompi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt.ompi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'vt-hyb' dylib library\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-hyb.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-hyb.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-hyb.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libvt-hyb.so\nrunning build_ext\nMPI configuration: [mpi] from 'mpi.cfg'\nchecking for dlopen() availability ...\nchecking for header 'dlfcn.h' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\nsuccess!\nremoving: _configtest.c _configtest.o\nsuccess!\nchecking for library 'dl' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -Lbuild/temp.linux-x86_64-3.6 -ldl -o _configtest\nsuccess!\nremoving: _configtest.c _configtest.o _configtest\nchecking for function 'dlopen' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -Lbuild/temp.linux-x86_64-3.6 -ldl -o _configtest\nsuccess!\nremoving: _configtest.c _configtest.o _configtest\nbuilding 'mpi4py.dl' extension\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DHAVE_DLFCN_H=1 -DHAVE_DLOPEN=1 -I/Data/miniconda3/envs/gprMax/include/python3.6m -c src/dynload.c -o build/temp.linux-x86_64-3.6/src/dynload.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/dynload.o -Lbuild/temp.linux-x86_64-3.6 -ldl -o build/lib.linux-x86_64-3.6/mpi4py/dl.cpython-36m-x86_64-linux-gnu.so\nchecking for MPI compile and link ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\n_configtest.c:2:10: fatal error: mpi.h: No such file or directory\n#include <mpi.h>\n^~~~~~~\ncompilation terminated.\nfailure.\nremoving: _configtest.c _configtest.o\nerror: Cannot compile MPI programs. Check your configuration!!!\n----------------------------------------\nFailed building wheel for mpi4py\nRunning setup.py clean for mpi4py\nFailed to build mpi4py\nInstalling collected packages: mpi4py, terminaltables, tqdm\nRunning setup.py install for mpi4py ... error\nComplete output from command /Data/miniconda3/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-t3cxahzl/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-1f0i33w4/install-record.txt --single-version-externally-managed --compile:\nrunning install\nrunning build\nrunning build_src\nrunning build_py\ncreating build\ncreating build/lib.linux-x86_64-3.6\ncreating build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/run.py -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/bench.py -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/__init__.py -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/__main__.py -> build/lib.linux-x86_64-3.6/mpi4py\ncreating build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/server.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/__init__.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/aplus.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/__main__.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/pool.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/_base.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/futures/_lib.py -> build/lib.linux-x86_64-3.6/mpi4py/futures\ncopying src/mpi4py/libmpi.pxd -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/__init__.pxd -> build/lib.linux-x86_64-3.6/mpi4py\ncopying src/mpi4py/MPI.pxd -> build/lib.linux-x86_64-3.6/mpi4py\ncreating build/lib.linux-x86_64-3.6/mpi4py/include\ncreating build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.MPI.h -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.MPI_api.h -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.h -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi4py.i -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\ncopying src/mpi4py/include/mpi4py/mpi.pxi -> build/lib.linux-x86_64-3.6/mpi4py/include/mpi4py\nrunning build_clib\nMPI configuration: [mpi] from 'mpi.cfg'\nchecking for library 'lmpe' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -llmpe -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -llmpe\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'mpe' dylib library\ncreating build/temp.linux-x86_64-3.6\ncreating build/temp.linux-x86_64-3.6/src\ncreating build/temp.linux-x86_64-3.6/src/lib-pmpi\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/mpe.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/mpe.o\ncreating build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/mpe.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libmpe.so\nchecking for library 'vt-mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt-mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt-mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nchecking for library 'vt.mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt.mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt.mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'vt' dylib library\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/vt.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/vt.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libvt.so\nchecking for library 'vt-mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt-mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt-mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nchecking for library 'vt.mpi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt.mpi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt.mpi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'vt-mpi' dylib library\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-mpi.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-mpi.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-mpi.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libvt-mpi.so\nchecking for library 'vt-hyb' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt-hyb -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt-hyb\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nchecking for library 'vt.ompi' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -lvt.ompi -o _configtest\n/usr/bin/x86_64-linux-gnu-ld: cannot find -lvt.ompi\ncollect2: error: ld returned 1 exit status\nfailure.\nremoving: _configtest.c _configtest.o\nbuilding 'vt-hyb' dylib library\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-hyb.c -o build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-hyb.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/lib-pmpi/vt-hyb.o -o build/lib.linux-x86_64-3.6/mpi4py/lib-pmpi/libvt-hyb.so\nrunning build_ext\nMPI configuration: [mpi] from 'mpi.cfg'\nchecking for dlopen() availability ...\nchecking for header 'dlfcn.h' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\nsuccess!\nremoving: _configtest.c _configtest.o\nsuccess!\nchecking for library 'dl' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -Lbuild/temp.linux-x86_64-3.6 -ldl -o _configtest\nsuccess!\nremoving: _configtest.c _configtest.o _configtest\nchecking for function 'dlopen' ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ _configtest.o -Lbuild/temp.linux-x86_64-3.6 -ldl -o _configtest\nsuccess!\nremoving: _configtest.c _configtest.o _configtest\nbuilding 'mpi4py.dl' extension\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DHAVE_DLFCN_H=1 -DHAVE_DLOPEN=1 -I/Data/miniconda3/envs/gprMax/include/python3.6m -c src/dynload.c -o build/temp.linux-x86_64-3.6/src/dynload.o\ngcc -pthread -shared -B /Data/miniconda3/envs/gprMax/compiler_compat -L/Data/miniconda3/envs/gprMax/lib -Wl,-rpath=/Data/miniconda3/envs/gprMax/lib -Wl,--no-as-needed -Wl,--sysroot=/ build/temp.linux-x86_64-3.6/src/dynload.o -Lbuild/temp.linux-x86_64-3.6 -ldl -o build/lib.linux-x86_64-3.6/mpi4py/dl.cpython-36m-x86_64-linux-gnu.so\nchecking for MPI compile and link ...\ngcc -pthread -B /Data/miniconda3/envs/gprMax/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/Data/miniconda3/envs/gprMax/include/python3.6m -c _configtest.c -o _configtest.o\n_configtest.c:2:10: fatal error: mpi.h: No such file or directory\n#include <mpi.h>\n^~~~~~~\ncompilation terminated.\nfailure.\nremoving: _configtest.c _configtest.o\nerror: Cannot compile MPI programs. Check your configuration!!!\n----------------------------------------\nCommand \"/Data/miniconda3/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-install-t3cxahzl/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-record-1f0i33w4/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-install-t3cxahzl/mpi4py/\n\nCondaValueError: pip returned an error\n\n(base) mmrguser@mmrguser-CASPER-NIRVANA:/Data/miniconda3/gprMax$"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 11, 2019, 6:41:07AM",
        "content": "Dear Alper,\n\nAs the error suggests, there is a problem with your underlying MPI installation. gprMax uses MPI for task farming multiple models on server and HPC machines, see http://docs.gprmax.com/en/latest/openmp_mpi.html If you don't intend to use MPI then you can comment out (place a hash symbol in front of) the installation of the 'mpi4py' module in the 'conda_env.yml' file within the gprMax package. Then update or re-create the conda environment. Otherwise you need to install a version of MPI on your machine before you create the conda environment.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "alpergenc",
        "date": "Jan 11, 2019, 7:22:27AM",
        "content": "Hello Craig,\n\nThank you for your answer. I have comment out the installation of the 'mpi4py' module as you suggested and re-create the conda environment succesfully. Then, I have build and install the gprMax. Finally, I have tried to run an example model with the following command: \"python -m gprMax user_models/cylinder_Ascan_2D.in\". However, I got an error like below. Could you please help me to solve this problem?\n\nThanks in advance"
      },
      {
        "author": "alpergenc",
        "date": "Jan 11, 2019, 9:35:50AM",
        "content": "Hi Craig,\n\nWhen I look at the previous questions in the forum, I have realized that this error is abot tqdm version 4.29.0. So, I have changed the line as \"- tqdm==4.28.1\"  in conda_env.yml and re-create the conda environment. Now, gprMax works fine.\n\nThank you for your help,\n\nRegards,\nAlper"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xw-6o9nc2XY",
    "title": "I wrote this procedure why the operation of the wrong?",
    "original_post": {
      "author": "jie wang",
      "date": "Apr 22, 2017, 1:07:36AM",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 22, 2017, 3:28:09AM",
        "content": "Hi Jie,\n\nIt is very difficult to tell from just screenshots, but it looks like the character you have used next to the cylinder command is not a correct colon.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "jie wang",
        "date": "Apr 22, 2017, 4:58:29AM",
        "content": "Thank you very much for your answer to the perfect solution to my problem."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/48oXTTjmtuI",
    "title": "frequency-dependent and complex material",
    "original_post": {
      "author": "Junjun Liu",
      "date": "Mar 7, 2017, 9:29:51AM",
      "content": "Hello,\nIn my model, there is a material, ferrite, which is frequency-dependent and own complex permeability, I have got the real and imaginary component of the ferrite in each frequency, but I don’t know whether gprmax support the definition of frequency-dependent and complex material, thanks.\nJunjun"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 7, 2017, 10:22:11AM",
        "content": "Hi Junjun,\n\ngprMax can handle complex permittivity and has a very inclusive model for them so, you can model very complex frequency dependencies. Unfortunately, that does not translate to complex permeability. As in GPR materials with a frequency dependent magnetic properties are rather rare we have not implemented such a model yet. It is possible but need someone to research and implement it.\n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 7, 2017, 10:32:42AM",
        "content": "Just to add, you could consider modelling your complex permeability as an complex effective permittivity - an approach described in this paper by Cassidy and Millington http://dx.doi.org/10.1016/j.jappgeo.2008.09.009\n\nYou could then use the current mechanisms in gprMax that Antonis mentioned - http://docs.gprmax.com/en/latest/features.html#dispersive-materials\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Junjun Liu",
        "date": "Mar 9, 2017, 1:37:36AM",
        "content": "Hi,\n\nThanks for your advice, I will have a try!\n\nKind regards\n\nJunjun"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OiIefTIBvw0",
    "title": "Soil Models",
    "original_post": {
      "author": "sravanip...@gmail.com",
      "date": "Nov 6, 2022, 10:38:29AM",
      "content": "I created 2 models with different materials of soil. In para view I didn't see any difference in between them. Can I visually see different materials in paraview if not can I anybody please tell me what is the reason?  Thank you in advance\n\nDry, sandy, flat (coastal) Soil Type 1 :\n#title: Source_GSSI_1500_coastal_soil\n#domain:  0.240 0.210 0.202\n\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 10e-9\n\n#material: 10 0.002 1 0 coastal\n\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 0.2 0.1 0.05 1.5 1 1 1 20 my_soil soil_box\n#box: 0 0 0 0.2 0.1 0.05 coastal\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.125, 0.094, 0.100, resolution=0.002)\n#end_python:\n\n#geometry_view: 0 0 0 0.240 0.210 0.202 0.002 0.002 0.002 GSSI_1500_soil_coastal n\n\n\n\nRich agricultural land (low hills) Soil Type 2:\n#title: Source_GSSI_distance_soil with free_space\n#domain:  0.240 0.210 0.202\n\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 10e-9\n\n#material: 15 0.01 1 0 agri\n\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 0.2 0.1 0.05 1.5 1 1 1 20 my_soil soil_box\n#box: 0 0 0 0.2 0.1 0.05 agri\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.125, 0.094, 0.100, resolution=0.002)\n#end_python:\n\n#geometry_view: 0 0 0 0.240 0.210 0.202 0.002 0.002 0.002 GSSI_1500_soil_agriculture n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 10, 2022, 4:06:27AM",
        "content": "A few points:\n1. You are overwriting your fractal box containing your heterogeneous soil model with a box of a single material in each model. That is why you do not see any soil distribution in Paraview.\n2. The properties you are using for your Peplinski soil in both models are the same.\n3. Since you are not seeding the random number generator used in the fractal box (see parameter 'i2' - https://docs.gprmax.com/en/latest/input.html#fractal-box), so you will get a different fractal distribution of the soil properties every time. \n4. You should consider extending the x and y dimensions of your boxes (fractal or normal box) to the size of the domain, so you create a soil half space. This is more realistic and mitigates reflections you will otherwise get between the boundary of your boxes and the surrounding free space.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KLyUH4pnPxE",
    "title": "Different amplitudes according to processors",
    "original_post": {
      "author": "Grégory ANDREOLI",
      "date": "May 6, 2021, 3:06:39AM",
      "content": "Hi everyone,\n\nI generate database with gprMax on different computers and I found differences between the values of the amplitudes according to the processors.\n\nI use I3-4100M (CPU), I7-8650U (CPU) , Xeon E5410 (CPU) , Xeon Gold 6130 (CPU)  and Tesla M60 (GPU).\n\nI found similar amplitude levels between  I3-4100M vs. Xeon E5410 and between  I7-8650U vs. Xeon Gold 6130. But I have differences in other cases (like  I3-4100M vs. I7-8650U or Xeon E5410 vs. Xeon Gold 6130 or  Tesla M60 vs. all). This error seems to be proportional.\n\nI perform my tests in simple and double precision.\n\nI would like to know why this gap ?  I think that the architecture / the generation of the processors is at issue. But my real question is : What is the good value ? Maybe I have to compare to an analytic model to have the real values and consequently which processor is closest to reality.\n\nI send you an attachment with a \".in\" in example and the \".out\" response for each processors.\n\nThank you very much !\nBest regards,\nGreg."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 7:00:43AM",
        "content": "Hi Gregory,\n\nI quickly plotted the Ez component in the output files you attached, and do not see the differences to which you refer. Are you able to share some plots that show what you are referring to?\n\nKind regards,\nCraig\n"
      },
      {
        "author": "Grégory ANDREOLI",
        "date": "May 10, 2021, 9:08:53AM",
        "content": "Hi Craig,\n\nThank you for your answer. First time, when I plotted the Ez, I don't see the difference. But when you compare precisely the values (with H5py for example), there is a little difference.\n\nFor example, if I take the Ez maximum value insimple precision for each case I send you, I have :\nEzMax [I3-4100M] = 2358,80419921875 V/m\nEzMax [I7- 8650U] = 2360,99877929687 V/m\nEzMax [Xeon E5410] = 2358,80419921875 V/m\nEzMax [Xeon Gold 613] = 2360,99877929687 V/m\nEzMax [Tesla M60] =  2361,0029296875 V/M.\n\nI have same results between the I3-4100M vs. the Xeon E5410 and between the I7- 8650U vs. Xeon Gold 613.\n\nI am attaching a spreadsheet comparing the Ez values in simple precision from each .out\n\nThank you very much !\nBest regards,\nGreg.\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 4:10:47PM",
        "content": "Thanks Gregory. Interesting. Can I check/confirm a couple of things:\nThese are all single precision, i.e. 32-bit float, outputs?\nDid you ensure you ran 'setup.py cleanall' and 'setup.py build' for each different CPU and between switching from single to double precision?\nAre you able to list the Python packages used for each CPU, i.e. with 'conda list'?\nThanks,\nCraig\n\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 11, 2021, 5:43:14AM",
        "content": "Hi Gregory,\n\nCan you try setting '#num_threads: 1' in your input file, and re-running two of the results that were previously different.\n\nThanks,\nCraig\n"
      },
      {
        "author": "Grégory ANDREOLI",
        "date": "May 11, 2021, 9:51:56AM",
        "content": "Hi Craig,\n\n- Yes, these are all in single precision but I performed the same tests in double precision (for two CPU and the GPU). I have differents results because of the precision but differents values too as the single precision for each processors.\n- I run 'setup.py cleanall' and 'setup.py build',\n- I list the Python Packages on the I7-8650U and Xeon E5410 and I have te same packages version,\n- I try to use '#num thread: 1' but there is same difference.\n\nI retry with my team on the other processors and come back to you.\n\nThank you very much for your help.\n\nBest regards,\nGreg.\n"
      },
      {
        "author": "David Guilbert",
        "date": "May 11, 2021, 4:25:46PM",
        "content": "Dear Craig,\nI performed the tests with my colleague Gregory.\nThese are all single precision, i.e. 32-bit float, outputs?\nYes, we compare all the data at single precision. We have done also the comparison for double precision.\nDid you ensure you ran 'setup.py cleanall' and 'setup.py build' for each different CPU and between switching from single to double precision?\nwe have followed the procedure you describe\nAre you able to list the Python packages used for each CPU, i.e. with 'conda list'?\nyou will find attached the list of Python packages (with their version) for the following processors Xeon Gold 6130 (The Tesla M60 card is on this computer) and I3 4100M.\nBest regards\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 12, 2021, 5:38:24AM",
        "content": "Dear David and Gregory,\n\nI have investigated this some more, and I think the bottom line is that the differences you are seeing are related to how floating point calculations are handled, and how floating point numbers are approximated on different Intel CPU architectures and on NVIDIA GPUs. There are potentially several factors at play here, and I recommend you have a read of the following articles:\nIntel document on Conditional Numerical Reproducibility (CNR) - https://software.intel.com/content/www/us/en/develop/articles/introduction-to-the-conditional-numerical-reproducibility-cnr.html\nNVIDIA document on Floating Point Precision and Performance - https://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf\nI think the first thing to try is to follow the advice in the Intel CNR document, and force the Intel Math library to follow the same pathway irrespective of the Intel CPU type. It looks like you can do this by setting a the MKL_CBWR environment variable before running gprMax, e.g.\n\nexport MKL_CBWR=SSE2; python -m gprMax fc4.5GHz_WC30_4.5_1e-05.in\n\nI would try the SSE2 setting first, as it seems to be the lowest common denominator between different Intel CPUs, but it may also be worth trying the AVX2,STRICT setting as well. \n\nThe second thing to try is to force the NVIDIA compiler (nvcc) to not use the Fused Multiply-Add (FMA) operation which is possible on GPU but (as far as I know) does not exist on CPU. This may bring the GPU result closer to the CPU one. You can do this by making a small change to the gprMax code (NB no need to recompile gprMax after this change, just run it). If you go into the module 'model_build_run.py' and to line 498, you should see the code\n\ncompiler_opts = None\n\nchange it to,\n\ncompiler_opts = ['-fmad=false']\n\nThe above assumes you are not using MS Windows. If you are then change line 496 to add the above argument to the compiler options list.\n\nI am interested to know how this goes, and will give it some more thought in the meantime. I'm also going to add it to our issue tracker on GitHub, so we have a record of it to refer back to in the future.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "David Guilbert",
        "date": "May 12, 2021, 5:32:38PM",
        "content": "Dear Craig,\nI agree with you, how floating point calculations are handled is the hypothesis that I would favor.\nFor the i3-4100M, we have AVX2 and for the Xeon_gold_6130 we have AVX512.\nThe two computers are under Windows, I use the command \"set MKL_CBWR=SSE2; python -m gprMax fc4.5GHz_WC30_4.5_1e-05.in\"\nThe output signal is the same, but I am not sure for  \"set MKL_CBWR=SSE2\" command. I don't know how to verify that MKL_CBWR variable is set well.\nBest regards\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 13, 2021, 10:53:54AM",
        "content": "You can check inside gprMax the value of environment variables. For example, if you go to the module 'input_cmds_singleuse.py' you could add at line 82:\n\nprint(os.environ.get('MKL_CBWR'))\n\nThis would give some confidence whether the environment variable is being set correctly. The next step is to figure out whether it is being picked up by the Intel math (MKL) library - I don't yet know how to check this.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 14, 2021, 8:55:50AM",
        "content": "Dear David/Gregory,\n\nIn order to investigate this behaviour further it would be useful if you can run the following input file on the different machines you have access to. This input file is about the most basic that can be run - by switching off the PMLs and using an impulse excitation we remove the need for gprMax to use any extra math functions such as exponentiation or any trigonometric functions. The signal in the output file will not make much sense, but that does not matter. The key is to see whether the differences between different architectures are smaller. I have run the model on an Intel CPU and NVIDIA GPU and the max values in the output are as follows:\n\nIntel Xeon X5690:                                                    1676.477905273438\nNVIDIA GeForce GTX 1060:                                   1676.477661132812\nNVIDIA GeForce GTX 1060 (with -fmad=false): 1676.476196289062\n\nLet me know how it goes.\n\nKind regards,\nCraig\n\n#domain: 0.1 0.1 0.1\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 3e-9\n#pml_cells: 0 0 0 0 0 0\n\n#waveform: impulse 1 900e6 MySource\n#hertzian_dipole: x 0.025 0.025 0.025 MySource\n#rx: 0.075 0.075 0.075\n"
      },
      {
        "author": "David Guilbert",
        "date": "May 17, 2021, 10:07:54AM",
        "content": "Dear Craig,\nfirst, with the print(os.environ.get('MKL_CBWR')) I have the CBWR which is print correctly sse2. The results are identical.\n\nSecondly, when I run the script you provide the max values in the output are as follow:\ni3-4100M:                            1198.1124267578125\nXeon_gold_6130:               1198.1124267578125\nTesla_M60:                         1198.112060546875\nTesla_M60 -fmad=false:  1198.112060546875\n\nAs I'm under Windows 10 Professionnal, I have use the  Build Tools for Visual Studio 2019 for compilation\nBest regards\nDavid\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 17, 2021, 12:11:46PM",
        "content": "Dear David,\n\nI think you are looking at the Ey or Ez component, rather than the Ex component (polarisation of dipole) which I was giving max values of. However, no matter, the results between CPUs (i3 and Xeon Gold) which were different in your original example are now the same, and the difference to the GPU has reduced. So I think that is good news and suggests that the differences most likely arise from the pathway specific implementation of functions such as power and exponential in the Intel Math Library.\n\nThere are couple of further things to test:\nYou can test what library numpy is using (should be Intel MKL, but worth verifying) - run python interactively from the gprMax conda environment then import numpy as np and np.__config__.show()\nAdd the line #num_threads: 1 to the test input file\nI found some more environment variables for Intel MKL that might be worth trying: MKL_CBWR=COMPATIBLE, MKL_NUM_THREADS=1, MKL_DYNAMIC=FALSE\nThen try switching the waveform in the test input file back to a ricker (from an impulse), keeping everything else the same\nKind regards,\nCraig\n\n"
      },
      {
        "author": "David Guilbert",
        "date": "May 17, 2021, 4:37:37PM",
        "content": "Dear Craig,\nYes I was looking at the Ez component. For the Ex component the max values in the output are as follows:\ni3-4100M:                            1676.4779052734375\nXeon_gold_6130:               1676.4779052734375\nTesla_M60:                         1676.4776611328125\nTesla_M60 -fmad=false:  1676.4776611328125\nThey are similar to your results.\n\nI have attached a screenshot of  np.__config__.show()\nI will investigate the other points mentione.\nBest regards\nDavid\n"
      },
      {
        "author": "David Guilbert",
        "date": "May 17, 2021, 4:55:47PM",
        "content": "The attached file join before was for i3-4100M Under Windows 10 Professional.\nThe np.__config__.show() for the Xeon gold 6130 Under Windows server 2016 Standard:\n(gprMax) E:\\Generate_Bscan>python test.py\nblas_mkl_info:\n  NOT AVAILABLE\nblis_info:\n  NOT AVAILABLE\nopenblas_info:\n    library_dirs = ['D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_info']\n    libraries = ['openblas_info']\n    language = f77\n    define_macros = [('HAVE_CBLAS', None)]\nblas_opt_info:\n    library_dirs = ['D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_info']\n    libraries = ['openblas_info']\n    language = f77\n    define_macros = [('HAVE_CBLAS', None)]\nlapack_mkl_info:\n  NOT AVAILABLE\nopenblas_lapack_info:\n    library_dirs = ['D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_lapack_info']\n    libraries = ['openblas_lapack_info']\n    language = f77\n    define_macros = [('HAVE_CBLAS', None)]\nlapack_opt_info:\n    library_dirs = ['D:\\\\a\\\\1\\\\s\\\\numpy\\\\build\\\\openblas_lapack_info']\n    libraries = ['openblas_lapack_info']\n    language = f77\n    define_macros = [('HAVE_CBLAS', None)]\nThe difference between the two outputs could may be explain the different results.\nI do not understand the difference, between the two computer. I think I have complied with the installation procedure in both cases.\n\nBest regards\nDavid\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 18, 2021, 4:58:35AM",
        "content": "Hi David,\n\nnumpy can use different underlying accelerated linear algebra libraries - typically Intel MKL or OpenBLAS (https://numpy.org/install/) - and I'm not sure what determines which library is used. In any case, from your results (and also from my testing) it would seem that is does not make a difference  - as your results for i3-4100M and Xeon_gold_6130 are now the same. If you are really interested, you can force the OpenBLAS libraries to be used by adding the line '- blas=*=openblas' to your conda environment file, and then updating the environment. In my mind, testing the last point in my previous message is probably the next step:\nThen try switching the waveform in the test input file back to a ricker (from an impulse), keeping everything else the same\nKind regards,\nCraig\n\n"
      },
      {
        "author": "David Guilbert",
        "date": "May 21, 2021, 7:34:27AM",
        "content": "Dear Craig,\nWith the ricker, for the Ex component the max values in the output are as follows:\ni3-4100M:                                5.189558029174805\nXeon_gold_6130:                   5.178950309753418\nTesla_M60:                              5.181524276733398\nTesla_M60 -fmad=false:       5.181524276733398\nBest regards\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:19:04AM",
        "content": "Hi David,\n\nThose results suggest that when more 'complex' maths functions are used we see differences between the Intel architectures and also the NVIDIA GPU. The ricker wave uses exponential and power functions which are somehow being applied slightly differently across the different CPU and GPU architectures. Can you try some of the earlier environment variable and number of thread settings with this model to see if any of those bring the results closer together.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PtkACxPffWI",
    "title": "Regarding GPR code",
    "original_post": {
      "author": "savita K.B",
      "date": "May 5, 2021, 12:27:30PM",
      "content": "HiI am trying this code ,but not able to get the output. what is the mistake in this code? In this code its written iron rod of 1cm radius buried in sand in 30 centimeter depth. where to write this 30 centimeter in the code. How to try with different depths. One  more thing if you have any videos please  do send me the link.\n\nI have attached the code and also the output image. Please tell me if there are any mistakes.\n\n#title: B-scan from an iron rod of 1cm radius buried in sand in 30 centimeter depth\n#domain: 5 3 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 30e-9\n\n#material: 3 0.01 1 0 sand\n#waveform: ricker 1 6e8 my_ricker\n#hertzian_dipole: z 0.1 2.5 0 my_ricker\n#rx: 0.2 2.5 0\n#src_steps: 0.025 0 0\n#rx_steps: 0.025 0 0\n\n#box: 0 0 0 5 2.5 0.005 sand\n#cylinder: 2.5 2.19 0 2.5 2.19 0.005 0.01 pec"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 5, 2021, 4:17:59PM",
        "content": "Dear savikb,\n\nYou are trying to model your 1cm radius cylinder using a 0.5cm spatial resolution, i.e, with 2 FDTD cells. Therefore what you are modelling is not a cylinder. Before you run any model you should check the geometry (with the geometry view command). Had you done that you would see this.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eETKrh4uc9A",
    "title": "Internal MPI error ! FAILspawn not supported without process manager",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "May 6, 2019, 10:26:52AM",
      "content": "Hi Craig:\n              When I use MPI or OpenMP/MPI , it always occur errors as in the picture below:  What does it mean \"FAILspawn not supported without process manager\"?\n   Kind regards,\n                 Dongyang"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "May 7, 2019, 3:09:43AM",
        "content": "Dear Donyang,\n\n-mpi determinates the count of processes.\nI read eralier that your CPU has 28 cores. so your max -mpi is 29 (one source and 28 cores)\nthen your cpu wil process 28 A-scans at once and will do the following A-scans serial.\n\nbut 60 A-scans would take longer then nessessary, because every single core would do round about the same time to compute one A-scan. When they are ready the second heap will be computed - now your count is at 56 A-scans - the last 4 A-scans would be computes bij one core each.\nand this is ineffective because nearly 90% of the CPU wil be ideling for the last heap.\n\n\nsee http://docs.gprmax.com/en/latest/openmp_mpi.html \"OpenMP/MPI example\"\n\nThe computing-time will scale till 8 theads quite good.\nIf you'll use a #num-threads of 4, then 4 cores wil compute one A-scan about 4 times faster then 1 core will do. with -mpi of 8 (one master and 7 threads)\nnow 8 heaps of 7 A-scans wil be processed, and at the last heap of 4 A-scans will be done by 16 cores - about 5 times faster than -mpi 29\n\nso you may solf your own extremum problem to se wat wil compute most fast. in my opinion is it a #num-threads of 3 and a -mpi of 9\n\n\nregards, Micha"
      },
      {
        "author": "Dongyang Liu",
        "date": "May 9, 2019, 5:06:25AM",
        "content": "Hi Micha:\n          Much appreciate for your reply, I tried the two methods, However, the running time of two methods for the same model differ a lot:\n                        The -mpi 29 method takes 02:51:19 ; While num_threads=3 together with -mpi 9 take 13:48:32\n                  The running-time comparasion result seems unreasonable, I still can't figure out where the problrm is.\n Kind regards\n    Dongyang"
      },
      {
        "author": "Craig Warren",
        "date": "May 9, 2019, 7:42:23AM",
        "content": "Hi Dongyang,\n\nI think from a quick look at your CPU specs you have 2 x 14 cores. Therefore the maximum number of mpi tasks you should be specifying is 28, which means 1 master + 27 workers. That is assuming each task used only 1 OpenMP thread, which is probably not optimal as Micha pointed out. So if you use 4 threads per task (setting #num_threads: 4) then you should specify 7 mpi tasks, e.g. \n\npython -m gprMax user_models/cylinder_Bscan_2D.in -n 60 -mpi 7\n\nIf you really want to optimise performance, then I suggest you run some of the benchmarking tests (http://docs.gprmax.com/en/latest/benchmarking.html) to determine scaling on your system and then it will allow you to choose the optimal number of OpenMP threads.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/efCqPWQ1auQ",
    "title": "what am I doing wrong! (standard question I suppose)",
    "original_post": {
      "author": "Brad Artman",
      "date": "Jun 2, 2022, 1:15:11PM",
      "content": "so what I thought was a fairly simple idea-- trench, pipe, two kinds of fill in a half space  over bedrock. Couple of Ascans with different geology params= easy.  But no.\n\nFirst-- the docs say that boxes are overlayed, such that you can have a volume, then the next box replaces that model space, so just keep going\n\nBut when I run, with what I think should be 7 constant properties, the output has 23 lines, and material properties are all sums of everyone of the boxes, and properties are none that I sent to the .in file.\n\n\n       # <-          domain_x (3m)                   -> constant\n        #   s,r  |     s,r      | zero-offset and half m offset = 4 combinations\n        #  E_xyz |    E_xyz     | wavelet at s loc has orientations = 3 combinations\n        #  E_xyz |    E_xyz     | receiver has orientations for all fields,\n        #                           only keeping for plotting= 3 combinations\n\n\n        #        |    <-24\"->   | constant\n        #        |                   |\n        #\n        #\n        #        |                   | trench depth = 42\", constant\n        #        |                   | standard depth means changes in fill column\n        #\n        #        |                   |\n        #        |-----------------|\n        #                         initial fill over bedding =18\", constant\n        #        |___________|\n        #\n        #        |_______0___|\n        #        |              | bedding thickness = 4\", constant\n        #        |-------------------|\n        #        |____________| gap to lower = 6\", constant\n        #             some added space, for total domain_y ~= 1.24m (calculated)\n        #        |_____________|\n        #        first x coord of trench is middle domain_x=trench_x1\n        #                  second x coord of trech=trench_x1 + 24 in\n        #\n\n\n\n---------------------------- infile\n#title: A-scan from a resistive pipe\n#domain: 3.0 1.24 0.2\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-7\n\n#material: 6 0 1 0 earth\n#material: 4.5 200.0 1.0 0.0 lower\n#material: 5.5 500.0 1.0 0.0 bedding\n#material: 5.5 500.0 1.0 0.0 initial\n#material: 5.5 500.0 1.0 0.0 final\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 1.5 1.1 0.1 my_ricker\n#rx: 1.50 1.10 0.1\n\n#box: 0. 0. 0. 3. .06 0.2 lower y\n#box: 0. 0.06 0. 3. 1.22 0.2 earth y\n#box: 1.2 .27 0. 1.8 .37 0.2 bedding y\n#box: 1.2 .37 0. 1.8 .5 0.2 initial y\n#box: 1.2 .5 0. 1.8 1.22 0.2 final y\n\ncylinder: f1 f2 f3 f4 f5 f6 f7 str1 [c1]\nf1 f2 f3 are the coordinates (x,y,z) of the centre of one face of the cylinder,\nand f4 f5 f6 are the coordinates (x,y,z) of the centre of the other face.\nf7 is the radius of the cylinder.\nstr1 is a material identifier that must correspond to material that has already been defined in the input file, or is one of the builtin materials pec or free_space.\nc1 is an optional parameter which can be y or n, used to switch on and off dielectric smoothing.\n\n#cylinder: 1.5 0.38 0.0 1.5 0.38 0.2 0.010 free_space\n\n#geometry_view: 0. 0. 0. 3.0 1.24 0.20 0.002 0.002 0.002 slowtest_geometry n\n\n--------------------------screenshot\nModel title: A-scan from a resistive pipe\nNumber of CPU (OpenMP) threads: 2\nSpatial discretisation: 0.002 x 0.002 x 0.002m\nDomain size: 3 x 1.24 x 0.2m (1500 x 620 x 100 = 9.3e+07 cells)\nMode: 3D\nTime step (at CFL limit): 3.85167e-12 secs\nTime window: 3e-07 secs (77890 iterations)\n\nWaveform my_ricker of type ricker with maximum amplitude scaling 1, frequency 1.5e+09Hz created.\nHertzian dipole with polarity z at 1.5m, 1.1m, 0.1m, using waveform my_ricker created.\nReceiver at 1.5m, 1.1m, 0.1m with output component(s) Ex, Ey, Ez, Hx, Hy, Hz created.\nMaterial earth with eps_r=6, sigma=0 S/m; mu_r=1, sigma*=0 Ohm/m created.\nMaterial lower with eps_r=4.5, sigma=200 S/m; mu_r=1, sigma*=0 Ohm/m created.\nMaterial bedding with eps_r=5.5, sigma=500 S/m; mu_r=1, sigma*=0 Ohm/m created.\nMaterial initial with eps_r=5.5, sigma=500 S/m; mu_r=1, sigma*=0 Ohm/m created.\nMaterial final with eps_r=5.5, sigma=500 S/m; mu_r=1, sigma*=0 Ohm/m created.\nGeometry view from 0m, 0m, 0m, to 3m, 1.24m, 0.2m, discretisation 0.002m, 0.002m, 0.002m, with filename base slowtest_geometry created.\n\nMemory (RAM) required: ~6.67GB\n\nBox from 0m, 0m, 0m, to 3m, 0.06m, 0.2m of material(s) lower created, dielectric smoothing is on.                      \nBox from 0m, 0.06m, 0m, to 3m, 1.22m, 0.2m of material(s) earth created, dielectric smoothing is on.                   \nBox from 1.2m, 0.27m, 0m, to 1.8m, 0.37m, 0.2m of material(s) bedding created, dielectric smoothing is on.             \nBox from 1.2m, 0.37m, 0m, to 1.8m, 0.5m, 0.2m of material(s) initial created, dielectric smoothing is on.              \nBox from 1.2m, 0.5m, 0m, to 1.8m, 1.22m, 0.2m of material(s) final created, dielectric smoothing is on.                \nCylinder with face centres 1.5m, 0.38m, 0m and 1.5m, 0.38m, 0.2m, with radius 0.01m, of material(s) free_space created, dielectric smoothing is on.\nProcessing geometry related cmds: 100%|████████████████████████████████████████████████| 6/6 [00:06<00:00,  1.11s/cmds]\n\nPML: formulation: HORIPML, order: 1, thickness: 10\nBuilding PML boundaries: 100%|███████████████████████████████████████████████████████████| 6/6 [00:14<00:00,  2.44s/it]\n\nBuilding main grid: 100%|████████████████████████████████████████████████████████████████| 2/2 [00:26<00:00, 13.17s/it]\n\nMaterials:\n    |                                          |                     |       | sigma |      | sigma*  | Dielectric \n ID | Name                                     | Type                | eps_r | [S/m] | mu_r | [Ohm/m] | smoothable \n----+------------------------------------------+---------------------+-------+-------+------+---------+------------\n  0 | pec                                      | builtin             | 1     | inf   | 1    | 0       | False      \n  1 | free_space                               | builtin             | 1     | 0     | 1    | 0       | True       \n  2 | earth                                    |                     | 6     | 0     | 1    | 0       | True       \n  3 | lower                                    |                     | 4.5   | 200   | 1    | 0       | True       \n  4 | bedding                                  |                     | 5.5   | 500   | 1    | 0       | True       \n  5 | initial                                  |                     | 5.5   | 500   | 1    | 0       | True       \n  6 | final                                    |                     | 5.5   | 500   | 1    | 0       | True       \n  7 | earth+lower+lower+earth                  | dielectric-smoothed | 5.25  | 100   | 1    | 0       | True       \n  8 | free_space+earth+earth+free_space        | dielectric-smoothed | 3.5   | 0     | 1    | 0       | True       \n  9 | bedding+earth+earth+bedding              | dielectric-smoothed | 5.75  | 250   | 1    | 0       | True       \n 10 | initial+bedding+bedding+initial          | dielectric-smoothed | 5.5   | 500   | 1    | 0       | True       \n 11 | final+initial+initial+final              | dielectric-smoothed | 5.5   | 500   | 1    | 0       | True       \n 12 | free_space+final+final+free_space        | dielectric-smoothed | 3.25  | 250   | 1    | 0       | True       \n 13 | free_space+initial+initial+free_space    | dielectric-smoothed | 3.25  | 250   | 1    | 0       | True       \n 14 | free_space+bedding+bedding+free_space    | dielectric-smoothed | 3.25  | 250   | 1    | 0       | True       \n 15 | initial+earth+earth+initial              | dielectric-smoothed | 5.75  | 250   | 1    | 0       | True       \n 16 | final+earth+earth+final                  | dielectric-smoothed | 5.75  | 250   | 1    | 0       | True       \n 17 | bedding+earth+earth+earth                | dielectric-smoothed | 5.875 | 125   | 1    | 0       | True       \n 18 | initial+earth+earth+bedding              | dielectric-smoothed | 5.75  | 250   | 1    | 0       | True       \n 19 | final+earth+earth+initial                | dielectric-smoothed | 5.75  | 250   | 1    | 0       | True       \n 20 | free_space+free_space+earth+final        | dielectric-smoothed | 3.375 | 125   | 1    | 0       | True       \n 21 | free_space+initial+initial+initial       | dielectric-smoothed | 4.375 | 375   | 1    | 0       | True       \n 22 | free_space+free_space+initial+free_space | dielectric-smoothed | 2.125 | 125   | 1    | 0       | True       \n 23 | free_space+initial+bedding+bedding       | dielectric-smoothed | 4.375 | 375   | 1    | 0       | True       \n\nNumerical dispersion analysis: estimated largest physical phase-velocity error is -0.51% in material 'earth' whose wavelength sampled by 14 cells. Maximum significant frequency estimated as 4.14658e+09Hz\n\nWriting geometry view file 1/1, slowtest_geometry.vti: 100%|█████████████████████| 558M/558M [00:13<00:00, 41.5Mbyte/s]\n\nOutput file: /Users/bartman/gprMax/brad/slowlytest.out"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 28, 2022, 4:43:46PM",
        "content": "Your specified material are listed in the gprMax output - you can see them numbered 2-6 in output you copied. The materials after that are created by gprMax at all the interfaces of the materials you created - this is called dielectric smoothing - http://docs.gprmax.com/en/latest/input.html#dielectric-smoothing - and is expected behaviour.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jfwGxG0FFbE",
    "title": "A question about plotting the antenna pattern",
    "original_post": {
      "author": "Lun MA",
      "date": "Apr 23, 2019, 7:18:55AM",
      "content": "Hello,\n\nWhen I used the file \"initial_save.py\" and \"plot_fields.py\" to plot the antenna pattern, I found these two files existing in two different directories. .....gprMax\\user_libs\\antenna_patterns and .....gprMax\\build\\lib.win-amd64-3.6\\user_libs\\antenna_patterns. After making some changes to the first one I found nothing happened to the pattern. Should I make the changes to both of them?\n\nBest regards,\n\nLun"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2019, 7:45:46AM",
        "content": "I would recommend only making changes to modules in gprMax/user_libs. You should then run, \npython setup.py install\nwhich will install the updated module into the correct location(s).\n\nCraig"
      },
      {
        "author": "Lun MA",
        "date": "Apr 30, 2019, 12:07:12PM",
        "content": "Thank you Craig.\n\nLun"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6vFlS_uqw6s",
    "title": "Ascan and plot it at matlab",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Dec 17, 2019, 11:39:29AM",
      "content": "Hallo everybody,\n\n\nit is important to me i use it in Master Thesis .i need your help \n\n\nwhen i write the In files with different ways i obtain diffrent results \n\n\nthe first method in Infile \n\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 50 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.20 0.002 half_space\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\nthis figure i obtain to it \n\n\n\n\nthe second method in Infile :\n\n#python:\nfrom gprMax.input_cmd_funcs import *\ncommand('title', 'A or B scan from a metal cylinder buried in a dielectric half-space')\ndomain(0.240,  0.210 , 0.002) # man richtet sich nach Domain,wir mÃ¼ssen im Domin bleiben. \ndx_dy_dz( 0.002,  0.002,  0.002)\ntime_window(3e-9)                     # time of the window \nmaterial(permittivity=5, conductivity=0.0,\n         permeability=1.0, magconductivity=0.0, name='half_space')\nwaveform('ricker', amplitude=1, frequency=1.5e9,identifier='my_ricker')\nhertzian_dipole('z',0.100, 0.170, 0, identifier='my_ricker')\nrx(0.140, 0.170, 0.0)\n\nbox(0,0,0,0.20,0.170,0.002,'half_space')\n\ngeometry_view(0, 0, 0,\n              0.240, 0.210, 0.002,\n              0.002, 0.002, 0.002,'n')\n#end_python:\n\n\n......................................................................................................i wait the same result .......................................................................................................\n\nbut the result is not the same \n\n\n\n\n\n\n\n\n\n\npls where is the problem"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 17, 2019, 4:25:12PM",
        "content": "Hi Ahmed,\n\nIf things that are supposed to produce the same output do not the first thing we do is check that the two input files specify the same parameters. It is obvious that they do not. In one your material has a relative permittivity of 50 and in the other of 5. There might be other errors ...\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EJqBbYs4FQw",
    "title": "simulate different modes of antenna orientation",
    "original_post": {
      "author": "Lun MA",
      "date": "Aug 2, 2018, 1:40:59PM",
      "content": "Hey guys, I am going to simulate three different modes of the antenna orientation, which is attached as an image of what I want to model. As shown in the image, the three antenna orientations are perpendicular-broadside (YY mode, should be ZZ in gprMax considering different axis label), parallel-broadside (XX mode) and cross-polarization (YX mode, should be ZX mode in gprMax). I wonder if I can make it by just changing the parameter \"c1\" in \"#hertzian_dipole: c1 f1 f2 f3 str1 [f4 f5]\"  with \"z\", \"x\" and \"z\" while corresponding to \"Ez\", \"Ex\" and \"Ex\"?\nThank you!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 6, 2018, 2:57:06AM",
        "content": "Hi,\n\nIndeed you can change the polarisation of the Hertzian dipole source using the c1 parameter. \n\nAntonis"
      },
      {
        "author": "Lun MA",
        "date": "Aug 6, 2018, 7:36:46AM",
        "content": "Thanks for your reply. \nI am not sure if the antenna orientation can be regarded as the polarisation of Hertzian dipole."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pTCNAnAO_w4",
    "title": "not getting hyperbola from a metal cylinder buried in heterogeneous soil with grass",
    "original_post": {
      "author": "Avinash Kumar",
      "date": "Nov 16, 2021, 11:23:31PM",
      "content": "hello everyone,\ni was trying to take B-scan from a metal cylinder buried in heterogeneous soil with grass.\nthis is my code :\n#title: B-scan from a metal cylinder buried in a heterogeneous soil with grass\n#domain: 0.39 0.10 0.20\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5e-9\n\n#material: 2.6 0 1 0 half_space\n\n#waveform: ricker 1 2e9 my_ricker\n#hertzian_dipole: y 0.02 0.05 0.15 my_ricker\n#rx: 0.07 0.05 0.15\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#soil_peplinski: 0.25 0.25 2.0 2.06 0.001 0.020 my_soil\n#fractal_box: 0 0 0 0.39 0.10 0.070 1.5 1 1 1 50 my_soil my_soil_box\n#add_grass: 0 0 0.070 0.39 0.10 0.070 1.5 0.02 0.1 20 my_soil_box\n#cylinder: 0.21 0.02 0.05 0.21 0.08 0.05 0.04 pec\nbut i am getting some warning while running the code and in the output no hyperbola is coming for that buried cylinder. Please help me with this,\nthanks in advance"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 17, 2021, 9:06:48AM",
        "content": "Dear Avinash,\n\nYou will get a different fractal distribution for your Peplinski soil and grass each time you run the model, i.e. for each A-scan in your B-scan, unless you seed the random number generator - see parameter i2 in the docs for the fractal box and grass commands - http://docs.gprmax.com/en/latest/input.html#fractal-box, http://docs.gprmax.com/en/latest/input.html#add-grass\n\nCraig\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 17, 2021, 9:07:26AM",
        "content": "Its also worth doing some reading on what numerical dispersion is - which is why you are getting the warning message.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PrHPpmcA0Vk",
    "title": "Paraview crashes when trying to view screenshot.",
    "original_post": {
      "author": "Marvin Li",
      "date": "Jul 23, 2023, 9:00:09PM",
      "content": "Hello guys,\nThank you for making this software, so far, it's been pretty intuitive to use. I have an issue when viewing snapshots generated snapshots. both paraview 5.10.1 and 5.11.1 crashes when view the vti file generated. I have updated gprMax as of today following the User Guide. The geometric view generated could be opened just fine with paraview, and the macro works as intended. However, when i trying to open the screen shots vti files, paraview will just crash, and using the macro will return \"json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\". I have attached the input file.\n\nKind regards\nMarvin"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 24, 2023, 9:42:21AM",
        "content": "Hi Marvin,\n\nI ran your input file and the snapshots loaded OK for me in Paraview (5.11.1) on macOS - see attached quick screenshot. Have you tried just opening a single snapshot file in Paraview? It could be a weird Paraview bug.\n\nSorry I can't be of more help.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 24, 2023, 9:43:29AM",
        "content": "Also you could try removing your single snapshot (generated outside your for loop) from the snapshot folder in case that is confusing Paraview.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Z-0A0d3AvL8",
    "title": "Choosing a GPU",
    "original_post": {
      "author": "Hideaki Page",
      "date": "Oct 11, 2023, 7:12:43AM",
      "content": "Dear All\n\nI'm aiming to buy two GPU cards of GPR max.  I'm also putting together a dedicated machine to host them.\n\nFrom what I've read on the forum I need CUDA enabled with good memory and good memory bandwidth.\n\nI've seen cards with 24Gigs such as https://www.nvidia.com/en-gb/geforce/graphics-cards/40-series/rtx-4090/\n\nFortunately I have a budget from a funded project. However, if I invest the money will it all work or is there a case of diminishing returns on size and performance of these GPUs?\n\nI must admit I'm overwhelmed by the specs that are available. Can I go ahead an get the highest performance that I can afford or are there other considerations?\n\nI would appreciate any guidance.\n\nHideaki"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 11, 2023, 7:52:04AM",
        "content": "Hi Hideaki,\n\nThere is a substantial increase in performance when running the solver on a GPU compared to CPU. However, there are some advanced features that might not be available when running on a GPU especially for the forthcoming new version. Currently the new subgridding functionality works only on CPU. For \"standard\" modelling there should be no issues but if your work depends on using features that are not available by the GPU solver yet you need to check before you commit.\n\nFDTD, which is the underlying method gprMax employs, is primarily a memory bandwidth limited method. That means how quickly and how much you could be feeding the GPU with information is the factor that determines mostly the performance as the individual computations are simple and light when compared to other methods like FEM. Obviously having a good number of CUDA cores is also important as these are the ones that will do the work. \n\nAt the moment your model needs to fit completely into the GPU memory. If it does not it will not run. So, the total GPU RAM will be the limiting factor of how big your models can be. \n\nWe have used high-end commodity NVIDIA GPUs like the Titans X, Xp and RTX with great performance improvement and also tested on server grade A100 or V100. You can see some of the performance graphs on our website or from our paper on using gprMax on GPUs. It is easy to find from the website and it is open access.\n\nFinally, you can try this yourself if you install gprMax on Google Colab and then use an instance with a GPU (it will not be the fastest one!) but this will give you an indication of the runtime improvement compared to running on a simple CPU instance.\n\nHope this helps!\n\nAntonis \n\n"
      },
      {
        "author": "Vaheed G",
        "date": "Dec 20, 2023, 11:14:25AM",
        "content": "Hello Antonis,\n\nI know the program is compatible with multiple GPU setups for the process stage, but would you please also confirm that it can utilize the total VRAM of multiple GPUs to fit the model?\n\nThanks,\n-Vaheed\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 20, 2023, 11:25:10AM",
        "content": "No it will not! gprMax can use one GPU for running an instance of a model. The RAM of this GPU is the limit. We have not tried multiple GPU environments or connections to create a bigger VRAM and see it this works. I do not think it will without serious modifications of the code and this is a project we want to do as multiple GPUs will be very beneficial but this is not available yet.\n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/t6oFeNpWkV4",
    "title": "gpu",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Pavan Kumar Akula",
        "date": "Jul 22, 2019, 2:23:39AM",
        "content": "Hi,\nPlease try installing terminaltables as pycuda requires it.\nKind regards\nPavan."
      },
      {
        "author": "Londstate",
        "date": "Jul 22, 2019, 3:27:39AM",
        "content": "Thank you ,my friend. I have installed terminaltables ,CUDA and PYCUDA,but can't get a right result.And must the nvcc location be added in the path? I can't find it in the path is provided in the docs.\"\nYou may need to add the location of the CUDA compiler (nvcc) to your user path environment variable, e.g. for Windows C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\bin or Linux/macOS /Developer/NVIDIA/CUDA-10.0/bin.\n\"\n                                                                                                                                                                                                      Thank you !"
      },
      {
        "author": "Pavan Kumar Akula",
        "date": "Jul 23, 2019, 2:00:26AM",
        "content": "Hi,\n\nYes you have add the location of cuda/bin folder to the user environment. Generally all the user environment variables are present in .bashrc file.\n\nTo find the location of the nvcc please type \"which nvcc\" in terminal which let you know about the location of the cuda installation. Usually it is located in usr/local/ directory.\n\nIn my case I have the following lines in my .bashrc file.\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/usr/local/cuda-10.1/lib64\"\nexport CUDADIR=\"/usr/local/cuda-10.1\"\nexport PATH=\"$PATH:/usr/local/cuda-10.1/bin\"\n\nHope you find this useful.\nKind regards\nPavan Kumar."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fq6zAGJuISc",
    "title": "UnicodeDecodeError: 'utf-8'",
    "original_post": {
      "author": "Gökçen Merve Horuk",
      "date": "Oct 24, 2019, 7:22:12AM",
      "content": "Hi,\n\nI using the mixing soil model from Peplinski. I'm using the mixed soil model from Peplinski. I'm running \"python -m gprMax user_models / heterogeneous_soil.in\" as the input. Then I get the error when I run python -m gprMax user_models / heterogeneous_soil.out. Can you help me? Thank you.\n\nPS C:\\users\\bozok_mekatronik4\\gprMax-master>  python -m gprMax user_models/heterogeneous_soil.in\n\nHost: DESKTOP-RCUSGTF | MSI MS-7A74 | 1 x Intel(R) Core(TM) i5-7400 CPU @ 3.00GHz (4 cores) | 7.97GiB RAM | Windows 10 (64-bit)\n\n--- Model 1/1, input file: user_models/heterogeneous_soil.in ----------------------------------------------------------\n\nConstants/variables used/available for Python scripting: {c: 299792458.0, current_model_run: 1, e0: 8.854187817620389e-12, inputfile: C:\\users\\bozok_mekatronik4\\gprMax-master\\user_models\\heterogeneous_soil.in, m0: 1.2566370614359173e-06, number_model_runs: 1, z0: 376.73031346177066}\n\nModel title: Heterogeneous soil using a stochastic distribution of dielectric properties given by a mixing model from Peplinski\nNumber of CPU (OpenMP) threads: 4\nSpatial discretisation: 0.001 x 0.001 x 0.001m\nDomain size: 0.15 x 0.15 x 0.1m (150 x 150 x 100 = 2.25e+06 cells)\nMode: 3D\nTime step (at CFL limit): 1.92583e-12 secs\nTime window: 6e-09 secs (3117 iterations)\n\nWaveform my_ricker of type ricker with maximum amplitude scaling 1, frequency 1.5e+09Hz created.\nHertzian dipole with polarity y at 0.045m, 0.075m, 0.085m, using waveform my_ricker created.\nReceiver at 0.105m, 0.075m, 0.085m with output component(s) Ex, Ey, Ez, Hx, Hy, Hz created.\nMixing model (Peplinski) used to create my_soil with sand fraction 0.5, clay fraction 0.5, bulk density 2g/cm3, sand particle density 2.66g/cm3, and water volumetric fraction 0.001 to 0.25 created.\nGeometry view from 0m, 0m, 0m, to 0.15m, 0.15m, 0.1m, discretisation 0.001m, 0.001m, 0.001m, with filename base heterogeneous_soil created.\n\nMemory (RAM) required: ~214MB\n\nFractal box my_soil_box from 0m, 0m, 0m, to 0.15m, 0.15m, 0.07m with my_soil, fractal dimension 1.5, fractal weightings 1, 1, 1, fractal seeding None, with 50 material(s) created, dielectric smoothing is off.\nFractal surface from 0m, 0m, 0.07m, to 0.15m, 0.15m, 0.07m with fractal dimension 1.5, fractal weightings 1, 1, fractal seeding None, and range 0.065m to 0.08m, added to my_soil_box.\nProcessing geometry related cmds: 100%|████████████████████████████████████████████████| 2/2 [00:02<00:00,  1.00s/cmds]\n\nPML: formulation: HORIPML, order: 1, thickness: 10\nBuilding PML boundaries: 100%|███████████████████████████████████████████████████████████| 6/6 [00:03<00:00,  1.60it/s]\n\nBuilding main grid: 100%|████████████████████████████████████████████████████████████████| 2/2 [00:00<00:00,  4.54it/s]\n\nMemory (RAM) required - updated (dispersive): ~269MB\n\n\nMaterials:\n    |            |         |         | sigma     | Delta     | tau       | omega | delta | gamma |      | sigma*  | Dielectric\n ID | Name       | Type    | eps_r   | [S/m]     | eps_r     | [s]       | [Hz]  | [Hz]  | [Hz]  | mu_r | [Ohm/m] | smoothable\n----+------------+---------+---------+-----------+-----------+-----------+-------+-------+-------+------+---------+------------\n  0 | pec        | builtin | 1       | inf       |           |           |       |       |       | 1    | 0       | False\n  1 | free_space | builtin | 1       | 0         |           |           |       |       |       | 1    | 0       | True\n  2 | |0.0035|   | debye   | 3.67822 | 0.0109054 | 0.0191009 | 9.231e-12 |       |       |       | 1    | 0       | False\n  3 | |0.0086|   | debye   | 3.93309 | 0.0165236 | 0.0704761 | 9.231e-12 |       |       |       | 1    | 0       | False\n  4 | |0.0137|   | debye   | 4.16545 | 0.0205139 | 0.139061  | 9.231e-12 |       |       |       | 1    | 0       | False\n  5 | |0.0188|   | debye   | 4.38366 | 0.0237684 | 0.220869  | 9.231e-12 |       |       |       | 1    | 0       | False\n  6 | |0.0239|   | debye   | 4.59147 | 0.0265794 | 0.313802  | 9.231e-12 |       |       |       | 1    | 0       | False\n  7 | |0.0289|   | debye   | 4.79108 | 0.0290859 | 0.416508  | 9.231e-12 |       |       |       | 1    | 0       | False\n  8 | |0.0340|   | debye   | 4.98393 | 0.0313671 | 0.528021  | 9.231e-12 |       |       |       | 1    | 0       | False\n  9 | |0.0391|   | debye   | 5.17106 | 0.0334729 | 0.647611  | 9.231e-12 |       |       |       | 1    | 0       | False\n 10 | |0.0442|   | debye   | 5.35323 | 0.0354373 | 0.774695  | 9.231e-12 |       |       |       | 1    | 0       | False\n 11 | |0.0493|   | debye   | 5.53106 | 0.0372846 | 0.908801  | 9.231e-12 |       |       |       | 1    | 0       | False\n 12 | |0.0544|   | debye   | 5.70502 | 0.0390329 | 1.04953   | 9.231e-12 |       |       |       | 1    | 0       | False\n 13 | |0.0594|   | debye   | 5.8755  | 0.040696  | 1.19655   | 9.231e-12 |       |       |       | 1    | 0       | False\n 14 | |0.0645|   | debye   | 6.04283 | 0.0422849 | 1.34955   | 9.231e-12 |       |       |       | 1    | 0       | False\n 15 | |0.0696|   | debye   | 6.20729 | 0.0438084 | 1.5083    | 9.231e-12 |       |       |       | 1    | 0       | False\n 16 | |0.0747|   | debye   | 6.36912 | 0.0452736 | 1.67255   | 9.231e-12 |       |       |       | 1    | 0       | False\n 17 | |0.0798|   | debye   | 6.52852 | 0.0466866 | 1.8421    | 9.231e-12 |       |       |       | 1    | 0       | False\n 18 | |0.0848|   | debye   | 6.68567 | 0.0480524 | 2.01678   | 9.231e-12 |       |       |       | 1    | 0       | False\n 19 | |0.0899|   | debye   | 6.84073 | 0.0493752 | 2.19642   | 9.231e-12 |       |       |       | 1    | 0       | False\n 20 | |0.0950|   | debye   | 6.99384 | 0.0506588 | 2.38085   | 9.231e-12 |       |       |       | 1    | 0       | False\n 21 | |0.1001|   | debye   | 7.14511 | 0.0519062 | 2.56996   | 9.231e-12 |       |       |       | 1    | 0       | False\n 22 | |0.1052|   | debye   | 7.29467 | 0.0531203 | 2.7636    | 9.231e-12 |       |       |       | 1    | 0       | False\n 23 | |0.1103|   | debye   | 7.44261 | 0.0543036 | 2.96166   | 9.231e-12 |       |       |       | 1    | 0       | False\n 24 | |0.1153|   | debye   | 7.58903 | 0.055458  | 3.16402   | 9.231e-12 |       |       |       | 1    | 0       | False\n 25 | |0.1204|   | debye   | 7.734   | 0.0565857 | 3.3706    | 9.231e-12 |       |       |       | 1    | 0       | False\n 26 | |0.1255|   | debye   | 7.87761 | 0.0576883 | 3.58129   | 9.231e-12 |       |       |       | 1    | 0       | False\n 27 | |0.1306|   | debye   | 8.01991 | 0.0587673 | 3.796     | 9.231e-12 |       |       |       | 1    | 0       | False\n 28 | |0.1357|   | debye   | 8.16098 | 0.0598242 | 4.01464   | 9.231e-12 |       |       |       | 1    | 0       | False\n 29 | |0.1407|   | debye   | 8.30087 | 0.0608602 | 4.23715   | 9.231e-12 |       |       |       | 1    | 0       | False\n 30 | |0.1458|   | debye   | 8.43964 | 0.0618764 | 4.46343   | 9.231e-12 |       |       |       | 1    | 0       | False\n 31 | |0.1509|   | debye   | 8.57734 | 0.0628739 | 4.69343   | 9.231e-12 |       |       |       | 1    | 0       | False\n 32 | |0.1560|   | debye   | 8.71401 | 0.0638536 | 4.92708   | 9.231e-12 |       |       |       | 1    | 0       | False\n 33 | |0.1611|   | debye   | 8.84969 | 0.0648165 | 5.1643    | 9.231e-12 |       |       |       | 1    | 0       | False\n 34 | |0.1662|   | debye   | 8.98443 | 0.0657633 | 5.40505   | 9.231e-12 |       |       |       | 1    | 0       | False\n 35 | |0.1712|   | debye   | 9.11827 | 0.0666948 | 5.64926   | 9.231e-12 |       |       |       | 1    | 0       | False\n 36 | |0.1763|   | debye   | 9.25123 | 0.0676117 | 5.89687   | 9.231e-12 |       |       |       | 1    | 0       | False\n 37 | |0.1814|   | debye   | 9.38335 | 0.0685145 | 6.14784   | 9.231e-12 |       |       |       | 1    | 0       | False\n 38 | |0.1865|   | debye   | 9.51467 | 0.069404  | 6.40212   | 9.231e-12 |       |       |       | 1    | 0       | False\n 39 | |0.1916|   | debye   | 9.64521 | 0.0702807 | 6.65965   | 9.231e-12 |       |       |       | 1    | 0       | False\n 40 | |0.1966|   | debye   | 9.775   | 0.0711451 | 6.92039   | 9.231e-12 |       |       |       | 1    | 0       | False\n 41 | |0.2017|   | debye   | 9.90407 | 0.0719976 | 7.1843    | 9.231e-12 |       |       |       | 1    | 0       | False\n 42 | |0.2068|   | debye   | 10.0324 | 0.0728388 | 7.45133   | 9.231e-12 |       |       |       | 1    | 0       | False\n 43 | |0.2119|   | debye   | 10.1601 | 0.073669  | 7.72144   | 9.231e-12 |       |       |       | 1    | 0       | False\n 44 | |0.2170|   | debye   | 10.2872 | 0.0744886 | 7.99459   | 9.231e-12 |       |       |       | 1    | 0       | False\n 45 | |0.2221|   | debye   | 10.4135 | 0.0752981 | 8.27074   | 9.231e-12 |       |       |       | 1    | 0       | False\n 46 | |0.2271|   | debye   | 10.5393 | 0.0760978 | 8.54986   | 9.231e-12 |       |       |       | 1    | 0       | False\n 47 | |0.2322|   | debye   | 10.6645 | 0.076888  | 8.83192   | 9.231e-12 |       |       |       | 1    | 0       | False\n 48 | |0.2373|   | debye   | 10.7891 | 0.077669  | 9.11687   | 9.231e-12 |       |       |       | 1    | 0       | False\n 49 | |0.2424|   | debye   | 10.9132 | 0.0784411 | 9.40468   | 9.231e-12 |       |       |       | 1    | 0       | False\n 50 | |0.2475|   | debye   | 11.0367 | 0.0792047 | 9.69532   | 9.231e-12 |       |       |       | 1    | 0       | False\n 51 | |0.2525|   | debye   | 11.1596 | 0.07996   | 9.98877   | 9.231e-12 |       |       |       | 1    | 0       | False\n\nNumerical dispersion analysis: estimated largest physical phase-velocity error is -0.45% in material '|0.2525|' whose wavelength sampled by 15 cells. Maximum significant frequency estimated as 4.16471e+09Hz\n\nWriting geometry view file 1/1, heterogeneous_soil.vti: 100%|███████████████████| 13.5M/13.5M [00:00<00:00, 128Mbyte/s]\n\nOutput file: C:\\users\\bozok_mekatronik4\\gprMax-master\\user_models\\heterogeneous_soil.out\n\nRunning simulation, model 1/1: 100%|███████████████████████████████████████████████| 3117/3117 [05:10<00:00, 10.03it/s]\nMemory (RAM) used: ~339MB\nSolving time [HH:MM:SS]: 0:05:10.694492\n\n=== Simulation completed in [HH:MM:SS]: 0:05:17.535453 ================================================================\n\n\n\nSo far, no trouble. But after running output I get the error.\n\n\nPS C:\\users\\bozok_mekatronik4\\gprMax-master>  python -m gprMax user_models/heterogeneous_soil.out\n\nHost: DESKTOP-RCUSGTF | MSI MS-7A74 | 1 x Intel(R) Core(TM) i5-7400 CPU @ 3.00GHz (4 cores) | 7.97GiB RAM | Windows 10 (64-bit)\n\n--- Model 1/1, input file: user_models/heterogeneous_soil.out ---------------------------------------------------------\n\nTraceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\gprMax\\gprMax.py\", line 66, in main\n    run_main(args)\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\gprMax\\gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\gprMax\\gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\gprMax\\model_build_run.py\", line 134, in run_model\n    processedlines = process_python_include_code(inputfile, usernamespace)\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\gprMax\\input_cmds_file.py\", line 44, in process_python_include_code\n    inputlines = [line.rstrip() for line in inputfile if(not line.startswith('##') and line.rstrip('\\n'))]\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\gprMax\\input_cmds_file.py\", line 44, in <listcomp>\n    inputlines = [line.rstrip() for line in inputfile if(not line.startswith('##') and line.rstrip('\\n'))]\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\codecs.py\", line 714, in __next__\n    return next(self.reader)\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\codecs.py\", line 645, in __next__\n    line = self.readline()\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\codecs.py\", line 558, in readline\n    data = self.read(readsize, firstline=True)\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\codecs.py\", line 504, in read\n    newchars, decodedbytes = self.decode(data, self.errors)\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0x89 in position 0: invalid start byte\n\n\nThis is the code that i'm using.\n\n\n#title: Heterogeneous soil using a stochastic distribution of dielectric properties given by a mixing model from Peplinski\n#domain: 0.15 0.15 0.1\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: y 0.045 0.075 0.085 my_ricker\n#rx: 0.105 0.075 0.085\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 0.15 0.15 0.070 1.5 1 1 1 50 my_soil my_soil_box\n#add_surface_roughness: 0 0 0.070 0.15 0.15 0.070 1.5 1 1 0.065 0.080 my_soil_box\n\n#geometry_view: 0 0 0 0.15 0.15 0.1 0.001 0.001 0.001 heterogeneous_soil n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 24, 2019, 7:25:47AM",
        "content": "Gökçen,\n\nYou are trying to use the output file as an input file, which is wrong. The output file (HDF5 format) can be viewed using the accompanying Python or MATLAB scripts/tools. See the examples in the docs for how to plot A-scans and B-scans with these tools:\n\nhttp://docs.gprmax.com/en/latest/examples_simple_2D.html#view-the-results\nhttp://docs.gprmax.com/en/latest/examples_simple_2D.html#results\n\nCraig"
      },
      {
        "author": "Gökçen Merve Horuk",
        "date": "Oct 24, 2019, 7:59:20AM",
        "content": "Dear Craig thank you so much. I'll try again using the page you provided."
      },
      {
        "author": "Gökçen Merve Horuk",
        "date": "Oct 26, 2019, 5:31:27AM",
        "content": "Dear Craig,\n\nI tried again using the page you suggested. python -m tools.outputfiles_merge user_models / hetero / heterogeneous_soil When I use this join command, I get this error.\n\n\nPS C:\\users\\bozok_mekatronik4\\gprMax-master> python -m tools.outputfiles_merge user_models/hetero/heterogeneous_soil\nTraceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\tools\\outputfiles_merge.py\", line 126, in <module>\n    merge_files(args.basefilename, removefiles=args.remove_files)\n  File \"C:\\users\\bozok_mekatronik4\\gprMax-master\\tools\\outputfiles_merge.py\", line 84, in merge_files\n    fin = h5py.File(basefilename + str(model + 1) + '.out', 'r')\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\site-packages\\h5py-2.10.0-py3.7-win32.egg\\h5py\\_hl\\files.py\", line 408, in __init__\n    swmr=swmr)\n  File \"C:\\Program Files (x86)\\Python37-32\\lib\\site-packages\\h5py-2.10.0-py3.7-win32.egg\\h5py\\_hl\\files.py\", line 173, in make_fid\n    fid = h5f.open(name, flags, fapl=fapl)\n  File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"h5py\\h5f.pyx\", line 88, in h5py.h5f.open\nOSError: Unable to open file (unable to open file: name = 'user_models/hetero/heterogeneous_soil60.out', errno = 2, error message = 'No such file or directory', flags = 0, o_flags = 0)\n\n\nMy out file occurs but when I view it in Ez plane, the result graph is like this.\n\nhttps://drive.google.com/file/d/1CDLoA7xHG27IyNIrIg6BrMdIqpr8T17I/view?usp=sharing\n"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 28, 2019, 5:13:41AM",
        "content": "Dear Gökçen,\n\nThe heterogeneous_soil.in example is a single A-scan, i.e. there is no movement of the source and receiver to create a B-scan, therefore there is nothing to merge, and no sense in running the model multiple times. \n\nPlease take time to fully understand the examples I linked to as they contain the basic functionality of the software which you need to grasp before moving onto more complex examples.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/K31lR_btzG8",
    "title": "GSSI problem Bscan",
    "original_post": {
      "author": "mahmood safavi",
      "date": "Sep 3, 2017, 12:15:28PM",
      "content": "hi\ni am trying to use GSSI 1.5 GHz antenna in Bscan, but there is following error.\nhow can set z-coordinate within the model domain???\n-------------------------------------------------------------------------error message-------------------------------------------------------------------------------------------------------\nFile \"C:\\Users\\m4hmo0d\\gprMax\\gprMax\\model_build_run.py\", line 154, in run_model\n    process_multicmds(multicmds, G)\n  File \"C:\\Users\\m4hmo0d\\gprMax\\gprMax\\input_cmds_multiuse.py\", line 313, in process_multicmds\n    check_coordinates(xcoord, ycoord, zcoord)\n  File \"C:\\Users\\m4hmo0d\\gprMax\\gprMax\\input_cmds_multiuse.py\", line 61, in check_coordinates\n    raise CmdInputError(s)\ngprMax.exceptions.CmdInputError: '#transmission_line: y 0.069 0.288 0.006 230 myGaussian '  z-coordinate is not within the model domain\n-------------------------------------------------------------------------source code--------------------------------------------------------------------------------------------------------------\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.830 0.360 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 8e-9\n\n#material: 10.0 0.01 1 0 dry_clay_soil\n#material: 3.1 2.3e7 1 0 Alumin\n#material: 3.0 0.01 1 0 plast\n\n#python:\nfrom user_libs.antennas import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.040, 0.290, 0.002, 0.002)\n#end_python:\n\n#box: 0 0 0 0.830 0.240 0.002 dry_clay_soil\n#cylinder: 0.415 0.180 0.001 0.415 0.220 0.001 0.028 plast\n#cylinder: 0.415 0.190 0.001 0.415 0.210 0.001 0.025 Alumin\n---------------------------------------------------------------------------code for run Bscan--------------------------------------------------------------------------------------------------------\npython -m gprMax user_models/me/test.in -n 90"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 3, 2017, 2:26:26PM",
        "content": "Hi Mahmood,\n\nYour model is 2D so you cannot have a model of a real 3D antenna in it.\n\nAntonis"
      },
      {
        "author": "mahmood safavi",
        "date": "Sep 4, 2017, 9:32:11AM",
        "content": "Hi Antonis\nthanks for your answer.\nhow can convert 2D model to 3D model?\nis there any Tutorial for it?\nregards"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 5, 2017, 2:19:46PM",
        "content": "See http://docs.gprmax.com/en/latest/user_libs_antennas.html for details on the antenna models, and http://docs.gprmax.com/en/latest/user_libs_antennas.html as an example of how to use one to create a B-scan.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MfpyeiY2kds",
    "title": "Thickness approximation at z-direction in 3D structures for snapshot and waveforms in the out file",
    "original_post": {
      "author": "ARKA BHATTACHARYYA",
      "date": "Nov 26, 2021, 8:39:15AM",
      "content": "I have a few questions regarding the .out file and snapshot. If I have a box structure having 0.3m × 0.45m × 0.1m (x × y× z) dimension with dx-dy-dz is 0.002-0.002-0.002m  and I am placing a z-polarized Hertzian dipole at z=0.05m (half way along z) , x=0.130m and 0.170m (for tx and rx) , y=0.45 m, then at which z-slice (z=?) the waveforms are shown in the out file?\n\nAlso if I take snapshots for the above case then at which z-slice, the time snapshots are taken?\nIn the 2D cylinder_Ascan it is apparent that the program takes snapshots at z=0 and the waveforms in the out file also correspond to z=0. \nIn practical problems, if the z-thickness is 0.1 m for all cylinder and dielectric materials, then is it allowed to approximate them using 0.002 (one cell) at the z-direction? Will there be any significant error?\n\nSo many doubts I have asked. Thanks in advance."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 26, 2021, 9:34:16AM",
        "content": "The coordinate system and how the spatial coordinates are translated into grid coordinates are in the documentation and it should help understand where exactly the output points are. As you getting a I,j,k, component in the grid that is calculated by rounding the space point divided by the spatial step into a grid coordinate it should be easy to figure out. This is a result of the staggered grid nature of FDTD.\n\nWhen you have one cell thickness gprMax does a 2D computation and the assumption is that the invariance direction (i.e. the one cell thickness) is actually infinite. We do this in order to use the same code for 3D and 2D and not have to manage two different code bases. If you target is small in any direction you might need to do a full 3D model but this is up to you to decide.\n\nBest\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pwiIWhd5uAo",
    "title": "Distance between Ground bounce and object reflectance of GPR signal",
    "original_post": {
      "author": "alpergenc",
      "date": "Apr 21, 2017, 10:41:20AM",
      "content": "Hi everybody,\n\nI have a little confusion about GPR reflection of underground object. By using GPRmax, I have written the code below and I have obtained the A-scan GPR data given below.\n\n#domain: 1.000 0.250 0.450\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 5e-9\n#material: 3.0 0.00001 2.0 0.01 dry_sand\n\n#waveform: ricker 1 1.5e9 my_ricker\n\n#hertzian_dipole: y 0.500 0.110 0.360 my_ricker\n#rx: 0.500 0.140 0.360\n\n#src_steps: 0.006 0 0\n#rx_steps: 0.006 0 0\n\n#box: 0 0 0 1.000 0.250 0.200 dry_sand\n#cylinder: 0.500 0.125 0.150 0.500 0.125 0.100 0.050 pec    \n\nAs you see from the figure above, Ground bounce reflection is between 150-400 time samples. The reflection from the object is between 700-800 time samples. I mean that, the ground bounce reflection and the reflection from the object completely separates from each other in time. However, when I calculate theoretically, the wavelength of 1.5 GHz GPR signal is 20 cm. I have buried the object at 5 cm depth. Therefore, the ground bounce reflection and the reflection from the object should overlap theoretically. But they did not overlap in the simulation tool.\n\nDo I think something wrong? Could anybody help me about this confusion?\n\nKind regards,\nAlper"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 21, 2017, 12:26:44PM",
        "content": "Hi Alper,\n\nThe following is a rather simplistic \"back of the envelope\" estimate and many assumptions that often are not strongly applicable have been made. So, after this caveat:\n\nThe limit of vertical resolution could be simplistically defined as being between 1/2 or 1/4 of the spatial pulse width (wavelength of centre frequency can be an approximation to this). In your case, this is about between quarter and half the wavelength of the 1.5e9 frequency BUT NOT IN FREE SPACE as you have calculated but in the medium described as 'dry_sand' in your model. The following formula can be used:\n\nDr = W*u/4 \n\nwhere Dr is the limit of vertical resolution W is the pulse width (time) of the pulse (1/Fc) and u is the velocity of propagation in the medium 3e8/sqrt(Er*MUr). Your 'dry_sand' medium has both Er=3 and MUr=2, so the velocity is about 1.224e8. In any case, this calculation gives you about 2cm minimum separation for Dr. This is rather optimistic in practice and a value of\n\nDr = W*u/2 \n\nis more conservative (often the real resolution can be between these values). In this case, you are about  4cm as a limit of resolution.\n\nSo, what you get from gprMax is not really wrong. \n\nYour first mistake is not to take into account that the spatial extent of pulses (i.e. wavelengths of frequencies in the pulse) gets smaller as the velocity slows down. I think using an MUr of 2 for sand is not right and makes your medium much slower and the wavelengths shorter which 'improve' resolution, but I have yet to find 'dry_sand' with such properties ;-)\n\nHope this helps!\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Apr 24, 2017, 2:19:07AM",
        "content": "Hi Antonis,\n\nYour e-mail was very helpful for me. However, I have another confusion right now. I have created A-scan GPR signal from an object at 5 cm depth and from another object at 10 cm depth. The results are given below:\n\n\nAs you see from the images above, the time difference between the objects at 5 cm depth and at 10 cm depth is around 962-750=212 time samples. On the other hand, the time difference between the object at 5 cm depth and the ground bounce is around 750-283=467 time samples. Actually, I was expecting to see the same time difference for these two cases. Since, the depth difference is same (5 cm medium) between \"ground bounce - 5 cm depth object\" and between \"5 cm depth object - 10 cm depth object\".\n\nDo I think something wrong?\n\nKind regards,\nAlper"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 24, 2017, 8:05:37AM",
        "content": "Hi Alper,\n\nThe first big response you see is not the \"ground bounce\". It is the direct arrival from your source to the receiver which is about 3cm apart. The reflection from the surface should be there as well but might be mixed with this signal depending on distance and pulse length. \n\nYou can isolate the \"ground response\" by running a model with nothing (free space) and then a model with the half space only (no targets). Subtracting the two results will give you the reflected pulse from the ground. You can do similar tests to obtain the reflected signals only from targets and then compare.\n\nNeed to start simple and understand the key waveforms and reflection events you see before you combine things.\n\nBest\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Apr 26, 2017, 8:30:08AM",
        "content": "Hi Antonis,\n\nThank your for your e-mail. I have done some experiments and I have realized that the first big response is not the \"ground bounce\". This is very important information for my workings. Thanks again.\n\nThe results are above. At the first image, there is only half_space at 16 cm below the GPR antenna. Direct arrival is shown at time sample 283 and the ground bounce is shown at time sample 561. At the second image, there is a target object (pec) at 5 cm depth. The response from the target is shown at time sample 750.  At the third image, there is a target object (pec) at 10 cm depth. The response from the target is shown at time sample 961.\n\nThe time difference between \"ground bounce\" and \"5cm depth target\" is around 190 time samples. The time difference between \"ground bounce\" and \"10cm depth target\" is around 400 time samples which is almost twice of the previous case as expected.\n\nRight now, I have understood the direct arrival signal and the \"ground bounce\" :). However, as far as I know, GPR can shut-off the receiver while TX of GPR is transmitting the pulse to prevent this direct arrival signal. Is it correct? Otherwise, this direct arrival signal may dominate the reflection of the ground and the target. \n\nMoreover, I have another question. At the second figure above, the amplitude of the \"ground_bounce\" is 0.1795 and the amplitude of the reflection from the object at 5 cm depth is 0.2323. Again, as far as I know, almost always the highest amplitude should belong to the \"ground bounce\" since most of the transmitted signal reflects back when it hits the ground. Small amount of the transmitted signal can penetrate through the ground and some of this penetrated signal reflects back from the buried object. Therefore, the amplitude of the reflection from the object should be smaller than the \"ground bounce\". However, at the second image above, the situation is reversed. Do I think something wrong? What can be the result of this situation?\n\nKind regards,\nAlper"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 26, 2017, 11:03:10AM",
        "content": "Hi Alper,\n\nThis is not always the case and it depends on the parameters of the half-space and the targets. Your target is PEC which reflects much more strongly than the dielectric half-space. In practice as the media have stronger losses than a simple model usually this does not happen as much. In a modeling scenario, it is possible.\n\nRegards\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Apr 26, 2017, 12:01:28PM",
        "content": "Hi Antonis,\n\nThank you for your reply. Your answers are very helpful for me.\n\nRegards,\nAlper"
      },
      {
        "author": "alpergenc",
        "date": "Apr 27, 2017, 9:38:59AM",
        "content": "Hi Antonis,\n\nOne of your previous answers, you said me that \"using an MUr of 2 for sand is not right and makes my medium much slower and the wavelengths shorter which 'improve' resolution\". Actually, this is an important point while using GPRmax. As you know, this simulation tool is meaningful only if we create the materials and mediums according to their correct dielectric coefficients (permittivity, permeability, conductivity values). I have investigated the literature for these dielectric coefficients of materials; however these values of some materials (like some explosives to model landmines) are very difficult to find. Moreover, these values of common materials (like sand, soil, etc.) have very wide range in the literature. I mean that, for instance, in a book the relative permeability of \"dry sand\" is given as between 2 and 6; the relative permittivity of \"dry sand\" is given as between 10 and 30. Therefore, choosing the right coefficients to model materials in GPRmax is not an easy process.\n\nIs there any reference document to find these dielectric coefficients you can recommend?\n\nRegards,\nAlper"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 27, 2017, 1:30:02PM",
        "content": "Hi Alper,\n\nWelcome to the joys of GPR research ;-) Natural materials, and even some man-made ones, do not often have specific electrical properties as they are mixtures and the way they are made determines their dielectric behaviour. There is a lot literature on the matter and this is something you will have to discover as you do your research in your field. There is no \"one book\" solution on this matter.\n\nRegards\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Apr 28, 2017, 5:08:26AM",
        "content": "Hi Antonis,\n\nThank you for the answer. I will search this issue.\n\nRegards,\nAlper"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2D2Rf2P9sdg",
    "title": "Second object cannot be seen in C-scan",
    "original_post": {
      "author": "Tolunay Aydın",
      "date": "Oct 17, 2016, 4:07:36PM",
      "content": "Hello when i run the following code and use the A-scan data to obtain cumulative energy contour i only observe the reflections from the first object (cylinder as seen in the code) the second object( box) does not appear in the contour. Not only that, although the cylinder is seen, the shape is somewhat distorted and look like a hexagonal. How can i correct this problem.\nThanks in advance. The output files and matlab code is in the link below\nhttps://drive.google.com/open?id=0B-KjL6ayKw31M2xfUFJKZFVDbm8"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 18, 2016, 5:46:26AM",
        "content": "Hi Tolunay,\n\nOne of the first things you should do is check the geometry (use a #geometry_view command) of your model. Often the geometry you think you are creating is not what is actually created. In your case you are not creating a cylindrical object at all. This can be observed in the messages (no processed cylinder command) and in the geometry, if you view it. It is happening because you don't have a space between the cylinder command and it's parameters, so gprMax will not recognise it as a command at all.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 18, 2016, 1:02:10PM",
        "content": "I've put a check in place in the code to ensure you must always have a space between a command name and its parameters (in master branch on GitHub). This will help spot this issue in the future.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9FIrsh0zDos",
    "title": "Update problem",
    "original_post": {
      "author": "David Guilbert",
      "date": "Apr 14, 2021, 8:12:32AM",
      "content": "Dear all,\nI have done the following command to update gprMax:\n(gprMax)$ git pull\n(gprMax)$ python setup.py cleanall\n(gprMax)$ python setup.py build\n\n\nThe compiler is not found.\nI am under Windows 7, I have install Build tools as recommended in the documentation.\nI have set the Path and Environment Variables.\n\nIf someone can help me to fix the problem, I don't know which command to execute to have more information to resolve this problem.\nThank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 22, 2021, 3:22:02PM",
        "content": "Hi David,\n\nWe don't test against Windows 7 any more. However, you may find someone on this group has tried it and can help you.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gTfIYb3kdBQ",
    "title": "help with my model -- single copper triangle (x-y plane) on a big metal ground plane (y-z plane).",
    "original_post": {
      "author": "xianyang gao",
      "date": "Jan 5, 2017, 6:34:16AM",
      "content": "#python:\nfrom gprMax.input_cmd_funcs import *\n\ntitle = 'antenna_bowtie_singleend'\nprint('#title: {}'.format(title))\n\ndomain = domain(0.060, 0.500, 0.500)\ndxdydz = dx_dy_dz(0.001, 0.001, 0.001)\ntimewindow = time_window(5e-9)\nbowtie_dims = (0.050, 0.040) # triangle Length, height\nground_dims = (0.001,0.400,0.400) # x thick 1mm, y and z length 400mm\ntx_pos = (0.005, domain[1]/2, domain[2]/2)\n\n# Source excitation and type\nprint('#waveform: gaussian 1 1.5e9 mypulse')\nprint('#transmission_line: x {:g} {:g} {:g} 50 mypulse'.format(tx_pos[0], tx_pos[1], tx_pos[2]))\n\n# gound plane\nbox(tx_pos[0] - ground_dims[0], tx_pos[1] - ground_dims[1]/2, tx_pos[2] - ground_dims[2]/2, tx_pos[0], tx_pos[1] + ground_dims[1]/2, tx_pos[2] + ground_dims[2]/2, 'pec')\n\n# Bowtie - lower x half\ntriangle(tx_pos[0], tx_pos[1], tx_pos[2], tx_pos[0] + bowtie_dims[0], tx_pos[1] - bowtie_dims[1]/2, tx_pos[2], tx_pos[0] + bowtie_dims[0], tx_pos[1] + bowtie_dims[1]/2, tx_pos[2], 0, 'pec')\n\n\n# Detailed geometry view of x-y axis\ngeometry_view(0,0,0.249,0.060,0.500,0.251, dxdydz[0], dxdydz[1], dxdydz[2], title, type='f')\n\n#end_python:\n\nHi everyone,\n\nI am modelling a single-end bowtie antenna (single copper triangle) on a big metal ground plane. The horizontal triangle is on x--y plane, with x length = 50mm and y length = 40mm. The vertical ground plane is extended on y-z plane, with y and z length = 400mm.\n\nThe geometry view is ok in paraview with a 1mm gap between the ground plane and the triangle. I have attached the geometry vtp.\nI have attached the simulation results. But it does not match my measurement at all. I have attached my measured results too.\n\nCan you please help me to find out what is wrong in my model?\n\nThank you very much because I can not find the reason.\n\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 9, 2017, 5:51:14AM",
        "content": "Hi Xianyang,\n\nWhen I run your input file it gives a warning that your transmission line source is inside the PML region - sources and receivers should not normally be in the PML. If you then look at a geometry view of the entire model (see attached) you can see that your ground plane, transmission line, and part of the top of the bowtie are in the PML regions in the x-direction. So, make your domain bigger in the x-direction, and move these items out of the PML.\n\nA good rule-of-thumb is to allow at least 10 cells between the PML and any objects.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Jan 9, 2017, 6:59:52AM",
        "content": "Dear Craig,\n\nThank you very much. That is very helpful. I modelled the transmission line and the ground too near to the PML regions.\nI changed the x domain and results are good.\n\nThank you very much for your time again.\nBest regards\nXianyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/aK2omCwBlak",
    "title": "Can't find the excitation pulse file for the optimised GSSI 1.5GHz antenna model by Giannakis",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Apr 2, 2019, 3:41:15PM",
      "content": "Hello everyone,\n\nWhere is the excitation file for the GSSI 1.5GHz antenna optimised by Giannakis? According to the code, it should be a text file named, 'GSSI1p5optpulse.txt' located in the userlibdir folder but I can't find it there.\n\nThanks\nIkechukwu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 3, 2019, 7:07:48AM",
        "content": "Hi Ikechukwu,\n\nApologies that should have been part of the package. I have uploaded it now. Please pull the latest version from GitHub.\n\nLet me know if you have any problems.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Z7wOdiRoKds",
    "title": "Re: Assistance Needed with Adding Multiple Materials in GPR Simulation",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 30, 2024, 12:25:40PM",
        "content": "It is easy to use more materials. As you can see in the example there is a #material: command. You just have to add more of these that describe the electrical properties of your materials. gprMax knows the properties of \"free_space\" which is vacuum and \"pec\" which is perfect electric conductor and you can use these directly to include voids and metallic objects respectively. \n\nOnce you have your materials you use their IDs (names you have given them) in the object building commands like #box: or #cylinder: etc to build your model. The process of model building is like painting a canvas if your object building command covers an area build already with some properties the properties of the newer object override whatever is already there. In the beginning your model is empty space. So, the order of specifying object building commands is important.\n\nIt is very important to check your geometry and there are commands to help you do this and Paraview is easy to use to display the model.\n\nIf you get the spatial step the right size and the position of the sources and receivers then you will have a good model.\n\nHere is a two-layer model of the simple example that has 5cm of sand on the top before it transitions to the half-space properties.\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space with 5cm dry sand on top\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n#material: 4 0.001 1 0 dry_sand\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#box: 0 0.120 0.240 0.170 0.002 dry_sand\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\n\nBest of luck\n\nAntonis \n\nOn Friday 30 August 2024 at 16:38:41 UTC+1 mymi...@gmail.com wrote:\nHello, I am a bachelor's degree student who is starting to study GPR. I am a new user who does not understand much about the program. I need help. In the example of cylinder_Ascan_2D.in, there is only 1 underground material. But I want to add 2 or 3 materials that may be different materials. Is it possible? If it is possible, do you have an example for me to study? Thank you for all your advice or help."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 30, 2024, 12:55:56PM",
        "content": "Oops! There is a typo in the model ...\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space with 5cm dry sand on top\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n#material: 4 0.001 1 0 dry_sand\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#box: 0 0.120 0 0.240 0.170 0.002 dry_sand \n\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\n"
      },
      {
        "author": "SS MM",
        "date": "Aug 30, 2024, 1:32:39PM",
        "content": "Thx vey much sir\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/C-w13EkDQbo",
    "title": "Calculation of conductivity in Debye model",
    "original_post": {
      "author": "James T",
      "date": "Dec 5, 2021, 9:06:01PM",
      "content": "Hello everyone!\nI have a problem. I see in the Debye model of material.py that the conductivity calculation method of Debye model is er + = self.se / (w * e0). As far as I know, the calculation formula of the actual conductivity should not be er + = self. se / (- 1 * j* w * e0). Why is it directly superimposed on the real part of the complex dielectric constant?\nKind regard\nJames T"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 15, 2021, 8:54:01AM",
        "content": "Hi James,\n\nIndeed the there is a 'j' missing from that calculation. However, for the avoidance of doubt, it has no bearing on the output from any model as it is only used to estimate the permittivity for the purposes of warning the user about any potential numberical dispersion in the model. \n\nCorrected now. Thanks for spotting and flagging it.\n\nKind regards,\nCraog\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/oGcyUBn2ycY",
    "title": "Can't open the .vti file with Paraview",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "May 15, 2020, 11:32:59PM",
      "content": "Hi everyone!\n         When I use Paraview to open the geometry view of model(.vti file), I open the .vti file and click gprMax_info ,then it show error message like this, so where the problem is? I meet this several times."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 19, 2020, 4:20:53AM",
        "content": "Dear Dongyang,\n\nThis was fixed about 1 month ago, so if you update gprMax, then delete and re-install the Paraview macro, the error should go away.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Heloisa Moraes",
        "date": "May 29, 2021, 6:43:53AM",
        "content": "Hi everyone,\n\nI am having exactly the same issue  Dongyang described.\n\nI updated gprMax by early May and again just now and also deleted and re-installed the Paraview macro a couple of times, but the error warning remains the same. What should I do about it?\n\nThanks in advance.\n\nHeloisa\n\nPS: my gprMax's version is 3.1.5 and Paraview's is 5.7.0. I am running a Windows 10, with Python 3.7.3 and conda 4.10.1 \n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:25:20AM",
        "content": "Hi Heloisa,\n\nCan you try an older version of Paraview please, something in the 5.5.x range.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EawX4o9Fg_E",
    "title": "Plane wave implementation",
    "original_post": {
      "author": "Thorsteinn Kristinsson",
      "date": "Jul 10, 2024, 1:57:45PM",
      "content": "Hello, I wanted to inquire if the plane wave implementation has been completed?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/27Br9k3np_E",
    "title": "Inserting antenna model into computational model",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Apr 17, 2019, 11:21:13PM",
      "content": "Hi everyone!\n\n              When I insert a GSSI_400M antenna model into my computational, it occurs an error as follows(shown in the picture below), it seems the coordinates does not have the problem as the error message saying, then where the problem is? \n\nKind regards,\n          Dongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 18, 2019, 3:46:06AM",
        "content": "Dongyang,\n\nCan you attach or copy/paste the input file you are using please.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "Apr 18, 2019, 8:57:22PM",
        "content": "Hi Craig:\n                 This is my input file, it's a railway subgrade model using the GSSI400M antenna:\n           Kind regeads,\n           Dongyang"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 23, 2019, 4:01:52AM",
        "content": "Dongyang,\n\nThe spatial discretisation of your model is 10mm, however, you are trying to insert the model of the GSSI 400MHz antenna at a 1mm discretisation.  This will not work, and is the reason for the error you experience. You cannot (yet) mix spatial discretisations in the same model. Moreover, the GSSI 400MHz antenna model can only be used with resolutions 0.5, 1, and 2mm - http://docs.gprmax.com/en/latest/user_libs_antennas.html#information\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "Apr 29, 2019, 9:53:48PM",
        "content": "Hi Craig:\n              Thanks for your last reply ,my last problem has been solved, another question:\n              My computer has 28 CPU cores, when I run a model composed of 146 A_scans ,does the -mpi argument should be 147 ? (but it  occured errors), Then how can I use all the CPU cores to run the model?\n\nKind regards,\n           Dongyang"
      },
      {
        "author": "Craig Warren",
        "date": "May 1, 2019, 4:36:21AM",
        "content": "You have a couple of different choices since gprMax can use a mix of OpenMP and MPI for parallelism:\n\nUse only OpenMP to parallelise each model (A-scan) and then each A-scan is run serially, i.e. one after the other. In this case no need to use MPI, and each A-scan can use up to 28 CPU cores as OpenMP threads. The scaling performance (speedup) is not linear (see examples: http://docs.gprmax.com/en/latest/_images/Dell_PowerEdge_R630.png), it depends also on the size of the model. So I don't think this is the optimal solution.\nUse a combination of OpenMP and MPI. The number of OpenMP threads can be set using the #num_threads command in the input file, and the number of MPI tasks can be set using the -mpi command line argument. You need to ensure that each are chosen such that OpenMP threads x MPI tasks <= CPU cores I recommend you run some tests to find the optimal balance of OpenMP threads and MPI tasks, as this is often dependent on the specific machine.\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "May 9, 2019, 7:18:29AM",
        "content": "Hi craig:\n Much appreciate for your reply! My problem has been solved.\n  Kind regards,\n          Dongyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9dtE26uwZk8",
    "title": "Hi",
    "original_post": {
      "author": "savita K.B",
      "date": "Jul 15, 2021, 2:54:06AM",
      "content": "Hi \nI am attaching my code here. Please tell me why i am getting this error.(red colour one).\nPlease suggest me what changes i should do in my code. specifically tell me the values by analyzing this input file. Thank you in advance. I am getting the output ,but why this error.\n#title: B-scan from a metal cylinder buried in a soil\n#domain: 1.5 0.8 0.75\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 10e-9\n\n#material: 3 0.01 1.0 0 soil\n#material: 6 0.01 1.0 0.0 metal\n\n#waveform: ricker 1 900e6 my_ricker\n#hertzian_dipole: y 0.2 0.6 0.65 my_ricker\n#rx: 0.3 0.6 0.65\n#src_steps: 0.02 0 0\n#rx_steps: 0.02 0 0\n\n#box: 0 0 0 1.5 0.6 0.6 soil\n#cylinder: 0.3 0.4 0.3 0.7 0.4 0.3 0.1 metal\n#cylinder: 0.9 0.2 0.3 0.9 0.6 0.3 0.1 metal\n\n#geometry_view: 0 0 0 1.5 0.8 0.75 0.01 0.01 0.01 cylinder_metal_metal n"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Jul 15, 2021, 4:01:01AM",
        "content": "this is not an Error, that's a warning.\n\nno 'problem' here, if you don't need analytical data.\n\nsolution is to decrease spatial resolution or scale up the size of the model.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kfhCECc9QOg",
    "title": "Anyone having installation errors like this? Version 3.1, Mac OS Sierra",
    "original_post": {
      "author": "ghentr",
      "date": "Jul 31, 2017, 3:45:34PM",
      "content": "I have a problem that manifests itself two ways: \n   1) After installing, when I try to run a model, I get this message:\nfrom terminaltables import AsciiTable\nImportError: No module named 'terminaltables'\n\n2) Trying to trace this to its source, it seems like it might be a problem with the required gcc installation, which is also throwing errors (discovered upon deleting gprMax and attempting to reinstall it);  conda env create -f conda_env.yml eventually yields:\n\n Failed building wheel for mpi4py\n  Running setup.py clean for mpi4py\nFailed to build mpi4py\nInstalling collected packages: mpi4py, terminaltables, tqdm\n  Running setup.py install for mpi4py ... error\n    Complete output from command /anaconda/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/private/var/folders/y9/jpm29xkx63g31pnzv1h196w00000gn/T/pip-build-lwm1jt3j/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /var/folders/y9/jpm29xkx63g31pnzv1h196w00000gn/T/pip-5i5peq2r-record/install-record.txt --single-version-externally-managed --compile:\n.....\n    MPI configuration: [mpi] from 'mpi.cfg'\n    checking for library 'lmpe' ...\n    gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/anaconda/envs/gprMax/include -arch x86_64 -c _configtest.c -o _configtest.o\n    gcc -flat_namespace -undefined suppress -arch x86_64 _configtest.o -llmpe -o _configtest\n    ld: library not found for -llmpe\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\n    failure.\n  ....\n(and a bunch more manifestations of this same thing)\n....\n gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/anaconda/envs/gprMax/include -arch x86_64 -I/anaconda/envs/gprMax/include/python3.5m -c _configtest.c -o _configtest.o\n    _configtest.c:2:10: fatal error: 'mpi.h' file not found\n    #include <mpi.h>\n             ^\n    1 error generated.\n    failure.\n    removing: _configtest.c _configtest.o\n    error: Cannot compile MPI programs. Check your configuration!!!\n        ----------------------------------------\nCommand \"/anaconda/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/private/var/folders/y9/jpm29xkx63g31pnzv1h196w00000gn/T/pip-build-lwm1jt3j/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /var/folders/y9/jpm29xkx63g31pnzv1h196w00000gn/T/pip-5i5peq2r-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/var/folders/y9/jpm29xkx63g31pnzv1h196w00000gn/T/pip-build-lwm1jt3j/mpi4py/\n\nCondaValueError: pip returned an error.\n\nAny takers?\n\nThanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 1, 2017, 4:41:55AM",
        "content": "Hi ghentr,\n\nWelcome to the forum!\n\nThe problem you are experiencing is because the Python package mpi4py is not being installed properly, and because of that the subsequent packages terminaltables and tqdm never get installed. This all happens as part of creating the conda environment. mpi4py depends on having an underlying MPI installation - usually OpenMPI - and I suspect you don't have this which is why it is failing. You can install OpenMPI with homebrew -\nbrew install openmpi\nthen try creating the condo environment again\nconda env create -f conda_env.yml\n\nAlternatively if you don't think you'll ever use the MPI functionality (see User Guide - http://docs.gprmax.com/en/latest/openmp_mpi.html#mpi) you can edit the condo_env.yml file and remove the mpi4py line.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "ghentr",
        "date": "Aug 1, 2017, 8:59:25AM",
        "content": "Thanks, Craig; problem solved!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fL6ioj7XPRc",
    "title": "Quuestion: How can I change the length of the half-wavelength wire dipole antenna?",
    "original_post": {
      "author": "Changwan Sun",
      "date": "Jan 16, 2024, 1:38:42AM",
      "content": "Dear gprMax developers, \n\nHello, I read this part of your gprmax website about the wire dipole antenna. It said that the length of half-wavelength wire dipole antenna is 150 mm. \n\nMy questions are:\n\n1) Coud I change the length, like 3.75 m in your program? is it fixed in the antenna model?\n2) If not, Could I make an new antenna model by myself and contribute to your program? Could you guide some nice ways to make antenna model for running your program? \n\nWe are using GSSI MLF dipole antenna (Central frequency is 40 MHz). \n Sincerely, \nChangwan Sun"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 22, 2024, 5:02:51AM",
        "content": "Dear Changwan,\n\nThe half-wavelength wire dipole antenna is a very simple model, to a) demonstrate how to model simple antennas, and b) to be able to compare the numerical model with theory. You can certainly edit and change this model to make the antenna longer if you want but I am not sure how closely this will represent the GSSI MLF dipole antenna. If you want to make a more accurate model you would need to know the basic geometry, antenna materials, and feed waveform. This data is the starting point for building an antenna model and then usually requires optimisation to tune these parameters to match the modelled and real/measured antenna responses. You can read more about the approaches we have used in the publications section of the website - https://www.gprmax.com/publications.shtml, particularly:\n\nPatsia, O., Giannopoulos, A., Giannakis, I. (2023). Developing a realistic numerical equivalent of a GPR antenna transducer using global optimizers. Near Surface Geophysics, , . 10.1002/nsg.12280\nPatsia, O., Giannopoulos, A., Giannakis, I. (2021). A digital twin of the GSSI 2000 MHz palm antenna developed using multi-parametric optimisation. In 2021 11th International Workshop on Advanced Ground Penetrating Radar, IWAGPR 2021, 10.1109/IWAGPR50767.2021.9843157\nGiannakis, I., Giannopoulos, A., Warren, C. (2019). Realistic FDTD GPR Antenna Models Optimized Using a Novel Linear/Nonlinear Full-Waveform Inversion. IEEE Transactions on Geoscience and Remote Sensing, 57(3), 1768-1778. 10.1109/TGRS.2018.2869027\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Changwan Sun",
        "date": "Jan 22, 2024, 6:29:23AM",
        "content": "Thank you for your sincere reply and nice guide for papers :)\n\nChangwan Sun\n\n2024년 1월 22일 월요일 오후 7시 2분 51초 UTC+9에 Craig Warren님이 작성:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bMCkwnuo9hU",
    "title": "RUNNING MATLAB SCRIPT",
    "original_post": {
      "author": "Andrea",
      "date": "Feb 17, 2020, 10:28:42AM",
      "content": "Hello\nI have recently been using GprMax and I am not very practical with this.\nI have the following problem:\nI would like to run a \"SFCW.m\"  (a Matlab script) in my code and to do this I did:\n\n#title: Stepped_Frequency_continuous_wave_Radar Prova1\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n#material: 6 0 1 0 half_space\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#python:\nfrom gprMax.input_cmd_funcs import *\ndomain\nimport matlab.engine\neng = matlab.engine.start_matlab()\neng.SFCW(nargout=0)\n#end_python:\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\nbut unfortunately it doesn't work and gives me the following error:\n\n  File \"<string>\", line 1, in <module>\nModuleNotFoundError: No module named 'matlab'\n\nIs this the correct way to run a Matlab file?\n\nthanks for your attention."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 20, 2020, 6:02:05AM",
        "content": "Dear Andrea,\n\nThere are quite a few things going on with your example, and I am not clear exactly what you are trying to do.\n\nI have not used the MATLAB Engine inside Python, however, looking at the error you are receiving, I'd suggest you have not installed the MATLAB Engine into the Python environment for gprMax. You will need some knowledge, or be prepared to learn, how to properly use Python, MATLAB, and the underlying numerical method (FDTD) used in gprMax.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JGh91N9cUPU",
    "title": "Numerical Dispersion error",
    "original_post": {
      "author": "Akbulut",
      "date": "Apr 3, 2021, 5:33:31PM",
      "content": "Dear gprMax developers and users,\n\nI want to make a B-scan with the code below but I get an error which says ;\n\n\"WARNING: Potentially significant numerical dispersion. Estimated largest physical phase-velocity error is -2.55% in material 'soil' whose wavelength sampled by 6 cells. Maximum significant frequency estimated as 8.98712e+09Hz\".\n\nand the code is:\n\n#domain: 0.8 0.8 0.2\n\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 4e-9\n\n#material: 6 0 1 0 soil\n\n#box: 0 0 0 0.8 0.8 0.15 soil\n\n#cylinder: 0 0.4 0.05 0.8 0.44 0.05 0.002 pec\n\n#waveform: gaussiandot 1 2.5e9 verici\n#hertzian_dipole: x 0.1 0.1 0.17 verici\n\n#rx: 0.07 0.1 0.17\n\n#src_steps: 0 0.01 0\n#rx_steps: 0 0.01 0\n\nIs there anyway to overcome this warning? \nThanks in advance,\n\nOzkan A."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 5, 2021, 12:03:37PM",
        "content": "Dear Ozkan,\n\nA basic understanding of numerical dispersion is essential to using FDTD simulation tools such as gprMax. You'll see some guidance in our docs at - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Akbulut",
        "date": "Apr 5, 2021, 1:53:40PM",
        "content": "Dear Craig,\n\nThank you for suggestion.\n\nBest regards,\n\nOzkan\n\n5 Nisan 2021 Pazartesi tarihinde saat 19:03:37 UTC+3 itibarıyla Craig Warren şunları yazdı:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/oQZ8RBGGOOw",
    "title": "StructureScan Mini XT 2.7 GHz antenna",
    "original_post": {
      "author": "Sina Mehdinia",
      "date": "Jun 17, 2020, 7:36:43PM",
      "content": "Hello gprMax community,\n\nIs there a built-in antenna for GSSI StructureScan Mini XT 2.7 GHz? If not, any hint on how to model it properly? \n\nBest,\nSina"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2020, 3:02:07PM",
        "content": "Dear Sina,\n\nThere is not currently a specific antenna model for the GSSI StructureScan Mini XT 2.7 GHz. The antenna models we have are listed in the user library - http://docs.gprmax.com/en/latest/user_libs_antennas.html\n\nIt is not straightforward to build a model of a specific commercial antenna even when you have knowledge of things like the geometry, material properties, and feed pulse. I recommend you have a read of the publications listed at the above link, which describe the processes necessary to create such models.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LCK9htWhf08",
    "title": "aboult Target hyperbola",
    "original_post": {
      "author": "panlei",
      "date": "Jun 19, 2020, 12:41:22PM",
      "content": "Hello everyone\n\nI am a beginner, trying to use the following file model simulation, changing parameters many times but still can not get the hyperbolic image of the target body, please give me some suggestions. Thank you\n\nBest wishes"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2020, 2:52:13PM",
        "content": "Dear Panlei,\n\nThe first problem with your model is that you have positioned your source and receiver within the Perfectly Matched Layer (PML) absorbing boundaries. You can see that from the geometry view you have attached, but more importantly it is printed in red as a warning when gprMax runs. I assume you are trying to simulate a buried PEC cylinder in a heterogeneous soil? You need to leave some space above the surface of the soil, see the example in the docs - http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder\n\nSecondly since you are modelling a lossy heterogeneous soil, you will likely need to apply some gain to your results, as you would with real gprMax data.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "panlei",
        "date": "Jun 22, 2020, 10:29:42AM",
        "content": "Hello, Craig\n\nThe simulation problem has been solved based on your help. Now I want to know more about oil_ Peplinski model, can you provide some information about the origin of the model, why the volume fraction and some parameters can be successfully simulated, etc.\n\nBest wishes pan"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 22, 2020, 12:01:31PM",
        "content": "Hi Pan,\n\nMay I suggest you study the literature and the papers related to the work of Dobson and Peplinski which the model is based upon. A good review can be found in the PhD thesis of Dr Giannakis.\n\nhttps://era.ed.ac.uk/handle/1842/20449 \n\nResearch the topic is always a good idea before asking questions!\n\nBest wishes\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dHpczmy_9oI",
    "title": "Google Summer of Code 2019",
    "original_post": {
      "author": "Craig Warren",
      "date": "Mar 1, 2019, 3:47:11AM",
      "content": "gprMax is one of 207 open source projects to be mentor organisations in Google Summer of Code 2019 (GSoC). \n\nGoogle Summer of Code is a global program focused on bringing more student developers into open source software development. Students work with an open source organization, i.e. us!, on a 3 month programming project during their summer break.\n\nThis is an opportunity to get paid to contribute to open source scientific software. If you are interested in applying please have a look at our Project Ideas List and contact either of the mentors - myself (craig at gprmax dot com) or Antonis (antonis at gprmax dot com). All information on applying to GSoC is available on their website along with a useful set of FAQs.\n\nKind regards,\n\nCraig"
    },
    "responses": [
      {
        "author": "Keshavan Seshadri",
        "date": "Mar 2, 2019, 10:25:27PM",
        "content": "Sir,\n\nI am interested in doing the Geometry Visualization project for GSOC 2019. I have experience in python. Can you give more information regarding the project and your expectations?\n\nThanks and Regards,\nKeshavan.S."
      },
      {
        "author": "Craig Warren",
        "date": "Mar 4, 2019, 5:15:46AM",
        "content": "A couple of further pointers for GSoC:\n\n1. Read our docs - http://docs.gprmax.com\n2. Have a look at the structure of our code, particularly the high level overview in the docs - http://docs.gprmax.com/en/latest/coding.html\n3. Try installing gprMax and running some of the simple examples.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Deepak Singh Rathore",
        "date": "Mar 4, 2019, 5:39:15AM",
        "content": "Hi, I am Deepak Singh Rathore and I am interested in visualization and I have some prior knowledge of python and some python library numpy and tkinter. I want to be part of gprMax.\nthanks"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 4, 2019, 5:54:37AM",
        "content": "We now have a Gitter room for GSoC2019 - https://gitter.im/gprMax/GSoC2019?utm_source=share-link&utm_medium=link&utm_campaign=share-link\n\nPlease note we (gprMax) are a small organisation, currently with 2 mentors (myself, and Dr Antonis Giannopoulos), so we will endeavour to respond to emails/message enquiries as quickly as we can. However, we are both busy academics, so please be patient.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 20, 2019, 4:51:26AM",
        "content": "We will be hosting a webinar to describe our GSoC2019 project ideas list on 28/03/2019 at 09:30 (GMT). More details on how to join live will be provided in the next few days. We will record the webinar so you can watch it back if you are unable to join live."
      },
      {
        "author": "Craig Warren",
        "date": "Mar 25, 2019, 10:04:44AM",
        "content": "Here is the link to join the webinar on 28/03/2019 at 09:30 (GMT) - https://eu.bbcollab.com/guest/0c8f29e98e1c42ecb540bfd2d3691e5c The room will open 15 mins before start time so you can make sure your audio/video settings are working.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/L5h_K9cI3GU",
    "title": "Installation error in build",
    "original_post": {
      "author": "Andres Altieri",
      "date": "Jan 10, 2022, 7:26:49PM",
      "content": "Hi,\nI am trying to install gprMax in a fresh Windows 10 installation and for some reason it won't compile. I have installed previously in several machines but for some reason this time it doesn't work and I can't find the problem.\n\nI completed step 1 without problems:\n1. Install Python, required Python packages, and get gprMax source\n\nIn step 2. Install a C compiler which supports OpenMP I think I correctly chose the option, below is my configuration, I only selected the two items mentioned ( ‘MSVC v142’ and ‘Windows 10 SDK’)\n\n\nI don't know what to do in the set the path environmental variables. In another machine where I installed gprMax I checked and I haven't setup any environmental variables.\n\nI moved on to step 3. Build and install gprMax; when I execute:\n\n(gprMax)$ python setup.py build\n\nThe compiler fails with the messages attached in the txt log file.\n\nIt is apparent that the compiler is using:\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX86\\x64\\cl.exe\n\nI am not sure if this is the problem, because I haven't set any environmental variables. I have tried running\nvcvars64.bat    Use the 64-bit x64-native tools to build 64-bit x64 code.\n\nbefore compiling in the same prompt but nothing changes.\n\nCould someone assist me to debug this ?\nThank you very much in advance.\nBest regards,\nAndres"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "Jan 11, 2022, 7:32:52PM",
        "content": "Hello,\nI have kept on looking into this. I ran\n\npython setup.py cleanall\n\nand then\n\npython setup.py build\n\nThe build phase advances correctly up to building 'gprMax.cython.fields_updates_dispersive' extension where the error C2061 and C2059  start appearing and the compiler fails. I have been looking on the web for these errors and I found this post:\nhttps://stackoverflow.com/questions/57837255/defining-dcomplex-externally-in-cython\n\nbut I am not sure how to circumvent this issue.  I have also tried with Visual Build Tools 2015 which I used in previous installations and the same error happens.\n\nBelow I copied an extract of the error and I am attaching the full log.\n\nAny help is appreciated.\nKind regards,\nAndrés\n\n------------------\nbuilding 'gprMax.cython.fields_updates_dispersive' extension\ncreating build\\temp.win-amd64-3.9\\Release\\gprMax\\cython\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30133\\bin\\HostX86\\x64\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MD -IC:\\Users\\Andres\\miniconda3\\envs\\gprmax\\lib\\site-packages\\numpy\\core\\include -IC:\\Users\\Andres\\miniconda3\\envs\\gprmax\\lib\\site-packages\\numpy\\core\\include -IC:\\Users\\Andres\\miniconda3\\envs\\gprmax\\include -IC:\\Users\\Andres\\miniconda3\\envs\\gprmax\\include -IC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30133\\include -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\ucrt -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\shared -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\um -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\winrt -IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.19041.0\\cppwinrt /TcgprMax\\cython\\fields_updates_dispersive.c /Fobuild\\temp.win-amd64-3.9\\Release\\gprMax\\cython\\fields_updates_dispersive.obj /O2 /openmp /w\ncl : Command line warning D9025 : overriding '/W3' with '/w'\nfields_updates_dispersive.c\nC:\\Users\\Andres\\miniconda3\\envs\\gprmax\\lib\\site-packages\\numpy\\core\\include\\numpy\\npy_1_7_deprecated_api.h(14) : Warning Msg: Using deprecated NumPy API, disable it with #define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\ngprMax\\cython\\fields_updates_dispersive.c(1259): error C2061: syntax error: identifier '__pyx_t_double_complex'\ngprMax\\cython\\fields_updates_dispersive.c(1259): error C2059: syntax error: ';'\ngprMax\\cython\\fields_updates_dispersive.c(1264): error C2061: syntax error: identifier '__pyx_t_double_complex_from_parts'\ngprMax\\cython\\fields_updates_dispersive.c(1264): error C2059: syntax error: ';'\ngprMax\\cython\\fields_updates_dispersive.c(1264): error C2059: syntax error: '<parameter-list>'\ngprMax\\cython\\fields_updates_dispersive.c(1271): error C2061: syntax error: identifier '__pyx_t_float_complex'\ngprMax\\cython\\fields_updates_dispersive.c(1271): error C2059: syntax error: ';'\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 12, 2022, 10:44:42AM",
        "content": "This should now be resolved if you pull the latest code. The file `fields_updates_dispersive.pyx` erroneously got into the master branch - it has now been removed.\n"
      },
      {
        "author": "Andres Altieri",
        "date": "Jan 12, 2022, 10:54:37AM",
        "content": "Thank you very much, I tried it and everything is working now!\nBest regards\nAndrés\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xUxAE062WZI",
    "title": "Ascan with moving reciever antenna",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Apr 12, 2020, 11:26:27PM",
      "content": "Hallo every dear collage,\n\ni want to simulate Ascan as  mentioned in (in file )\n\nbut with moving reciever  not fixed . how can i do it.\n\nhave we too input files for moving reciever?\n\nBest regards,\n\nAI"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 15, 2020, 4:04:47AM",
        "content": "See the B-scan example in the docs for how to move simple sources and receivers - http://docs.gprmax.com/en/latest/examples_simple_2D.html#b-scan-from-a-metal-cylinder\n\nCraig"
      },
      {
        "author": "Ahmed Antar",
        "date": "Apr 17, 2020, 11:34:41AM",
        "content": "i want to fix transmitter and moving only the reciever which changes should i do on the input file"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 19, 2020, 8:56:17AM",
        "content": "Ahmed,\n\nIf you don't want to move the transmitter just omit the #src_steps command.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JdWLYkO1gGs",
    "title": "How to change the antenna operating mode from down-looking to forward-looking",
    "original_post": {
      "author": "Lun MA",
      "date": "Jul 24, 2018, 7:44:27AM",
      "content": "I am going to simulate some data which is collected from a forward-looking gpr system. I wonder if there are any specific examples or methods can make me get the hang of it.\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 25, 2018, 10:49:35AM",
        "content": "Hi Lun,\n\nI am not aware of any specific examples of modelled forward-looking GPRs, perhaps others on the forum will know.  \n\nIf you have not used gprMax before then start with the simple 2D example in the docs, then you can look at the 3D antenna model examples. These should give you an idea of what is involved in simulating a GPR system. You should also have a basic understanding of the underlying numerical technique, i.e. the Finite-Difference Time-Domain (FDTD) method. Finally you may find, depending on the specifics of your problem, that you require to model the details of your forward-looking antenna as well as simulate targets a significant distance away from it. This will result in computationally demanding models.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ih6V2ihTQoQ",
    "title": "gprMax install issues",
    "original_post": {
      "author": "David Rohde",
      "date": "Nov 13, 2022, 11:06:01PM",
      "content": "Hi, I'm trying to load gprMax on a Win10 computer, and after installing miniconda3 and executing the following form the Command Prompt:\n\n$ conda update conda \n$ conda install git \n$ git clone https://github.com/gprMax/gprMax.git \n$ cd gprMax \n\nall good until the next step:\n\n$ cd gprMax $ conda env create -f conda_env.yml\n\nI get through the \"Executing Transactions\" process but after the initial pip process is completed I get the following:\n\nPip subprocess error:\n'chcp' is not recognized as an internal or external command,\noperable program or batch file.\n'chcp' is not recognized as an internal or external command,\noperable program or batch file.\n'chcp' is not recognized as an internal or external command,\noperable program or batch file.\n\nfailed\n\nCondaEnvException: Pip failed\n\nIs this normal? is there a quick fix?\nIt occurs with Python 3.8 and 3.9\n\nthanks,\nDave"
    },
    "responses": [
      {
        "author": "David Rohde",
        "date": "Nov 15, 2022, 9:39:41AM",
        "content": "Got it fixed. thanks.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HUp1S9dbkTQ",
    "title": "C-scan",
    "original_post": {
      "author": "min min",
      "date": "Jul 13, 2019, 9:42:05AM",
      "content": "I want to do the C-scan simulation, so I move the antenna in x and y. I get some ‘.out’ files. If I want to merge these files, do I need to use Matlab? Is there any tool can be used in gprMax?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 15, 2019, 4:22:56AM",
        "content": "No we don't provide a tool to make C-scans (depth slices). You will have to assemble the B-scans yourself in MATLAB or another program.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eEIfTHpX9Cs",
    "title": "I'm new at using gprMax: how to building a heterogenous soil model with a sphere target?",
    "original_post": {
      "author": "Kenneth Obrien M",
      "date": "Aug 9, 2017, 3:11:16PM",
      "content": "Any ideas to create a 2D heterogeneous soil model with a sphere target buried 4 inches below the soil."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 10, 2017, 8:52:04AM",
        "content": "Hi Kenneth,\n\nWelcome to the forum!\n\nAll the information you need to do this is in the User Guide. Take a look at some of the example models also. There are 2D models and examples of how to create a heterogeneous soil (in 3D, but it is the same process for 2D).\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Aug 10, 2017, 8:04:13PM",
        "content": "Craig,\n\nThank you.\n\nkenneth,"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/cYCPiqF259w",
    "title": "gprMax error about CUDA calculations：cuMemFree failed: an illegal memory access was encountered",
    "original_post": {
      "author": "岳华",
      "date": "Nov 21, 2023, 1:15:54AM",
      "content": "I have built a simple cylindrical model and I have the following problem running the script using gpu. I hope you can provide the following help. Thank you very much!\n\nfile：#title: 1_x1_z1_cylinder\n#domain: 1.15 1.05 1.15\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 60e-9\n\n#waveform: gaussiandotnorm 1 3e9 my_ricker\n#hertzian_dipole: x 1.025 0.1 1.025 my_ricker\n#material: 1 0 1 0 bk\n#material: 20  1.808  1 0 target0\n#rx_array: 0.05 0.05 1.1 1.1 0.05 1.1 0.3 0 0\n#rx_array: 0.05 0.05 0.95 1.1 0.05 0.95 0.3 0 0\n#rx_array: 0.05 0.05 0.8 1.1 0.05 0.8 0.3 0 0\n#rx_array: 0.05 0.05 0.65 1.1 0.05 0.65 0.3 0 0\n#rx_array: 0.05 0.05 0.5 1.1 0.05 0.5 0.3 0 0\n#rx_array: 0.05 0.05 0.35 1.1 0.05 0.35 0.3 0 0\n#rx_array: 0.05 0.05 0.2 1.1 0.05 0.2 0.3 0 0\n#rx_array: 0.05 0.05 0.05 1.1 0.05 0.05 0.3 0 0\n#box: 0 0 0 1.15 1.05 1.15 bk\n#cylinder: 1.15 1.05 0.3 1.15 1.05 1.8  0.25 target0\n\nresult：cuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 24, 2023, 6:02:29AM",
        "content": "What is the estimated memory usage? Does your GPU have enough memory for this model?\n\nYou should normally get a memory estimate warning from gprMax.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/0D6Ab0jWBNk",
    "title": "Running single model by 2 GPU",
    "original_post": {
      "author": "­유영준[소프트웨어학부]",
      "date": "Mar 9, 2020, 9:52:29PM",
      "content": "When I tried the model , I got the error message like above.\nThe error message said that \"Memory required ~40.9GB exceeds 31.7GiB detected on specified 0\".\nSo, I tried to run this model again after I attached another 32GB gpu. ( total two GPU attached(32GB+ 32GB).\n\nBut, I still get the same error now. \nSo, Here is my question.\nCan I run single model by 2 GPUs when I'm running out of memory?\nIf I can, what is the linux command for that?\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 10, 2020, 9:20:46AM",
        "content": "The short answer is no, using extra GPUs does not give you access to more memory for a single model. \n\nSo if you have a model with a greater memory requirement than a single GPU then you will have to fall back to the CPU parallelised solver.\n\nUtilising memory over multiple compute nodes (whether CPU or GPU) is not currently possible. One solution is to use MPI domain decomposition to break large models up and compute them over multiple nodes. MPI domain decomposition is a fairly standard approach but nevertheless is not a trivial task to implement with FDTD.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4rmJLH67Tf8",
    "title": "Why I Can't get B-scan plot?",
    "original_post": {
      "author": "Yue Chueng",
      "date": "Apr 18, 2017, 11:44:59PM",
      "content": "Hi everyone,\n\nThe annex is my code. I can't get any B-scan plot. And even the A-scan plot for every single files is unavailable. \nCan anyone help me to figure out the problem?\nIs this because the target is too small to detected or the polarization direction which I set is wrong？\nBy the way, how to determine the increment of the sources or receivers? What kind of parameters are related to it?\n[f1 f2 f3 are increments (x,y,z) to move all simple sources (#hertzian_dipole or #magnetic_dipole) or all receivers (created using either #rx or #rx_array commands).]\n\n\nThanks a lot!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 19, 2017, 5:11:25AM",
        "content": "Hi Yue,\n\nYou are having a 2D TM model that is invariant in the z-direction. The only component of the electric field that is not zero in this case is Ez. You are using a source that excites the Ey component with the command\n\n#hertzian_dipole: y 0.1 0.4 0.0025 my_ricker\n\nthis is wrong as the Ey component does not exist in a 2D TMz simulation. The answer you get is just zero as it should be in this case. You need to check your model carefully and use the correct orientation of the source which is 'z' in your case.\n\nRegards\n\nAntonis"
      },
      {
        "author": "Yue Chueng",
        "date": "Apr 19, 2017, 8:19:42AM",
        "content": "Hi Antonis,\n\n\nI‘d like to express my deepest sincere thanks to you. I also find that all the coordinate of 'z' should be zero or the code can not run.\n\n#hertzian_dipole: z 0.1 0.4 0 my_ricker\n#rx: 0.2 0.4 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\nKind regards.\nYue"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/p7uEMnsliJc",
    "title": "How can I simulate GPR signal in uniform medium?",
    "original_post": {
      "author": "hhhrm",
      "date": "Nov 27, 2019, 4:43:07AM",
      "content": "How can I simulate GPR signal in uniform medium? I simulated this case but the direct wave still occurred."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 28, 2019, 3:47:11AM",
        "content": "Dear hhhrm,\n\nPlease explain what you mean be uniform medium?\n\nThere will always be a direct wave between the transmitter (source) and the receiver in a simulation. If you want to remove this you can perform a numerical background removal by running a simulation without your target object in it and then subtracting that results from the simulation that includes the target.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Haoyuan Cheng",
        "date": "Mar 7, 2022, 7:53:43AM",
        "content": "Dear Dr.Craig,  \n\nSorry to reply to this post after a long time.I saw your reply when i browsed the question about direct wave.I dont know how to remove it.(If you want to remove this you can perform a numerical background removal by running a simulation without your target object in it and then subtracting that results from the simulation that includes the target.)Could you explain it in a little detail?I'm a rookie~Thank you veryyyyy much!\n\nKind regards,\n\nhaoyuan\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2022, 5:35:53AM",
        "content": "Lets look at the 'cylinder_Ascan_2D.in' example model, which has a cylinder buried in a homogeneous half-space. If you want to look at only the scattered response from the cylinder you would run a model without the cylinder, then run the model with the cylinder, and subtract the two responses. This has the effect of perfectly removing the background. This is only possible numerically and not possible to do perfectly with real data - although we are getting much better with this with new processing algorithms and machine learning.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/N0xiImyZVBM",
    "title": "Realistic FDTD GPR Antenna Models Optimized Using a Novel Linear/Nonlinear Full-Waveform Inversion",
    "original_post": {
      "author": "Armando Schneider",
      "date": "Sep 2, 2022, 4:32:12AM",
      "content": "Hello,\n\nFrom my understanding, the FWI algorithm used in the paper uses explicit Jacobian matrix? Does the algorithm need to compute adjoint wavefield and cross-correlate to the source wavefield? \n\nCheers,"
    },
    "responses": [
      {
        "author": "Iraklis Giannakis",
        "date": "Sep 2, 2022, 5:32:51AM",
        "content": "Hello,\n\nIn contrast to typical FWI problems, in this one we have a limited number of unknowns (around 10) so using adjoint wavefield and cross-correlation is not necessary. The derivatives with respect to permittivity and conductivity for a given pulse are calculated using equations 33-36 .The problem here is that one of the parameters to be estimated is the shape of the pulse. Therefore calculating the Jacobian should take this into account i.e. we need to find the derivative of the shape of the pulse with respect to permittivity and conductivity, and how changing these properties affects the pulse and consequently the error function. This is why calculating the Jacobian becomes so tricky and results to equation 32. \n\nYou can always approximate the derivatives with finite differences since the number of the unknowns are not that large and it will not greatly increase the amount of times you will have to run FDTD. \n\nHope that this was helpful.\n\nBest,\nIraklis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KYLgJVbeznw",
    "title": "GPR _Bscan",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Mar 18, 2024, 11:53:12AM",
      "content": "Dear All,\n\nEven though I can generate geometric shapes I cannot see the Bscan of the input file. \n\nCould you please tell me why? \n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 2.000000 0.500000 0.002000\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 1.5e-08\n\n#output_dir: out\n\n#material: 6 0 1 0 half_space\n#material: 12 0 1 0 root\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040000 0.475000 0 my_ricker\n\n#rx: 0.080000 0.475000 0\n#src_steps: 0.005000 0 0\n#rx_steps: 0.005000 0 0\n\n#box: 0 0 0 2.000000 0.475000 0.002000 half_space\n\n#cylinder: 1.817356 0.117820 0.000000 1.817356 0.117820 0.002000 0.050000 root\n#cylinder: 1.200023 0.232026 0.000000 1.200023 0.232026 0.002000 0.050000 root\n#cylinder: 0.716889 0.220410 0.000000 0.716889 0.220410 0.002000 0.050000 root\n#cylinder: 0.292172 0.115330 0.000000 0.292172 0.115330 0.002000 0.050000 root\n#cylinder: 0.991200 0.165042 0.000000 0.991200 0.165042 0.002000 0.050000 root\n\n#geometry_view: 0 0 0 2.000000 0.500000 0.002000 0.002 0.002 0.002 homogeneous_soil n"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/WNltH8Kg7FQ",
    "title": "Options to change operating bandwidth",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Mar 8, 2018, 5:20:49AM",
      "content": "Hello everyone,\nI am completely new to gprMax but I have gained some clear basics and I am able to use the tool. However, I have some queries.\n\nI have created a multi-layered structure with different characteristics and I am currently using a ricker waveform as follows:\n#waveform ricker 1 4.5e9 my_ricker \n So my ricker pulse is centered at 4.5GHz.\n\nAs there is only one value (i.e. fc) taken, is there a way to modify the operating bandwidth ?\n\nThanks in advance."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 8, 2018, 6:29:05AM",
        "content": "Hi Shreedhar,\n\ngprMax offers a number of build in waveforms and you can find their definitions in the manual. If you want to use a custom waveform you can do this by using the #excitation_file: command\n\nhttp://docs.gprmax.com/en/latest/input.html#excitation-file\n\nalternatively you can use as a template the code for the build in commands and create a new command and implementation for a source you prefer.\n\nBest\n\nAntonis"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Mar 8, 2018, 8:09:26AM",
        "content": "Thanks Antonis. Does the excitation file command accept complex numbers too?\nAs my ricker pulse at each instant is of the form A+jB."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 8, 2018, 8:16:27AM",
        "content": "You cannot have complex amplitudes directly in FDTD. It is purely time domain method. Complex properties can only be introduced via the proper formulations that involve time convolutions etc. We do this efficiently for complex materials. Excitation should be real.\n\nAntonis"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Apr 6, 2018, 8:18:05AM",
        "content": "Hello again Antonis,\n\nWith reference to my previous question and your suggestion, I used some default input pulses (obtained from my colleagues) and gprMax worked just fine (Thanks for your suggestion on that). However, I encountered some really bizarre results when I generated a ricker pulse and used it as the input pulse.\n\nFor your reference, attached are some files:\n1. test_custom_pulse.in is the gprMax source code\n2. my_file1.ASC is my ricker pulse input file\n3. input_pulse.PNG is the ricker pulse plot in time domain\n4. Ez_plot_Ascan.PNG is the output I got in gprMax for my source code.\n\nIf it isn't too much, could you provide some suggestions about what could be wrong (either in the code or the pulse that I am using)?\n\nThanks again for all the help.\nHave a good day."
      },
      {
        "author": "Craig Warren",
        "date": "Apr 9, 2018, 5:07:21AM",
        "content": "Hi Shreedhar,\n\nJust taking a quick look at your model - your user defined waveform starts abruptly from an amplitude of ~0.1. This sudden start to the excitation will introduce unwanted high frequencies into the simulation, which I think is what you are seeing in the output. So your waveform needs to start smoothly from zero. If you look at the example of the built-in Ricker waveform you'll see it does this - http://docs.gprmax.com/en/latest/plotting.html#ricker\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hnB-gqxIIbQ",
    "title": "Problem with installing",
    "original_post": {
      "author": "Evgeny Siroezhko",
      "date": "Mar 20, 2019, 8:57:09AM",
      "content": "Hi, can somebody help me with that problem?\n\n\n(base) C:\\Users\\Evgeny>cd C:\\Users\\Evgeny\\gprMax\n\n(base) C:\\Users\\Evgeny\\gprMax>conda activate gprmax\n\n(gprmax) C:\\Users\\Evgeny\\gprMax>python -m gprMax user_models/cylinder_Ascan_2D.in\nTraceback (most recent call last):\n  File \"C:\\Users\\Evgeny\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 183, in _run_module_as_main\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  File \"C:\\Users\\Evgeny\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 142, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File \"C:\\Users\\Evgeny\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 109, in _get_module_details\n    __import__(pkg_name)\n  File \"C:\\Users\\Evgeny\\gprMax\\gprMax\\__init__.py\", line 2, in <module>\n    from .gprMax import api as run\n  File \"C:\\Users\\Evgeny\\gprMax\\gprMax\\gprMax.py\", line 38, in <module>\n    from gprMax.model_build_run import run_model\n  File \"C:\\Users\\Evgeny\\gprMax\\gprMax\\model_build_run.py\", line 31, in <module>\n    from terminaltables import AsciiTable\nModuleNotFoundError: No module named 'terminaltables'\n\n\nInstallation was made by default, I watched a screencast"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 20, 2019, 10:10:00AM",
        "content": "See https://github.com/gprMax/gprMax/issues/197"
      },
      {
        "author": "Evgeny Siroezhko",
        "date": "Mar 20, 2019, 1:35:31PM",
        "content": "(base) C:\\Users\\Evgeny\\gprMax>conda env update -f conda_env.yml\nCollecting package metadata: done\nSolving environment: done\nPreparing transaction: done\nVerifying transaction: done\nExecuting transaction: done\n#\n# To activate this environment, use\n#\n#     $ conda activate gprMax\n#\n# To deactivate an active environment, use\n#\n#     $ conda deactivate\n\n(base) C:\\Users\\Evgeny\\Miniconda3>conda install terminaltables tqdm\nCollecting package metadata: done\nSolving environment: failed\nPackagesNotFoundError: The following packages are not available from current channels:\n\n  - terminaltables\n\nCurrent channels:\n  - https://repo.anaconda.com/pkgs/main/win-64\n  - https://repo.anaconda.com/pkgs/main/noarch\n  - https://repo.anaconda.com/pkgs/free/win-64\n  - https://repo.anaconda.com/pkgs/free/noarch\n  - https://repo.anaconda.com/pkgs/r/win-64\n  - https://repo.anaconda.com/pkgs/r/noarch\n  - https://repo.anaconda.com/pkgs/msys2/win-64\n  - https://repo.anaconda.com/pkgs/msys2/noarch\n\nTo search for alternate channels that may provide the conda package you're looking for, navigate to\n    https://anaconda.org\nand use the search bar at the top of the page.\n\nThen I tried to install in a different way\n\n(base) C:\\Users\\Evgeny\\Miniconda3>pip install terminaltables tqdm\nRequirement already satisfied: terminaltables in c:\\users\\evgeny\\miniconda3\\lib\\site-packages (3.1.0)\nRequirement already satisfied: tqdm in c:\\users\\evgeny\\miniconda3\\lib\\site-packages (4.31.1)"
      },
      {
        "author": "Evgeny Siroezhko",
        "date": "Mar 20, 2019, 5:13:58PM",
        "content": "It works now, thanks!"
      },
      {
        "author": "Naman Singh Chikara",
        "date": "Mar 21, 2019, 9:49:38AM",
        "content": "For anyone encountering similar issue in future, try running :\n\nactivate gprMax\npip install [module name]\n\ni.e first activating the virtual environment and then installing the modules as gprMax will be searching for modules in the virtual env rather than base environment.\n\nThis has solved issue for Evgeny Siroezhko.\n\nNaman Chikara."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5jstjKNdGF8",
    "title": "How to change the Y-axis and X-axis？",
    "original_post": {
      "author": "Elizabeth",
      "date": "Apr 22, 2017, 5:33:44AM",
      "content": "Hi gprMax master,\n\nAs we all know that we can use OUT files to get A-scan and B-scan plot. The B-scan has x-axis of trace number and y-axis of timewindow. \nWhen I read some papers, I find that the X-axis is Antenna Position and Y-axis is the Deepth of the Modle in their plot . \nSo how can I get that plot? Is there any relationships between Time and Deepth?\n\nLooking foward to your reply.\nElizabeth"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 22, 2017, 10:36:52AM",
        "content": "Elizabeth,\n\nWith a B-scan the x-axis normally denotes the position of the antenna (or source). The position is directly related to the trace (A-scan) number by the spacing used to take the traces. The y-axis can be plotted as the time window, or if you know the velocity of the material (and it is constant) then you can convert time to depth (distance). You can easily edit the plotting scripts to achieve this.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eb0fOHURfgw",
    "title": "About the excitation_file command",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Oct 24, 2019, 10:29:26PM",
      "content": "Hi everyone!\n\nI was confused about the #excitation_file: my_waves.txt: command, the my_wave.txt has the format as below:\ntime my_pulse1 my_pulse2\n0 0 0\n1.926e-12 1.2e-6 0\n3.852e-12 1.3e-6 1.0e-1\n5.778e-12 5.0e-6 1.5e-1\n...       ...    ...\n...       ...    ... \n... ... ...\nDoes the first column  represent the every sample time point of every sample point and the next column represent the corresponding amplitude? How do we get these data ? Dose it means that we need to plot the waveform we defined (like in matlab) and get these discrete data to make up the my_waves.txt? \n\nSincerely,\n  Dongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 28, 2019, 5:18:14AM",
        "content": "Hi Dongyang,\n\nThe #excitation_file command is there to let you introduce your own waveform. So yes, you need to discretise your waveform. Best to do this in a time-step that corresponds to that used in the simulation. Also ensure your waveform starts smoothly from zero, otherwise you will introduce unwanted high-frequencies into your simulations.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "Oct 28, 2019, 8:00:23AM",
        "content": "Thanks for your answer,Craig:\n\nOne more question, how long  should I discrete the waveform ? Should it be the same long as the time_window  that used in the simulation?\n\nKind regards,\nDongyang"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 28, 2019, 8:05:23AM",
        "content": "Better if it is the same length as the time window of the simulation, but it doesn't have to be - it will be padded with zeros to the correct length if not.\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 1, 2019, 10:52:21AM",
        "content": "Hi Dongyang,\n\nNeed to be thinking what you are doing. If you take the average trace of a 1D geometry model (as it seems that you have) this is in theory the same as every single trace from such a model. The result you should get by subtracting it from all traces is a zero. In practice this cannot happen as you can see here that you see the effects of the imperfect absorbing boundaries which are what is left when you do this. These effects are always present but they are very small in comparison to the real signal you have removed by your process of subtraction. Sometimes they might not be as small as need to be and then having thicker PMLs or more advanced settings for them it can help. They will never go away completely. They do appear as a ringing here as you are using a continuous sine excitation.\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "Dongyang Liu",
        "date": "Nov 5, 2019, 7:41:37AM",
        "content": "Hi Craig\n\nNow I konw that the waveform should start smoothly from zero, but I'm curious about how the high-frequency noise occur if the waveform doesn't start smoothly, is it because the FDTD algorithm ?\n\nKind regards,\nDongyang"
      },
      {
        "author": "Dongyang Liu",
        "date": "Nov 5, 2019, 7:46:51AM",
        "content": "Hi Antonis:\n\nThanks for your helpful reply!  I realized that  I was doing the wrong thing,\n\nBest\nDongyang"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 5:37:31AM",
        "content": "Hi Dongyang,\n\nIf you start your waveform abruptly you will introduce (likely) unwanted high frequencies into the simulation. This is not a problem with the FDTD algorithm it is the frequency content of your waveform, and hence source.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "Nov 9, 2019, 6:36:57AM",
        "content": "Thanks Craig, I got it.\n\nBest\nDongyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/t6H8xcjUEHY",
    "title": "magnetic_dipole source working",
    "original_post": {
      "author": "Chi-Chih Chen",
      "date": "Aug 16, 2023, 4:36:07PM",
      "content": "I tried to use #magnetic_dipole as a source in a simple setup, but it does not seem to propagate out since no reflection is generated from object place around it. Hz output only shows Source waveform regardless of the environment. Any suggestion."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 11:20:12AM",
        "content": "Hi Chi-Chih,\n\nWhat material properties are you setting for objects/backgrounds? Can you post as example of the input file or commands you are testing.\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/L1HcdtuA1O0",
    "title": "I want to know the error",
    "original_post": {
      "author": "ᄋᄀᄋ",
      "date": "May 25, 2025, 11:29:26AM (3 days ago)",
      "content": "#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.5 0.5 0.5\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 20e-9    \n#material: 4.395 0 1 0 half_space\n#waveform: ricker 1 1e9 my_ricker\n#hertzian_dipole: x 0 0.250 0.310 my_ricker\n#rx: 0.050 0.250 0.310\n#src_steps: 0.0045 0 0\n#rx_steps: 0.0045 0 0\n#box: 0 0 0 0.5 0.5 0.3 half_space\n#cylinder: 0.25 0 0.26 0.25 0.5 0.26 0.03 pec\n\ni used this code.\nBut result is like the picture\n\nmy ideal expectation is under the picture \nIdk error is where??.... help me!! plz\n\nThanks to read"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 25, 2025, 3:01:07PM (3 days ago)",
        "content": "Your source is inside the x-directed PML absorbing region. You have 10 cells of a PML in your model to absorb waves that are going towards the edges of the model.\nYou need to start your source outside the PML and if possible a bit more space from its internal edge.\nSo, your source or receiver should be further than 0.05 in the x-direction 10 x 0.005\n\nYour source, as your scan direction is on x should normally be polarised in the y-direction. This is the broadside-perpendicular surveying mode that is the most common.\nMoving your source or receiver in steps smaller than your spatial step (0.005) makes no sense. The 0.0045 is rounded to 0.005 internally anyway.\nAlso, your cylinder is very shallow the top of it is only 1cm under the interface. \n \nThis might help get you to see the response:\n\n#hertzian_dipole: y 0.075 0.250 0.310 my_ricker\n#rx:  0.125 0.250 0.310\n#src_steps: 0.005 0 0\n#rx_steps: 0.005 0 0 \n\nHope this helps\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Cge8DOhZ7rk",
    "title": "Using python to run mutiple files",
    "original_post": {
      "author": "lu yiqing",
      "date": "Feb 20, 2020, 10:16:44AM",
      "content": "I'm trying to use gprMax to generate training data for a machine learning project. We want to generate 500 groups of data, each of the data contains 228*228 E field magnitude points along the x and y axis. The attached picture is a seudo code of what we want to achieve. However, I'm new to python and not sure how to run the input file in the code. In terminal we use the line \"GprMax box_Bscan_2D.in -n 228\" to run the .in file 228 times, but which command should I use when writing the program? Anyone can provide some suggestion? Thanks a lot."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2020, 3:49:25AM",
        "content": "Dear Yiqing,\n\nYou can import gprMax (and the tools) like other Python modules:\n\nfrom gprMax.gprMax import api as gprMax\nfrom tools.outputfiles_merge import merge_files\n\ngprMax can then be run by calling:\n\ngprMax(box_Bscan_2d.in, n=228)\nmerge_files(box_Bscan_2d, removefiles=True)\n\nThis should help you create the Python script you need.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ahmed Antar",
        "date": "May 23, 2020, 10:08:15AM",
        "content": "Dear criag,\n\ni tried to execute input file with python script after importing the libraries,that you mentioned in the last comment but i become this errors\n\ni have tooken screenshots from all my tries. i need really your help to accoblish my masterthesis.\n\nBest regards,\n\nIsmail"
      },
      {
        "author": "Craig Warren",
        "date": "May 23, 2020, 3:32:46PM",
        "content": "Dear Ismail,\n\nAgain this is failing because of a basic understanding of Python. In the example I gave the name of the input file (and path if necessary) as well as the name of the file used in the 'merge_files' function should both be strings. Either use a variable you have already defined or enclose the name with single or double quotes to denote it as a string.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 26, 2020, 11:59:35AM",
        "content": "If this is not in the documentation, it should!\n\nI'd happily drop the console command stuff, I just found this and it's so so helful!"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2020, 11:02:44AM",
        "content": "Hi Paul,\n\nAs I think Antonis said elsewhere, the ability to import gprMax as a package is quite limited in the current v.3 code, that is why it is not documented. We are working on a much fuller API for the upcoming v.4 release which will be documented.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 10, 2020, 8:56:05AM",
        "content": "Running the in file from python is enough for me, I am writing it through python anyway so what was missing is tjust the command to run the file and that's working.\n\nwhat I noticed is that parts in the .in file that call python again are not working. I am dynamically \"moving\" triangles with the rx/tx, however the run output shows, that they are not created."
      },
      {
        "author": "Craig Warren",
        "date": "Jul 13, 2020, 8:55:20AM",
        "content": "Paul,\n\nCan you provide a simple example of this that we can test please.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 14, 2020, 4:55:19AM",
        "content": "Yes of course.\nThe imported geometry is a seperate entity and it works, you probably do not need this,\n\n#title: randomly generated road\n#domain: 10 3 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 2e-08\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.5 2.5 0 my_ricker\n#rx: 0.55 2.5 0\n#src_steps: 0.1 0 0\n#rx_steps: 0.1 0 0\n#geometry_objects_read: 0 0 0 random_road_long.h5 materials.txt\n#cylinder: 5 1.3 0 4 1.3 0.005 0.02 pec\n#pml_cells: 30 30 0 30 30 0\n#python:\nfrom gprMax.input_cmd_funcs import *\noffset=0.05*(current_model_run-1)\ntriangle(0.05+offset,2.6,0,  0.48+offset,2.4,0, 0.41+offset,2.35,0,   0.005,material=\"pec\")\ntriangle(0.57+offset,2.4,0,  1+offset,2.6,0,    0.640+offset,2.35,0,   0.005,material=\"pec\")\n#end_python:\n\n\n\nWhen I run this through the console, it works.\n\nRunning it from python through\n\nfrom gprMax.gprMax import api as gprMax\ngprMax(r'.\\user_models\\test\\testfile.in',n=model_runs,gpu=[0],geometry_fixed=False)\n\n\nDoes not create the triangles"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 14, 2020, 4:59:00AM",
        "content": "Nevermind, I found a bug in my calculation, I need to change my triangle moving steps according to the src-steps.\n\n\nLeaving this so others can learn from my mistakes"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8yb6k569T2s",
    "title": "Unexpected pausing of the simulations",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Dec 16, 2019, 8:50:27AM",
      "content": "Hello Craig, Warren,\n\nI recently encountered something bizarre while running a gprMax to generate a B-scan. Of course, the code is quite simple and to generate a B-scan consisting of 500 A-scans, I used:\n\npython -m gprMax file_path\\filename.in -n 500\n\nHowever I see that the code automatically pauses after some iterations. It resumes when I hit 'Enter' to continue but again pause after some iterations. In my case, it happened after approximately every 30 iterations. \n\nI'm unsure if this is some sort of fail-safe that interrupts and pauses the code, or a bug.\n\nFor your info, I'm using the latest gprMax version; here are its details:"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 20, 2019, 5:31:36AM",
        "content": "Hey Shreedhar,\n\nCan you test with the cylinder_Bscan_2D.in example with -n 500. Do you see the same issue? If not can you supply the input file you are using that causes the issue.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XwxxjooxjL8",
    "title": "Limits to the discretization size (dx_dy_dz)",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Apr 18, 2019, 6:02:21AM",
      "content": "Hello ,\n\nI'm looking for some explanation regarding the choice of Spatial discretization of the gprMax domain. To quote the guide (Section 3.3), \"The discretization step should be at least ten times smaller than the smallest wavelength of the propagating electromagnetic fields.\" However, I observed that the signal continuously changes for each spatial discretization. \n\nI created a pavement slab of 48 cm thickness, 200 cm in length with permittivity 5 (attached is my gprMax code). At various spatial discretization sizes the surface reflection tends to change in form and amplitude (Figure below; attached is a high-res figure if this isn't visibly clear).\n\n\n\nMy concern is, is there any specific value for the spatial discretization size where the the signal stabilizes (i.e. after which the signal doesn't change at all)?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 22, 2019, 10:21:13AM",
        "content": "Hi,\n\nThis is an excellent example to learn about the limitations of any numerical model and in particular in this case of FDTD. There is no model that will be 100% accurate especially ones based on numerical approximations. What you see which is encouraging and expected from gprMax is that your model converges to a solution the finer it gets and the more detailed it is. I do not know what your assumptions of wavelength is but if it is based on the central frequency then it is what expected. If you follow the suggestions I suspect you should not be getting the blue line for a normal model but this depends on the problem and the geometry as well as the source frequency content. The reasons for the variations are few but primarily relate to controlling numerical dispersion and proper target modelling. You can easily find them discussed in books and papers about FDTD.\n\nThere will be no value that is the \"right one\". However, the finer you get the smaller the differences between successive runs with finer models will be and then it is a question of acceptable accuracy depending on your problem. \n\nLearning about the limitations of your methods is the best thing you can do if you work using such tools.\n\nHope this is helpful\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qlkVFxOzxXI",
    "title": "requires the time step for the model to be less than the relaxation time required to model water",
    "original_post": {
      "author": "ss s",
      "date": "Dec 17, 2024, 9:50:31AM",
      "content": "Dear gprMax team，\nI am running the model with the surface on it and it prompts the following error, I kindly ask you to tell me how I should modify my time step so that it is less than the relaxation time of the water"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 17, 2024, 10:41:56AM",
        "content": "Hey,\n\nYou can make the timestep smaller in two ways. One is to make the spatial steps smaller than 0.005 m that you have at the moment this will make the timestep smaller but will make your model bigger in terms of memory requirements. The other way is to use the #time_step_stability_facrtor: (http://docs.gprmax.com/en/latest/input.html#time-step-stability-factor) where you can use a number less than 1 to make the time step smaller. This will work but if you need to artificially lower the timestep a lot that way you are not running the most efficient computational model in terms of  algorithmic accuracy. FDTD is more accurate when the time step is close to the stability condition. So, method one is more accurate but costly in terms of memory but method two sacrifices a bit of accuracy but does not increase the model size. \n\nThe other thing you can try is to model water in a simpler way as a simple dielectric or with a bigger relaxation time to see how the model works. To do this you can specify your own \"water\" material as detailed in (http://docs.gprmax.com/en/latest/input.html#add-surface-water) \n\nHope this helps\n\nAntonis\n"
      },
      {
        "author": "ss s",
        "date": "Dec 18, 2024, 9:34:40AM",
        "content": "Thank you so much for your help, this is very useful to me!\n"
      },
      {
        "author": "ss s",
        "date": "Dec 18, 2024, 9:51:30AM",
        "content": "If I'm modeling “water”, do I continue to use the #add_surface_water command or do I use the rectangle override when adding surface water?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 18, 2024, 10:01:14AM",
        "content": "Yes, the #add_surface_water: command will look for a material defined as \"water\" and will use its parameters as given by this material. If there is no material defined by you it will use this internal definition of water as you can see in the documentation. The internal definition uses a Debye model for water and you can replicate this with the proper commands in gprMax or use a simpler definition that does take into account the water relaxation. In this case there will be no warning about the tilmestep being larger than the relaxation time of the material.\n\nHope this helps\n\nAntonis\n\n\nOn Wednesday, 18 December 2024 at 14:51:30 UTC:\nIf I'm modeling “water”, do I continue to use the #add_surface_water command or do I use the rectangle override when adding surface water?\n\n在2024年12月18日星期三 UTC+8 22:34:40<ss s> 写道：\nThank you so much for your help, this is very useful to me!\n\n在2024年12月17日星期二 UTC+8 23:41:56<Antonis Giannopoulos> 写道：\nHey,\n\nYou can make the timestep smaller in two ways. One is to make the spatial steps smaller than 0.005 m that you have at the moment this will make the timestep smaller but will make your model bigger in terms of memory requirements. The other way is to use the #time_step_stability_facrtor: (http://docs.gprmax.com/en/latest/input.html#time-step-stability-factor) where you can use a number less than 1 to make the time step smaller. This will work but if you need to artificially lower the timestep a lot that way you are not running the most efficient computational model in terms of  algorithmic accuracy. FDTD is more accurate when the time step is close to the stability condition. So, method one is more accurate but costly in terms of memory but method two sacrifices a bit of accuracy but does not increase the model size. \n\nThe other thing you can try is to model water in a simpler way as a simple dielectric or with a bigger relaxation time to see how the model works. To do this you can specify your own \"water\" material as detailed in (http://docs.gprmax.com/en/latest/input.html#add-surface-water) \n\nHope this helps\n\nAntonis\n\nOn Tuesday, 17 December 2024 at 14:50:31 UTC :\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lGdckBOgYIE",
    "title": "Request to provide input about 3D model construction",
    "original_post": {
      "author": "MOLOY DAS",
      "date": "Apr 25, 2025, 7:06:19AM",
      "content": "Dear Craig, \n\nWe went through your research paper titled  \" A Realistic FDTD Numerical Modelling Framework of Ground Penetrating Radar for Landmine Detection\" -2016. We are very much impressed about the model of PMN and PMA1 3D model.\n\nWe also need to develop a similar model for a different object. Can you please guide us step by step?\n\nAdvanced Thanks,\nMoloy Narayan Das,"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8ynjGKmSZ2c",
    "title": "subsurface model input",
    "original_post": {
      "author": "tamy",
      "date": "Aug 7, 2019, 4:46:27AM",
      "content": "Hi,\n\nI would like to simulate em wave propagation through an ice sheet. I have conductivity and permittivity measurements\nfrom an ice core which I would like to use as input model. Is there a way to read a file with the subsurface properties directly instead\nof 'constructing' the model with different materials and shapes and where would I do that?\n\nThanks for your help!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 7, 2019, 9:50:17AM",
        "content": "Hi Tamy,\n\nYou can input geometry/material data via an array with the input file command #geometry_objects_read, see http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nHow you create that array is up to you.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "tamy",
        "date": "Aug 7, 2019, 9:52:27AM",
        "content": "Hi Craig,\n\nI will try that. Thanks for helping!\n\nCheers,\n\nTamy"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Gt801kzqrIc",
    "title": "Any advice about remote access to an HPC for gprMax simulations?",
    "original_post": {
      "author": "Selim Sahin",
      "date": "Jul 19, 2021, 4:38:25PM",
      "content": "Hello,\n\nI am trying to create my own B-scan data set for my PhD thesis study. Unfortunately, the computational power I can reach is not enough to generate B-scans as detailed as I wanted.\n\nThere was an announcement about HPC-Europa3 programme that provides both training on how to use HPC environments and access to HPC centers around Europe. Is that programme still exist or any alternative you recommend? Since there is the pandemic, any remote training instead of in-place education would be very nice.\n\nRegards,\nSelim"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 26, 2021, 7:34:14AM",
        "content": "HPCEuropa3 programme is still running - http://www.hpc-europa.eu/\nYou could look at Cloud Compute (CPU or GPU) if you have funding/budget.\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/z2YRH9ruX40",
    "title": "Defining materials in Python script",
    "original_post": {
      "author": "Nick Carr",
      "date": "Aug 24, 2020, 1:57:16PM",
      "content": "I'm trying to make a helix antenna and simulate it. In my script I've made the helix but I'm not sure how to define it or if i'm even drawing it in right. When I run the .in file using the -geometry-only tag it processes but nothing shows up in paraview.  \n\nI've attached the .in file below and any help would be greatly appreciated!"
    },
    "responses": [
      {
        "author": "Nick Carr",
        "date": "Aug 24, 2020, 1:58:14PM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "Sep 2, 2020, 9:09:17AM",
        "content": "Dear Nick,\n\nLooking at your input file you are not actually specifying any geometry for your helix (with edges or boxes) which is why there is nothing in the geometry file output. The transmission line command allows you to attach a 1D transmission line model to an electric field location (http://docs.gprmax.com/en/latest/input.html#transmission-line), it is a source model and does not build any geometry.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Andres Altieri",
        "date": "Sep 4, 2020, 2:08:54PM",
        "content": "Hi Nick,\nif you want to make a PEC patch with 0 thickness, you need to discretize the geometry of the patch using rectangles and then use the plate command to \"draw\" the discretized geometry. For example, see this elliptical patch antenna; we had to approximate the geometry by rectangles and then draw each rectangle or in this case each line of the patch.\nIf you need to have some thickness you should use the box command but the discretization procedure is the same.\n\nRegards,\nAndrés\n"
      },
      {
        "author": "Nick Carr",
        "date": "Sep 8, 2020, 11:18:48AM",
        "content": "Hi Andrés, \n\nWould it be possible for you to share your code with me? I think what you're doing is close to what i'm trying to do. \n\nI've tried changing it to the edge or box command and i'm still not getting an output. my guess is i'm either not reading from the [x] or [y] array right or not using the right command to do that actual drawing. \n\nMany thanks,\nNick\n\n"
      },
      {
        "author": "Andres Altieri",
        "date": "Sep 29, 2020, 9:26:50PM",
        "content": "Hello Nick,\nI am sorry for the delay. I cannot share the code, since I am not the author of it. I can share this example, I hope I am not too late. If not, perhaps someone else may use it.\n\nIn this example I generate  PCB, and then plot some PEC patches on it. I am careful to align the PCB with the grid in and the same with the patches.\n\nWhen loading the generated geometry the following should be seen:\n\n\n\nTo make any patch antenna you need to draw the shape using rectangular patches or the other patches that gprMax has built in.\n\nBest regards,\nAndrés"
      },
      {
        "author": "Nick Carr",
        "date": "Oct 2, 2020, 10:48:07AM",
        "content": "Andres,\n\nThank you for sharing! It was quite insightful to see how you managed to do this. \nNow my concern is there is no way to do a true 3D design such as a helix antenna. My only thoughts are to use tiny rectangles stacked to psudo simulate making a round conductor. \n\nThoughts on this?\n"
      },
      {
        "author": "Andres Altieri",
        "date": "Oct 2, 2020, 11:25:48AM",
        "content": "Dear Nick,\nI thought your antenna was a patch helical antenna, sorry. I now realize that it's a 3D helix. Then what you should do then, like you say, is approximate your antenna with tiny cuboids. If the grid is good enough then it should be a good enough representation. I think that the grid should be very fine to approximate such a geometry.\n\nThe FDTD formulation uses cuboids so this is the basic building block for everything. Other simulators will allow you to define solid bodies using equations and then, when you simulate, will discretize the object by using other shapes such as tetrahedrons or hexahedrons. This will probably fit the helix shape better with less polyhedrons. An example of this is the FEM method, which, however, operates in the frequency domain in the standard formulation.\n\nI don't know what you want to do. If you simply want to simulate the antenna radiation pattern perhaps you would be better off with another software which uses tetrahedrons and works in the frequency domain like FEM. If you need to use this antenna to analyze a scattering problem like GPR then I believe that gprMax is the way to go. In this case, you will have to deal with the issue of discretizing the 3D antenna shape and using a finer grid. In gprMax V4 you will be able to choose different grid sizes for different regions in space, which should make everything more efficient. This is more of a programming challenge than anything else.\n\nPerhaps Antonis or Craig can further elaborate on this, this is my perspective at least.\n\nBest regards\nAndres\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kFbCQsXaBp0",
    "title": "how can i clear the unwanted back ground of Bscan Merged output",
    "original_post": {
      "author": "Naol Worku",
      "date": "Jun 6, 2018, 9:00:21AM",
      "content": "Im using gprMax to simulate my Scenario.im doing my thesis on detecting buried cylinder and im facing challenges on bscan.\nIm using Array techniques"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2018, 5:49:58AM",
        "content": "Naol,\n\nIf you want only the scattering response from the cylinder you can remove the response from the background. You must run a simulation with only the background and subtract it from the simulation results that contain both the background and the cylinder. N.B since you care using a fractally generated soil model you must seed the random number generator (see http://docs.gprmax.com/en/latest/input.html#fractal-box parameter i2) so that you get the same fractal distribution for both models.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/c6dhi2ZY1lI",
    "title": "\"Adding surface roughness in geometry file\"",
    "original_post": {
      "author": "Diksha Sharma",
      "date": "Jan 9, 2025, 6:35:43AM",
      "content": "Hi all, I am trying to add some random surface in a 2 layer model . I get it that by exporting the geometry file in .h5 format we can edit the values in the matrix and change the shape of surface randomly  but how can we implement a roughness model with \"rms height\" and \"correlation length \" using some Auto correlation function (exponential)  in to that geometry file ? \n\nIf anyone has worked out something in python or matlab please help me understand this. \n\nI am attaching a reference paper as well where author has developed a good 2-layer model with topography (page 2 & 4).\n\nReally appreciate if someone can help me out !!"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lTRL0rJHm9E",
    "title": "Where's the ground on the transmission line?",
    "original_post": {
      "author": "Hideaki Page",
      "date": "Dec 15, 2023, 11:43:18AM",
      "content": "Hello,\n\nI'm trying to model a patch antenna. It consists of a two metal plates separated by a dielectric. The script is below.\n\nI don't understand where the ground of the transmission line is connected. I've connected the transmission line to the top plate but there's no reference to the connection of the bottom plate. \n\nA similar thing occurs in the example of the half wave dipole (https://docs.gprmax.com/en/latest/examples_antennas.html#example-wire-dipole). The transmission line appears to be connected to one arm of the dipole only. The other arm is left floating.\n\nFor me a transmission line needs a signal and a signal return. There's no return in the models. Can someone explain how this works?\n\nHideaki\n\n\n\n\n#domain: 0.2 0.2 0.01\n#dx_dy_dz: 0.001 0.001 5e-06\n#time_window: 8.333333333333334e-09\n#waveform: gaussian 1 2400000000.0 pulse1\n#transmission_line: z 0.11275 0.10185000000000001 0.005 50 pulse1\n#material: 3.3 0 1 0  rubber\n#plate: 0.08725000000000001 0.08725000000000001 0.005 0.13825 0.13825 0.005 pec\n#plate: 0.07500000000000001 0.07500000000000001 0.004995 0.17500000000000002 0.17500000000000002 0.004995 rubber\n#plate: 0.07500000000000001 0.07500000000000001 0.0039900000000000005 0.17500000000000002 0.17500000000000002 0.0039900000000000005 pec\n#geometry_view: 0 0 0 0.2 0.2 0.01 0.001 0.001 0.001 patch_out n"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/un9ky1FgAsM",
    "title": "Problem in B_scan",
    "original_post": {
      "author": "Zohaib Akbar Khan",
      "date": "Jul 13, 2024, 8:10:08AM",
      "content": "hello kindly find the attached file of snow and underlying soil,\n.vti geometery in paraview is attached that shows the good result, but after running the simulation in B_scan it does not show any reflection despite of the difference in permitivty of snow and soil.\nScript of .in is also attached,  could you guys please explaint he reson\nregards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 15, 2024, 4:38:54AM",
        "content": "A couple of points:\n\n- When (in time) are you expecting to see the reflection from the snow/soil interface? Since the snow is a low dielectric (high velocity) material, the reflection maybe merged with the direct wave. Check this.\n- Have you applied any processing to your output? Try applying some gain.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MZgEQcF7T7s",
    "title": "The influence of the 3D environment on resulting scan",
    "original_post": {
      "author": "Jean Riemersma",
      "date": "Oct 27, 2023, 6:07:20AM",
      "content": "Dear developers of gprMax,\n\nFirst of all, thank you very much for the software that you have created! I have been using it for my studies and it has been working very well.\n\nCurrently, I am working on a study that aims to detect agricultural crops in the soil utilizing the GPR-antennas, soil models, 3 environment you have provided (again thank you). However, as expected the calculations for a B-scan take quite some time, despite the fact that I am already utilizing OpenMP and a GPU. Now, I am trying to reduce the simulation time by simplifying certain aspects of the model. (I am afraid that I already know the answers on the following questions, but I would like to make sure that I have the right assumptions.) These are the two questions regarding the simplification:\n\n1. How much (for instance expressed in relative amplitude) does a 3D environment influence the calculations for an A-scan compared to a 2D environment?\n2. Would a lower resolution for instance 0.001 in a 2D environment be more accurate compared to real GPR-data than a 0.002 resolution in a 3D environment?\n\nIn short, these questions relate to simplification trade offs in the model. My overall question would be which parameters I can best simplify to reduce the computation time. I would very much appreciate it if you have some spare time elaborating or directing me to a study that covers these aspects.\n\nThank you for your effort and time!\n\nKind regards,\nJean Riemersma\nMaster Biosystems Engineering Student\nWageningen University and Research"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 27, 2023, 6:47:01AM",
        "content": "Dear Jean,\n\nWe all have faced problems that are due to limitation of computational resources and compromises that need to be made that way. The main difference between 3D and 2D signal strength will be the spreading loss that happens on a volume in 3D but only on a surface in 2D. That is why 2D signals are stronger. There are formulae that attempt to correct this and they have been used (e.g. in 2D FWI using real data) but they only work when we examine propagation in a half-space with no other interactions. They break down for more complex realistic situations. The other big difference is on polarisation and scattering from smaller targets. If your targets are two dimensional (e.g. pipes) then the 2D code will offer a reasonable approximation of GPR signatures and patterns but if the targets are not then obviously this is not going to be the best way. The sources in a 2D model are also infinite long (line source) and not like a dipole. \n\nA 2D model could be very useful to highlight GPR signatures and patterns from a number of interesting cases that are not at odds with the fundamental assumptions that a 2D model needs to make to work. Comparing actual signals with real data will be tricky. If you examine relative responses due to variation in material properties these can be useful as an indication of what you might get in real 3D data. The smaller your model resolution the better the approximation as the numerical errors will be smaller and the approximation of your objects that do not conform with your coordinates will also improve. It is not easy to say that a 0.001 m 2D model will be better than a 0.002 m 3D model. This depends in many ways on what you are modelling (sources, objects) and obviously on your assumptions that make a 2D model valid or not.\n\nIf I was examining research work that had to make sacrifices on using a 2D model instead of a 3D model I will be looking on seeing evidence of understanding of the limitations that this choice brings and analysing the data in that light. No one can hold you responsible because you do not have a supercomputer in your room ;-) \n\nObviously, discussing these choices with your supervisor is very important as sometimes access and funding to use big machines can be found if this is the only way to get something meaningful. Bad good knowledge can be obtained by simple models as well if they are cleverly and properly designed. \n\n\nHope this helps\n\nAntonis\n"
      },
      {
        "author": "Jean Riemersma",
        "date": "Oct 27, 2023, 8:57:04AM",
        "content": "Dear Antonis, \n\nThank you for the quick response! The answer clarifies a lot, and sort of confirms the hypothesis I had. I will consider your answer during the next meeting with my supervisor. \n\nAlso thank you for the advice, I agree on that. Have a great weekend!\n\nBest, \nJean\n\nOp vrijdag 27 oktober 2023 om 12:47:01 UTC+2 schreef Antonis Giannopoulos:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/UvUOJ3_P7CA",
    "title": "Can't distinguish objects within heteregeneous soil (Peplinski method)",
    "original_post": {
      "author": "Jack H",
      "date": "Mar 8, 2021, 5:24:49PM",
      "content": "Hi all and the gprMax team,\nI've been using gprMax just for a little while as a data scientist (read: little to no experience with geology/geophysics!) and have been generating randomised Bscans with several buried objects. I've had success locating buried boxes and cylinders in basic simulations of clay/sand/loam, etc (see an example in the objects_in_clay_* files below), with the geometry and objects all falling where I expect them to be and being rather obvious.\n\nHowever, when I change the basic box to a fractal box with the soil_peplinski characteristics, using:\n#soil_peplinski: 0.2 0.8 1.09 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 length tx_rx_ypos width 1.5 1 1 1 50 my_soil my_soil_box\n\nThere is almost no return, and what is there is very distorted and low-magnitude (see the attached objects_in_soil* files). Am I missing in the application of the above two commands or am I using them incorrectly? Or, are the signals behaving as expected and are just too small to observe in this way (even with the squashed range of the imshow)?\n\nAlso, I am very interested in the use of your landmine/IED objects, but I see that they are not yet currently available. Is a release date on the horizon? \n\nThanks in advance for any help you can supply,\nJack"
    },
    "responses": [
      {
        "author": "Jack H",
        "date": "Mar 8, 2021, 5:28:30PM",
        "content": "(Sorry, could not post with the '.in' files for some reason, so I've had to attach them separately):\n#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n#title: B-scan from objects buried in clay\n#domain: 7.5 1.0 0.002\n##c/(max_f*sqrt(rperm)) = 3e8/(3e9*sqrt(6)) = 0.0408, 3e8/(12e8*sqrt(6)) = 0.102\n#dx_dy_dz: 0.004 0.004 0.002 \n## time window is calculated by: 2*d/(c/sqrt(rperm)), where d=distance to target, c = 3e8, rperm obvious\n#time_window: 1.28e-08 \n\n##object materials (minus pec)\n#material: 4.0 1e-8 1 0 pvc\n#material: 3.0 1e-4 1 0 wood\n#material: 1.01 5e-15 1 0 air\n\n#geometry_view: 0.0 0.0 0.0 7.5 1.0 0.002 0.06 0.02 0.002 Bscan_cR38M967J2_geom.vtk n\n\n#waveform: ricker 1 1000000000.0 my_ricker\n#hertzian_dipole: z 0.06 0.95 0 my_ricker\n#rx: 0.15 0.95 0\n\n#src_steps: 0.02 0 0\n#rx_steps: 0.02 0 0\n\n#material: 12.5 0.01 1 0 clay\n#box: 0.0 0.0 0.0 7.5 0.95 0.002 clay\n#box: 3.710 0.180 0 4.050 0.520 0.002 wood\n#box: 6.290 0.430 0 6.490 0.630 0.002 air\n#box: 5.490 0.110 0 6.210 0.830 0.002 pec\n#box: 0.370 0.050 0 1.150 0.830 0.002 pec\n#cylinder: 3.270 0.690 0 3.270 0.690 0.002 0.170 wood\n#box: 6.570 0.010 0 7.150 0.590 0.002 air\n#cylinder: 1.760 0.490 0 1.760 0.490 0.002 0.350 air\n#cylinder: 4.870 0.470 0 4.870 0.470 0.002 0.310 pvc\n#cylinder: 2.830 0.370 0 2.830 0.370 0.002 0.300 wood\n#cylinder: 7.210 0.510 0 7.210 0.510 0.002 0.110 air\n#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n#title: B-scan from objects buried in soil\n#domain: 2.5 1.2 0.002\n##c/(max_f*sqrt(rperm)) = 3e8/(3e9*sqrt(6)) = 0.0408, 3e8/(12e8*sqrt(6)) = 0.102\n#dx_dy_dz: 0.002 0.002 0.002 \n## time window is calculated by: 2*d/(c/sqrt(rperm)), where d=distance to target, c = 3e8, rperm obvious\n#time_window: 2.4e-08 \n\n##object materials (minus pec)\n#material: 4.0 1e-8 1 0 pvc\n#material: 3.0 1e-4 1 0 wood\n#material: 1.01 5e-15 1 0 air\n\n#geometry_view: 0.0 0.0 0.0 2.5 1.2 0.002 0.06 0.02 0.002 Bscan_E6TtTnHEBO_geom.vtk n\n\n#waveform: ricker 1 1000000000.0 my_ricker\n#hertzian_dipole: z 0.06 1.0999999999999999 0 my_ricker\n#rx: 0.15 1.0999999999999999 0\n\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n\n#soil_peplinski: 0.2 0.8 1.09 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 2.5 1.0999999999999999 0.002 1.5 1 1 1 50 my_soil my_soil_box\n#box: 1.080 0.100 0 1.560 0.580 0.002 air\n#cylinder: 0.730 0.700 0 0.730 0.700 0.002 0.310 wood\n#-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 9, 2021, 4:14:36AM",
        "content": "Dear Jack,\n\nI suspect you have not set the seeding for the fractal box command - see parameter i2 in the docs at http://docs.gprmax.com/en/latest/input.html#fractal-box The #fractal_box command and #add_surface_roughness command both use a random number generator to generate the fractals. If you don't seed the random generator (by specifying i2 with any number) then you will get slightly different fractals ever time you run a model (A-scan) - which is not what you want when you are creating a B-scan, you want the soil distribution to be the same for all the A-scans.\n\nKind regards,\n\nCraig\n"
      },
      {
        "author": "Jack H",
        "date": "Mar 10, 2021, 8:08:42AM",
        "content": "Thanks for that Craig! I seem to be getting a reasonable return now (almost nothing from my \"wood\"/\"pvc\" objects but I guess that is correct). I think I understand how seeding affects the Ascans now,  since a lot of my confusion was stemming from the fact that my paraview was looking fine (but was not representative of the soil distribution at each Ascan). \n\nMy current issue that I am facing the issue is that I'm unsure about how to calculate the distance of the new objects since the permittivity is no longer static. At the moment I'm lazily assigning the max permittivity of the soil, thus overestimating the depth of the objects in general. My guess is that depth calculation is only an estimation in real-world scenarios, and is likely mirrored here. Again: not a geophysicist. \n\nAlso, sorry to repeat myself, but is there any news on the buried landmine objects? I understand if you are awaiting a publication on two : ) , but I just haven't seen any recent updates.\n\nThanks again,\nJack\n"
      },
      {
        "author": "Jack H",
        "date": "Mar 10, 2021, 8:13:05AM",
        "content": "Just for anyone's interest, here is my latest Bscan in file and output png (notice the 4 objects are 2 PEC (1 off screen...), 1 pvc, and 1 wood object.)\n\n--------------------------------------------------------------------------------------------------------------------------------------------\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 2.5 1.2 0.002\n##c/(max_f*sqrt(rperm)) = 3e8/(3e9*sqrt(6)) = 0.0408, 3e8/(12e8*sqrt(6)) = 0.102\n#dx_dy_dz: 0.002 0.002 0.002 \n## time window is calculated by: 2*d/(c/sqrt(rperm)), where d=distance to target, c = 3e8, rperm obvious\n#time_window: 2.4e-08 \n\n##object materials (minus pec)\n#material: 4.0 1e-8 1 0 pvc\n#material: 3.0 1e-4 1 0 wood\n#material: 1.01 5e-15 1 0 air\n\n#geometry_view: 0.0 0.0 0.0 2.5 1.2 0.002 0.06 0.02 0.002 Bscan_31CRvgI1OG_geom.vtk n\n\n#waveform: ricker 1 1000000000.0 my_ricker\n#hertzian_dipole: z 0.06 1.1 0 my_ricker\n#rx: 0.15 1.1 0\n\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n\n#soil_peplinski: 0.2 0.8 1.09 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 2.5 1.1 0.002 1.5 1 1 1 50 my_soil my_soil_box 14482\n#cylinder: 1.290 0.540 0 1.290 0.540 0.002 0.340 wood\n#box: 2.070 0.170 0 2.470 0.570 0.002 pec\n#cylinder: 0.460 0.440 0 0.460 0.440 0.002 0.340 pvc\n#cylinder: 1.810 0.800 0 1.810 0.800 0.002 0.220 pec\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2021, 3:21:01PM",
        "content": "Dear Jack,\n\nYour assumptions are correct - you are very limited in calculating exact target depths when the soil is a heterogeneous distribution of different materials with different dielectric values, i.e. like the Peplinski/Dobson model. You could use an average velocity value based on the range of dielectric values, but doesn't account for what volume of that material is used in the distribution.\n\nThe plan is release the landmine models with the next version of gprMax. This has been delayed because I have been too busy with other work commitments to be able to get the version ready for release. At the moment that is looking like late Spring or early summer.\n\nKind regards,\n\nCraig\n"
      },
      {
        "author": "Jack H",
        "date": "Mar 15, 2021, 1:54:58AM",
        "content": "Hi Craig,\nGlad to hear about the landmines still having a planned release. For my work, I guess metal cylinders and boxes will do until then! :) \n\nAlso, just a quick thanks to you and your lab for making such a useful tool freely available. It's been invaluable in helping me understand GPR technology and its fundamentals (to my extent, at least).  \n\nRegards,\nJack\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/x5rdS0rvAPs",
    "title": "Unable to use gprMax to run cuda",
    "original_post": {
      "author": "Leonard Koh",
      "date": "Oct 7, 2020, 1:10:44AM",
      "content": "Hi All\nI have problems using my gpu for gprMax i am currently using a nvdia GTX 1050. I have downloaded cuda version 11 and pycuda. and set all the environmental variables for CUDA and the the C++ compiler. After which i get an error something like this.\n\nI then downgraded cuda verison 10 and reinstall everything else the same and added the enviromnetal variables. I then got this issue\n\nBelow i have attahed my user enviromental variables\n\nDo i need cudNN installed as well?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 7, 2020, 6:37:38AM",
        "content": "From the error message it seems that pycuda is not installed or cannot be found and for using a GPU this will be needed. Check that either pycuda is not commented out in the conda_env.yml file or that is available in your python installation used by gprMax.\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Leonard Koh",
        "date": "Oct 7, 2020, 11:43:09AM",
        "content": "Hi Antonis\n\nThank you for your prompt reply. I checked my conda_env.yml and it was indeed commented out. I uncommented it as show below. However i still get the same error. Any advice how to procced next? Does it have to do with the version of pycuda? I also show what version of pycuda i have installed.\n\n\n "
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 7, 2020, 12:14:48PM",
        "content": "I am not sure if uncommenting this will work after the installation has been done. You either reinstall with the conda_env file correctly setup for using CUDA or try to install pycuda using pip. The error still says that it cannot find pycuda. \n\nI think the best option (which I have not tried!) is to update the conda environment after uncommenting the line for pycuda using information found at\n\nhttps://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#updating-an-environment\n\n(you need to use the correct environment file) \n\nIf everything is emplace the pycuda should be come available. It is not ON by default as it requires libraries (CUDA) that people will not have install if they are not using the GPU options.\n\nBest\n\nAntonis\n\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 7, 2020, 3:54:02PM",
        "content": "I think this issue has cropped up before. If you search in the forum you will find some posts with similar error. In there the issues were the nvcc that is needed was not in the PATH and could not be executed.  There was another issue in using snapshots that do not work with the GPU kernel. It seems that the NVIDIA compiler mvcc is not compiling the GPU kernels for some reason.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 8, 2020, 9:51:24AM",
        "content": "Having to run the vcvarsall.bat to setup environmental variables is I suppose  the way the Windows OS operates to setup specific aspects with regards to compilers and other software packages. I don't know how else this can be done but I am sure it can be somehow automated if needed. I do not use Windows at all so cannot help here.\n\nGlad the problem was solved!\n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IOXsW4y4ZXI",
    "title": "Re: sine wave on gprMax",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 3, 2019, 5:56:33AM",
        "content": "Dear Рада,\n\nI don't know what you mean \"...build a sine wave with python to the B-scan\". by The image you have attached shows a series of hyperbolas in a B-scan of real data, are you trying to simulate this scenario? If so we will need much more information to be able to offer advice.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Рада Дягилева",
        "date": "Oct 3, 2019, 8:09:47PM",
        "content": "I want to get a this picture"
      },
      {
        "author": "Рада Дягилева",
        "date": "Oct 7, 2019, 4:23:39AM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "Oct 17, 2019, 5:20:29AM",
        "content": "Dear Рада,\n\nI am afraid it is still not clear what you are trying to do. Is the sine wave what you want to excite your model with?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Рада Дягилева",
        "date": "Oct 20, 2019, 8:25:31PM",
        "content": "No, I want to get it in the image"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2019, 4:49:55AM",
        "content": "Dear Рада,\n\nWhat has the sine wave got to do with your model?\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/31M3TdE2PfA",
    "title": "user waveform",
    "original_post": {
      "author": "Michael Fehér",
      "date": "May 10, 2019, 12:28:38PM",
      "content": "hi guys,\n\nafter some annoing tests to use a custom waveform in 2D-models (I got a lot of HF-noise in de A-scan due the interpolation) I decided to try the 'user' 0ptions in #waveform.\n\nso long so good, after I figured out to put a GSSI-Pulse in an equation I put this whole thing in the waveforms.py\n\na standard model with:\n#waveform: user 1 1.5e9 my_wave\n\ngave this error:\nWaveform my_wave of type user with maximum amplitude scaling 1, frequency 1.5e+09Hz created.\nTraceback (most recent call last):\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/gprMax.py\", line 67, in main\n    run_main(args)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/gprMax.py\", line 189, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/gprMax.py\", line 230, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/model_build_run.py\", line 166, in run_model\n    process_multicmds(multicmds, G)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/input_cmds_multiuse.py\", line 230, in process_multicmds\n    h.calculate_waveform_values(G)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/sources.py\", line 67, in calculate_waveform_values\n    self.waveformvaluesJ[iteration] = waveform.calculate_value(time + 0.5 * G.dt, G.dt)\n  File \"/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/waveforms.py\", line 118, in calculate_value\n    ampvalue = self.userfunc(time)\nTypeError: 'NoneType' object is not callable\n ok, the equation might not be ok,\n\nso I renamed the contsine block to 'user' and got hte same error.\n\nmight there be a problem in the code?\n\ncould you check if you'll get the same error?\n\n\n\nKind regards, Micha"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 13, 2019, 7:46:09AM",
        "content": "Hi Micha,\n\nAs you have realised, you can either choose from one of the built-in waveform types or specify your own custom waveform through the use of the excitation file. There is not presently an option to use an equation to specify a custom waveform. A couple of comments on this:\n\n1. The 'user' type is an internal type that works with the excitation file, it is not designed to be used with the waveform command.\n2. The 'userfunc' property of the waveform.py module expects a function whose call method uses interpolation to find the value of new point. If you change this your function needs to take time as input and return a value when called.\n3. You could add another type to waveform and specify your own function. Again, your function needs to take time as input and return a value when called.\n\nHope this provides some clarification.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Michael Fehér",
        "date": "May 14, 2019, 3:36:39AM",
        "content": "dear Craig,\n\nthanks for this suggestion.\n\nbut: it seams that gprMax is'nt using ~/gprMax/gprMax/waveforms.py.\nWhich file is gprMax using? (which file I have to edit?)\n\nregards, Micha"
      },
      {
        "author": "Craig Warren",
        "date": "May 14, 2019, 4:25:20AM",
        "content": "Dear Micha,\n\nYou should edit the 'waveforms.py' inside the gprMax package, and then install it again which will copy it into the conda environment.\n\npython setup.py install\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yXZfnPECDuY",
    "title": "Correct way to get current output of an antenna using #rx",
    "original_post": {
      "author": "Heaviside",
      "date": "Mar 24, 2022, 8:01:50AM",
      "content": "First, thank you so much for gprMax. I think it is a great program and have learned a lot by using it.  Thank you.\n\nI wish to put an excitation on a transmit antenna and see the current received on a receive antenna.\n\nAccording to the docs \"Ix is an optional array containing the time history (for the model time window) of the values of the x component of current (calculated around a single cell loop) at that receiver position.\"\n\nSo does that mean I cannot look at the output, for example, of a dipole antenna?\n\nI tried to make a single cell loop using four #edge commands followed by a :rx command and got the error:\n\nFile \"/home/william/gprMax/gprMax/model_build_run.py\", line 426, in solve_cpu\n    store_outputs(iteration, G.Ex, G.Ey, G.Ez, G.Hx, G.Hy, G.Hz, G)\n  File \"/home/william/gprMax/gprMax/fields_outputs.py\", line 43, in store_outputs\n    func = globals()[output]er\nKeyError: 'Iy'\n\nHere is the code where I tried to make a single cell loop and set the :rx command.\n#domain: 0.050 1.100 0.200\n#dx_dy_dz: 0.001 0.001 0.001\n\n#edge: 0.025 1.0 0.100 0.025 1.001 0.100 pec\n#edge: 0.025 1.001 0.100 0.025 1.001 0.101 pec\n#edge: 0.025 1.00 0.101 0.025 1.001 0.101  pec\n#edge: 0.025 1.00 0.100 0.025 1.00 0.101 pec\n#rx: 0.025 1.0 0.100 rx1 Iy\n\nThank you.\nBill"
    },
    "responses": [
      {
        "author": "Hideaki Page",
        "date": "Apr 4, 2022, 7:17:31AM",
        "content": "I'm experiencing exactly the same problem with the rx command. It doesn't seem to accept the addition argument for current Iy. I get a key error in my code.\n\nPlease anyone, I would like a solution to this as it is critical for my analysis.\n\nHideaki\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 12, 2022, 12:09:49PM",
        "content": "Hi both,\n\nThis was due to a missing import statement in one of the modules. Fixed now. If you pull the latest version from GitHub, the error should go away.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Heaviside",
        "date": "Apr 12, 2022, 12:18:28PM",
        "content": "Craig, thank you so much.\n\nBill\n\n"
      },
      {
        "author": "Hideaki Page",
        "date": "Apr 14, 2022, 7:13:41AM",
        "content": "Many thanks. Works great.\n"
      },
      {
        "author": "Hideaki Page",
        "date": "Apr 15, 2022, 4:46:49AM",
        "content": "Thanks for the fix on the current sense when using #rx. However, I'm getting a similar error when running with a gpu.\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Admin\\AppData\\Local\\Programs\\Python\\Python38\\lib\\runpy.py\", line 193, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\Admin\\AppData\\Local\\Programs\\Python\\Python38\\lib\\runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"C:\\gprMax\\gprMax-master\\gprMax-master\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\gprMax\\gprMax-master\\gprMax-master\\gprMax\\gprMax.py\", line 69, in main\n    run_main(args)\n  File \"C:\\gprMax\\gprMax-master\\gprMax-master\\gprMax\\gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\gprMax\\gprMax-master\\gprMax-master\\gprMax\\gprMax.py\", line 232, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\gprMax\\gprMax-master\\gprMax-master\\gprMax\\model_build_run.py\", line 166, in run_model\n    process_multicmds(multicmds, G)\n  File \"C:\\gprMax\\gprMax-master\\gprMax-master\\gprMax\\input_cmds_multiuse.py\", line 426, in process_multicmds\n    raise CmdInputError(\"'\" + cmdname + ': ' + ' '.join(tmp) + \"'\" + ' contains an output type that is not allowable. Allowable outputs in current context are {}'.format(allowableoutputs))\ngprMax.exceptions.CmdInputError: '#rx: 1.2 1.2 1.2 S1 Ix Iy Iz' contains an output type that is not allowable. Allowable outputs in current context are ['Ex', 'Ey', 'Ez', 'Hx', 'Hy', 'Hz']\n\nThe file runs fine without the gpu.\n\nHideaki\n\nOn Tuesday, 12 April 2022 at 17:09:49 UTC+1 Craig Warren wrote:\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 27, 2022, 3:51:01AM",
        "content": "The clue is in the error message: 'gprMax.exceptions.CmdInputError: '#rx: 1.2 1.2 1.2 S1 Ix Iy Iz' contains an output type that is not allowable. Allowable outputs in current context are ['Ex', 'Ey', 'Ez', 'Hx', 'Hy', 'Hz']'\n\nCurrent outputs (Ix, Iy, Iz) are not allowable on GPU. You can however calculate them yourself by taking the appropriate magnetic (H) field components.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dQ2xEjmtRfQ",
    "title": "Saving A scan with with different values of Rd using #Python #end python",
    "original_post": {
      "author": "Hussain Mumtaiz",
      "date": "May 29, 2021, 8:15:14PM",
      "content": "Hi all;\nI am looking for a suggestion on how to run my model with different values of Rd using #python and #end python\nalso, the commands to save all of A scan on one folder.\nMy model with one Rd values as below\n#title: : A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 2.0 1.2 0.006\n#dx_dy_dz: 0.006 0.006 0.006\n#time_window: 25e-9\n#material: 3 0 1 0 sand_space\n#waveform: ricker 1 1e9 my_ricker\n#hertzian_dipole: z 1 0.6 0 my_ricker\n#rx: 1.04 0.6 0\n#box: 0 0 0 2.0 0.6 0.006 sand_space\n#cylinder: 1 0.45 0 1 0.45 0.006 0.06 pec\n#geometry_view: 0 0 0 2.0 1.2 0.006 0.006 0.006 0.006 cylinder_sand_space n\npython -m gprMax Hussain_models/Rd6cm_Ascan_2D-F1G.in\n    My model with different values of Rd as below :\n #title: : A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 2.0 1.2 0.006\n#dx_dy_dz: 0.006 0.006 0.006\n#time_window: 25e-9\n#material: 3 0 1 0 sand_space\n#waveform: ricker 1 1e9 my_ricker\n#hertzian_dipole: z 1 0.6 0 my_ricker\n#rx: 1.04 0.6 0\n#box: 0 0 0 2.0 0.6 0.006 sand_space\n#python:\nfrom random import random as rd\nr=0.001+0.034*rd()\nprint(\"#cylinder: 1 0.45 0 1 0.45 0.006 {} pec\\n\". format(r))\n#end_python:                   \n#geometry_view: 0 0 0 2.0 1.2 0.006 0.006 0.006 0.006 cylinder_sand_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:43:42AM",
        "content": "The approach of using a random number generator within a #python block is OK. You can then apply that to randomly generate a series of different radii (rd) for your cylinders. You will need to run multiple simulations (using the -n flag), similarly to creating a B-scan but you will not move any transmitter or receiver(s). You may also want to think about how to seed the random number generator, such that you can re-produce the same random series.\n\nKind regards,\n\nCraig\n"
      },
      {
        "author": "Hussain Mumtaiz",
        "date": "Jun 6, 2021, 3:40:23PM",
        "content": "Thank you Craig for your reply.\n I have another issue.\nIt is possible to have multiple B_scan using the above approach please.\nReg;\nhussain  \n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 9, 2021, 3:29:31PM",
        "content": "You could do this with a single input file and call of gprMax (with the -n flag), but then you just need to be careful about how you merge the correct sets of A-scans together to form different B-scans. You would probably need to modify the outputfiles_merge script to achieve this.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lMWHIWTX1kQ",
    "title": "Shell Script to run multiple A-scans sequentially",
    "original_post": {
      "author": "alpergenc",
      "date": "Jan 18, 2019, 2:32:14AM",
      "content": "Hi all,\n\nI am using gprMax to simulate A-scan data. I am using the command like \"python -m gprMax data/cylinder_Bscan_PEC_soil1_5cm.in \". In my computer at work, one simulation takes around 20 minutes. I have to simulate many A-scan data like that, for different materials into different soil types. I have already prepared the input files, however giving the commands one-by-one is not practical enough (for instance my computer does not simulate at nights while I am at home). How can I write a shell script to run these input files sequentially? For instance my three input files are: \"data/cylinder_Bscan_PEC_soil1_5cm.in\", \"data/cylinder_Bscan_PEC_soil2_5cm.in\" and \"data/cylinder_Bscan_PEC_soil3_5cm.in\". Can anyone help me to write a script to run these three files? Simply the script will do the following:\n\n- send the first command: \"python -m gprMax data/cylinder_Bscan_PEC_soil1_5cm.in \"\n- wait until it finishes\n- send the second command: \"python -m gprMax data/cylinder_Bscan_PEC_soil2_5cm.in \"\n-wait until it finishes\n- send the third command: \"python -m gprMax data/cylinder_Bscan_PEC_soil3_5cm.in \"\n\nThanks in advance,\n\nRegards,\nAlper"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 19, 2019, 12:15:53PM",
        "content": "Dear Alper,\n\nWhy not just do all the A-scans using a single input file that is run multiple times. Within the input file use some Python to select the different soil types for the different model runs. The variable 'current_model_run' can be used to access the number of the current run. See the B-scan examples that include the antenna model for an idea of implementation - http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model\n\nKind regards,\n\nCraig"
      },
      {
        "author": "alpergenc",
        "date": "Jan 21, 2019, 5:37:18AM",
        "content": "Hi Craig,\n\nThank you for your reply. I will investigate the examples that you sent me.\n\nRegards,\nAlper"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/p-oLz-Mqfj4",
    "title": "On the phase of reflected wave",
    "original_post": {
      "author": "James T",
      "date": "Mar 18, 2022, 10:47:24PM",
      "content": "Hello developer\n\nWhen simulating a karst cave filled with dry soil, I found that the phase of the upper and lower reflection interfaces of the cavity did not change. I think it is very strange that my gprmax version should be a relatively new version。\n  The circular cavity is filled with dry soil and water respectively, but their lower interface phase does not seem to change"
    },
    "responses": [
      {
        "author": "James T",
        "date": "Mar 19, 2022, 4:00:14AM",
        "content": "However, this phenomenon does not exist in layered media\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 21, 2022, 6:58:57AM",
        "content": "Can you include your input files please.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "James T",
        "date": "Mar 21, 2022, 9:57:27AM",
        "content": "This is a similar cavity command. As for layered media, I just change its shape and expand its size\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 12, 2022, 11:56:41AM",
        "content": "Can you send the input files with ONLY the commands used to generate the output you have questions about please, i.e. remove any commands not being used.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rQpccS5XxfM",
    "title": "Query about extracting S-Parameters in MATLAB from gprMax OUT file",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "May 21, 2021, 4:57:59AM",
      "content": "Dear all,\n               I have simulated wire dipole antenna in gprMax. I was able to get incident voltage, incident current, total voltage, total current in time domain and also in frequency domain. S11 and impedance were obtained in gprMx result. But while reading the gprMax out file in MATLAB using h5disp command, I am able to read only time domain gprMax resilt. But cannot read frequency domain gprMax data (S-parameters, impedance, curent and voltage). How to extract the frequency domain data in MATLAB from gprMax out file. I have been searching in MATLAB help and internet but I couldn't find. I also plotted S11 by finding V_ref/V_inc in time domain but the result shows lot of reflections. I don't know whether I am going in right direction or not. Hereby I am attaching the gprMax code and MATLAB code\nKindly help me.\n\ngprMax Code:\n#title: Wire antenna - half-wavelength dipole in free-space\n\n\n#domain: 0.500 0.500 0.500\n\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 10e-9\n\n\n\n#waveform: gaussian 1 2e9 mypulse\n\n#transmission_line: y 0.250 0.250 0.330 73 mypulse\n\n\n\n## 150mm length\n\n#edge: 0.175 0.250 0.330 0.325 0.250 0.330 pec\n\n\n\n## 1mm gap at centre of dipole\n\n#edge: 0.250 0.250 0.330 0.251 0.250 0.330 free_space\n\n\n\n#plate: 0.03 0.03 0.03 0.47 0.47 0.03 pec\n\n#geometry_view: 0.020 0.020 0.020 0.030 0.030 0.180 0.002 0.002 0.002 antenna_wire_dipole_fs f\n\nMATLAB published report attached here.\nRegars\nRohit"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:11:31AM",
        "content": "Dear Rohit,\n\ngprMax uses the Finite-Difference Time-Domain (FDTD) method - therefore the output will be in the time domain. It is then up to the user to decide if he/she wants to convert this to a frequency domain representation. We provide some Python and MATLAB helper scripts to assist in calculating and plotting useful quantities, such as s-parameters - https://github.com/gprMax/gprMax/blob/master/tools/plot_antenna_params.py \n\nYou can run the wire dipole example model and then use the Python script to plot voltages and currents from the transmission line source and also s-parameters. You can also do this yourself (as you have tried) in MATLAB. I am not sure why you are trying to look at s11 in the time domain, and what you were expecting, but it it typically calculated and plotted in the frequency domain. So I would suggest you try that, then you should be able to get the same results as from the Python script.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Rohit Karnena",
        "date": "Jun 13, 2021, 10:27:42AM",
        "content": "Dear sir,\n              I have been trying to simulate monostatic two layered media (air-PEC) in gprMax. I considered a wire dipole antenna placed certain height above a metal plate. The time domian voltage results (incident and reflected voltages) are comining same way for different heights. For 10cm, 20cm, 30cm and 60cm heights, the total voltage result looks almost similar. How can this happen. Target (metal plate) has kept at a distance from antenna, so this distance must influence the total voltage result. But it is not the same in my case. someone please help me to fix this problem. Is this problem with my code ? Hereby I am copying my gprMax code. Thank you.\n\nRegards\nRohit\n\n#title: Wire antenna - half-wavelength dipole above metal plate\n\n\n#domain: 0.500 0.500 0.500\n\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 10e-9\n\n\n\n#waveform: gaussian 1 1e9 mypulse\n\n#transmission_line: x 0.250 0.250 0.330 73 mypulse\n\n\n\n## 150mm length\n\n#edge: 0.175 0.250 0.330 0.325 0.250 0.330 pec\n\n\n\n## 1mm gap at centre of dipole\n\n#edge: 0.250 0.250 0.330 0.251 0.250 0.330 free_space\n\n\n\n#plate: 0.03 0.03 0.03 0.47 0.47 0.03 pec\n\n#geometry_view: 0.020 0.020 0.020 0.030 0.030 0.180 0.002 0.002 0.002 antenna_wire_dipole_fs f\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2021, 8:50:26AM",
        "content": "Can you attach some plots showing the total voltage in the transmission line for the different PEC plate heights?\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ud96Ajq3SqA",
    "title": "The B scan results were abnormal",
    "original_post": {
      "author": "C Master",
      "date": "Sep 18, 2020, 10:21:03PM",
      "content": "Hi！\nI scanned a model with B, using a voltage source, and found that the result seemed to be abnormal. Please help me to see what went wrong,Why is the marked part of the output file slanted? Shouldn't it be flat? Thank you！\n\nThis is my .in file\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 4 19 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 300e-9\n\n#material: 5 0 1 0 soil\n#material: 200 2e8 300 0 metal\n\n#voltage_source: z 0.5 18 0 10 my_ricke\n#waveform: gaussian 50 2e8 my_ricke\n\n#rx: 0.5 18.1 0\n\n#box: 0 0 0 4 18 0.01 soil\n#cylinder: 2 2 0 2 2 0.01 1 metal\n\n#src_steps: 0.06 0 0\n#rx_steps: 0.06 0 0\n\nAnd this out file:"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 19, 2020, 8:18:39AM",
        "content": "There are two things here\n\n1. In a 2D model the only proper excitation is the #hertzian_dipole which produces the correct line source excitation as a Hertzian dipole is a 3D concept (maybe we should create a new command to avoid confusion here but this is not the point).  A voltage source could produce a propagating wavelet in a similar way but is has not been designed to be used in a 2D model \n\n2. A voltage source cannot be moved using the #src_steps: command and hence you are only moving the #rx point and create a Common source gather (i.e. same source many receivers) http://docs.gprmax.com/en/latest/input.html#src-steps-and-rx-steps\n\nSolution: Change your source to #hertzian_dipole or use some python scripting to move the #voltage_source but that means a new model generation for every trace as the material at the source will change. I suppose if one uses a hard source instead we can see if we can have the #src_steps: work for this but it does not at the moment and this is not really a high priority feature.\n\nHope this helps\n\nAntonis\n\nPS Don't need to model metal that way ... use PEC and it will fine. If you need to simulate metal in detail to understand skin depth penetration etc. the resolution is not right etc. If you just want to simulate the response of a metallic pipe at these frequencies PEC is much easier and better.\n"
      },
      {
        "author": "C Master",
        "date": "Sep 19, 2020, 10:09:05PM",
        "content": "Hi  Antonis ,\n\nThank you very much for your answer, which successfully solved my question.\n\n many thanks,\nC master\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gdbf-Z12pU8",
    "title": "wavelength of the propagating electromagnetic fields",
    "original_post": {
      "author": "Enna Enna",
      "date": "May 11, 2021, 4:51:24AM",
      "content": "Hi all and the gprMax team,\n\nThis is my first message in the group so first of all I'd like to express my sincere gratitude to the developers of gprMax for creating such a useful tool and distributing it as open-source. \nThank you all and hope you're continuing this great work!\n\nI would like to ask about the relationships between the the thickness of layer \nand wavelength of the propagating electromagnetic fields.\n\nHow does compare the thickness of layer to the effective length of the Ricker wavelet?\n\nThe following equations is it a correct equation (See Fig) ? \n\nBest Regards,"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 5:44:42AM",
        "content": "Dear Enna,\n\nI don't understand your question, perhaps you can elaborate further. \n\nFor FDTD modelling, a 'rule of thumb', i.e. a rough guide, to choosing the spatial resolution for the model is to ensure the smallest wavelength (high dielectric and highest frequency) is sampled by at least 10 cells. The time step is governed by the Courant condition, and gprMax will calculate and apply this for you depending on the spatial resolution you choose.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/e7HCwQM99yU",
    "title": "executing from Batch file or from the pythonfile",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Jul 15, 2019, 8:11:26AM",
      "content": "Hallo every body,\ni have problem \n\ni want to execute these instructions in one click:\n\ncd Desktop\\gprMax\nstart activate gprMax\npython -m gprMax user_models/cylinder_Ascan_2D.in \npython -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\n\n\ni have  two idea\n\n1-the first one to make a patch file and execute them. but they dont work !\n2- to execute this with help of python script with importing library OS: IMPORT OS \nBUT DIDNOT WORK:\n\nCOULD YOU HELP ME PLEASE"
    },
    "responses": [
      {
        "author": "Ahmed Antar",
        "date": "Jul 15, 2019, 8:51:04AM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "Jul 18, 2019, 4:19:07AM",
        "content": "Dear Ahmed,\n\nMake sure your conda environment and gprMax are all running correctly before you try and build a batch solution. From the error message you have posted, I don't think your conda environment is built correctly as it looks like it is missing packages.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/WhSlay8xtK8",
    "title": "How to output the model to MATLAB and compute the permittivity of soil_peplinski?",
    "original_post": {
      "author": "Yu LIU",
      "date": "Dec 27, 2017, 5:51:16AM",
      "content": "Hi experts and all the friends,\n\nRecently I built a stochastic model with soil_peplinski and want to test an inversion method. However I met two questions that confused me for a long time, so I come for advice.\n\n1.Dear Dr.Warren gave a method of adding and annotating the color bar in Paraview which is really helpful. But I'd like to output the model to MATLAB to do some analysis for the purpose of testing my inversion result, and it seems to be really difficult. Is there any way useful?\n\n2.I suppose some non-hydrogeophysicists may find it not easy to digest Peplinski's paper and he also said his research was for 0.3-1.3GHz range. I choosed 200MHz source and would like to replace the label number with true permittivity but have no idea how I should compute it. Is Topp equation precise enough?"
    },
    "responses": [
      {
        "author": "Arrey Agbor",
        "date": "Dec 27, 2017, 1:31:08PM",
        "content": "Hi Yu,\n\nThis is an interesting question as I am anxiously waiting for the response as this will be useful to me as well. I came across something similar from a paper by Scholer et al. (2011), where they used GPR data to estimate the soil hydraulic properties. I have attached here.\nI was also wondering how suitable is gprmax to generate crosshole GPR data.\n\nCheers!\n\nIvo"
      },
      {
        "author": "Yu LIU",
        "date": "Dec 27, 2017, 10:19:13PM",
        "content": "Hi Arrey,\n\nThanks a lot for your sharing. This is a pretty good paper about GPR inversion which inspired me. In fact I also have followed UNIL's research for some time.\n\nIn my opinion gprMax is suitable for crosshole data simulation but I think you'd better ask experts about your specific question. Hope your research going well."
      },
      {
        "author": "Yu LIU",
        "date": "Dec 31, 2017, 10:16:38AM",
        "content": "Dear experts and peers,\n\n    The second question has been partly resolved for I saw the permittivity would be displayed in command window when forming the vti file. And obviously, Topp equation is not precise here. I'm not sure that, whether I should use the Debye relationship with my attenna frequency to compute the permittivity in dispersive medium. If that, I suppose it's a bit more complex than my expectation. Could I employ stochastic medium that has frequency-independent properties?\n\n    Please forgive my asking too much. I then found a problem about my simulation result. I constructed a model with stochastic medium (shown in Figure.1) but after gaining the result (Figure.2) is like a wedge which is puzzling. I've simulated twice and could find any bug in my script whose content is as below:\n\n\n#title: model\n#domain: 22 12 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 200e-9\n---------------------------------------------------------------------\n#soil_peplinski: 0.8 0.2 2.0 2.66 0.001 0.005 my_soil_l\n#soil_peplinski: 0.8 0.2 2.0 2.66 0.030 0.050 my_soil_2\n#soil_peplinski: 0.8 0.2 2.0 2.66 0.090 0.110 my_soil_3\n#soil_peplinski: 0.8 0.2 2.0 2.66 0.160 0.180 my_soil_4\n---------------------------------------------------------------------\n#fractal_box: 0 1 0 22 12 0.01 1.5 0.2 0.2 1 5 my_soil_l my_fractal_box_1 1\n#fractal_box: 0 3.5 0 22 12 0.01 1.5 0.1 0.1 1 5 my_soil_2 my_fractal_box_2 2\n#add_surface_roughness: 0 3.5 0 22 3.5 0.01 2 1 3 3.3 3.5 my_fractal_box_2 12\n#fractal_box: 0 6 0 22 12 0.01 1.5 0.5 0.5 1 10 my_soil_3 my_fractal_box3 4\n#add_surface_roughness: 0 6 0 22 6 0.01 2 3 1 5.7 6.0 my_fractal_box3 6\n#fractal_box: 0 9.5 0 22 12 0.01 1.5 1 1.5 1 10 my_soil_4 my_fractal_box4 3\n#add_surface_roughness: 0 9.5 0 22 9.5 0.01 2 3 1 9.0 9.5 my_fractal_box4 6\n---------------------------------------------------------------------\n#waveform: ricker 1e6 100e6 my_ricker\n#hertzian_dipole: z 0.5 1 0 my_ricker\n#rx: 1.5 1 0\n#src_steps: 0.2 0 0\n#rx_steps: 0.2 0 0\n--------------------------------------------------------------------\n#geometry_view: 0 0 0 22 12 0.01 0.01 0.01 0.01 model n\n#messages: y"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 2, 2018, 6:03:49AM",
        "content": "Dear Yu,\n\nIn answer to your questions:\n\nAre you talking about viewing the geometry of the model in MATLAB or the field outputs? You should use Paraview for viewing the geometry as the file uses the VTK format which, as far as I know, can't be read by MATLAB. You can view the field outputs (which use a HDF5 format file) using Python plotting tools or in MATLAB using the supplied scripts (tools->MATLAB scripts).\nI don't fully understand your second question. As you say, the mixing model proposed by Peplinski is valid in the range 0.3-1.3GHz. So if you are using a source with a 200MHz centre frequency then you are outside this range of validity. The materials that are created using the Peplinski model in gprMax have frequency-dependent properties that are characterised using a single pole Debye model. You will see the materials and these properties in the table printed when the model runs.\nMaterials:\n    |            |         |         | sigma     | Delta     | tau       | omega | delta | gamma |      | sigma*  | Dielectric \n ID | Name       | Type    | eps_r   | [S/m]     | eps_r     | [s]       | [Hz]  | [Hz]  | [Hz]  | mu_r | [Ohm/m] | smoothable \n----+------------+---------+---------+-----------+-----------+-----------+-------+-------+-------+------+---------+------------\n  0 | pec        | builtin | 1       | inf       |           |           |       |       |       | 1    | 0       | False      \n  1 | free_space | builtin | 1       | 0         |           |           |       |       |       | 1    | 0       | True       \n  2 | |0.0015|   | debye   | 3.66192 | 0.0128727 | 0.0201118 | 9.231e-12 |       |       |       | 1    | 0       | False      \n  3 | |0.0025|   | debye   | 3.75799 | 0.0147401 | 0.0383824 | 9.231e-12 |       |       |       | 1    | 0       | False      \n  4 | |0.0035|   | debye   | 3.84492 | 0.0161157 | 0.0587504 | 9.231e-12 |       |       |       | 1    | 0       | False\nYour input file (shown above) seems reasonable. How did you run the model? Using the arguments:\n-n 50 --geometry-fixed\n\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yu LIU",
        "date": "Mar 8, 2019, 5:51:03AM",
        "content": "Thanks a lot!\n\nCan I ask the first question again... Is there any tool to read the model into Matlab now?"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 8, 2019, 5:55:48AM",
        "content": "Dear Yu,\n\nPlease see my previous post:\nAre you talking about viewing the geometry of the model in MATLAB or the field outputs? You should use Paraview for viewing the geometry as the file uses the VTK format which, as far as I know, can't be read by MATLAB. You can view the field outputs (which use a HDF5 format file) using Python plotting tools or in MATLAB using the supplied scripts (tools->MATLAB scripts).\nIf you are talking about viewing the geometry of the model there are no plans for this to happen in MATLAB.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Oio5LuoHDbU",
    "title": "python setup.py install is deprecated",
    "original_post": {
      "author": "Rizka Maulina Fitri",
      "date": "Jul 6, 2023, 1:10:44PM",
      "content": "Hi,\n\nit's been years for me to using gprmax again, and I have to install it in my new device. So long short story, I already installed miniconda and C compiler, after that I tried the step for build and install gprmax. The first command, python setup.py build returning error in my cmd, turned out I have to mention where this setup.py at, so I changed it to python gprMax/setup.py build. It reads the scripts but turned out error again when it comes to opening files. so I made some changes in the script, I added the folder name as I did to the command before, I attached the image below. After that, the command build was fully executed. Then, I run the next command for install, of course I did the same trick as before (python gprMax/setup.py install) but then it is said that it was deprecated, I attached the image too.\n\nSo, what is wrong with it? Is it because I changed the script? or something else? Can someone help me?"
    },
    "responses": [
      {
        "author": "Rizka Maulina Fitri",
        "date": "Jul 6, 2023, 10:14:09PM",
        "content": "or is it affected that my miniconda folder is not the same as the microsoft visual studio that I installed?? actually when I installed both of them I just going through what the default is, so I didn't change everything except for the instruction from the user guide in gprmax.\n\nand I changed the path to this C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.36.32532\\bin\\Hostx64\\x64 since the path from the guide is not exist anymore.\n\ncan anyone help??\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZRr51_DKmr4",
    "title": "The error from #excite_file",
    "original_post": {
      "author": "HJJ HJJ",
      "date": "Nov 22, 2018, 12:36:57AM",
      "content": "Hi friend,\n\nAn error come out, when I used the command of #excite_file. It always shows me 'A value in x_new is above the interpolation range'. (The detail is shown in the attached figure)\nI assumed that something wrong with my time-vector. So I changed the time-vector-step into half the dt, and the same length with the real Number of iterations. But both cannot work. The time of user-defined source is not longer than actual time window. I carefully checked the commands document, and there are no more special requirements for using  #excite_file. Hope this issue is simple for you. Thanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 22, 2018, 3:41:18AM",
        "content": "HJJ HJJ,\n\nCan you provide your input file and the excitation file that you are using please. From the error message you can see that the fill value for the interpolation is NaN which most likely part of the problem.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Nov 22, 2018, 6:16:11PM",
        "content": "The attached files include my input file and excitation file. Thanks much for your help."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 23, 2018, 6:22:02AM",
        "content": "HJJ HJJ,\n\nWhat I notice is that the timestep of the time vector in your excitation file (11.79ps) is larger than the timestep of the model (2.36ps). You also have fewer values (1001) that the number of iterations in the model (21200). So you need to either change these or make use of the interpolation options.\n\nRead the gprMax docs on using the excitation file - http://docs.gprmax.com/en/latest/input.html#excitation-file\n\nAlso read the scipy docs on the interpolation that is used - https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html\n\nNote at the moment the interpolation options can't be specified through the Python command for the excitation file, so you'll need something like:\n\nprint('#excitation_file: sourcefile.txt linear extrapolate')\n\nTake care you understand what the interpolation is doing to your specific waveforms.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Nov 24, 2018, 7:19:20PM",
        "content": "It works now! Thank you very much!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/thaBCcydOC8",
    "title": "What's the parameters of the material 'pec'?",
    "original_post": {
      "author": "Wz",
      "date": "Dec 17, 2017, 9:35:18AM",
      "content": "Hi \nI want to know what the parameters of the material 'pec' are, such as the relative permittivity, the conductivity and so on .And is anyone know  what parameter will change when the metal is corroded. Will the relative permittivity bigger or smaller?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 17, 2017, 10:47:13AM",
        "content": "PEC means \"Perfect Electric Conductor\" It is not a real material but one that one that assumes that electrical conductivity is infinite. Its presence is enforced by setting the Electric Field to zero. So, in essence is applied as a boundary condition. It is used to mimic the behaviour of metals for frequencies where the skin depth is extremely small and irrelevant. There are no real electrical properties associated with PEC. \n\nThere are papers in the literature that describe the effects of corrosion products on the electrical properties use a simple Google search and you will find a lot of information.\n\nAntonis"
      },
      {
        "author": "Wz",
        "date": "Dec 17, 2017, 1:37:20PM",
        "content": "Thank you.\nI have another question. The input file is posted. The difference between the material of 'soil' and 'metal' is the relative permittivity,  But why are there two similar part in the picture....\n#material: 2 0.01 1.0 0.0 soil\n#material: 10 0.01 1.0 0.0 metal\n--------------------------------------\n#domain: 1.5 0.8 0.75\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 10e-9\n-------------------------------------\n#box: 0.0 0.0 0.0 1.5 0.8 0.6 soil\n#cylinder: 0.3 0.4 0.3 0.7 0.4 0.3 0.1 metal\n#cylinder: 0.9 0.2 0.3 0.9 0.6 0.3 0.1 metal\n--------------------------------------------\n#waveform: ricker 1.0 900e6 MySource\n#hertzian_dipole: y 0.2 0.4 0.65 MySource\n\n#rx: 0.3 0.4 0.65\n#src_steps: 0.02 0.0 0.0\n#rx_steps: 0.02 0.0 0.0"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 18, 2017, 4:48:33AM",
        "content": "You have defined 'metal' to be a dielectric with a relative permittivity of 10 and conductivity of 10mS/m, which is a bit confusing. Your model also potentially suffers from numerical dispersion, see the warning message in red when you run the model. Antonis, suggested some material you can read to understand numerical dispersion and how to mitigate it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Wz",
        "date": "Dec 19, 2017, 8:38:24AM",
        "content": "I can reduce the numerical dispersion now. The warning message in red can be in white. Maybe the threshold of the numerical dispersion is 2 percent. But I don't understand what you said about the material 'metal'. What's the relationship between the relative permittivity and the conductivity?\n\nBest wishes\n\nWz"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 19, 2017, 9:03:11AM",
        "content": "I was suggesting you might want to rename your material 'metal', as it currently does not have the properties of a metal, rather a lossy dielectric.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9nimh6tYGlE",
    "title": "plotting error",
    "original_post": {
      "author": "Kerem Ozkap",
      "date": "May 24, 2019, 12:45:05PM",
      "content": "Hi Craig and All,\n\nI've just updated gprMax and I've encountered a strange problem. \n\nFor testing purposes, I ran the \"cylinder_Ascan_2D.in\" file under the  user_models folder and I have the following result when plotting Ascan. \n\nWhat could be the cause of this error?\n\nThank you,\n\nKerem"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 28, 2019, 4:33:36AM",
        "content": "Hi Kerem,\n\nIt is not a plotting error, it is a problem with the conda environment on macOS. See this thread for how to fix - https://github.com/gprMax/gprMax/issues/195 There is a specific environment file (conda_env_macOS.yml) for macOS, to solve this at the moment.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5LR0S9J_crA",
    "title": "wavelength and bandwidth in ricker wave form pulse signal",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Jun 29, 2023, 4:55:17PM",
      "content": "Dear all,\n\nI hope this message finds you well. I have a query regarding the calculation of the wavelength of a pulse signal. For instance, I am currently simulating a 1.5GHz pulse ricker waveform. I am interested in determining the resolution of this pulse based on its wavelength.\n\n\nI have calculated the wavelength using the formula λ = c / √(ε), where c represents the speed of light and ε is the permittivity. By determining the wavelength, I then obtained the following expression:\n\nΔr = 1 / (2 × λ)\n\nPlease let me know if you need any further information or clarification.\n\n\nI would greatly appreciate your assistance in solving this problem. If GPRMax offers any modules or platforms that can provide this information, I would be grateful to know.\n\nThank you for your attention to this matter."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2023, 7:17:58AM",
        "content": "Dear Himan,\n\nMost of the built-in waveforms in gprMax are broadband pulses (e.g. Ricker). So when we talk about frequency (f) we refer to the centre frequency of the pulse. You can see the time and frequency domain representation of example waveforms in the docs - https://docs.gprmax.com/en/latest/plotting.html#ricker\n\nTo calculate the wavelength of a specific waveform in a material you need to calculate the velocity of propagation in the material, i.e. v=c/sqrt(Er) and then the wavelength, i.e. lambda=v/f.\n\nKind regards,\nCraig \n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/uKjTfdP8FQs",
    "title": "Problem using gprMax with windows 10",
    "original_post": {
      "author": "Stephen RAZAFINDRATSIMA",
      "date": "Aug 28, 2017, 12:10:18PM",
      "content": "Hi,\n\nThis is my first message about gprMax and would like to thank you for this great tool. I have used it on windows 7 without problem.\n\n\nNow,I have installed gprMax on windows 10 pro x64 and when I run a model, which works fine on windows 7, I have the following error message:\n\nTraceback (most recent call last):\n  File \"C:\\Anaconda3\\lib\\runpy.py\", line 184, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Anaconda3\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\srazafin\\Desktop\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\srazafin\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 69, in main\n    run_main(args)\n  File \"C:\\Users\\srazafin\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 121, in run_main\n    hostinfo = get_host_info()\n  File \"C:\\Users\\srazafin\\Desktop\\gprMax\\gprMax\\utilities.py\", line 182, in get_host_info\n    manufacturer = manufacturer.split('\\n')[1]\nIndexError: list index out of range\n\nPlease, is anyone familiar with this error and eventually have got a clue to solve it?\n\nMany thanks in advance,\n\nStephen"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 28, 2017, 7:21:03PM",
        "content": "Hi Stephen,\n\nWelcome to the forum! Looks like an issue with gprMax trying to read the manufacturer and model of your machine. Can you run the commands 'wmic csproduct get vendor' and then 'wmic computersystem get model' and paste the output you get here.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Stephen RAZAFINDRATSIMA",
        "date": "Aug 29, 2017, 4:18:14AM",
        "content": "Hi Craig,\n\nmany thanks for welcoming.\n\n'wmic csproduct get vendor' --> no information (in French it is written: \"Aucune instance disponible.\")\n'wmic computersystem get model' -->\nModel\nCBX3___\n\nBest regards,\n\nStephen"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2017, 3:17:56AM",
        "content": "Hi Stephen,\n\nDefinitely a problem with looking up the vendor name. I'll try and update the code to better handle this in the next few days.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Stephen RAZAFINDRATSIMA",
        "date": "Sep 6, 2017, 4:04:22AM",
        "content": "Hi Craig,\n\nIn order to be able to compute on my machine, I have changed the code above like this:\nmanufacturer = manufacturer.split('\\n')[0]\n\nThis seems not have affected my results.\n\nLooking forward to the updated code.\nMany thanks\n\nKind regards,\nStephen"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2017, 4:21:05AM",
        "content": "Yeh, it won't affect the results at all.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pJ9G1wdrYYw",
    "title": "Different spatial discretization for different dielectric layers",
    "original_post": {
      "author": "ARKA BHATTACHARYYA",
      "date": "Nov 26, 2021, 12:45:59AM",
      "content": "Hi, everyone. I have a question regarding how to use different spatial discretization for different dielectric layers. I have a problem where a thick water layer is situated on top of a concrete layer. I am using two separate boxes for water and for the concrete. As the dielectric constant of water is much higher than concrete so I had to take finer spatial discretization for the whole multilayer structure and the simulation is taking huge time. My question is whether I can use different spatial discretization in the same input file for the two mediums (fine discretization for water and coarse for concrete). \nCould you please tell me? Thanks in advance."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 26, 2021, 3:27:42AM",
        "content": "Sadly you cannot do that. In FDTD it is not a straightforward thing to have multi-grid capabilities. The next version will offer a sub grid implementation which will allow using different grid resolutions at part of your model.\n\nAntonis\n\n"
      },
      {
        "author": "ARKA BHATTACHARYYA",
        "date": "Nov 26, 2021, 8:42:06AM",
        "content": "Thank you very much for reply\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jozfbc0DYvk",
    "title": "Can B-scan result shows echo signal?",
    "original_post": {
      "author": "Rizka Maulina Fitri",
      "date": "Jun 27, 2024, 11:07:21AM",
      "content": "Hi!\n\nOut of curiosity and for other reason, does B-scan result can show the echo signal back to receiver instead just show the transmit signal from source?\nLike the screenshot I got from youtube below.\n\nIt would be really help if I got the answer from anyone, since I am also doing my research now.\n\nWarm regards,\nRizka"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 28, 2024, 4:29:09AM",
        "content": "Yes - gprMax is a full wave simulator. If you watch the video you have taken a screenshot of you will see the reflected wave from the cylindrical target.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/z70MFOLskPY",
    "title": "Exporting Freecad Objects to gprMax - Finite Difference Time Domain",
    "original_post": {
      "author": "Jean Paul White",
      "date": "Sep 3, 2021, 6:29:46PM",
      "content": "Hello community and gprMax developers\n\nI am currently working with FDTD for electromagnetism and antenna design and analysis application for GPR. I am currently using open source FreeCAD to build the 3D parametric basic antennas. I want to export the files ( .STEP, .IGES, .DXP, .DWG) from the CAD file, through a Python scripted library that I develop, and convert this file into a .IN file for doing the processing in gprMax for any kind geometry, regardless of the geometry file (because the antenna is visualized in the FreeCAD interface). \n\nI would like to know how can I convert these extention file's data using FDTD (python lib), in order to export the geometric parameters into gprMax successfully, or if the geometry have to be built \"manually\" using the object construction commands. What does gprMax needs in a .IN file for processing\n\nBest"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 23, 2021, 6:40:10AM",
        "content": "Dear Jean-Paul,\n\nWe have a feature coming in the future for STL file to FDTD voxels, but it is still in development - https://github.com/gprMax/gprMax/pull/295\n\nIn the mean time you might want to look at the #geometry_objects_read command (http://docs.gprmax.com/en/latest/input.html#geometry-objects-read) which allows you to import geometry directly from a suitably made HDF5 file. This may fit your workflow.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "James Whittaker",
        "date": "Oct 28, 2021, 11:31:34AM",
        "content": "Hi Craig,\n\nIs this feature available for users to test now? I understand that it's WIP so bugs are to be expected but I've got a complex model of a antenna arrangement to build up and using indivual commands within the IN files is going to be extremely challenging.\n\nThanks\nJames\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_Kb3WAFfdP8",
    "title": "Radiation Patterns",
    "original_post": {
      "author": "Felipe Quiroga",
      "date": "Nov 26, 2020, 8:34:53AM",
      "content": "Hello, \n\nI am currently developing a comparison between GPR simulation softwares, and I wanted to use traditional radiation patterns as a metric. Looking at gprMax docs, I noticed that Antenna patterns package does not calculate conventional field patterns, so I wanted to know if there is any available tool for calculating them? Reading Numerical Modelling of High-Frequency Ground-Penetrating Radar Antennas by Dr. Warren, I saw that these radiation patterns are estimated for several antennas using gprMax (chapter 9).\n\nThank you for your help,\nLuis Felipe"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 26, 2020, 9:33:21AM",
        "content": "Hi Luis,\n\nThis is interesting. What packages are you considering to examine? Traditional radiation patterns for UWB antennas used in pulse propagation are not very useful. The theory based on asymptotic expansion of the analytical solutions predict often deep nulls for specific frequencies that to an extent are replicated by numerical solutions. However, this does not help in practice as we do not work in individual frequencies and is to an extent misleading. Knowing what an antenna that emits pushes does on a single frequency and then generalise is not right. There is a very good paper - in addition of the work Craig has done - from Diamanti and Annan that shows a similar approach based on a radiation energy metric and not a per/frequency plot.\n\nIf you want single frequency patterns these are easy to compute but you need to do some scripting in python or MATLAB. The time domain received fields at a circle centred on the antenna can be easily Fourier Transformed to obtain individual frequencies and then use their amplitude to create patterns.\n\nHope this helps\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ePN-EXd-dzo",
    "title": "Visualization of geometry view",
    "original_post": {
      "author": "sravanip...@gmail.com",
      "date": "Oct 11, 2022, 4:07:20AM",
      "content": "Hi,\nIs their any software other than Para view  to visualize the geometry view of input?\n\n\nBR,\nSravani."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 10, 2022, 4:14:55AM",
        "content": "We use Paraview but any software that can render VTK files should work. However, you will have to figure out how to visualise the different materials, sources, PMLs etc... yourself.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pNIjUUXAqK8",
    "title": "B scan for transmission line receiver",
    "original_post": {
      "author": "xianyang gao",
      "date": "Oct 17, 2017, 6:56:37AM",
      "content": "Dear Craig,\n\nI cannot get B scan for the transmission line receiver. Only from Rx receiver.\nI check the code, there is no code for the transmission line.\n\nI have to use the transmission line receive because I can change the impedance of the receiver, while rx receiver cannot get expected results from bowtie antenna.\n\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2017, 5:07:08AM",
        "content": "Hi Xianyang,\n\nThe transmission line is not moved with the ‘#src_steps’ command, but you can easily move a transmission line with every A scan using a #python block in your input file. I suspect you need to do it this way in any case, as you’ll need to move your entire antenna structure with every A scan to create your B scan. You can see an example of this in the docs - http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Oct 27, 2017, 5:14:14AM",
        "content": "Dear Craig,\n\nI have looked at the code. It also uses rx receiver not transmission line. In the plot b scan code, there is no code for plotting outputs of transmission line.\n\nBest regards\nXianyang"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 27, 2017, 5:23:53AM",
        "content": "Hi Xianyang,\n\nCan you be a bit clearer about what it is you are trying to do? There are currently modules to merge multiple A-scans into a B-scan, assuming #rx commands are used. There is also a module for plotting the output from a #transmission_line (plot_antenna_params.py) when used as a feed model for the antenna. Are you using a #transmission_line on a receiver antenna? To get s21? Why do you need to use a #transmission_line for a B-scan?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Oct 27, 2017, 5:45:14AM",
        "content": "Dear Craig,\n\nYeah, for B scan (outputfiles_merge.py) can only merge rx receiver and (plot_Bscan.py) can only plot rx receivers. \nWhen using transmission line, (plot_antenna_params.py) can plot A scan parametres but not B scan results.\nSo there is not command to plot b scan for transmission line receiver.\n\nI want to use transmission line as a receiver to get B scan results so that I can control the impedance of the receiver to match the antenna impedance, while rx command cannot control the impedance.\n\nHope these are clear to explain.\n\nBest regards\nXianyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/thKVDxoWEBI",
    "title": "How to Convert .Out file to .dzt file?",
    "original_post": {
      "author": "Samuel Hailemariam",
      "date": "May 5, 2023, 6:34:05AM",
      "content": "Hello #gprmax_community\nI have a problem to converted merged #outputfile to #dzt\n\nI try to a matlab script(\noutputfile_converter.m)\nBut it response\nError in outputfile_converter (line 107)....\n\nSo is it step error or what else any step method to convert to .dzt.h"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 5, 2023, 6:46:50AM",
        "content": "From the error reported by MATLAB it looks like an issue with the MATLAB resample function. As a first debugging step, I'd try commenting that line in the outputfile_converter.m script and seeing if that helps.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "Samuel Hailemariam",
        "date": "May 17, 2023, 1:57:14PM",
        "content": "Thank you Dr. Craig Warren \n\nI attempt to view the commenting on the outputfile_converter.m script but am unable to correct it, so I choose to delay the line section from 105 to 124 in order to block the error code from running and move on to the next task. It is being worked to convert in this instance. However, eliminating that code line has a noticeable negative impact on the converted files. Out file to.dzt file.\n\n\nWith regards,\nSamuel.H\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Bt3q_zaG-J4",
    "title": "GPR return - What type of signal",
    "original_post": {
      "author": "alpergenc",
      "date": "Sep 8, 2017, 4:37:36AM",
      "content": "Hi all,\n\nI am using GPRmax software for a long time. Currently I am trying to estimate the equivalent impedance of a medium by comparing the original GPR signal and the reflected GPR signal coming from the medium. At this point, I should go a little deeper into the Electromagnetic theory. However, I have a confusion about the A-scan data. When we send the GPR signal onto a medium, we received an A-scan data like below:\n\n\n\nWhat is the type of this signal? I mean, is it voltage, or power? Can anybody help me?\n\nKind regards,\nAlper GENC"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 8, 2017, 5:23:31AM",
        "content": "Hi Alper,\n\nThe output from a #rx command in gprMax samples the electromagnetic field at that point. You can select to output specific field components, but by default you get all of them, i.e. Ex, Ey, Ez and Hx, Hy, and Hz. With GPR you are usually interested in the electric field, so an A-scan plot from gprMax of an electric field component will have units volts per metre (V/m). You can convert this to a voltage (if you like) by multiplying by the spatial discretisation in that direction.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 8, 2017, 5:26:10AM",
        "content": "Dear Alper,\n\nIndeed reading about electromagnetic theory will help but is very important to read and understand what the FDTD method does and how it works and obviously its limitations as well. The answer to your question is simple. FDTD (i.e. gprMax) would provide you information about the electromagnetic fields. Monitoring the output at any point will give the value of the Electric field components in V/m and Magnetic components in A/m. You can convert to other forms of information (e.g. Voltage) but this depends on what you do etc. The fundamental FDTD equations are developed for the electromagnetic fields. \n\nBest\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Sep 8, 2017, 6:38:38AM",
        "content": "Dear Antonis and Craig,\n\nThank you for your answers. They will really help. I am trying to estimate the reflectivity coefficient of the medium by using the original and reflected signals. If I will have further questions, I will ask you as well.\n\nKind regards,\nAlper"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2uq_kJDgzhc",
    "title": "A question about parameters of the #fractal box",
    "original_post": {
      "author": "Ruo nan",
      "date": "Sep 4, 2019, 11:55:09PM",
      "content": "Hi experts,\n\nI have no ideas of the meaning of three parameters in #fractal box. The default value of these three parameters is 1 in the example. \nIf I modify these parameters, what effect does it have on the generated fractal?\n\nRegards,\nRuo nan\n\nf8 is used to weight the fractal in the x direction.\nf9 is used to weight the fractal in the y direction.\nf10 is used to weight the fractal in the z direction."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 5, 2019, 3:25:36AM",
        "content": "Hi Ruo,\n\nSee the fractals.py module for the code, but essentially it is scaling the fractal function in the different dimensions. The effect of this is to make the volume more or less 'fractal' in the different directions, e.g. you could create more   of a layered fractal by adjusting these values. You'll see the results by changing them and viewing the geometry of your model.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1M3obyqUrJA",
    "title": "Permeability Value",
    "original_post": {
      "author": "HIT-flower",
      "date": "Apr 14, 2017, 8:34:20PM",
      "content": "Does anyone know why the material cannot have a permeability of 0? I have read some related thesis. The numbers are almost set to 1. \nHow about the range of the permeability value?\nThanks a lot."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 17, 2017, 10:49:47AM",
        "content": "Hi Yue,\n\nThe value of relative magnetic permeability can in theory be less than one (1) which means a value of magnetic permeability less than the one in vacuum. Some superconducting materials do have such properties. For most \"normal\" materials and even for most magnetic materials and for especially materials that are encountered in GPR modelling, relative magnetic permeability is not under one. The same broadly applies to relative permittivity as well. The reason gprMax does not allow values lower than 1 is to safeguard and ensure that the maximum speed of propagation in the models (that is used to determine the stability condition) is the speed of light. This is true for all materials even for the ones that have relative magnetic permeability less than one as they have relative electric permittivity more than one and the speed of propagation in such materials is not more than the speed of light.\n\nIt is not difficult to remove the safeguard in gprMax but if you do so you need to have a very good understanding of the underlying electromagnetic theory as well very clear and advanced understanding of FDTD modelling. If you are starting out you should be a bit careful with such modelling ideas.\n\nHope this is helpful \n\nAntonis"
      },
      {
        "author": "Yue Chueng",
        "date": "Apr 18, 2017, 10:36:14PM",
        "content": "Hi Antonis,\n\nThank you very very much! I have solved my problem.\n\nKind regards.\n\nYue"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xU1A1mP2TSk",
    "title": "Plot the fractal model using Matlab",
    "original_post": {
      "author": "jamaledin baniamerian",
      "date": "Feb 7, 2022, 7:55:37AM",
      "content": "Hello\nIs there anyway to import vti, e.g., resulting from fractal model, into Matlab in order to plot in this environment.\nThanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 8, 2022, 9:22:53AM",
        "content": "You could export the geometry to HDF5 and then import to MATLAB that way. See the docs - http://docs.gprmax.com/en/devel/input.html#geometry-objects-write\n\nCraig\n\n"
      },
      {
        "author": "jamaledin baniamerian",
        "date": "Feb 8, 2022, 9:47:16AM",
        "content": "Thanks a lot.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/uEYWBwH-ztU",
    "title": "ValueError: A value in x_new is above the interpolation range",
    "original_post": {
      "author": "Fabio da Silva",
      "date": "May 25, 2018, 2:33:52PM",
      "content": "Hello group,\n\nI recently got a Linux box with Ubuntu 16.04 installed with a Titan V gpu (details on the install available if needed). I ran some test simulations including some I was running with a K20c on a Windows 10 box. I have seen the following message during waveform loading:\n\nUser waveform pulse0 created using simulation time array and, if required, interpolation parameters (kind: linear, fill value: nan).\n\nAnd then, after all waveforms are loaded, I get the error:\n\nValueError: A value in x_new is above the interpolation range.\n\nThe entire chain goes below. Any hint as to why I am getting those errors on a Titan V/Linux versus a K20c/W10?\n\nCordially,\nFabio.\n\nTraceback (most recent call last):\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/gprMax.py\", line 70, in main\n    run_main(args)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/gprMax.py\", line 203, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/gprMax.py\", line 244, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/model_build_run.py\", line 154, in run_model\n    process_multicmds(multicmds, G)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/input_cmds_multiuse.py\", line 230, in process_multicmds\n    h.calculate_waveform_values(G)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/sources.py\", line 67, in calculate_waveform_values\n    self.waveformvaluesJ[iteration] = waveform.calculate_value(time + 0.5 * G.dt, G.dt)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.3-py3.6-linux-x86_64.egg/gprMax/waveforms.py\", line 118, in calculate_value\n    ampvalue = self.userfunc(time)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/scipy/interpolate/polyint.py\", line 79, in __call__\n    y = self._evaluate(x)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/scipy/interpolate/interpolate.py\", line 634, in _evaluate\n    below_bounds, above_bounds = self._check_bounds(x_new)\n  File \"/home/fcss/miniconda3/envs/gprMax/lib/python3.6/site-packages/scipy/interpolate/interpolate.py\", line 666, in _check_bounds\n    raise ValueError(\"A value in x_new is above the interpolation \"\nValueError: A value in x_new is above the interpolation range."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 29, 2018, 11:06:07AM",
        "content": "Hi Fabio,\n\nAs you can see the error is related to the interpolation of values in your user waveform. We use scipy interpolate to do the interpolation. The error suggests something in your pulse or time sampling is causing the interpolation to fail. Try using ‘extrapolate’ as the fill value to see if that helps.\n\nI would be interested in seeing some benchmarks from the TITAN V GPU as this is one we have not yet tested with.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Fabio da Silva",
        "date": "May 29, 2018, 4:18:00PM",
        "content": "Craig,\n\nyour suggestion worked. Sorry I missed that line in the API documentation.\n\nAlso, if you have a problem to benchmark the performance of gprMax, I'd be happy to run it for you and send you the report. From the K20c running on W10, I got a factor of 4.4 times speed up on the Titan V running on the Linux box. This may still not be apples to apples per se from other hardware factors I was not able to keep constant.\n\nCordially,\nFabio."
      },
      {
        "author": "Lun MA",
        "date": "Aug 7, 2018, 8:07:13AM",
        "content": "Hi Graig,\nI used Matlab to generate a waveform in this way\n\"A = [t;s2];\nfileID = fopen('my_waves.txt','w');\nfprintf(fileID,'%s %s\\r\\n','time','my_pulse1');\nfprintf(fileID,'%e %e\\r\\n',A);\nfclose(fileID);\"\nwhere t is time array and s2 is corresponding waveform.\n\nAfter I apply this txt file into the simulation, I got the same error as Fabio. So I followed your suggestion of modifying the API documentation in this way\n\n#excitation_file: my_waves.txt [linear extrapolate]\n\nBut I got the following error:\nExcitation file: my_waves.txt\nTraceback (most recent call last):\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.3-py3.6-win-amd64.egg\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.3-py3.6-win-amd64.egg\\gprMax\\gprMax.py\", line 70, in main\n    run_main(args)\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.3-py3.6-win-amd64.egg\\gprMax\\gprMax.py\", line 203, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.3-py3.6-win-amd64.egg\\gprMax\\gprMax.py\", line 244, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.3-py3.6-win-amd64.egg\\gprMax\\model_build_run.py\", line 150, in run_model\n    process_singlecmds(singlecmds, G)\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.3-py3.6-win-amd64.egg\\gprMax\\input_cmds_singleuse.py\", line 318, in process_singlecmds\n    w.userfunc = interpolate.interp1d(waveformtime, singlewaveformvalues, **kwargs)\n  File \"C:\\Users\\lm256f\\AppData\\Local\\Continuum\\miniconda3\\envs\\gprMax\\lib\\site-packages\\scipy\\interpolate\\interpolate.py\", line 445, in __init__\n    \"routines for other types.\" % kind)\nNotImplementedError: [linear is unsupported: Use fitpack routines for other types.\n\nCos I didn't find any example in the user guide, so have no idea how it goes. BTW, I've tried other \"kind\", like ‘nearest’, ‘zero’, ‘slinear’, ‘quadratic’, ‘cubic’, ‘previous’, ‘next’\nPlease favor me with your instruction, Thank you."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 7, 2018, 10:05:09PM",
        "content": "Hi Lun,\n\nI think the problem is simply that you are using square brackets in the command and they are not necessary, i.e.\n\n#excitation_file: my_waves.txt linear extrapolate\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Lun MA",
        "date": "Aug 8, 2018, 9:02:33AM",
        "content": "Hi Craig,\n\nYour suggestion works. I misread the user guide. Thanks\n\nCheers,\n\nLun"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_SEvu6Q7lOc",
    "title": "No module named tools.plot_Bsacan Problem",
    "original_post": {
      "author": "emran daradkeh",
      "date": "Aug 25, 2023, 12:15:05PM",
      "content": "whats the solution for this problem ?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 25, 2023, 12:36:31PM",
        "content": "The solution is to check your spelling.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dYGUVO4cG54",
    "title": "Extra peak in A-scan result",
    "original_post": {
      "author": "Ahmed Mahbubah",
      "date": "Aug 29, 2024, 9:13:01AM",
      "content": "Hello,\nI have tried to simulate two horizontal soil layers having difference electro-magnetic properties. Source and receiver is placed 4 m apart and different layer is placed 5m below the ground surface (input file is attached). As per my understanding, from this simulation two peaks are to be generated (One coming directly from the source and another one from the reflection at layer difference). But, I have received three peaks. In the figure attached, 2nd and 3rd peak are related to the cases mentioned above as time gap matches. I have not found any reason for the first peak. Could you please help me in identifying any problem in my input file?\n\nThank you."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 29, 2024, 10:45:34AM",
        "content": "There are two things that can help you explain what you see.\n\n1. Your spatial step ay 0.015 is a little  bit larger than it should. The pulse contains energy at higher frequencies from the centre frequency and a safe number can be 2.5 to 3 times that value. This will give you around 500 to 600 MHz. This needs finer spatial step for a medium with a relative permittivity of 20. You can see the effects as the reflection coming later is obviously dispersed as the wavelet is getting to be more noisy. Numerical dispersion is a cumulative effect. Even for a finely discretised model if the propagation distance is large it will get worst. Your model is large and eventually this error will creep in. Try a model with 1cm step and see if this improves the shape of the wavelets. Also, you are modelling a GPR waveguide with a low velocity layer between two high velocity ones. The dispersion effect can also be because of that as you are at a large offset. To eliminate the ambiguity a finer model will help you define if the dispersion is normal because of the GPR waveguide or it is because of numerical issues or a combination of both (most likely) \n\n2. With the snapshots you can see the propagation of the waves and from that you can understand what is arriving at that time at your observation point. Hence you can understand how the \"extra\" wavelet is created. It is most likely a multiple but it does not arrive exactly at double the time as you have a large offset and they way these are  generated from  secondary reflections in a GPR waveguide is not as simple as a straightforward multiple from a point target. \n\nIf you make your model finer and run first a common or small offset  this will give you a base line of what a simpler setup of \"traditional\" GPR should look like. It should have some normal multiples which should be lower than the first reflection. As you open the offset you are looking into possible waveguide effects that complicate things a bit. There is a lot of work on GPR waveguides if you search about them.\n\nI hope this helps\n\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/a4gYDK2iXUs",
    "title": "Running problem",
    "original_post": {
      "author": "Noushin Khosravi Largani",
      "date": "Feb 23, 2024, 12:48:13PM",
      "content": "Hi\nI installed gprMax on school system, and it was finished. But, when I try one of the demo files in user_models, it shows this error:\nTraceback (most recent call last):                                                                                        File \"<frozen runpy>\", line 189, in _run_module_as_main                                                                 File \"<frozen runpy>\", line 148, in _get_module_details                                                                 File \"<frozen runpy>\", line 112, in _get_module_details                                                                 File \"C:\\Users\\nlargani\\gprMax\\gprMax\\__init__.py\", line 11, in <module>                                                  from .gprMax import api as run                                                                                        File \"C:\\Users\\nlargani\\gprMax\\gprMax\\gprMax.py\", line 39, in <module>                                                    from gprMax.model_build_run import run_model                                                                          File \"C:\\Users\\nlargani\\gprMax\\gprMax\\model_build_run.py\", line 44, in <module>                                           from gprMax.fields_updates_ext import update_electric                                                               ModuleNotFoundError: No module named 'gprMax.fields_updates_ext'\nI would appreciate it if you could guide me on solving this issue.\nSincerely\nNoushin"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CQRVhGl_hNY",
    "title": "About the polarisation of the source",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Apr 12, 2019, 9:37:28PM",
      "content": "Hi everyone !\n\n             I'm confused about the command  #hertzian_dipole:\n                          #hertzian_dipole: c1 f1 f2 f3 str1 [f4 f5]\n\n       c1 is the polarisation of the source and can be x, y, or z.  \n                     How do we choose the c1 parameter ? In which case should it be x , y, or z?\n\n Kind regards,\n      Dongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 17, 2019, 3:56:03AM",
        "content": "Hi Dongyang,\n\nThe polarisation of the source (in this case Hertzian dipole) depends on what you are trying to simulate, e.g. the polarisation of the real GPR antenna.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/TLOVcFozehw",
    "title": "A problem about reading '.out' file by matlab",
    "original_post": {
      "author": "HJJ HJJ",
      "date": "Nov 20, 2018, 7:09:33AM",
      "content": "Hi friends,\n\nI do not know why the '.out' file cannot be transformed into '.mat' file now by matlab software. It works well for the '.out' files generated several days ago, but it failed to treat the files generated today. Anything was updated? Thanks.\n\nerrors:\n    H5O_attr_open_by_name    can't locate attribute: 'dx_dy_dz'\n    H5A_open_by_name         unable to load attribute info from object header\n    H5Aopen_name             can't open attribute: 'dx_dy_dz'"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 20, 2018, 8:38:03AM",
        "content": "No recent changes. We changed the name of this attribute back in July, from 'dx,dy,dz' to 'dx_dy_dz'. So if you have an output file prior to that then that may cause the message you are seeing. If you need to read this file just change the code in MATLAB to accept the old name of the attribute.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Nov 20, 2018, 8:29:23PM",
        "content": "Both 'dx,dy,dz' and  'dx_dy_dz' cannot work now. Maybe something wrong with my program. I will check it. Thanks."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZK5yCsmNfB4",
    "title": "Scale EM amplitude in Paraview.",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Feb 13, 2019, 8:03:58AM",
      "content": "If we hope to observe the snapshots of the simulated EM propagation, we use Paraview to make an animation. However, I found that it is very important to rescale the color bar. I use the panel as below screenshot to adjust the color scale for animation of EM propagation. Sometimes, I can get a good movie, but sometimes the wave is not clearly shown. It is difficult to get such good color effects as the demo in gprMax website. Are there some tips and tricks?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FnVQSHEZcS8",
    "title": "help please",
    "original_post": {
      "author": "יהב חמיאס",
      "date": "May 2, 2023, 6:41:08AM",
      "content": "I tried to build a model of a concrete floor with 12-inch thick iron buried in it.\nThese are the results I received, I would love your help in correcting the errors.\n\nThank you Yahav."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 4, 2023, 12:21:07PM",
        "content": "Dear Yahav,\n\nUnfortunately, there are multiple issues with your models (including material definitions and source/receiver placement) that indicate you really haven't read our documentation or examples and guidance. I recommend you spend some more time studying our guidance and examples which will help you solve these issues.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/TQWo6oe9AFE",
    "title": "Not Being Able to Realize Free Space Model Using Hertzizn Dipole",
    "original_post": {
      "author": "Shuvodip Majumdar",
      "date": "Aug 11, 2019, 4:00:07AM",
      "content": "Hello,\n\nI am trying to realize free space propagation model using gprMax. My code is as follows:\n\n#title: free_space_0\n\n#domain: 2 0.01 2\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 10e-9\n\n#waveform: sine 1 1e9 my_sine\n#hertzian_dipole: y 0.5 0 0.5 my_sine\n#rx: 1.5 0 0.5\n\n#pml_cells: 15 0 15 15 0 15\n\nI am trying to realize the situation in 2D. The problem I am facing is the received electric field strength is too much. As per the formula for a Hertzizn dipole (e.g. \"Linear Wire Antenna\" chapter of Balanis' Antenna Theory book; Equation- 4-10b), the field strength 1 m away should be around 6.28 V/m, but it is coming as around 400 V/m from the simulation. Please tell me if I am doing anything wrong in the code or thinking in a wrong way. I have attached a copy of the response herewith.\n\nRegards,\nShuvodip Majumdar"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 12, 2019, 9:00:34AM",
        "content": "Hi Shuvodip,\n\nObvious things that are wrong are:\n\n1. You are using a 2D TMy model which uses a theoretical line source and you compare it with the response of an infinitesimal dipole in 3D space. Read the manual carefully and compare like with like. \n2. You are using a 'sine' waveform that is a single cycle of a sinusoid which has significantly higher spectrum content than a Gaussian or Gaussian derivative pulse. Your model resolution does not support this well and as you can see the response is numerical dispersed. Understand the limitations of the FDTD method.\n3. A single cycle of a sine is not what the formula in Balanis's book expects which is developed in the frequency domain and expects a continuous frequency mode. Need to understand how a time-domain solution can be compared with frequency domain concepts.\n\nHope this helps\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jlek9bDbnwM",
    "title": "Query regarding the discrepancy arrives in the first reflection time calculation from surface",
    "original_post": {
      "author": "Sumona Chatterjee",
      "date": "Aug 8, 2017, 1:49:52AM",
      "content": "Hi,\n\nI have tried to simulate the attached file where the point source and receiver were placed above 40 cm from the sand surface.The tx-rx position is just above the buried concrete sphere.According to theoretical values given in gprMax input file, the 1st reflection time from surface should be:\nt1=(40*2)/(3*10^10)=2.67 ns \nbut from simulation results,the reflection time from surface is coming as: 1ns-2ns (A-scan attached).\n\nI am not unable to understand why this discrepancy is coming.Please clarify.\n\nThanks,\nSumona"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 8, 2017, 6:07:38AM",
        "content": "Hi Sumona,\n\nThere are a few issues with your model which you should be aware of, but let me first try to explain what you are seeing in the A-scan.jpg plot. The predominant response (beginning at ~0.7ns) is the direct air wave travelling from the source to the receiver. This is not the wave reflected from the interface between air and dry sand. The direct air wave arrives at ~0.7ns because the source waveform (and you can plot the exact waveform you are using, see attached rocker.png) begins at ~0.5ns plus 0.2ns of travel time between source and receiver in air. If you zoom into your plot (see attached Ex_zoom.png) you will see the reflection from the interface between the air and dry sand. It begins at ~3.2ns which corresponds to the 2.67ns you calculated as travel time plus ~0.5ns from when the source waveform begins. So the plot is correct.\n\nThere are a couple of other issues you should be aware of:\nNumerical dispersion - you'll have seen a warning message (in red text) when you ran your model about numerical dispersion. I'm not going to explain it fully here (there are plenty of resources you can Google), but the spatial resolution you are using for your model is not small enough to adequately resolve the smallest wavelength in your model. The smallest wavelength occurs for the maximum frequency of interest (which is not the centre frequency of the waveform) in the material with the highest permittivity.\nReceiver distance from Herztain dipole source - your receiver is currently only 3 cells away from your source. The Hertzian dipole source is less valid when you are probing fields so close to it. I recommend moving the receiver at least 10 cells away from the source (resolving your issue with numerical dispersion should also increase this spacing).\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Aug 18, 2017, 2:47:46AM",
        "content": "Hi,\n\nI am trying to calculate the 1st reflection time from top of object from the A-scan of simulated input file attached.\nTheoretically,\ntime for reflection from water surface is t1= 15*2/(3*10^10)=1 ns\ntime for reflection from moist sand surface is t2 = t1+ (10*2)/((3*10^10)/sqrt(80.1))=6.967ns\ntime for reflection from top-mid point of object is t3 = t2+ (5*2)/((3*10^10)/sqrt(8.9))=7.961ns\n\nTo calculate the Time for reflection from top-mid point of object,I have subtracted the output file of full model without object(14th A-scan) from the output file of full model(14th A-scan). But in plot the discontinuity has been started from 7.7ns instead of 7.961ns.\n\nwhen I am doing the substraction, trasmitter to receiver direct wave should be discarded from resultant plot. So what else can be the cause of this discrepancy.please help.\n\nThe input files and zoomed resultant plot are attached.\nThanks in advance."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 5:17:18AM",
        "content": "Hi Sumona,\n\nBefore getting into the details, your model is still potentially suffering from numerical dispersion - see the warning message in red text when you run the model. You need to address this before proceeding further.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Aug 18, 2017, 5:34:49AM",
        "content": "Dear Sir,\n\nI am not getting any warning message with this input file attached before.\nScreenshot of command prompt is attached."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 5:39:40AM",
        "content": "Hi Sumona,\n\nWhat version of gprMax are you using? It looks like a beta version.\n\nAdjusting the spatial resolution of your model to avoid the affects of numerical dispersion was something that was left completely to the user. More recently (around Res 2016) when we first released version 3 of gprMax we introduced a function to help users by warning them when numerical dispersion was potentially an issue.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Aug 18, 2017, 5:46:49AM",
        "content": "I am using gprMax-master v3.0.5."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 5:49:02AM",
        "content": "Sumona,\n\nI'd advise you to look into understanding numerical dispersion, and also to update to the latest version of the code (currently v3.1.1), so that you can benefit from the warning messages.\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Aug 19, 2017, 10:54:53PM",
        "content": "Dear Sir,\n\nThanks for your advise. I have updated my software to the available latest version.Now i am getting the warning message. But after changing the spatial resolution value,My computer is not able to run the file(insufficient memory error comes).So , currently I am not able to check with that MLPS.in file attached in my previous query.\n\nI have corrected the previous file ps.in by updating spatial resolution = 0.006\nWave length inside Dry sand=(c/f*sqrt(highest permittivity of dry sand))=3*10^8/(1.99*10^9*sqrt(5))=0.0674 for maximum significant frequency= 1.99x10^9 Hz\n\nWith this process, I have updated the file MLPS.in with spatial resolution 0.0015 as\nWave length inside Water=(c/f*sqrt(highest permittivity of water))=3*10^8/(1.99842*10^9*sqrt(80.1))=0.0168 for maximum significant frequency= 1.99842x10^9 Hz\n\nI have checked with the first one but not with the second one.\n\nCan you please guide me whether my process and updated input files are ok or not. updated files are attached.\n\nI have another doubt that is: What is the phase velocity of EM wave inside dispersive material? Will it be v=c/srqt(material's relative permittivity at zero frequency ) or v=c/sqrt(material's relative permittivity at the frequency of source wave)\nfor example, my material is : #material: 3.4 0.00045 1 0 dry_sand \n                                              #add_dispersion_debye: 1 2.3 8e-9 dry_sand\nfrequency of source wave is 1Ghz.\nso what is the value of phase velocity inside dispersive dry sand? v=3*10^8/sqrt(3.4+2.3) OR v=3*10^8/sqrtdry sand's relative permittivity at 1Ghz ) \n\nThanks\nSumona"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 20, 2017, 5:54:54PM",
        "content": "Sumona,\n\nYes, the spatial discretisations you are now using for your 2 models are suitable to limit the effects of numerical dispersion.\n\nPart of the definition of a material that has dispersive properties is that its phase velocity is dependent on frequency. When making an estimation of the required spatial discretisation for a model to avoid numerical dispersion (please note that materials with dispersive properties and numerical dispersion are different things!) we use the largest permittivity value for the material which tends to be its static (DC) value.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Aug 22, 2017, 2:58:01AM",
        "content": "Sir,\n\nI am trying to find the 1st reflection time from object from the attached file.\n\nTheoretically,\nreflection time from sand surface is t1=(15*2)/(3*10^10)=1 ns\nreflection time from top of object is t2 =(15*2)*sqrt(3)/(3*10^10)=2.732 ns\n\nTo calculate the Time for reflection from top point of object,I have subtracted the output file of full model without object from the output file of full model. In resultant plot , discontinuity has been started almost around 2.73 ns(Amplitude value in x10^-5 V/m ) but before that value from 2.3 ns - 2.7 ns range, we get very small amplitude values(X10^-5 V/m order).\n\nwhen I am doing the subtraction, transmitter to receiver direct wave and surface reflection should be discarded from resultant plot. So what else can be the cause of this earlier discrepancy.please help.\n\nAlso, I have tried with dispersive dry sand .The maximum significant frequency inside dry sand is 1.99714 GHz. The dielectric constant of dispersive dry sand at this frequency is calculated as 3.40023 .So theoretically  reflection time from top of object should be t2 =(15*2)*sqrt(3.4003)/(3*10^10)=2.844 ns\n\nIn this case also, the simulation result shows that non zero amplitude values has been started before 2.844 ns\n\nThe input files and zoomed resultant plots are attached.\nThanks in advance.\n\nSumona"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7zlw3V9Z9HI",
    "title": "Error MPI when i start some simulations",
    "original_post": {
      "author": "Luis Eduardo Quibano Alarcon",
      "date": "Nov 28, 2018, 2:34:37PM",
      "content": "Hello GprMax Users!!! \n\nI'm trying to run a simulation with 2 GPU's via MPI  but  i get the following error message:\n\n\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method =================================================\n\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.4 (Big Smoke)\n\n\n Copyright (C) 2015-2018: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n\n gprMax is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free\n  Software Foundation, either version 3 of the License, or (at your option) any later version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with gprMax.  If not, see www.gnu.org/licenses.\n\n\nHost: wiridlab | Dell Inc. PowerEdge R740 | 2 x Intel(R) Xeon(R) Gold 5118 CPU @ 2.30GHz (24 cores, 48 cores with Hyper-Threading) | 157GiB RAM | Linux (4.4.0-139-generic, debian)\nGPU(s) detected: 0 - Tesla P100-PCIE-16GB, 15.9GiB\nMPI master (MPI_COMM_WORLD, rank 0) on wiridlab using 1 workers\n\n\nmpiexec: Error: unknown option \"-pmi_args\"\nType 'mpiexec --help' for usage.\n\n\nI installed mpi4py via pip   and i ran my model according to http://docs.gprmax.com/en/latest/gpu.html \n\npython -m gprMax user_models/myModel.in -n 500 -mpi 3 -gpu\n\nSo i don´t know what's wrong with my MPI, i'd really appreciate if somebody could tell me any solution.\n\nThank You!!!\nBest Regards!!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 29, 2018, 6:54:48AM",
        "content": "Hi Luis,\n\nA couple of things I notice:\n\n1. You request 3 MPI tasks which implies you have 2 GPUs to run on, yet only one P100 is detected by gprMax. Are you sure you have access to both GPUs? Do you request the GPUs directly on the machine or via a job scheduler? You might want to check if the environment variable 'CUDA_VISIBLE_DEVICES' is set on your machine, as it can limit what GPUs are accessible.\n2. The MPI error message is not something from gprMax, I suspect it is to do with your underlying MPI implementation. Is it OpenMPI that you are using?\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZLGOoSbOgQQ",
    "title": "Unable to view '.out' file in python and HDF viewer",
    "original_post": {
      "author": "Lavanya akila",
      "date": "Jan 25, 2019, 5:34:43AM",
      "content": "Hi friend,\n  I am learning gprmax. I did simulation with different input sources (eg. sine wave with different frequencies) and I got '.out' files. If I give below command it works well.\n  python -m tools.plot_Ascan my_files.out\n  It has 6 graphs. Now I want to save each graph into each '.csv' file. For that I tried it in three ways. But nothing is working for me.\n   Way 1:\n            1. I installed HDFView-3.0.0\n            2. Open 'my_files.out' via HDFview.\n            3. But it is not showing anything inside the file. You can find screenshot of this problem is attached with it.\n  Way 2:\n            1. Imported h5py package in python.\n            2. Read the '.out' file\n            3. Again I could not able to view inner things in it. You can find my python code below\n                          import h5py\n                        f1 = h5py.File(my_file.out','r+')   \n                        list(f1.keys())\n                        ['rxs', 'srcs']\n    Way 3:\n            1. Tried to plot each and every graph(Ex, Ey ,Ez, Hx, Hy ,Hz)\n            2.  And tried to get y axis values. You can find my code below\n                                      import os\n                        from gprMax.receivers import Rx\n                        from tools.plot_Ascan import mpl_plot\n                          filename = 'my_file.out'\n                          ez = ['Ez']\n                        graph1= mpl_plot(filename, ez, fft=False)\n                        values = graph1.get_ydata()\n              3. Got the following error\n                          AttributeError: module 'matplotlib.pyplot' has no attribute 'get_ydata'\n  Is there any way to view every graph as row wise in python? If anyone knows please share it. Thanks in advance!!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 25, 2019, 9:21:58AM",
        "content": "Hi Lavanya,\n\nWelcome to the forum!\n\nSee the docs for the structure of the output file - http://docs.gprmax.com/en/latest/output.html#file-structure You'll see that the field data is stored by field component under the appropriate receiver number.\n\nYou can view (and export) the data from HDFView by using the disclosure triangles to look down through the file structure.\n\nYou can also look at the plotting modules to see how to read the data using the h5py module. You can then export to CSV using a numpy function e.g. https://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Lavanya akila",
        "date": "Jan 28, 2019, 7:54:23AM",
        "content": "Hi Craig,\n\nThanks for the suggestions. Now I generated '.csv' with h5py module.  And I found the time_window information is missing on the '.out' file. If I got both x-axis and y-axis values it would be better.  If you any suggestions please share. Thanks a lot.\n\nKind regards,\nLavanya"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 29, 2019, 7:30:50AM",
        "content": "Hi Lavanya,\n\nThere are attributes 'Iterations' and 'dt' in the HDF5 that you can use to construct a time vector for plotting - http://docs.gprmax.com/en/latest/output.html#file-structure\n\nSee the 'plot_Ascan' module for an example of this.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/J5KEx6h7Ow4",
    "title": "error in adding surface water",
    "original_post": {
      "author": "Siqi Wang",
      "date": "Jan 14, 2018, 10:21:53PM",
      "content": "Hi guys,\n\nCurrently I'm building a 2-D pavement model to see the effect of surface water on GPR reflection signals. I want to put a water film with 0.002m thickness on top of the asphalt layer, which is also the cell size in the model. However, when running the model, the Command Prompt kept telling me \"gprMax.exceptions.CmdInputError: '#add_surface_water: 0 0.298 0 0.24 0.298 0.002 0.3 my_fractal_box' specified surface yplus does not have a rough surface applied\". Can you guys help me have a check why this happens?\n\nI attached my model in the following.\n\nThank you for your time!\n\nBest,\nSiqi"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 15, 2018, 4:37:12AM",
        "content": "Hi Siqi,\n\nLet me first check I understand what you are trying to do. You want to create a 2D model which uses a homogeneous material for asphalt with a rough surface? If your model uses a spatial discretisation of 2mm and you are not going to achieve a very refined rough surface with a +/- 2mm variation. Then you want to fill in the troughs in the rough surface with water? If so, there are two main problems with your input file:\n\nRemember that geometry in gprMax is constructed like on a painters canvas, i.e. layered, so the order in which the geometry commands are given is important. This is also true when making modifications to a fractal box, i.e. the modifications should come after the fractal box.\nThe minimum/maximum trough/peak heights you have specified when adding the surface roughness do not correspond to the fractal box you have specified, i.e. you are trying to apply a rough surface to the 'yplus' side of your box which has y-dimensions from 0.290m to 0.298m, but you have specified min/max trough/peak heights of 0.085m to 0.110m. This is incorrect and will not work.\nRemember to use a geometry view to check your geometry.\nThe following code snippet should go some way to help you resolve these problems:\n\n#fractal_box: 0 0.29 0 0.24 0.298 0.002 1 1 1 1 1 asphalt my_fractal_box\n#add_surface_roughness: 0 0.298 0 0.24 0.298 0.002 1 1 1 0.294 0.302 my_fractal_box\n#add_surface_water: 0 0.298 0 0.24 0.298 0.002 0.3 my_fractal_box\n#geometry_view: 0 0 0 0.240 1.0 0.002 0.002 0.002 0.002 surfacewater n\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Siqi Wang",
        "date": "Jan 25, 2018, 5:20:32PM",
        "content": "Sorry for the late reply and thank you so much for your time!\n\nA follow-up question: in the #add_surface_roughness command, the 0.294 and 0.302 is the size of the roughness, or let's say, the surface 'notch' size, correct? so if I change the size of roughness, do I directly change the water volume on the surface of my pavement model?\n\nBest,\nSiqi"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 26, 2018, 3:04:06AM",
        "content": "Hi Siqi,\n\nThe surface roughness command specifies the minimum depth for a trough and the maximum height for a peak. So by changing the minimum value (and assuming you keep height of the surface water the same) then the volume of water will increase.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Siqi Wang",
        "date": "Jan 30, 2018, 10:43:36PM",
        "content": "Thank you for the reply, Craig.\n\nAnother follow-up question: I tried to install Paraview with the gprMax_info script, but I couldn't make it. Here's the command I put into Command Prompt:\n\n(gprMax) C:\\Users\\charl\\gprMax\\tools\\Paraview macros>python gprMax_info.py\nTraceback (most recent call last):\n  File \"gprMax_info.py\", line 19, in <module>\n    from paraview.simple import *\nModuleNotFoundError: No module named 'paraview'\n\n(gprMax) C:\\Users\\charl\\gprMax\\tools\\Paraview macros>\n\nSo what command should I input to successfully install the gprMax_info into Paraview?\n\nThank you for your time.\nSiqi"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 31, 2018, 4:10:09AM",
        "content": "Please read the documentation, step 3 - http://docs.gprmax.com/en/latest/output.html#geometry-output.\n\nCraig"
      },
      {
        "author": "Siqi Wang",
        "date": "Feb 6, 2018, 12:07:24PM",
        "content": "Thanks for the reply, Craig.\n\nI tried to turn off the 'dielectric smoothing' when running the model. However, when I typed the following command in the model:\n\n#material: 8 0.01 1 0 wet n\n#material: 6 0 1 0 asphalt n\n#material: 4 0 1 0 soil n\n\nand running the model, the Command Prompt comes up with an error:\n\ngprMax.exceptions.CmdInputError: '#material: 8 0.01 1 0 wet n' requires exactly five parameters\n\nWould you mind take a look and help me figure out what's going on here?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 6, 2018, 12:48:09PM",
        "content": "Dear Siqi,\n\nEveryone is rather busy so, before you post questions like these please do READ the manual CAREFULLY. There is NO 'n' parameter in the material description commands. There is one in the volumetric object building commands. It is all very simple if you carefully follow this:\n\nhttp://docs.gprmax.com/en/latest/input.html#material-commands\n\nThere has been a lot of effort that has put in to create a detailed user manual. Please do use it and check at it carefully if there are any problems with your model first, before you email someone else to solve it for you. \n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/J1o0SymqrU8",
    "title": "Finding the actual position of the object",
    "original_post": {
      "author": "Rajath",
      "date": "Apr 30, 2016, 9:40:52AM",
      "content": "Greetings,\n\nThis is my B-Scan code, the attached image is the B-Scan plot\n\nHave taken 80 scans\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 6.00 2.00 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 7.2e-9\n#pml_cells: 10 10 0 10 10 0\n\n#material: 6 0 1 0 half_space\n\n#waveform: sine 1 1.5e9 my_sine\n#hertzian_dipole: z 2.3 1.80 0 my_sine\n#rx: 2.35 1.80 0\n\n#src_steps: 0.023 0 0\n#rx_steps: 0.023 0 0\n\n#box: 0 0 0 6.00 1.750 0.002 half_space\n#box: 3.00 1.55 0 3.20 1.65 0.002 pec\n\nI was able to locate the peak of the hyperbola at ( 35, 2.40111e-09 ) \n\nI am unable to map this value with the actual location of the object in metres.\nFor example, ( 35, 2.40111e-09 )  location should approximately correspond to ( 3.1 m, 1.6 m).\n\nBut how do we do this mathematically?\n\n\nThank you\nRajath"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 2, 2016, 8:01:47AM",
        "content": "Hi Rajath,\n\nThis is not a very difficult task. The centre of your response - which is not really a simple hyperbola as your target is a box -  is about, as you say, at  trace no 35.\nYour mid-point of your first Tx-Rx is about 2.325 m and your step used to move the source and receiver is set to 0.023 m. Now gprMax can only move things in multiples of cell size so, 0.023 divided by the spatial step will give how many cells the source and receiver will move. This is 11.5 but it will be rounded to 11. So, the distance to the centre of your response in the model's coordinates is\n\n2.325+(11*0.002*35) = 3.095\n\nwhich is pretty close to the actual 3.1 that is the midpoint of the box. Actually, depending how you position the source and receiver in terms of cell multiples and their distance been a proper cell multiple you can get the accuracy of this to be even better.\n\nNow, for the depth you need to estimate the velocity (you have the permittivity) so this is easy in a model, and pick the correct time of reference. The simulation clock starts when your waveform starts from zero. However, picking this instance for a response is often not easy without examining the trace very carefully. Further, it is almost impossible to do this with real data. So, a time zero is adjusted and picked from what has been received (maybe the first negative trough or first positive peak) and then you can make adjustments and pick the proper part of your received response.\n\n\nSo, assuming your time zero is about at 0.5 nanoseconds (middle peak of your sine-like response) and similarly the target response is about 2.4 nanoseconds and calculating your velocity by v=3e8/sqrt(6.0)=1.2247e8 (m/s) you get depth:\n\nD=v*(2.4e-9 - 0.5e-9)*0.5 = 0.1164 m\n\nthis is pretty OK for a quick and  rough calculation as your PEC object is only 0.1 m under the surface. If you take into account the proper Tx-Rx distances etc. this will improve as well. You need to do this as your target is close to the surface. Picking a good time zero is important in GPR and the modelling can help understand this.\n\nFinally, there is no simple mathematical way to do this automatically with real data. Although the ideas are simple real data do contain clutter and noise that makes this process more tricky and depending a lot on the expertise of the person that interprets the data. If such simple formula was available we will have been very rich now ;-)\n\nHope this helps!\n\nRegards\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/uo_cEXBOxOo",
    "title": "#geometry_objects_read: HDF5 FILE FORMAT FOR PASSING NUMPY ARRAYS AS INPUT",
    "original_post": {
      "author": "Ahmed Nirjhar Alam",
      "date": "Aug 22, 2023, 6:36:26PM",
      "content": "Hello,\n\nI am using the following commands to pass a numpy array as geometry input.\n\nCREATING HDF5 FILE ('array' is a 2D np array of np.int16 type):\nimport h5py\nimport numpy as np\nwith h5py.File(paper_directory + \"test_pass4.hdf5\", \"w\") as f:\n    f.create_dataset(\"data\", data = array.astype(np.int16))\n    f.attrs['dx_dy_dz'] = tuple((0.002, 0.002, 0.002))\n\nINPUT FILE:\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.2 0.2 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-9\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#geometry_objects_read: 0 0 0 /storage/work/aqa6199/GPRMax/gprMax/passing_arrays/test_pass.hdf5 /storage/work/aqa6199/GPRMax/gprMax/passing_arrays/materials.txt\n\nI am receiving the following error:\nTraceback (most recent call last):\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/input_cmds_geometry.py\", line 133, in p\nrocess_geometrycmds\n    rigidE = f['/rigidE'][:]\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/h5py/_hl/group.py\", line 288, in __getitem__\n    oid = h5o.open(self.id, self._e(name), lapl=self._lapl)\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"h5py/h5o.pyx\", line 190, in h5py.h5o.open\nKeyError: \"Unable to open object (object 'rigidE' doesn't exist)\"\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/gprMax.py\", line 69, in main\n    run_main(args)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/gprMax.py\", line 232, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/model_build_run.py\", line 187, in run_m\nodel\n    process_geometrycmds(geometry, G)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/input_cmds_geometry.py\", line 144, in p\nrocess_geometrycmds\n    build_voxels_from_array(xs, ys, zs, numexistmaterials, averaging, data, G.solid, G.rigidE, G.rigidH, G.ID)\n  File \"gprMax/geometry_primitives_ext.pyx\", line 940, in gprMax.geometry_primitives_ext.build_voxels_from_array\nValueError: Buffer has wrong number of dimensions (expected 3, got 2)\n\n\nAs far as I understand, I am using the same hdf5 file formatting as described here in the documentation: https://docs.gprmax.com/en/latest/input.html#geometry-objects-read.  Is there any additional information I am missing/misunderstanding?\n\n    Thanks\nNirjhar Alam"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 23, 2023, 8:17:22AM",
        "content": "Dear Nirjhar,\n\nI would start by updating to the latest version of gprMax which is currently 3.1.6.\n\nCraig\n\n"
      },
      {
        "author": "Ahmed Nirjhar Alam",
        "date": "Aug 23, 2023, 4:31:25PM",
        "content": "Hello Dr. Craig, \n\nThank you for your response. I have tried it today with 3.1.6 and received the same error (please see below). \n\n   Regards\nNirjhar Alam\n\npython -m gprMax geometry.txt -n 5\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method =================================================================================================================\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.6 (Big Smoke)\n Copyright (C) 2015-2023: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n gprMax is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your\n  option) any later version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n  License for more details.\n You should have received a copy of the GNU General Public License along with gprMax.  If not, see www.gnu.org/licenses.\nHost: submit-007.acib.production.int.aci.ics.psu.edu | VMware, Inc. VMware Virtual Platform | 2 x Intel(R) Xeon(R) CPU E5-2680 v3 @ 2.50GHz (8 cores) | 31.3GiB RAM | Linux-3.10.0-1160.95.1.el7.x86_64-x86_64-wit\nh-glibc2.17\n--- Model 1/5, input file: geometry.txt -------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nConstants/variables used/available for Python scripting: {c: 299792458.0, current_model_run: 1, e0: 8.8541878128e-12, inputfile: /storage/work/a/aqa6199/updated_gprMax/gprMax/passing_arrays/geometry.txt, m0: 1.\n25663706212e-06, number_model_runs: 5, z0: 376.73031366686166}\nModel title: B-scan from a metal cylinder buried in a dielectric half-space\nNumber of CPU (OpenMP) threads: 1\nSpatial discretisation: 0.002 x 0.002 x 0.002m\nDomain size: 0.2 x 0.2 x 0.002m (100 x 100 x 1 = 10000 cells)\nMode: 2D TMz\nTime step (at CFL limit): 4.71731e-12 secs\nTime window: 1e-08 secs (2121 iterations)\nSimple sources will step 0.002m, 0m, 0m for each model run.\nAll receivers will step 0.002m, 0m, 0m for each model run.\nWaveform my_ricker of type ricker with maximum amplitude scaling 1, frequency 1.5e+09Hz created.\nHertzian dipole with polarity z at 0.04m, 0.17m, 0m, using waveform my_ricker created.\nReceiver at 0.08m, 0.17m, 0m with output component(s) Ex, Ey, Ez, Hx, Hy, Hz created.\nMemory (RAM) required: ~51.2MB\nMaterial pec{materials} with eps_r=1, sigma=inf S/m; mu_r=1, sigma*=0 Ohm/m created.                                                                                                                             \nMaterial free_space{materials} with eps_r=1, sigma=0 S/m; mu_r=1, sigma*=0 Ohm/m created.                                                                                                                        \nMaterial testconc{materials} with eps_r=6, sigma=0 S/m; mu_r=1, sigma*=50 Ohm/m created.                                                                                                                         \nMaterial testmetal{materials} with eps_r=1, sigma=10.1 S/m; mu_r=1, sigma*=0 Ohm/m created.                                                                                                                      \nMaterial testconc+testconc+free_space+free_space{materials} with eps_r=3.5, sigma=0 S/m; mu_r=1, sigma*=25 Ohm/m created.                                                                                        \nMaterial testmetal+testmetal+testconc+testconc{materials} with eps_r=3.5, sigma=5.05 S/m; mu_r=1, sigma*=25 Ohm/m created.                                                                                       \nProcessing geometry related cmds:   0%|                                                                                                                                                  | 0/1 [00:00<?, ?cmds/s]\nTraceback (most recent call last):\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.6-py3.11-linux-x86_64.egg/gprMax/input_cmds_geometry.py\", line 133, in process_geometrycmds\n    rigidE = f['/rigidE'][:]\n             ~^^^^^^^^^^^\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/h5py/_hl/group.py\", line 357, in __getitem__\n    oid = h5o.open(self.id, self._e(name), lapl=self._lapl)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"h5py/h5o.pyx\", line 190, in h5py.h5o.open\nKeyError: \"Unable to open object (object 'rigidE' doesn't exist)\"\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.6-py3.11-linux-x86_64.egg/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.6-py3.11-linux-x86_64.egg/gprMax/gprMax.py\", line 69, in main\n    run_main(args)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.6-py3.11-linux-x86_64.egg/gprMax/gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.6-py3.11-linux-x86_64.egg/gprMax/gprMax.py\", line 232, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.6-py3.11-linux-x86_64.egg/gprMax/model_build_run.py\", line 187, in run_model\n    process_geometrycmds(geometry, G)\n  File \"/storage/home/aqa6199/.conda/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.6-py3.11-linux-x86_64.egg/gprMax/input_cmds_geometry.py\", line 144, in process_geometrycmds\n    build_voxels_from_array(xs, ys, zs, numexistmaterials, averaging, data, G.solid, G.rigidE, G.rigidH, G.ID)\n  File \"gprMax/geometry_primitives_ext.pyx\", line 940, in gprMax.geometry_primitives_ext.build_voxels_from_array\nValueError: Buffer has wrong number of dimensions (expected 3, got 2)\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 24, 2023, 4:46:39AM",
        "content": "I suspect the 'data' array you are creating does not have 3 dimensions. A 2D model in gprMax is like a single cell slice of a 3D model, where the slice is one cell thick, so your data array needs to have a single cell in the third dimension, e.g. 100x100x1\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/r1mLgpE3rdw",
    "title": "Query on Bowtie antenna modelling",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "May 8, 2021, 2:33:58AM",
      "content": "Dear all,\n              I have been working on GPR antenna modelling. Currently I am working on bistatic two layered media (air-PEC) with bowtie antennas. One bowtie antenna contains 2 triangles, so totally 4 triangles have considered. Each bowtie antenna need one transmission line feeding, so two transmission line feedings have considered. The IN file is simulating succesfully, but the OUT file showing errors as follows:\n1. While attempting to plot A-scan result, it is giving that no receiver found.\n2. While attempting antenna parameters result, it is giving that tools.plot_Ascan_antenna_params module is not found. But actually, i can find the module in gprMax installation folder in my computer.\n\nI couldn't fix the problem. Can anyone help. I am attaching corresponding IN file here. Please let me know any errors in code. \nHow to configure transmitting antenna and receiving antenna by using triangle function? \nHow to configurre transmission lines for transmitter and receiver antennas?\n\nPlease help.\n\nThank you.\n\nRegards\nRohit\n\nBistatic Two Layered Media with Bowtie Antenna\n#title: Bistatic two layered media with bow tie antennas\n\n#domain: 1 0.3 0.5\n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 10e-9\n\n#waveform: gaussian 1 2e9 my_gaussian\n\n#triangle: 0.35 0.25 0.4505 0.325 0.25 0.50 0.375 0.25 0.50 0 pec\n#triangle: 0.35 0.25 0.4495 0.325 0.25 0.40 0.375 0.25 0.40 0 pec\n#triangle: 0.65 0.25 0.4505 0.625 0.25 0.50 0.675 0.25 0.50 0 pec\n#triangle: 0.65 0.25 0.4495 0.625 0.25 0.40 0.675 0.25 0.40 0 pec\n\n#transmission_line: x 0.35 0.25 0.45 73 my_gaussian\n#transmission_line: x 0.65 0.25 0.45 73 my_gaussian\n\n#plate: 0.1 0.1 0.1 0.9 0.27 0.1 pec"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "May 8, 2021, 6:14:17AM",
        "content": "Dear Rohit,\n\nIt seems that you have twor Transmitters installed.\n\nif you'll consider to look into  ~\\gprMax\\user_libs\\antennas\\GSSI.py you'll get some ideas how to pick up bow-tie antenna's\n\nYou neet to define at least one rx. \n\nI don't know if the 'receiver'triangles are connected to each other. Bit if they do, place the rx as wollow:\n#transmission_line: x 0.35 0.25 0.45 73 my_gaussian\n#rx: 0.65 0.25 0.45\n\nnow ithe rx works as your receiver and will pick up the singnal.\n\nregards, Micha\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 6:28:23AM",
        "content": "Dear Rohit,\n\nIf you want to use transmission lines for both transmitter and receiver bowties, you have to specify a receiver waveform with zero amplitude (the other parameters do not matter) to use with the transmission line on your receiving bowtie, e.g.\n\n#waveform: gaussian 1 2e9 my_src\n#waveform: gaussian 0 2e9 my_rx\n#transmission_line: x 0.35 0.25 0.45 73 my_src\n#transmission_line: x 0.65 0.25 0.45 73 my_rx\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HNHhodeJxZs",
    "title": "export A scan array",
    "original_post": {
      "author": "shereen ebrahim",
      "date": "Mar 5, 2023, 5:00:47AM",
      "content": "dear all\nhow can export A scan array such as Ez as file.h5 format"
    },
    "responses": [
      {
        "author": "shereen ebrahim",
        "date": "Mar 5, 2023, 5:09:37AM",
        "content": "or export as ascii files this is the best for me\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BF2sz0ImT8Q",
    "title": "Place a oblique plate model",
    "original_post": {
      "author": "城阳",
      "date": "Mar 13, 2024, 5:05:00AM",
      "content": "Hello,\nI want to place the #plate in a direction that is at an angle to the xoz plane, rather than along the x axis. How do I enter model data in the .in file?\nThank you so much"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jsuJPqOqASE",
    "title": "about the can't locate the attribute: 'dx _dy_ dz' error on AustinWoman work",
    "original_post": {
      "author": "Furkan ŞIK",
      "date": "Nov 27, 2018, 12:22:20PM",
      "content": "First of all ,I would like to thank Craig Warren to guide me to this forum. I want to study on AustinWoman model by using GSSI 1.5 GHz antenna. I wrote code for this purpose. The gprMax show this error: 'can't locate the attribute: 'dx _dy_ dz'  In fact, I didn't see what is the reason of the error. I used GSSI 1.5 GHz antenna, I studied with this antenna before many times and also I run this antenna seperately and code run with no problem. I think, code for Austin part has an error, however I don't understand the reason. Code is given below for this purpose:\n\n#geometry_objects_read: 0.16 0.04 0.1 ../user_libs/AustinManWoman/AustinWoman_v2_4-2x2x2.h5 ../user_libs/AustinManWoman/AustinManWoman_materials_dispersive.txt\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.51 , 1.3 , 0.1 + current_model_run * 0.03, 0.002)\n#end_python:\n\n#rx: 0.49 1.3 0.1\n#rx_steps: 0.0 0.00 0.03\n\n#domain: 1.0 1.4 1.8\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 12e-9\n#title: Model of a Sphere in free-space\n#messages: y\n#num_threads: 24\n\nThanks a lot\nRegards;\nFurkan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 27, 2018, 12:28:32PM",
        "content": "Hi Furkan,\n\nAre you trying to plot output from your simulation when you see this error?\n\nI suspect your model was run prior to a change in the code from attribute name 'dx,dy,dz' to 'dx_dy_dz'. See https://github.com/gprMax/gprMax/commit/a1512086bc2a4eaaa363f54bfdb784c37689f7a9#diff-0c31f357656dc5640678b6a63583dee9\n\nSo either re-run your model (which may not be feasible if it was a large computation), or change the attribute name in the output file, or change the plotting script to look for 'dx,dy,dz'.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 3, 2018, 6:31:51AM",
        "content": "Hi Furkan,\n\nI think the AustinMan models will not have been updated to use the 'dx_dy_dz' attribute. So I'd recommend you edit the HDF5 file and change the name of the attribute. You can do this with the HDF5 software - https://www.hdfgroup.org/downloads/hdfview/\n\nAlternatively if you are really struggling I can edit the reading to code to handle either attribute name. However, it may take me a few days to find some time to do this.\n\nWe will work with the authors of the AustinMan models to update the attribute in their files, but this will likely take some time.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/isxsu5PZs-Y",
    "title": "How to modify the B_scan picture",
    "original_post": {
      "author": "小辰",
      "date": "Oct 20, 2017, 3:42:25AM",
      "content": "I use the gprMax to draw the B_scan picture, But the axis is not what I want. For example, the X axis is trace number, how can I modify it to distance. And the picture is still the same. Besides, how can I change color of the picture. Then I can put it in the article."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2017, 4:52:55AM",
        "content": "You can modify the module ‘plot_Bscan.py’ in the tools sub-package. Look at lines 86-97. You can adjust the axes, colours, etc... read the maplotlib docs if you are unsure how to do this.\n\nPlease remember to cite our paper if you are publishing research that has used gprMax - http://www.gprmax.com/publications.shtml\n\nKind regards,\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OX-09QiwAas",
    "title": "maximum modelsize write-geometry",
    "original_post": {
      "author": "Michael Fehér",
      "date": "Mar 16, 2021, 11:26:27AM",
      "content": "Hello everybody,\n\nI want to write a very big geometry-file to crop it afterwards to fit into the GPU-memory.\n\nmy modell should have a site of x y z 2.6 1.2 0.5 m at 0.001x0.001x0.001 cellsize.\n\nthe command python -m gprMax user_models\\BD390-GSSI\\BD390-GSSI_g.in --geometry-only runs about 3 hous and needs 110 Gb RAM.  but it runs.\n\n\nbut as python wants to save the vti, the task ends up with the message:\n\nWriting geometry view file 1/1, BD390-GSSI.vti:   0%|                                   | 0.00/9.36G [00:00<?, ?byte/s]Traceback (most recent call last):\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 197, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"e:\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 68, in main\n    run_main(args)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 190, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 231, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"e:\\gprMax\\gprMax\\model_build_run.py\", line 334, in run_model   geometryview.write_vtk(G, pbar)\n  File \"e:\\gprMax\\gprMax\\geometry_outputs.py\", line 180, in write_vtk\n    f.write(pack('I', solid_geometry.nbytes))\nstruct.error: argument out of range\nWriting geometry view file 1/1, BD390-GSSI.vti:   0%|                                   | 0.00/9.36G [03:57<?, ?byte/s]\n\nargument out of range seems to me as a too big number somewhere.\nbut where are the limits of this operation?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 17, 2021, 10:07:07AM",
        "content": "Hi Michael,\n\nI think the limitation here maybe the VTK (.vti) format specification. What is happening is that gprMax has to write the size of an array (solid_geometry) as a unsigned integer ('I') which is required by the VTK file format specification. However, because your solid_geometry array is 2600x1200x500 = 1,560,000,000 which is 6,240,000,000 bytes this exceeds the range of values that can be represented by an unsigned integer (0 – 4,294,967,295). So I don't think there is much we can do to change this. What I'd suggest is that you take a smaller geometry view, or take a geometry view with larger spatial step.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/H5F3Gt4FXLc",
    "title": "Phase change at the middle of a mine",
    "original_post": {
      "author": "alpergenc",
      "date": "Mar 10, 2017, 4:00:04AM",
      "content": "Hi everybody,\n\nI have simulated a landmine buried in dry sand. My input code is below:\n\n#domain: 1.000 0.250 0.450\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 5e-9\n\n#material: 3.5 0.01 1.0 0 bakelite\n#material: 6.0 0.01 1.0 0 rubber\n#material: 3.0 0.00001 2.0 0.01 dry_sand\n#material: 2.86 0.00048 1.0 9.75 TNT\n\n#waveform: ricker 1 1.5e9 my_ricker\n\n#hertzian_dipole: x 0.100 0.110 0.360 my_ricker\n#rx: 0.100 0.140 0.360\n\n#src_steps: 0.006 0 0\n#rx_steps: 0.006 0 0\n\n#box: 0 0 0 1.000 0.250 0.200 dry_sand\n#cylinder: 0.500 0.125 0.150 0.500 0.125 0.147 0.056 rubber\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.094 0.056 bakelite\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.053 TNT\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.002 pec\n\nHowever, when I have investigated the resultant raw data, I have realized that there is a phase change at the middle of the mine as shown at the attachment. (mine.jpg) \n\nDo you have any idea about the reason of this phase change?\n\nKind regards,\nAlper GENC"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 10, 2017, 5:16:04AM",
        "content": "Hi Alper,\n\nIt looks like you are not scanning in a standard broadside configuration. Your dipole is oriented in the x-direction and your scan is on the x-direction as well. You can get phase changes like this from a number of settings. For example, for a long y-directed target you get such a response if you excite with a parallel electric field (y-directed) and receive the vertical magnetic component over a scan in the x-direction. Are you plotting an x-directed component or the cross-polarised one (y)?\n\nThe bottom line is that it has to do with the polarisation with regard to the target and scan direction and possibly the type of field you are plotting. To get a \"normal\" hyperbola for your test I will suggest changing your polarisation of the source and receiver to 'y' as your scan direction is set to be over  'x'\n\nHope that makes sense!\n\nBest\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Mar 10, 2017, 5:48:24AM",
        "content": "Hi Antonis,\n\nThank you for your answer. You are right, my dipole is oriented in the x-direction and my scan direction is set to 'x' also. I will change my polarization of the source and receiver to 'y' and try again.\n\nThanks again,\n\nKind regards,\nAlper GENC"
      },
      {
        "author": "전부환",
        "date": "May 17, 2023, 9:14:55AM",
        "content": "Hi. I would like to ask some questions about the form and input file you asked in the gprmax dialog.\nThe input file you wrote was really helpful. I want to create it like the Bscan image you uploaded, but it's not working.\n\nHow many times do you do it in this code and what process do you go through\nthe code and results that you used in the order that you got it\nCan I get it?\n\npython -m gprmax \"filename\" -n \"number\" \ni want to know \"number\" etc\n\nI would appreciate it if you could reply. Thank you.\n\n----your input file-------\n#domain: 1.000 0.250 0.450\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 5e-9\n\n#material: 3.5 0.01 1.0 0 bakelite\n#material: 6.0 0.01 1.0 0 rubber\n#material: 3.0 0.00001 2.0 0.01 dry_sand\n#material: 2.86 0.00048 1.0 9.75 TNT\n\n#waveform: ricker 1 1.5e9 my_ricker\n\n#hertzian_dipole: x 0.100 0.110 0.360 my_ricker\n#rx: 0.100 0.140 0.360\n\n#src_steps: 0.006 0 0\n#rx_steps: 0.006 0 0\n\n#box: 0 0 0 1.000 0.250 0.200 dry_sand\n#cylinder: 0.500 0.125 0.150 0.500 0.125 0.147 0.056 rubber\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.094 0.056 bakelite\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.053 TNT\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.002 pec\n\n\n2017년 3월 10일 금요일 오후 7시 48분 24초 UTC+9에 alpergenc님이 작성:\n"
      },
      {
        "author": "Shikhar Sharma",
        "date": "Jun 19, 2023, 7:43:49AM",
        "content": "Hi everybody ,\n\n\nI am a data scientists , I converted above mine simulation code into my_model.in file  for visualization as given below  \n\n#python:\nfrom gprMax.input_cmd_funcs import *\n\ncommand('title', 'Simulation with a sphere object')\n\n# Define simulation parameters\nz_dim = 0.002\nresolution = 0.002\ntsim = 5e-9\nB_scan = False\n\n# Set up the domain and grid resolution\ndomain = domain(x=1.000, y=0.250, z=0.450)\ndx = dx_dy_dz(resolution, resolution, z_dim)\n\n# Set the simulation time window\ntime_window(tsim)\n\n# Define the half-space material\nmaterial(permittivity=3.5, conductivity=0.01, permeability=1.0, magconductivity=0, name='bakelite')\nmaterial(permittivity=6.0, conductivity=0.01, permeability=1.0, magconductivity=0, name='rubber')\nmaterial(permittivity=3.0, conductivity=0.00001, permeability=2.0, magconductivity=0.01, name='dry_sand')\nmaterial(permittivity=2.86, conductivity=0.00048, permeability=1.0, magconductivity=9.75, name='TNT')\n\n# Define the waveform\nidentifier = waveform('ricker', amplitude=1, frequency=1.5e9, identifier='my_ricker')\n\n\nif B_scan:\n    x_ant = 8e-2\nelse:\n    x_ant = domain.x/2 - 1e-3 # in the middle of the x-axis\n\ntx = hertzian_dipole('x',\n                     0.100, 0.110, 0.360 , # minus 4 cm in y-direction\n                     identifier)\n\nrx(0.100, 0.140, 0.360)     # 2 cm away in x-direction from tx\n\n\nif B_scan:\n    src_steps(dx=0.006)\n    rx_steps(dx=0.006)\n\nb0, b1 = box(0, 0, 0,\n             1.000, 0.250, 0.200, # same as domain, minus 4 cm in y-direction\n             'dry_sand')\n\n\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.002 pec\n\ncylinder(0.500, 0.125, 0.150,\n         0.500, 0.125, 0.147,\n         0.056, material='rubber')\ncylinder(0.500, 0.125, 0.147,\n         0.500, 0.125, 0.094,\n         0.056, material='bakelite')\ncylinder(0.500, 0.125, 0.147,\n         0.500, 0.125, 0.097,\n         0.053, material='TNT')\ncylinder(0.500, 0.125, 0.147,\n         0.500, 0.125, 0.097,\n         0.002, material='pec')\n\n# Define outputs, geometry view, and snapshots\ngeometry_view(0, 0, 0, domain.x, domain.y, z_dim, dx.x, dx.y, dx.z, 'my_mine', 'n')\n\nN = 32\nfor i in range(1, N+1):\n    snapshot(0, 0, 0, domain.x, domain.y, z_dim, dx.x, dx.y, dx.z, i*(tsim/N), 'snapshot' + str(i))\n\n#end_python:\n\n\nAnd i generated .VTI file using commands python -m gprMax --geometry-only user_models/my_model.in\n\nI am trying  to visualize it using paraview software  so that i can see mine like the given two https://docs.gprmax.com/en/latest/user_libs_landmines.html\n\n\n\n\nPlease help me to visualize Landmine . How actually it looks ? Thanks In advance\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qD-q4MYNSW8",
    "title": "B-scan result interpretation",
    "original_post": {
      "author": "NITHIN MATHEW",
      "date": "Sep 1, 2020, 9:58:22PM",
      "content": "Hi,\n\nI've run a model as per the input file attached . The 2D geometry of the model is also attached. Could someone tell me how to the interpret the B-scan scan result, that was obtained on running the model for 63 iterations? What is the reason for this shape instead of a normal hyperbola when we run the same model without the cavity?\nThank you in advance.\nKind regards,\nNithin Mathew"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 2, 2020, 9:17:16AM",
        "content": "Dear Nithin,\n\nThe fractal box command will generate a different random fractal every time it is called. Therefore when you are simulating several A-scans to build a B-scan you want the same (random) fractal for each A-scan. You need to seed the random number generator to ensure this. See the docs parameter i2 - http://docs.gprmax.com/en/latest/input.html#fractal-box\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Sep 2, 2020, 9:47:37AM",
        "content": "Hello Nithin,\n\nThe response looks like a bow-tie and it is probably caused by the shape of the cavity. Check the attached figure.\n\nAlso, check i2 parameter as Dr. Warren suggests.\n\n\n\nKind regards,\n\nDimitris"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iL65W9hjkPo",
    "title": "Potential PML issue?",
    "original_post": {
      "author": "Amin",
      "date": "Jul 5, 2021, 12:12:36PM",
      "content": "Hello fellow gprMax users,\n\nI have been trying to model a simple 3D volume by collecting one trace at a time over my volume. I have simulated 3D radar data first with X polarization and then with Y polarization. my radar is in the air and the cylinder pips are at the air-ground boundary. unfortunately, I am seeing undesirable artifacts parallel to the sides of my area. I have attached 2 horizontal slices of my volume at different times. It clearly can be seen that the area affected by artifacts is increasing as time progresses. At extreme end of my scanned area, my transmitter and receiver are 10-15 cells away from the PML region. I can't think of anything but PML causing it. Have you seen such artifacts before? or do you have any idea what is causing them and why?\n\ntext for the bottom left trace (first trace in the volume):\n\n#title: C-scan from two metal cylinder with different orientation on a dielectric half-space surface\n#domain: 1 0.6 0.5\n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 8.0e-9\n\n#material: 6 0 1 0 half_space\n#waveform: ricker 1 1.5e9 my_ricker\n\n\n#hertzian_dipole: x 0.1 0.08 0.4 my_ricker\n#rx: 0.1 0.12 0.4\n\n#box: 0 0 0 1 0.6 0.2 half_space\n\n#cylinder: 0.25 0.3 0.21 0.35 0.3 0.21 0.012 pec\n#cylinder: 0.665 0.265 0.21 0.735 0.335 0.21 0.012 pec\n\n\n#geometry_view: 0 0 0 1 0.6 0.5 0.004 0.004 0.004 ThreeCylinder3D n\n\n\n\nI greatly appreciate any insight.\n\nCheers,"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 5, 2021, 1:55:22PM",
        "content": "Hi \n\nWhat do you describe as PML artefacts? Is it what you see when you plot the fields inside the PML regions (corners and faces)? Or is it something else as it does not make much sense.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "Amin",
        "date": "Jul 5, 2021, 4:38:33PM",
        "content": "Thank you for your timely response.\nWhat I see inside the PML region makes sense. According to the manual, PML is roughly 10-15 times the respected increment (4-6 cm from the left boundary). However, in my images, the pattern inside the PML continues well beyond the PML region. for example at 1.25 ns I can see them 25 cm or ~63 increment from the left boundary. \n\nCheers,\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 5, 2021, 7:17:10PM",
        "content": "The best way to see what happens is to do field plots only from the range of normal data without including the PML regions. Creating appropriate snapshots will allow you to create a movie of the EM fields propagating and scattering and this will make it easier to realy see if and what level of reflections are coming from the PML. Seeing the fields propagating makes more sense than these plots. The PML is not perfect and the formulation we use has the potential to offer customised absorption using more advanced formulations (e.g. CFS-PML). The easiest way to simply and quickly increase the performance is to double the size of the PML and see if you observe different patterns. What you see inside the PML does not always need to be very different from what you see at that moment in time  close to its boundary. \n\nIf you have a simple model that you know what you expect or can place the boundaries rather further away then you can test how well or not the specific PML works for your problem. \n\nThere is no issue with the PML formulation as it has been tested many times and actually PMLs are the kind of things that when they are not implemented correctly you know about it rather quickly. Performance however is a different thing and it is problem depended.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "Amin",
        "date": "Jul 6, 2021, 8:00:01AM",
        "content": "Thank you for your complete explanation and suggestions. I will double the boundaries and test the results with field plots.\n\nCheers,\n\nAmin\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/TmVgMfezN-I",
    "title": "Hi",
    "original_post": {
      "author": "savita K.B",
      "date": "Jul 8, 2021, 11:18:28AM",
      "content": "Hi ,\n\nAnyone please help me to define the plastic object. What command i should use?Here is the file which i created for plastic (PVC) object. But i am not getting the output.Please help me. Thak you in advance.\n\n#title: B-scan from a PVC cylinder 20mm buried in a dielectric half-space with permittivity of 8\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n#material: 3 0 1 0 sand_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.110 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 sand_space\n#cylinder: 0.075 0.154 0 0.075 0.154 0.002 0.010 pvc\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_sand_space n"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Jul 9, 2021, 8:40:22AM",
        "content": "dear you,\n\nyou have to define your 'pvc'\n#material: 8 0 1 0 pvc\n\nsincerly, Micha\n"
      },
      {
        "author": "savita K.B",
        "date": "Jul 9, 2021, 1:28:05PM",
        "content": "Actually according to the literature the PVC Pipe relative permittivity is 4.0 .Is it wright or wrong. Please suggest me the correct value.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yLVB8jzAmho",
    "title": "run error",
    "original_post": {
      "author": "ahmed saad",
      "date": "Oct 27, 2017, 7:22:26PM",
      "content": "the package was working until I tried to install the new version\nI deleted everything more than 10 time and still can not run the sample A-scan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 30, 2017, 11:01:39AM",
        "content": "Hi Ahmed,\n\nThis is an issue that came up on Friday, only for Mac OS users I believe. There is a report here https://github.com/gprMax/gprMax/issues/134. It should now be fixed, so if you pull the latest code from the master branch, and clean/build (http://docs.gprmax.com/en/latest/include_readme.html#updating-gprmax) it should be resolved.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/I3whVDb6_3A",
    "title": "Dispersion is not being applied effectively to the model",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Jun 22, 2020, 5:53:40PM",
      "content": "Greetings to all,\n\nI am trying to apply the dispersion through the Debye model to a geological environment that consists of rocks such as limestone, sand, clay and other rocks. However, as you can see in the attached file, analyzing a trace with and without dispersion, we don't see the amplitude spectrum decrease or advance to lower frequencies.\n\nCould someone guide me to fix this problem?\n\nWould the multipolar Debye model be more suitable for this type of lithology?\n\nI thank you all for your time and effort,\n\nBest regards,\n\nBruno Barauna"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 23, 2020, 10:30:28AM",
        "content": "Dear Bruno,\n\nPlease attach your input file so we can see what you are trying to do.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "Jun 23, 2020, 12:57:40PM",
        "content": "Thanks for your attention, Craig.\n\nThe input file is attached.\n\nKind regards,\n\nBruno Barauna"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2020, 10:55:03AM",
        "content": "Hi Bruno,\n\nFrom a quick look, nothing seems obviously wrong with your input file. I suspect you see little change as the dispersion you have specified is not that significant, and may not be applied to a particularly large part of the model.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sW_wgRFofyA",
    "title": "paraview plugin issue",
    "original_post": {
      "author": "Ishtar 23-20",
      "date": "Mar 25, 2024, 8:22:26PM",
      "content": "Hello,\n\nI am having an issue with loading the Paraview plugin. Please see attached picture. \n\nI am also having an issue with running a .py input file. (Please see other attached picture) I wrote a cylinder_Ascan.py script that matches the basic cylinder_Ascan.in example. I can get it to run fine on the version of gprMax that I installed on my linux distro. \n\nI am trying to figure out how to get the paraview plugin to work and am not interested in running gprMax on my windowsOS, but thought that maybe the two issues might be related. I have paraview v.5.8.1, minconda3, python3. \n\nMy environment variable Path is set to miniconda and I believe I have the gprMax conda environment active. I am quite green at python and programming, so apologies if I am confusing.\n\nThank you very much for your help.\n-MK"
    },
    "responses": [
      {
        "author": "Colin Stark",
        "date": "Mar 26, 2024, 12:42:53AM",
        "content": "Just a gprMax user here, but I think I can help.\n\nIt appears you have a conda environment set up for the release version (probably v 3.1.7) of gprMax, which doesn't have Domain in its API, while you're trying to run the demo in the style of the dev version (v 4 beta). \n\nYou can check which version you're running by starting Python, doing \"import gprMax\" and then doing \"gprMax.__version\".\n\nThe current release version of gprMax uses the cmd line syntax \"python -m gprMax user_models/cylinder_Ascan_2D.in\" to run this demo.\n"
      },
      {
        "author": "Colin Stark",
        "date": "Mar 26, 2024, 3:06:44AM",
        "content": "Typo: that should be gprMax.__version__\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/StYgzTjLdPY",
    "title": "Plotting the pulse signal excited from antenna",
    "original_post": {
      "author": "giganggu",
      "date": "Apr 18, 2017, 2:01:48AM",
      "content": "Hello everyone,\n\nI want to know the pulse signal excited from the antenna after\nwe define the surrent source waveform.\nFor example: consider that I define the waveform of\ncurrent source to be normalized Gaussian pulse\nthen how to plot the signal excited from antenna?\n\nAlso, can I define the pulse signal excited from antenna\nto be same with I intend to, such as to be exact normalized \nGaussian pulse?\n\nThanks,\ngiganggu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 18, 2017, 4:42:50AM",
        "content": "Hi giganggu,\n\nWelcome to the forum!\n\nAre you representing your antenna as a theoretical source, i.e. a Hertzian dipole? or are you including the structure of the antenna in the model?\n\nTypically a voltage source excited with a Gaussian waveform would be used, in a simulation that included an antenna model, to excite the antenna. If you are modelling the antenna as a theoretical source, i.e. a Hertzian dipole, then you would normally excite the Hertzian dipole with a waveform shaped as the first derivative of a Gaussian.\n\nYou can plot any of the builtin waveforms - http://docs.gprmax.com/en/latest/plotting.html#built-in-waveforms\n\nYou can place a receiver to examine the output from an antenna - http://docs.gprmax.com/en/latest/input.html#rx\n\nKind regards,\n\nCraig"
      },
      {
        "author": "giganggu",
        "date": "Apr 18, 2017, 5:25:29AM",
        "content": "Hi Craig,\n\nYes I am using the theoretical source, Hertzian dipole.\nThank you for the clear answer. \nI will try to use the voltage_source \ninstead of Hertzian dipole.\n\nThanks\ngiganggu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NJT7nZR4R50",
    "title": "Use of Convertpng2h5.py Script and Geometry read command",
    "original_post": {
      "author": "Shikhar Sharma",
      "date": "Jun 29, 2023, 9:21:32AM",
      "content": "Hi everyone ,\n\nI used gprMax scripts  to introduce geometry of screw/nail using geometry read command as mention below code and i created .h5 file using convertpng2h5 script.\n\nThe mynail.png is converted into mynail_singlecolour.png  and i used script further to get .h5 file .\n\nThe frontview.png and sideview.png is what i got in paraview and i want it to give 3d shape please help \n\nBelow is the code i used and please have a look to the attached images \n\n#title: Simulation with a nail object\n#domain: 1 0.25 0.45\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 5e-09\n\n#waveform: ricker 1 1500000000.0 my_ricker\n#hertzian_dipole: x 0.1 0.11 0.36 my_ricker\n#rx: 0.1 0.14 0.36\n#geometry_objects_read: 0.010 0.010 0.010 mynail_singlecolour.h5 mynail_singlecolour.txt\n#geometry_view: 0 0 0 1 0.25 0.45 0.002 0.002 0.002 nail n \n\nThanks \nShikhar"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 29, 2023, 9:28:13AM",
        "content": "Hi Shikhar,\n\nYou can't really do this using the 'convertpng2h5.py' script as this is intended for 2D geometries that can be stretched to 3D in one plane. If you have a STL file of the nail then you might considering installing the 'devel' branch of gprMax from GitHub and testing the STLtoVoxel toolbox. Info on the toolbox is here - https://docs.gprmax.com/en/devel/inc_STLtoVoxel.html We can't provide extensive help with the 'devel' branch since it is still in testing, so you will have to figure things out for yourself if you decide to try it.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "Shikhar Sharma",
        "date": "Jul 3, 2023, 9:32:39AM",
        "content": "Hi Dr. Craig,\n\nThanks for the quick reply , I got familiar with gprmax-devel branch.  \n\nThere is a challenge of giving multiple material properties to 1 STL file . For example 3D object having plastic as well as metal, how to give multiple material properties in material txt. although if i give how it will map with the stl file different parts .\n\nThanks and Regards\nShikhar Sharma \n"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2023, 7:27:21AM",
        "content": "I *think* you would need to create a separate STL file for each different material/part. \n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bC9qnA7eCko",
    "title": "Why is the signal intensity so weak?",
    "original_post": {
      "author": "Wz",
      "date": "Dec 25, 2017, 2:40:43AM",
      "content": "Why is the signal intensity so weak? I changed the relative permittivity and the conductivity. But it didn't help a lot. Can someone tell me the why."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 2, 2018, 5:34:49AM",
        "content": "What were you expecting? If you post your input file, that may help us help you.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ri8mZNGx3P4",
    "title": "Adding new emperical model or replacing with the current one in gprMax",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Mar 30, 2025, 11:25:50PM",
      "content": "Dear All, \n\nI hope this message reaches you in good health. On my team's behalf, I want to pose a question and value your insights. Is it feasible to substitute or develop a new empirical model on the gprMax platform? \n\nFor example, my advisor is interested in knowing if we can replace the Pepelinski model with the Mironov model. Could you share how complex and time-consuming this process might be, assuming it is doable?\n\n\n Here is the link to the Mironov model Link"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JHTa03GN0Co",
    "title": "Moisture sensor simulation and zero RX",
    "original_post": {
      "author": "jan brezina",
      "date": "May 11, 2024, 8:33:43AM",
      "content": "Hello,\n\nfirst, thanks for the great open tool. I have two questions, the first one is conceptual, the second rather technical.\n\nWe are trying to simulate a VNA measurement of a moisture sensor composed of two parallel cylindrical \"sleeves\" of the same diameter, coaxial, shifted in Z direction. The diameter is about 22mm, the gap between them is about 30mm. The height of one sleeve is 10mm. The input/output VNA port is connected to a coaxial cable while on its other end, the core is soldered to one and the shielding to the other sleeve. With this setup, we observe some significant resonance frequency of about 100MHz dependent on the moisture accompanied with moisture dependent phase. Attached. \n\nWe want to simulate this measurement in gprMax. See geometry.png, sleeves - blue, air/water/soil in read, white is an access tube. Following the dipole antenna example, we placed a transmission line at the top edge of the bottom sleeve. That seems to follow S11 configuration of the measurement, but we observe no impact of the surrounding material (water eps_r ~ 80 vs. air~1) on the plots provided by plot_antenna_params.py\n\nMy intuition is that our device does not fit to the 3m wavelength for 100MHz so there is nearly no radiation. But I'm lost in what simulated quantity corresponds to the VNA measurement. What do you suggest? \n\nI tried S21 as well, but there is another issue...\nUsing snapshots and paraview I was able to compare Ez component for water and air in points out of the TL source, in particular on the other sleeve. rx_from_snapshots.png displays Ez evolution.  However, placing RX at the same location (coordinates in paraview set according to gprMax output reporting RX coords) all components are constant zero in the output HDF5.  Therefore S21 is zero as well.\nWhat could be wrong with RX output?\n\nI also attach the input file for reference.\n\nThank you in advance for any suggestions or help.\nSadly, I know too little about EM in general.\n\nJan Březina\nTechnical University of Liberec"
    },
    "responses": [
      {
        "author": "jan brezina",
        "date": "Jun 12, 2024, 4:41:56PM",
        "content": "Hi everyone,\n\njust a simple question about the meaning of \"polarisation\" of the transmission line model. Prescription of the voltage on TL\nsuggests that it means polarisation of E. However reading the paper and the code, it seems that is rather the direction of the current and thus\nthe direction of the TL. Is this correct?\n\nThank you,\nJan\n"
      },
      {
        "author": "jan brezina",
        "date": "Jun 13, 2024, 4:43:47AM",
        "content": "... of course, the current is like J = eps * dE/dt, so the orientation of J and E is the same. Confusing is the transition from TEM in coax, where E is perpendicular to the \ncoax direction, and suddenly at the TL point, it should be in the direction of the coax. Also, the current in the coax is modeled in the direction of the coax.\n  \nSo I want to know\n1)  if 'polarisation' means the direction of the coaxial cable\n 2) if there are some assumptions about the relative orientation of the\ncoax direction and the connected conduit, or does the TL approximation hold for whatever orientation and shape of the conduit?\n\nThanks,\nJan\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/D3EIGtBwyC8",
    "title": "Understanding Waveforms, Peak time and Peak Frequency",
    "original_post": {
      "author": "L1A2Mike",
      "date": "Feb 18, 2021, 8:32:30AM",
      "content": "Hi everyone,\n\nI was wondering if some of you GPR and gprMax Experts could help me in understanding the formula(s) for how GPR max creates an impulse at what it deems the central (or peak frequency).\n\nA few things I have noted, the spectrum (or more correctly FFT) of the Ricker waveform pulse has its peak (highest magnitude component) at the designated central frequency, but the spectrum is not symmetric about this value, I understand that is due to the nature of the signal itself. \n\nHowever I was wondering what the relationship between the time domain waveform (particularly the time to peak value) and the peak (or central frequency) of the waveform's frequency domain representation is, any help would be greatly appreciated. I have attached the images, as well as the wonderful waveform jupyter notebook the developer's provided, with values changed for my desired waveform and f_c\n\n\n\nThanks a million in advance for your help and advice\n\nCheers,\n\nMike"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 18, 2021, 3:44:43PM",
        "content": "Hi Mike,\n\nYou can see definitions of the builtin waveforms in our docs which may help - http://docs.gprmax.com/en/latest/plotting.html#ricker\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "L1A2Mike",
        "date": "Feb 18, 2021, 5:27:31PM",
        "content": "Dr. Warren,\n\nAwesome, I see it right now, I thought I had seen a page in your documents that defined all the waveform parameters.\n\nThanks a million for the help and prompt response!\n\nCheers,\n\nMike\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/w7bnpNHJTYs",
    "title": "Potentially significant numerical dispersion warning",
    "original_post": {
      "author": "Jurijs Ješkins",
      "date": "Mar 9, 2017, 11:18:55AM",
      "content": "Hi!\n\nI am new to modelling in gprMax. While running some of my models I find this warning: \n\nWARNING: Potentially significant numerical dispersion. Estimated largest physical phase-velocity error is -9.24% in material 'concrete' whose wavelength sampled by 3 cells. Maximum significant frequency estimated as 7.1897e+08Hz\n\nMy model looks like this:\n\n#domain: 20.0 10.0 10.0\n#dx_dy_dz: 0.1 0.1 0.1\n#time_window: 50e-9\n\n\n#material: 4.5 0.01 1 0 concrete\n#material: 3 0.01 1 0 sand\n\n\n#waveform: ricker 1 0.3e9 my_ricker\n#hertzian_dipole: z 1.0 8.6 1.0 my_ricker\n#rx: 1.4 8.6 1.0\n#src_steps: 0.1 0 0\n#rx_steps: 0.1 0 0\n\n\n\n\n#box: 0 0 0 20.0 8.5 10.0 sand y\n#box: 0 8.0 0 10.0 8.2 10 concrete y\n#cylinder: 5.0 7.0 0 5.0 7.0 10.0 1.0 pec\n#cylinder: 11.0 7.0 0 11.0 7.0 10.0 1.0 pec\n\n\n#sphere: 15.0 4.0 5.0 1.0 pec\n\nYou can see, that I am using fairly big domain, since I want to model environment, that would be close to some civil engineering environment in natural scale. I am using small resolution, cause I don't have enough power in my computer (running Macbook Pro with i7 and 16Gb RAM). \n\nI have experimented with resolution, and I see, that while running model on higher resolutions, I get rid of this warning, but modelling takes huge amount of time! Maybe there is another way how to get rid of that warning? Something with antenna frequency?\n\nI think, that I am doing something wrong, that my task is very obvious and simple, but I am going the hard way. Maybe you can give me some recommendations? I want to get several GPR profiles of environment with some cylindrical objects in it. These will represent draining pipes. My task is to get 10-15 different direction profiles of such environment."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 9, 2017, 2:28:11PM",
        "content": "Hi Jurijs\n\nWe all started at some point from the beginning so, do not worry about asking questions.\n\nYour resolution is very coarse for the smallest wavelength that corresponds to the highest useful frequency in your model. This is not your central frequency (Fc) but pretty much it is 1.5*Fc. This is a limitation of the FDTD method and cannot be ignored as your solution will be wrong especially if the pulses propagate over great distances. \n\nI will recommend to start with simple 2D models especially if you are primarily concerned about long cylindrical targets. This will allow you to create some good patterns to start. If you need to do a full 3D model then you can consider making it smaller. You do not need to model too much of air above the ground or you might be able to trim the sides of your model. If this does not work you might start thinking if you can get access to a more powerful workstation to run your models. 3D FDTD modelling in a laptop is not really a good idea unless the models are small. \n\nIt is a good idea to read some introductory stuff on FDTD in order to understand a bit better the limitations of the method. gprMax is just an FDTD solver and will perform as best as allowed by the underlying numerical method.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4-A5VYmc4Fk",
    "title": "Erro in install process - new intel tigerlake arquiteture",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Jun 10, 2021, 10:59:25AM",
      "content": "Dear gprMax developers and users,\n\nI'm trying install gprMax in my new computer, but as soon as I enter with the following command line:\n\npython setup.py build\n\nhappens the following erro as is possible to see in the picture (attached).\n\nCould someone help me?\n\nBest Regards,\n\nBruno Barauna"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 10, 2021, 3:57:09PM",
        "content": "Looks like your installed version of gcc is not new enough to support the Intel Tiger Lake CPUs. A quick Google suggest gcc 10 or greater is required.\n\nCraig\n\n"
      },
      {
        "author": "Bruno Barauna",
        "date": "Jun 11, 2021, 2:58:27PM",
        "content": "I have already installed the newest version of gcc, but where do I need to change it within gprMax so that it can find the newest version? I tried the setup.py file with no success.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2021, 8:36:06AM",
        "content": "Shouldn't need to change anything with gprMax - I would imagine that on Linux whichever version 'gcc' points will be used. So worth checking that.\n\nCraig\n\n"
      },
      {
        "author": "Bruno Barauna",
        "date": "Jun 14, 2021, 11:22:21AM",
        "content": "Resolved\n\nStep 1\n\nSolved installing g++-10 and gcc-10 using:\n\nsudo apt install g++-10\nsudo apt install gcc-10\n\nStep 2\n\nGo to folder gprMax>Docs\n\nOpen the makefile file, so add the followings variables and save the file:\n\nCC=gcc-10 \nCPP=g++-10 \nCXX=g++-10 \nLD=g++-10\n\nYou will be able to continue installing gprMax.\n\nBruno\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 15, 2021, 4:19:55AM",
        "content": "Bruno,\n\nStep 2 is only fixing your issue by coincidence. The Makefile in gprMax/docs is purely for building the documentation, it has nothing to do with building gprMax itself. So you'd be better setting those environment variable to point to gcc-10 in your terminal before running 'python setup.py build' and 'python setup.py install'.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/v4yW1V6SvoE",
    "title": "field strength",
    "original_post": {
      "author": "城阳",
      "date": "Apr 1, 2024, 4:19:21PM",
      "content": "Hello，\nI am studying the field strength of the reflected wave from the PEC plate. The propagation direction is along the y-axis. However, I found that by changing the z-axis thickness of the space, the field strength of the reflected wave will change (Ez, Hx). What is the reason?\nz = 0.01m\n\nz = 0.03m\n\nAnother question is how to calculate the field strength of the electromagnetic wave corresponding to the amplitude of the waveform?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:24:33AM",
        "content": "I would expect the amplitude of the reflected wave to change since your source and receiver are at different distances in the z-direction (5mm and 15mm) from the PEC box in the two cases you have tested.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/D49SyBfaYCk",
    "title": "How to make the picture more clear？",
    "original_post": {
      "author": "Elizabeth",
      "date": "Apr 25, 2017, 6:35:39AM",
      "content": "Hi gprMax master,\n\nFollowing the User Guide, I can build my own model and get  A/B-scan plot. \nThere is only one question. As you can see in the picture, it's not clear enough! I can hardly find the target area.\n\nHow can I improve the contrast? \n\nLooking forward your reply.\nElizabeth"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2017, 10:21:41AM",
        "content": "The reflection from the target is weak because the target is not a strong reflector - likely there is not much difference in permittivity between the background material and target material. This is the physics of what you are modelling. You can always change the scaling of the plot.\n\nCraig"
      },
      {
        "author": "Elizabeth",
        "date": "Apr 25, 2017, 10:57:15AM",
        "content": "Hi Craig,\n\nYou said that I can change the scaling of the plot. But how? I can't find any information from the User Guide. Can you give me some specific advice?\n\nBest regard。\nElizabeth"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2017, 11:01:26AM",
        "content": "You just have to dig into the Python module for B-scan plotting (plot_Bscan.py in the tools sub-package). We provide Python and MATLAB modules/scripts to help people get started with plotting their data, but you need to know some Python or MATLAB to customise them to do what you want for your specific situation.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Elizabeth",
        "date": "Apr 25, 2017, 11:30:41AM",
        "content": "Thank you very much! \nI think I should concentrate more on how to write Python scripts and learn to use MATLAB.\n\nKind regard.\nElizabeth"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rD99O2ybFSQ",
    "title": "Number of A scans required to completely represent a B scan?",
    "original_post": {
      "author": "Amit Sarkar",
      "date": "Jul 12, 2017, 7:26:25AM",
      "content": "how to find the correct amount of A scans required, to perfectly plot a B scan?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 13, 2017, 10:01:29AM",
        "content": "Amit,\n\nYou have already asked this question in another thread - http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FcaCGiejdeTw%2Ff6gynn1GBgAJ\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vUqeexl372s",
    "title": "ValueError: bins must be monotonically increasing or decreasing",
    "original_post": {
      "author": "Facundo Varela",
      "date": "Jun 24, 2020, 7:19:46PM",
      "content": "Hi,\n\nI'm having difficulties completing the run of a B-scan. It stops after a few iterations (the iteration number varies) and gives me the following message:\n\nFractal box my_fractal_box from 0m, 0m, 0m, to 1m, 0.94m, 0.002m with my_soil, fractal dimension 1.5, fractal weightings 1, 1, 1, fractal seeding None, with 25 material(s) created, dielectric smoothing is off.\nProcessing geometry related cmds:   0%|                                                        | 0/3 [00:00<?, ?cmds/s]\nTraceback (most recent call last):\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 194, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\Bob Varela\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\Bob Varela\\gprMax\\gprMax\\gprMax.py\", line 66, in main\n    run_main(args)\n  File \"C:\\Users\\Bob Varela\\gprMax\\gprMax\\gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\Bob Varela\\gprMax\\gprMax\\gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\Bob Varela\\gprMax\\gprMax\\model_build_run.py\", line 187, in run_model\n    process_geometrycmds(geometry, G)\n  File \"C:\\Users\\Bob Varela\\gprMax\\gprMax\\input_cmds_geometry.py\", line 1228, in process_geometrycmds\n    bladesindex = np.unravel_index(np.digitize(A, probability1D), (surface.fractalsurface.shape[0], surface.fractalsurface.shape[1]))\n  File \"<__array_function__ internals>\", line 5, in digitize\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprmax\\lib\\site-packages\\numpy\\lib\\function_base.py\", line 4807, in digitize\n    raise ValueError(\"bins must be monotonically increasing or decreasing\")\nValueError: bins must be monotonically increasing or decreasing\n\nmodel input file attached.\n\ncould you please help me to identify where is my mistake? Thanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 25, 2020, 3:38:17PM",
        "content": "Hi Facundo,\n\nI have checked your input file on both Windows 10 and macOS machines and do not see any error. What machine and operating system are you using? Can you provide a list of your conda environment packages, i.e. with 'conda list'\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Facundo Varela",
        "date": "Jul 2, 2020, 11:54:55PM",
        "content": "Hi Craig,\nThanks for your response. The machine is running Win10\n\nthis is what I get after runnin \"conda list\"\n# packages in environment at C:\\ProgramData\\Miniconda3:\n#\n# Name                    Version                   Build  Channel\nca-certificates           2020.1.1                      0\ncertifi                   2020.6.20                py37_0\ncffi                      1.14.0           py37h7a1dbc1_0\nchardet                   3.0.4                 py37_1003\nconda                     4.8.3                    py37_0\nconda-package-handling    1.6.1            py37h62dcd97_0\nconsole_shortcut          0.1.1                         4\ncryptography              2.9.2            py37h7a1dbc1_0\ngit                       2.23.0               h6bb4b03_0\nidna                      2.9                        py_1\nmenuinst                  1.4.16           py37he774522_0\nopenssl                   1.1.1g               he774522_0\npip                       20.0.2                   py37_3\npowershell_shortcut       0.0.1                         3\npycosat                   0.6.3            py37he774522_0\npycparser                 2.20                       py_0\npyopenssl                 19.1.0                   py37_0\npysocks                   1.7.1                    py37_0\npython                    3.7.7                h81c818b_4\npywin32                   227              py37he774522_1\nrequests                  2.23.0                   py37_0\nruamel_yaml               0.15.87          py37he774522_0\nsetuptools                46.4.0                   py37_0\nsix                       1.14.0                   py37_0\nsqlite                    3.31.1               h2a8f88b_1\ntqdm                      4.46.0                     py_0\nurllib3                   1.25.8                   py37_0\nvc                        14.1                 h0510ff6_4\nvs2015_runtime            14.16.27012          hf0eaf9b_1\nwheel                     0.34.2                   py37_0\nwin_inet_pton             1.1.0                    py37_0\nwincertstore              0.2                      py37_0\nyaml                      0.1.7                hc54c509_2\nzlib                      1.2.11               h62dcd97_4\n\nRegards, Bob"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2020, 11:14:37AM",
        "content": "Hi Bob,\n\nI don't think this listing is with your gprMax environment activated. Please activate then run the conda list again. If it is with your gprMax environment activated then the environment is not setup correctly and you probably want to follow our installation instructions again.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Facundo Varela",
        "date": "Jul 9, 2020, 11:34:31PM",
        "content": "Hi Craig,\n\nsorry for that mistake. here is the list with gprmax activated.\n\n# packages in environment at C:\\ProgramData\\Miniconda3\\envs\\gprmax:\n#\n# Name                    Version                   Build  Channel\nattrs                     19.3.0                     py_0\nbackcall                  0.2.0                      py_0\nblas                      1.0                         mkl\nbleach                    3.1.5                      py_0\nca-certificates           2020.1.1                      0\ncertifi                   2020.6.20                py38_0\ncolorama                  0.4.3                      py_0\ncycler                    0.10.0                   py38_0\ncython                    0.29.20          py38ha925a31_0\ndecorator                 4.4.2                      py_0\ndefusedxml                0.7.0rc1                 pypi_0    pypi\nentrypoints               0.3                      py38_0\nfreetype                  2.10.2               hd328e21_0\ngprmax                    3.1.5                    pypi_0    pypi\nh5py                      2.10.0           py38h5e291fa_0\nhdf5                      1.10.4               h7ebc959_0\nicc_rt                    2019.0.0             h0cc432a_1\nicu                       58.2                 ha925a31_3\nimportlib-metadata        1.6.1                    py38_0\nimportlib_metadata        1.6.1                         0\nintel-openmp              2020.1                      216\nipykernel                 5.3.0            py38h5ca1d4c_0\nipython                   7.15.0                   py38_0\nipython_genutils          0.2.0                    py38_0\nipywidgets                7.5.1                      py_0\njedi                      0.17.1                   py38_0\njinja2                    2.11.2                     py_0\njpeg                      9b                   hb83a4c4_2\njsonschema                3.2.0                    py38_0\njupyter                   1.0.0                    py38_7\njupyter_client            6.1.3                      py_0\njupyter_console           6.1.0                      py_0\njupyter_core              4.6.3                    py38_0\nkiwisolver                1.2.0            py38h74a9793_0\nlibpng                    1.6.37               h2a8f88b_0\nlibsodium                 1.0.16               h9d3ae62_0\nm2w64-gcc-libgfortran     5.3.0                         6\nm2w64-gcc-libs            5.3.0                         7\nm2w64-gcc-libs-core       5.3.0                         7\nm2w64-gmp                 6.1.0                         2\nm2w64-libwinpthread-git   5.0.0.4634.697f757               2\nmarkupsafe                1.1.1            py38he774522_0\nmatplotlib                3.2.2                         0\nmatplotlib-base           3.2.2            py38h64f37c6_0\nmistune                   0.8.4           py38he774522_1000\nmkl                       2020.1                      216\nmkl-service               2.3.0            py38hb782905_0\nmkl_fft                   1.1.0            py38h45dec08_0\nmkl_random                1.1.1            py38h47e9c7a_0\nmsys2-conda-epoch         20160418                      1\nnbconvert                 5.6.1                    py38_0\nnbformat                  5.0.7                      py_0\nnotebook                  6.0.3                    py38_0\nnumpy                     1.17.4           py38h4320e6b_0\nnumpy-base                1.17.4           py38hc3f5095_0\nopenssl                   1.1.1g               he774522_0\npackaging                 20.4                       py_0\npandoc                    2.2.3.2                       0\npandocfilters             1.4.2                    py38_1\nparso                     0.7.0                      py_0\npickleshare               0.7.5                 py38_1000\npip                       20.1.1                   py38_1\nprometheus_client         0.8.0                      py_0\nprompt-toolkit            3.0.5                      py_0\nprompt_toolkit            3.0.5                         0\npsutil                    5.7.0            py38he774522_0\npygments                  2.6.1                      py_0\npyparsing                 2.4.7                      py_0\npyqt                      5.9.2            py38ha925a31_4\npyreadline                2.1                      py38_1\npyrsistent                0.16.0           py38he774522_0\npython                    3.8.3                he1778fa_0\npython-dateutil           2.8.1                      py_0\npywin32                   227              py38he774522_1\npywinpty                  0.5.7                    py38_0\npyzmq                     18.1.1           py38ha925a31_0\nqt                        5.9.7            vc14h73c81de_0\nqtconsole                 4.7.5                      py_0\nqtpy                      1.9.0                      py_0\nscipy                     1.5.0            py38h9439919_0\nsend2trash                1.5.0                    py38_0\nsetuptools                47.3.1                   py38_0\nsip                       4.19.13          py38ha925a31_0\nsix                       1.15.0                     py_0\nsqlite                    3.32.3               h2a8f88b_0\nterminado                 0.8.3                    py38_0\nterminaltables            3.1.0                    pypi_0    pypi\ntestpath                  0.4.4                      py_0\ntornado                   6.0.4            py38he774522_1\ntqdm                      4.46.1                   pypi_0    pypi\ntraitlets                 4.3.3                    py38_0\nvc                        14.1                 h0510ff6_4\nvs2015_runtime            14.16.27012          hf0eaf9b_2\nwcwidth                   0.2.4                      py_0\nwebencodings              0.5.1                    py38_1\nwheel                     0.34.2                   py38_0\nwidgetsnbextension        3.5.1                    py38_0\nwincertstore              0.2                      py38_0\nwinpty                    0.4.3                         4\nzeromq                    4.3.1                h33f27b4_3\nzipp                      3.1.0                      py_0\nzlib                      1.2.11               h62dcd97_4"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 13, 2020, 9:01:53AM",
        "content": "Hi Bob,\n\nDon't see anything obvious here. Can you just update your environment and try running your input file again please.\n\nThanks,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/y7ZYmJlI65A",
    "title": "Serious noise in the borehole radar model",
    "original_post": {
      "author": "HJJ HJJ",
      "date": "Apr 22, 2018, 8:04:23PM",
      "content": "Thanks for your contributions to GPR simulation.\nI have built many borehole radar models with the gprMax, but all the results are contaminated by the serious noise. I don't think it is right. I don't know whether something wrong with my inputs or the gprMax is not suitable for the borehole radar model. I really can't find the reasons. The next is my input file and two trace of time wave. May be you can help me. Thank you very much.\n#python:\nfrom gprMax.input_cmd_funcs import *\n#command('title', 'a long crack arround the borehole')\nB_scan = True\n#--------------domain & pml_cells\nD_x = 4.0\nD_y = 9.0\nz_dim = 0.005\nD_pml = 0.5\ndomain = domain(D_x + 2 * D_pml, D_y + 2 * D_pml, z_dim)\n#pml_cells(20,20,0,20,20,0)\ncommand('pml_cells',20,20,0,20,20,0)\n#--------------resolution & time_window\nresolution = 0.005\ntsim = 128e-9\ndx = dx_dy_dz(resolution, resolution, z_dim)\ntime_window(tsim)\n#--------------material\nmaterial(permittivity=9, conductivity=1e-5,\npermeability=1, magconductivity=0,name='Limestone')\n#--------------waveform\nidentifier = waveform('gaussiandot', amplitude=1,\nfrequency=200e6,\nidentifier='my_gaussiandot')\n#--------------transmitters & receivers & steps\nif B_scan:\ny_ant = 0.5\nelse:\ny_ant = domain.y/2 # in the middle of the x-axis\ntx = hertzian_dipole('y',\n1.4, y_ant, 0, # minus 4 cm in y-direction\nidentifier)\ncommand('rx_array', tx.x, y_ant, tx.z, tx.x, domain.y-0.4, tx.z, 0, 0.1, 0) # 10 cm step\nif B_scan:\nsrc_steps(dx = 0, dy = 0.1, dz = 0)\n#--------------Model\nbox(0, 0, 0,\ndomain.x, domain.y, domain.z, 'Limestone')\nborehole_dia = 0.2\nb0, b1 = box(1.3, 0, 0,\n1.3+borehole_dia, domain.y, z_dim, 'free_space')\n#crack\nimport math\nimport numpy\nmig = 2.7 #Migration Value\nthick = 20 #Crack width.grids 10cm\nfor j in numpy.arange(2.5,5.5,resolution ):\ncom = 0.3math.sin(2.5j)\nrou = com/resolution\nbot_num = math.floor(rou)\nbox(bot_num * resolution + mig, j, 0,\nbot_num * resolution + thick * resolution + mig,\nj + resolution, z_dim, 'free_space')\n#--------------Outputs, geometry and snapshots\nif current_model_run == 45:\ngeometry_view(0, 0, 0,\ndomain.x, domain.y, domain.z,\ndx.x, dx.y, dx.z,\n'Borehole_5cmcrack200m', 'n')\nN = 50\nif current_model_run == 45:\nfor i in range(1, N+1):\nsnapshot(0, 0, 0,\ndomain.x, domain.y, domain.z,\ndx.x, dx.y, dx.z, i*(tsim/N), 'snapshot' + str(i))\n#end_python:"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 23, 2018, 7:23:53AM",
        "content": "Hi,\n\nWelcome to the forum!\n\nWhat receiver components are you plotting? \n\nI can see from the model you create that it is 2D TMz, but you use a source that is polarised in the y-direction.\n\n#domain: 5 10 0.005\n#pml_cells: 20 20 0 20 20 0\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 1.28e-07\n#material: 9 1e-05 1 0 Limestone\n#waveform: gaussiandot 1 200000000.0 my_gaussiandot\n#hertzian_dipole: y 1.4 0.5 0 my_gaussiandot\n#rx_array: 1.4 0.5 0 1.4 9.6 0 0 0.1 0\n#src_steps: 0 0.1 0\n#box: 0 0 0 5 10 0.005 Limestone\n#box: 1.3 0 0 1.5 10 0.005 free_space\n#geometry_view: 0 0 0 5 10 0.005 0.005 0.005 0.005 Borehole_5cmcrack200m n\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Apr 23, 2018, 6:01:01PM",
        "content": "Thanks.\nMy concerned receiver component is Ez.\nThe borehole direction is also Z axis direction.\nTransmitter and receivers move along the Z direction .\n\nRegards,\nHJJ"
      },
      {
        "author": "HJJ HJJ",
        "date": "Apr 23, 2018, 6:05:43PM",
        "content": "The attached is the simulation mode.\nThanks."
      },
      {
        "author": "Craig Warren",
        "date": "Apr 24, 2018, 1:20:32PM",
        "content": "HJJ,\n\nI can see from your input file that your source (Hertzian dipole) is polarised in the y direction. From the geometry view you have posted (and your input file), your source and receivers are positioned in the direction of your borehole, which is also y orientated. This combination of source polarisation and geometry will not work for 2D models in gprMax, as 2D simulations use transverse magnetic (TM) modes, i.e. TMx, TMy, or TMz, depending on the direction of invariance. If you want to use this combination for a 2D you would need a transverse electric (TE) mode, which we do not currently support in gprMax. So you have several choices: you can retain your current geometry and change your source polarisation to the z-direction; you can move to using a 3D model (with a limited number of cells in the invariant direction); or you could consider implementing 2D TE modes in gprMax.\n\nThat said, your current model configuration should give a warning, and since the invariant direction is z, i.e. TMz mode, the Ex and Ey components should be zero, which they are not. I have logged this issue (https://github.com/gprMax/gprMax/issues/155) and we will look into it.\n\nI hope this helps you move forward with your model.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Apr 25, 2018, 9:31:32AM",
        "content": "Craig, Thanks very much for your advice.\nAccording to your advice, I retain my current geometry and change the source polarisation to the z-direction, the problem is improved much. But after enlarging the waveform, I found something strange, which is shown in the attached. Would you please give me another suggestions?\nThanks.\n\nKind regards,\n\nHJJ"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2018, 11:45:15AM",
        "content": "HJJ,\n\nIt you want us to help further, you need to provide more information about what you are doing, e.g. what field component is the plot of? where was it sampled in the model?\n\nI ran the following code from your model:\n\n#domain: 5 10 0.005\n#pml_cells: 20 20 0 20 20 0\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 1.28e-07\n#material: 9 1e-05 1 0 Limestone\n#waveform: gaussiandot 1 200000000.0 my_gaussiandot\n#hertzian_dipole: z 1.4 0.5 0 my_gaussiandot\n#rx: 1.4 0.6 0\n#rx: 1.4 9.6 0\n#box: 0 0 0 5 10 0.005 Limestone\n#box: 1.3 0 0 1.5 10 0.005 free_space\n#geometry_view: 0 0 0 5 10 0.005 0.005 0.005 0.005 Borehole_5cmcrack200m n\n\nThere are two receivers, one close to the source (rx1.png) and one at the top of borehole (rx2.png). You can see the results - the Ez component of each. Also attached is a section of the geometry showing the location of the source and receiver closest to it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Apr 25, 2018, 9:54:36PM",
        "content": "Dear Craig,\n\nThanks for what you have done.\nI described my doing in detail in the attached 1, and all the results are provided under different cases.\nThe attached 2 is the input file.\n\nLooking forward to your reply.\nThanks again.\n\nRegards,\n\nHJJ"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 26, 2018, 5:47:37AM",
        "content": "Hi HJJ,\n\nThanks for the documents and the explanations of what you are doing and getting the noisy results. Here are some things to clarify for you \n\n1. You can not have a 'y' directed source in a 2D TMz model as the one you are doing. You only should have Ez, Hx, Hy. gprMax tries to do this by using the 3D cell so as to keep the same geometry primitives in building models and simplify the process. Ex,Ey, and Hz should be identically zero in all cases. Clearly that was not in your case because you excited the Ey component something that it should not have been possible and we will rectify as it is a bug.  So, any response from a 'y' directed source is wrong and it is irrelevant if it is noisy or not. Ideally if you excite an Ey component in an TMz 2D simulation you should get only zeros.\n\n2. Exciting the 'z' component is correct in terms of the 2D model but obviously not correct in terms of you borehole model. In essence you cannot really do a borehole model as you have it as the antenna in this case needs to be in 'y' and you only allowed a 'z' component. All 2D borehole models will be TEz (see the literature on this) Even these are not strictly correct but closer. \n\n3. The noise can be caused by many things but in your case, most likely, will be due to loss of precession in the calculations. This can happens when the fields are getting to be very small (relatively too each other or in absolute terms) and doing arithmetic operations with relative small numbers can lead to computational noise. In order to see this you need to magnify about 4 orders of magnitude from the normal signal levels and this is an indication that the noise is caused by this. It might have other contributions as well but I think is mostly due to that. \nA way to change this is to use double precision in your calculations this can be done by commenting the relevant single precision lines in the constants.py and constants.pxd files. This will double the memory footprint of your model as higher precision requires more storage. I think it might take the noise away but this will not make the model correct as what you are trying to do is not really feasible with a TMz 2D code.\n\n\nHope this clarifies some things for you\n\nRegards\n\nAntonis"
      },
      {
        "author": "HJJ HJJ",
        "date": "Apr 26, 2018, 6:41:49AM",
        "content": "Dear Antonis,\nThanks very much for your explanation.\nThen, if I want to build the 3D borehole radar model, do you think it is okay to choose any polarised source? 'x' -direction, 'y'-direction or 'z' direction. Though I think so, but if you can make sure it will be more safe.  Thanks again.\n\nRegards,\n\nHJJ"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 26, 2018, 6:47:41AM",
        "content": "HJJ,\n\nWith a 3D model you can use a source that is polarised in the same direction as your borehole, i.e. y-aligned borehole with y-polarised source. Another thing to note (and read on) is that the source you are using (the Hertzian dipole) is a idealised, theoretical source and does not represent physically your antenna. If you want to simulate a more realistic dipole antenna, you must include its geometry specifically in the model. Have a look in the docs at the different antenna models.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Apr 26, 2018, 8:45:18AM",
        "content": "Hi Craig,\nThanks for your proposal.\nBased on the suggestions of Antonis, I change the single precision to double precision, and all the results are improved much. It is proved effective.\nNow, I am considering the 3D borehole radar model and antenna models.\n\nThanks Craig & Antonis, for your much help.\n\nRegards,\n\nHJJ"
      },
      {
        "author": "Feng Zhou",
        "date": "Nov 5, 2018, 10:38:07PM",
        "content": "I have the similar problems in my borehole model."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 6, 2018, 6:04:49AM",
        "content": "Hi Feng,\n\nYou need to elaborate on what problems you are having with your borehole model. Posting the input file and any relevant output plots are also useful.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZsZa7IZZ6-I",
    "title": "[GPU Issue]: pycuda.driver.CompileError: nvcc compilation of /tmp/tmpeuo7r59m/kernel.cu failed",
    "original_post": {
      "author": "Armando Schneider",
      "date": "Aug 1, 2023, 11:59:11AM",
      "content": "Hello,\n\nI am trying to use GPU to compute the example. I used the command\n\n` python -m gprMax user_models/cylinder_Ascan_2D.in -gpu 0`\n\nand, I run into an error. If I run `python -m gprMax user_models/cylinder_Ascan_2D.in`, it works well.\n\nI have uploaded detailed error message to here: \n\nhttps://github.com/gprMax/gprMax/issues/363\n\nCan you please let me know how I can resolve the problem? \n\nThank you,\n\nTed"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 11:14:55AM",
        "content": "Hi Ted,\n\nI've responded to this on our issue tracker - https://github.com/gprMax/gprMax/issues/363\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HVmnOfg1Zzg",
    "title": "Interfacing of gprMax with Matlab",
    "original_post": {
      "author": "Ashlesha Ingole",
      "date": "Jul 5, 2023, 6:33:17AM",
      "content": "Respected Sir,\n\nGreeting of the day.\n\nI am working on my final year MTech project on Ground Penetrating Radar (GPR). I am using the gprMax software to get the data for the images along with it, I am planning to interface MATLAB with gprMax. I would like to know how the interfacing between the two is possible and what exactly is the procedure for the same.\nKindly help me out with the query.\n\nThanks and Regards,\nAshlesha Ingole\nMTech | EE\nDIAT, Pune"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2023, 7:10:24AM",
        "content": "Dear Ashlesha,\n\nWe would need to know more about what you mean by 'interface with MATLAB'. There are currently MATLAB scripts in the gprMax that allow you to do basic plots of the output data from gprMax.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hx5NXXwUSDM",
    "title": "Error in using Geometry read command",
    "original_post": {
      "author": "AISWARYA K P",
      "date": "Jun 26, 2024, 1:12:22AM",
      "content": "While I am trying to execute the input file  with #geometry_objects_read:  I am getting error as \"CmdInputError: '#geometry_objects_read: ......... requires exactly five parameters. I have given the command with all five parameters. what could be the problem? \nThank you in advance for any suggestions or help."
    },
    "responses": [
      {
        "author": "Jorge Luis Alva Alarcon",
        "date": "Jun 26, 2024, 10:41:15AM",
        "content": "Hello,\nI can share the line I use, so you could compare:\n\n#python:\ncommand('geometry_objects_read', antenna_x_pos, antenna_y_pos, antenna_z_pos, 'CommercialVivaldi.h5', 'materials_comercialVivaldi.txt')\n#end_python:\n\nRegards,\n"
      },
      {
        "author": "AISWARYA K P",
        "date": "Jun 26, 2024, 9:00:51PM",
        "content": "Thank you for the response. I will try this.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Q_UEH1tKd8E",
    "title": "Problem displaying layers in paraview",
    "original_post": {
      "author": "Fatma Yiğit",
      "date": "Nov 6, 2019, 9:40:29AM",
      "content": "Hello,\nI'm having trouble viewing the model at Gprmax. In Github and on this platform, I have also examined the previous questions about this topic, but I cannot find a solution.\nIn Paraview, I added the macro as described at http://docs.gprmax.com/en/latest/output.html#geometry-output on this site. However, there is difficulty in displaying threshold values. It gives an error. I share the error and screenshot below.\nI would be glad if you help.\n\nBest regards,\nFatma.\n\n\nTraceback (most recent call last):\n  File \"<string>\", line 43, in <module>\nTypeError: startswith first arg must be bytes or a tuple of bytes, not str"
    },
    "responses": [
      {
        "author": "Fatma Yiğit",
        "date": "Nov 7, 2019, 2:06:01AM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 6:05:04AM",
        "content": "Hi Fatma,\n\nI don't presently have access to Paraview 5.7.0, which I see you are using. Can you confirm what version of gprMax you have?\n\nThanks,\n\nCraig"
      },
      {
        "author": "Fatma Yiğit",
        "date": "Nov 7, 2019, 7:50:35AM",
        "content": "Hello, Craig,\n\nI'm currently using the latest version of gprMax vesion 3.1.5 I guess. I created a 2D and 3D model. I want to display my materials layer by layer.\n\nBest regards,\n\nFatma."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 7:52:10AM",
        "content": "Hi Fatma,\n\nThanks for the info. Is this same problem happening with the other example models, e.g. cylinder_Ascan_2D.in ?\n\nCraig"
      },
      {
        "author": "Fatma Yiğit",
        "date": "Nov 7, 2019, 8:01:24AM",
        "content": "Hi, Craig,\n\nYes, it's the same. I get the same error for A - scan and B - scan.\n\nBest regards,\n\nFatma."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 8:04:51AM",
        "content": "Thanks. I suspect this maybe an issue with Paraview. Can you try downloading and installing Paraview 5.5.x and see if that works.\n\nCraig"
      },
      {
        "author": "Kerem Ozkap",
        "date": "Nov 7, 2019, 8:30:28AM",
        "content": "Hello Craig and Fatma, \n\nIt looks interesting. I'm currently using the version 3.1.5 of gprMax , and the latest version of Paraview (5.7.0). 2D and 3D models working well. I can see all the materials with Paraview, no problem is occurring.\n\nBest,\n\nKerem"
      },
      {
        "author": "Fatma Yiğit",
        "date": "Nov 7, 2019, 8:46:39AM",
        "content": "Hello,\n\nI'm going to install and try version 5.5.2 of Parview. \n\nThank you very much.\n\nFatma."
      },
      {
        "author": "Fatma Yiğit",
        "date": "Nov 7, 2019, 9:00:07AM",
        "content": "Hello Kerem,\n\nI have a few questions I need to ask about GprMax. How can I reach you privately at points I don't understand?\n\nSend Regards,\n\nFatma."
      },
      {
        "author": "Fatma Yiğit",
        "date": "Nov 7, 2019, 9:07:08AM",
        "content": "Hi, Craig,\nParaview worked without error in 5.5.2 version. I share the screen image. Thank you very much again the problem is solved.\nBest regards\nFatma."
      },
      {
        "author": "Fatma Yiğit",
        "date": "Nov 7, 2019, 9:13:44AM",
        "content": ""
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/b7tSI3_bKjY",
    "title": "Depth visibility problem",
    "original_post": {
      "author": "Hugo Devillers",
      "date": "Jun 21, 2023, 8:23:35AM",
      "content": "Hello everyone, first of all thank you for creating software like gprMax.\n\nI try to reproduce a study on a road with inside a cylinder in order to see irregularities in the ground.\nI have already made some cases like a reinforced concrete and now I decide to make a model with irregularities on the road.\nMy problem is that the antenna that I want to position would be at least 10 centimeters from the ground, and when I do that I can't see anything in the ground. My goal is to put a cylinder in depth and there only a cylinder 10 cm deep is difficult to see.\nI attach you my code, a photo when it is in direct contact with the ground and a second at 10cm from the ground\nThank you for your answers that can unblock me\n\nBest regards\nHugo DEVILLERS"
    },
    "responses": [
      {
        "author": "Hugo Devillers",
        "date": "Jun 21, 2023, 8:32:30AM",
        "content": "Should more easy with :\n\n#domain: 0.55 1.5 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 15e-9\n\n#waveform: ricker 1 2e9 my_ricker\n#hertzian_dipole: z 0 1.1 0 my_ricker\n#rx: 0.04 1.1 0\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 soil_properties\n\n#fractal_box: 0 0 0 0.55 1 0.002 1.5 1 1 1 10 soil_properties soil\n\n#add_surface_roughness: 0 1 0 0.55 1 0.002 1 1 1 0.9975 1.0025 soil\n\n\n#cylinder: 0.25 0.9 0 0.25 0.9 0.002 0.03 pec\n\n#geometry_view: 0 0 0 0.55 1.5 0.002 0.002 0.002 0.002 ROAD n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 21, 2023, 9:41:00AM",
        "content": "Hi Hugo,\n\nFirst you need to look more carefully at the #fractal_box: and the #add_surface_roughness: commands. If you are doing B-Scans you must specify the seeding integer number to these commands (it can be any number this is not important). These are the [i2] and [i1] parameters respectively in their documentation. If you do not do that for every new trace you get a new fractal distribution for the soil and the surface and this is not what you want to model. You want a stochastic distribution that does not change every time a new trace is simulated. Seeding the random number generator will do this for you. I hope that makes sense!\n\nNow, at 2 GHz centre frequency the pulse length is about 15 cm in air. Optimal coupling of GPR pulses into the ground happens when the source is within about 10% or sometimes pushed to 15% of that value. It then quickly deteriorates as the source decouples from  the ground. This does not mean you do not get energy into the ground but it is a lot less and in some cases makes the method to loose the functionality you want it to provide. If the target is shallow enough then you might still get a response. You can use stronger gain to see that response and try to eliminate the strong direct response and ground reflection to make it more visible.\n\nThere is no magic trick to replace lost energy so at some point you will not be able to detect what you need once you are moving away from the interface. You can easily do a single trace experiment above a fixed target to see how lifting your sensor affects the strength of the signal. \n\nhope this helps\n\nAntonis\n"
      },
      {
        "author": "Hugo Devillers",
        "date": "Jun 22, 2023, 2:27:27AM",
        "content": "Hello Antonis, thank you for such a quick answer.\n\nRegarding the first part, yes I had forgotten to specify this point, I was too concerned about the depth\n\nThen I applied what you told me, I did some tests with my source only 1.5 cm from the surface and I lowered my cylinder 10 cm by 10 cm and here are the results\n\nIs there a way to improve the visibility in depth of my hyperbol without modifying the frequency which is 1 GHz?\nand as you said, it may be complicated to do a study with a source height of about 30cm, so is there currently no way to be able to do a study with this height?\n\nThank you for your answers\n\nHugo\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1_s1L1dMu2U",
    "title": "Adding noise in gprMax",
    "original_post": {
      "author": "Santhu Athidi",
      "date": "May 28, 2021, 1:35:08AM",
      "content": "Dear all,\n\nIs it possible to add random noise or additive white gaussian noise to B-scan image in gprMax? If possible how to add noise? \n\nThank you in advance"
    },
    "responses": [
      {
        "author": "他我",
        "date": "May 30, 2021, 2:29:28AM",
        "content": "I also have similar questions, I hope you can help to answer questions, thank you！\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:46:37AM",
        "content": "You can add whatever noise you like as a post-processing step to the output from gprMax. You could do this using Python or MATLAB - just import your B-scan data and add the noise.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Santhu Athidi",
        "date": "Jun 1, 2021, 7:25:19AM",
        "content": "It means we cannot add any noise in gprMax program itself, right sir? can you give some insights about adding surface roughness sir \n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 8:12:10AM",
        "content": "You have to be careful with the definition of the word noise, and then the source of the noise. Noise can mean any signal(s) that are not from the target/object of interest in your model. For example, if you are trying to detect/image a buried pipe and you receive signals from the surrounding heterogeneous soil, then those could be considered noise. If you know what is generating the noise and can model it, then you can include it in your gprMax simulation.\n\nFor information on rough surfaces, see our docs:\n• http://docs.gprmax.com/en/latest/input.html#add-surface-roughness\n• http://docs.gprmax.com/en/latest/examples_advanced.html\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Santhu Athidi",
        "date": "Jun 1, 2021, 8:22:42AM",
        "content": "Last statement is a bit confusing sir, if I want to add AWGN noise with SNR of 10dB or 20dB is it possible to add it in gprMax code(notepad file) itself. In some of researh articles they are adding this AWGN noise like this. are they adding noise after post processing in matlab or python or directly in gprmax codse itself?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 1, 2021, 12:04:48PM",
        "content": "You cannot add what you describe as AWGN noise directly in gprMax. In other words there is no option or gprMax command to add noise to your modelled data. You need to get the gprMax output in another environment (e.g. Python script, MATLAB, octave, etc.) and then process the gprMax data adding to them the noise characteristics you want. The previous answer from Craig is not confusing as you have not had specified what did you mean by noise. There are many sources of noise and some, like the one you want, is easy to add and is incoherent in terms of its nature. Some are different like clutter. It does not matter here but is a good distinction to know about. \n\nHope this answers your question clearly.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "Santhu Athidi",
        "date": "Jun 2, 2021, 12:17:15AM",
        "content": "Thank you very much sir\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PjpO_ogiog0",
    "title": "python-m",
    "original_post": {
      "author": "Londstate",
      "date": "May 13, 2019, 12:18:51AM",
      "content": "Dear Craig,\n  It's me again.I meet a new question when I try to python -m gprMax cylinder_Bscan_GSSI_1500.in -n 40.\nAnd I want to know if there are some models about \"hollow metal tube\" and “Hollow non-metallic tube”？  \n                               Thank you,\n                                      Yours Londstate"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 13, 2019, 3:52:21AM",
        "content": "You need to carefully read the error message. You are trying to move the antenna outwith the model domain, i.e. you are running your model 16 times, so your maximum x coordinate (according to how you are positioning the antenna) will be (16 * 0.0625) + 0.105 = 1.105 > 1m of the x-dimension of your domain.\n\nThere are no specific examples for hollow and non-metallic tubes, as these should be straightforward to create if you have gone through the documentation and other examples.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Londstate",
        "date": "May 19, 2019, 11:25:45PM",
        "content": "Thank you, Craig!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-WUW8423u5Y",
    "title": "About the Antenna models",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Apr 15, 2019, 8:42:40PM",
      "content": "Hi everyone:\n                                    I have a question when I insert the antenna model into the computational  domain , does the antenna has its specified size? Is it necessary to consider antenna's domain when I set the domain of computational model?\n\nKind regards:\n     Dongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 17, 2019, 3:57:14AM",
        "content": "Yes the antenna models have a specific size, which you should account for when placing them into a model. The dimensions are given in the docs - http://docs.gprmax.com/en/latest/user_libs_antennas.html\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/mcvgI9heG7o",
    "title": "port with complex impedance?",
    "original_post": {
      "author": "xianyang gao",
      "date": "Jan 8, 2019, 10:12:14AM",
      "content": "Dear all,\n\nCould you please tell me whether I can generate a complex impedance for the source port in gprMax? like transmission line or voltage source?\n\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 8, 2019, 11:45:00AM",
        "content": "Hi Xianyang,\n\ngprMax is based on FDTD. It is a time domain technique. You cannot use a complex impedance which is frequency concept directly as any calculation will be valid fo a specific frequency.\n\nbest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/abxvyh8U3uA",
    "title": "Use the command #geometry_objects_read for creating an antenna",
    "original_post": {
      "author": "Nicolás Zilberstein",
      "date": "Nov 15, 2018, 6:19:53PM",
      "content": "Hello,\n\nI'm a beginner in gprMax, so i'm sorry if the question is a bit basic. I want to know if i can use the tool convert_png2h5 to create an antenna geometry from a png image. \n\nIn the case that the answer is negative, the only way to generate my own antenna is creating a python script like MALA antenna? \n\nThanks,\nNicolas."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 15, 2018, 7:22:04PM",
        "content": "Hi Nicolas,\n\nWelcome to the forum! \n\nIf your antenna is planar I think we can use this trick to make a model of it in a simple way. If the antenna is more 3D then that is a bit trickier. Often scripting an antenna design allows more deeper parametric investigations of the design. I do understand that is more challenging to go down that route!\n\nBest and good luck!\n\nAntonis"
      },
      {
        "author": "Nicolás Zilberstein",
        "date": "Nov 16, 2018, 8:33:34AM",
        "content": "Ok, thanks. I will try and then write the results here."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/65-WUxLvSms",
    "title": "Is it possibile to use the gprMax inside a fuction in a python script?",
    "original_post": {
      "author": "Felipe Augusto",
      "date": "Sep 6, 2018, 8:48:22AM",
      "content": "I'm a geophysical research doing my master degree in USP Brazil. One of my subjet now is work with GPR data inversion so i started use gprMax to generate foward models to realese the inversion (using a nonlinear regression fuction in python). Now, the deal is create a algorithm (in python) to make, by interactive way, foward models and apply on regression fuction. I have a question to do: Is it possibile to use the gprMax inside a fuction in a python script?\n\nthank's for the attention e sorry about my bad english"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2018, 9:12:34AM",
        "content": "Hi Felipe, \n\nWelcome to the forum!\n\nYou can import gprMax into other Python scripts just as you would any other Python package, e.g.\n\nfrom gprMax.gprMax import api\n\n# Run model\napi('mytestmodel.in', gpu=None)\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Felipe Augusto",
        "date": "Sep 6, 2018, 2:00:13PM",
        "content": "Tnks man! I'm glad to make part of this great comunity.\n\nAgain, sorry by my bad english i'm working on this"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JY8F3mlMqLg",
    "title": "Landmine User Library",
    "original_post": {
      "author": "giganggu",
      "date": "Oct 26, 2016, 3:38:36AM",
      "content": "Hi,\n\nI want to ask about the landmine user library.\n\nAccording to manual documentation http://docs.gprmax.com/en/latest/user_libs_landmines.html?highlight=landmine,\nthere is a package of library for landmine under user library folder bu I can not find them.\nIs it removed? or i did a mistake in the installation? but I see in the github, there is no such library\n\nThank you.\n\n\nRegards,\ngiganggu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 26, 2016, 3:45:46AM",
        "content": "Hi giganggu,\n\nWelcome to the forum. The page in the User Guide you refer to is a holding page for when we release the landmine models - they are not yet available. We will probably release them next year.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "giganggu",
        "date": "Oct 26, 2016, 3:59:11AM",
        "content": "Dear Craig,\n\nThanks for the quick response.\nI see. It's ok, I just to make sure about my installation.\n\nThank you.\n\n\nRegards,\ngiganggu"
      },
      {
        "author": "Sinisha Pecov",
        "date": "Oct 12, 2017, 6:31:36AM",
        "content": "Hi,\n\nCan you inform me if landmines models are available for use?"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 12, 2017, 6:33:52AM",
        "content": "Hi Sinisha,\n\nNo, the landmine models are not currently available. We may release them in the future but we don't have a timeframe to do so at the moment.\n\nThanks for your interest.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OzIdjMThECE",
    "title": "3D model",
    "original_post": {
      "author": "Sirojiddin Nuriyev",
      "date": "Sep 14, 2017, 5:33:59AM",
      "content": "Hi, We need 3D matrix in 3D-model. But I didn't compile using gprMax. How to compile 3D-model. Please, show me like (Introductory (2D) models)."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 14, 2017, 5:42:20AM",
        "content": "Hi Sirojiddin,\n\nWelcome to the forum! And thanks for re-posting your question here.\n\nI assume you are talking about importing geometry into gprMax? If so, you'll find information on the format of the HDF5 file that must be used in the User Guide - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read You can use whatever tool you like to do this. Unfortunately I don't have the time resource to take you through a step-by-step guide (like for the Introductory models), see post - http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FsZ02_8usH0g%2FGthGMOaqCgAJ\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sirojiddin Nuriyev",
        "date": "Sep 14, 2017, 5:54:29AM",
        "content": "I am using gprMax/docs.   But none of them did not show 3D model. \nFor Example, I find one 3D model by http://www.research.ed.ac.uk/portal/files/27907242/1_s2.0_S0010465516302533_main.pdf \n.in file:\n#domain: 1 0.208 0.7\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 10e-9\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 soil_properties\n#fractal_box: 0 0 0 1 0.208 0.5 1.5 1 1 1 10 soil_properties soil\n#add_surface_roughness: 0 0 0.5 1 0.208 0.5 1 1 1 0.45 0.55 soil\n#add_surface_water: 0 0 0.5 1 0.208 0.5 1 0.4 0.6 300 soil\n#add_grass: 0 0 0.5 1 0.208 0.5 1 0.4 0.6 300 soil\n#python:\nfrom user_libs.antennas import\n antenna_like_GSSI_1500(0.5, 0.104, 0.6)\n#end_python:\n#geometry_view: 0 0 0 1 0.208 0.7 0.001 0.001 0.001 complex_environment n \n\nthis 3D model did not compile: \n\nAnd I see no one compiled 3D model using gprMax. I see one result 3D model in github: https://github.com/gprMax/iwagpr2017-model \n\nHere has onlu result! I did not find .in file!"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 14, 2017, 11:39:31AM",
        "content": "Hi Sirojiddin,\n\nFirstly, you have not copied the example model from our CPC paper correctly, look again, it should be:\n\n#domain: 1 0.208 0.7\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 10e-9\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 soil_properties\n#fractal_box: 0 0 0 1 0.208 0.5 1.5 1 1 1 10 soil_properties soil\n#add_surface_roughness: 0 0 0.5 1 0.208 0.5 1 1 1 0.45 0.55 soil\n#add_surface_water: 0 0 0.5 1 0.208 0.5 1 0.4 0.6 300 soil\n#add_grass: 0 0 0.5 1 0.208 0.5 1 0.4 0.6 300 soil\n#python:\nfrom user_libs.antennas import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.5, 0.104, 0.6)\n#end_python:\n#geometry_view: 0 0 0 1 0.208 0.7 0.001 0.001 0.001 complex_environment n\n\nSecondly, this is quite a large 3D model (~10.4GB of RAM required), so I don't think it will fit on your GPU. You should be able to run on CPU looking at your specs (32GB RAM).\n\nThe input file(s) for the IWAGPR2017 challenge will be released (onto our GitHub repository) in the coming weeks.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sirojiddin Nuriyev",
        "date": "Sep 17, 2017, 8:57:06PM",
        "content": "Hi Craig,\n\nI have a question. I am using GPR and it give 3D-matrix(real data). Can I get artificial 3D-matrix data using gprMax, such as real data.\n\nSorry for taking much of your time.\n\nThanks,\nSirojiddin"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 18, 2017, 4:46:56AM",
        "content": "Hi Sirojiddin,\n\nI am afraid I don't understand the question you are asking. What do you mean by 3D-matrix?\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OSCLpWgawJM",
    "title": "How to change the antenna size in paraview?",
    "original_post": {
      "author": "yan zhang",
      "date": "Aug 12, 2020, 10:54:50AM",
      "content": "Hello, everyone,\n\nIn viewing the geometry of a model, the antennas for tx and rx are too small to look at. Is there any way to make it more larger in Paraview? \n\n\nThanks,\nYan"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "Aug 14, 2020, 8:53:50PM",
        "content": "Hi,\nyou can use the mouse wheel or the \"right mouse button+move mouse\" to zoom in or out."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/TqFiaCKRoxU",
    "title": "Error in this file",
    "original_post": {
      "author": "savita s",
      "date": "Jun 1, 2021, 1:22:22PM",
      "content": "Please help me out why i am getting this error. Please suggest what to change in the code. Thankyou in advance.\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 5.0 4.0 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 12e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 1.6 3.3 0 my_ricker\n#rx: 3.2 3.3 0\n#src_steps: 0.005 0 0\n#rx_steps: 0.005 0 0\n\n#box: 0 0 0 5.0 3.3 0.005 half_space\n#cylinder: 2.5 2.2 0 2.5 2.2 0.005 0.010 pec\n\n\n#geometry_view: 0 0 0 5.0 4.0 0.005 0.005 0.005 0.005 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 4:00:55PM",
        "content": "Do some reading on numerical dispersion - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization Understanding the concept is key to using the FDTD method....and hence gprMax.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gXX5OrhAc5E",
    "title": "Question on #excitation_file (excitation file)",
    "original_post": {
      "author": "Fabio da Silva",
      "date": "Oct 6, 2017, 1:05:08PM",
      "content": "Good morning,\n\nI have another question, this time about excitation files. I have a waveform I want to generate comprising a sine wave enveloped by a Gaussian pulse. The reasons for this choice rest on retaining as much spectral purity of the sine wave as possible.\n\nHere is where the problem lies. When I try to execute the code, I get:\n\nFor the pulse containing sine and envelope:\nFloatingPointError: divide by zero encountered in log10\n\nNow, if I simply take the one component off the pulse (sine or envelope) and send the other function only, it works with the following warning issued:\nWARNING: Numerical dispersion analysis not carried out as either no waveform detected or waveform does not fit within specified time window and is therefore being truncated.\n\nInput and output files are attached for your convenience.\n\nDisclaimer: because I am testing the boundaries of my hardware, there is a large number of cells in the simulation, so you may need to shrink it for speed.\n\nThanks for any insight on this,\nFabio.\n\nPS: I noticed that I get the FloatingPointError for all three wave forms when I try to make the excitation file multi column."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 6, 2017, 1:40:18PM",
        "content": "Hi, Fabio\n\nA user pulse needs to be sampled at the correct time instance (actually this is at half step intervals (i.e. 0.5*Dt, 1.5*Dt, ...) if this is a Hertzian dipole. Further, it should have a length equal to the time window (2000 iterations) or otherwise is going to be truncated with zeros. In your case, this is not going to give much tone purity as your pulse is not going to zero. I think you need to sample for more so no visible ripples are observed when the pulse stops. This will improve the purity. I am not sure why the frequency dispersion determination function gives an error but I suppose Craig should be able to look at this.\n\nBest\n\nAntonis"
      },
      {
        "author": "Fabio da Silva",
        "date": "Oct 6, 2017, 2:27:15PM",
        "content": "Thanks, Antonis.\n\nYou are correct in your assessment of tone purity and how the pulse I used is not pure according to my goals. In the real simulation, your observation will surely be implemented. I was not aware that the time evolution evaluations occur at half time steps. Still, since their separation is the same as the full time steps, all I need to do is make sure I add a half time step offset to the time analysis and I will be aligned. Incidentally, I use a time interval specified by the number of time steps and not actual time values to make sure I use the internal definitions of gprMax.\n\nBack to the numerical dispersion problem, I can surely live with it as long as I understand the logic behind its exception call. I tried to glean it from different functions I used, but could not figure it out. In fact the pulse example I was the best way I found to explain the problem. I am glad to add any further information you need.\n\nCordially,\nFabio."
      },
      {
        "author": "Fabio da Silva",
        "date": "Oct 9, 2017, 11:38:15AM",
        "content": "The exception happens due to a division by zero inside the log10 function. I did a grep into the gprMax folder for \"log10\" and got the following (the results with a division inside the log10 call are highlighted in yellow:\n\nC:\\Users\\fcss\\Documents\\gprMax>grep -R log10 *\nbuild/lib.win-amd64-3.5/gprMax/grid.py:                    power = 10 * np.log10(np.abs(np.fft.fft(waveformvalues))**2)\nbuild/lib.win-amd64-3.5/tests/test_models.py:            datadiffs[:, i] = 20 * np.log10(datadiffs[:, i])  # Ignore any zero division in log10\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:    Vincp = 20 * np.log10(np.abs((np.fft.fft(Vinc) * delaycorrection)))\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:    Iincp = 20 * np.log10(np.abs(np.fft.fft(Iinc)))\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:    Vrefp = 20 * np.log10(np.abs((np.fft.fft(Vref) * delaycorrection)))\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:    Irefp = 20 * np.log10(np.abs(np.fft.fft(Iref)))\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:    Vtotalp = 20 * np.log10(np.abs((np.fft.fft(Vtotal) * delaycorrection)))\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:    Itotalp = 20 * np.log10(np.abs(np.fft.fft(Itotal)))\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:    s11 = 20 * np.log10(s11)\nbuild/lib.win-amd64-3.5/tools/plot_antenna_params.py:        s21 = 20 * np.log10(s21)\nbuild/lib.win-amd64-3.5/tools/plot_Ascan.py:                power = 10 * np.log10(np.abs(np.fft.fft(outputdata))**2)\nbuild/lib.win-amd64-3.5/tools/plot_source_wave.py:        start = np.where((10 * np.log10(waveform / np.amax(waveform))) > powerdrop)[0][0]\nbuild/lib.win-amd64-3.5/tools/plot_source_wave.py:        stop = np.where((10 * np.log10(waveform[start:] / np.amax(waveform))) < powerdrop)[0][0] + start\nbuild/lib.win-amd64-3.5/tools/plot_source_wave.py:        power = 10 * np.log10(np.abs(np.fft.fft(waveform))**2)\nbuild/lib.win-amd64-3.5/user_libs/antenna_patterns/plot_fields.py:    ax.plot(theta, 10 * np.log10(pattplot), label='{:.2f}m'.format(radii[patt]), marker='.', ms=6, lw=1.5)\nbuild/lib.win-amd64-3.5/user_libs/antenna_patterns/plot_fields.py:# ax.plot(theta, 10 * np.log10(hertzplot1), label='Inf. dipole, 0.1m', color='black', ls='-.', lw=3)\nbuild/lib.win-amd64-3.5/user_libs/antenna_patterns/plot_fields.py:# ax.plot(theta, 10 * np.log10(hertzplot2), label='Inf. dipole, 0.58m', color='black', ls='--', lw=3)\nbuild/lib.win-amd64-3.5/user_libs/optimisation_taguchi/fitness_functions.py:            tmp = 20 * np.log10(np.abs(modelresp - refresp) / np.amax(np.abs(refresp)))\ngprMax/grid.py:                    power = 10 * np.log10(np.abs(np.fft.fft(waveformvalues))**2)\nBinary file gprMax/__pycache__/grid.cpython-35.pyc matches\ntests/test_models.py:            datadiffs[:, i] = 20 * np.log10(datadiffs[:, i])  # Ignore any zero division in log10\ntools/plot_antenna_params.py:    Vincp = 20 * np.log10(np.abs((np.fft.fft(Vinc) * delaycorrection)))\ntools/plot_antenna_params.py:    Iincp = 20 * np.log10(np.abs(np.fft.fft(Iinc)))\ntools/plot_antenna_params.py:    Vrefp = 20 * np.log10(np.abs((np.fft.fft(Vref) * delaycorrection)))\ntools/plot_antenna_params.py:    Irefp = 20 * np.log10(np.abs(np.fft.fft(Iref)))\ntools/plot_antenna_params.py:    Vtotalp = 20 * np.log10(np.abs((np.fft.fft(Vtotal) * delaycorrection)))\ntools/plot_antenna_params.py:    Itotalp = 20 * np.log10(np.abs(np.fft.fft(Itotal)))\ntools/plot_antenna_params.py:    s11 = 20 * np.log10(s11)\ntools/plot_antenna_params.py:        s21 = 20 * np.log10(s21)\ntools/plot_Ascan.py:                power = 10 * np.log10(np.abs(np.fft.fft(outputdata))**2)\ntools/plot_source_wave.py:        start = np.where((10 * np.log10(waveform / np.amax(waveform))) > powerdrop)[0][0]\ntools/plot_source_wave.py:        stop = np.where((10 * np.log10(waveform[start:] / np.amax(waveform))) < powerdrop)[0][0] + start\ntools/plot_source_wave.py:        power = 10 * np.log10(np.abs(np.fft.fft(waveform))**2)\nBinary file tools/__pycache__/plot_Ascan.cpython-35.pyc matches\nuser_libs/antenna_patterns/plot_fields.py:    ax.plot(theta, 10 * np.log10(pattplot), label='{:.2f}m'.format(radii[patt]), marker='.', ms=6, lw=1.5)\nuser_libs/antenna_patterns/plot_fields.py:# ax.plot(theta, 10 * np.log10(hertzplot1), label='Inf. dipole, 0.1m', color='black', ls='-.', lw=3)\nuser_libs/antenna_patterns/plot_fields.py:# ax.plot(theta, 10 * np.log10(hertzplot2), label='Inf. dipole, 0.58m', color='black', ls='--', lw=3)\nuser_libs/optimisation_taguchi/fitness_functions.py:            tmp = 20 * np.log10(np.abs(modelresp - refresp) / np.amax(np.abs(refresp)))\nuser_models/sd.exe:extern __declspec(__host__) __declspec(__device__) __declspec(__device_builtin__) double         __cdecl log10(double x) ;\nuser_models/sd.exe:extern  __declspec(__host__) __declspec(__device__) __declspec(__device_builtin__) float __cdecl log10f(float) ;\nuser_models/sd.exe:      double __cdecl log10(  double _X);\nuser_models/sd.exe:           float  __cdecl log10f(  float _X);\nuser_models/sd.exe:      __inline long double __cdecl log10l(  long double _X)\nuser_models/sd.exe:        return log10((double)_X);\nuser_models/sd.exe:  inline float log10(  float _Xx) noexcept\nuser_models/sd.exe:     return (:: log10f(_Xx));\nuser_models/sd.exe:  inline long double log10(  long double _Xx) noexcept\nuser_models/sd.exe:     return (:: log10l(_Xx));\nuser_models/sd.exe:extern \"C\"    double __cdecl log10(  double); template<class _Ty> inline typename ::std:: enable_if< ::std:: is_integral<_Ty>::value, double>::type log10(_Ty _Left) { return (:: log10((double)_Left)); }\nuser_models/sd.exe:using :: log10; using :: modf; using :: pow;\nuser_models/sd.exe:using :: log10f; using :: modff; using :: powf;\nuser_models/sd.exe:using :: log10l; using :: modfl; using :: powl;\nuser_models/sd.exe:extern __declspec(__host__) __declspec(__device__) __declspec(__cudart_builtin__) float    __cdecl log10(float) throw();\nuser_models/sd.exe:__declspec(__device__) __declspec(__cudart_builtin__) __declspec(__device_builtin__) __declspec(__cudart_builtin__) float                  __log10f(float x) ;\nuser_models/sd.exe:__declspec(__device__) complex<float> log10(const complex<float>&);\nuser_models/sd.exe:__declspec(__device__) complex<double> log10(const complex<double>&);\n\n\nI am still studying the code and will report any findings as soon as I get them.\n\nFabio."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 9, 2017, 11:46:50AM",
        "content": "Hi Fabio,\nThe log10 evaluated on zero error you are experiencing comes from the dispersion analysis function (in the grid.py module if you are interested). The function is there to help guide users as to whether their model will likely suffer from the effects of numerical dispersion. I have put in a fix for the issue to catch the case when there is a zero from the FFT. Anyway if you update gprMax (pull from GitHub) the error should now be fixed.\nKind regards,\nCraig"
      },
      {
        "author": "Fabio da Silva",
        "date": "Oct 9, 2017, 12:18:08PM",
        "content": "Thanks, Craig.\n\nIt worked like a charm. I really appreciate your prompt response.\n\nCordially,\nFabio."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/0mEpKiFMIDg",
    "title": "How to get the Timewindow--Amplitude plot",
    "original_post": {
      "author": "Elizabeth",
      "date": "May 19, 2017, 8:23:56AM",
      "content": "Hi gprMax master,\n\nI found that some people can get the Timewindow--Amplitude plot like the annex. But the .out files contain the information of Ex,Ey...How can I obtain the plot?\n\nThank you a lot!\n\nElizabeth"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 22, 2017, 9:29:41AM",
        "content": "Hi Elizabeth,\n\nDo you mean an A-scan (trace) plot? i.e. http://docs.gprmax.com/en/latest/plotting.html#plot-ascan-py The output file from gprMax contains time history of the electric (and magnetic) field values at any receiver locations you have specified. An electric field value can easily be converted into a voltage if required. \n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-im0bYRUjpY",
    "title": "Bscans forming wide hyperbola",
    "original_post": {
      "author": "AISWARYA K P",
      "date": "Aug 15, 2024, 10:05:50PM",
      "content": "Hello team,\nWhy am I always getting the Bscan image as lines instead of hyperbola? Can anyone please help me with this?\n\nThank you in advance."
    },
    "responses": [
      {
        "author": "Diksha Sharma",
        "date": "Aug 16, 2024, 4:36:10AM",
        "content": "Hi there,\n\nI think you should post at least the input file or the reference (if you are using inbuilt examples) , then only people will be able to help. Just looking the B-scan doesn't give any clarity . \n\n"
      },
      {
        "author": "AISWARYA K P",
        "date": "Aug 16, 2024, 4:47:48AM",
        "content": "Thank you so much for the reply. Sorry for not posting input file. Here I am attaching the files.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 27, 2024, 9:13:25AM",
        "content": "The hyperbola is there, you are only seeing part of it. Increase the domain size and number of steps (A-scans) then you will see it all.\n\nCraig\n\n"
      },
      {
        "author": "AISWARYA K P",
        "date": "Oct 24, 2024, 3:46:39AM",
        "content": "Thank you so much for the reply. \n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JtSQQsnw8gM",
    "title": "B scans are relatively low resolution and blurry",
    "original_post": {
      "author": "ss s",
      "date": "Nov 5, 2024, 8:54:30AM",
      "content": "Dear gprMax team, Recently, when I was simulating, the resultant plot of the B-scan always showed a rather fuzzy echo curve, somewhat similar to a mosaic, and I tried to adjust my input file in many places. But it didn't change the result. If you know what is going on that is affecting the resolution of my b-scan images, please give me an answer, I would appreciate it, I am attaching my input file as well as the images below, sincere regards!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 5, 2024, 10:13:47AM",
        "content": "Hi,\n\nThis is relatively simple to fix. Every time you run a gprMax model with a new source position is in an essence a completely new simulation as the position of the source varies. However, when use anything with fractals you generate a new stochastically distributed medium from the parameters of your Peplinski soil. This medium is not vastly different but nonetheless is not the same from A-scan to A-Scan and that is why you see this effect. To fix this you need to have the same fractal reproduced for every new model for every A-scan and to do this you need to specify the \"seed\" to be the same for the random number generator used in creating the fractals. the #fractal_box: command allows you to do this and you need to include an integer number (it does not really matter what this is) \n\nFor explantation look at the details of the #fractal_box: command and you need to specify what is given as [i2] in the manual. You can see this at http://docs.gprmax.com/en/latest/input.html#fractal-box\n\nHope that helps!\n\nAntonis\n"
      },
      {
        "author": "ss s",
        "date": "Nov 6, 2024, 3:31:32AM",
        "content": "Thank you very much for your answer, I set the random seed parameter you said, there is indeed an obvious effect compared to the previous, but the image appeared still did not achieve the effect I expected, I implore you to tell me what kind of adjustments I should continue to make, Sincerely greetings!\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 6, 2024, 5:53:59AM",
        "content": "GPR data are not just images. The reason the B-scan appears not as smooth as you want is because you are having only about 60 traces and your image is big. If you make the image smaller on the x axis it will look smooth. The alternative is to have more A-scans. You need to understand what GPR does and what you are collecting and displaying. What you see now is the effect of how you plot the GPR data and not a big problem of the model. If you need to see nice smooth images  then you need to either squeeze the image you have or create models with more scans and waste more computing time for possibly no good reason. Even data that look smooth when you make the image too large on the x-axis will look like what you have. \n\nAlso, you units in the y-axis are iterations and not nanoseconds as you have them. \n\nAntonis\n\n\n"
      },
      {
        "author": "ss s",
        "date": "Nov 7, 2024, 2:33:10AM",
        "content": "Thank you so much for your reply, it helped me immensely!\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CXUXOaKs3dI",
    "title": "Cell size dependence in antenna demo?",
    "original_post": {
      "author": "Colin Stark",
      "date": "Feb 9, 2023, 4:22:51AM",
      "content": "Hi all,\n\nFirst: thanks for all your great work in building, releasing, maintaining, and supporting this great tool. Much, much appreciated.\n\nI'm trying to get to grips with modeling antennas in 3D, and so I've been working through the \"antenna_wire_dipole_fs\" user model demo. [gprMax v. 3.1.6 on MacBook Pro; Python 3.10]\n\nTest: I reduce the cell size from 1mm to 0.5mm, but maintain the gap between the dipole arms at 1mm, which forces the gap to be covered by two cells instead of one. I expect, perhaps in my ignorance, that this should lead only to an improvement in the results.\n\nIssue: I find qualitatively different, apparently erroneous behaviour when doubling the cell resolution like this. I would have expected simulations at both cell resolutions to generate essentially similar results, but the EM field propagation is qualitatively different, and the shape of the total voltage pulse, S11 parameter etc look distorted.\n\nQuestion: Am I introducing a bug into the sim by doing this? Must the gap between the two dipole arms be only one cell, and if so why?\n\nThe input files and example viz of results are attached below.\n\nI hope I've just made a naive mistake!\n\nCheers,\nColin\n\n\nCylindrical slice around the antenna (z axis) showing E vector field:"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 17, 2023, 4:37:55AM",
        "content": "Hi Colin,\n\nThanks for the question, and the interesting plots!\n\nThe sources in gprMax are designed/intended to be used in a single cell. So in your model with spatial resolution of 0.5mm and a 1mm gap at the centre of the dipole, the transmission line source will occupy one cell - it will be connected to one arm of the dipole and then the other end of the transmission line will not be connected, i.e. there will be a cell of free space before the other side of the wire dipole begins.\n\nWhat you might try (in the 0.5mm model) is to use two sources in the gap and half the amplitude and resistance of each source. I would do this with voltage sources rather than transmission lines to start with as trying to extract s-parameters from two transmission lines may be tricker, e.g.\n\n#waveform: gaussian 0.5 1e9 mypulse1\n#waveform: gaussian 0.5 1e9 mypulse2\n#voltage_source: z 0.025 0.025 0.100 36.5 mypulse1\n#voltage_source: z 0.025 0.025 0.1005 36.5 mypulse2\n\nYou could add a receiver point to both 1mm and 0.5mm models to compare the outputs, and also look at your snapshots.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Colin Stark",
        "date": "Mar 1, 2023, 8:40:01PM",
        "content": "Craig,\n\nThis fix does seem to work. I've focused for the moment on redoing the sim and the ParaView viz and so far so good. I'll try to compute the S parameters in due course.\n\nThank you so much for taking the time to help. Much appreciate it!\n\nCheers,\nColin\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LUqN8h3RSTo",
    "title": "General questions regarding gprmax",
    "original_post": {
      "author": "Tevel Aroussi",
      "date": "Feb 28, 2024, 6:35:39AM",
      "content": "Hello Forum,\n\nI would like to ask the following questions;\n\n1. Does the gprmax simulation support CW? (single frequency w/o pulse)?\n2. Does gprmax support Matlab? \n3. Ive attached an article, and I wanted to know if you think the simulations presented on Pg 4 (figures 2,3,4) are from gprmax?\n4. Does gprmax work with a matrix of antennas within the range of 20/30 antennas?\n5. Does the gprmax work within the frequencies of 10M-50M Hz?\n6. Does gprmax work with targets that are up to 100 meter depth?\n\nThank you for your time, would appreciate any answers or insights.\nHave a great day!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 28, 2024, 7:47:46AM",
        "content": "Hi,\n\ngprMax is an FDTD solver. If FDTD can be used for your problem then there is a good chance that gprMax can do it but obviously not all features that FDTD supports are available.\nAs it is a full wave simulator it can do any frequency range and any excitation type. It might not be efficient for some but then that it is your decision and not gprMax's limitation. FDTD is suited for some problem and not for some others.\ngprMax discretise apace in small voxels if you need so many that you run out of memory or your computation will take forever then most likely is not a good choice for your problem. \nIt can do many antennas or none but that depends on their size and kind and how much space you need to discretise them and simulate any depths but see the running out of memory comment above!\n\nFinally, if you read the article you attached it clearly indicates how gprMax was used. What is the point of the question? Do we doubt the truthfulness of the authors? If they say that this is what they did why do we have to question it? \n\nBest wishes \n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/c6hLFA16zDc",
    "title": "current_model_run - does it start at 1 or 0",
    "original_post": {
      "author": "Iliyana",
      "date": "Apr 23, 2017, 2:48:01PM",
      "content": "Howdy,\n\nWith regards to the build-in variable current_model_run, does it start at 1 or 0?\n\nThank you"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 23, 2017, 6:54:20PM",
        "content": "Hi Iliyana,\n\nIt starts from 1 but it should be easy to see the value as I think you should be able to use  'print(current_model_run)' inside a python block and check what is the value that is used in your model.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Ufm_mAIGpns",
    "title": "Assistance Needed with GPU Mode in gprMax",
    "original_post": {
      "author": "Kahlaoui Mohammed",
      "date": "Sep 5, 2024, 8:09:16AM",
      "content": "Hi everyone,\n\nI’m currently working with gprMax and encountering an issue while trying to use GPU mode. I’m using an NVIDIA RTX A1000 card and have followed the installation steps, but I’m running into the following error:\n\nError Message:\n\n\"To use gprMax in GPU mode the pycuda package must be installed, and you must have a NVIDIA CUDA-Enabled GPU (https://developer.nvidia.com/cuda-gpus).\"\n\nCould someone please help me troubleshoot this issue? Any guidance or suggestions would be greatly appreciated!\n\nThank you in advance for your assistance.\n\nBest regards\n\nMohammed Kahlaoui"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 10, 2024, 6:39:27AM",
        "content": "Since you have a NVIDIA GPU, it would suggest you don't have CUDA/PyCuda installed - see https://docs.gprmax.com/en/latest/gpu.html#extra-installation-steps-for-gpu-usage\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iNTimYf8Kno",
    "title": "How to add the polarization to the model and how to draw the fields in different polarization models, such as xx,, xy, yx and yy",
    "original_post": {
      "author": "小辰",
      "date": "Sep 18, 2017, 10:54:52AM",
      "content": "I am studying the gpr, and I want to study the polarization information. I want to draw the fields in different polarization models, such as xx, xy, yx and yy polarization. Then compare them. Just like what the picture shows. But I don't know how to add the polarization information to the source and how to draw the picture. Can someone give me some advice on how to do?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 18, 2017, 11:08:07AM",
        "content": "You need to study the documentation to understand how the code works and its limitations. You can simply control the polarisation of a theoretical source in the actual command you use to specify the source. For every output point you have all six electromagnetic components and you can pick the ones you need. \n\nAntonis"
      },
      {
        "author": "小辰",
        "date": "Sep 20, 2017, 10:11:24PM",
        "content": "ok. I have learnt the FDTD method and know how it works. I can understand the pml, iteration and so on. But I can't understand the incident wave part. And now I need to draw the fields in different polarization models. I don't know how to add it with the gprMax. Can you give me the code similar to this"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 27, 2017, 6:50:34AM",
        "content": "As Antonis said, you can control the polarisation of the theoretical sources available in gprMax, such as the Hertzian dipole (http://docs.gprmax.com/en/latest/input.html#hertzian-dipole), and you can use a receiver at again point in your model to sample the EM fields. You can also use the plotting tools to plot the shape of the waveform that you use to feed the source (http://docs.gprmax.com/en/latest/plotting.html#plot-source-wave-py)\n\nKind regards,\n\nCraig"
      },
      {
        "author": "hongjv zhou",
        "date": "Oct 8, 2017, 9:34:03PM",
        "content": "嗨\n如果可以的话，我希望我们能留一个联系方式，共同学习探讨gprMax。zhouh...@163.com，期待你的邮件。"
      },
      {
        "author": "Narayanarao",
        "date": "Nov 23, 2017, 12:13:15AM",
        "content": "I am confused with cross polarization of antennas. Can we orient receiver in specific polarization like in source."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 23, 2017, 9:09:29AM",
        "content": "A receiver (#rx command) gives you a time history of the electromagnetic fields at that location - specifically you get the 3 orthogonal components of each field, i.e. Ex, Ey, Ez and Hx, Hy, Hz. Therefore you can look at whatever component is useful to you, whether that be in the same direction as the polarisation of the source, or the cross direction.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Narayanarao",
        "date": "Nov 23, 2017, 9:01:59PM",
        "content": "Thank you sir for the Clarification.\n\nWarm Regards\n\nNarayanarao"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/aDzADIYL2fM",
    "title": "Re: time step & number of iterations",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 11, 2020, 5:16:58AM",
        "content": "Larent,\n\nThese are basic questions about the underlying FDTD method. We highly recommend users learn the fundamentals of FDTD before using gprMax. There are plenty of online resources and books available to do so, e.g.\n\n1. Taflove, A., & Hagness, S. C. (2005). Computational electrodynamics: the finite-difference time-domain method. Artech house.\n2. Kunz, K. S., & Luebbers, R. J. (1993). The finite difference time domain method for electromagnetics. CRC press.\n3. https://www.youtube.com/channel/UCPC6uCfBVSK71MnPPcp8AGA\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Ipja9c_AC9Q",
    "title": "Basic Object construction commands for geometries in CAD - GSSI 1.5GHz comercial antenna",
    "original_post": {
      "author": "Diego Osorio",
      "date": "Nov 16, 2021, 12:37:05PM",
      "content": "Hello dear community and gprMax developers!\n\nI am currently working in modeling the GSSI 1.5GHz commercial antenna in CAD simulators.\nI have managed to model most of the most important parts of the geometry model of the antenna, however I find myself with the #plate and #edge command, which are supposed to be non-volumetric, but still model the bowties of the TX and RX at the model.\n\nThe first one as I understand is a face surface-like command which has inputs of the lower left edge and upper right edge coordinates, but I don't know what is the surface width for  1mm discretization Yee Cell.\n The second one as I understand is an edge wire, and the initial and final point coordinates are given, but how can I know the radius of this wire to model it in CAD.\n\nI attach the GSSI 1.5 antenna model in FreeCAD. Any advice on a more direct way to model the copper bowties that isn't manually inserting face plates for each cell throughout it would be very much appreciated.\n\nKind regards,\n\nDiego"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FpN-BaxaK4w",
    "title": "output file and media",
    "original_post": {
      "author": "Roshan",
      "date": "Nov 16, 2018, 5:05:09AM",
      "content": "I  am a new user to gprMax.\n\nI have few issues regarding this: \n\n1. I need to apply gain for my output as the amplitudes are quite small. How do i do that. \n2. Also, Ez field shows only single peak apart from direct wave peak. Why am I not in a position to see other peaks whereas i can see all the required peaks in Hx field (See the image file).\n3. The other issues is that, all my layered media is a porous material. But here I think it will take a uniform medium with given dielectric."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 16, 2018, 5:35:49AM",
        "content": "Dear Roshan,\n\nWelcome to the forum! \n\nIn response to your questions:\n\n1. You can apply whatever gain you like to your output data by editing either the Python plotting scripts or MATLAB plotting scripts depending on which you are using. \n2. In a 2D TMz model such as yours the three field components are Hx, Hy, and Ez. For GPR what we measure (with our real GPR system) is the electric field, so it is the Ez component that will be of use to you. We by default plot the magnetic field components also because people can be interested in them for other uses. If you apply some gain to the Ez component you should see reflections from your layered model, obviously the reflections from the layers will have a much smaller amplitude than the direct/surface wave.\n3. If your real material is porous, and you think that is important, then you have to include that in the model. If you use a dielectric material then you will get a homogeneous material. You may wish to look at the docs on the Peplinski soil model if you are modelling soil - http://docs.gprmax.com/en/latest/input.html#soil-peplinski\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Roshan",
        "date": "Nov 17, 2018, 1:37:28PM",
        "content": "Thanks a lot Craig Warren. Will get back to you once I am done with it."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZJunkZ3P050",
    "title": "Question about including GSSI 400MHz Antenna",
    "original_post": {
      "author": "Katherine",
      "date": "Jun 26, 2018, 8:41:51AM",
      "content": "Hello, \n\nI just started to use gprMax, I want to include a GSSI 400MHz antenna in the input file and make a Bscan, but there is an error keep popping up saying that there are something wrong with the coordinates with #box, what should I do? I want the antenna start moving at 1.975 and run for 10 scans. Thankyou."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 26, 2018, 8:50:52AM",
        "content": "Hi Katherine,\n\nWelcome to the forum!\n\nHaving a quick look at your input file, I notice the discretisation of the model is 5mm, yet you have specified a discretisation of the GSSI 400MHz antenna of 0.5mm. This won't work. The GSSI antenna is available at 0.5mm, 1mm, and 2mm discretisation, so your main models needs to use one of these.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Katherine",
        "date": "Jun 26, 2018, 9:02:54AM",
        "content": "Dear Craig, \n\nThankyou for your quick response. For GSSI 400MHz antenna, can I use the discretisation with 1mm or 2mm other than 0.5mm? If the the spatial discretisation is smaller, the process time is rather long.\n\nRegards,\nKatherine"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 26, 2018, 10:22:34AM",
        "content": "Hi Katherine,\n\nYes, you can use 1mm or 2mm. In general when modelling antennas the resolution has to be small to capture all of the detail and complexity of the antenna. This results in larger computational requirements (memory and run-time), the nature of a volume-based method such as FDTD. We have some developments in the pipeline, i.e. sub-gridding, that will improve this situation in the future.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8ICvLKQOXQE",
    "title": "GprMax Install",
    "original_post": {
      "author": "AHMED JADDOA (ALHEETY)",
      "date": "Jul 1, 2024, 12:32:08PM",
      "content": "Hi all, I was trying to install gprMax following the procedure listed in gitHub. However, it always generated a fatal error (as shown in the attached figure)."
    },
    "responses": [
      {
        "author": "Jorge Luis Alva Alarcon",
        "date": "Jul 1, 2024, 2:55:30PM",
        "content": "Hello,\nI also tried some time ago to install in Windows per se, but I couldn't. I need to use my Windows computer, so, after digging, I found that it is possible to install gprMax under Windows using WSL.\nMaybe you could also try WSL.\nRegards,\n\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DGEsdxG8710",
    "title": "could the gprMax codes be run in Pycharm？",
    "original_post": {
      "author": "Xuebing Zhang",
      "date": "Dec 12, 2018, 11:09:38AM",
      "content": "I am  a freshmen of gprMax. Could the gprMax codes be run in Pycharm, the python IDE？"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bB9F1fRpmfQ",
    "title": "Help with Match Filtering gprmax output",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Dec 16, 2016, 5:48:32AM",
      "content": "Hi everyone,\nI am trying to implement simple match filtering with the 2D cylinder Bscan example in gprmax using the Gaussian wave form.\nHowever, the output from my match filtering is always displaced in range from its position in the original signal (see figure). \nI will appreciate if anyone can help to identify the problem. I have attached the gprmax output files and the match filtering algorithm.\n\nThanks in anticipation"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 16, 2016, 7:08:47AM",
        "content": "Hi Ikechukwu,\n\nI have not looked in depth at your output files or code, but one suggestion is to check the Gaussian waveform in your matched filter code is the same as the one used by gprMax. You can see the expression for all the built-in waveforms at http://docs.gprmax.com/en/latest/plotting.html#built-in-waveforms\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ikechukwu",
        "date": "Dec 16, 2016, 9:20:32AM",
        "content": "Hi Craig,\n\nI used the very same Gaussian waveform equation from the gprmax documentation in my match filter code that is why am surprised that the match filter output is displaced in range. \n\nThanks"
      },
      {
        "author": "Ikechukwu",
        "date": "Dec 16, 2016, 4:49:20PM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "Dec 19, 2016, 6:03:08AM",
        "content": "Yep, I see that now. If I get some time I'll try and take a closer look.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ikechukwu",
        "date": "Dec 19, 2016, 6:48:30AM",
        "content": "Hi Craig,\nI will be waiting for you while I continue trying to solve the problem.\n\nThanks\nIkechukwu"
      },
      {
        "author": "Lun MA",
        "date": "May 1, 2018, 7:10:37PM",
        "content": "Hi Ikechukwu,\nCan you offer me the reference paper which describes the match filter you used? May be I can find the answer to your question.\nThanks a lot, J.\n\nLun"
      },
      {
        "author": "Ikechukwu",
        "date": "May 10, 2018, 3:57:06AM",
        "content": "Hi Lun,\nApologies for not responding to you earlier. The match filter was gotten from the following book chapter: \n\n                  Richards, M.A.; Scheer, J.A.; Holm, W.A. Matched Filter Imaging. In Principles of Modern Radar Vol. I: Basic\n                  Principles; Scitech Publishing Inc.: Raleigh, NC, USA, 2010; Chapter 21, pp. 871– 873.\n\nYou can also go through the matlab code I uploaded with the original post.\n\nThanks\nIkechukwu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/AXvfLWv5KvM",
    "title": "Whether gprMax is compatible with Windows 10 OS? What is the required laptop configuration for simulation of gprMax with better speed?",
    "original_post": {
      "author": "Sumona Chatterjee",
      "date": "Mar 22, 2017, 2:23:19PM",
      "content": "Hello Sir,\n\nI am going to buy a laptop specially for gprMax simulation.Currently i m using a laptop with i3 processor ,4 GB RAM and Windows 8.1 OS where simulations taking long time which is not intended.\n\nAs I am not very much aware of the configuration of laptop,please clarify me whether gprmax would run at WINDOWS 10 Os?\n\nI am going to buy a laptop with configuration :\n1. i7 Processor(6th Generation/7th Generation)\n2. 8GB ram\n3. 1TB HDD\n4. Frequency 2.4 GHz\n5.Windows 10\n\nIs the above configuration OK for getting sufficient simulation speed for GPRMAX?\nOr, if you kindly suggest any configuration it would be very much helpful.\n\nThanks in Advance,\n\nBest Regards.\nSumona Chatterjee"
    },
    "responses": [
      {
        "author": "Volkan Özcan",
        "date": "Mar 22, 2017, 4:43:50PM",
        "content": "Hello,\n\nIf I were buying a computer for gprMax I would certainly buy more ram than 8gb. Even if you cannot afford it now, be sure that your laptop can be modified to have more ram.\n\nBest wishes"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Mar 22, 2017, 9:50:10PM",
        "content": "Hello,\n\nThanks for your suggestion.but Can you confirm whether gprMax is running fine in Windows 10? Whether gprMax is compatible with Windows 10 OS?\n\nThanks,\nSumona"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 23, 2017, 5:42:55AM",
        "content": "Hi Sumona,\n\ngprMax will run on Windows 10 but a laptop is not the best computer for running numerical modelling codes. Laptops are designed for portability and not for computational power. You can get a much more powerful desktop machine for the money you will spend on a laptop.\n\nBest\n\nAntonis"
      },
      {
        "author": "Hugo Day",
        "date": "Mar 23, 2017, 12:54:09PM",
        "content": "Indeed I run it on windows 10. Agreed with desktop, the extra RAM will help greatly, especially if you want to run with double precision."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3y2y0hvNyq8",
    "title": "Applying dispersive characteristics to other materials other than soils",
    "original_post": {
      "author": "James Whittaker",
      "date": "Mar 21, 2023, 12:14:18PM",
      "content": "Hi Guys,\n\nWe've been continuing on with our modelling and simulation efforts. The soil model is great for sands with varying water and clay content. \n\nHow would I prepare materials with dispersion characteristics similar to this? I know the material command has conductivity imbedded in it, which will apply correct attenuation. I presume I would need to apply the dispersion command as well? What work exists which details the debye parameters for different material parameters?\n\nOn another topic, what is gprMax's performance on RTX 4090s?\n\nThanks\nJames"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 24, 2023, 7:31:57AM",
        "content": "Hi James,\n\nGood to hear you have been finding gprMax a useful tool. If you want to discuss a closer cooperation then please get in touch directly again.\n\nI'm not sure I fully understand your question. The soil model (Peplinski) currently available in gprMax uses the Debye model for dispersion to characterise the components of the mixture - which you can then distribute using the fractal box. You can also use the Debye model to characterise homogeneous materials such as pure water using the add_dispersion_debye command after the usual material command - example in the docs at https://docs.gprmax.com/en/latest/input.html#add-dispersion-debye There are of course other homogeneous materials that contain water that can be described by Debye but I sense from your question your are interested in other soil descriptions?\n\nI don't have a specific performance benchmark for a RTX 4090. It has a memory bandwidth of 1008 GB/s which is similar to the V100 (900 GB/s) shown in attached graph.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hiH2e4gjEHs",
    "title": "Velocity of propagation of waves in model",
    "original_post": {
      "author": "James Whittaker",
      "date": "Dec 1, 2021, 4:16:10PM",
      "content": "Hi all, \nI've gotten a bit confused as to what velocity the waves propagate within the model.\n\nI'm trying to simulate a real world experiment with a reflector at 0.665 m away from the 900 MHz antenna. My experiment says that the reflection should arrive at 15 ns. When I calculate the velocity for that I get 0.08 m/ns. Which when calculated as relative permittivity is 3.47. \n\nWhen I run the simulation with this as my half-space value for relative permittivity the wave arrives much earlier than expected. I know you can add conductivity into the material definition but I don't have the value available, would that make a difference? Or is there some sort of frequency dispersion causing this discrepancy?\n\nThanks for your time,\nJames"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 3, 2021, 2:28:33PM",
        "content": "Hi James,\n\nFoe this distance and arrival time your calculation of permittivity seems wrong. I will suspect you missed a square root which when getting the relative permittivity squares the value you have ...\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/39dS8pblGsc",
    "title": "Examples on landmine models-regarding",
    "original_post": {
      "author": "Santhu Athidi",
      "date": "Sep 9, 2022, 12:49:18AM",
      "content": "Hello all,\n\nWe want to simulate some landmine models using gprMax like PMA, PMD, PMN etc.. Please give some references and some '.in' example files. Thank you in advance."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 9, 2022, 6:33:39AM",
        "content": "The landmine models are not available in the current release of gprMax. They will likely be included in the next major release which will be towards the end of 2022/beginning of 2023.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "MOLOY DAS",
        "date": "Oct 24, 2024, 2:30:27AM",
        "content": "Are these models available now in end of 2024? How to develop new models?\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/RrisnxJ-BZk",
    "title": "Facing error: #pml_cells has too many cells for the domain size",
    "original_post": {
      "author": "Noushin Khosravi Largani",
      "date": "Jul 10, 2023, 1:08:03PM",
      "content": "Hello\nHope you are well. I run this code in gprMax:\n\n#title: A-scan from a Layered media\n#domain: 2.0 2.0 0.08\n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 5.5e-9\n\n#material: 6 0 1 0 FirstL\n#box: 0.2 0.6 0.02 1.8 1.2 0.06 FirstL\n\n#material: 8 0 1 0 SecL\n#box: 0.2 0.2 0.02 1.8 0.6 0.06 SecL\n\n#material: 10 0 1 0 ThirdL\n#box: 0.2 0 0.02 1.8 0.2 0.06 ThirdL\n\n#excitation_file: MySFCW.txt\n#hertzian_dipole: z 0.8 1.3 0.04 MyPulseSF\n#rx: 1.2 1.3 0.04\nBut I face this error: #pml_cells has too many cells for the domain size, for each increased domain size and modified size of boxes. \nThis code considers PML condition for the domain size and the location of boxes and source and receiver. \nI would appreciate it if you could guide me how fix this error?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 17, 2023, 4:28:00AM",
        "content": "Hi,\n\nYour model presented here looks fine in terms of the PML cells - when I tested this code (without your custom waveform) there were no errors about the PML.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fV422_mGFa8",
    "title": "Influence of dx_dy_dz resolution on electric field intensity in 3D scanning",
    "original_post": {
      "author": "C Master",
      "date": "Oct 14, 2020, 7:17:04AM",
      "content": "Hi\n\nI simulated a 3D model with a center frequency of 200MHz. When I adopted different resolutions, the values of the electric field intensity in the. out file differed greatly.\n\nThe following is my.in file, which adopts the resolution of 0.015 _0.015_0.0015 and the resolution of 0.01 _0.001_0.001 respectively. The two pictures correspond to the above two resolutions respectively.\n\nWhy is the value of Ey so different at different resolutions? How should I choose the resolution?\n\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 2 2 3\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 35e-9\n\n#material: 5 0 1 0 drysoil\n\n#voltage_source: y 1 1 2.5 50 my_wave\n#waveform: gaussian 1 2e8 my_wave\n#rx: 1 1 2.6\n\n#box: 0 0 0 2 2 2.5 drysoil\n#box: 0.5 0.5 0.5 1.5 1.5 1 pec\n\n\n#geometry_view: 0 0 0 2 2 3 0.01 0.01 0.01 test_02_Ascan n\n\ndx_dy_dz=0.015_0.015_0.015\n\n\ndx_dy_dz=0.01_0.01_0.01"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 15, 2020, 11:55:58AM",
        "content": "Dear C Master,\n\nThere are a few issues here to address:\n\n1. Choosing a spatial resolution depends on the objects you are trying to model, and should be chosen to mitigate numerical dispersion. For a brief explanation see our docs - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n2. You appear to be using a voltage source without any sort of source/antenna structure. This is not good practice. The voltage source is designed to be used with an antenna structure, e.g. to specify the excitation voltage between two arms of a dipole. If you don't have an antenna structure then use the Hertzian dipole source model.\n3. The electric field intensity is different because the electric field you are impressing via the waveform (and voltage source) in each model is different. Remember you have used the same amplitude (of 1) in both models, yet your spatial resolution is different. If you want to compare models like this (with different spatial resolutions) then you must make sure the excitation is equivalent, i.e. you should scale the amplitude of the waveform accordingly with the difference in spatial resolution.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "C Master",
        "date": "Oct 15, 2020, 11:19:06PM",
        "content": "Dear  Craig Warren ,\n\nThank you for the reply,\n\nI use a voltage source because the voltage source can set the value of the resistance and thus calculate the transmitting power of the transmitting source.\nHowever, I found that the GSSI and MALA antenna models did not seem to be able to set the resistance, including the Hertzian dipole, which could only set the amplitude of the input waveform voltage. If using GSSI, MALA, or  Hertzian dipole, is there a way to calculate the transmitting and receiving power of the antenna? \n Best\nC Master\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nEuGo4XoPHI",
    "title": "THz frequency range",
    "original_post": {
      "author": "Udaya Sampath Miriya Thanthrige",
      "date": "Apr 11, 2018, 8:53:58AM",
      "content": "Hi, Can I kindly know that Gprmax support for  THz frequency range such as 300GHz-2 THz. And also can I kindly know gprmax consider the scattering  experiences in THz frequency range?\n\nThank you\nudaya"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 11, 2018, 9:55:00AM",
        "content": "Hi Udaya,\n\ngprMax is an FDTD solver and as such operates in the time-domain. There is no theoretical limit on the frequency range but we have not used gprMax for THz research. \n\nBest\n\nAntonis"
      },
      {
        "author": "Udaya Sampath Miriya Thanthrige",
        "date": "Apr 11, 2018, 11:28:56AM",
        "content": "Dear Antonis,\n\nThank you for your quick reply. Is there is any special reason behind this?\nI am looking for an simulator to simulate reflection of EM waves in a rough surface in higher frequency range. When I am searching I found information about Gprmax\nsoftware.\nThank you\nUdaya."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 11, 2018, 4:50:46PM",
        "content": "Hi Udaya,\n\nI don't understand your questions about a special reason behind what.  We mainly use gprMax to model ground penetrating radar as this is the field of research we have been working for years. However, gprMax is basically an FDTD solver and as such can be used for any full-wave 3D or 2D simulations. It might not have all the features you need for your problem but if you follow the basic FDTD principles it should work for any frequency. You need first to research if FDTD is useful for your application (i.e. you need a time domain solver if you use pulses etc.) If that is the case gprMax might be useful. You need first to understand how FDTD works etc.\n\nGood luck\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/j5bvFDRXkDY",
    "title": "simulation in google colab using gprMax",
    "original_post": {
      "author": "Nadjib Kemache",
      "date": "Mar 26, 2023, 1:13:51PM",
      "content": "I would like to create a  datasets with gprMax to use for deep learning, but unfortunately my computer (toshiba core duo 2). Is it possible to run a simulation with gprMax in google colab? If so, how do we do this?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/UJ81juWU-9k",
    "title": "Nonlinear tx rx movement",
    "original_post": {
      "author": "Matthijs van Delft",
      "date": "May 30, 2019, 10:23:28AM",
      "content": "Dear gprMax fanatics,\n\nI would like to get more insight into the difference in doing GPR measurements in enclosed subsurface environments.\nHerefore I was thinking to simulate a rotational GPR system measuring the walls of an underground pipe.\nUnfortunately, I did not find any hint relating how to form this rotational movement of the TX and RX in the input file.\nI was wondering if there is anybody out there that is able to steer me in the right directions.\n\nKind regards,\n\nMatthijs"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 31, 2019, 5:14:08AM",
        "content": "Dear Matthijs,\n\nYou can use a Python block in your input file and the variable 'current_model_run' to position sources and receivers anywhere you like between model runs. See the example - http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model - this is for a full antenna model but the same technique can be used to move simple sources such as the Hertzian dipole.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Matthijs van Delft",
        "date": "Jun 10, 2019, 3:33:56PM",
        "content": "Dear Craig,\n\nThanks for your answer, the general concept is quite clear to me. To test it I implemented the rotation functionality based on the GSSI antenna model:\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nimport math\nr = 0.25\ntheta = (2*math.pi)/number_model_runs*current_model_run\nx = r*math.cos(theta)+0.5\ny = r*math.sin(theta)+0.5\nz = 0.002\nantenna_like_GSSI_1500(x, y, z, 0.002)\n#end_python:\n\nThe only part I don't get is how to do this for simple Hertzian dipole source. Is there also a python function for simple sources similar to antenna_like_GSSI_1500? If not, could you please explain how to pass the x,y,z parameters to the Hertzian dipole source in the python block.\n\nFurthermore, I get errors when trying to use the GSSI antenna on 'flat' (2mm deep) environments. For me, it seems to be a result of the antenna model being 3D, hence it cannot be simulated in any flat environment.\nDoes this mean all included antenna models can only be used in 3D environments at least the size of the antenna models?\n\nThank you for your help!\n\nKind regards,\n\nMatthijs"
      },
      {
        "author": "Matthijs van Delft",
        "date": "Jun 20, 2019, 11:33:35AM",
        "content": "Dear Craig and Antonis,\n\nUnfortunately, I still haven't been able to build a rotating Hertzian dipole.\nI found the class HertzianDipole in sources.py which has a function update_electric but I don't understand how to use it with all the required arguments in the python block.\nIs a function for the Hertzian dipole similar to antenna_like_gssi_1500, that I can call with the new coordinates?\nIf not, could you please give an example of how to set the new coordinates of the hertzian dipole iteratively in a python block?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 20, 2019, 12:32:51PM",
        "content": "A Hertzian dipole can be aligned with x,y,z directions. I don't understand the \"rotated\" part. One can possibly workout how to implement an infinitesimal source like a hertzian dipole that is not aligned with the grid which I suppose will be a weighted use of x,y,z components but we have not tried this and don't think we will in the near future. Altering things like that requires a good knowledge of the underlying numerical method (FDTD) and electromagnetics.\n\nBest\n\nAntonis"
      },
      {
        "author": "Matthijs van Delft",
        "date": "Jun 20, 2019, 12:52:35PM",
        "content": "Dear Antonis,\n\nSorry for the unclear description. What I want is to make a circular movement with the Hertzian dipole and receiver.\nI made an example with the integrated antenna model, where a cos and sin function calculates the new 'rotating' x and y values.\nSee the following code. In this code, I want to replace antenna_like_GSSI_1500 with the Hertzian dipole and receiver.\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nimport math\nr = 0.25\ntheta = (2*math.pi)/number_model_runs*current_model_run\nx = r*math.cos(theta)+0.5\ny = r*math.sin(theta)+0.5\nz = 0.002\nantenna_like_GSSI_1500(x, y, z, 0.002)\n#end_python:\n\nCould you maybe give an example of how to pass x,y,z, values to Hertzian dipole and receiver in a python block?\n\nKind regards,\n\nMatthijs"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 25, 2019, 8:29:57AM",
        "content": "You just move the Hertzian dipole (and receiver) in the same way, i.e.\n\n#python:\nimport math\nr = 0.25\ntheta = (2*math.pi)/number_model_runs*current_model_run\nx = r*math.cos(theta)+0.5\ny = r*math.sin(theta)+0.5\nz = 0.002 \nprint('#hertzian_dipole: x {} {} {} mysource'.format(x, y, z))\n#end_python:\n\nCraig"
      },
      {
        "author": "Ahmed Antar",
        "date": "Apr 12, 2020, 11:41:43PM",
        "content": "Hallo carig\n\nhow can i change the frequency of the antenna to 2 GHZ"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 15, 2020, 4:06:42AM",
        "content": "Ahmed,\n\nAre you talking about a simple source model, such as the Hertzian dipole? Or a full antenna model? For the former, just change the centre frequency of the associated waveform. For the latter, you need to look at how to create antenna models, see examples in the docs - http://docs.gprmax.com/en/latest/user_libs_antennas.html#gpr-antenna-models\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Aug 5, 2021, 7:33:45AM",
        "content": "I want to follow up on this.\n\nDo I leave out the src_steps and receiver steps while doing this?\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2021, 9:46:51AM",
        "content": "If you are adjusting the coordinates of sources and receivers in a Python block, via your own scripting, then there is no need to use #src_steps or #rx_steps. These are just convenience commands for those wanting to move simple sources and receivers in a straightforward way.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZHyf_AFoNt0",
    "title": "How to simulate a fully polarimetric system using gprMax?",
    "original_post": {
      "author": "Pavan Kumar Akula",
      "date": "Apr 23, 2019, 7:39:35AM",
      "content": "Hello all,\n\nI would like to simulate a fully polarimetric scenario and peform Polarmetric processing on the simulated data. The scenario that I have chosen is a very a simple scenario where I have a sphere with a radius of 10 cm that is placed in air medium. According to the documentation and my understanding following is the code snippet for Polarisation X and Polarisation Y:\n\nPolarisation X\n#domain: 0.5 0.5 0.85\n#dx_dy_dz: 0.003 0.003 0.003\n#time_window: 5e-9\n#waveform: gaussiandotnorm 1 1e9 my_pulse\n\n#hertzian_dipole: x 0.105 0.2 0.65 my_pulse\n#rx: 0.175 0.2 0.65\n\n#sphere: 0.25 0.2 0.25 0.1 pec\n\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n#pml_cells: 30\n\nPolarisation Y\n#domain: 0.5 0.5 0.85\n#dx_dy_dz: 0.003 0.003 0.003\n#time_window: 5e-9\n#waveform: gaussiandotnorm 1 1e9 my_pulse\n\n#hertzian_dipole: y 0.105 0.2 0.65 my_pulse\n#rx: 0.175 0.2 0.65\n\n#sphere: 0.25 0.2 0.25 0.1 pec\n\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n#pml_cells: 30\n\nWhen I simulate this scenario using gprMax I am not getting any error but I am not sure whether this is how we have to simulate a fully polarimetric scenario. After the simulation I am considering Ex Ex, Ex Ey, Ey Ex, Ey Ey components as the target as well as the tx and rx antennas sharing the same z-axis.\n\nThanks for your help in advance."
    },
    "responses": [
      {
        "author": "Pavan Kumar Akula",
        "date": "Apr 24, 2019, 4:59:01AM",
        "content": "Sorry, the tx, rx and the target are on the same y-axis."
      },
      {
        "author": "Craig Warren",
        "date": "May 1, 2019, 6:13:14AM",
        "content": "Hi Pavan,\n\nI have not looked in detail at your input file, but you should just be able to run the model for each of the source polarisations you require (x and y?), and extract the necessary field components from your receiver (#rx).\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Pavan Kumar Akula",
        "date": "May 2, 2019, 2:52:44AM",
        "content": "Hi Craig,\n\nMany thanks for your reply.\n\nAs per your instructions, I have simulated them and have obtained the following results:\n\n\nIn the case of HH and VV (i.e. XX and YY) the antenna coupling is removed completely by simulating and subtracting it with the antennas placed in an Air medium with out any object. But in the case of HV (i.e. XY) polarisation the coupling is still there which is not expected. Is this an artifact of the simulation? I have 30 PML cells in all the directions.\n\nAlso is it possible to generate data in complex (i.e. x + iy) format from the simulation? As of now I am using Hilbert transform to add a virtual complex component to the data.\n\nHoping to hear from you soon.\n\nKind regards\nPavan Kumar."
      },
      {
        "author": "Craig Warren",
        "date": "May 13, 2019, 11:54:57AM",
        "content": "Hi Pavan,\n\nIt could be because you are differencing very small numbers in the case of the cross polarisation (HV) that cannot be precisely represented as single precision (float32) values. You can run gprMax with double precision (float64) as a test to see if that helps.\n\nTo change to double precision look in the modules 'contants.py' and 'constants.pxd'. You'll see definitions for single precision that should be commented out, and definitions for double precision that can be uncommented. Save those modules. Then you need to rebuild gprMax:\n\npython setup.py cleanall\npython setup.py build\npython setup.py install\n\nIt is not possible to output the data in a complex format, but you can easily switch to complex format in either MATLAB or numpy.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Pavan Kumar Akula",
        "date": "May 14, 2019, 5:34:49AM",
        "content": "Hi Craig,\n\nThanks for your reply.\n\nThe data that I get from gprMax is a real valued data. Could you please let me know how to switch to a complex format of the data in MATLAB or Python? Did you mean using a Hilbert or Fourier Transform?\n\nHoping to hearing from you soon.\n\nKind regards\nPavan Kumar."
      },
      {
        "author": "Craig Warren",
        "date": "May 14, 2019, 6:09:36AM",
        "content": "The data (EM field values) you get from gprMax will always be real but can be either single or double precision depending on settings. What do you require the complex format for? You can cast a real number to a complex number in MATLAB - https://www.mathworks.com/help/matlab/ref/complex.html\n\nCraig"
      },
      {
        "author": "Pavan Kumar Akula",
        "date": "May 14, 2019, 7:17:18AM",
        "content": "Hi Craig,\n\nMany thanks for your immediate reply.\n\nI learnt from a course that complex data is necessary in order to perform Polarimetric decomposition algorithms. That's the reason why I am interested in obtaining complex values.\n\nThanks for letting me know on how to convert a real valued data to complex valued data using \"complex\" function in MATLAB. But complex function just appends 0.000i to the real valued data.\n\nKind regards\nPavan Kumar Akula."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 14, 2019, 8:13:16AM",
        "content": "You need to understand what the theory and formulation of what you are trying to do is first. It is not about converting numbers! If the algorithm in your polarisation representation is developed in the Frequency Domain then the \"numbers\" are complex having magnitude and phase information for each given frequency. gprMax as a time domain method provides only real valued results with respect to time. If you do not understand the difference and how to convert properly to frequency domain information then I think this is what you must do first, but this up to you. \n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jJE_6DOexlE",
    "title": "How to use soil_peplinski command with frequency > 1.3 GHz",
    "original_post": {
      "author": "Ikechukwu",
      "date": "May 17, 2018, 11:57:42PM",
      "content": "Hi guys,\n\nHow can I use the soil_peplinski command with freq between 1.4 - 1.7 GHz. I have gone through the codes in material.py in the gprmax folder I noticed that I need to uncomment some lines in the code and change some variable names but I am not sure which variable names to change.\n\nThanks\nIkechukwu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 18, 2018, 9:28:16AM",
        "content": "Hi Ikechukwu,\n\nThe #soil_peplinksi command implements an approximation, based on a single pole Debye model plus conductive term, to the semi-empirical model proposed by Dobson et al. (https://doi.org/10.1109/TGRS.1985.289498). As you have seen the semi-experical model is different for two frequency ranges 0.3-1.3GHz and 1.4-18GHz. The 0.3-1.3GHz range is used in gprMax, with the user left to ensure that the frequencies in their model are within this range. Dr Iraklis Giannakis carried out the work on the Debye model approximation work (which I implemented), and it is my understanding that is is optimal up to ~3GHz. I would advise you to carefully read his thesis (http://hdl.handle.net/1842/20449) for a full understanding of the model, before making any changes to the code. You could also try emailing Dr Giannakis (University of West London) if you have further questions.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ikechukwu",
        "date": "May 22, 2018, 4:37:52AM",
        "content": "Hi Craig,\n\nthanks for the response. The thesis was really helpful. I think that a link to the thesis should also be included in the gprmax documentation to help other users.\n\nThanks\nIkechukwu."
      },
      {
        "author": "Craig Warren",
        "date": "May 22, 2018, 6:07:59AM",
        "content": "Great. Yes, I have added a link to Dr Giannakis thesis right next to the Peplinski soil command in the docs to make it easier to find in the future.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/muGCBt2gFoI",
    "title": "spatial resolution",
    "original_post": {
      "author": "Zhang",
      "date": "Oct 23, 2016, 8:57:36PM",
      "content": "Hello!\nI am new to gprMax.I know that higher spatial resolution cost longer running time, can I use different spatial resolution in one model? The background with a low spatial resolution while the object with a high spatial resolution, as show in the figure.\nThanks!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 24, 2016, 2:10:31AM",
        "content": "Hi Zhang,\n\nWelcome to the forum! What you refer to is called sub-gridding, being able to have one part of the model with a different spatial resolution to other parts. As you point out it can be a useful feature where you need a fine mesh for a transducer or target but not elsewhere, and this can reduce the computational requirements. Sub-gridding is not something that gprMax can currently do, but it is something we are looking into for the future.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qSBPxWeKG74",
    "title": "Internal MPI error! cannot call multiple GPUs",
    "original_post": {
      "author": "Qiang An",
      "date": "Feb 28, 2019, 3:53:31AM",
      "content": "Hi guys,\nDo anyone happen to know how to address the error as shown in the attached figure. I want to run my 3D SAR TWRI simulation using seven GPUs available at hand. I follow the MPI and GPU usage instruction. But I got an \"internal MPI error\" all the time, which tells \"FAILspawn not supported without process manager\". I cannot find any useful information on google. Any useful information would be greatly appreciated. Thank you.\nBest regards,\nQiang An"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2019, 4:01:15AM",
        "content": "Qiang,\n\nIt most likely means your MPI does not support the MPI.Spawn mechanism that gprMax uses. Which MPI are you using, IntelMPI, OpenMPI etc... ? There is another MPI implementation in gprMax that you can try if you like. It is not documented and is really only for testing purposes. You need to use it with mpirun, e.g.\n\nmpirun -n 8 python -m gprMax myinputfilename.in -n 54 -mpialt -gpu\n\nwhere the -n argument for mpirun is the number of MPI tasks, i.e. a master + the number of GPUs in your case. The -n argument given after the input filename is the usual number of times you want to run the model (usually number of A-scans).\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Qiang An",
        "date": "Feb 28, 2019, 8:11:46AM",
        "content": "Hi Craig,\nThanks for your quick response. I am using MS-MPI actually. I tried you suggestion but got \"found no executable\" error information.\nThen I replaced the \"mpirun\" with \"mpiexec\" and it worked. I could use all GPU resources now.\n\n\nHowever, due to the size of the simulation, I still cannot got any result for the present. I originally thought the model would be partitioned and distributed to different GPUs. However, it seen not to be the case based on the screenshot below.\n\nSo I think I still need to reduce the size of the model. Anyway, my problem has been solved and thank you so much for your time and help. \nBest wishes,\nQiang An"
      },
      {
        "author": "Qiang An",
        "date": "Feb 28, 2019, 8:23:28AM",
        "content": "Hi Craig,\nThere seem to be some wrong with the image display. Please found in this updated reply the corresponding images.\nThanks,\nQiang An"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2019, 10:09:00AM",
        "content": "This is expected with MPI as the printed output will be interleaved as each MPI tasks progresses in parallel.\n\nCraig"
      },
      {
        "author": "Qiang An",
        "date": "Feb 28, 2019, 11:29:50AM",
        "content": "Hi Craig,\nThank you so much for your help. My simulation is running now on 7 GPUs. It's really accelerate the simulation process significantly. Thank you so much for the wonderful work.\nBest regards,\nQiang An"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2019, 11:31:23AM",
        "content": "7 GPUs! Wow! Nice.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fG4yfvbB8L4",
    "title": "Adding pml boundaries inside the model",
    "original_post": {
      "author": "Christian Wheeler",
      "date": "Apr 28, 2024, 3:11:51AM",
      "content": "I want to create a model of a horn antenna, and when making a coaxial cable, I want to control a section with no waveform leakage, and I want to include a pml boundary, how do I set a pml boundary inside the model"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 29, 2024, 9:24:31AM",
        "content": "Its functionality we have discussed, i.e. the ability to use PML material anywhere in a model, however, it is not yet implemented. Something for the future.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Christian Wheeler",
        "date": "Apr 30, 2024, 1:42:12AM",
        "content": "Thank you very much for your help\nKind regards,\nTieyu Liu\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ozp4frmSxdM",
    "title": "Moving window fdtd (MV-FDTD)",
    "original_post": {
      "author": "Sajad Mohammadi",
      "date": "Aug 21, 2020, 5:39:26AM",
      "content": "hello Dear all\nI am a researcher and very interested in the numerical method such as finite difference time domain.\nThe results of my simulations and code show that the MW-FDTD method increases the computational speed by a factor of 4.\nBut I did not find any reference to refer to it and confirm it.\n I would like to know whether I have made a mistake in the simulation or does the MV-FDTD method really increase the computational speed compare to conventional FDTD?\nI would be grateful if you answer my question: Does the Moving window FDTD method increase the computing speed compared to the conventional FDTD method?\nin addition, our lab is closed due to Coronavirus,  I can not simulate again. I will be grateful if you help me.\nBest wishes\nPlease, guide me.\nthank you very much in advance.\nBest regard"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FnVwrUlQTT0",
    "title": "Query regarding the calculation of 1st surface reflection time and 1st object reflection time from A-Scan",
    "original_post": {
      "author": "Sumona Chatterjee",
      "date": "Jul 28, 2016, 3:51:10AM",
      "content": "Hi,\n\nHi,\n\nI have simulated the attached file for 20 Ascans. From the input file it is clear the 1st surface reflection time is 1 nanosecond and 1st object reflection time would be 1.75 nanosecond when the source and receiver is just above the object position. I have taken 13th A scan to calculate them.But the result from graph is coming as 1.4 nanosecond and 2.65 nanosecond.\n\nFor object reflection time calculation I generated 13th Ascan and then 1st A-Scan. Then I subtracted 1st A-Scan from 13th A-scan and,the 1st pick time of the resultant graph, I considered as 1st object reflection time for 13 th A-Scan.\n\nI have also tried to simulate the file without sand and concrete to have the time for source to receiver wave.But it is also coming as 1.4 ns.\n\nI could not able to understand why such discrepancies are coming.\nPlease help.Thanks in advance. \n\nInput file and output graphs are attached here."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 28, 2016, 5:27:50AM",
        "content": "Sumona,\n\nPlease read the warning messages that gprMax gives you. It will have warned you that you might have numerical dispersion in your model, and advised a new spatial step. Your spatial step of 1cm is not small enough for the frequencies and materials present in your model. You can read about numerical dispersion in the documentation - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretisation and view the recent screencast - https://youtu.be/zaf0w8Np2cU\n\nAlso check the geometry of your model. Your target/object 'concrete' box which is embedded in your 'sand' is in the PML region of model in the z-direction. You have 10 cells of PML (the default) and you should allow another 10 cells before placing any targets/sources/receivers.\n\nTry to resolve these problems first.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jul 28, 2016, 12:20:20PM",
        "content": "Hi,\n\nI have corrected the input file as per your guidance.According to my input file, now the 1st reflection time from surface is 1 ns and 1st reflection time from top of object is 3.236 ns.\nBut from simulation,results are coming as 1.41 ns and 4.12 ns.\n\nI have followed the procedure mentioned in my previous mail.When I calculated the theoretical values, I considered the point source is above the concrete box(in 13th A-Scan).\n\nInput files are attached.\nThanks in advance."
      },
      {
        "author": "Craig Warren",
        "date": "Jul 28, 2016, 1:02:41PM",
        "content": "Sumona,\n\nHave a look at the source waveform you are using (look at the screencast demo for help). It starts smoothly, with a first break around ~0.4 ns. Therefore I would expect the reflection from the surface of sand to arrive at the receiver at ~1.4 ns which is what you are seeing.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jul 28, 2016, 1:51:58PM",
        "content": "Hi,\n\nThanks for your feed back.So, when I would like to calculate the surface reflection time from generated A scan,I need to consider the first break point of source waveform.\n\nCan you please elaborate what does the first break point of source waveform signify?\n\nAnother query, how to calculate the 1st reflection time from the top of the object from generated A-Scan?\n\nThanks."
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jul 28, 2016, 11:27:38PM",
        "content": "For your information, I want add how I calculated the object reflection time from A Scan in following steps:\n1.I generated 1st A scan: considered the A-Scan is having only surface reflection.\n2. I generated 13th A Scan where the  transmitter and receiver position are just above the surface which is just above concrete box:Considered 13th Ascan is having reflections from both surface and object(concrete box).\n3. Subtract 1st A-scan from 13th A-Scan to remove surface reflection from 13 th A-Scan and plot the result graph.\n4.I considered the 1st pick of the wave in result graph is showing the 1st object reflection time.\n\nIn each A-scan,I have dealt with Ex field.\n\nUsing above process I got 1st object reflection time is 4.12 ns. However,form input file I was getting 3.236 ns for the same.I considered the velocity of wave inside  the sand\n(relative permittivity 5) is v=(3*10^8) /5^0.5  \n\nI am not able to understand whether I have done mistakes somewhere because some discrepancy is coming between simulation result and theoretical result from input model.\n\nIf you kindly clarify my doubts,It would be very helpful. Thanks in advance"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 29, 2016, 5:40:17AM",
        "content": "Hi Sumona,\n\nYou can see that the source waveform (the Ricker) you are using falls/rises smoothly away from having zero amplitude at t=0ns. It is at around ~0.4ns that you visually notice the waveform departing from zero amplitude, so you need to account for this when calculating times for reflections.\n\nYour method for looking only at the reflection from the concrete box object is not correct. The transmitter (tx) and receiver (rx) should be in the same location in the models when you subtract one A-scan from another. So run a model with everything in it and the tx and rx at the locations above the concrete box, i.e. 13th scan locations. Then subtract from this A-scan the A-scan of exactly the same model, just without the concrete box. This will leave you with only the response from the concrete box. Post plots of the A-scans from the full model, and only the concrete box here when you have done that.\n\nYes, you are correct to look at the Ex field component, as your source is polarised in the x direction.\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jul 30, 2016, 2:38:33AM",
        "content": "Hi,\n\nI have done simulations for 13th Ascan with concrete box and 13th Scan without concrete box and recorded the plots.\nThen I subtract the 2nd one from 1st one as you advised and also recorded the plot.\n\nThe plots are attached herewith as required.Also I am attaching the work space containing all the Ex field data sets I used.\n\nThanks."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 1, 2016, 5:38:50AM",
        "content": "Hi Sumona,\n\nThose plots seem reasonable. I'd expect the start of the reflection from the concrete box at ~3.95ns:\n\nIn air: t1 = 0.3 / 3x10^8 = 1ns\nIn sand: t2 = 0.3 / (3x10^8 / sqrt(6)) = 2.45ns\nDelay in starting source waveform: t3 = ~0.5ns\nt = t1 + t2 + t3 = ~3.95ns\n\nThe shape of the response from the concrete box will be a mixture of the reflection from top and bottom surfaces.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Aug 1, 2016, 7:20:19AM",
        "content": "Hi,\n\nI have taken the sand's relative permiittivity as 5 in the input file I worked with.\nSo in sand the value of t2 should be: \nIn sand: t2 = 0.3 / (3x10^8 / sqrt(5)) = 2.236 ns\n\nbut in your calculation you took relative permittivity 6 instead of 5 for sand.According to my input file the the concrete box has relative permittivity of 6.\n\nI am not able to understand why relative permittivity '6' is taken instead of 5 for sand ?\nPlease clarify.\n\nmy input file is attached.Thanks."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 1, 2016, 7:25:50AM",
        "content": "My mistake. Obviously t2 should use whatever you use for the permittivity of the sand, so in your case 5. This makes t = ~3.74ns so rest of my comments still stand.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BEGQdDt8vGU",
    "title": "Question about output data",
    "original_post": {
      "author": "朱东晟",
      "date": "Dec 17, 2019, 10:50:05AM",
      "content": "Dear all,\n\nI have a question about the output data。Below is the input file for my model：\n\n#title: FMCW through wall 2D model\n#domain: 1.2 1.3 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 1e-7\n#output_dir: ./FMCW_throughWall_2D_model/\n\n#material: 15 0.1 1 0 wet_concrete\n#material: 20 0.05 1 0 dry_concrete\n\n\n#waveform: ricker 1 1.5e9 my_ricker\n#excitation_file: ../sources/1.0~3.0Ghz_FMCW_Tsweep_1e-08_T_1e-06.txt\n\n\n#hertzian_dipole: z 0.6 1.25 0 FMCW\n#rx: 0.65 1.25 0 rx1 Ez\n#rx: 0.55 1.25 0 rx2 Ez\n#rx: 0.70 1.25 0 rx3 Ez\n#rx: 0.50 1.25 0 rx4 Ez\n#rx: 0.75 1.25 0 rx5 Ez\n#rx: 0.45 1.25 0 rx6 Ez\n\n\n#box: 0 1.2 0 1.2 1.3 0.002 free_space\n#box: 0 0 0 0.1 1.1 0.002 free_space\n#box: 0 1.1 0 1.2 1.2 0.002 dry_concrete\n#box: 1.1 0 0 1.2 1.1 0.002 free_space\n#box: 0.1 0 0 1.1 0.1 0.002 free_space\n#box: 0.1 0.1 0 1.1 1.1 0.002 free_space\n\n#box: 0.5 0.6 0 0.7 0.7 0.002 pec\n\n#geometry_view: 0 0 0 1.2 1.3 0.002 0.002 0.002 0.002 free_space n\n#geometry_view: 0 1.1 0 1.2 1.2 0.002 0.002 0.002 0.002 concrete_wall n\n#geometry_view: 0.5 0.6 0 0.7 0.7 0.002 0.002 0.002 0.002 pec_box n\n\n#python:\nfor i in range(1, 1001):\n    print('#snapshot: 0 0 0 1.2 1.3 0.002 0.002 0.002 0.002 {} snapshot{}'.format((i/10)*1e-9, i))\n#end_python:\n\nThe waveform I used is FMCW, as follows\ntime FMCW\n0.000000000000000000e+00 0.000000000000000000e+00\n4.717309999999999819e-12 2.964936908985054548e-02\n9.434619999999999637e-12 5.930058290385671615e-02\n1.415193000000000026e-11 8.892740982404628847e-02\n1.886923999999999927e-11 1.185035165581065503e-01\n2.358654999999999829e-11 1.480024914143050208e-01\n2.830386000000000053e-11 1.773978678435167156e-01\n\nThe custom waveform amplitude range is -1 to 1, but the output amplitude range is about -5000 to +5000. I'm confused, I don't know  what went wrong.\n\nRegards.\nSimon"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 17, 2019, 4:42:42PM",
        "content": "Dear Simon,\n\nYou are doing a 2D simulation using a theoretical line source as excitation for which you specify the variation of current on it. Your output is an electric field component in V/m. What did you expect the amplitude range to be and why? If you want to get more info on the range of field amplitudes radiated by a line source study the analytical solution for a line source in free space which should help you understand the expect field values.\n\nYou should be aware that you are not modelling any real antennas on a 2D model.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/D9L6M23k9X4",
    "title": "IndexError: list index out of range",
    "original_post": {
      "author": "carlao1992",
      "date": "May 31, 2017, 8:57:05PM",
      "content": "Hi gprMax,\n\nI'm having some issues when I try to run the models. I've already checked the input file and it seems fine and up to date.\nPlease could you help me finding a solution for this?\n\nPS: I'm writing from Perú and I really appreciate what you have done creating this tool :D\n\n\n(gprMax) C:\\Users\\Carlos\\gprMax>python -m gprMax user_models/cylinder_Ascan_2D.i\nn\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domai\nn (FDTD) method\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                       v3.0.19 (Bowmore)\n\n Copyright (C) 2015-2017: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the\n  terms of the GNU General Public License as published by the Free Software\n  Foundation, either version 3 of the License, or (at your option) any later\n  version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY\n  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n  A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with\n  gprMax.  If not, see www.gnu.org/licenses.\nIndexError: list index out of range\n\n(gprMax) C:\\Users\\Carlos\\gprMax>\n\nThanks,\n\nCarlos"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 31, 2017, 9:01:11PM",
        "content": "Hi Carlos,\n\nWelcome to the gprMax community forum!\n\nIt looks that you are trying to run one of the examples. Have you changed the input file? If you have done so you should post it here. \n\nAntonis"
      },
      {
        "author": "carlao1992",
        "date": "May 31, 2017, 9:12:07PM",
        "content": "Hi Antonis,\n\nThank you for the welcoming!\n\nYes I'm trying to learn how to use this tool. I haven't change the input file, I actually don't know why this is happening. I've tried with other files and the program shows the same error message.\n\nI'm attaching a picture for your review.\n\nThanks a lot,\n\nCarlos"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 1, 2017, 4:54:31AM",
        "content": "Hi Carlos,\n\nThe error message is rather clear. The file cannot be found. This is because the file you are typing is not there as it is not correctly identified. There is NO 'cylinder_2D.py' example but a 'cylinder_2D_py.in' \n\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GnSs9klU8ec",
    "title": "Problem with the enviroment - activating gprMax",
    "original_post": {
      "author": "Nicolás Zilberstein",
      "date": "Dec 17, 2019, 7:33:22PM",
      "content": "Hello,\n\nI had some issue with the conda enviroment. In particular, I update python because I needed to use some new functions. After this, when I tried to activate the enviroment, I have this message:\n\nCould not find conda environment: gprMax\nYou can list all discoverable environments with `conda info --envs`.\n\nIt is strange because in the list the enviroment appears. Did someone have the same issue?\n\nVery regards."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 20, 2019, 5:39:09AM",
        "content": "Haven't seen this. Probably easiest just to delete and re-create the environment.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dNml6vzt230",
    "title": "Landmine library",
    "original_post": {
      "author": "Hangilro Jang",
      "date": "Aug 11, 2021, 3:55:09AM",
      "content": "Hello. developers~\n\nI am waiting for the landmine library for more than 1 yr.\n\nWhen can I get the library?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 11, 2021, 4:46:15AM",
        "content": "Dear Hangilro Jang,\n\nThe landmine library will likely be made available with the next version (v.4) of gprMax. We can't say for sure when this will be released. The people who develop gprMax largely have to work in their own time to do so, so please be patient!\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eRyRxD4GzD8",
    "title": "time step for waveform",
    "original_post": {
      "author": "Lavanya akila",
      "date": "Feb 20, 2019, 5:16:58AM",
      "content": "Hi Craig,\n\nWe have option for time step for plotting inbuilt-waveform,\n  python -m tools.plot_source_wave sine 1 1e9 3e-9 1e-12\n\nLikewise, Do we have option to choose time step for source waveform in the following input command?\n\n #waveform: sine 1 1e9 my_sine\n\nWith thanks,\nLavanya Govindan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 21, 2019, 4:21:38AM",
        "content": "Hi Lavanya,\n\nAll builtin waveforms use the timestep of the model which is calculated internally for you based on the CFL limit - see the docs for further info - http://docs.gprmax.com/en/latest/gprmodelling.html#basic-concepts\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Lavanya akila",
        "date": "Feb 27, 2019, 4:33:49AM",
        "content": "Thanks for the clarification. I would like to know does relative permittivity of medium impact the time step?"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 27, 2019, 7:00:36AM",
        "content": "The material with maximum relative permittivity in your model and the highest frequency of interest (not the centre frequency) affect the spatial resolution (to avoid numerical dispersion), which in turn will dictate the time step. See our docs for some basic advice http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization and I'd also encourage you to do some reading of the FDTD method to understand the fundamentals.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1WOv1P6r-sQ",
    "title": "Issues related to antenna stand-off mode",
    "original_post": {
      "author": "Peleg Haruzi",
      "date": "Jun 28, 2024, 6:21:36AM",
      "content": "Hi,\n\nI would like to test the antenna stand-off mode with gprMAx. And to know of the stengths of gprMax in this scenario, or any possible limitations.\n(1)\nDoes gprMax consider interactions between the built-in antenna (not point antenna) and the environment at the reactive near-field ?\n(2)\nAlso, when a built-in no-point antenna is used, may one expect the fields to prpogate in space (as function of distance and angles) as the theory states, i.e. first in the reactive near-field region, and then in the far-field region ?\n\nThanks !\nPeleg"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 9, 2024, 4:02:54AM",
        "content": "Yes - gprMax is a full wave simulator so capture near, reactive, far-field effects.\n\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/b5xarMD52nw",
    "title": "Feeding point in an open-ended coaxial probe",
    "original_post": {
      "author": "Alberto Battistel",
      "date": "Nov 29, 2023, 4:30:38PM",
      "content": "I want to simulate an open-ended coaxial probe which, in my case, is simply an SMA connector. The connector's end exposes the inner conductor surrounded by the dielectric. Around the dielectric, there is a metal flange that composes the body of the connector.\nHow should the feeding point be simulated?\nAt the moment I created a 1 cm long PEC cylinder with a dielectric cylinder inside and a metal wire at the center. On the top, the dielectric cylinder is one cell shorter than the PEC cylinder which makes the connector metallically closed on one side. On the bottom, the dielectric is aligned with the PEC which makes for the open-ended side of the probe. The flange is simulated as a PEC box around the PEC cylinder.\nWhat should be used as feeding: a transmission line or a voltage source?\nWhere should the feeding be placed? Between the PEC top and the center wire? Should only the feeding be placed instead of the center wire?\nAny other suggestion?\nThanks for the help"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 30, 2023, 5:54:02AM",
        "content": "Hi Alberto\n\nYou can use either a transmission line of a voltage source. If you run on a GPU a voltage source is the only option. An SMA connector is a cylindrically symmetric structure. Ideally the inner PEC wire connects in the middle and the outer sheath on the outside. In essence you use a coaxial line and not a two-wire transmission line. You can try a symmetric excitation to see if this work better. In essence you can use 4 voltage sources at 90 degrees each properly weighted. We have not tried this and at the ed it might not make much difference but trial and error will give you the best outcome of how to excite this. \n\nBest\n\nAntonis\n"
      },
      {
        "author": "Alberto Battistel",
        "date": "Dec 1, 2023, 7:43:23AM",
        "content": "Hi Antonis,\nthanks for the reply.\nShould I still close one side of the SMA connector with a PEC?\nI guess that the position of the voltage sources represents the position of the calibration plane of the VNA.\n\nBest,\nAlberto\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/YIs86FGUAgU",
    "title": "GPU rx receiver",
    "original_post": {
      "author": "xianyang gao",
      "date": "Jan 25, 2018, 10:32:05AM",
      "content": "Hi everyone,\n\nI am using GPU to accelerate the simulation. Unfortunately, I can only rx commond as a receiver which cannot control the impedance of the receiver, while transmission_line receiver could.\nI looked into the code and found the code doesn't support transmission_line for GPU.\n\nIs it tough to add this function to gprMax? I thought to change the code by myself but I cannot fully understand gprMax code. I think it will be better if anyone can add transmission_line function for GPU.\n\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 26, 2018, 2:59:25AM",
        "content": "Hi Xianyang,\n\nAdding the transmission line to the GPU solver is not trivial, which is why we have not yet done it. \n\nAre you simply needing to add a resistive load to your receiver? If so, then the effect of this will just be scaling the output voltage (electric field). If you require the transmission line to calculate s-parameters at the receiver then this can still be done using a receiver (#rx) by selecting the correct magnetic components that enable you to calculate the current at the output.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Mar 28, 2018, 6:23:36AM",
        "content": "Dear Craig,\n\nIt is not just simply add a load. It is a antenna feeding problem. 50 Ohms rx receiver will cause significant ripples to the performance of my antenna. Therefore, I need to use 200 Ohms transmission line to control the radiation pulse.\nI think this is a essential function for gprMax in GPU. Could you please add transmission line to GPU?\n\nBest regards\nXianyang Gao"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 28, 2018, 7:21:31AM",
        "content": "Hi Xianyang,\n\nAs I said before, adding the transmission line to the GPU solver is not a trivial problem to solve, and currently we don't have the time to look at adding it.\n\nIn any case, I am still not clear what you are trying to do - do you want to use a transmission line on the transmitter (feed) or receiver part of your antenna?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Mar 28, 2018, 7:37:47AM",
        "content": "Dear Craig,\n\nI am trying to use a transmission line on both transmitter and receiver part. Any other solution for this problem? Can I use rx to create a 200 Ohms feed?\n\nThank you very much.\nXianyang"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 28, 2018, 8:39:47AM",
        "content": "OK, so you want to use the transmission line on both transmitter and receiver, but can you explain why you need to do so for both? Is it because you want to calculate s-parameters at both the transmitter and receiver? The reason I ask these questions is that there are other methods to introduce a resistive load at the transmitter and receiver, i.e. via the voltage source command with a resistive load, and by inserting a resistive material at the receiver. If you can explain what you are trying to do more fully, then we may be able to help.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Mar 28, 2018, 9:01:55AM",
        "content": "Dear Craig,\n\nI know S parameters can be calculated using voltage. But this is not the reason I chose transmission line to feed the antenna. Please look at the picture attached. This is a comparison of the time domain results of a transmitter antenna and a receiver antenna fed by different transmission lines, facing each other in the air at a distance of 100 mm.\nI need to control the impedance of the feed to control the pulse shape of the antennas. In gprMax, only transmission line supports the change of feed impedance, while others like rx and voltage source only support 50 Ohms.\nIf I can use rx and voltage source to match 250 Ohms antennas, please could you tell me how?\n\nFor the receiver part, I just put a 0 amplitude signal into the transmission line, so that it can perform as a receiver, while the transmitter I put 1 v amplitude signal.\n\nIn a word, I want to change the impedance to feed different antennas and only transmission line support this.\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 28, 2018, 9:11:46AM",
        "content": "Hi Xianyang,\n\nYou can use a voltage source with any resistance you want. It is not fixed to 50 Ohms.\n\nAntonis"
      },
      {
        "author": "xianyang gao",
        "date": "Mar 28, 2018, 9:35:55AM",
        "content": "Dear Antonis and Craig,\n\nThank you very much!\n\nI did not notice that before...It can control the impedance and it can be used in GPU!\n\nBest regards\nXianyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sZ02_8usH0g",
    "title": "How to best use this forum",
    "original_post": {
      "author": "Craig Warren",
      "date": "Aug 23, 2017, 6:34:07AM",
      "content": "Its good to see that as more and more people are using gprMax the use of forum is also growing! So I thought it was good time to post some advice on how to get the best from this group. \n\nThe intent of the forum is to be a place where people can ask general questions on using gprMax, and discuss problems and solutions together. At the moment it is mainly Antonis and I providing answers, but again as the community grows and people become more familiar with the software, hopefully others will start to provide answers as well as questions. We realise that people come to use gprMax from many different backgrounds and with different levels of experience and skill. Whilst we are happy to help all, we have put a significant effort into creating the documentation (the User Guide) that accompanies gprMax - http://docs.gprmax.com/ It contains some brief general guidance on using the Finite-Difference Time-Domain (FDTD) method for simulating GPR, a lot of information on how to use gprMax, a range of different example models, and a detailed worked example of a simple 2D simulation. gprMax requires some basic understanding of GPR and the FDTD method. There are plenty of resources available online, as well as books on these subjects to help you get started, for example:\n\nDaniels, D. J. (2005). Ground penetrating radar. John Wiley & Sons, Inc.\nTaflove, A., & Hagness, S. C. (2005). Computational electrodynamics: the finite-difference time-domain method. Artech house.\nKunz, K. S., & Luebbers, R. J. (1993). The finite difference time domain method for electromagnetics. CRC press.\n\nSo if we feel your question can be answered in the User Guide or is a very basic question on GPR or FDTD, then we probably won't respond directly to your post - we are both busy academics, and whilst we'd love to help everyone with their model we just don't have the time!\n\nIf you find what you think is a bug in the software please report it (with an example) using our Issue tracker on GitHub - https://github.com/gprMax/gprMax/issues This enables us to better manage, test, and fix any issues.\n\nKind regards,\n\nCraig and Antonis"
    },
    "responses": [
      {
        "author": "qwyuan",
        "date": "Dec 27, 2017, 12:47:32PM",
        "content": "Hi, Professor Craig\n\n        Would you like guide me that when i use command 'rx_array' to receive simulating signal how to read the data in different rx-points in every 'src-point'?"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 2, 2018, 5:36:11AM",
        "content": "qwyuan,\n\nPlease repost your question in a separate thread.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/64HWsgxonOs",
    "title": "Bandwidth of the Ricker signal",
    "original_post": {
      "author": "Orhan Apaydın",
      "date": "Dec 26, 2022, 6:55:02AM",
      "content": "Hello everyone,\n\nI prepare a simulation and I used Ricker waveform by using this command;\n\n#waveform: ricker 1 0.8e9 my_ricker\n\nI wonder that what is the Bandwidth or Pulse width that signal? I wrote just central frequency (0.8GHz), but the signal should has a bandwidth also.\n\n-Orhan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 3, 2023, 5:36:06AM",
        "content": "Dear Orhan,\n\nSee our docs which give the form of all the builtin waveform shapes - https://docs.gprmax.com/en/latest/plotting.html#plot-source-wave-py\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/As_rv05xhqI",
    "title": "how does the edge resistor works in gprMax",
    "original_post": {
      "author": "xianyang gao",
      "date": "Mar 4, 2019, 5:47:27AM",
      "content": "Dear everyone,\n\nI intended to use resistors in gprMax. I have read the documents(taguchi part), in which several resistors were generated using edge.\nHowever, I cannot totally understand why these code can generate a certain value resistor.\n\nFor example if I want to get a 100 ohms resistor from a 4 mm-length edge. The cell size is 0.002. \nIs the code below correct? What is the permittivity of the resistor material should be? Why such code can generate certain value resistor?\n\ndxdydz = dx_dy_dz(0.002, 0.002, 0.002)\nVres = 100/2 #each edge resistor cover 2 cells\nrescond = ((1/Vres)*(dxdydz[1] / (dxdydz[0] * dxdydz[2]))) / 2\nmaterial(1, rescond, 1, 0, 'res')\nedge(rx_pos[0], rx_pos[1], rx_pos[2], rx_pos[0], rx_pos[1], rx_pos[2] + 2 * dxdydz[2], 'res')\n\nThank you very much for your help.\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 4, 2019, 6:36:17AM",
        "content": "Hi Xianyang,\n\nThe edge command allows you to specify material properties for one of the vertices of the Yee cell. This can be used to set conductivity to approximate the resistance of a resistor. The permittivity would most likely be that of free space. \n\nSo for your example you are trying to calculate the conductivity for a cell edge based on the fact each cell is 2mm and you want to distribute your resistance of 100 ohms over 2 cells. I also assume it is a y-directed resistor? Electrical conductivity is related to resistance by:\n\nsigma = (1 / R) * (L / A), \n\nwhere sigma is the electrical conductivity, R is resistance, L is length, A is area.\n\nN.B In the code snippet you quote, the resistor was being modelled using two parallel cell edges, hence the divide by 2 at the end of the recond variable (see comment in original code snippet).\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Mar 4, 2019, 8:36:00AM",
        "content": "Dear Craig,\n\nI am a little confused by sigma = (1 / R) * (L / A) while the edge is a infinite thin line. How can such formula based on cells represent the conductivity of an thin edge?\n\nBest regards\nXianyang"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 4, 2019, 6:17:35PM",
        "content": "Hi Xianyang,\n\nThere is nothing infinitely thin in FDTD or in most other numerical methods. FDTD is about arranging field components in a way the facilitates the simple approximation of a digitised version of Maxwell's equations. Properties are assigned in a piecewise manner at field components. It is assumed that do not vary across the edge that are assigned at and that there is no variation in an area perpendicular to that edge and with it in the centre. So, for a z-directed edge that represents a volume DZ x (DX x DY). The L in the formula will be the NxDZ and the A is DX x DY.\n\nHope this helps.  I can recommend also to consult some of the classic books on FDTD that discuss the inclusion of lump circuit components in FDTD\n\n\nAntonis"
      },
      {
        "author": "xianyang gao",
        "date": "Mar 5, 2019, 4:46:49AM",
        "content": "Dear Antonis and Craig,\n\nThank you very much. These explanations are very helpful.\n\nBest regards\nXianyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/m3jtzImz2aU",
    "title": "Advice on full field outputs",
    "original_post": {
      "author": "Owen Mays",
      "date": "Apr 26, 2020, 1:33:01PM",
      "content": "Hi all,\n\nThanks for the great program! I'm interested in performing analysis on the full (2-D or 3-D) E field within the domain, and I saw this question about importing values from snapshots into Matlab: https://groups.google.com/forum/embed/?place=forum/gprmax&gprmax.com&showsearch=true&showpopout=true&showtabs=false&parenturl=http%3A%2F%2Fwww.gprmax.com%2Fforum.shtml#!topic/gprmax/vga2g99k4R8\n\nFor exporting fields at a large number of timesteps, I'd like to avoid passing everything through Paraview as a (manual) intermediate step, so I'd like to try writing a new output function that can dump 2D or 3D fields to HDF5.\n\nI have two follow-up questions:\n\n1. Can you provide some guidance on \"contributing another file writer to the snapshot module\"? I'd like to understand the flow of gprMax execution. What triggers the saving of a snapshot? (Which function calls snapshot.write_vtk_imagedata()?). I see that snapshots.py has a write_vtk_imagedata() function. I'm guessing I should define a write_hdf5_fielddata() function to call instead. Should I define a new command for the input file, so instead of #snapshot there's a #fieldoutput command or something like that?\n\n\n2. Where should I look to investigate implementing \"rolling\" analysis of field data? For example, if I want to calculate the Fourier transform of the E field over the duration of the experiment, I could save a snapshot at every timestep and then perform the DFT afterwards, but that's slow and a huge amount of data. I'd rather perform a rolling DFT:\n\nDefine frequency domain E field variables E_f_real and E_f_imag, and at each timestep n just do\n\nE_f_real = E_f_real + Ez*cos(2*pi*f*n*dt)\nE_f_imag = E_f_imag + Ez*sin(2*pi*f*n*dt)\n\nThis way I only store 1 copy of the frequency domain fields, and I don't need to save the full snapshot to disk every timestep.\n\nIf I wanted to implement this type of \"live\" math on field values, where would be the right place to do that?\n\nBest regards,\nOwen"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 27, 2020, 5:11:19AM",
        "content": "Dear Owen,\n\nWelcome to the forum! \n\nInteresting question- it is something we have discussed for projects that we are working on. The main consideration is the trade-off between simulation speed and functionality. At the moment snapshots are held in memory - host memory if CPU solving is used, and GPU memory if they'll fit and GPU solving is used. They are then written to VTK file after the simulation is complete. The reason for holding them in memory until the end of the simulation is speed, writing to file when each snapshot is complete is slower. This approach works when snapshots are not that large and there are not that many of them required. If you need to snapshot most of the volume of the domain and at frequent iterations then it becomes much more demanding on memory.\n\n1. Can you provide some guidance on \"contributing another file writer to the snapshot module\"? I'd like to understand the flow of gprMax execution. What triggers the saving of a snapshot? (Which function calls snapshot.write_vtk_imagedata()?). I see that snapshots.py has a write_vtk_imagedata() function. I'm guessing I should define a write_hdf5_fielddata() function to call instead. Should I define a new command for the input file, so instead of #snapshot there's a #fieldoutput command or something like that?\n\nThe snapshots are written to file after the simulation completes in the 'model_build_run.py' module - https://github.com/gprMax/gprMax/blob/a966d1679b9ca85fa846aef1a1c72a5ba77d46b0/gprMax/model_build_run.py#L389 I think your approach of writing a 'write_hdf5()' function in the 'snapshots.py' module is fine. You may need to consider how the snapshot data is stored in memory - https://github.com/gprMax/gprMax/blob/a966d1679b9ca85fa846aef1a1c72a5ba77d46b0/gprMax/snapshots.py#L129 - and do some conversion to a suitable structure for the HDF5 file. If you are happy to share your work via Pull Requests, I am happy to offer guidance as you go, and it would certainly be useful to discuss the structure and meta-data of the HDF5 file. I don't think a new hash command is necessary, I would suggest we could look at adding a flag to the existing snapshot one for either VTK or HDF5 output.\n\n2. Where should I look to investigate implementing \"rolling\" analysis of field data? For example, if I want to calculate the Fourier transform of the E field over the duration of the experiment, I could save a snapshot at every timestep and then perform the DFT afterwards, but that's slow and a huge amount of data. I'd rather perform a rolling DFT:\n\nCertainly possible, but again I think it would be worth doing some investigation of performance first. In general what we have found is that if you start doing extra work in the time loop of the simulation, then things slow down quickly. So I'm not sure whether an on-the-fly DFT would be quicker than saving everything to memory/file and doing it at the end. Doing on-the-fly analysis would require a lot more modification of the code. The fields are stored in a FDTDGrid class in 'grid.py' and are updated with Cython functions (for CPU solving) or CUDA functions (for GPU solving) in 'field_updates_ext.pyx' and 'field_updates_gpu.py' respectively.\n\nFinally, I am working on the next release of gprMax which will add new features (including sub-gridding) and has a lot of change to the underlying structure of the code to ease future developments. I hope to get this finished in the next month or so. Therefore, depending on how desperate you may want to wait for this release.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Owen Mays",
        "date": "Apr 28, 2020, 10:53:10PM",
        "content": "Thank you for the explanation, Craig.\n\nI understand your concerns about adding additional computation in the time stepping loop...it may be relatively easy to add the feature, but getting it to work efficiently is another matter.\n\nIn the scenario that a user needs a some kind of integration over all time steps over a large portion of the domain, holding snapshots so as to do the calculation as a post-processing step would require an impossible amount of memory. (And if snapshots were written out to disk, the speed penalty would be intolerable). In this scenario, the rolling calculation provides the same result at the expense of 1 additional array the size of the domain stored in memory, plus the computational cost of computing the rolling quantity.\n\nI suppose there are 3 questions:\n\n1. For users who need this functionality, can it be implemented in a way that is efficient enough? In this scenario, some performance penalty would be acceptable (exactly how much is another question...)\n2. Can this feature be implemented in a way that it has no impact on users who do not activate it? I expect this would be extremely important for an infrequently-used feature.\n3. Does anyone actually need this? gprMax has lasted a long time without this feature :-)\n\nI will wait until the next version before looking at this in detail. It's mostly a curiosity, and it can certainly wait until the code has been reworked.\n\nI do have one more question for you. If the answer is \"this will change in the next release\" then don't bother giving me a detailed answer:\n\nWhat would be the necessary steps to implement this just to test?\n\nI would need to define a new array to hold the rolling values. Maybe this could be another subclass of Grid in grid.py? It would not need most of the initialization that's built into FDTDgrid, and it would not need the coeff_arrays.\n\nI would need to add code to perform the calculation. This could follow the same approach that's used in model_build_run.py to check for snapshots and call snapshots.store() (for example, I could define \"rolling_quanitity.update()\"), but I don't think that code is compiled cython. For speed reasons, maybe better to modify field_updates_ext.pyx to perform the updates to this new array at the end of every time step. The existing FDTD updates to the E fields would be unaffected.\n\nI would need modify model_build_run.py so that this new quantity gets saved at the end of the simulation.\n\nI'm not familiar with cython...If I edit field_updates_ext.pyx, will the new behavior be added automatically once I rebuild gprMax? Of course if I do that, this new function that's performed on the E field is built in. If the user wants to change that function they have to recompile gprMax. For the purposes of benchmarking the speed of this idea that's ok, but it's not a good solution for long term use.\n\n\nBest regards,\nOwen"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QgopRHkMBX8",
    "title": "help on how to use doamusic package https://github.com/yump/doamusic",
    "original_post": {
      "author": "Naol Worku",
      "date": "Jun 6, 2018, 2:46:49AM",
      "content": "Hello there? is there any one who are willing to help me on how to use doamusic package  mentioned at https://github.com/yump/doamusic...im doing my thesis on Detection of Burried metal using SAP Array techniques and i simulate it using gprMax...so i need help on how to read hdf5 file using MUSIC algorithm and plot it!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2018, 5:46:07AM",
        "content": "Naol,\n\nThis is a more a question for users of the doamusic package. The structure of the HDF5 output file from gprMax is in the docs - http://docs.gprmax.com/en/latest/output.html#field-s-output\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/emIBDG-ll3A",
    "title": "Why is the number of iterations different from the number of grids within the propagation distance in the x or y direction within the time window",
    "original_post": {
      "author": "chi gao",
      "date": "Feb 19, 2025, 3:29:15AM",
      "content": "#title: No reflective layer\n#domain: 3 1 0.003\n#dx_dy_dz: 0.003 0.003 0.003\n#time_window: 10e-9\n#material: 1 0 1 0 air\n#waveform: ricker 1 10e8 my_ricker\n#hertzian_dipole: z 1.4 0.5 0 my_ricker\n#rx: 1.6 0.5 0\n#box: 0 0 0 3 1 0.003 air\n#geometry_view: 0 0 0 3 1 0.003 0.003 0.003 0.003 gkone n\nWhy is the iteration count of my model file 1415 times instead of 1000 times? My model is relatively simple, and the propagation distance of waves should be 3m within 10 nanoseconds. My dx is 0.003, and there are 1000 grids in both the x and y directions. Why did it iterate more than 1000 times"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 19, 2025, 3:41:59AM",
        "content": "The answer is in the documentation: http://docs.gprmax.com/en/latest/gprmodelling.html#guidance\n\nThe tine step in FDTD is determined by the CFL stability condition. So, the time step in 2D is sqrt(2) smaller than the one you thought it should be and in 3D ii will be sqrt(3) smaller. So, sqrt(2)*1000 is exactly what you got rounded to the nearest integer step.\n\nAntonis\n"
      },
      {
        "author": "chi gao",
        "date": "Feb 19, 2025, 4:23:53AM",
        "content": "Thank you, Professor. I understand this question and appreciate your reply. Additionally, I have a more basic question. In this post, I have attached an in file. The waveform obtained from the simulation is not an idealized Ricker wave, and the waveform is asymmetric on both sides. At the same time, its amplitude is not 1. Why did the received waveform change in this way and what is the reason for it\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 19, 2025, 6:30:03AM",
        "content": "The answer to this question has to do with the radiation of the source which in the 2D case is a line source and in 3D will be a Hertzian Dipole. What you specify in a 2D model is the current waveform of the line source. This source will radiate an electromagnetic field that is not an exact replica of the current waveform. The amplitude you record at som other point is the Electric field at some distance and it is in V/m and not the same as the current on the source.\n\nTo understand these topics you need to study some basic electromagnetic theory and GPR fundamentals. The answers are there.\n"
      },
      {
        "author": "chi gao",
        "date": "Feb 19, 2025, 6:38:30AM",
        "content": "Thank you, Professor. Thank you for taking the time to reply. I have a general understanding of what you mean\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nkHFGmW_Ab4",
    "title": "Gain calculation",
    "original_post": {
      "author": "Nicolás Zilberstein",
      "date": "Feb 28, 2019, 10:01:26AM",
      "content": "Hello,\n\nI'm stuck with the calculation of an antenna's gain. I want to draw the radiation pattern, trying to use your script, but i can't understand how can i calculate the gain of the antenna. I tried to read from balanis book, and it is necessary the radiation power, but i don't know how to calculate. \n\nMy antenna is a microstrip with an ellipse.\n\nBest regards,\nNico."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2019, 11:38:34AM",
        "content": "Hi Nico,\n\nAs stated in the docs the scripts for calculating antenna patterns do not do so in the traditional sense i.e. at a single frequency. They use a measure of the total energy of the electric field at a certain angle and radius, see http://dx.doi.org/10.1016/j.jappgeo.2013.08.001 The idea is that this metric is more useful for the broadband antennas we use with GPR. If you want to calculate a traditional power density pattern then you need to sample the electric and magnetic fields (using #rxs) over a sphere of constant radius and calculate the Poynting vector. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Nicolás Zilberstein",
        "date": "Mar 1, 2019, 1:03:21PM",
        "content": "Hi Craig,\n\nThanks for the answer. I tried to calculate the power desity pattern of the hertzian dipole, but the result exhibits differences with respect to the analytical solution; a plot of this is attached to the post. Instead of 1.5 that is the theoretical value that multiplies the sin^2, i obtained 2.\n\nI am calculating the directivity by integrating over a sphere of constant radius the Energy calculated in the script inital_save.py (the #rx are in far field). The formula i'm using is the one that is it attached, where F(theta,phi) is the variable Ethetasum (from the file initial_save.py)\n\nthanks,\nNico."
      },
      {
        "author": "Nicolás Zilberstein",
        "date": "Mar 1, 2019, 5:57:19PM",
        "content": "Hello,\n\nI was making a mistake in the radiated power calculation. Now the results are very good, the radiation power diagram is similar to the analytic one.\n\nThanks for all,\nNico."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/RlGDovrAZdU",
    "title": "Paraview macro from -devel branch",
    "original_post": {
      "author": "Vaheed G",
      "date": "Dec 19, 2023, 12:38:13PM",
      "content": "Hello,\n\nIt looks like the Paraview macro from -devel branch is not compatible with the latest version of Paraview (5.12.0-RC1):\n\nTraceback (most recent call last):\n  File \"<string>\", line 173, in <module>\nTypeError: expected str, bytes or os.PathLike object, not FileNameProperty\n\nThanks,\n-Vaheed"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vqad41ljbN8",
    "title": "gprMax S11 simulations using GPUs",
    "original_post": {
      "author": "Murat",
      "date": "Apr 23, 2021, 6:12:09AM",
      "content": "Hi, \n\nFirst of all, thank you all for developing gprMax and making it open source. This is great!\n\nI wonder if there is any way to compute antenna s-parameters without using a transmission line source. (for example, via voltage source or others).\nBecause, gprMax does not support GPU computation when a transmission line source is included in the model, and running complicated antenna structure simulations on CPU takes too long, especially with a smaller spatial discretisation (e.g., dx=0.1 mm, dy=1mm, dz=0.1 mm). Therefore, it would be great if it is possible to calculate antenna parameters using GPUs.\n\nThanks"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 24, 2021, 10:15:33AM",
        "content": "Hi Murat,\n\nThanks for your good words.\n\nYou can use the GPU and you do not have to use a transmission line source. You need to use a voltage source with some resistance (use the same value as you will have used for the impedance of an ideal transmission line if you want or a 50 Ohm load). You will have to use MATLAB or Python or any scripting language or tool to post process the results but it is easy. There are two ways depending on how well you understand FDTD. One easier than the other.\n\nCommon part: You need to use an #rx: output point as otherwise you will not be recording the response you need. The transmission line gives you that as a default due to its formulation. This point should have the same coordinates as the source point. You should use the #voltage_source: instead of the #transmission_line: \n\nExample modification of the antenna_wire_dipole_fs.in\n#waveform: gaussian 1 1e9 mypulse\n#voltage_source: z 0.025 0.025 0.100 73 mypulse\n#rx: 0.025 0.025 0.100\n\n1st Approach \nUse as your #waveform: the same gaussian excitation as used in the example (see above). In this case once you import your correct electric field component into your processing script you will need to multiply it by -1 x DL where DL is the correct spatial resolution. This will convert it to Voltage from Electric field at this point. This is the total response but for S11 you need the incident response and the reflected. You need to generate the correct incident waveform (it is very easy and there are description and tools available) sampled at the same DT points as in the FDTD solution. Once you have this one then create the reflected response by subtracting the total voltage response you have got from gprMax the incident one you have calculated (the gaussian pulse). You then FFT the incident and the reflected responses and proceed to calculate S11 as |V_ref|/|V_inc| your solution should be valid for the frequencies your model is valid but you need to restrict your plotting to them. FDTD has a range of validity that depends on the spatial step in relation to the wavelength. The solution is not correct for all frequencies up to Nyquist! \n\n2nd Approach (not documented !!!)\nDISCLAIMER: if you do not understand what you are doing this might confuse you but it is easier to use ...\n\nUse as your #waveform: the description impulse (it is not in the manual) You must use the other parameters in the definition (amplitude is 1 and frequency any number as it is ignored). Once you import your correct electric field component into your processing script you will need to multiply it by -1 x DL where DL is the correct spatial resolution. This will convert it to Voltage from Electric field at this point. This is the total response but for S11 you need the incident response and the reflected. However, the incident is only 1 followed by zeros as it is an impulse. Further, due to the way gprMax records the output this application of the impulse is not recorded and computationally the obtained waveform is directly the reflected response due to such an impulse excitation. In essence, it is the modelled impulse response of the antenna. This is the FDTD impulse response and not the theoretical one! Looking at this in the time domain it makes no much sense. If you convolve it with a proper excitation (e.g a gaussian) it will but you do not need to do this to get S11. You just need to FFT this response and your S11 is this response! As S11 is |V_ref|/|V_inc| and on this case |V_inc| = 1. You need to be careful as this is not valid for all frequencies and it will look strange and wrong if you plot them all!. It is valid up to the frequency that your specific FDTD model resolution allows! Be warned!\n\nExample modification of the antenna_wire_dipole_fs.in\n#waveform: impulse 1 1e9 mypulse\n#voltage_source: z 0.025 0.025 0.100 73 mypulse \n#rx: 0.025 0.025 0.100\n\nHope this works for you and the speed up using the GPU will make this fast enough for your work!\n\nBest and #besafe\n\nAntonis\n"
      },
      {
        "author": "Murat",
        "date": "Apr 24, 2021, 2:29:54PM",
        "content": "Hi Antonis,\n\nThank you very much for explaining these two methods in details.\n These solutions sound quite logical and easy to implement. I will simulate the antennas and compute their S11 parameters using these methods and also compare the results to the ones obtained via transmission line source.\n\nBest wishes,\nMurat\n"
      },
      {
        "author": "Murat",
        "date": "Apr 29, 2021, 4:42:17AM",
        "content": "Hi Antonis,\n\nI have tried the methods you suggested but there is a difference between s11 parameters obtained using transmission line and voltage as shown in the figure below.  I used a bowtie antenna model for comparison.  I tried many times but could not figure out why they are different. I have the codes below for transmission line and voltage source models and processing them. Could you please let me know if there is anything I have missed during simulations or calculations.\n\nThank you very much.\n\nFigure: S11 [dB] vs Frequency [Hz] - Blue line indicates the S11 calculated using a voltage source (impulse waveform) and the orange line indicates the S-11 calculated using a transmission line (impulse waveform).    \n\n\n\n\nCodes:\n\n#Waveform and sources\n\nprint('#waveform: impulse 1 1.5e9 mypulse')\n#print('#transmission_line: x {:g} {:g} {:g} 50 mypulse'.format(tx_pos[0], tx_pos[1], tx_pos[2]))  # for comparison\nprint('#voltage_source: x {:g} {:g} {:g} 50 mypulse'.format(tx_pos[0], tx_pos[1], tx_pos[2]))\nrx(tx_pos[0], tx_pos[1], tx_pos[2])\n\n\nS11 calculations with Transmission Line Source:\n\nIn the transmission line model, we can see the incident voltage from the output data as indicated Vinc below. However, When I checked it, it is not an impulse, I guess this is caused by the transmission line, therefore, I subtracted it from the total wave received.\n\nrf = h5py.File('./Bowtie.out', 'r')\n\n# read the spatial resolutions of the model and simulations \ndxdydz = rf.attrs['dx_dy_dz']\n\n# read the time resolution\ndt = rf.attrs['dt']\n\n# read number of iterations\niterations = rf.attrs['Iterations']\n\n# simulation time array\ntime = np.linspace(0, (iterations - 1) * dt, num=iterations)\n\n# simulation frequency resolution\ndf = 1 / np.amax(time)\n\n#rx path in the results file\nrxpath = '/rxs/rx1/'\n\n#get E-Fields\nEx = rf[rxpath + 'Ex'][:]\nEy = rf[rxpath + 'Ey'][:]\nEz = rf[rxpath + 'Ez'][:]\n\n#calculate Vx Vy Vz\nVx = -1*Ex*dxdydz[0]\nVy = -1*Ey*dxdydz[1]\nVz = -1*Ez*dxdydz[2]\n\n# use the antenna parameter calculation script of gprMax\nantennaparams = calculate_antenna_params('./Bowtie.out') \n \nVtotal = antennaparams['Vtotal']   # Output using TL model\nVinc = antennaparams['Vinc']   # Incident wave\n\nVref = Vx - Vinc     #    Vref =  Vtotal - Vinc   also gives the same result via the antenna parameter calculation script of gprMax\n\nfreqs = np.fft.fftfreq(Vinc.size, d=dt)\n\nwith np.errstate(divide='ignore'):\n        s11 = np.abs(np.fft.fft(Vref) / np.fft.fft(Vinc))\ns11 = 20 * np.log10(s11)\n\nplt.plot(freqs[0:200], s11[0:200])\n\nS11 calculations with Voltage Source:  \n\nrf = h5py.File('./Bowtie.out', 'r')\n\n# read the spatial resolutions of the model and simulations \ndxdydz = rf.attrs['dx_dy_dz']\n\n# read the time resolution\ndt = rf.attrs['dt']\n\n# read number of iterations\niterations = rf.attrs['Iterations']\n\n# simulation time array\ntime = np.linspace(0, (iterations - 1) * dt, num=iterations)\n\n# simulation frequency resolution\ndf = 1 / np.amax(time)\n\n#rx path in the results file\nrxpath = '/rxs/rx1/'\n\n#get E-fields\nEx = rf[rxpath + 'Ex'][:]\nEy = rf[rxpath + 'Ey'][:]\nEz = rf[rxpath + 'Ez'][:]\n\n#calculate Vx, Vy, Vz\nVx = -1*Ex*dxdydz[0]\nVy = -1*Ey*dxdydz[1]\nVz = -1*Ez*dxdydz[2]\n\n#impulse is not recorded in the Vx, so we can use Vx directly to calculate the S11\n\nfftVx = np.fft.fft(Vx)\ns11x = 20 * np.log10(fftVx)\n\nfreqs = np.fft.fftfreq(Vx.size, d=dt)\n\nplt.plot(freqs[0:200], s11x[0:200])\n\n\nNote:\n1. In transmission line model, Vx (obtained via Rx with Ex-field) and Vtotal (obtained through the transmission line)  are exactly the same so I believe I do not have any problem with obtaining the received/total wave voltage.\n\n2. Although the transmission line is fed by an impulse, Vinc is not impulse as shown in the figure below. So, I guess incident wave using voltage source might also be different.\n\n\nBest regards,\nMurat\n\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 29, 2021, 8:56:37AM",
        "content": "Hi Murat,\n\nInteresting results. We have not used the transmission line with an impulse but I don't think in this case should have been a problem. Maybe running the transmission line with the gaussian and comparing the results you get with the impulse it might be a good place to see if the two methods differ in something that have been missed. The impulse response in the time domain will look strange as the FDTD model does not properly support impulsive propagation. However, when you convolve this response with a proper forcing function that has an acceptable frequency content, for the given model, the result should be fine as in essence you filter out the erroneous parts. In a similar way the FFT part of this impulse response should be OK for the \"valid\" frequencies and obviously not for frequencies that are not properly resolved.\n\nThe other thing to check is to use the voltage source with a gaussian excitation but you will need to properly recreate the incident field in Python to do the calculations. This should be easy. If this compares well with the transmission line then we need to look a bit more closely on how the impulse does not do exactly what is needed. \n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Murat",
        "date": "Apr 29, 2021, 12:14:14PM",
        "content": "Hi Antonis \n\n\nThank you very much for your suggestions and help.\n\nI simulated only a transmission line with a gaussian input wave and one Rx at the same location without having any structure to see if Vinc (calculated from transmission line) and Vx   (=-1*Ex*dx) are the same. When I compared them, I realized that Vinc = Vx/2.  \n\nSubsequently, I simulated only a voltage source and an Rx at the same location without having any structure and recorded the waveform which is denoted by VSinc (=-1*Ex*dx) below in the codes.  During antenna simulations using voltage source and Rx, I used VSinc/2 as the incident wave to calculate S11, it seemed that the results were correct as S11 parameters obtained through this method and using a transmission line were quite similar as shown in the figure below. \n\nMany thanks,\nMurat\n\n\nVSinc = np.loadtxt('./VS_Vinput.txt')     # Gaussian waveform obtained from the simulation consisting of only a Voltage Source and an Rx (Vmax =1)\nTLS11 = np.loadtxt('./TLS11.txt')           #s11 results of the antenna obtained through the simulation via a transmission line \n\n# Calculation of S11 of the antenna simulated via a voltage source and Rx\nfreqs = np.fft.fftfreq(Vx.size, d=dt)\nVref = Vx-VSinc/2\nS11 = np.fft.fft(Vref)/np.fft.fft(VSinc/2)\nS11dB = 20 * np.log10(S11)\nplt.plot(freqs[0:200],S11dB[0:200])\nplt.plot(freqs[0:200],TLS11[0:200])\n\n\n\n\n\n\n\n\n \n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 29, 2021, 1:37:22PM",
        "content": "Hi Murat,\n\nThat makes some sense as looking down the line from a Thevenin equivalent point of view you can replace it with a 2V and an admittance across. It is good to try and more detailed comparisons to find some equivalent sourcing models. There is a paper about this that is well known and useful \n10.1109/TAP.2003.815414\n\nThe idea of using a 1D transmission line model for such excitation is not as ideal as it is when used as a model for a coax cable feed on a monopole but it is kind of OK. Results should be equivalent but often small phase variations can exist depending on different excitations.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "Murat",
        "date": "Apr 29, 2021, 2:01:12PM",
        "content": "Hi Antonis,\n\nThanks for the explanation and the paper which seems quite useful for understanding FDTD feed models.  I will look into this more by considering various antenna types.\n\nBest,\nMurat\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XmedVHgv4To",
    "title": "Re: After the preparation of a good procedure, how to run this and amplitude-related waveforms?",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 19, 2017, 6:13:30AM",
        "content": "Hi Jie,\n\nAgain I don't really understand your question. Is this a custom waveform that you want to use to excite a source? If so you you can save it to a text file and use the #excitation_file command - http://docs.gprmax.com/en/latest/input.html#excitation-file\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/p9pMog16wAY",
    "title": "Issue on the plot for Introductory (2D) model example",
    "original_post": {
      "author": "Melvin Lim",
      "date": "Aug 23, 2024, 9:36:11PM",
      "content": "Hi guys! I'm currently getting myself familiarised with the gprMax simulation software by running the example models/simulation according to the documentation. I went on to run an example model for Introductory (2D) models provided in the documentation by running the code: \"python -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\" and the intended plot to be generated according to the documentation is as shown in the screenshot below:\n\n\nBut the plot that was generated in my computer is as shown in the screenshot below:\n\n\nBased on the above screenshot generated in my gprMax simulation, it seems that there is an extra grid/axes in the plot, annotated with green circles. I might have pressed something that I shouldn't have but I'm not sure what exactly is. \n\nHow do I reset the plot in such a way that it looks the same as the first screenshot provided in the documentation? Thank you!"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GiY7gjeFXQs",
    "title": "installation process",
    "original_post": {
      "author": "emran daradkeh",
      "date": "Aug 10, 2023, 3:55:54AM",
      "content": "i have problem with installation \nplease , i want video illustrate installation process \n\nthank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 11:16:21AM",
        "content": "The installation instructions are detailed, if you are having a specific issue please let us know.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jnFLlQ3tVJM",
    "title": "problem aboult B scan",
    "original_post": {
      "author": "panlei",
      "date": "Jun 15, 2020, 11:23:00AM",
      "content": "hi Craig\nWhy do I use python-m in the user manual tools.outputfiles_ merge user_ models/cylinder_ Bscan_ The function of 2D -- remove files does not delete every B-scan and does not merge into a file, but generates a cylinder_ Bscan_ 2D--remove-files_ merged.out"
    },
    "responses": [
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 16, 2020, 7:41:08AM",
        "content": "You probably wrote the command wrong.\n\nFrom the doc:\n\n\"python -m tools.outputfiles_merge basefilename --remove-files\"\n\n\nYou forgot the space"
      },
      {
        "author": "panlei",
        "date": "Jun 16, 2020, 12:29:41PM",
        "content": "get it，thank you"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jJ-GMnqrWfg",
    "title": "Wave speed in soil_peplinski",
    "original_post": {
      "author": "Hengameh Noshahri",
      "date": "Jan 13, 2022, 5:46:02AM",
      "content": "Hello,\n\n Is it possible to calculate the EM wave speed in a fractal box which is made of Peplinski soil? I would appreciate your advice.\nThanks!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 13, 2022, 5:49:57AM",
        "content": "You could calculate an average velocity based on an average value for the permittivity. See the permittivities used to represent the soil in the list of materials when gprMax runs.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Hengameh Noshahri",
        "date": "Jan 13, 2022, 8:42:53AM",
        "content": "Thank you for your quick answer.\n\nbest regards,\nHengameh\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5Q8h9VC70yg",
    "title": "Saturated soil",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Mar 29, 2024, 3:44:36AM",
      "content": "Dear All, \n\nI want to know how to make this saturated soil area next to the Cylinder. \nIs that possible in GprMax?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:31:31AM",
        "content": "You could create the layers and pipes using the geometry primitives in gprMax, e.g. boxes, fractal boxes with rough surface, cylinders etc.... However, to create the saturated area you have shown I'd recommend you find a way of creating this outside gprMax and then importing the geometry using the geometry_objects_read command. You can also do a mixture of both and create some of the basic geometry in gprMax then export it to hdf5 using the geometry_objects_write command, modify it outside gprMax and then re-import. Alternatively if you are starting with a simple 2D or extended 2D model you might consider the png2h5 tool.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/L4C1K9PNX1k",
    "title": "Adding grass to rough surface",
    "original_post": {
      "author": "Vaheed G",
      "date": "Dec 18, 2023, 12:00:53PM",
      "content": "Hello, \n\nI am trying to generate the following scenario using the API and devel branch code:\nSoil Peplinski -> Fractal Box -> Rough surface -> Add Grass\n\nAccording to the manual, I set the grass height (min/max) above the surface roughness maximum height.\nHere is the output log with the error, appreciate some insight:\n\nModel title: scenario1\nSpatial discretisation: 0.005 x 0.005 x 0.005m\nDomain size: 0.4 x 0.3 x 0.85m (80 x 60 x 170 = 816000 cells)\nMode: 3D\nTime step (at CFL limit): 9.62917e-12 secs\nTime window: 3.8507e-08 secs (4000 iterations)\nMixing model (Peplinski) used to create soil with sand fraction 0.182519, clay fraction 0.817481, bulk density 1.83916g/cm3, sand particle density 2.65g/cm3, and water volumetric fraction 0 to 0.218258 created.\nGeometry view from 0m, 0m, 0m, to 0.4m, 0.3m, 0.85m, discretisation 0.005m, 0.005m, 0.005m, with filename base scenario1 created.\n#fractal_box: 0 0 0 0.4 0.30000000000000004 0.35 0.8684990470815266 1 1 1 22 soil my_fractal_box no value for seed detected. This means you will get a different fractal distribution every time the model runs.\nFractal box my_fractal_box from 0m, 0m, 0m, to 0.4m, 0.3m, 0.35m with soil, fractal dimension 0.868499, fractal weightings 1, 1, 1, fractal seeding None, with 22 material(s) created, dielectric smoothing is off.\n#add_surface_roughness: 0 0 0.35 0.4 0.30000000000000004 0.35 0.8684990470815266 1 1 1 0.24414800359874445 0.43045500894587224 my_fractal_box no value for seed detected. This means you will get a different fractal distribution every time the model runs.\nFractal surface from 0m, 0m, 0.35m, to 0.4m, 0.3m, 0.35m with fractal dimension 0.868499, fractal weightings 1, 1, fractal seeding None, and range 0.244148m to 0.430455m, added to my_fractal_box.\n#add_grass: 0 0 0.35 0.4 0.30000000000000004 0.35 0.9597339948925225 0.43545500894587225 0.6115908671807403 10 my_fractal_box no value for seed detected. This means you will get a different fractal distribution every time the model runs.\n10 blades of grass on surface from 0m, 0m, 0.35m, to 0.4m, 0.3m, 0.35m with fractal dimension 0.959734, fractal seeding None, and range 0.435455m to 0.611591m, added to my_fractal_box.\nTraceback (most recent call last):\n  File \"C:\\Users\\vahee\\gprMax\\user_models\\scenario1\\scenario1.py\", line 113, in <module>\n    gprMax.run(scenes=[scene], n=1, outputfile=fn, geometry_only=True)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 159, in run\n    run_main(args)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 219, in run_main\n    results = context.run()\n              ^^^^^^^^^^^^^\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\contexts.py\", line 82, in run\n    model.build()\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 74, in build\n    self.reuse_geometry() if config.get_model_config().reuse_geometry else self.build_geometry()\n                                                                           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 142, in build_geometry\n    self.build_scene()\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 268, in build_scene\n    scene.create_internal_objects(self.G)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 161, in create_internal_objects\n    self.process_geocmds(self.geometry_cmds, G)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 117, in process_geocmds\n    self.build_obj(obj, grid)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 70, in build_obj\n    obj.build(grid, uip)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\cmds_geometry\\fractal_box.py\", line 452, in build\n    x, y = g.calculate_blade_geometry(blade, height)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\fractals.py\", line 295, in calculate_blade_geometry\n    * (height / self.geometryparams[blade, 0])\n       ~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nFloatingPointError: invalid value encountered in divide"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 19, 2023, 6:02:48AM",
        "content": "Hi Vaheed,\n\nThere was a bug with the add grass functionality in the devel branch - an initialisation function was not being called. This has now been fixed. Please try your example again.\n\nCraig\n\n"
      },
      {
        "author": "Vaheed G",
        "date": "Dec 19, 2023, 1:22:58PM",
        "content": "I am seeing a different error now:\n\nModel title: scenario1\nSpatial discretisation: 0.004 x 0.004 x 0.004m\nDomain size: 0.78 x 0.68 x 1.31m (195 x 170 x 327 = 1.084e+07 cells)\nMode: 3D\nTime step (at CFL limit): 7.70333e-12 secs\nTime window: 3.08056e-08 secs (4000 iterations)\nMixing model (Peplinski) used to create soil with sand fraction 0.313311, clay fraction 0.686689, bulk density 1.63774g/cm3, sand particle density 2.65g/cm3, and water volumetric fraction 0 to 0.169525 created.\nGeometry view from 0m, 0m, 0m, to 0.78m, 0.68m, 1.308m, discretisation 0.004m, 0.004m, 0.004m, with filename base scenario1 created.\n#fractal_box: 0 0 0 0.7799999999999999 0.6799999999999999 0.54 1.561379127696934 1 1 1 24 soil my_fractal_box no value for seed detected. This means you will get a different fractal distribution every time the model runs.\nFractal box my_fractal_box from 0m, 0m, 0m, to 0.78m, 0.68m, 0.54m with soil, fractal dimension 1.56138, fractal weightings 1, 1, 1, fractal seeding None, with 24 material(s) created, dielectric smoothing is off.\n#add_surface_roughness: 0 0 0.54 0.7799999999999999 0.6799999999999999 0.54 1.561379127696934 1 1 1 0.4246063268019919 0.6314522383061353 my_fractal_box no value for seed detected. This means you will get a different fractal distribution every time the model runs.\nFractal surface from 0m, 0m, 0.54m, to 0.78m, 0.68m, 0.54m with fractal dimension 1.56138, fractal weightings 1, 1, fractal seeding None, and range 0.424606m to 0.631452m, added to my_fractal_box.\n#add_grass: 0 0 0.54 0.7799999999999999 0.6799999999999999 0.54 1.7496690999666633 0.4286063268019919 0.780815396535602 5002 my_fractal_box no value for seed detected. This means you will get a different fractal distribution every time the model runs.\n5002 blades of grass on surface from 0m, 0m, 0.54m, to 0.78m, 0.68m, 0.54m with fractal dimension 1.74967, fractal seeding None, and range 0.428606m to 0.780815m, added to my_fractal_box.\n\nMemory required (estimated): ~911.5 MB [main_grid] + ~65.0 MB overhead = 976.5 MB\n\nPML boundaries [main_grid]: {formulation: HORIPML, order: 1, thickness (cells): 10}\nBuilding PML boundaries [main_grid]:   0%|                                                       | 0/6 [00:00<?, ?it/s]Traceback (most recent call last):\n  File \"C:\\Users\\vahee\\gprMax\\user_models\\scenario1\\scenario1.py\", line 112, in <module>\n\n    gprMax.run(scenes=[scene], n=1, outputfile=fn, geometry_only=True)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 159, in run\n    run_main(args)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 219, in run_main\n    results = context.run()\n              ^^^^^^^^^^^^^\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\contexts.py\", line 83, in run\n\n    model.build()\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 74, in build\n    self.reuse_geometry() if config.get_model_config().reuse_geometry else self.build_geometry()\n                                                                           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 191, in build_geometry\n    gb.build_pmls()\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 376, in build_pmls\n    build_pml(self.grid, pml_id, thickness)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\pml.py\", line 701, in build_pml\n    pml.calculate_update_coeffs(averageer, averagemr)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\pml.py\", line 305, in calculate_update_coeffs\n    cfs.calculate_sigmamax(self.d, er, mr, self.G)\n  File \"C:\\Users\\vahee\\miniconda3\\envs\\gprmax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\pml.py\", line 98, in calculate_sigmamax\n    self.sigma.max = (0.8 * (m + 1)) / (config.sim_config.em_consts[\"z0\"] * d * np.sqrt(er * mr))\n                                                                                ^^^^^^^^^^^^^^^^\nFloatingPointError: invalid value encountered in sqrt\nBuilding PML boundaries [main_grid]:   0%|                                                       | 0/6 [00:00<?, ?it/s]\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/st_hoJacf24",
    "title": "How to add noise or clutter to my GPRMax data",
    "original_post": {
      "author": "Meghana Nagesha",
      "date": "May 21, 2020, 2:51:45AM",
      "content": "Hello,\nI am working on a project, where I need to add clutter and noise to my GPR data.\nI imported my .out file to csv and plotted it on matlab. But when I tried to add noise to it, it inst responding.\n\nI used this method to import the xlsx file to matlab:\n\nT = readtable('filename.xlsx');\nA= table2array(T);\nplot(A);\n\nCan anyone please help regarding adding of clutter and noise to gprMax data ? is there any method to do so ?\n\nRegards\nMeghana"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 23, 2020, 3:26:51PM",
        "content": "Dear Meghana,\n\nYou need to tell us what you mean by clutter and noise in your scenario? \n\nIt may be more realistic to add the source(s), i.e. the objects are causing, the 'clutter' to your input file and simulate it directly. For example, someone who is trying to simulate the response from a pipe buried in soil, may define clutter as unwanted responses from rocks in the soil. The rocks could be included in the model, i.e. the input file, and thus the 'clutter' would be directly simulated. So you need to think exactly what you define as clutter for your particular scenario.\n\nSimilarly with noise, are you talking about random noise? Certainly you can add different types of noise to the data after the simulation has run.\n\nIt would be simpler to import your output file (which is in HDF5 format) directly into MATLAB without converting to Excel first. You see an example of the code to do this in the 'plot_Ascan.m' script in the tools->MATLAB_scripts folder.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BiAecGNm-18",
    "title": "Problem with snapshots in Paraview",
    "original_post": {
      "author": "Sam Stadler",
      "date": "Oct 16, 2019, 8:28:24AM",
      "content": "Dear Craig and Antonis,\n\nI currently have a problem with viewing snapshots in Paraview, I was wondering if you heard of this before or might know if it has anything to do with an update in gprMax. Note that I believe the simulations themselves are correct, but that this only concerns the creation/viewing of snapshots!\nI am simulating the case where a 400 MHz antenna sits on a water/air interface, this adds a strong permitivitty contrast in the vicinity of the antenna. My Paraview Version is 5.4.1, but I have also tried the same with the current Paraview Version 5.7. My Problem is that while trying to look at the fields in the vicinity of the 400 MHz antenna in three different planes, the fields that are shown on the snapshots are seemingly in the wrong places. For example, one snapshot plane contains the bowtie wings and the feed points, the pulse however starts 2 cm next to that point. Another example is that the antenna model contains a metallic case, the plane that goes vertically through this metallic case though shows how the fields propagate straight through the case. I also saw that paraview doesn't show the three fields \"E-field\", \"H-field\" and \"Current\" but only the former two. \n\nI haven't seen this problem before so I was wondering if it has to do with the snapshot export of gprMax. As I said, I tried viewing the snapshots with two versions of paraview, so I don't think its a plain paraview Problem. \n\nI believe my snapshot commands are correct, but I added them below:\n\n#domain: 0.74 0.74 0.476\n## horizontal snapshots\n#python:\nfor i in range(1, 501):\n    print('#snapshot: 0 0 0.236 0.74 0.74 0.238 0.002 0.002 0.002 {} horiz_snapshot{}'.format((i/100)*1e-9, i))\n#end_python:\n## vertical snapshots through center\n#python:\nfor i in range(1, 501):\n    print('#snapshot: 0.29 0 0 0.292 0.74 0.476 0.002 0.002 0.002 {} vpara_snapshot{}'.format((i/100)*1e-9, i))\n#end_python:\n#python:\nfor i in range(1, 501):\n    print('#snapshot: 0 0.368 0 0.74 0.370 0.476 0.002 0.002 0.002 {} vperp_snapshot{}'.format((i/100)*1e-9, i))\n#end_python:\n\n\"fig1\" Shows the horizontal plane. The field Magnitude can be seen on the left side starting to propagate clearly not at the feed Point of from the antenna, rougly situated where the white crosshair is. \n\"fig2\" Shows a vertical plane through the Center of the antenna, the blue box is the metallic casing. The fields seem to propagate through the case, which shouldn't happen. \n\"fig3\" Shows my three different planes. It is there to Show how the fields on the planes (which each have the same Colorbar) don't even match up at the borders/intersections (see the gaps). \n\nMy ideas are that maybe the coordinates are written out differently and the planes somehow end up with different coordinates and thereby slice the model volume differently. The planes are situated where I want them to be as defined in the script, but it seems like the field values are taken Maybe from somewhere else. \n\nLooking Forward to hear from you guys.\nCheers, Sam"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 17, 2019, 5:58:36AM",
        "content": "Sam,\n\nCan you send me the full input file you are using (either here, or email me directly) so I can take a look.\n\nNow only the electric and magnetic fields are available in snapshots we removed the current (which you can calculate yourself from the magnetic field anyway). Are your plots with the magnitude of the electric field or a specific component?\n\nThanks,\n\nCraig"
      },
      {
        "author": "Sam Stadler",
        "date": "Oct 18, 2019, 9:14:14AM",
        "content": "Dear Craig, \n\nthanks for the speedy Reply. Thanks for The info on the current data not being included. The plots are with the Magnitude of the E-field. As you can see I'm creating a lot of snapshots to look at the early Evolution of the fields. \n\n#domain: 0.74 0.74 0.55\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 30e-9\n\n#material: 81.73 0.0461 1 0 my_water\n#box: 0 0 0 0.74 0.74 0.3 my_water\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_400\nantenna_like_GSSI_400(0.37, 0.37, 0.3, 0.002)\n#end_python:\n\n#box: 0.17 0.17 0.028 0.57 0.57 0.03 pec\n\n#geometry_view: 0 0 0 0.74 0.74 0.55 0.002 0.002 0.002 antenna_view_2n n\n\n## horizontal snapshots\n#python:\nfor i in range(1, 501):\n    print('#snapshot: 0 0 0.31 0.74 0.74 0.312 0.002 0.002 0.002 {} horiz_snapshot{}'.format((i/100)*1e-9, i))\n#end_python:\n## vertical snapshots through center\n#python:\nfor i in range(1, 501):\n    print('#snapshot: 0.29 0 0 0.292 0.74 0.55 0.002 0.002 0.002 {} vpara_snapshot{}'.format((i/100)*1e-9, i))\n#end_python:\n#python:\nfor i in range(1, 501):\n    print('#snapshot: 0 0.368 0 0.74 0.370 0.55 0.002 0.002 0.002 {} vperp_snapshot{}'.format((i/100)*1e-9, i))\n#end_python:\n\nCheers, Sam"
      },
      {
        "author": "Sam Stadler",
        "date": "Mar 27, 2020, 7:59:10AM",
        "content": "Dear Craig,\n\nhave you had the chance to look further into this?\n\nBest regards and stay healthy,\nSam"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 27, 2020, 1:01:54PM",
        "content": "Hey Sam,\n\nSorry, I haven't, but because of the current COVID-19 working from home situation, I might be able to look into it in the next couple of weeks!\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 30, 2020, 10:01:07AM",
        "content": "Hi Sam,\n\nJust starting to have a look at this. I'm using:\n\ngprMax v.3.1.5 (latest as of 30.03.2020)\nParaview 5.5.0\n\nAttached is the input file and some screenshots.\n\nSo for me the snapshot(s) slice through the xy plane, i.e. including the antenna source, looks OK. It lines up with the geometry meshes that were generated.\n\nI'm about to run the snapshots for the other slices now to look at that lineup.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 30, 2020, 11:20:54AM",
        "content": "Further snapshots look OK too. These were done with the CPU-based solver. Were yours CPU or GPU?\n\nCraig"
      },
      {
        "author": "Sam Stadler",
        "date": "Apr 29, 2020, 5:56:40AM",
        "content": "Dear Craig,\n\nthanks for your reply. Since then I have finally been able to check this. Indeed it does work for me when using the snapshots created while running on the cpus and the version of gprMax and paraview you have yourself. Apparently I had other problems concerning my PC/gprMax etc.\nHowever, snapshots created with the GPU still do not work for us. There are no errors when running gprMax, in the command line output it says that the files all have correct sizes of ca. 20 Mb, but really the shapshot files all only have about 1 kb. Could you maybe check if this is also the case with you? Since I now have an option to create snapshots, my problem is somewhat solved for now, I guess it's still interesting for you to find out what(if) problem we have here so that snapshots can later be created with GPU calc.\n\nThanks again for your help and stay healthy,\nSam"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xYDfQgAW9QY",
    "title": "Problem using snapshots",
    "original_post": {
      "author": "Charles",
      "date": "Jun 6, 2024, 5:25:06PM",
      "content": "Hello -\n\nI've recently started modelling with gprMax. I can successfully run simulations, plot results, and view the geometry with ParaView. However, whenever I attempt to view snapshots with ParaView, I get the following error (traceback below). The snapshot file definitely has content I can view in a hex editor, so it isn't an empty file.\n\nI was hoping somebody in the community might point me in the right direction for resolving this problem. Thanks for any help you can offer.\n\n\n\n\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\nTraceback (most recent call last):\n  File \"<string>\", line 254, in <module>\n  File \"C:\\Program Files\\ParaView 5.10.1-Windows-Python3.9-msvc2017-AMD64\\bin\\lib\\json\\__init__.py\", line 346, in loads\n    return _default_decoder.decode(s)\n  File \"C:\\Program Files\\ParaView 5.10.1-Windows-Python3.9-msvc2017-AMD64\\bin\\lib\\json\\decoder.py\", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"C:\\Program Files\\ParaView 5.10.1-Windows-Python3.9-msvc2017-AMD64\\bin\\lib\\json\\decoder.py\", line 355, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 6, 2024, 5:28:43PM",
        "content": "The way snapshots are stored are in a folder created using the name you specify for the snapshots and you are supposed to give the actual folder in Paraview and not any of the files it contains directly. If this is what you do and it does not work then this needs more investigating.\n\nAntonis\n"
      },
      {
        "author": "Charles",
        "date": "Jun 7, 2024, 5:34:14PM",
        "content": "Antonis -\n\nI really appreciate the help. This was indeed a ParaView user error. I can view snapshots now. \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hiV4R8NmFTY",
    "title": "Api() and the mpi parameter",
    "original_post": {
      "author": "Gary Bennett",
      "date": "Aug 8, 2019, 11:26:48AM",
      "content": "Hello group,\n\nNew member...first post.  I'm developing my python script to programmatically call the gprMax api().  While developing my program on a local desktop, I make the following call, and my program appears to run just fine.  (n can be 100 or 200 btw)\n\n gprMax.api(file_name, n, gpu=None, geometry_only=False)\n \nI have a VM on Azure using the NC24s_v3 configuration.  It utilizes four Tesla V100's on that system.  On my VM, I changed the call to take advantage of the gpu's and the mpi function.\n try:\n gprMax.api(file_name, n, mpi=5, gpu=[0, 1, 2, 3], geometry_only=False)\n #gprMax.api(file_name, n, gpu=None, geometry_only=False)\nexcept:\n print(\"Oops!\",sys.exc_info()[0],\"occurred.\")\n print(\"Failed making these simulation input files\")\n   I put the try/except around the call for debugging, so I know when it makes the call and when it doesn't.  When I set 'mpi=None' the call works, but doesn't seem to speed up the processing much from my local setup.  \n\nWhen I tried the suggested gprMax website call below, my VM seems to process a lot faster, so that indicates to me that I have most everything installed okay on my VM.  I have followed most all instructions under the 'Advanced Topics' for OpenMP and GPGPU along with the CUDA instructions.\n\n (gprMax)$ python -m gprMax user_models/cylinder_Bscan_2D.in -n 60 -mpi 5 -gpu 0 1 2 3\n  It appears that the api() doesn't handle the mpi=5 argument like I think that it should.  There is the following comment in the gprMax api() code that may be the issue, but I'm not sure.\ndef run_mpi_sim()\n # Assemble a sys.argv replacement to pass to spawned worker\n        # N.B This is required as sys.argv not available when gprMax is called via api()\n        # Ignore mpicomm object if it exists as only strings can be passed via spawn\n  I'm hoping that this is a simple operator error, if not, is there a good work-around to be able to take advantage of VM's resources, in particular the mpi setting?\nI plan to run a large number of simulations, so I need all the speed that I can get.\n\nOh, this is all a new install so I'm using all the latest updated code.  My VM is Ubuntu 18.04, Python 3.7.3, Cuda 10.1 v10.1.168, Ompi 2.1.1, gprMax v3.1.5 for the main features.\n\nThank you for your help...Gary"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 16, 2019, 2:18:55AM",
        "content": "Hi Gary,\n\nDid you get any further, have any success with this? MPI should work through the API, I have used in that way on HPC machines. \n\nI'm going on holiday, but will do some more checks when I get back to work, after 2nd Sept.\n\nThanks,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/L6P3P7qTzKQ",
    "title": "About the magnetic loss",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Dec 23, 2018, 3:30:01PM",
      "content": "I have considered to set a tyoe of ferrite material shielding the antenna. In this case, I should set the magnetic permeability and magnetic loss into the material EM properties. However, I found that the magnetic loss does not change the EM waveforms. It is unreasonable. For exmaple, I set the magnetic loss of the sorrounding material to be 0 and 30 respectivey, but the waveforms in the test point is completely same."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 3, 2019, 5:26:37AM",
        "content": "Hi Feng,\n\nThe magnetic loss you refer to is the 'equivalent magnetic loss' term that attenuates the H-field - usually referred to as sigma-star is most texts. As I understand it (perhaps others can comment), this is not a physical property and is there to balance Maxwell's equations - the equivalent term for attenuating the E-field is electrical conductivity (sigma). Thats said, I have checked that changing the value of the magnetic loss term does indeed attenuate the H-field. If you are visually comparing plots of no magnetic loss and a value of 30 ohms/m you won't see the difference. Either explicitly plot the difference, or use a larger value to convince yourself it is working.\n\nAlso you might find this paper interesting - http://web.mst.edu/~marinak/files/my_publications/Papers/IEEE_EMC_2009_Jianfeng_published.pdf gprMax can model frequency-dispersive permittivity with a multi-pole Debye model but not (at the moment) frequency-dispersive permeability. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Feng Zhou",
        "date": "Jan 10, 2019, 2:44:45PM",
        "content": "Hi Crag, \n\nThanks for your explanation and sorry for the late response. \n\nAs my understanding, the magnetic permeability has a similar physical nature to the permittivity. The role of the real part of the magnetic permeability is to store energy, while the imaginary part (magnetic loss) is to transfer the energy of the magnetic fields into heat in the high frequency region. For example, ferrite always has a low conductivity like an insulator, but it has a high imaginary parts both in permittivity and permeability, which actually can absorb the EM energy. Based on this properties, it can be used as a kind of good absorbing material for antennas. \n\nTherefore, I think if we set the magnetic loss to nonzero, the EM wave should be decreased in gprMax simulation. It has nothing to do with the frequency dependence. \n\nI was wondering how the magnetic loss is expressed in the Maxwell equations. In the general textbooks of electromagnetics, they mention the imaginary part of the magnetic permeability but not give specific explanations.  \n\nNow, I can use an equivalent EM loss in the conductivity part of the material definition in gprMax for my simulation, but I would like to discuss with you more on this issue.\n\nMany thanks. \n\nFeng"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 11, 2019, 6:45:18AM",
        "content": "Hi Feng,\n\nIf the magnetic permeability for ferrites has an imaginary part, then it has frequency dependence. If you simply add the magnetic loss term to your material definition in gprMax it will be frequency independent, much like adding some conductivity.\n\nAs you suggest, I think you might be able to create the necessary loss on the electric side, but I am not sure of this.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nZYe_U4FSio",
    "title": "Updated gprMax and it's throwing error",
    "original_post": {
      "author": "Marvin Li",
      "date": "Nov 4, 2024, 6:32:32PM",
      "content": "Hi guys,\nI have updated gprMax, python, pycuda and cuda to the latest version. When running test model with gpu, the result are shown bellow:\npycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\marvin\\AppData\\Local\\Temp\\tmpapz2yw5e.cu failed\n[command: nvcc --preprocess -w -arch sm_86 -m64 -IC:\\Users\\marvin\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\cuda C:\\Users\\marvin\\AppData\\Local\\Temp\\tmpapz2yw5e.cu --compiler-options -EP]\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\n\nI have also tried the demo file from: https://github.com/gprMax/gprMax/issues/115 which throw a similar exception.\n\nI have a sneaky suspicion it has to do with the newest version of these package not compatible with each other\nOther then that I am out off idea on what to do, any help will be appreciated.\n\n\nKind regards\nMarvin"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iZXjSEUvGfY",
    "title": "about inhomogeneous medium and chirp signal",
    "original_post": {
      "author": "Zoey",
      "date": "Aug 26, 2019, 10:35:05AM",
      "content": "Hi everyone\n\nI have no idea about how to create inhomogeneous medium and chirp signal. Could anybody help me, please?\n\nThank you very much!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 3, 2019, 3:34:48AM",
        "content": "Hi Zoey,\n\nWe are going to need more detail about what you mean to assist you. Please give an example of what you mean by an inhomogeneous medium, as there are several possible definitions, i.e. the heterogeneous (Peplinski) soil model we have is one. A chirp (or sweep) signal is typically not used with impulse driven radar systems for which FDTD is best suited to model. Please explain why you want to use a chirp signal.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Zoey",
        "date": "Oct 14, 2019, 9:32:09AM",
        "content": "Hi Craig,\n\nI'm sorry to reply to you so late. Would you tell me what the heterogeneous (Peplinski) soil is, please?  The inhomogeneous medium is the dielectric constant are uneven distribution.,I want to simulate a medium that is very close to the natural state.\n\nI want to use the chirp signal because the signal could improving resolution.\n\nThanks for your answer again!\n\nZoey"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 17, 2019, 5:26:55AM",
        "content": "Dear Zoey,\n\nInformation on how we use the Peplinski soil model (with a fractal distribution) can be found in the docs - http://docs.gprmax.com/en/latest/input.html#soil-peplinski and http://docs.gprmax.com/en/latest/input.html#fractal-box\n\nAlso see the example model - http://docs.gprmax.com/en/latest/examples_advanced.html#building-a-heterogeneous-soil Be aware this is fairly advanced functionality so you need to be sure you understand what is being simulated.\n\nA sweep signal can be simulated efficiently with gprMax by exciting the model using an impulse (or Dirac delta function), and then convolving this result with the input signals from your sweep. However, again this is an advanced method which requires you to understand the underlying FDTD method so that you ensure your model is valid for all the frequencies you are interested in simulating.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/08zmYtX0cQ0",
    "title": "Dockerizing on windows",
    "original_post": {
      "author": "Paul-Benjamin Riedel",
      "date": "Jun 19, 2019, 5:22:58AM",
      "content": "Hey there. \nCurrently trying to dockerize the program, running into a wee-bit of a proble, since nvidia-docker is not available for windows. \n\nDoes anybody have a solution or a running docker container ?\n\nCheers"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bB9hYn8wdzM",
    "title": "A-scan synchronization with Paraview animation",
    "original_post": {
      "author": "nze...@gmail.com",
      "date": "Feb 28, 2023, 6:35:41AM",
      "content": "Dear Dr. Warren,\nI would like to gradually display the A-scan at the receiver position gradually, along with the animation in Paraview to understand how the A-scan is constructed and seen by the receiver if possible.\nMany thanks in advance.\n\nKind regards,\nNzeeh Roumia"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2023, 6:39:52AM",
        "content": "Dear Nzeeh,\n\nI'm sure it probably is possible, but not something I have explicitly tried I'm afraid. Would you not be better simply viewing snapshots - https://docs.gprmax.com/en/latest/input.html#snapshot - to see the wavefield propagation?\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "nze...@gmail.com",
        "date": "Feb 28, 2023, 6:56:30AM",
        "content": "Dear Dr. Warren,\n\nI actually did that, however, I can see some changes in the A-scan that I cannot see in the animation because there is no relationship between the time and the number of snapshots displayed I think. For this reason, I want to synchronize them.\nThank you for your time and consideration.\nBest regards,\nNzeeh\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2023, 8:56:41AM",
        "content": "You should be able to setup Paraview to cycle through absolute time from each snapshot rather than just snapshot number.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IDscFdbM2eM",
    "title": "TE polarization simulation in 2D",
    "original_post": {
      "author": "Shuvodip Majumdar",
      "date": "Sep 15, 2019, 12:11:34PM",
      "content": "Dear Sir,\n\nCan I simulate a situation in 2D with TE polarization using magnetic dipole? Till now I have observed that if I use a magnetic dipole in a 2D scenario, it is simulating but no response at all is coming.\n\nRegards,\nShuvodip Majumdar"
    },
    "responses": [
      {
        "author": "Shuvodip Majumdar",
        "date": "Sep 15, 2019, 2:26:10PM",
        "content": "Dear Sir,\n\nIn continuation to my last post, I want to also say that I actually want to simulate a situation where one dimension is infinite. Practically, somewhat around 20 X lambda will be enough for me. Please suggest how may I get a faithful result for TE polarization.\n\nRegards,\nShuvodip Majumdar"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 16, 2019, 3:41:32AM",
        "content": "Dear Shuvodip,\n\ngprMax supports the full 3D solution of Maxwell's equations using FDTD (TEM mode), and also 2D Transverse Magnetic (TM) mode. There is currently no 2D Transverse Electric (TE) mode, primarily because it is not particularly useful for GPR modelling. See our docs - http://docs.gprmax.com/en/latest/gprmodelling.html#basic-concepts\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GUNfpQdcHdc",
    "title": "Parameters for soil types to be used with \"soil_peplinski\"",
    "original_post": {
      "author": "Selim Sahin",
      "date": "Feb 18, 2021, 9:08:10AM",
      "content": "Hello,\n\nI have searched the forum but could not find a related entry.\n\nI have generated B-scans with heterogeneous soil using soil_peplinski command. It works fine.\n\nNext, I want to model the ground to represent real world scenarios. Are there any standardized soil models in the literature? If so, what are corresponding parameters like water fraction, clay fraction etc to model it in gprMax?\n\nRegards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 18, 2021, 3:58:10PM",
        "content": "Hi Selim,\n\nI'd recommend reading some of the papers by Peplinski, Dobson, and Ulaby which should help you, e.g. https://ieeexplore.ieee.org/document/387598\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZI6RNPjNSMM",
    "title": "Understanding the Signal truncate and padded",
    "original_post": {
      "author": "Shikhar Sharma",
      "date": "Aug 22, 2023, 10:26:24AM",
      "content": "Hello Everyone,\n\nI am using below code to understand signal truncate and padded sometimes.\n\nFor this code its been truncated.\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: sine 1 1.5e9 my_sine\n#hertzian_dipole: z 0.040 0.170 0 my_sine\n\n#rx: 0.060 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.07 0.002 half_space\n#cylinder: 0.120 0.050 0 0.120 0.050 0.002 0.010 pec\n\nI changed the waveform code as given below\n\n        elif self.type == 'sine':\n            ampvalue = np.sin(2 * np.pi * self.freq * time  * 1.33)\n                        if time > 1e-9:\n                ampvalue = 0\n\nwhen ploting the source wave, it looks like this-\n \nQ1. Why its been truncate ?\n Q2. Will it give signature irrespective of target depth like gpr does ? or As per the gprMax code it seems like during iteration as per the time steps , every time it use to calculate amp value and based on that value it will further calculate the response. So as per the given wave above will it give the response if target depth increases beyond 1nano sec.\nThanks in Advance"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 22, 2023, 12:47:07PM",
        "content": "If you are changing the code you need to understand what you doing and why. The 'sine' excitation is meant to produce a single cycle of a sine according to the documentation and this is what it does. After that the value of the excitation is zero. In a Hertzian Dipole a value of zero does not have an effect to anything (note that this is not the case for other excitations)\n\nIn your edited code you put an 'if' statement that makes the response zero after 1 nanosecond and this is what you get when plotting the waveform. I don't understand why you ask if it is truncated. After 1 nanosecond has a value of zero as you have specified. Also, you multiply the argument of the sine function with 1.33 In essence that means the frequency specified in the command is multiplied by that factor. As you specified 1.5 GHz you actually get 1.995 GHz (almost 2 GHz) which is what you see as you have almost two complete cycles in 1 nanosecond. Considering the period of 2 GHz is 0.5 nanoseconds that is almost spot on.\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/B6bLvGT7pQ4",
    "title": "SFCW simulation on GPRmax",
    "original_post": {
      "author": "Jay Shen Tham",
      "date": "Aug 3, 2021, 11:06:10PM",
      "content": "Hi All,\n\nI am currently trying to simulate SFCW wave on GPRmax and after watching the Youtube video on impulse response and introduction to SFCW simulation, I am still lost on how I can do so. Would like to check if there are any other available guides or workbooks/examples that could better help with my understanding on simulating SFCW wave on GPRmax. Your help would be greatly appreciated.\n\nThank you!\n\nBest Regards,\nJay"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2021, 9:55:09AM",
        "content": "Dear Jay,\n\nThe video on our Youtube channel is all there is at the moment. We may do a more detailed example in the docs for the next version (v.4) of gprMax but that is not available yet.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Jay Shen Tham",
        "date": "Aug 7, 2021, 11:47:19PM",
        "content": "Hi Craig,\n\nThank you so much for your reply and really appreciate the great work that you and the gprMax team have been doing.\n\nI really do hope that there would be a guide for SFCW simulation in the upcoming version as it would definitely be very helpful to understand it better.\n\nLastly, would like to check on when will v.4 of gprMax be released? (so that I can mark it on my calendar!)\n\nThank you and hope to hear from you soon! :) \n\nBest Regards,\nJay Shen\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 8, 2021, 8:00:14AM",
        "content": "Hi Jay,\n\nNo fixed date for the v.4 release. We have been talking about it from more than a 1yr now, but need to find time to finalise work on it and create updated documentation for the new features. Unfortunately, gprMax development often has to take a back seat to many other parts of our daily work.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hQjuW96jPzo",
    "title": "Can anyone help me create hyperbolic layer model?",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Jun 24, 2019, 2:54:31PM",
      "content": "In the figure below is the example of the construction of a two-channel modeling.\nThe following figure shows the modeling result.\n\nThis modeling was performed with Reflex software. But I'm not getting the same result.\n\nIf someone has done this before and can help me, thank you very much."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 25, 2019, 8:56:07AM",
        "content": "Hi Bruno,\n\nWe are going to need some information and clarity to be able to help. Please explain how you created the model, and what you mean by 'different results'.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LWqA2gPW5Go",
    "title": "Warning：Potentially significant numerical dispersion.",
    "original_post": {
      "author": "Elizabeth",
      "date": "May 31, 2017, 10:36:33PM",
      "content": "Hi gprMax master,\n\nThere is a warning when I run my model. The frequency is 2.4GHz. \nSomehow when I change the frequency lower than 2.4GHz, it gonna be fine.\nAnd the Bscan plot is very strange! What cause this？\nCan someone help me?\n\nThanks a lot!\nElizabeth"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 1, 2017, 4:59:03AM",
        "content": "Hi Elizabeth,\n\nYour model suffers from numerical dispersion. This is an artifact caused by the FDTD approximation to Maxwell's equations used in gprMax. There is a lot of interesting and good reading and videos that you can find online (e.g. youtube) explaining the workings of FDTD. If you use gprMax for understanding GPR you need to understand the numerical method (FDTD) used by gprMax and most importantly know its limitations. This will help you creating correct models. \n\nRegards\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bIEHrKdHOeE",
    "title": "#geometry_view output with relative permittivity values",
    "original_post": {
      "author": "KP",
      "date": "Nov 8, 2021, 7:27:22AM",
      "content": "Hi,\n\nI am looking for a way to label materials with their epsilon values instead of material IDs when using e.g. ParaView. \n\nIs it possible to push the information about relative permittivity into .vti files and access it with the gprMax macro (inside ParaView)? This would be very helpful in the analysis of simulation results in relation with a specific geometry of the system.\n\nBest regards,\nKacper"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Nov 10, 2021, 12:20:56AM",
        "content": "Hello Kacper\n\nThis question regularly comes out \nAs far as I know, this is not possible to link color in Paraview to permittivity values\n\nBest regards\nChristian\n"
      },
      {
        "author": "Alexis Shakas",
        "date": "Nov 12, 2021, 6:34:45AM",
        "content": "Hello, I would check out pyvista for this: https://docs.pyvista.org/examples/index.html\n\nAn approach could be that you use pyvista to create a vti (or vtk) file where you can assign various attributes to your mesh, one of which could be permittivity. There are quite a few instructive examples on their website.\n\nBest\nAlexis\n"
      },
      {
        "author": "KP",
        "date": "Nov 14, 2021, 7:56:20PM",
        "content": "Hi again,\n\nThank You for your comments and suggestions. I will check PyVista then.\n\nBest regards,\nKP\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-s2uc3fYKlU",
    "title": "anisotropic layer roughness",
    "original_post": {
      "author": "Tamara Gerber",
      "date": "Jun 17, 2020, 3:48:39AM",
      "content": "Hi,\n\nI would like to simulate the effects of anisotropic layer roughness on different antenna polarization, i.e. how a folded layer affects the gpr measurements in different measuring directions.\n\nTo build the subsurface model of a folded layer, I am using the #fractal_box and #add_surface_roughness commands, and aim to have layer roughness in the x-direction, but smooth interface in the y-direction. So I set the fractal weighting of both, fractal box and layer roughness, in one direction to zero, but in the geometry file I can see that the surface still undulates in that direction.\n\nDoes anyone here have experience with similar problems or do you have suggestions for alternative solutions? I am a bit confused what how the weighting parameters and the fractal dimension affect the roughness and\nhow I can determine not only the 'height' of roughness but also the wavelength of the folds.\n\nI've attached the input file and a screenshot of the subsurface model.\n\nAll the best,\nTamara"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2020, 3:22:18PM",
        "content": "Hi Tamara,\n\nIt is an interesting question. I recommend reading 'Fractals and Chaos in Geology and Geophysics' by Donald L. Turcotte to learn more about fractal dimension and weightings. I wanted to check some things myself in this book, but my copy is in the office which I can't currently access because of coronavirus.\n\nAnyway, the fractal weighting is perhaps a bit misleading as I think it is more of a scaling factor, so setting it to zero will still give you a fractal in that dimension. Actually my PhD student wants to do something similar, i.e. have a 3D model with layers that are rough but have invariant geometry in one direction - I think this is what you are also describing? I don't think there is a quick way to do this currently, but what you could do is generate a 2D model with the roughness you want, export the geometry view to a PNG, and then use the 'convert_png2h5' tool to turn it into 3D geometry with one direction invariant. You can then import this back into gprMax using the #geometry_objects_read command. It is a bit of a roundabout method though. \n\nThe other option is for you to look at editing the code that generates the fractal surfaces in 'fractals.py'. You might be able to manipulate the numpy array generated at line 103 to do what you need. Obviously if you can make this work it will be much quicker than the first method I mentioned.\n\nDr Iraklis Giannakis did a lot of work in his PhD thesis on using fractals to generate realistic geometry, so I will ask him to look at this thread to see if he has any further comments.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Tamara Gerber",
        "date": "Jun 21, 2020, 2:57:49AM",
        "content": "Hi Craig,\n\nThanks for the suggestions. I've found an online version of that book I can access through the university library here: https://www-cambridge-org.ep.fjernadgang.kb.dk/core/books/fractals-and-chaos-in-geology-and-geophysics/FA8339855DBBF054CCF18D8E5DDFFAC9#\nMaybe you can get access too to look things up during the lockdown. :)\n\n\nIn the meantime I tried to build the model without using the fractals at all: I wrote a python script to generate a hdf5 file which I use with the #geometry_objects_read command. That way I can also control the wavelength and the shape of the folds better. Here's what I get for the x-direction, while the y-direction stays invariant:\n\n \n\nYes I think you understood correctly: I am trying to investigate the effects of directional roughness of layers. I am working with radar data acquired on an ice stream in northeast Greenland. In a nearby ice core we observe small-scale folding of layers which are more pronounced perpendicular to the ice flow than parallel to it. We also see anisotropic effects in the radar data acquired with different antenna polarization and I'd like to understand better if and how we could differentiate anisotropic effects from the ice crystal fabric and from the small-scale folding.\n\nI am interested in the work of your PhD student and if you think our interests are similar I am happy to exchange my ideas, experience and results.\n\nAll the best,\nTamara"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 21, 2020, 3:48:43AM",
        "content": "Hi Tamara,\n\nYeh, controlling the roughness yourself maybe what you need. The nice thing about fractals (and why we chose to implement them in gprMax) is that they have been shown to represent real natural topography quite well.\n\nI had another thought that may be helpful. You could create a 2D model with fractal roughness, export it using #geometry_objects_write, then just extend the numpy array in the HDF5 file to make it a 3D. Then import using #geometry_objects_read. That is slightly less convoluted then the process using 'convert_png2h5'.\n\nI have some colleagues here at Northumbria University who do glaciology research including use of GPR - Dr Kate Winter and Prof John Woodward. They have worked in the Antarctic and Greenland. It might be interesting for us all to have a chat at some point to see if they are overlapping interests. Email me directly at my Northumbria email address (https://www.northumbria.ac.uk/about-us/our-staff/w/craig-warren/) if you want to follow this up.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Tamara Gerber",
        "date": "Jun 21, 2020, 10:55:19AM",
        "content": "Hi Craig,\n\nyes that's a good idea indeed! I've sent you an email to your Northumbria email address.\n\nAll the best,\nTamara"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1uzhHin6I1k",
    "title": "Bscan plot issue",
    "original_post": {
      "author": "Nathan Loubat",
      "date": "Apr 23, 2020, 5:32:22AM",
      "content": "Hi everyone,\n\nI have a problem when plotting my Bscans. \nThe signal response on the cylinder is extremely weak and almost invisible on the Bscan. \nDo you have any idea why?\n\nThanks in advance\nNathan"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 23, 2020, 5:46:31AM",
        "content": "Hi Nathan,\n\nYes. The answer is \"you cannot bend the laws of physics\". You need to understand what you are trying to model and what to expect. The contrast in electrical properties is very small. Hence the reflection would be very small. This compounded by the spreading loss mechanism makes the reflection really small. Obviously, a model does not include any gain either as a normal GPR would have. However, with a normal GPR it is unlikely that you will \"see\" easily such target with such low contrast. \n\nUnderstanding the physics is key ...\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/X_a_Uh1G0MM",
    "title": "plate",
    "original_post": {
      "author": "Londstate",
      "date": "May 9, 2019, 5:10:38AM",
      "content": "Dear Craig,\n        I have meet some questions again.\n        I want to simulate an image in GSSI 1500 about cylinder.But meeting the error.Would you help me?\n\n                                                                                                                                                                                                         Yours sincerely    Londstate."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 9, 2019, 7:30:11AM",
        "content": "Dear Londstate,\n\nPlease read our docs - http://docs.gprmax.com/en/latest/user_libs_antennas.html - the GPR antenna models can only be used at specific spatial resolutions, and your model is at 10mm which is not one of them.\n\nCraig"
      },
      {
        "author": "Londstate",
        "date": "May 9, 2019, 10:12:26PM",
        "content": "Thank you, my dear friend."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/T26dyCEFRz4",
    "title": "800Mhz antenna model",
    "original_post": {
      "author": "Zohaib Akbar Khan",
      "date": "May 29, 2024, 1:46:58AM",
      "content": "Hi team Gprmax, \nI have two questions regarding gprmax simulation and modeling.\n1: i am doing modeling for snow (to check the amplitude decay or attenuation on the basis of liquid water content with depth), so if i directly use the permitivity value in #material commond (effective permitiviity & condcutivity from the field data and CRIM), will it give the good results ? becasue i checked CRIM from debysFit tool but that gives the range of values for permitivtty on differnt frequencies & relaxation time.\n2: I need to model the impulse radar RTS 800 Mhz antenna for better results as direct #hertzian dipole would not give reliable informations but how to do the validations that modeled antenna is the good replica of the commercial one? please give the tips to model it, i defined domain and discritixation, do we have to consider any material other than air ? thanks"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_-wfkVjbXzc",
    "title": "Extraction of permittivity maps",
    "original_post": {
      "author": "Kwadwo Nyameadom Asare",
      "date": "May 8, 2025, 5:59:45AM",
      "content": "Hi everyone,\nI am currently working on a project where I need to produce permittivity maps after a simulation. I have read a number of articles and am still not getting the exact method of generating those. I would be glad to get some help with that process.\n\nThank you."
    },
    "responses": [
      {
        "author": "Zohaib Akbar Khan",
        "date": "May 10, 2025, 1:04:36AM",
        "content": "Hello,\nYOu can extract the permitivty map by creating the .h5 file in simulation using #geometry_objects_write and then with the help of lookup table, it will giive you the accurate labled data. thanks\nregards\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xf7AJe3IFKU",
    "title": "Time step Δt and dispersion relaxation times",
    "original_post": {
      "author": "Espen Svendsen",
      "date": "May 12, 2020, 11:12:49AM",
      "content": "Dear gprMax team,\n\nThe docs states the following after all the dispersion formulas:\n\nTemporal values associated with pole frequencies and relaxation times should always be greater than the time step Δt used in the model.\n\nDoes gprMax determine the necessary dt itself? (Like it does for the Courant limit?)\n\nOr should I set it manually using #time_step_stability_factor:\n- If yes: Any rule of thumb of how smaller the time step should be? Is it equivalent to normal sampling theorems?\n Thanks in advance\nEspen"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 12, 2020, 12:43:17PM",
        "content": "Hi Espen,\n\nThe relaxation time has to do with the material. It makes sense that is should be larger than the time step as if it is smaller then it does not capture at all the physics of the underlying mechanism. \n\nyou can make the FDTD time step smaller with the #time_step_stability_factor: command but this might not run at optimum numerical dispersion the solver. It all depends on the materials. It might require a finer spatial step that gives a smaller time step as a result.  You should experiment and see what happens.\n\nBest\n\nAntonis"
      },
      {
        "author": "Espen Svendsen",
        "date": "May 13, 2020, 4:00:39AM",
        "content": "Hi Antonis,\n\nThanks for the reply. I'm not sure what you mean by \"this might not run at optimum numerical dispersion the solver\". Would you mind rephrasing? \n\nAnd I'll experiment with the two options. \n\nBest \nEspen"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 13, 2020, 4:57:49AM",
        "content": "Hi Espen,\n\nFDTD as a numerical method suffers from numerical dispersion which we try to control by using at least 10 spatial steps resolution for our smallest wavelength. In addition when FDTD runs with a time step as close as possibly to the CFL stability condition (i.e. the one automatically selected) it has the minimum dispersion possible. Reducing significantly the time step can help sometimes with stability but the more it is reduced the less efficient is the algorithm in terms of its numerical dispersion for the given spatial resolution. So, if you can run with a DT close to stability is better (some times not much that is why I suggested to experiment)\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "Espen Svendsen",
        "date": "May 13, 2020, 5:27:31AM",
        "content": "Thanks for the quick reply and the elaboration - It explains it.\n\nBest regards \nEspen"
      },
      {
        "author": "Espen Svendsen",
        "date": "May 13, 2020, 6:09:51AM",
        "content": "Maybe I was too quick there, so a follow-up question:\n- Is it correct to understand the CFL critia as an upper bound? E.g. the \"cheapest\" dt you can get while still avoiding (too-much) numerical dispersion. Any smaller dt will give more precise results but be more computational expensive. \n- So could I lower dt while keeping my spacial descretization the same without making numerical dispersion worse (maybe even better?) \n\nThe exact case if above is a bit convoluted:\n\n I need to model a multipole Debye media, with lowest relaxation time of 8e-12 s. I usually use 1 cm discretization, giving me a dt of 2.35865e-11 s, which is to high. \n\n- Should I lower the spacial resolution (a lot) to get down to a resonable dt? (Hence increase both time and space discretization)? \n\n- Or can I use #time_step_stability_factor: to descrease dt to a third eg. 2.35865e-11 *0.3 = 7.0759e-12?\n\nI just experimented and using the time_step_stability_factor is much cheaper as I only change one dimension compared to three (X,Y, time), and I didn't even achieve a low enough dt with dx_dy_dz = 0.005 m (compared to 0.01 m).\n\nAny thing I have missunderstood or don't take into acount?\n\nBest regards\nEspen"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1rmWG3Gl7Ag",
    "title": "import complex geometry and plate",
    "original_post": {
      "author": "xianyang gao",
      "date": "Dec 13, 2016, 10:08:21AM",
      "content": "Hi everyone,\n\nI am trying to using #geometry_objects_read function to import complex geometry and  have successfully imported Austinman. I want to design complex geometry dataset like Austinman in the future.\nI know that MATLAB or python provides functions to write HDF5 and I have written simple dataset into HDF5 file using MATLAB. However, how to design complex dataset is still a big problems.\n\nCan you give me any idea of what tools can be used to design complex geometry dataset for HDF5 imported by gprMax?\n\nAnother question is that I cannot import a plate using #geometry_objects_read function, because the data in HDF5 file is formed in cells. How can I solve this problem?\n\nThank you very much for your time\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 14, 2016, 6:57:29AM",
        "content": "Hi Xianyang,\n\nThe #geometry_objects_read command was designed mainly for the purpose of allowing larger and more complex geometries created with gprMax to be re-used without having to be re-built, i.e. that is the geometry could just be loaded directly from a (HDF5) file. \nIf you are using the #geometry_objects_read command to import geometry that was originally created with gprMax then all objects are preserved, i.e. those at cell level (boxes, spheres etc...) and those that set cell edges (e.g. plates, edges etc...). \nIf you are using the  #geometry_objects_read command to import geometry that was not originally created with gprMax then you are only able to import at a cell level, i.e. voxels. This, as you have discovered, can be used to import the AustinMan/Woman models.\nSo, my advice would be to create your geometry in gprMax using the built-in commands (with the help of Python scripting if you like!) and then export them for use in other models. If you can find a CAD programme that can export to a voxel-based HDF5 file then that might be a possibility also.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Dec 14, 2016, 12:31:41PM",
        "content": "Dear Craig,\n\nThank you very much for the quick reply. That is really helpful.\n\nBest regards\nXianyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Zb4oYc6k6WU",
    "title": "file not found error",
    "original_post": {
      "author": "Avinash Kumar",
      "date": "Feb 28, 2022, 11:09:06AM",
      "content": "Dear gprMax users,\nearlier when i run any model it used to run smoothly but i dont know what happened to it .I have again uninstall and reinstalled gprMax but same problem(including the error message) persists even after following all the steps given in http://docs.gprmax.com/en/latest/include_readme.html#installation\n Kindly help me with the same \nThanks in advance\nAvinash kumar"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 3, 2022, 8:33:12AM",
        "content": "From the screenshot, it looks like you are simply in the wrong folder, i.e. you are in the user_models folder but looking for 'user_models/cylinder_Ascan_2D.in'.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7QTfnBwXdn0",
    "title": "medical gprMax modelling",
    "original_post": {
      "author": "Robert Gallagher",
      "date": "Apr 29, 2021, 7:36:30AM",
      "content": "Hello everyone, My name is Rob Gallagher and I am an MSc student at Cranfield University. For my thesis project, I will be exploring the use of gprMax for modelling medical imagery, specifically for the detection of cancerous elements relating to breast cancer. \n\nI would be keen to link up with anyone who has any experience in modelling human tissue or creating SAR imagery using gprMax.  \n\nFailing that, any pointers or suggestions would be gratefully accepted.\n\nKind regards,\nRob Gallagher"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qX4pgrPWTy8",
    "title": "Time window",
    "original_post": {
      "author": "Hussain Mumtaiz",
      "date": "Jun 5, 2021, 2:08:11PM",
      "content": "Hi all;\nI know we have two options for using the time window and the relationship between them.\nMy question is why do we have two options. Or do we have a position in building our model to use one option instead of another.\n\n#time_window: f1\nf1 parameter is the simulation time in seconds.\n#time_window: i1\ni1 is the total number of iterations.\nReg;\nHussain"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 9, 2021, 3:25:21PM",
        "content": "Dear Hussain,\n\nThere are two different ways of specifying the time window to suite different users needs. Most will choose a time window in seconds to match the time window used on a real GPR system, however, for other scenarios choosing a fixed number of iterations is more useful.\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/B6rSrfV8qsU",
    "title": "SFCW signal can be used in gprMax",
    "original_post": {
      "author": "Shikhar Sharma",
      "date": "Sep 5, 2023, 8:31:58AM",
      "content": "Hello Everyone,\n\n How to generate and feed a SFCW waveform of 2 MHz Pulse time , 1 GHz bandwidth and 10 microsecond PRT to the gprMax. Also How do we access the raw radar echo corresponding to every A-scan with phase delay which is a function of depth ?\n\nRequest you to share the step wise explanation which will highly support our development and accelerate the progress. Thanks in Advance\n\nRegards \nShikhar Sharma"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xQ8DoFAfDLQ",
    "title": "Modelling a Concrete Cylinder",
    "original_post": {
      "author": "Anthony Guerrera",
      "date": "Oct 23, 2016, 9:48:35PM",
      "content": "Hi,\n\nI'm having difficulties understanding how to model a concrete hollow pipe/cylinder at a specific depth which will sit in various layers of soil/dirt/aggregate for a B Scan.\n\nIt is my first time using this simulation tool which is required for a research project and I am struggling to work out how the syntax comes together to achieve my goals.\n\nSay for example I wanted to model a hollow concrete cylinder with an OD of 0.286 meters at a depth of 0.925 meters. With 2 layers of material (soil and sand) with soil from 0-0.5m and sand 0.5-1.0m in depth. What would the BScan.in look like?\n\nI would also like to setup my simulation so when I'm doing experimental testing I am able to see similar results. So I require an antenna input file for http://www.malags.com/products/mala-proex-system.aspx?type=tech_specs using a 2.3GHz antenna. Can the Mala 1.2GHz antenna in the library be used for this system with alteration to the frequency?\n\nThank you in advanced."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 24, 2016, 2:16:07AM",
        "content": "Hi Anthony,\n\nWelcome to the forum! I suggest starting out with the A-scan and B-scan example of a metal pipe buried in a half-space (http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder). Although this is a 2D model with a theoretical source (Hertzian dipole) it will help you understand how to build the model. You can then adapt this model for 2 layers and a hollow concrete cylinder. You can use a solid concrete cylinder then a cylinder of free space after to create the hollowing. Once you have a 2D model working you can think about extending it to 3D and including an antenna model. I am not familiar with the design of the Mala 2.3GHz antenna, so I can't really comment on how closely the 1.2GHz may represent it. You can certainly excite the 1.2GHz model with a higher frequency pulse and try it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 24, 2016, 2:17:18AM",
        "content": "I also notice you are trying to see down to 1m with a 2.3GHz antenna. This is quite a high frequency for such a depth."
      },
      {
        "author": "Anthony Guerrera",
        "date": "Oct 24, 2016, 7:27:15PM",
        "content": "Thanks for the quick response. Is there a way to visualise the defined file to see the placement of things? Yes you are right about the depth, it will be done on a much smaller scale for testing."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 25, 2016, 3:28:28AM",
        "content": "Yes, you can create a geometry view and visualise it using Paraview (http://www.paraview.org). Details in the User Guide at http://docs.gprmax.com/en/latest/output.html#geometry-output\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/S9HPRTCWd_U",
    "title": "FloatingPointError: divide by zero encountered in log10",
    "original_post": {
      "author": "Carlos Díaz",
      "date": "Sep 18, 2017, 8:20:33PM",
      "content": "Hi,\n\nI made a small change of size of antenna GSSI, just put bigger the casesize in y axis, I am trying to plot its pattern but when I run the last script (plot_fileds) appear the following error\n\n(gprMax) C:\\Users\\ch.diaz\\Desktop\\gprMax\\user_libs\\antenna_patterns>python -m plot_fields 2.antenna_GSSI_1500_patterns_E.npy\nCentre frequency: 1.5 GHz\nCritical angle for Er 1 is 90.0 degrees\nWavelength: 0.200 m\nObservation distance(s) from 0.100 m (0.5 wavelengths) to 0.300 m (1.5 wavelengths)\nTheoretical boundary between reactive & radiating near-field (0.62*sqrt((D^3/wavelength): 0.020 m\nTheoretical boundary between radiating near-field & far-field (2*D^2/wavelength): 0.036 m\nC:\\Users\\ch.diaz\\AppData\\Local\\Continuum\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\matplotlib\\axes\\_base.py:3045: UserWarning: Attempting to set identical bottom\n==top results\nin singular transformations; automatically expanding.\nbottom=0.0, top=0\n  'bottom=%s, top=%s') % (bottom, top))\nFloatingPointError: divide by zero encountered in log10\n\nCould you guide me, to discover the mistake.\n\nThanks a lot\n\nCarlos Díaz\nBogotá, Colombia"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 20, 2017, 4:49:31AM",
        "content": "Hi Carlos,\n\nThat error is at the point the patterns should be plotted. I suggest looking carefully at the actual values of the data you are trying to plot. Also adjusting the dimensions of the antenna case may require you to adjust the distances that the patterns are being calculated from the antenna. Calculating patterns from the full antenna models is not a trivial exercise, as I'm sure you are realising. I don't have more time at the moment to give further advice.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Sdyxrl2x9eE",
    "title": "Subject: Request for Clarification on Material Distribution and Model Assumptions in gprMax",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Nov 22, 2024, 4:28:38PM",
      "content": "Dear gprMax Community,\nI hope you are doing well. I am currently working on a simulation using the Peplinski model in gprMax, and I have a few specific questions that I hope you can help clarify:\nRegarding the material distribution in a single-layer setup, does the model assume a uniform or non-uniform distribution of materials? If non-uniform, could you explain how the materials are distributed spatially?\nThe parameter specifying the number of dispersive materials (e.g., 50 materials) in the mixing model:\nHow are these materials created and distributed?\nIs there a relationship between this number and the uniformity or heterogeneity of the soil layer?\nWith the assumption that the soil texture and clay percentage are well-defined:\nUnder these conditions, does the Peplinski model inherently create a uniform or heterogeneous soil layer?\nIf heterogeneous, how is the heterogeneity introduced or controlled in the model?\nI would greatly appreciate any detailed insights or explanations you could provide, especially regarding how these assumptions and parameters influence the spatial distribution of materials in the simulation.\nThank you for your time and support!\n\nBest \n\nHiman"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 2, 2024, 9:34:07AM",
        "content": "Dear Himan,\n\nThe Peplinski soil model provides a number of different dispersive dielectric materials in your model depending on the soil properties specified and the number of them requested. The distribution of the materials is done using fractals, see https://docs.gprmax.com/en/latest/input.html#fractal-box. I'd recommend the following as a starting point for reading about fractals in geophysics:\n\nTurcotte, Donald L. Fractals and chaos in geology and geophysics. Cambridge university press, 1997.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iH9FE7gBd0U",
    "title": "Spatial discretization and effect on amplitudes and waveforms",
    "original_post": {
      "author": "Bastien Dupuy",
      "date": "Jun 29, 2022, 11:53:46AM",
      "content": "Hi,\nFirst, thanks to GPRMax team to make their nice code available open source!\nI have been using GPRmax the last months to do some testing of wave propagation in snow and ice layers.\nI have some questions regarding spatial discretization and discrepancy in amplitudes.\nIn the attached example, I have several snow layers and a bedrock. The minimum wavelength is in the bedrock material, permittivity=6.45, lambda=17.4cm. I did several tests where the only thing that I change is the spatial discretization (keeping it smaller than lambda/10=1.7cm), and I get noticeable amplitude difference on the first arrival as well as strong differences in the waveforms of the late arrivals. Arrival times looks consistent and amplitude of the first reflected events as well.\nSo I am wondering why there is so much differences while the spatial discretization is supposed to be good enough?\nBastien"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 29, 2022, 8:37:29PM",
        "content": "Hi Bastien,\n\nWhat you see is quite OK. I don't know why you are monitoring the magnetic field component but the amplitude patterns will not be different if you monitored Ez which is the same polarisation as your source and is what a 2D model kind of tries to simulate. When you excite a Hertzian Dipole you specify the current (I) in Amps which is the same for all your simulations (you can change this but that is not the point ...) gprMax will excite a simulated dipole moment (I * DL) using a current density term in the appropriate Maxwell's equations. The bottom line here is that your field amplitudes that will be introduced will be different as your cell size is changing. If you convert what you see to Amps for magnetic fields and Voltages for electric fields by multiplying with the DL you use in each model the numbers should much well. Any differences will be down to model accuracy and numerical dispersion that is minimised when you are using finer resolution. In other words the models should tend to converge to the finest one as you are reducing the spatial step. \n\nHope this makes some sense!\n\nAntonis\n\n"
      },
      {
        "author": "Bastien Dupuy",
        "date": "Jun 30, 2022, 5:50:18AM",
        "content": "Hi Antonis,\n\nThanks for the detailed explanation.\nI am trying to replicate some real data to test some quantitative processing algorithms. We try to get back reflectivity from real data and then we are trying to get reflection coefficients from the amplitude data. A related question: do you have some recommendation for spherical divergence corrections? In the literature, there are a lot of different formulations (1/t, 1/t^2, 1/sqrt(t)) but it is not clear to me which one is describing the physical mechanism in order to get back the \"true\" amplitudes.\n\nBastien\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 30, 2022, 6:13:59AM",
        "content": "Hi Bastien,\n\nYou will not get true amplitudes from a 2D model and also from a model that is using a theoretical source description. Correcting for spreading loss depends in many things and amongst the most important ones is the antenna pattern that is not a homogenous spherical one. The correction is mostly used to enhance the appearance of data (visual gain) and not so much to end up with true amplitudes. Actually, very few GPR systems provide what you can call true amplitudes unless you use them with calibration from known targets and environments. In 2D the spreading loss is wrong as energy is spread on a 2D surface and not a volume.\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Bastien Dupuy",
        "date": "Jul 4, 2022, 8:30:30AM",
        "content": "Hi,\n\nThanks!\nOk, that's similar to seismics.\nRegarding the real data, I guess we will have to find a way to  go around this.\n\nBastien\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/aPJ6rV4wfNU",
    "title": "IN file to python",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Jul 2, 2019, 4:57:40AM",
      "content": "Hallo everybody\n\ni have question .do you know any method to write variable in (.in) file . i want to make it automatically by python how can i write code in python (.py) and generate file (.in)\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\ni want as python declare variables and i determine the value with keyboard like this in python:\n\na=input(\"please give us the value of dx\")\nb=input(\"please give us the value of dy\")\nc=input(\"please give us the value of dz\")\n\nand then i obtain in (.In) file this:\n#dx_dy_dz: a b c"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 3, 2019, 3:54:07AM",
        "content": "Hi Ahmed,\n\nYou can use a block of Python in your input file, see - http://docs.gprmax.com/en/latest/python_scripting.html\n\nOr if you are very familiar with Python you can write a pure Python script and call gprMax via the API. This is not formally documented so you'll need to look at the code to see how it works.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Anadyr",
        "date": "Dec 13, 2019, 7:53:19AM",
        "content": "Hi Anhmed,\n\ndid you fix the problem?\nCan you show me, how you put the variables into the python script?\n\nThanks in advance.\n\nRegards"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2fEFSF98UdI",
    "title": "About thecentral frequancy",
    "original_post": {
      "author": "HT.T",
      "date": "May 18, 2020, 3:48:16AM",
      "content": "Dear Craig\n        When I analyze the spectrum of the direct wave, I find that the frequency of the spectrum center, that is, the center frequency is different from the detection frequency. For example, \n\nwhen the detection frequency is 900 MHz, the spectrum analysis of the direct wave shows that the center frequency is about 1000 MHz, and when the distance between the receiving \n\nand transmitting antennas is very close, it is even higher than 1000 MHz. What is the reason for this。\n \n\n                                                                                                                                                                                                                                                                                       HT.T\n\nthis is my code\n\n#domain: 0.6 0.6 0.002 \n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 40e-9\n\n\n#waveform: ricker 10 1200e6 my_ricker\n#hertzian_dipole: z 0.3 0.30 0.001 my_ricker\n#rx: 0.9 0.30 0.001\n#src_steps: 0.01 0 0\n#rx_steps: -0.01 0 0\n\n#geometry_view: 0 0 0 1.2 0.6 0.002 0.002 0.002 0.002  free_space  n"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 18, 2020, 1:54:05PM",
        "content": "Your inout file has an error in the #rx: command but even if you fix this you will get discrepancies in the frequency analysis. There are few reasons that you get this. \n\nThe first and most important one has to do with the actual electromagnetic model. When solving a 2D problem you are using a Line Source which is infinite long. The impulse response of this source is not finite and this is what is causing the different effect in the frequency of the response as you see it. Your result is the convolution of this solution with your excitation and hence is affected by the nature of the impulse response in this way. You can test this with the analytical solution as it will agree with gprMax. However, you need to be careful as in 2D is the solution of a line source and not a dipole source.\n\nIn gprMax when you are doing a 2D simulation and you are using a #hertzian_dipole: you are actually using a line source. If you are doing a 3D simulation you are using a dipole source.\n\nIf you do this experiment in 3D you will see that the frequency is not changing (if no other errors are there) as the impulse response (i.e. the Green's function) is of a finite duration. \n\nThe other error that you need to be careful off (not so much here but it is something to remember) is to have appropriate frequency resolution. For 40 nanoseconds time window your frequency resolution is 25MHz so your FFT bins are a bit broad and you can be +/- around there in determining your peak frequency.\n\nHope that helps \n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/a4iNELOl4w8",
    "title": "Re: i can't see target in B-scan",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Oct 10, 2018, 8:25:16AM",
        "content": "Hi Luiz,\n\nYou can try to apply a display gain to the data from the figure options -> images -> change the min and max values. Or you can try to apply a time gain through a GPR processing software.\n\nYou should also check your time window because in your input file is defined  at 450ns and  the output result has a TW of 300ns.\n\nKind Regards,\nDimitris"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 10, 2018, 12:53:53PM",
        "content": "Hi Luiz,\n\nThe input file that you supplied will not run in gprMax as it is neither a 2D domain nor proper 3D domain.\n\n#domain: 30 25 0.01\n#dx_dy_dz: 0.005 0.005 0.005\n\nIn the z-direction your domain is 0.01m with a spatial resolution of 0.005m, i.e. you have 2 cells. You will have received the following warning:\n\n'gprMax.exceptions.CmdInputError: #pml_cells has too many cells for the domain size'\n\nSo either make your model 2D by reducing the z-direction domain to 0.005m or increase it sufficiently to be a 3D model. Once this is corrected we can proceed to investigate further as Dimitris already suggested.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZMESF10s1ok",
    "title": "What will be the values of the parameter used in #add_dispersion_debye or #add_dispersion_lorentz for any single layer subsurface",
    "original_post": {
      "author": "Sumona Chatterjee",
      "date": "Jun 14, 2016, 10:13:08AM",
      "content": "Hello,\n\nI am very new to gprMax software.I have done simulation with gprMaxV3.0 using homogeneous sand as subsurface material.Now I want to add dispersion characteristics to sand.I want to compare the results(A-scans and B-scans) for both the homogeneous sand as surface material and sand with dispersion properties as surface material.Can you please provide me the values of the parameter i.e. no of debye pole used,relaxation time etc used in #add_dispersion_debye or #add_dispersion_lorentz for any single layer subsurface(such as sand).\n\nBest regards,\nSumona Chatterjee\nMS Scholar\nIIT Kharagpur\nIndia"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 15, 2016, 12:02:50AM",
        "content": "Hi Sumona,\n\nThere is not one set of parameters (say, for a Debye model) that will characterise sand. For example, it depends how saturated the sand you want to simulate is. I suggest doing a search  for measured properties of the sand you want to simulate, and then trying to fit a Debye model to the data. You may need multiple Debye poles depending on the dispersive properties. For a dry sand I would not think you need to add any dispersive properties.\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jun 15, 2016, 12:51:07AM",
        "content": "Hello Sir,\n\nThanks a lot for your valuable suggestion.\n\nSumona"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/U7v8cSq8TOw",
    "title": "Query on target's response",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "Jan 8, 2024, 6:26:51AM",
      "content": "Dear sir,\n\nI hope you are keeping good health.\n\nWe (our team) have been working on the analytical modeling of bistatic GPR. We developed one simplified model for imaging buried targets using bistatic off-ground GPR. The time-reversal imaging (TRI) technique has been implemented for imaging. First, we have attempted to validate our developed model using the gprMax data set. We have taken one target and got one hyperbola in the result which is fine. Next, we proceeded to experimental data in controlled laboratory conditions. We have considered a steel tiffin box as a target and buried it in the sand (14 cm depth). Performed B-scan recording using bistatic off-ground configuration and processed the data. We obtained two hyperbolas. We are not getting how two hyperbolas come for a single target. When we apply the TRI method using this data, focusing on two different points is observed. One focus is at 15cm (nearby target location) and the other is at 25.5 cm. Is this due to second-order reflections of the target or multiple scattering centers of a device? Not clear how to analyze this. Could you please give any suggestion on which direction we need to analyze this? The specifications of laboratory experiments are as follows:\nAgilent technologies VNA to record S-parameters\nTwo TEM Horn antennas (BBHA 9120A model number) with 30 cm separation (Common offset configuration)\nThe antenna height above the sand surface is 34 cm\nSteel tiffin box (diameter 12.5 cm, height 6 cm)\ndepth from the sand surface to the top of the target is 14 cm\nfrequency range: 0.8-2 GHz.\n(SFCW GPR)\n\nKindly help us.\n\nRegards\nRohit"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 12, 2024, 7:28:17AM",
        "content": "Hi Rohit,\n\nThere can be many reasons why you observe more hyperbolic reflections especially in an experimental setup. If you simulate with gprMax the experimental setup as close as possible then you should observe similar responses in terms of the key signatures you see. If you place the cylindrical metallic box with the surface upwards (e.g. similar to a disk) you might get two semi-hyperbolas from the edges. The possibilities are many. Obviously, in an experimental setup you need to make sure there are no other sources/targets that create reflections. \n\nHope this helps\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IOm-8jC9us4",
    "title": "Tilting antennas in gprMax?",
    "original_post": {
      "author": "Arba S.",
      "date": "Aug 5, 2023, 4:49:24PM",
      "content": "Hello,\n\nI hope that this post finds you well. Since I am quite new to the world of GPR, there is a lot that I need to clear up in the questions I am asking and in how I address them. For now, my work may require me to tilt a GPR antenna at an angle, and whether out of inexperience or otherwise, I have not found the means to do so in gprMax simulations. Is it possible to do so in gprMax?\n\nBest,\nArba"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Aug 17, 2023, 2:12:35AM",
        "content": "At least you should be able to build the model arround the antenna.\n\nBuilding a tilted model is possible, but not easy.\n\n\nCheers, Micha\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/V-bJb1tnca8",
    "title": "using MPI to run on both GPU's",
    "original_post": {
      "author": "Michael Fehér",
      "date": "Feb 11, 2021, 10:03:38AM",
      "content": "Dear people,\n\nI got this mashine running on Linux. It was doing fine.\n\nNow it's Windows and the drama begins.\n\nAfter having to downgrade CUDA from 11.1 to 10.2 to run pycuda the MPI shows errors.\n\nFirst things first: I gave VirtualStudio BuildTools 2019 installed.\nPython got its pip install mpi4py\n\n\npython -m gprMax user_models\\cylinder_Bscan_GSSI_1500gpu.in -n 10 -gpu  works\npython -m gprMax user_models\\cylinder_Bscan_GSSI_1500gpu.in -n 10 -gpu 0  works\npython -m gprMax user_models\\cylinder_Bscan_GSSI_1500gpu.in -n 10 -gpu 1  works\n\npython -m gprMax user_models\\cylinder_Bscan_GSSI_1500gpu.in -n 10 -mpi 3 -gpu  0 1 doesn't work\n\n------------------------------------------\n(gprMax) e:\\gprMax>python -m gprMax user_models\\cylinder_Bscan_GSSI_1500gpu.in -n 10 -mpi 3 -gpu 0 1\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method =======================\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.5 (Big Smoke)\n\n Copyright (C) 2015-2020: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as\n  published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty\n  of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with gprMax.  If not, see\n  www.gnu.org/licenses.\n\nHost: Windows10VM | System manufacturer System Product Name | 1 x Intel(R) Core(TM) i9-9900X CPU @ 3.50GHz (10 cores, 20 cores with Hyper-Threading) | 128GiB RAM | Windows 10 (64-bit)\nGPU(s) detected: 0 - TITAN RTX, 24GiB | 1 - TITAN RTX, 24GiB\nTraceback (most recent call last):\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 197, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"e:\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 67, in main\n    run_main(args)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 175, in run_main\n    run_mpi_sim(args, inputfile, usernamespace)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 358, in run_mpi_sim\n    if args.mpicomm is not None:\nAttributeError: 'Namespace' object has no attribute 'mpicomm'\n\n(gprMax) e:\\gprMax>\n------------------------------------------------\n\nI can't figure out where I have to start. maybe It's my strange bond to windows or something else. \n\nDo you have any idea (hint) where I can sart to solve this?\n\nSincerly, Michael"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 18, 2021, 3:36:23PM",
        "content": "Hi Michael,\n\nI've seen this error before. I'll need to look into it a bit more, but if I remember it indicates there is a problem with your MPI installation.\n\nKind regards,\n\nCraig \n\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 19, 2021, 7:07:25AM",
        "content": "thanks for your efforts.\n\nyes, I'm aware of that it is in my installation. but I really don't know where to start with since I'm not that familar with all the pyton/windows/visual studio stuff.\n\nsincerly, Micha\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 19, 2021, 8:05:54AM",
        "content": "One fairly quick check is to see if the mpi4py package loads correctly in the Python environment. So, activate the conda environment for gprMax, launch Python, and try to import mpi4py, e.g. from mpi4py import MPI\n\nCraig\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 19, 2021, 8:44:52AM",
        "content": "Thank you!\n\n(gprMax) e:\\gprMax\\user_models>python\nPython 3.9.1 (default, Dec 11 2020, 09:29:25) [MSC v.1916 64 bit (AMD64)] :: Anaconda, Inc. on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from mpi4py import MPI\n>>>  \n\nno errors, likely\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 23, 2021, 5:46:47AM",
        "content": "Great. After importing mpi4py can you do/check the following:\n\ncomm = MPI.COMM_WORLD\nprint(comm.name)\n\nCraig\n\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 23, 2021, 6:14:40AM",
        "content": "thanks for your assistance.\n\n(gprMax) e:\\gprMax>python\n\nPython 3.9.1 (default, Dec 11 2020, 09:29:25) [MSC v.1916 64 bit (AMD64)] :: Anaconda, Inc. on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from mpi4py import MPI\n>>> comm = MPI.COMM_WORLD\n>>> print(comm.name)\nMPI_COMM_WORLD\n>>>\n\nregards, Micha\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 23, 2021, 11:46:20AM",
        "content": "Thanks. I've made a small change to the MPI spawn code in gprMax. Can you pull the new code and see if this resolves the error you were getting.\n\nCraig\n\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 24, 2021, 6:42:47AM",
        "content": "Dear Craig,\n\nmany thanks foor you attention!\n\nbut unfortunatelly is is'nt workung as expected.\nfurthermore since the update I've got troubles tu run gprMax uit of a subfolder. I'll tell below\n\nfirst: MPI\n\n(gprMax) e:\\gprMax>python -m gprMax user_models\\cylinder_Bscan_GSSI_1500gpu.in -n 10 -mpi 3 -gpu 0 1\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method =======================\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.5 (Big Smoke)\n\n Copyright (C) 2015-2020: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as\n  published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty\n  of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with gprMax.  If not, see\n  www.gnu.org/licenses.\n\nHost: Windows10VM | System manufacturer System Product Name | 1 x Intel(R) Core(TM) i9-9900X CPU @ 3.50GHz (10 cores, 20 cores with Hyper-Threading) | 128GiB RAM | Windows 10 (64-bit)\nGPU(s) detected: 0 - TITAN RTX, 24GiB | 1 - TITAN RTX, 24GiB\n\n=== MPI task farm (USING MPI Spawn) ===================================================================================\n=== MPI master (MPI_COMM_WORLD, rank: 0) on Windows10VM.terracarta.local spawning 2 workers...\n\nTraceback (most recent call last):\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 197, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"e:\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 68, in main\n    run_main(args)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 176, in run_main\n    run_mpi_sim(args, inputfile, usernamespace)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 406, in run_mpi_sim\n    newcomm = comm.Spawn(sys.executable, args=['-m', 'gprMax'] + myargv + [workerflag], maxprocs=numworkers)\n  File \"mpi4py/MPI\\Comm.pyx\", line 1534, in mpi4py.MPI.Intracomm.Spawn\nmpi4py.MPI.Exception: Internal MPI error!, error stack:\nMPI_Comm_spawn(cmd=\"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\python.exe\", argv=0x000001EC2D7D0570, maxprocs=2, MPI_INFO_NULL, root=0, MPI_COMM_WORLD, intercomm=0x000001EC2D7EE0E0, errors=0x0000000000000000) failed\nInternal MPI error!  FAILspawn not supported without process manager\n\nSECOND subfolder:\n\n(gprMax) e:\\gprMax\\user_models>python -m gprMax cylinder_Bscan_GSSI_1500.in -n 10\n\nTraceback (most recent call last):\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 188, in _run_module_as_main\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 147, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 111, in _get_module_details\n    __import__(pkg_name)\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.5-py3.9-win-amd64.egg\\gprMax\\__init__.py\", line 11, in <module>\n    from .gprMax import api as run\nModuleNotFoundError: No module named 'gprMax.gprMax'\n\n\n\n\nsincerly, Micha\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 24, 2021, 10:39:57AM",
        "content": "Looks like your MPI may not support the MPI.Spawn mechanism which is the default that gprMax uses. However, you can try the alternate mechanism, example as follows:\n\nmpirun -n 3 python -m gprMax user_models\\cylinder_Bscan_GSSI_1500gpu.in -n 10 --mpi-no-spawn -gpu 0 1\n\nLet me know how this goes.\n\nCraig\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 25, 2021, 5:15:05AM",
        "content": "yes, this works!\n\nnot mpirun but mpiexec. \n\nThank you very much, problem solved.\n\n\nCheers, Micha\n\nPS.: do you can imagine why VisualStudio doesn't accept mpi-spawn? didn't find anything about this ... maybe used the wrong keywords.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pXQM_5FTNQ4",
    "title": "Matlab vs Phyton GPRmax Plot of Bscans",
    "original_post": {
      "author": "filippo bandini",
      "date": "Apr 17, 2019, 7:10:02AM",
      "content": "Hello,\nany help would be appreciated.\nI was trying to plot b-scans in Matlab with plot_Bscan.m .\nI see a plot with different features compared to Phyton.\nCan you check the attachments? It looks like in Matlab I see a lot of \"waves\"/\"reflections\" that In phyton do not appear on the white screen. \nWhy is that? The colour scale is the same.\n\nThanks a lot for everyone that can answer my question!\nAll the best!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 18, 2019, 3:53:14AM",
        "content": "Hi Filippo,\n\nPlease plot them with the same colormap so we can better compare.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "filippo bandini",
        "date": "Apr 18, 2019, 7:11:34AM",
        "content": "I attach plots with same colours.\n\nModel ouput file is at\nhttps://dtudk-my.sharepoint.com/:u:/g/personal/fban_win_dtu_dk/EUPCYnfUqmtEtMwkG7r1l1QB-XyjY8mSHzoxfUlPUQCA3w?e=8oRQn5.\nIt really looks like we see different features!\nBest!"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Apr 18, 2019, 8:21:48AM",
        "content": "Hi filippo,\n\nIt is not that you see extra features/reflections, it is just that Matlab's default colormap is using 64 colors to represent your data.\n\nAdd in plot_Bscan.m after line 32 this line: colormap(winter(256)); or colormap(any colormap that you want (256));\n\nKind regards\nDimitris"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-HnoOeao-A8",
    "title": "\"Name Error:name 'j' is not defined\" is coming during simulation",
    "original_post": {
      "author": "Sumona Chatterjee",
      "date": "Jul 19, 2016, 5:34:30AM",
      "content": "Hi,\n\nI wrote the input file for gprMax using #add_dispersion_lorentz command. but whenever I am trying  to run the file,it is showing \"Name Error:name 'j' is not defined\" in command prompt.I am not able to understand why this error is coming. Please solve my problem.\n\nI have used gprMax v.3.0.0.The input file and screenshot of cmd prompt are attached."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 19, 2016, 6:07:38AM",
        "content": "Hi Sumona,\n\nThanks for spotting the bug with the Lorenz dispersion. I have fixed the error your were seeing in the latest version (v.3.0.5) from GitHub.\n\nHowever, there are a couple of issues with your input file you should look at:\n\n- Why have you defined a metal with a relative permittivity of 100?\n- Your metal box object and receiver are in the PML region of the model\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jul 20, 2016, 1:27:32AM",
        "content": "Hello,\n\nThanks for your reply.\n\nI have considered that the metal is having infinite relative permittivity so I gave a high permittivity value i.e. 100 to it inside the input file.\nWhile I wrote the input file I didn't consider the position of PML region.Whether it would impact on the output? Should I need to rectify it?\n\nAnother query, in your website, gprMax v3.0.0 is available.So when can I expect to get the version v.3.0.5?\n\n\nThanks,\nSumona"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 20, 2016, 4:46:32AM",
        "content": "Hi Sumona,\n\nYou should not place sources, receivers, or targets in the PML region, as the fields that propagate in these regions have no useful meaning. You will see a warning message printed if you try to place a source or receiver in the PML.\n\nThe latest version of the code (v.3.0.5) is always available to download from GitHub (the Download tab). However, you can update gprMax without having to completely reinstall it using these instructions - http://docs.gprmax.com/en/latest/include_readme.html#updating-gprmax\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jul 20, 2016, 7:51:31AM",
        "content": "Hello,\n\nThanks a lot for your suggestion.\n\nCan you please provide me the url of the code v.3.0.5.I need to download the code.\n\nI am searching on https://github.com/gprMax/gprMax/releases but here the latest code is showing as v.3.0.0\n\nI am trying to update the gprMax, but \"(gprMax)$ git pull is not working\". It is showing no such batch file found."
      },
      {
        "author": "Craig Warren",
        "date": "Jul 20, 2016, 7:57:57AM",
        "content": "v.3.0.5 is the version that is the (current) master on GitHub, you can download it by clicking the 'Clone or download' link on the main GitHub page. If you do this you should follow the installation instructions to build and install gprMax, i.e. step 3. If you want to update gprMax in the way I suggested in my previous post you must have installed it using the current set of installation instructions - http://docs.gprmax.com/en/latest/include_readme.html#installation\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jul 20, 2016, 9:12:30AM",
        "content": "Thank you Sir. My problem is solved now after using the updated code.\n\nThanks,\nSumona"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hZdfB01BiGo",
    "title": "Re: Geometry view error",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 19, 2024, 4:26:52AM",
        "content": "Hi,\n\nAs the error message says, you have no geometry view in this model as your line with the geometry view does not start with a hash.\n\nCraig\n\nOn Monday 19 February 2024 at 07:33:00 UTC sepideh....@gmail.com wrote:\nHi everyone\nI need some help. I run the following code for B scan and try these codes both to see the geometry before running the model but none of them works and I got the following error. Can you help me with this?\n-------------------------------------------------------------------------------------------------------------------------------------------\npython -m gprMax user_models/cylinder_Bscan_GSSI_1500.in -n 1 --geometry-only\npython -m gprMax user_models/cylinder_Bscan_GSSI_1500.in --geometry-only\n\n-------------------------------------------------------------------------------------------------------------------------------------------\n#title: B-scan from a metal cylinder buried in a dielectric half-space with a GSSI 1.5GHz 'like' antenna\n#domain: 0.480 0.148 0.235\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n#material: 6 0 1 0 half_space\n#box: 0 0 0 0.480 0.148 0.170 half_space\n#cylinder: 0.240 0 0.080 0.240 0.148 0.080 0.010 pec\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.105 + current_model_run * 0.005, 0.074, 0.170, 0.001)\n#end_python:\n\ngeometry_view: 0 0 0 0.480 0.148 0.235 0.001 0.001 0.001 b n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KqUIagCc_5A",
    "title": "comparison of analytical model with gprMax result",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "Feb 26, 2021, 12:53:35AM",
      "content": "Dear sir\n              I have been working on development of an analytical model for bistatic GPR scenario. Currently I am reproducing few analytical models that available in literature (standard models like Kruk's model, Busch's model etc.). On comparing result of analytical model (MATLAB simulation) and result of same scenario in gprMax, the results are matching in received time. Eq. (11) in attached paper. But the results produce a huge difference in amplitude. Amplitude of gprMax result is very low. I hope gprMax tool can validate any analytical model. I couldn't find where it is wrong. \nIf possible try to help.\n\nThank you\n\nRegards\nRohit"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 28, 2021, 8:25:10AM",
        "content": "Hi Rohit,\n\nGreat effort and not an easy undertaking! \n\nIn making a comparison with an analytical solution you must make sure the all the conditions imposed for the validity of the approximations used to obtain the analytical solution are met. For example equations (6) and (7) need to be fulfilled in both models. (6) is relatively easily to be done but (7) must also hold and an equivalent numerical model needs to be constructed. In other words, if the separation of Tx and Rx is not fulfilling (7) for all frequencies in the model then the solution is not applicable. Finally in (3) a discussion about the source wavelet needs clarification. W needs to be connected to the current on a Hertzian dipole in the model and the notion of an effective wavelet is very good for the work presented there but needs to be carefully made equivalent to the original description of a source current density that gprMax will use for a theoretical source. Few points of advise:\n\n1. Don't start with finite dipoles but with infinitesimal sources for which the models are easier to compare. A finite dipole model theoretically has more assumptions in it and is not as easy to validate and should be another step. \n2. The excitation of a theoretical hertzian dipole in gprMax and one having a physical model of the structure are different. The theoretical source assumes a known current pulse of the dipole. A proper model that includes the structure of the antenna uses a voltage pulse at the feeding point. \n3. Unless the excitations are equivalent there is no easy way to make sense of the amplitudes. The number themselves to not mean a lot as they depend on input parameters that are not often realistic. For convenience we use '1' as amplitude for the current pulse in a hertzian dipole. This is not really as realistic in practice but also a Hertzian dipole does not exist in practice as it is a very inefficient antenna! It is a great convenience though!\n\nI would recommend to normalise your results to their respective maximums. If they fit on time of arrival (as they most likely do) and then on shape and relative amplitude variation between them then you are at a good place as the difference is on an arbitrary constant that is not important. If the rate of attenuation and shape of the wavelets are not matching then there is something else that needs to be checked and mostly will be about the equivalence of the input conditions assuming that your implementation of Jans's and Evert's work is correct. Obviously, gprMax has regions of validity as any numerical model. These needs to be respected as well but I am sure you know this given the work you are trying to do.\n\nGood luck and will be interested to see the results of this comparisons!\n\nBest wishes\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8u5NJfeOP4o",
    "title": "Tips for a model with increasing dielectric costant and .out to sgy file converter",
    "original_post": {
      "author": "Emiliano",
      "date": "Dec 15, 2017, 9:43:39AM",
      "content": "Hi everyone and thank you for your help!\nI have two questions, I hope they are relevant.\n\n1) I would like to model a half space in which the dielectric costant and the conductivity increase with depth (for example due to the increase in water content). I can't find a command (or a combination of commands) to do this, if not make lots of #box with different properties, but it isn't a good way. Any suggest?\n\n2) Is there a way to convert *.out file in a seg-y? \n\nThank you!\nBest reguards\n\nEmiliano"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 17, 2017, 11:00:38AM",
        "content": "Hi Emiliano,\n\n1. There is no command to do what you need in terms of modelling an increase of water content with depth. For this you need a mixing model and maybe the Peplinski model could be used depending on the soil you are trying to model. You can program the correct spatial distribution using python as it is most likely that you will need to somehow use a stochastic process and not make up the model using fixed horizontal layers as these will be not so much representative of the gradual changes that you want to model. So, there is no easy solution there but the process is not very dissimilar in principle from the one that gprMax uses to model soils. The extra complexity is in making the properties more depth dependent. Maybe you can use a number of fractal boxes that have different parameters and increase the water content gradually. There is a way but not a very easy one especially in 3D. In 2D you might be able to use a picture from a cross section as a geometry input for a model.\n\n2. To my knowledge there is no script that does this. The gprMax output file is well documented as is the SEG-Y one. In principle, it should not be too difficult to write a script to convert from one to the other ;-)\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VWga-xH2tk0",
    "title": "Voltage source",
    "original_post": {
      "author": "Meir Gershenson",
      "date": "Sep 28, 2016, 12:58:03PM",
      "content": "I see on voltage source polarization parameter.  Isn't voltage a scalar?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 28, 2016, 1:05:01PM",
        "content": "Hi Meir,\n\nWelcome to the gprMax community forum!\n\nYes voltage is in principle a scalar quantity. However, a #voltage_source: in gprMax applies a voltage pulse to the feeding gap of antenna structure. It is a classic way of exciting antennas in EM simulations. The polarisation refers to the direction of the Yee cell edge that this source is applied. As you only specify a point for it we need to know if it aligns with x or y or the z component of the Electric field. gprMax is basically an FDTD solver and these types of sources are used to analyse antennas in FDTD. If you are not modelling the antenna structure better use a Hertzian dipole source.\n\nBest\n\nAntonis"
      },
      {
        "author": "Meir Gershenson",
        "date": "Sep 29, 2016, 12:21:40PM",
        "content": "I am still strangling with it.  I have 2 pecs as an electrodes on top of my_soil :\n\n#title: Depth response in soil 25m\n#domain: 20.0 30.0 .03\n#dx_dy_dz: 0.02 0.02 0.02\n#time_window: 10.0e-6\n#num_threads: 4\n---------------------------------------------------\n#material: 6.0 0.01 1 0 my_soil\n#waveform: gaussian 1. 5.0e6 my_gaussp\n#waveform: gaussian -1. 5.0e6 my_gaussn\n#voltage_source: y 7.5 29.1 0.0 50.0 my_gaussp\n#voltage_source: y 12.5 29.1 0.0 50.0 my_gaussn\n#rx_array: 10.0 1.0 0.0 10.0 29.0 0.0 0.0 0.1 0.0\n\n-----------------------------------------------------\n#box: 0.0 29.0 0.0 20.0 30.0 0.02 free_space\n\n#box: 0.0 0.0 0.0 20.0 29.0 0.02 my_soil\n\n#box: 7.0 28.9 0.0 8.0 29.1 0.02 pec\n#box: 12.0 28.9 0.0 13.0 29.1 0.02 pec\n#geometry_view: 0 0 0 20.0 30.0 0.02 0.02 0.02 0.02 Depth_response_my_soil n\n\nIt works when the voltage is part of the dielectric but not as the pec.\nCan you refer me to more information about voltage source?\nMeir"
      },
      {
        "author": "Meir Gershenson",
        "date": "Sep 29, 2016, 7:48:40PM",
        "content": "Got it, voltage is applied across one cell gap."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/37NtHkFvh5s",
    "title": "Ground Response in B-scan from Uneven Surface Simulation is Even",
    "original_post": {
      "author": "Ismael Xique",
      "date": "Sep 28, 2016, 10:17:48AM",
      "content": "I have run the following simulation:\n`\n#title: gprMaxSim \n#num_threads: 12 \n#domain: 1.00 1.00 0.70\n#dx_dy_dz: 0.00500 0.00500 0.00500 \n#time_step_stability_factor: 0.980 \n#time_window: 1.564e-08 \n#material: 4.0 0.01 1.0 0.0 ground \n#material: 16.0 0.01 1.0 0.0 target\n#waveform: ricker 1.00 900000000.00 wave_src\n#pml_cells: 10\n#python:\ntmp = current_model_run-1; \nstepSize = 0.02\noffset = 0.025000 \nprint( '#hertzian_dipole: z {} 0.500000 0.600000 wave_src'.format( 0.200000 + stepSize * tmp ));\nprint( '#rx: {} 0.500000 0.600000'.format( (0.200000 + offset) + stepSize * tmp ) );\n#end_python:\n#fractal_box: 0.0 0.0 0.0 1.00 1.00 0.50 1.5 1 1 1 1 ground my_soil_box 1\n#add_surface_roughness: 0 0 0.5 1.00 1.00 0.50 1.5 1 1 0.4 0.55 my_soil_box 1\n#box: 0.45 0.45 0.20 0.55 0.55 0.30 target\n#geometry_view: 0 0 0 1.00 1.00 0.70 0.00500 0.00500 0.00500 heterogeneous_soil n\n`\nIt is supposed to produce a single B-scan with an uneven ground response, but after combining all the A-scans together the B-scan continues to have an even ground response. Does gprMax realign the A-scans to make the B-scan or am I messing up somewhere? I have attached images of the geometry and B-scan. Any help will be greatly appreciated."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 28, 2016, 12:06:40PM",
        "content": "Hi Ismael,\n\nI don't see anything immediately obvious in your input file that could cause this. Can you confirm a couple of things:\n\nWhat version of gprMax are you using?\nWhat tool did you use to merge the A-scans?\nDid you use the supplied MATLAB script to plot the B-scan?\nI ran a B-scan of a simulation with a fractal soil, rough surface, and antenna model the other day and could see the effects of the rough surface. So the only significant difference I see between these models is that you are using a homogeneous material with a rough surface.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ismael Xique",
        "date": "Sep 28, 2016, 1:06:35PM",
        "content": "Thanks for the quick reply. \n\nI am using version 3.0.8 \nI used a custom matlab function that simply appends the a-scans, but I have also used the python code provided to merge and plot B-scans. I have included the results below."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 29, 2016, 5:08:58AM",
        "content": "Hi Ismael,\n\nWe did have a more careful look with Craig on this and it looks like the problem should be the fact that you are looking at a vertical dipole (z) response over the interface. This should be rather insensitive to the target and the small undulation of the surface so the output is not unreasonable but it is interesting to see why. In any case for your problem most likely you want an \"x\" or \"y\" oriented dipole and corresponding output point.\n\nSo, I think \n\nprint( '#hertzian_dipole: y {} 0.500000 0.600000 wave_src'.format( 0.200000 + stepSize * tmp ));\n\nmight do it.\n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 29, 2016, 10:14:47AM",
        "content": "Hi Ismael,\n\nA couple of further observations:\nA 5mm spatial resolution is getting a bit close to having numerical dispersion in the model. At 5mm the max. freq that can be represented is ~1.5GHz, so I'd recommend using 4mm or even 3mm.\nThe reflections from the ground and target are going to be very small in amplitude compared with the direct wave from transmitter to receiver. \nYou can see in the attached A-scan (Ey.png), which is directly over the target, that with default plot scaling you only see the direct wave. By zooming in (Ey_zoom.png) you can see the reflection from the top (green highlight) and bottom (blue highlight) surfaces of the target box. \nThe reflection from the ground is combined with the direct wave (due to your geometry) so not clearly separable.\nThe response between ~10ns and ~12ns is likely multiples of reflections between the ground surface and target, and top and bottom surfaces of the target.\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wNe9nyzgS_Q",
    "title": "3D mode",
    "original_post": {
      "author": "Azin Km",
      "date": "Apr 5, 2020, 8:54:58PM",
      "content": "Hello, I am a researcher from university and currently I am working on GPR test site design. would you please tell me if there is a possibility to create a 3D dim model with Gprmax?are there any test models which I can use?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 6, 2020, 4:30:38AM",
        "content": "Dear Azin,\n\nWelcome to the forum. I don't really understand your question. There are example models in the docs - http://docs.gprmax.com/en/latest/examples_simple_2D.html You can of course build as much complexity as you want into your model using some of the features of the software, such as soil modelling, fractal geometry, dispersive materials, antenna models etc...\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CyASDLJndhs",
    "title": "Beginners questions",
    "original_post": {
      "author": "Jos Groot",
      "date": "Feb 19, 2016, 5:43:12AM",
      "content": "I am using gprMax for a week and am especially interested in the difference between using transmission and GPR measurements for detecting buried cylinders. I stumbled across a what I expect to be few beginners difficulties:\n\n1)\n\nI use the #num_threads command on a 4 core processor. The command influences the number of cores involved and the processor load, as expected. I see it happen when I run gprMax. However, the time a computation takes does not depend on whether I use 1, 2, 3 or 4 as argument to #num_threads, or leave ther command out completely. I do not understand why the computation time does not decrease with increasing processor load.\n\n2)\n\nI used two #rx command to have two receivers at different points. When I use tools.outputfiles_Bscan and then tools.plot_Bscan I get only one plot. To which receiver does this plot correspond? I would like to have two plots, each corresponding to one receiver.\n\n3)\n\nWith hdisp(*merge.out) I see only grour rxs/rx1. Where is the data gone of the second receiver?\n\nThanks already for any clues."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 19, 2016, 5:58:56AM",
        "content": "Hi Jos,\n\nWelcome to the group, and as our first post! You raise some good questions.\n\n1. You are correct the #num_threads command specifies how many OpenMP threads gprMax should use (the default if you don't specify this is for gprMax to use all available CPU cores). Whether or not you see a significant speedup from more threads depends a lot on your problem/model size, i.e. the number of cells in your domain. If you have a relatively small domain then the cost of setting up the parallel threads will outweigh the benefit you get of having them. For larger models the setup cost is less compared to the benefit you get from the extra threads. So probably your problem is too small to see much benefit.\n\n2. and 3. The merging of all A-scans into a B-scan and subsequent plotting module are currently hard-coded to use just the first receiver point. This is something we, or the gprMax community since we are open source ;-), should change to make it more flexible. If you look in the modules you will see what is happening. For now you can adjust the code in the modules for the receiver you want (and don't delete the A-scans after the merge in case you want to go back and look at another receiver).\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 19, 2016, 9:32:04AM",
        "content": "Jos,\n\nI have updated the modules in the tools sub-package 'outputfiles_merge.py' and 'plot_Bscan.py' to handle multiple receiver points. Please give them a try and let me know if they work for you.\n\nCraig"
      },
      {
        "author": "Patrick Carson",
        "date": "Feb 19, 2016, 9:41:45AM",
        "content": "Hi,\n\nI have a few follow up questions:\n\n1. Is there a way to turn off OpenMP threading (or do i simply set \"#num_threads: 1\")?  - I am wanting to run my simulation on a cluster as a serial job.\n\n2 . What constitutes as a 'big' domain? I imagine the spatial discretization and receiver/source step size is also a factor in determining whether allocating more cores to the simulation is worthwhile?"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 19, 2016, 9:56:22AM",
        "content": "Hi Patrick,\n\n1. Setting #num_threads to 1 won't turn off OpenMP threading, you will just use a single thread but still incur the cost of setting up threading. If you want to completely switch it off (and you have installed gprMax as a developer) you can edit the setup.py module, remove the OpenMP compilation flags, then recompile the Cython modules. N.B. I have not tested this. Why do you want to run it serially on a cluster?\n\n2. Hopefully when I get some more time, I'll put some speed-up results with different size domains and number of threads in the docs. From a quick test I did, I saw expected (less than linear) speed-up with a 100x100x100 cell domain. You are correct there are other factors but model size, i.e. domain divided by spatial discretisation, is the biggest influence."
      },
      {
        "author": "Patrick Carson",
        "date": "Feb 19, 2016, 10:16:54AM",
        "content": "Hi Craig,\n\nThanks for the reply.\n\nI have a data generation pipeline with 4 stages:\ncreates a user defined number of model input files with a specific random object placed in the domain\nloops over these and calls gprmax on each model input file\nmerges each gprmax solved input file into b-scans\nplots and saves the b-scans\nOnly stage 2 uses OpenMP threading, so I thought it would be best to create an array of serial jobs, each job running the pipeline once. It's probably worth adding I have next to no experience with HPC cluster environments."
      },
      {
        "author": "Craig Warren",
        "date": "Feb 19, 2016, 12:28:49PM",
        "content": "To check I understand your workflow correctly.....is there a B-scan for every model with a randomly positioned object?"
      },
      {
        "author": "Patrick Carson",
        "date": "Feb 20, 2016, 8:16:31AM",
        "content": "Yes the end product is a B-scan for every model."
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Feb 20, 2016, 9:13:13AM",
        "content": "Hello, GprMax Masters!\n\nI'm using the old version of GprMaxV2 for a month, but today I have installed the newest version! And I have a lot of questions...\n\nThe first, the most important question, is how to analyse the output files in MATLAB?\nIn old version I opened .out file as a structure and analysed, for example, Ex component, as a massive in MATLAB. Now I want to do the same operation to compare my old and new results. But I don't understand, how... When I open .out file with \"h5info\" command I have a very strange structure (look at my screenshot). Where is Ex, that I want to analyse?.. Help me, please."
      },
      {
        "author": "Jos Groot",
        "date": "Feb 21, 2016, 8:26:07AM",
        "content": "Hi Svetlana,\n\nHave you already tried 'h5disp'? Use the information this\ncommand gives you to to load your data with 'h5read'.\n\nGood luck : ^)\nJos"
      },
      {
        "author": "Jos Groot",
        "date": "Feb 21, 2016, 8:36:38AM",
        "content": "Hi Craig,\n\nThanks for your prompt reply. Yes, I was a bit puzzled when I entered this\nforum. So I thought let's ping something to find out whether it leaves a\ntrace - and luckily it did.\n\nMy model was ~2000 x 36 x cells, I can imagine that is what you call small.\nThanks for making changes in enabling inspecting more Rx signals. I will\ntry them.\n\nOne additional remark about the manual:\n\n#fractal_box has as argument a random number seed. I suggest to add in\nthe manual that this should be provided if one creates a B-scan from A-scans.\nOtherwise a different soil volume is created for every A-scan. Probably this\nwas the idea behind the argument."
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Feb 21, 2016, 10:39:16AM",
        "content": "Thank you, Jos! Tomorrow, when I will be at work, I will try this MATLAB function.\n\nNow I have one more question. I try to put into the test file \"cylinder_Ascan_2D.in\" my own source function. I have a file \"mysource.txt\" with amplitude values. I put this file in the same location, as the input file.\nIn input file I change two commands:\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n\nto anothers:\n#excitation_file: mysource.txt\n#hertzian_dipole: z 0.100 0.170 0 mysource1\n\nAnd I have an error like this:\n\"File \"C:\\Users\\svebrich\\Desktop\\gprMax-v.3.0.0b19\\gprMax\\input_cmds_singleuse.py\", line 225, in process_singlecmds\n    with open(excitationfile, 'r') as f:\nFileNotFoundError: [Errno 2] No such file or directory: 'mysource.txt'\"\n\nI've checked the file location and its name and I don't understand, what's wrong..."
      },
      {
        "author": "Craig Warren",
        "date": "Feb 22, 2016, 7:25:46AM",
        "content": "Hi Svetlana,\n\nThere was a bug that meant gprMax was looking for the excitation file at the root of your file system and not in the directory of the input file. I've corrected this in the master branch and made a new v.3.0.0 beta 20 release (https://github.com/gprMax/gprMax/releases). Give it a try and let me know if you have any further problems.\n\nCraig"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Feb 22, 2016, 7:57:17AM",
        "content": "Thank you, Craig, now it works!\nI'm really happy, I can continue my modelling now! We have our radar, not Mala and not GSSI, so we should use our own experimental source function in modelling. So I will check this part of gprmax further.\n\nSveta"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/p5HsWfoVv0A",
    "title": "ground truth generation in rough surface case and surrogate mine .in files-regarding",
    "original_post": {
      "author": "Santhu Athidi",
      "date": "Jul 3, 2023, 7:21:29AM",
      "content": "Hello all,\n\nI have two queries.\n\n(I) I am working on classifying different objects using GPR. For ground truth generation, I subtracted the target case from the non-target case for a homogeneous medium then I received the target hyperbola. But for the rough surface case, I cannot create the same roughness for a non-target case may be due to a random seed generator. When subtraction is performed between target and non-target, clutter appears. So, can we create the same roughness again for the non-target case?\n\n(II) I want to generate data on surrogate mines like PMA, PMN, PROM, VS-50, or any mine. Are there any references to generate \".in\" files for the mines?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2023, 7:21:44AM",
        "content": "Dear Santhu,\n\nYou need to seed the random number generator to ensure you get the same rough surface in each model. See our docs - https://docs.gprmax.com/en/latest/input.html#add-surface-roughness parameter i1. If you use the same seed for the models with and without the target you will be able to substract them to obtain the pure target response.\nWe plan to release models of landmines created by Dr Iraklis Giannakis when we make the new version of gprMax available - most probably later this year.\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/L7Jp57K4d6k",
    "title": "Strange rendering on ParaView",
    "original_post": {
      "author": "Jack Barr-Baxter",
      "date": "Sep 4, 2023, 8:56:30AM",
      "content": "Good afternoon guys,\n\nI've encountered a problem with ParaView where it doesn't seem to be rendering the rebar I've got running through the concrete pad in my model. Not only this, the GSSI antenna also looks like it's missing its skid tray and case; I'll attach a screenshot of the render so you know what I mean. Am I missing something in my input file? It has worked on previous run-throughs.\n\nKind regards,\nJack Barr-Baxter"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 5, 2023, 4:45:33AM",
        "content": "Hi Jack,\n\nI think the rendering is OK. You are specifying your cylinders before the concrete in your input file, so you are overwriting the cylinders with the concrete - remember gprMax geometry works like a layered canvas - http://docs.gprmax.com/en/latest/input.html#object-construction-commands\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pnSPDuu_itA",
    "title": "material properties converter",
    "original_post": {
      "author": "Tom",
      "date": "Jun 3, 2018, 3:58:13AM",
      "content": "Hi,\n\nI'm looking for a script (python preferred) to convert material properties to debye, lorentz or drude formulation. The properties are given as permittivity and loss tangent in the frequency domain. \n\nKind regards,\nTom"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ai3T7uHvhbs",
    "title": "Pass Numpy Array Directly to GPRMax as Geometry",
    "original_post": {
      "author": "Ahmed Nirjhar Alam",
      "date": "Sep 19, 2021, 8:56:13PM",
      "content": "I am using stochastic dimension reduction to shrink geometry down and then I am reconstructing them. The reconstructions are irregular with roughly distributed property values in the grids(they are numpy arrays). I want to run gprMax on these reconstructions but creating these geometries from input file commands would require hundreds of thousands of lines of input commands(the reconstruction is stochastic so I have to do #box command for each grid) \n\nI was wondering if there is a way to directly pass numpy arrays [(p x p  x p x 4) describing how all four properties are distributed in the grid]  to gprMax for simulation. If not, is there any alternative method by which I can solve this issue?\n\n   Thanks\nNirjhar Alam"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 23, 2021, 6:50:04AM",
        "content": "Dear Nirjhar,\n\nHave you looked at the #geometry_objects_read command (http://docs.gprmax.com/en/latest/input.html#geometry-objects-read)? If you write your numpy array to HDF5 using the guidance, it may help, but it is not designed for every cell/voxel in your numpy array to be a different material. If this is the case I suggest you try to 'bin' your materials properties.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qJu3J4rxZHA",
    "title": "How to set up a changeable material",
    "original_post": {
      "author": "hongjv zhou",
      "date": "Oct 8, 2017, 9:59:15PM",
      "content": "hi\nThanks to this great software, which solved a lot of my problems, and here I got a new trouble.\n\nI am trying to set a region in which the dielectric constant/conductivity of the material can vary with the coordinate function. How should I set it up?\nE.g x~[0.9, 1.1], y~[0.7, 1.3],dielectric constant=(x, 6*y)\n\nBest wishes"
    },
    "responses": [
      {
        "author": "Feng Zhou",
        "date": "Oct 8, 2017, 10:22:14PM",
        "content": "I  suggest that you make a Matlab script to create the input file of gprMax 3.0. In the Matlab script program, you can create any material as you like. And the Matlab script can put out a inpfile with the gprMax command rules. Note the \"fprint\" command in Matlab is very useful."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 9, 2017, 4:09:13AM",
        "content": "You can also do this directly in the input file using Python - http://docs.gprmax.com/en/latest/python_scripting.html\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wDbb4kpESQs",
    "title": "Perfect Electric Conductor (PEC) Dielectic Constant",
    "original_post": {
      "author": "alpergenc",
      "date": "Nov 9, 2018, 2:56:51AM",
      "content": "Hi all,\n\nI have a question about built-in materials of gprMax. I know there are two identifiers \"pec\" and \"free_space\" to simulate perfect electric conductor and air. My question is about the dielectric constants (relative permittivity, permeability and conductivity) of pec. What does gprMax assume the dielectric constants of pec for simulation?\n\nRegards,\nalper"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 9, 2018, 4:21:54AM",
        "content": "Dear Alper,\n\nYou can see how the built-in materials are created by looking at the source code, in modules:\n\nmodel_build_run.py lines 146-154\n# Create built-in materials\nm = Material(0, 'pec')\nm.se = float('inf')\nm.type = 'builtin'\nm.averagable = False\nG.materials.append(m)\nm = Material(1, 'free_space')\nm.type = 'builtin'\nG.materials.append(m)\n\nmaterials.py lines 57-61 and 132-147\n# Default material constitutive parameters (free_space)\nself.er = 1.0\nself.se = 0.0\nself.mr = 1.0\nself.sm = 0.0\n\nif self.ID == 'pec' or self.se == float('inf'):\n    self.CA = 0\n    self.CBx = 0\n    self.CBy = 0\n    self.CBz = 0\n    self.srce = 0\n\nSo any material created using the Material class, by default, gets the parameters of free space. The only extra thing we do when creating the PEC material is to set the electrical conductivity to be infinite. This has the effect of setting the standard update coefficients for the FDTD electric field update equations to zero. The permittivity becomes irrelevant. You can see how these update coefficients are set for dielectric materials elsewhere in the 'materials.py' module. I would refer you to Computational Electrodynamics: The FDTD method by Taflove & Hagness (or one of the theses of our team) if you want to understand what material properties are part of the update coefficients.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "alpergenc",
        "date": "Nov 9, 2018, 5:36:46AM",
        "content": "Hi Craig,\n\nThank you for your detailed explanation. You said that to create the PEC material is to set the electrical conductivity to be infinite. So, the permittivity becomes irrelevant. It makes sense for me. My next question is about defining the metals (which have finite conductivity value) in gprMax. \n\nTo define a highly conductive metal (such as copper, silver, gold, iron, etc.), I have looked at the dielectric coefficients. Permeability and conductivity values of metals are clearly identified in the literature however calculating the permittivity value of a metal is confusing. In some sources it is written that the dielectric constant (relative permittivity) of metals is undefined. Some other sources said that the dielectric constant (relative permittivity) of metals is infinite. To define a metal in gprMax (for instance copper which has relative permeability 0.999994 and conductivity 59.6x10^6 S/m), what should I choose for the relative permittivity value?\n\nThanks in advance,\n\nRegards,\nalper"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 9, 2018, 11:59:28AM",
        "content": "Hi Alper,\n\nThere is information in the literature on how to model metals using FDTD if you are interested in the propagation (i.e. skin depth effects, etc.) in metals. This will require models with extremely refined resolution to capture the small levels of field penetration in such very conductive materials. If you are looking to differentiate between the response of copper or steel for GPR purposes this is practically irrelevant and has no meaning. The approximation in this case of a metal structure as a boundary condition (i.e. perfectly conducting) is very good. \n\n\nBest\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Nov 10, 2018, 6:41:24AM",
        "content": "Hi Antonis,\n\nThank you for your reply. As I understood from your answer, if I am looking the reflection of GPR signal from a metal surface, whatever metal I use, the reflection will be same (almost same) as the reflection from a PEC surface. Did I understand correctly?\n\nRegards,\nalper"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 11, 2018, 4:08:43PM",
        "content": "Hi Alper,\n\nPretty much yes! \n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Nov 12, 2018, 2:56:50AM",
        "content": "Hi Antonis,\n\nThank you for your reply.\n\nRegards,\nalper"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KTBeIWW_Zzk",
    "title": "Query regarding GPR simulation setup and polarization considerations",
    "original_post": {
      "author": "Nikesh Sahu",
      "date": "Jul 9, 2023, 7:07:21AM",
      "content": "Hello Everyone,\nI am relatively new to gprMAX and currently engaged in simulating a GPR model to gather A-/B-Scan results of subsurface objects. I have a specific query regarding the polarization of electromagnetic (EM) waves in my simulation setup, and I would greatly appreciate your insights.\nBased on my understanding, the polarization of EM waves is determined by the direction of the electric field vector oscillation. In my GPR model, I have defined the soil depth along the Z-axis, while the GPR Tx and Rx antennas (modeled as Hertzian dipoles) are moving parallel to the X-axis, just above the soil surface. For this particular configuration, I have assigned the polarization as 'Y,' aiming to direct the EM waves into the soil, i.e., propagating towards the Z-direction.\nAdditionally, to collect A-scan data, I have specified the field component as 'Ey' in the command line instruction. My intention is to extract the electric field component aligned with the assigned 'Y' polarization.\nMy question is whether this polarization consideration and the selection of 'Ey' as the field component in the command line instruction are correct for my simulation setup. I would greatly appreciate any insights, guidance, or corrections regarding this matter.\n Thanks\nNikesh Kumar Sahu"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 9, 2023, 5:57:38PM",
        "content": "The arrangement you are planning to use will work for parallel - broadside GPR configuration where your source is arranged perpendicular to the direction of surveying.\n\nBest\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/N5-JlHvgZGI",
    "title": "How can I get the same fractal distribution of soil for separate models?",
    "original_post": {
      "author": "Kerem Ozkap",
      "date": "Mar 22, 2018, 8:00:01AM",
      "content": "Hello Craig,\n\nI hope you are well.\n\nI am trying to create heterogeneous models using the fractal box.\n\nI want to examine the surface roughness and vegetation effect on the same fractal distribution separately. Therefore I’ve created 3 models;\n\n1- Heterogeneous model\n2- Heterogeneous model + surface roughness\n3- Heterogeneous model + surface roughness + vegetation\n\nHowever, when adding surface roughness and vegetation, the model distribution changing every time, even though optional i2 parameter is defined. How can I create the same fractal distribution of soil properties for three separate models?\n\nYou can find attached the input files and obtained model geometries.\n\nBest regards,\n\nKerem"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 23, 2018, 12:32:35PM",
        "content": "Hi Kerem,\n\nUsing the optional variable to seed the random generator, and thus create the same random distribution for the fractal volume (and surface) is the way to do this. However, if you add a rough surface to a volume you are changing the overall size of the volume and thus a different fractal distribution will be generated that is not the same as the volume without the rough surface. I suspect that is what you are seeing here. To check this is you make the size of your volume without the surface the same as the maximum peak height of the volume with the fractal surface, then I think the distributions should be the same.\n\nYou have however, made me spot a strange bug that seems to arise with a simplified version of your input file. I have reported it in our issue tracker (https://github.com/gprMax/gprMax/issues/148) and will try to investigate over the coming days.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3ab-0SsfIu0",
    "title": "Transmission_line",
    "original_post": {
      "author": "xiantong",
      "date": "Jan 9, 2019, 10:23:03PM",
      "content": "Dear professors,\n I want to simulate two tansmission line ， one is the transmitter antenna， the other is the receive antenna， here is my  input file\n\n#title: Wire antenna - half-wavelength dipole in free-space\n#domain: 0.20 0.10 0.200\n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 60e-9\n#pml_cells: 0\n\n#waveform: ricker 1 1e9 mypulse1\n#waveform: ricker 0 1e9 mypulse2\n\n#transmission_line: z 0.025 0.025 0.100 73 mypulse1\n#transmission_line: z 0.125 0.025 0.100 73 mypulse2\n\n## 150mm length\n#edge: 0.025 0.025 0.025 0.025 0.025 0.175 pec\n#edge: 0.125 0.025 0.025 0.125 0.025 0.175 pec\n\n## 1mm gap at centre of dipole\n#edge: 0.025 0.025 0.100 0.025 0.025 0.104 free_space\n#edge: 0.125 0.025 0.100 0.125 0.025 0.104 free_space\n\n#rx: 0.125 0.025 0.100 \n\n#geometry_view: 0.020 0.020 0.020 0.130 0.030 0.180 0.004 0.004 0.004 antenna_wire_dipole_fs f\n\nUnfortunately, I got some strange result\n\nProfessors, friends please help me out!"
    },
    "responses": [
      {
        "author": "xiantong",
        "date": "Jan 9, 2019, 10:23:45PM",
        "content": "the syntax of a transmission line command is \n#transmission_line: c1  f1 f2 f3 f4 str [f5 f6]\n\ncould you please explain when should I select these two parameters?"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 10, 2019, 3:55:17AM",
        "content": "Xiantong,\n\nThe first issue I see with your model is that you have turned off the Perfectly Matched Layer (PML) absorbing boundaries - '#pml_cells:0'. Remove this command to allow the default PML to be used.\n\nAll the parameters for the transmission are well explained in the docs - http://docs.gprmax.com/en/latest/input.html#transmission-line\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/38Vy0s7azHE",
    "title": "Using GPU in gprMax",
    "original_post": {
      "author": "Melvin Lim",
      "date": "Sep 6, 2024, 1:32:31AM",
      "content": "Hi guys! Currently I'm trying to setup GPU in gprMax so that I would use GPU for my simulations in gprMax. I went through the following steps in the gprMax documentation as follows:\n\n1) Installing NVIDIA CUDA toolkit\n2) Including the \"nvcc\" compiler in the user path environment \n3) Installing PyCuda in the top-level gprMax directory in the conda environment\n\nFor point 2, below are the screenshots of where I have included the \"nvcc\" compiler into the user path environment:\n \n\nAfter completing the above steps, I went to run the test model \" (gprMax)$ python -m gprMax user_models/cylinder_Ascan_2D.in -gpu \" and I have encountered this error in the conda environment shown in the screenshot below:\n\n\nBased on the above screenshot of the error I have encountered, I'm not sure where I went wrong. Did I set the user path environment of the \"nvcc\" compiler wrongly or did I miss anything steps? Need help on this, thanks!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 10, 2024, 6:33:15AM",
        "content": "Can you confirm whether any of the NVIDIA CUDA samples work for you? Then try some of the PyCUDA examples. This will help as narrow down where the potential issue lies.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Melvin Lim",
        "date": "Sep 11, 2024, 4:38:48AM",
        "content": "Hi Prof. Craig, thanks for the reply! I will go try it out and update here again.\n"
      },
      {
        "author": "Melvin Lim",
        "date": "Sep 13, 2024, 2:05:53AM",
        "content": "Hi Prof. Craig, I've managed to run the Cuda samples and the PyCuda examples and it all worked. My issue was that I did not include the cl compiler into the Path and that is why the nvcc did not work properly. Thanks a lot for the suggestions to troubleshoot the use of GPU in gprMax Prof. Craig!\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Iq9IeXLzGSg",
    "title": "Datasets for landmine/OXO/IED/surrogate mines or landmine like objects-request-regarding",
    "original_post": {
      "author": "Santhu Athidi",
      "date": "Apr 27, 2023, 1:21:26AM",
      "content": "Hello all,\n\nWe are working on buried object detection and classification especially on UXO or similar kind of objects. In our laboratory we have generated some B-scans, but for classification point of view we need some large dataset. We have searched but unable to get the dataset. will any one please share the dataset (experimental or gprMax)  if you have.  This will help us alot. This qyuestion may or maynot relavent in this forum, please do the needful."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 4, 2023, 12:12:59PM",
        "content": "We don't have any datasets that we can release, but we do intend to release landmine models when the next version of gprMax comes out - most likely over the summer.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Vr8vwRc7aik",
    "title": "HI",
    "original_post": {
      "author": "savita K.B",
      "date": "Jul 12, 2021, 11:34:51AM",
      "content": "Hi\nI have attached an input file The .out file also attached here. I got the out put but i want a output like the one which is attached second(means the hyperbola should be at the center and the other two sides it should be flat) What changes i have to do in my code which i pasted in this email.What dimensions should i change.Please suggest me the changes.Thank you in advance.\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Jul 12, 2021, 12:36:46PM",
        "content": "Hi,\n\nThere are a some fundamentals which are playing a role in this, which you have to understand first.\nthe shape of the em-field of your transmitter\nthe attenuation of the half-space\nlength of your b-scan\n\nwith all of them you can 'shape' your output.\n\nin my opinion the biggest part is, that a herzian dipole emmits a basicly spheric (in 2d cylindrical) field. a real GPR (or the 3D-models of gprMax) do emmit a conical field, where beside the coils nearly no field is present.\nwith an herzian dipole (in 2D) the arms of the hyperbola wil reach to the bottom of your B-scan, if you wouldn't apply an attenuation to your half space.\nlast but not least, your 3_merged_out represents about 10% of the length of your image.png\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Jul 13, 2021, 1:09:33AM",
        "content": "Hi,\n\nplease anwer here, where anyone can read it:\n\nHI Michael\nThanks michael,but i am not understanding what to change in my code.Is this hertzian dipole will not work to get such a image.Is i have to increase the domain size.Please suggest me.Thank you in advance.\n\nTo match your needs is not as easy as it seams to me - you'll have to try it for your own. If nessesary read the manual to fully understand what is happening. maybe some basicty of 'realworld' GPR are usefull as wel.\n\nI would start to expand the domain size with a sertain factor, guess 5: - if it isn't as expected, modify this\n#domain: 1.2 0.210 0.002\n\nthan add some attenuation - i don't know the velues, since I worked most with peplinsky-models\n\nguess 0.005 is a value to start. if it is too much, lower it, if it is too lees, rise it.\n#material: 6 0.005 1 0 half_space\n\ndo not forget to move your object to the centrum of your model\nand you may take your rx and tx-steps wider since this is a test.\n\nsincerly, Micha\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/cDMZDLjeGbs",
    "title": "IPR simulation",
    "original_post": {
      "author": "薛若菡",
      "date": "May 21, 2018, 12:52:13AM",
      "content": "There is no rader echo when I simulation.\n\nThe code is this:\n#title: lake\n#domain: 3000 3000 50\n#dx_dy_dz: 5 5 5\n#time_window: 40e-9\n\n\n#material: 1 0 1 0 fresh_air\n#material: 81 0.003 1 0 fresh_water\n#material: 3 0 1 0 frozensoil\n#material: 7 0.003 1 0 normalsoil\n\n#waveform: ricker 1 0.6e8 my_ricker\n#hertzian_dipole: z 50 2950 0 my_ricker\n#rx: 100 2950 0 \n#src_steps: 20 0 0\n#rx_steps: 20 0 0\n\n#box: 0 0 0 1000 1000 50 normalsoil\n#box: 1000 0 0 2000 1000 50 fresh_air\n#box: 2000 0 0 3000 1000 50 fresh_water\n#box: 0 1000 0 3000 2900 50 frozensoil"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 21, 2018, 3:55:28AM",
        "content": "There are some basic problems with your model that you must first address. I have listed a couple of them below:\n\n- Spatial discretisation/domain size: You only have 10 cells in the z-direction which will not be sufficient for a PML. \n- Have you checked your spatial discretisation is suitable to mitigate numerical dispersion with the frequencies in your model and the materials (i.e. fresh water with a relative permittivity of 81)?\n- Your source and receiver are positional in the PML region which is wrong.\n- You don't have a #geometry_view command which is good practice to use to check the geometry on your model carefully before you run it.\n\nI would recommend you go through the simple 2D example model to ensure you understand all these points - http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder\n\nKind regards,\n\nCraig"
      },
      {
        "author": "薛若菡",
        "date": "May 21, 2018, 10:39:33PM",
        "content": "Thank you for your reply. I have some new questions:\n\nHow many PML cells is suitable for a domain? \nWhen I setting the number of cells of PML by the command #pml_cells, the running speed will be very slow."
      },
      {
        "author": "Craig Warren",
        "date": "May 22, 2018, 6:09:39AM",
        "content": "The default number of PML cells (10) is usually sufficient for most simulations, so you should not have to use the #pml_cells command. Also, adding extra PML cells should not significantly sloe the simulation.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xDHhWib_NgQ",
    "title": "'FDTDGrid' object has no attribute 'updatecoeffsH'",
    "original_post": {
      "author": "POT",
      "date": "Jun 7, 2020, 11:17:27PM",
      "content": "When i run the example code ,example_Ascan_2D.ipynb, the api function raises an error :'FDTDGrid' object has no attribute 'updatecoeffsH',i have no idea to slove it.\n\nhere is the error loacation:\n\nimport os\nfrom gprMax.gprMax import api\n\n\nfilename = '/home/rf/APP/gprMax/user_models/cylinder_Ascan_2D.in'\napi(filename, n=1, geometry_only=False) #error :'FDTDGrid' object has no attribute 'updatecoeffsH'\n\n\n\n\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-16-0e5a68265038> in <module>()\n      3 \n      4 filename = '/home/rf/APP/gprMax/user_models/cylinder_Ascan_2D.in'\n----> 5 api(filename, n=1, geometry_only=False)\n\n~/anaconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.5-py3.6-linux-x86_64.egg/gprMax/gprMax.py in api(inputfile, n, task, restart, mpi, mpi_no_spawn, mpicomm, gpu, benchmark, geometry_only, geometry_fixed, write_processed, opt_taguchi)\n    103     args.opt_taguchi = opt_taguchi\n    104 \n--> 105     run_main(args)\n    106 \n    107 \n\n~/anaconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.5-py3.6-linux-x86_64.egg/gprMax/gprMax.py in run_main(args)\n    186                 if args.task and args.restart:\n    187                     raise GeneralError('Job array and restart modes cannot be used together')\n--> 188                 run_std_sim(args, inputfile, usernamespace)\n    189 \n    190 \n\n~/anaconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.5-py3.6-linux-x86_64.egg/gprMax/gprMax.py in run_std_sim(args, inputfile, usernamespace, optparams)\n    227         else:\n    228             modelusernamespace = usernamespace\n--> 229         run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n    230     tsimend = timer()\n    231     simcompletestr = '\\n=== Simulation completed in [HH:MM:SS]: {}'.format(datetime.timedelta(seconds=tsimend - tsimstart))\n\n~/anaconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.5-py3.6-linux-x86_64.egg/gprMax/model_build_run.py in run_model(args, currentmodelrun, modelend, numbermodelruns, inputfile, usernamespace)\n    369         # Main FDTD solving functions for either CPU or GPU\n    370         if G.gpu is None:\n--> 371             tsolve = solve_cpu(currentmodelrun, modelend, G)\n   372         else:\n   373             tsolve, memsolve = solve_gpu(currentmodelrun, modelend, G)\n\n~/anaconda3/envs/gprMax/lib/python3.6/site-packages/gprMax-3.1.5-py3.6-linux-x86_64.egg/gprMax/model_build_run.py in solve_cpu(currentmodelrun, modelend, G)\n   432 \n   433         # Update magnetic field components\n--> 434         update_magnetic(G.nx, G.ny, G.nz, G.nthreads, G.updatecoeffsH, G.ID, G.Ex, G.Ey, G.Ez, G.Hx, G.Hy, G.Hz)\n   435 \n   436         # Update magnetic field components with the PML correction\n\nAttributeError: 'FDTDGrid' object has no attribute 'updatecoeffsH'"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 11, 2020, 4:42:03PM",
        "content": "Dear POT,\n\nDid you resolve this? I am not able to reproduce this error. Check that you have gprMax correctly installed, e.g. 'python setup.py install' in your environment.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "POT",
        "date": "Jun 12, 2020, 3:37:55AM",
        "content": "Hi professor Craig:\nThank you for your reply,i have resolved it ,maybe my jupyter-notebook has some problems，when i run the model by the terminal,it succeeded."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DPW3yYPON_s",
    "title": "How to produce gprMax logo",
    "original_post": {
      "author": "han haiyang",
      "date": "Nov 10, 2022, 2:29:44AM",
      "content": "Dear friends:\nPlease allow me to ask a slightly additional question.The gprMax logo is a interesting figure to me.How exactly is it made?Are those tiny components a radar map of various abnormal phenomena?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 10, 2022, 4:17:59AM",
        "content": "I think you are the first person to notice this (or at least ask about it here) - well spotted!\n\nIndeed the gprMax logo was created using a gprMax model. If I remember the gprMax letters are 'cut' out of a PEC plate and then have sources scattered throughout the letters. We then took a snapshot of the fields at some point in the simulation and applied a colorscale in Paraview.\n\nMaybe we will have a competition to design the logo for the next version of gprMax - which is hopefully coming soon ;-)\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/TsnbFjuA5KE",
    "title": "Direct Wave Arrival Time",
    "original_post": {
      "author": "Doreen",
      "date": "Apr 10, 2019, 10:16:30PM",
      "content": "Hello everyone!\n\nI am just confused on how to measure the arrival time of the direct wave (from source to receiver). Below is my input file:\n\n#title: A-scan of concrete\n\n#domain: 0.300 0.150 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5.0e-9\n\n#material: 8.0 0.01 1.0 0.0 concrete\n\n#waveform: ricker 1.0 2700e6 myricker\n#hertzian_dipole: z 0.05 0.125 0.0 myricker\n#rx: 0.10 0.125 0.0\n\n#box: 0.0 0.025 0.0 0.30 0.125 0.002 concrete\n\n\n#geometry_view: 0.0 0.0 0.0 0.30 0.15 0.002 0.002 0.002 0.002 concrete n\n\n\n\nI just want to check if my model is correct so I'd like to calculate the arrival time of the direct wave using the simple formula of velocity. So the distance of my source and receiver is 5cm or 50mm and the velocity in air is around 300mm/ns, therefore the arrival time of the wave should be around 0.16667ns. But from my A scan, it is around 0.35ns. \n\nOr my understanding is wrong?\n\nCan someone please shed light into this? Thank you! :)"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 11, 2019, 9:52:36PM",
        "content": "Hi Doreen,\n\ngprMax uses waveforms that start smoothly from zero values and not abruptly. The reason is to prevent high frequency noise generated in the model as the underlying FDTD method has limitations with respect to frequencies that can handle in relation to the spatial step/time step combination for a model. So, there is a time delay for the onset of the pulse that you need to take into account. \n\nInformation on the waveforms is found at: http://docs.gprmax.com/en/latest/plotting.html#waveforms\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "Doreen",
        "date": "Apr 11, 2019, 10:14:06PM",
        "content": "Hi Antonis!\n\nThank you for this information. \n\nNow, my next question will be, how will I know the length of time delay? Is there a way to calculate or to know that based on the A scan plots?\nBecause my next step is to measure the velocity of EM wave in the concrete based on the arrival time of the reflection. \nFor this, I will still be using the simple formula of velocity and have it compared versus the theoretical EM velocity (velocity of air divided by sqrt(relative permittivity)).\n\nI apologize if my questions sound simple. :)\n\nDoreen"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 12, 2019, 7:27:46AM",
        "content": "Doreen,\n\nThe definitions (from which you can calculate the delay) of the waveforms are given in the docs - http://docs.gprmax.com/en/latest/plotting.html#definitions\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Doreen",
        "date": "Apr 14, 2019, 10:27:11PM",
        "content": "Thank you!\n\nI have checked and estimated that there is a delay time of around 0.4 ns.\n\nIf I look at the magnetic field, I will have a different delay time, right? Or it will just be the same? Thank you!"
      },
      {
        "author": "Doreen",
        "date": "Apr 15, 2019, 1:33:12AM",
        "content": "Okay, never mind. I figured it out. :)\n\nThank you!!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ldeuTdDBhU4",
    "title": "creating plate object",
    "original_post": {
      "author": "Phoebe Wong",
      "date": "Nov 9, 2018, 2:09:36AM",
      "content": "I am trying to create a plate object. I have referred to the Python scripting and the instruction of input commands, but there's an error message.\n\nBelow is a section of my code, there are many decimal places, but it should not be an issue as the input variable type is float and there's no error with creating the cylinder.\n\n#title: A-scan\n#domain: 0.608 0.260 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#cylinder: 0.252 0.114 0 0.252 0.114 0.002 0.0060159845 rust\n\n#plate: 0.206 0.1138604584 0.001 0.246 0.1141395416 0.001 free_space\n\n\nThis is the error message.\n\nCan anyone tell me how to fix it?\n\nMany thanks~"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 9, 2018, 4:07:50AM",
        "content": "Hi Phoebe,\n\nWelcome to the forum!\n\nIt looks like your plate is not specified correctly because the starting and ending y-coordinates will be the same. Although the values you requested for these coordinates are different, internally (in gprMax) they are rounded to the nearest multiple of the spatial resolution, which is 2mm in this case. The FDTD method, which is what gprMax uses to solve Maxwell's equations, is based on the Yee cell. This means that although we specify the real coordinates of objects that we want to create, they all must be mapped onto Yee cells in the solver. In this case both y-coordinates will be rounded to 114mm and are therefore the same, which is why the plate is not valid.\n\nAlso be careful with the z-coordinate of your plate which is not a multiple of the spatial resolution.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Phoebe Wong",
        "date": "Nov 9, 2018, 4:39:04AM",
        "content": "I see, thanks a lot. Reducing the Yee cell size works :=)"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3U_pDCis9S0",
    "title": "Oriented box target",
    "original_post": {
      "author": "alpergenc",
      "date": "Aug 14, 2017, 2:52:26AM",
      "content": "Hi everybody,\n\nBy using GPRmax, I want to creat a box target underground which is not parallel to the ground. I mean, I want to place the box with some orientation (around 10-20 degrees) as shown in the figure below. Is it possible to create this kind of target by using #box command of GPRmax? If not, is there any other command for this issue?\n\nKind regards,\nAlper GENC"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 14, 2017, 4:27:56AM",
        "content": "Hi Alper,\n\nThe #box command can't currently be used to directly create tilted objects - you would have to do this yourself with some Python scripting in your input file.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "alpergenc",
        "date": "Aug 15, 2017, 3:06:26AM",
        "content": "Hi Craig,\n\nThank you for your answer. I think, I can create tilted objects by using #cylinder command if I define the center of the bottom face as shifted with respect to the center of the top face. I mean, the command below creates a tilted cylindirical pec. Am I right?\n\n#cylinder 0.500 0.125 0.150 0.500 0.115 0.100 0.050 pec \n\nRegards,\nAlper"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 15, 2017, 5:16:14AM",
        "content": "Hi Alper,\n\nYes, you can create a tilted cylinder with the #cylinder command, by adjusting the coordinates of the faces accordingly.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xSID_GtU3kg",
    "title": "Feature request: non-uniform meshing to reduce computation time",
    "original_post": {
      "author": "Yoshitaka Taguchi",
      "date": "Apr 4, 2018, 1:12:24AM",
      "content": "Hi, everyone.\n\nCurrently, gprMax supports only uniform meshing. In some cases, it would be convinient to define non-uniform mesh. For example, a fine sub-wavelength structure on a homogeneous base with low epsilon material. Sub-wavelength structure requires fine meshing to get a precise result. Then I have to set fine meshing over the entire simulation region because gprMax only supports uniform meshing. However, I don't need such fine meshing over homogeneous low-epsilon region.\nIf non-uniform meshing is available, I can set coarse mesh over homogeneous region, and reduce computation time.\n\nA simple way to define non-uniform meshing is \"mesh overriding\". Allowing dxdydz command to specify target region and use many times makes it possible to define non-uniform meshing easily.\n\nWhat do you think about this feature?\n\nThank you,\nYoshitaka"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 4, 2018, 6:44:35AM",
        "content": "Hi Yoshitaka,\n\nWelcome to the forum!\n\nYou are correct, currently you have to use a uniform mesh in your simulations. The non-uniforming meshing you are talking about is also called sub-gridding, and is a feature we have been considering for some time. It is a non-trivial, challenging feature to add! It is helpful to have areas of the main grid that can be finely meshed, for modelling detailed structures such as GPR antennas, or areas where there are materials with high dielectric constants. Actually, a PhD student from the University of Edinburgh has been working on a sub-gridding implementation for gprMax and will likely present his work in a paper at the GPR2018 conference (https://www.gpr2018.hsr.ch/) in Switzerland this summer. At some point after his work is published I anticipate we will roll the sub-gridding feature into the public release of gprMax.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yoshitaka Taguchi",
        "date": "Apr 5, 2018, 5:12:05AM",
        "content": "Hi, Craig!\n\nIt's glad to join this forum! Cool, I'm happy to hear that, looking forward to use sub-gridding in the future release.\n\nBest regards,\nYoshitaka"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eZRCyX1Y-vg",
    "title": "Problem with surface roughness",
    "original_post": {
      "author": "Andrea",
      "date": "Apr 15, 2018, 1:03:52PM",
      "content": "Hello everyone, \n\nI am making heterogeneous soil model and I have problem with adding surface roughness. In ParaView it is shown like I added roughness in the middle of my soil (like a crack). I have no idea what is wrong in my code so I hope you can help me. \n\nThank you,\nAndrea"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 16, 2018, 4:11:13AM",
        "content": "Hi Andrea,\n\nWelcome to the forum!\n\nThe reason the rough surface profile in your model is not being applied correctly, is that the minimum/maximum trough/peak values you have specified do not correspond to the height of the surface. Your surface height (in the z-direction) is 0.2m. You have specified minimum trough height and maximum peak height for your rough surface as 0.065m and 0.080m respectively. These values should be +/- around your surface height, e.g. 0.18m and 0.22m.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Andrea",
        "date": "Apr 16, 2018, 6:15:29AM",
        "content": "It works now.\nThank you for your help.\nAndrea"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/p-K805zwRHU",
    "title": "how solve this error",
    "original_post": {
      "author": "shereen ebrahim",
      "date": "Jan 31, 2024, 3:52:44AM",
      "content": "hi\nhow can solve this error when make merge file"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 6, 2024, 11:04:23AM",
        "content": "The error suggests the A-scans you are trying to merge do not contain the same number of iterations - thus the merge fails. \n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qWV3Bj0JwZc",
    "title": "Curved bed surface",
    "original_post": {
      "author": "Laurent M.",
      "date": "Oct 11, 2023, 6:54:04AM",
      "content": "Hi gprMax users.\nI have not used gprMax , so I am hoping my question is trivial.\nCan gprmax simulate reflections off a curved surface, in 2d, for instance describing a glacier bed in a  U shape valley for instance?   thx\nLaurent"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 11, 2023, 7:39:38AM",
        "content": "Hi Laurent,\n\nYes it can. Your geometry will be specified using small cubic (for 3D models) or rectangular (for 2D models) cells. The smaller they are in relation to the curvature the better the representation of the actual physical curved geometry.In essence surfaces that do not conform to the Cartesian coordinates are modelled as staircases. gprMax has been used for modelling GPR responses from glaciers.\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Laurent M.",
        "date": "Oct 11, 2023, 8:41:57AM",
        "content": "Thank you  Antonis.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/AW41D8u7ixI",
    "title": "Seeking Help with GPRMax Installation and Beginner Tutorial",
    "original_post": {
      "author": "AISWARYA K P",
      "date": "May 9, 2024, 9:16:19PM",
      "content": "Hello everyone, \n I am a student who is interested in learning how to use GPRMax. I am completely new to this area and have been struggling with the installation process on my system. I would greatly appreciate any guidance or advice on installing GPRMax. If someone could provide step-by-step instructions or point me to a reliable installation guide, that would be incredibly helpful. Additionally, I would like to request any tutorials or resources for beginners. I am looking for basic information that will help me understand how to use GPRMax effectively and build my skills in this area.\nThank you in advance for any assistance you can offer."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 13, 2024, 3:39:27PM",
        "content": "Hi,\n\nOur docs and Youtube channel have quite a lot of useful and basic material.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3OYtsBIEhPQ",
    "title": "about the vti file",
    "original_post": {
      "author": "James T",
      "date": "Mar 9, 2021, 3:06:52AM",
      "content": "Hi all and the gprMax team\nI have encountered some problems. I'm not sure whether it's a bug or just like this at the beginning. When I open the VTI file with paraview, the dielectric parameter value corresponding to its color is not the same as what I set. For example, in this model, I set up a soil with an iron plate in the air. The dielectric constant of the soil is greater than 9, but it is not the value shown in the image."
    },
    "responses": [
      {
        "author": "James T",
        "date": "Mar 9, 2021, 3:07:44AM",
        "content": ""
      },
      {
        "author": "James T",
        "date": "Mar 9, 2021, 3:08:07AM",
        "content": "#domain: 1.4 0.5 0.002 \n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 40e-9\n\n## soil2500\n#material: 9.44294161392092 0 1 0 soil2500\n#add_dispersion_debye: 2 4.86015931256357 1.90072020211854e-11 72.0753821760911 5.56640670473131e-9  soil2500\n\n##time_step_stability_factor: 1e-11\n\n#box: 0.1 0.1 0 1.1 0.11 0.002 pec\n#box: 0.1 0.11 0 1.1  0.28  0.002 soil2500\n#waveform: gaussiandotnorm 10 900e6 my_ricker\n#hertzian_dipole: z 0.2 0.28 0.001 my_ricker\n#rx: 1.2 0.28 0.001\n#src_steps: 0.01 0 0\n#rx_steps: -0.01 0 0\n\n\n在2021年3月9日星期二 UTC+8 下午4:07:44<James T> 写道："
      },
      {
        "author": "James T",
        "date": "Mar 9, 2021, 3:08:31AM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "Mar 9, 2021, 4:17:09AM",
        "content": "Dear James,\n\nThe numeric values in the VTK (.vti or .vtp) files do not correspond to the dielectric constant of the material - they are the material IDs which you can see listed in the table of materials when gprMax runs.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "James T",
        "date": "Mar 9, 2021, 6:54:28AM",
        "content": "Dear Craig,\n\nThank you  very much! If I want to show the dielectric parameters of materials on a similar model diagram, is there any ready-made method or can you provide suggestions in this regard?\n\nJames\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2021, 3:14:09PM",
        "content": "Dear James,\n\nThere is not a straightforward way to do this, as the dielectric parameters are not exported (and thus contained) in the geometry files. \n\nThere might be some way of using Paraview to manually assign permittivity values to the corresponding material IDs, but it is not something I am aware of.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/A0DsQCe8Pz4",
    "title": "How to get Specific information like amplitude from .OUT file? Still use MATLAB？",
    "original_post": {
      "author": "Eve",
      "date": "Apr 19, 2017, 8:50:02PM",
      "content": "Hi gprMax Master,\n\nGprMax3D offers  two types of file ——out and vti. I know that I can put .vti file in Paraview and see my geometry. \nBut how can I analysis my datas using OUT file? Still use Matlab?\n\nLooking forward your reply."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 20, 2017, 4:36:20AM",
        "content": "http://docs.gprmax.com/en/latest/output.html#output-data\n\nand there are example MATLAB scripts for viewing A-scan and B-scan output in the tools/MATLAB scripts folder.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/v5xMZKhjN3o",
    "title": "IndexError: list index out of range while using #geometry_objects_read",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Dec 10, 2020, 8:25:58AM",
      "content": "Hello Antonis, Craig,\n\nI am attempting to use a HDF5 image as a geometry to generate my gprMax model. I've followed all the standard steps mentioned in the guide.\n\n1. Generated the H5 file using the command:\npython -m tools.convert_png2h5 RoughnessTest/this1.png 0.002 0.002 0.002\n\n2. Created a material file who contents are as follows: \n#material: 5 0.001 1 0 0\n#material: 7 0.001 1 0 1\n#material: 2 0.001 1 0 2\n\n3. Create my .in file composed of a very simple code:\n#domain: 1.2 0.85 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5e-9\n#waveform: ricker 1 4.2e9 my_pulse_1\n#hertzian_dipole: z 0.29 0.8 0 my_pulse_1\n#rx: 0.31 0.8 0\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n#geometry_objects_read: 0 0 0 this1.h5 paramfile.rtf\n\n4. Run my code using:\npython -m gprMax RoughnessTest/rough.in\n\nHowever, I get the following error:\nTraceback (most recent call last):\n  File \"C:\\Users\\todkar\\AppData\\Local\\Continuum\\anaconda3\\envs\\gprMax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Users\\todkar\\AppData\\Local\\Continuum\\anaconda3\\envs\\gprMax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\todkar\\Desktop\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\todkar\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 66, in main\n    run_main(args)\n  File \"C:\\Users\\todkar\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\todkar\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\todkar\\Desktop\\gprMax\\gprMax\\model_build_run.py\", line 187, in run_model\n    process_geometrycmds(geometry, G)\n  File \"C:\\Users\\todkar\\Desktop\\gprMax\\gprMax\\input_cmds_geometry.py\", line 94, in process_geometrycmds\n    singlecmdsimport, multicmdsimport, geometryimport = check_cmd_names(materials, checkessential=False)\n  File \"C:\\Users\\todkar\\Desktop\\gprMax\\gprMax\\input_cmds_file.py\", line 213, in check_cmd_names\n    cmdparams = cmd[1]\nIndexError: list index out of range\n\n\nPS: I tried to check the contents of the h5 file using Matlab; h5disp() shows the following info: \nHDF5 this1.h5 \nGroup '/' \n    Attributes:\n        'dx_dy_dz':  0.002000 0.002000 0.002000 \n    Dataset 'data' \n        Size:  1x333x571\n        MaxSize:  1x333x571\n        Datatype:   H5T_STD_I16LE (int16)\n        ChunkSize:  []\n        Filters:  none\n        FillValue:  0\n\nAm I missing something?\n\nThanks for the help.\n- Shreedhar"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 14, 2020, 10:31:44AM",
        "content": "@Shreedhar,\n\nCan you attach the files you are using so I can look at this.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Dec 16, 2020, 2:49:52AM",
        "content": "Good morning  Craig,\n\nI don't know why but I'm unable to attach any files here; I get the same error each time (\"Error posting message\").\n\nHowever, I was able to resolve the issue; here's what happened (this can help future users who make the same mistake as me):\n\nInitially, I saved the material parameters in the format: *.rtf. I got this error. The same error was seen for the following formats as well: *.doc, *.docx, *.odt. \nHowever, only the parameters saved in a *.txt file work without giving any error."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QrX-AIwhPjs",
    "title": "Error trying to pass the option '-gpu 0' to gprmax",
    "original_post": {
      "author": "Anadyr",
      "date": "Sep 25, 2020, 9:54:17AM",
      "content": "Dear  all,\n\nI got the following error trying to run the gprmax using CUDA:\n\nTraceback (most recent call last):\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/gprMax.py\", line 66, in main\n    run_main(args)\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/model_build_run.py\", line 170, in run_model\n    G.memory_check()\n  File \"/opt/anaconda3/envs/gprMax/lib/python3.8/site-packages/gprMax-3.1.5-py3.8-linux-x86_64.egg/gprMax/grid.py\", line 241, in memory_check\n    raise GeneralError('Memory (RAM) required ~{} exceeds {} detected on specified {} - {} GPU!\\n'.format(human_size(self.memoryusage), human_size(self.gpu.totalmem, a_kilobyte_is_1024_bytes=True), self.gpu.deviceID, self.gpu.name))\ngprMax.exceptions.GeneralError: Memory (RAM) required ~2.58GB exceeds 1.95GiB detected on specified 0 - GeForce GT 1030 GPU!\n\n\npyCUDA is install and other programs, which use CUDA, are working perfectly on the same PC.\nHere my NVIDIA settings:\n\nFri Sep 25 15:50:24 2020\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 455.23.05    Driver Version: 455.23.05    CUDA Version: 11.1     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name  Persistence-M      | Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  GeForce GT 1030     On   | 00000000:08:00.0 Off |                  N/A |\n|  0%   25C    P8    N/A /  30W |     38MiB /  1999MiB |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|    0   N/A  N/A      1076      G   /usr/lib/xorg/Xorg                 12MiB |\n|    0   N/A  N/A      1122      G   /usr/bin/sddm-greeter              23MiB |\n+-----------------------------------------------------------------------------+\n\n\nAny help?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 25, 2020, 10:05:21AM",
        "content": "Hi Anadyr,\n\nI don't understand what kind of help one can provide with this. \n\nraise GeneralError('Memory (RAM) required ~{} exceeds {} detected on specified {} - {} GPU!\\n'.format(human_size(self.memoryusage), human_size(self.gpu.totalmem,a_kilobyte_is_1024_bytes=True), self.gpu.deviceID, self.gpu.name))\n\ngprMax.exceptions.GeneralError: Memory (RAM) required ~2.58GB exceeds 1.95GiB detected on specified 0 - GeForce GT 1030 GPU!\n\nIt seems that if you just simply look at the error reported it seems that you do not have enough RAM on your GPU to fit the model you are building. I suppose you need to make the model smaller or get a GPU with more memory.\n\nHope that helps\n\nAntonis\n"
      },
      {
        "author": "Anadyr",
        "date": "Sep 25, 2020, 4:07:08PM",
        "content": "After searching for hours I found that a:\n\nsudo apt install nvidia-cuda-toolkit\n\nwas necessary, despite the output of the\n\nnvidia-smi\n\ntelling me, that CUDA v11 was installed.\n\nThe installation of cuda-toolkit fixed the problem"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/u-i9enNDgao",
    "title": "Issue with Interpretation Results of Homogeneous Ground Model in gprMax",
    "original_post": {
      "author": "Sangyeon Lee",
      "date": "Aug 16, 2023, 10:52:12PM",
      "content": "Subject: Issue with Interpretation Results of Homogeneous Ground Model in gprMax\n\nHello,\n\nI am currently preparing to build a CNN training dataset using gprMax. However, I have noticed an anomaly in the interpretation results of my homogeneous ground model (with a single dielectric constant) and would like to seek clarification on this.\n\nI observed linear noise in the shape of an 'X' at the top of the B-Scan data of the current homogeneous ground model.\n\nThe same type of noise appears even when I only change the properties of the ground and run the interpretation. I would like to understand the reason behind this.\n\nThe in-file used and the interpretation results can be seen in the attached figure.\n\nFigure 1 depicts a B Scan image where signal processing techniques have been applied, along with a graph from the original CSV file for comparison. The signal processing techniques implemented include background removal, AGC (Automatic Gain Control), and a bandpass filter.\n\nWhile the signal processing might not be flawless, leading to some irregularities in the form, I've noticed that a similar graph pattern can be seen in the original CSV file. This suggests that the issue might not be solely due to the signal processing.\n\nI look forward to your prompt response.\n\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 2:12:48PM",
        "content": "Dear Sangyeon,\n\nMost likely what you are seeing are reflections from the PML absorbing boundaries, amplified by the AGC you have applied. There will always be some reflection from the PMLs - the question is what is the level of reflection from the PML versus the return from your target/object?\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 17, 2023, 6:35:27PM",
        "content": "Hi Sangyeon,\n\nCraig correctly point to issues with the PML which can be amplified and create such patterns but also looking at your input file there are other objects and materials present. Having the source away from the PML and using more cells as you do should not cause so much of an issue. Are you sure this is just a half space model without including the absorber material?\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Sangyeon Lee",
        "date": "Aug 18, 2023, 4:16:21AM",
        "content": "Hello Craig Warren,\n\nThank you for your insightful response.\n\nI understand that reflections can occur from the PML boundaries. However, I'm wondering if the reflected waves measured are too fast given the size of my model. Specifically, my model has a width of 6m and a depth of 6m, and with the transmitter/receiver located at 3m, it seems odd that the reflections are detected so quickly.\n\nAttached is an image of the analysis model from the 0_s_c_s_.in file. The red box at the top is an absorber intended to surround the transmitter/receiver to minimize reflections in the air.\n\nDespite the underground conduit (made of PEC material) being located at 3m below the ground, there's a significant time difference between the reflections from the PML and the detected signals.\n\nI'm curious about the reason for this time discrepancy. Am I perhaps misunderstanding the reflections caused by the PML?\n\nBest regards,\nsangyeon lee\n\n\n2023년 8월 18일 금요일 오전 3시 12분 48초 UTC+9에 Craig Warren님이 작성:\n"
      },
      {
        "author": "Sangyeon Lee",
        "date": "Aug 18, 2023, 4:29:30AM",
        "content": "Dear Antonis Giannopoulos,\n\nThank you for sharing your perspective.\n\nRegarding the properties of the absorber, I initially used it when I observed the 'x-shaped' noise. I suspected that it might be a reflection signal from the upper PML. Hence, I decided to wrap the transceiver with the absorber during the analysis. This decision was primarily based on the observation that the reflection signal from the conduit was measured at a much shorter time compared to without the absorber. Even when I conducted an analysis without the absorber, the results were consistent.\n\nFor the 'x-shaped' noise, following your advice, I increased the number of PML cells and positioned the transceiver further away for the analysis. As a result, I was able to confirm that the said noise disappeared.\n\nHowever, two additional queries have emerged:\n\nHow should I interpret the time difference between t1 and t2, as mentioned above?\nApart from the trial-and-error method after conducting an analysis and reviewing the results, is there another method to determine the appropriate number of PML cells?\nI look forward to your guidance.\n\nBest regards,\nSangyeon\n\n2023년 8월 18일 금요일 오전 7시 35분 27초 UTC+9에 Antonis Giannopoulos님이 작성:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-7Z1Ja4F07w",
    "title": "Something wrong with my conversion from ‘.out’ file to '.mat' file",
    "original_post": {
      "author": "HJJ HJJ",
      "date": "Aug 14, 2018, 3:22:45AM",
      "content": "Hi friend,\n\nThanks for advanced gprMax software.\n\nBut there is a very strange problem when '.out' file was converted into '.mat' file for matlab processing.\n\n1. I installed the gprMax on my laptop, and it worked well. the  conversion from ‘.out’ file to '.mat' file is ok.\n2. I installed the gprMax on my desktop computer, and it worked well. But the  conversion from ‘.out’ file to '.mat' file is wrong. The matlab procedure for reading '.out' file is absolutely same with that used in 1. It is very strange. I try to use the command 'python -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out', the result was displayed well. I am cofused......I do not know why the  '.out' files produced by different computers have different conversion results. Both computer are 64-bits system.\n3. The prompt error in matlab software is that:\n\nIncorrect use hdf5lib2:\n\n    H5O_attr_open_by_name    can't locate attribute: 'dx,\n    dy, dz'\n    H5A_open_by_name         unable to load attribute info\n    from object header\n    H5Aopen_name             can't open attribute: 'dx, dy,\n    dz'\n\neror H5A.open_name (line 16)\nattr_id = H5ML.hdf5lib2('H5Aopen_name', loc_id,name);\n\nerror h5readatt (line 48)\nattr_id = H5A.open_name(obj_id,options.Attname);\n\nerror Tran_mat (line 21)\n    tmp = h5readatt(fullfilename, '/', 'dx, dy, dz');\n\n4. The attached is conversation procedure and '.out' file which maybe not very right.\n\nThanks. Look forward to your suggestions.\n\n\nRegards,\n\nHJJ"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 14, 2018, 3:42:54PM",
        "content": "We changed the naming of an attribute in the output file from 'dx,dy'dz' to 'dx_dy_dz'. Most likely you don't have the latest code, and/or have output from different versions. Pull the latest update and run the test model on your desktop and it should be fine.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Aug 15, 2018, 5:50:22AM",
        "content": "It works now.\n\nThanks very much!\n\nCheers,\n\nHJJ"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/A2fvKcJfcao",
    "title": "How can I fix the heterogeneous soil when I move the antennas?",
    "original_post": {
      "author": "Zoey",
      "date": "Dec 7, 2019, 10:25:05AM",
      "content": "Hello everyone!\n\nI need to make a heterogeneous soil model. But when I move the antennas, the geo model will be made again.\n\nThe following is two models in the same in. file:\n\nThank you very much!\nZoey"
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Dec 8, 2019, 4:08:25AM",
        "content": "Hello Zoey,\n\nThis is probably because you dont specify the i2 parameter of the fractal_box command.\n\n• i2 is an optional parameter which controls the seeding of the random number generator used to create\nthe fractals. By default (if you don’t specify this parameter) the random number generator will be seeded\nby trying to read data from /dev/urandom (or the Windows analogue) if available or from the clock\notherwise.\n\nFor each Ascan, i.e. for each movement, gprmax is rebuilding the geometry of your model, so each time is using a random number to generate the fractals. However if you specify i2 (e.g. 100), everytime is going to use that number and your model will be the same.\n\nKind regards,\n\nDimitris"
      },
      {
        "author": "Zoey",
        "date": "Dec 8, 2019, 9:16:48PM",
        "content": "Hi Dimitris!\n\nSpecial thanks for your answer. It helped me a lot！ I'll try it again!\n\nBest wishes!\n\nZoey"
      },
      {
        "author": "Michael Fehér",
        "date": "Dec 10, 2019, 9:33:28AM",
        "content": "Did it work?\n\nI solved this issue by building a heterogeneous soil-box and wrote it into a h5 via #geometry_objects_write\n\nthen with every A-scan I load this soil-box with #geometry_objects_read.\n\nSo I got several soil-boxes where i can place mij objects into.\n\n\n\nGreatings, Micha"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Aug 5, 2021, 7:28:33AM",
        "content": "Just for reference: I think this might also be possible to tackle with \"geometry_fixed=True\"\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2021, 9:44:42AM",
        "content": "Yes, so long as the 'antenna' is a simple model like a Hertzian dipole, i.e. not a antenna model with its own structure and material properties.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rmDOGwJrYR8",
    "title": "Modelling of an antenna in gprMax",
    "original_post": {
      "author": "Awwab Mohammad",
      "date": "Sep 28, 2017, 11:55:32AM",
      "content": "Hello, \n\nI want to use TEM horn antenna in gprMax.  Can anyone suggest a procedure for this purpose?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_enptmlG3yE",
    "title": "Re: problem with snapshot in paraview",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 27, 2020, 2:51:12PM",
        "content": "Hi Riccardo,\n\nCan you attach the complete input files for the working and non-working snapshots so that we can replicate the problem.\n\nAlso are you using the CPU or GPU-based (CUDA) solver?\nCan you check that the snapshot files have some size, i.e. that indicate some data has been written.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/RSlJehK7_H0",
    "title": "trouble running gprMax using mpi with no spawn",
    "original_post": {
      "author": "Amir Tal",
      "date": "Aug 5, 2024, 9:14:46AM",
      "content": "Hello,\n\nWe are having some problems running the mpi functionality and are hoping for some assistance or any reference with resolving this. Please take note we tried looking the group for a similar problem and tried to solve this by ourselves before posting. However we believe this specific problem wasn't encountered before.\n\nWhile running the attached .in file both by using the CLI or the api method gprMax wasn't able to run as expected, utilizing the multiple GPUSs and CPUs cores our machine has.  It seems that although the mpi_no_spawn flag is set to True, the \"Mixed mode MPI with OpenMP or CUDA - MPI task farm for models with each model parallelised with OpenMP (CPU) or CUDA (GPU)\" is still invoked from gprMax.py instead of \"Alternate MPI configuration that does not use MPI spawn mechanism\" process.\n\nThe MPI version that was installed is v10.1.3 running on windows server 2022 OS. In addition the api and CLI calls are based on the following usage guidelines as follow.\n\napi(b_in_filename, n, geometry_only=geo_onoff, mpi=len(gpus_list) + 1, gpu=gpus_list, mpi_no_spawn=True).\n\nPlease see the full error message for more details:\n\nError message:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Administrator\\PycharmProjects\\gprSim\\main.py\", line 33, in <module>\n    bscan_data, dt, b_out_fname = gsim.simulate_bscan(inf_file, trace_number,gpus_list=[0,1,2,3,4,5,6,7], geo_onoff=geo_flag)\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Administrator\\PycharmProjects\\gprSim\\gpr_sim.py\", line 60, in simulate_bscan\n    api(b_in_filename, n, geometry_only=geo_onoff, mpi=len(gpus_list) + 1, gpu=gpus_list, mpi_no_spawn=True)\n  File \"C:\\ProgramData\\anaconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 108, in api\n    run_main(args)\n  File \"C:\\ProgramData\\anaconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 177, in run_main\n    run_mpi_sim(args, inputfile, usernamespace)\n  File \"C:\\ProgramData\\anaconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 409, in run_mpi_sim\n    newcomm = comm.Spawn(sys.executable, args=['-m', 'gprMax'] + myargv + [workerflag], maxprocs=numworkers)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src\\\\mpi4py\\\\MPI.src\\\\Comm.pyx\", line 2544, in mpi4py.MPI.Intracomm.Spawn\nmpi4py.MPI.Exception: Internal MPI error!, error stack:\nMPI_Comm_spawn(cmd=\"C:\\ProgramData\\anaconda3\\envs\\gprMax\\python.exe\", argv=0x0000022C69D10490, maxprocs=8, MPI_INFO_NULL, root=0, MPI_COMM_WORLD, intercomm=0x0000022C701D1D20, errors=0x0000000000000000) failed\nInternal MPI error!  FAILspawn not supported without process manager\n\nAny assistance will be appreciated."
    },
    "responses": [
      {
        "author": "Amir Tal",
        "date": "Aug 5, 2024, 9:19:39AM",
        "content": "Here's the full log from the console:\n\nC:\\ProgramData\\anaconda3\\envs\\gprMax\\python.exe C:\\Users\\Administrator\\PycharmProjects\\gprSim\\main.py\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.7 (Big Smoke)\n\n Copyright (C) 2015-2023: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the\n  terms of the GNU General Public License as published by the Free Software\n  Foundation, either version 3 of the License, or (at your option) any later\n  version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY\n  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n  A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with\n  gprMax.  If not, see www.gnu.org/licenses.\n\nHost: EC2AMAZ-0OI6QQ7 | Xen HVM domU | 2 x Intel(R) Xeon(R) CPU E5-2686 v4 @ 2.30GHz (32 cores, 64 cores with Hyper-Threading) | 488GiB RAM | Windows 10 (64-bit)\nGPU(s) detected: 0 - Tesla V100-SXM2-16GB, 15.9GiB | 1 - Tesla V100-SXM2-16GB, 15.9GiB | 2 - Tesla V100-SXM2-16GB, 15.9GiB | 3 - Tesla V100-SXM2-16GB, 15.9GiB | 4 - Tesla V100-SXM2-16GB, 15.9GiB | 5 - Tesla V100-SXM2-16GB, 15.9GiB | 6 - Tesla V100-SXM2-16GB, 15.9GiB | 7 - Tesla V100-SXM2-16GB, 15.9GiB\n\n=== MPI task farm (USING MPI Spawn) ===========================================\n=== MPI master (MPI_COMM_WORLD, rank: 0) on EC2AMAZ-0OI6QQ7 spawning 8 workers...\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Administrator\\PycharmProjects\\gprSim\\main.py\", line 33, in <module>\n    bscan_data, dt, b_out_fname = gsim.simulate_bscan(inf_file, trace_number,gpus_list=[0,1,2,3,4,5,6,7], geo_onoff=geo_flag)\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Administrator\\PycharmProjects\\gprSim\\gpr_sim.py\", line 60, in simulate_bscan\n    api(b_in_filename, n, geometry_only=geo_onoff, mpi=len(gpus_list) + 1, gpu=gpus_list, mpi_no_spawn=True)\n  File \"C:\\ProgramData\\anaconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 108, in api\n    run_main(args)\n  File \"C:\\ProgramData\\anaconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 177, in run_main\n    run_mpi_sim(args, inputfile, usernamespace)\n  File \"C:\\ProgramData\\anaconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 409, in run_mpi_sim\n    newcomm = comm.Spawn(sys.executable, args=['-m', 'gprMax'] + myargv + [workerflag], maxprocs=numworkers)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"src\\\\mpi4py\\\\MPI.src\\\\Comm.pyx\", line 2544, in mpi4py.MPI.Intracomm.Spawn\nmpi4py.MPI.Exception: Internal MPI error!, error stack:\nMPI_Comm_spawn(cmd=\"C:\\ProgramData\\anaconda3\\envs\\gprMax\\python.exe\", argv=0x0000022C69D10490, maxprocs=8, MPI_INFO_NULL, root=0, MPI_COMM_WORLD, intercomm=0x0000022C701D1D20, errors=0x0000000000000000) failed\nInternal MPI error!  FAILspawn not supported without process manager\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2024, 11:13:43AM",
        "content": "Hi Amir,\n\nThe 'mpi' argument should not be used if you want to use MPI without MPI Spawn,  see the example in the docs - https://docs.gprmax.com/en/latest/openmp_mpi.html#openmp-mpi-example-no-spawn You should just be able to add the list of GPUs to this example, and of course set the GPU resources correctly on your HPC.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Amir Tal",
        "date": "Aug 19, 2024, 2:57:25PM",
        "content": "thank you kindly for your help\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/mnYAg9KOMDQ",
    "title": "How to transmit a SFCW signal sending each signal s1,s2,...sN consequently?",
    "original_post": {
      "author": "Andrea",
      "date": "Mar 19, 2020, 7:26:50AM",
      "content": "Good morning everyone, I need help with my master's thesis.\nI have N file.txt, each file contains the times and amplitudes of a wave, file1.txt contains A * cos (2 * pi * f (1) * t1), file2.txt contains A * cos (2 * pi * f (2) * t2). that is, I want to reproduce an SFCW signal.\nI would therefore like to send my signals, first s1 with freq f_min = 1Ghz up to sN with frequency f_max = 1.5Ghz\nso I created my code for Gprmax:\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n\n#python:\nfrom gprMax.input_cmd_funcs import *\nN=2\n\nfor i in range(1,N+1,1):\n  domain = domain(0.24, 0.21, 0.002)\n  dxdydz = dx_dy_dz(0.002, 0.002, 0.002)\n  timewindow = time_window(5e-9)\n  material(permittivity=6, conductivity=0, permeability=1, magconductivity=0, name='half_space')\n  box(0, 0, 0, 24e-2, 17e-2, 2e-3, 'half_space')\n  cylinder(0.120, 0.080, 0, 0.120, 0.080, 0.002, 0.050, 'pec')\n  n_file=str(i)\n  nome_file='A' + n_file + '.txt'\n  excitation_file('A1.txt')\n  tx = hertzian_dipole('z', 0.100, 0.170 , 0, 'my_pulse')\n  rx(0.120, 0.170, 0)\n#end_python:\n\n\nBut this doesn't work,\nTypeError: 'Coordinate' object is not callable.\n\nif you also run the cycle only for:\n\nN=2\nfor i in range(1,N+1,1):\n  n_file=str(i)\n  nome_file='A' + n_file + '.txt'\n  excitation_file('A1.txt')\n  tx = hertzian_dipole('z', 0.100, 0.170 , 0, 'my_pulse')\n  rx(0.120, 0.170, 0)\n\nit gives an error because I can't call extention_file multiple times.\nHas anyone already had a similar problem? do you know a way to do this?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 26, 2020, 6:49:45AM",
        "content": "Dear Andrea,\n\nThere are several issues with what you are trying to do:\n\n1. You should understand that the FDTD method is not best suited for modelling SFCW GPR as a separate model must be run for each excitation frequency. There are some tricks you can play to overcome this but you need a good understanding of FDTD before using them.\n\n2. It is not advisable to run multiple models from within a Python for loop. The design of gprMax is that you run an input file multiple times (from the command line argument '-n') and then use the Python variable 'current_model_run' to control how parameters change for each model run.\n\n3. Most of the commands you are importing from gprMax.input_cmd_funcs return Coordinate tuple, so you should use them that way.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Andrea",
        "date": "Apr 1, 2020, 4:20:34AM",
        "content": "this is a method to generate N file.in, each file.in has a different file.txt in the #excitation_file line:\n(python file)\nN=100\nfor K in range(1,N+1,1):\n    print(K);\n    num_f=str(K)\n    nome_file=\"cylinder_Ascan.in\"\n    n_file_in='sim_N'+ num_f+ '.in'\n    stinga_cange= '#excitation_file: source/A'+num_f+'.txt\\n'\n    f = open(nome_file,\"r\")\n    f1 = open(n_file_in,\"w+\")\n    lines = f.readlines()\n    i =0\n    for line in lines:\n        #print(line.strip())\n        i =i+1\n        if i == 8:\n            f1.write( stinga_cange)\n        else:\n            f1.write(line)\n    f.close()\n    f1.close()\n\nthe file.in is:\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 2.0e-9\n#material: 6 0 1 0 half_space\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.030 0 0.120 0.030 0.002 0.020 pec\n#excitation_file: source/A1.txt\n#hertzian_dipole: z 0.120 0.17 0 my_pulse\n#rx:  0.180 0.170 0\n\nwith N file A.txt= A1.txt, A2.txt, ..... AN.txt\n\nthis is a method to execute the simulation automatically in python\n(python file)\n\nprint('\\n_________________START______SIMULATION_________________\\n')\nimport os\nimport subprocess\nN=5\ni=1\nfor i in range(1,N+1):\n    num_file=str(i)\n    n_file=\"python -m gprMax sim_N\"+ num_file +\".in\"\n    subprocess.run(n_file)\nprint('\\n_________________FINISH______SIMULATION_________________\\n')"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 1, 2020, 6:48:57AM",
        "content": "Hi Andrea,\n\nI don't think you understand how gprMax is designed to work.\n\n- You can have multiple excitation waveforms in a single file. Each new excitation is just a new column of data with a different name, see example in docs - http://docs.gprmax.com/en/latest/input.html#excitation-file \n- You can access each excitation in your input file using a Python block and the 'current_model_run' variable, see the docs - http://docs.gprmax.com/en/latest/python_scripting.html#constants-variables. So if the excitations are in the file 'my_sources.txt' and are labelled 'my_pulse1', 'my_pulse2' etc..., your input file ('file.in') might look like:\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 2.0e-9\n#material: 6 0 1 0 half_space\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.030 0 0.120 0.030 0.002 0.020 pec\n#excitation_file: my_sources.txt\n#rx:  0.180 0.170 0\n#python:\nprint(f'#hertzian_dipole: z 0.120 0.17 0 my_pulse{str(current_model_run)}')\n#end_python:\n\nYou would then run that for however many excitations you have (lets say 10 for example) using:\n\npython -m gprMax file.in -n 10\n\nThis will run each model in series and will use OpenMP (or CUDA if you select GPU) for parallelisation.\n\nAs I said though, FDTD is not best suited to SFCW simulations. As each frequency of excitation requires a separate model run. You can (if you know what you are doing) excite a single model with an impulse, then convolve the resulting response with whatever excitation you like, which overcomes the need to run a separate model for each frequency, and is thus much faster.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sP0ZsPmaxKw",
    "title": "Regarding this code",
    "original_post": {
      "author": "savita s",
      "date": "Jun 1, 2021, 5:28:08AM",
      "content": "This is the code which is already their in GPRMAX Document.I am trying to run this but not able to get. I am getting the error.Earlier i tried same code,but i got the output. Now its not coming. Please tdo the needful.\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry view 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:49:29AM",
        "content": "You are missing the underscore from your #geometry_view command.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IJDxHhXcICU",
    "title": "Receive antenna voltage",
    "original_post": {
      "author": "城阳",
      "date": "Apr 28, 2024, 1:58:32PM",
      "content": "Hello team gprMax，\nI'm studying the use of a half-wave dipole as a receiving antenna to convert electromagnetic waves into electromotive force. However, it was found that the transmission line voltage in the simulation was always 1/2 of the theoretical value.\n\nBecause the theoretical calculation is the voltage Voc (-d/2 ~ d/2) in the gap between the two antenna terminals, but the simulation records the voltage of the transmission line. Are these the same concept? Or is there a 2x relationship possible?\n\nThank you."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/SgwjEtTRHaM",
    "title": "Questions about forward and inverse problem",
    "original_post": {
      "author": "DIALLO Mamadou Cherif",
      "date": "Mar 24, 2021, 10:01:29AM",
      "content": "Hi everyone, \nI am a PhD student in geophysics and its my last year. We are planning to do some gpr (Reflection in borehole and cross borehole tomography).\nSo my first question is : Is it possible to use gprmax for doing some simulations for field work planning ?\n  And the second one is : Do you if there is any free or commercial tool (code) for inverting those kind of measurements ?\n  Kind regards,\n  Cherif"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 5, 2021, 12:21:25PM",
        "content": "Dear Cherif,\n\nSome quick answers:\n\nWe are planning to do some gpr (Reflection in borehole and cross borehole tomography).\nSo my first question is : Is it possible to use gprmax for doing some simulations for field work planning ?\nYes, it is possible. How realistic your results are, and how much computational resource you require will depend on how detailed and accurate your model is. It is not straightforward to model all the detail of the materials (soils etc...) as well as the GPR antennas in this type of scenario.\n\nAnd the second one is : Do you if there is any free or commercial tool (code) for inverting those kind of measurements ?\n\nThis is an area of active research, and thus is not something (I'm aware of) that is commercially available. You might like to read some of the publications of the Hydrogeophysical Imaging and Characterisation group at Forschungszentrum Jülich who are active in this area.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5Xgq7WSKmng",
    "title": "one question about B_scan",
    "original_post": {
      "author": "lu tao",
      "date": "Oct 6, 2019, 8:08:11AM",
      "content": "Hi,everyone: \n                  In the model I built, I used an 80Mhz antenna, but the image I got only had a signal on the surface. Is this signal a direct wave? I don't know which step is wrong?\n                  Attach my files and images. Every answer i will appreciate!\n                                                                                                                                                                                                                                                    yours sincerely\n                                                                                                                                                                                                                                                    Lu Tao"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 17, 2019, 5:19:29AM",
        "content": "Dear Lu,\n\nYour materials have some conductivity (0.1 and 0.01 S/m) which means the reflected waves will be attenuated compared to the direct/ground wave. Therefore you just need to adjust the plot scale in the B-scan to see the reflections - see attached example which shows the reflection from the first interface. Obviously the plotting of direct/ground wave will become saturated.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "lu tao",
        "date": "Oct 20, 2019, 2:27:55AM",
        "content": "Dear Craig,\n\nI have not found the way to adjust the plot scale in the B-scan. Could you give me some information about this?\n\nFaithfully yours,\n\nLu"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2019, 4:55:51AM",
        "content": "Look in the tools->plot_Bscan.py module, line 48. You'll need to modify the matplotlib plotting method imshow, specifically the vmin and vmax parameters, see - https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.axes.Axes.imshow.html?highlight=imshow#matplotlib-axes-axes-imshow\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8IiuJbcH33g",
    "title": "urgent",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Mar 4, 2024, 3:24:46AM",
      "content": "Hello All;\n\nCould you please tell me why I cannot generate .vti geometry view , and it is only generate .out file. \n\nAppreciate if you can help me however,  this input file is perfectly running.\n\n\n#domain: 1.0 2.0 1.0\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 3000\n\n#python:\nimport scipy.interpolate\nimport numpy as np\nfrom random import random as rd\n\n# Parameters of the road cross section\n\n# Material One: Asphalt concrete surface, 18cm\nwater_content_asphalt_concrete_surface = np.array([12, 9.3, 6.2, 5.5, 2.8, 0.2]) # The water content of the concrete\nstart_permittivity_asphalt_concrete_surface = np.array([12.84, 11.19, 9.14, 8.63, 6.75, 4.814]) # Permittivity of each water content\ninfinity_permittivity_asphalt_concrete_surface = np.array([7.42, 7.2, 5.93, 6.023, 5.503, 4.507])\nrelaxation_time_asphalt_concrete_surface = np.array([0.611, 0.73, 0.8, 1, 2.28, 0.82])*10**-9\nconductivity_asphalt_concrete_surface = np.array([20.6, 23, 6.7, 5.15, 2.02, 0.606])*10**-3 # Sigma = Conductivity of the concrete\n\nstart_permittivity_int_asphalt_concrete_surface = scipy.interpolate.interp1d(water_content_asphalt_concrete_surface, start_permittivity_asphalt_concrete_surface)\ninfinity_permittivity_int_asphalt_concrete_surface = scipy.interpolate.interp1d(water_content_asphalt_concrete_surface, infinity_permittivity_asphalt_concrete_surface)\ntime_int_asphalt_concrete_surface = scipy.interpolate.interp1d(water_content_asphalt_concrete_surface, relaxation_time_asphalt_concrete_surface)\nconductivity_int_asphalt_concrete_surface = scipy.interpolate.interp1d(water_content_asphalt_concrete_surface, conductivity_asphalt_concrete_surface)\n\n# Material two: Cement stabilized base 40cm\nwater_content_cement_stabilized_base = np.array([12, 9.0, 6.0, 5.0, 2.0, 0.2]) # The water content of the concrete\nstart_permittivity_cement_stabilized_base = np.array([11.84, 10.04, 9.00, 8.34, 5.75, 4.251]) # Permittivity of each water content\ninfinity_permittivity_cement_stabilized_base = np.array([6.42, 5.2, 2.93, 8.023, 4.503, 1.507])\nrelaxation_time_cement_stabilized_base = np.array([5.611, 5.73, 1.8, 1, 0.28, 1.82])*10**-9\nconductivity_cement_stabilized_base = np.array([0.5, 25, 6.9, 5.19, 3.02, 1.606])*10**-3 # Sigma = Conductivity of the concrete\n\nstart_permittivity_int_cement_stabilized_base = scipy.interpolate.interp1d(water_content_cement_stabilized_base, start_permittivity_cement_stabilized_base)\ninfinity_permittivity_int_cement_stabilized_base = scipy.interpolate.interp1d(water_content_cement_stabilized_base, infinity_permittivity_cement_stabilized_base)\ntime_int_cement_stabilized_base = scipy.interpolate.interp1d(water_content_cement_stabilized_base, relaxation_time_cement_stabilized_base)\nconductivity_int_cement_stabilized_base = scipy.interpolate.interp1d(water_content_cement_stabilized_base, conductivity_cement_stabilized_base)\n\n# Material three: Cement stability subbase 20cm\nwater_content_cement_stability_subbase = np.array([12, 9.3, 6.2, 5.5, 2.8, 0.2]) # The water content of the concrete\nstart_permittivity_cement_stability_subbase = np.array([12.84, 11.10, 9.14, 4.63, 6.75, 4.814]) # Permittivity of each water content\ninfinity_permittivity_cement_stability_subbase = np.array([7.42, 7.0, 5.93, 6.023, 5.503, 4.507])\nrelaxation_time_cement_stability_subbase = np.array([0.611, 0.73, 0.8, 1, 2.38, 0.82])*10**-9\nconductivity_cement_stability_subbase = np.array([20.6, 23, 6.7, 5.15, 3.02, 0.606])*10**-3 # Sigma = Conductivity of the concrete\n\nstart_permittivity_int_cement_stability_subbase = scipy.interpolate.interp1d(water_content_cement_stability_subbase, start_permittivity_cement_stability_subbase)\ninfinity_permittivity_int_cement_stability_subbase = scipy.interpolate.interp1d(water_content_cement_stability_subbase, infinity_permittivity_cement_stability_subbase)\ntime_int_cement_stability_subbase = scipy.interpolate.interp1d(water_content_cement_stability_subbase, relaxation_time_cement_stability_subbase)\nconductivity_int_cement_stability_subbase = scipy.interpolate.interp1d(water_content_cement_stability_subbase, conductivity_cement_stability_subbase)\n\n# Material four: Subgrade 42cm\nwater_content_subgrade = np.array([12,.0 9.3, 5.2, 5.5, 2.8, 0.2]) # The water content of the concrete\nstart_permittivity_subgrade = np.array([12.84, 21.19, 9.14, 8.63, 6.75, 4.814]) # Permittivity of each water content\ninfinity_permittivity_subgrade = np.array([7.42, 6.2, 5.93, 6.023, 5.503, 4.507])\nrelaxation_time_subgrade = np.array([0.611, 0.73, 0.8, 5, 2.28, 0.82])*10**-9\nconductivity_subgrade = np.array([20.6, 23, 6.7, 4.15, 4.02, 0.606])*10**-3 # Sigma = Conductivity of the concrete\n\nstart_permittivity_int_subgrade = scipy.interpolate.interp1d(water_content_subgrade, start_permittivity_subgrade)\ninfinity_permittivity_int_subgrade = scipy.interpolate.interp1d(water_content_subgrade, infinity_permittivity_subgrade)\ntime_int_subgrade = scipy.interpolate.interp1d(water_content_subgrade, relaxation_time_subgrade)\nconductivity_int_subgrade = scipy.interpolate.interp1d(water_content_subgrade, conductivity_subgrade)\n\n# Now create any random number between 12 and 0.2\nrandom_water_content = 0.2 + 11.8 * rd()\n\nprint('#material: {} {} 1 0 asphalt concrete surface \\n'.format(infinity_permittivity_int_asphalt_concrete_surface(random_water_content), conductivity_int_asphalt_concrete_surface(random_water_content)))\nprint('#material: {} {} 1 0 cement stabilized base \\n'.format(infinity_permittivity_int_cement_stabilized_base(random_water_content), conductivity_int_cement_stabilized_base(random_water_content)))\nprint('#material: {} {} 1 0 cement stability subbase \\n'.format(infinity_permittivity_int_cement_stability_subbase(random_water_content), conductivity_int_cement_stability_subbase(random_water_content)))\nprint('#material: {} {} 1 0 subgrade \\n'.format(infinity_permittivity_int_subgrade(random_water_content), conductivity_int_subgrade(random_water_content)))\n\nprint('#add_dispersion_debye: 1 {}  {}  asphalt concrete surface  \\n'.format(start_permittivity_int_asphalt_concrete_surface(random_water_content) - infinity_permittivity_int_asphalt_concrete_surface(random_water_content), time_int_asphalt_concrete_surface(random_water_content)))\nprint('#add_dispersion_debye: 1 {}  {}  cement stabilized base  \\n'.format(start_permittivity_int_cement_stabilized_base(random_water_content) - infinity_permittivity_int_cement_stabilized_base(random_water_content), time_int_cement_stabilized_base(random_water_content)))\nprint('#add_dispersion_debye: 1 {}  {}  cement stability subbase  \\n'.format(start_permittivity_int_cement_stability_subbase(random_water_content) - infinity_permittivity_int_cement_stability_subbase(random_water_content), time_int_cement_stability_subbase(random_water_content)))\nprint('#add_dispersion_debye: 1 {}  {}  subgrade  \\n'.format(start_permittivity_int_subgrade(random_water_content) - infinity_permittivity_int_subgrade(random_water_content), time_int_subgrade(random_water_content)))\n\nprint('#box: 0 0 0 1.0 0.25 0.25 asphalt concrete surface')\nprint('#box: 0 0 0 1.0 0.30 0.4 cement stabilized base')\nprint('#box: 0 0 0 1.0 0.4 0.5 cement stability subbase')\nprint('#box: 0 0 0 1.0 0.5 0 subgrade')\n\nradius = 0.005 + 0.0245 * rd()\ndepth = (0.3 - radius) * rd()\n\nprint(\"#cylinder: 0.25 0 {} 0.25 0.3 {} {} pec \\n\".format(depth, depth, radius))\n\n\nfilename = 'Road_cross_section'\nf = open(filename, 'a')\n\n\nf.write('{}: {} {} {}'   .format(current_model_run, radias, depth, random_water_conent_))\n\nfrom user_libs.antennas import GSSI\nGSSI.antenna_like_GSSI_1500(0.5, 1.0, 0.18, resolution=0.001 )\n\n#end_python:\n#geometry_view: 0 0 0 1.0 2.0 1.0 0.002 0.002 0.002 gprgeo n\n\n-- INSERT --\n\n\n\n\nKind regards \nNaween"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 4, 2024, 5:19:30AM",
        "content": "Hi Naween,\n\nFor starters, the input file you supplied above is full of basic errors - there are misspelled variable names and missing underscores that will not let it execute. Secondly, the model is too big for me to easily test, as it requires ~141GB of RAM to build/run. I suggest trying a smaller domain or courser spatial resolution (if appropriate) to start with.\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DM9WAwYfKJU",
    "title": "property of PEC",
    "original_post": {
      "author": "Junjun Liu",
      "date": "Jul 5, 2016, 5:27:06AM",
      "content": "Hi,\n\nThere is a question about the property of pec when I did a simulation, I found the conductivity of pec is 0 S/m in the gprMax, according this, the properties between pec and free_space is same, but as we know, the conductivity of pec should be infinity, not 0 S/m, so I dont't know whether there is something wrong.\n\nHope your reply.\nJunjun Liu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 5, 2016, 5:49:55AM",
        "content": "Hi Junjun,\n\ngprMax will, correctly, set the electric field value to zero for materials that are defined as pec. This represents having zero resistance (or infinite conductivity). \n\nI have amended the printing of material properties (in the latest commit to GitHub) to show infinite conductivity, so there is no confusion.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Junjun Liu",
        "date": "Jul 5, 2016, 9:45:36AM",
        "content": "Hi Craig,\n\nI updated gprMax just now, now it's OK, Thanks for your reply.\n\nJunjun"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 5, 2016, 9:49:09AM",
        "content": "Hi Junjun,\n\nThat's great, but just to be clear for future users reading this thread, gprMax is/was handling pec material entirely correctly, I merely changed how the conductivity value was being displayed.\n\nThanks,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yXXme-KLXHg",
    "title": "No hyperbola in B-scan",
    "original_post": {
      "author": "Edward Ma",
      "date": "May 12, 2020, 1:47:33PM",
      "content": "Dear all，\n\nI'm using gprMax to simulate a underground cavity,and now I get the problem that  there is no hyperbola in the B-scan image (Actually no waveform...).\nI attached my code and result after I run it.\nI would appreciate if anyone can solve me problem. Thanks a lot.\n(I'm sorry if I made a stupid mistake....please tell me!)\n\nRegards,\n\nEdward\n\n#title: test\n#domain: 5 3 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 4e-8\n\n#material: 4 0.005 1 0 mianceng\n#material: 9 0.05 1 0 jiceng\n#material: 12 0.01 1 0 tuji\n\n#waveform: ricker 1 4e8 my_ricker\n#hertzian_dipole: z 0.2 2.5 0 my_ricker\n#rx: 0.25 2.5 0\n#src_steps: 0.05 0 0\n#rx_steps: 0.05 0 0\n\n#box: 0 0 0 5 1.9 0.01 tuji\n#box: 0 1.9 0 5 2.35 0.01 jiceng\n#box: 0 2.35 0 5 2.5 0.01 mianceng\n#cylinder: 2.5 1 0 2.5 1 0.01 0.2 free_space"
    },
    "responses": [
      {
        "author": "Espen Svendsen",
        "date": "May 13, 2020, 6:29:33AM",
        "content": "Hi Edward,\n\nI think your time window might be too small. Your slowest material has a velocity of c/sqrt(12) = 0.087 m /ns (approx). \n\nWhich for a timewindow of 40 ns gives you approx. 3.46 m propagation. \n\nBy eyeballing the distance it seems like you have 1 m of the slowest material between the surface and the cavity, which gives 2 m due to 2-way-travel, so almost all of the timewindow is used for travelling in the 3rd layer.\nSo I think you might need some more time for the reflection to arrive.  Maybe try doubling the time window. \n\nBest regards\nEspen"
      },
      {
        "author": "Craig Warren",
        "date": "May 14, 2020, 11:41:07AM",
        "content": "Hi Edward,\n\nIndeed as Espen pointed out, your time window is a bit short. However, the biggest issue is that you need to apply some processing - specifically gain - to your data, just as you would do for real field GPR data. You have lossy materials in your model, so attenuation will be taking place. If you apply some gain to the results, you will see the hyperbola from your cylindrical object - see attached output from your input file file with some (crude) constant gain applied.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Edward Ma",
        "date": "May 19, 2020, 11:45:48AM",
        "content": "Thank you very much,Craig.\n\nBut I dont know how to apply gain to the results,can you tell me the specific steps? Is there some parametes in the plot_B-scan.py should I modify or else?\n\nRegards,\n\nEdward"
      },
      {
        "author": "Craig Warren",
        "date": "May 23, 2020, 3:12:42PM",
        "content": "Dear Edward,\n\nMatplotlib is used to do all our Python plotting. In the 'plot_Bscan.py' module you'll find (at line 48) the 'imshow' function (https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.pyplot.imshow.html), you can adjust 'vmin' and 'vmax' to control the data range of the colourmap.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Edward Ma",
        "date": "May 23, 2020, 6:28:54PM",
        "content": "Dear Craig,\n\nI changed  'vmax' to 5 and  'vmin' to -5, still can't see the waveform, is this wrong? How could I get the output you sent me in the last post？I really need that.\n\nRegards,\n\nEdward"
      },
      {
        "author": "Edward Ma",
        "date": "May 23, 2020, 6:47:57PM",
        "content": "Attached is my merged.out file"
      },
      {
        "author": "Craig Warren",
        "date": "May 26, 2020, 8:45:20AM",
        "content": "Edward,\n\nThe B-scan results I attached previously (output.png) were obtained from the input file you supplied, i.e.\n\n#title: test\n#domain: 5 3 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 4e-8\n\n#material: 4 0.005 1 0 mianceng\n#material: 9 0.05 1 0 jiceng\n#material: 12 0.01 1 0 tuji\n\n#waveform: ricker 1 4e8 my_ricker\n#hertzian_dipole: z 0.2 2.5 0 my_ricker\n#rx: 0.25 2.5 0\n#src_steps: 0.05 0 0\n#rx_steps: 0.05 0 0\n\n#box: 0 0 0 5 1.9 0.01 tuji\n#box: 0 1.9 0 5 2.35 0.01 jiceng\n#box: 0 2.35 0 5 2.5 0.01 mianceng\n#cylinder: 2.5 1 0 2.5 1 0.01 0.2 free_space\n\nThe plotting was done as I previously stated by adjusting the vmin and vmax values.\n\nI suspect you are not running the model(s) you think you are. Check your input file again.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/a-yo5D6Hw2o",
    "title": "Microstrip Z11 in GPU using voltage source",
    "original_post": {
      "author": "Andres Altieri",
      "date": "Aug 5, 2020, 10:04:52AM",
      "content": "Hello,\nI am trying to simulate the Z parameters of a microstrip stub  using the additive voltage source so that I can use the GPU.\n\nI have been looking at this paper:\n\nR. J. Luebbers, H. S. Langdon, “A simple model that reduces time steps needed for FDTDantenna and microstrip calculations”,IEEE Trans. Antennas Propag., Vol. 44, No. 7, July1996, pp. 1000–1005.\n\nAnd also the book of Kunz and Luebbers: \"FTDT for electromagnetics\".\n\n\nIn the paper, they propose a staircase feeding scheme on the side of the PCB\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThen, if the source is at cell (i_s, j_s, k_s) they calculate the current through the source using Ampere's Law integrating around the source:\nThere is a displacement current term in (2), which is neglected in the paper (I added it but it is very small).\nThen I calculate the input voltage (After the source resistance Rs) as:\nVin = Vs - Is Rs\n\nThen the Z11 parameter is calculated as:\n\nZ11 = Vin / Is\n\n\n-------------------------------------\nI have made script that chooses the discretization of the model to perfectly fit the substrate and the microstrip and to allow at least 20 cells per wavelength.\n\nI have ran a simulation with the following parameters:\nw_mstrip = 0.34# microstrip width in mm\nL_mstrip = 40 # length of mstrip in mm\nh_subst = 0.17 # substrate height in mm\nThe substrate dielectric constant is 3.66\n\nThe feed pulse if a gaussiandot with amp 1 and freq 4e9\n\nI have also compared to the MoM solver in ADS and the theoretical input impedance of a stub which is calculated as:\nEeff = 2.726\nlambd = 300 / np.sqrt(Eeff) / (Vin_frecs/1e9)\nbeta = 2 * np.pi/lambd\nLen = 40\nZin_teo = -1j * Z0 * 1/np.tan(beta * Len)\n\n\nPlease find attached the simulation results.\n\nI think the results are very good, but I see that both solvers, compared to the theoretical simulation, behave as if the microstrips were effectively a bit longer.  I have changed the discretization and time step but it does not change significantly.\n\nIn most cases this will have no consequence, for example, when estimating antenna parameters, but in resonant structures it may because the resonance will shift a bit.\n\nI would like to compensate the feed staircase in some way to mitigate the effect.\nDo you have any ideas as to compensate the length introduced by the feed model? Or any thoughts?\n\nThanks!\nAndrés"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "Aug 5, 2020, 4:58:37PM",
        "content": "For some reason the images did not appear, I post the again:\n1) Feed model:\n\n2) Current calculation:\n\nI realise now that the microstrip should no behave exactly as an ideal stub. For example, there is a fringing capacitance at the end of the stub which makes it behave as it if were a bit longer than an ideal stub of the same length.\n\nStill if you have some comments about the effect that the staircase feed model may have, they are very welcome.\n\nThanks!"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 21, 2020, 5:41:42AM",
        "content": "Dear Andrés,\n\nInteresting work. I'm about to go on holiday, but hope to get some time when I'm back to take a look at your posts.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Ys7t5akWtxM",
    "title": "Question about simulating mirror effect of radar with different wavelength",
    "original_post": {
      "author": "Dongyu Du",
      "date": "Nov 7, 2023, 8:07:49PM",
      "content": "Hello! I recently started to use gprMax for my work about analyzing the mirror effect of the radar with different wavelength as shown in the following:  \nTo achieve this, I would like to confirm whether the gprMax supports the following functions:\n\n1. Whether Tx antenna can emit the signal forward a specific spatial direction just like a laser/ the real radar\n2. If I want to compare the mirror effect with different wavelength, do I need to define the wavelength dependent material first? If so, does gprMax support this kink of material?\n\nI appreciate all the help I can get on this. Thanks in advance!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 8, 2023, 5:11:30AM",
        "content": "Hi Dongyu,\n\nI would say mostly that is a \"no\" but with some exceptions that depend on the details of what you are trying to do. In order to get a directive source \"like a laser\" you need to actually simulate the directive antenna that produces this type of radiation. For microwaves most likely a Horn but there can be others (helical antennas, etc.). This can be done in FDTD and gprMax but as you realise the model will most likely need to be in 3D (there can be some exceptions!) and rather large if the distance from the antenna to the wall is substantial. The other way is to generate a plane wave (assuming that the source is far away). The current version of gprMax does not do this as it is not common in GPR but the next version in development (level branch) will have a plane wave source that works only for targets embedded in a homogenous space and not for half space problems. This could be an issue simulating a response from an infinite wall. Simulating a spatially localised directive source like a \"gaussian beam\" is not something that can be done at the moment. In principle one can spatially weight properly a plane wave source and achieve this but and in FDTD it has been done and there are papers about this and obviously commercial tools that do that. gprMax does not implement such a source but we would love to have such additions. \n\nIf you are looking for something ready made to do what you need then it is more likely that sadly gprMax is not your answer except if you really want to model the antenna part and go down that road. If you have seen papers that do what you want using FDTD and gprMax does not have that functionality you can use it a base to add and develop that functionality if you like programming and Python and contribute to the code.\n\nHope this helps\n\nAntonis\n"
      },
      {
        "author": "Dongyu Du",
        "date": "Nov 9, 2023, 9:20:37PM",
        "content": "Thanks for your detailed answer!\n\nI'll try to use pyfptp package to achieve the directional wave. There is a line source in pyfptp which can be use to control the propagation direction. Looking forward to the next version of gprMax!\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/S4aDgqSaYAg",
    "title": "PYCUDA Error while running simulations on gpu.",
    "original_post": {
      "author": "Ankur Jyoti Kalita",
      "date": "Jun 11, 2024, 1:59:31PM",
      "content": "Hi I am getting the error:\n\n(gprMax) C:\\Users\\spacewalkie>python -m gprMax gprMax/user_models/cylinder_Ascan_2D.in -gpu\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method =======================\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.7 (Big Smoke)\n\n Copyright (C) 2015-2023: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as\n  published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty\n  of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with gprMax.  If not, see\n  www.gnu.org/licenses.\n\nHost: DESKTOP-OPHOOS7 | Micro-Star International Co., Ltd. MS-7D75 | 0 x unknown (12 cores, 24 cores with Hyper-Threading) | 31.2GiB RAM | Windows 11 (64-bit)\nGPU(s) detected: 0 - NVIDIA GeForce RTX 4070 SUPER, 12GiB\n\n--- Model 1/1, input file: gprMax/user_models/cylinder_Ascan_2D.in ----------------------------------------------------\n\nConstants/variables used/available for Python scripting: {c: 299792458.0, current_model_run: 1, e0: 8.8541878128e-12, inputfile: C:\\Users\\spacewalkie\\gprMax\\user_models\\cylinder_Ascan_2D.in, m0: 1.25663706212e-06, number_model_runs: 1, z0: 376.73031366686166}\n\nModel title: A-scan from a metal cylinder buried in a dielectric half-space\nNumber of CPU (OpenMP) threads: 12\nGPU solving using: 0 - NVIDIA GeForce RTX 4070 SUPER\nSpatial discretisation: 0.002 x 0.002 x 0.002m\nDomain size: 0.24 x 0.21 x 0.002m (120 x 105 x 1 = 12600 cells)\nMode: 2D TMz\nTime step (at CFL limit): 4.71731e-12 secs\nTime window: 3e-09 secs (637 iterations)\n\nWaveform my_ricker of type ricker with maximum amplitude scaling 1, frequency 1.5e+09Hz created.\nHertzian dipole with polarity z at 0.1m, 0.17m, 0m, using waveform my_ricker created.\nReceiver at 0.14m, 0.17m, 0m with output component(s) Ex, Ey, Ez, Hx, Hy, Hz created.\nMaterial half_space with eps_r=6, sigma=0 S/m; mu_r=1, sigma*=0 Ohm/m created.\nGeometry view from 0m, 0m, 0m, to 0.24m, 0.21m, 0.002m, discretisation 0.002m, 0.002m, 0.002m, with filename base cylinder_half_space created.\n\nMemory (RAM) required: ~51.5MB host + ~51.5MB GPU\n\nBox from 0m, 0m, 0m, to 0.24m, 0.17m, 0.002m of material(s) half_space created, dielectric smoothing is on.\nCylinder with face centres 0.12m, 0.08m, 0m and 0.12m, 0.08m, 0.002m, with radius 0.01m, of material(s) pec created, dielectric smoothing is off.\nProcessing geometry related cmds: 100%|██████████████████████████████████████████████| 2/2 [00:00<00:00, 2003.49cmds/s]\n\nPML: formulation: HORIPML, order: 1, thickness: x0: 10, y0: 10, z0: 0, xmax: 10, ymax: 10, zmax: 0 cells\nBuilding PML boundaries: 100%|█████████████████████████████████████████████████████████| 4/4 [00:00<00:00, 1999.91it/s]\n\nBuilding main grid: 100%|██████████████████████████████████████████████████████████████| 2/2 [00:00<00:00, 1998.24it/s]\n\nMaterials:\n    |                                             |                     |       | sigma |      | sigma*  | Dielectric\n ID | Name                                        | Type                | eps_r | [S/m] | mu_r | [Ohm/m] | smoothable\n----+---------------------------------------------+---------------------+-------+-------+------+---------+------------\n  0 | pec                                         | builtin             | 1     | inf   | 1    | 0       | False\n  1 | free_space                                  | builtin             | 1     | 0     | 1    | 0       | True\n  2 | half_space                                  |                     | 6     | 0     | 1    | 0       | True\n  3 | free_space+free_space+half_space+half_space | dielectric-smoothed | 3.5   | 0     | 1    | 0       | True\n\nNumerical dispersion analysis: estimated largest physical phase-velocity error is -0.42% in material 'half_space' whose wavelength sampled by 14 cells. Maximum significant frequency estimated as 4.32623e+09Hz\n\nWriting geometry view file 1/1, cylinder_half_space.vti: 100%|█████████████████████████| 75.6k/75.6k [00:00<?, ?byte/s]\n\nOutput file: C:\\Users\\spacewalkie\\gprMax\\user_models\\cylinder_Ascan_2D.out\n\nTraceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.12-win-amd64.egg\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.12-win-amd64.egg\\gprMax\\gprMax.py\", line 69, in main\n    run_main(args)\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.12-win-amd64.egg\\gprMax\\gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.12-win-amd64.egg\\gprMax\\gprMax.py\", line 232, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.12-win-amd64.egg\\gprMax\\model_build_run.py\", line 373, in run_model\n    tsolve, memsolve = solve_gpu(currentmodelrun, modelend, G)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\gprmax-3.1.7-py3.12-win-amd64.egg\\gprMax\\model_build_run.py\", line 508, in solve_gpu\n    kernels_fields = SourceModule(kernels_template_fields.substitute(REAL=cudafloattype, COMPLEX=cudacomplextype, N_updatecoeffsE=G.updatecoeffsE.size, N_updatecoeffsH=G.updatecoeffsH.size, NY_MATCOEFFS=G.updatecoeffsE.shape[1], NY_MATDISPCOEFFS=1, NX_FIELDS=G.nx + 1, NY_FIELDS=G.ny + 1, NZ_FIELDS=G.nz + 1, NX_ID=G.ID.shape[1], NY_ID=G.ID.shape[2], NZ_ID=G.ID.shape[3], NX_T=1, NY_T=1, NZ_T=1), options=compiler_opts)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\compiler.py\", line 355, in __init__\n    cubin = compile(\n            ^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\compiler.py\", line 304, in compile\n    return compile_plain(source, options, keep, nvcc, cache_dir, target)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\compiler.py\", line 90, in compile_plain\n    checksum.update(preprocess_source(source, options, nvcc).encode(\"utf-8\"))\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\compiler.py\", line 58, in preprocess_source\n    raise CompileError(\npycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\SPACEW~1\\AppData\\Local\\Temp\\tmpnz_ofuio.cu failed\n[command: nvcc --preprocess -w -arch sm_89 -m64 -IC:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\cuda C:\\Users\\SPACEW~1\\AppData\\Local\\Temp\\tmpnz_ofuio.cu --compiler-options -EP]\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\n\n\nI used three version of cuda 11.6, 12.0, 12.5, I get the same errors for all\nI have an RTX 4070 super.\nVisual Studio 2022"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 12, 2024, 4:50:31PM",
        "content": "Can you successfully run any of the examples provided with the CUDA installation? That way it will help us know if it is a CUDA issue or gprMax issue.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Ankur Jyoti Kalita",
        "date": "Jun 16, 2024, 2:33:20AM",
        "content": "Hey,\nThanks for the response.\nI ran the examples as given by the guide and it build and ran successfully using cuda 12.4.\nhttps://docs.nvidia.com/cuda/cuda-quick-start-guide/\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2024, 9:29:44AM",
        "content": "Odd. Since you can run the CUDA examples, gprMax in GPU mode should also run with the same version of CUDA. Could you also try one of the basic PyCUDA examples, e.g. https://github.com/minrk/PyCUDA/blob/master/examples/demo.py\n\nCraig\n\n"
      },
      {
        "author": "Ankur Jyoti Kalita",
        "date": "Jun 30, 2024, 10:24:30AM",
        "content": "Hey,\n\nI ran the above example: This is the error code I got.\n\n\nTraceback (most recent call last):\n  File \"C:\\Users\\spacewalkie\\Desktop\\demo.py\", line 16, in <module>\n    mod = SourceModule(\"\"\"\n\n          ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\compiler.py\", line 355, in __init__\n    cubin = compile(\n            ^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\compiler.py\", line 304, in compile\n    return compile_plain(source, options, keep, nvcc, cache_dir, target)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\compiler.py\", line 154, in compile_plain\n    raise CompileError(\npycuda.driver.CompileError: nvcc compilation of C:\\Users\\SPACEW~1\\AppData\\Local\\Temp\\tmp0qdtn_xu\\kernel.cu failed\n[command: nvcc --cubin -arch sm_89 -m64 -IC:\\Users\\spacewalkie\\miniconda3\\envs\\gprMax\\Lib\\site-packages\\pycuda\\cuda kernel.cu]\n[stdout:\nnvcc fatal   : Value 'sm_89' is not defined for option 'gpu-architecture'\n]\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 2, 2024, 4:08:04AM",
        "content": "Hmmm....looks like a mismatch between CUDA and PyCUDA. I'd suggest uninstalling both and re-installing CUDA using the latest version (certainly >11.8 which I think is required for your GPU), then re-installing PyCUDA and ensure you choose the --no-cache option to force pip to download the latest version. Then try the example again.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LzRTPjQ-u0g",
    "title": "Re: A question about complicated 3D modeling",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Selim Sahin",
        "date": "Apr 19, 2019, 5:02:30AM",
        "content": "Hello,\n\nThis question left unanswered. I have the same problem. The geometrical object commands gprmax supports have a limit. Can anyone recommend a drawing/modelling software to model a detailed object and use it in gprmax simulations? Is the only way to do so using parametric functions in matlab like in Dr.Iraklis Giannakis' PhD thesis?\n\nRegards,\nSelim"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 23, 2019, 4:04:43AM",
        "content": "Hi folks,\n\nWe currently provide a mechanism to get externally generated geometry/materials into gprMax (via #geometry_objects_read), but we don’t have a specific tool to do the generation - that is left to the user. We have a Google Summer of Code project to look at this, so if we get a student to work on it then things may develop in this area - https://github.com/gprMax/gprMax/blob/master/gsoc/project-ideas-2019.md#7-web-based-framework-for-model-building\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sigurd Eide",
        "date": "Aug 6, 2019, 11:23:21AM",
        "content": "Hi Alpaslan and others interested,\n\nI have been looking into this for my research. \nFor my part I found it easiest doing in python, defining the model domain as a numpy array, importing my external  subsurface model and then exporting it to file with h5py. \n\nLet me know if others are interested in the same. Could then potentially make a plug-in somewhere (for the export to hdf5). \nAlso interested in getting in contact with others working on the same to share ideas.\n\nSo far I have only a 2D case up running, but currently working on the 3D models.\nA conference paper on this is available on following sites:\nhttps://www.hou.usra.edu/meetings/ninthmars2019/eposter/6070.pdf\nhttps://www.hou.usra.edu/meetings/ninthmars2019/pdf/6070.pdf\n\nCheers Sigurd"
      },
      {
        "author": "Ben Tucker",
        "date": "Apr 3, 2020, 3:36:19AM",
        "content": "Hi Sigurd,\n\nI'm also working on a solution to get arbitrary geometries from CAD programs into gprMax. Did you have any luck generating 3D meshes?"
      },
      {
        "author": "Sigurd Eide",
        "date": "Apr 8, 2020, 3:36:49AM",
        "content": "Hi, \n\nYes the 3D is up and running.\n\nI found it easiest to define a numpy array of the domain within the python block, which is exported to disc in hdf5 file format. Latter is done with h5py lib.\n\nThe work then consists of reformating whatever you have into the numpy array. \n\n\nCheers Sigurd"
      },
      {
        "author": "Ben Tucker",
        "date": "Apr 8, 2020, 5:21:27AM",
        "content": "Thanks for the reply. I've followed that process and have got something working.\n\nFor the reformatting I've been going from .stl. I use the trimsh library to read in the .stl. I then go point wise through the numpy array of the domain and use the trimsh to check whether that point is inside or outside the volume. Then an appropriate integer can be used to assign it to a material. This works really well, but is pretty slow with large meshes.\n\nThis problem was a lot easier than I initially thought!\n\nTa,\n\nBen"
      },
      {
        "author": "Sigurd Eide",
        "date": "Apr 8, 2020, 11:13:49AM",
        "content": "cool, sounds like you got it working in a similar way then.\n\nHaven't tried stl-files, so cant comment on ways to speed up that.\nFor my part, I'm converting ascii files, so creating the hdf5 files is by far the fastest part of the whole simulation process. \n\nIf I may ask, are you working on subsurface models or more generic objects?\nCould be interesting to look a bit more into details. pm me if you got want to have a quick chat.\n\nSigurd"
      },
      {
        "author": "Diego Osorio",
        "date": "Nov 3, 2021, 1:35:32PM",
        "content": "Hello dear Ben Tucker and Sigurd Eide,\n\nI send to you both my best regards and I hopr you are doing very well.\nI have been working in the same issue regarding the modeling of antennas in open source free CAD softwares like FreeCAD, Blender, etc\nI have done exactly what you talk about exporting .stl mesh and then using the mesh, trimesh, open3D and other packages to import the geometry. \nParallel to this I worked in a 3D integer numpy grid library which procesess .asc Point Cloud files exported directly from FreeCAD and then converts it into a 3D numpy grid of materiales, where materials are assigned for each integer. \n\nThe problem is the geometry check step visualization in Paraview because the discretization and results are not continuous of the geometry, therefore is no use.\nI would really appreaciate if you coude share your code or explain how you solved this issue.\n\nKind regards!\n\nDiego\n\nPS: I attach the results of the Point Cloud library and Mesh Library in Paraview\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fA6xAsndAjc",
    "title": "SFCW Radar",
    "original_post": {
      "author": "yuxin cai",
      "date": "Feb 1, 2021, 4:51:12AM",
      "content": "Dear Developer, \n\nThank you so much for the sharing session recording posted on gprMax Channel. \nHere is a question i would like to ask regarding the video talking about impulse and SFCW:\n\n1. After post simulation processing and obtaining the frequency domain response in complex form for each step frequency, may i ask how should i proceed on plotting A scan for this position point? \n (Since one position one trace, Maybe need to obatin the range profile? Or somehow combine these N steps response to a whole? i am quite confused)\n\n\nLooking forward to your reply. \n\nBest Regards \nYuxin"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 18, 2021, 3:39:50PM",
        "content": "The process described synthesise a single A-trace using the Impulse response instead of a single model for every frequency step. At the end of this process the iFFT gives a time domain trace. If you want to build a scan you need to repeat the process for every new position which means a new impulse response etc. I am not sure if the question was about something else. The loop in the picture builds the frequency response for a single Ascan by gathering the frequency components and constructing the complex frequency response ready for the iFFT. NumberPulses are the frequency steps in the SFCW radar.\n\nHope this helps\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EEQHI-wkZAA",
    "title": "Query on gprMax resolution",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "Sep 16, 2019, 8:11:26AM",
      "content": "Dear sir,\n        The gprMax simulation accuracy is changing with the spatial resolution in x-y-z axis. We have considered two Dipole antennas for transmitter and receiver placed at 30 cm height above a metal plate (as a target). The complete scenario of the problem has been given in the attached pdf.\n\nKindly advise us on how to improve the accuracy of PEC reflection in gprMax.\n\nThanks and Regards\nRohit,\nResearch Scholar,\nNIT Rourkela.\nIndia"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 18, 2019, 11:17:11AM",
        "content": "Dear Rohit,\n\nI recommend you do some reading on the fundamentals of the Finite-Difference Time-Domain (FDTD) method, which is the numerical method that is used by gprMax to solve Maxwell's equations. An understanding of the effect of spatial resolution on 'accuracy' of the simulation is a basic requirement. There are plenty of articles and books on FDTD that you can find to read about the fundamentals. I would also recommend our short introduction to GPR modelling in the docs - http://docs.gprmax.com/en/latest/gprmodelling.html\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lBhTwTD6s3E",
    "title": "IDS antennas",
    "original_post": {
      "author": "Jonhatan Barriga",
      "date": "Sep 2, 2016, 11:26:49AM",
      "content": "Hi:\n\nWhere find I IDS antennas models of 200 and 600 MHz?\n\nThanks.\n\nJOB-M"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 3, 2016, 4:25:51AM",
        "content": "Hi Jonhatan,\n\nWelcome to the forum.\n\nThe GPR antenna models, that are part of the antenna module (antennas.py) in the user library, are models that I developed as part of my PhD. They behave similarly to the real antennas from GSSI and Mala but are not exact models of these commercial antennas. The reason for this is that we do not know all the details of the materials properties, feeding etc... of the real antennas. You need knowledge of the design, geometry, materials, and feeding etc... to be able to build a model of a commercial GPR antenna, therefore you would need these details of the IDS antennas.\n\nWhy do you want to use models of 200MHz and 600MHz antennas? Making accurate models of antennas requires a fine FDTD grid resolution, i.e. 1 mm. To run simulations with antenna models that operate with these centre frequencies will be very computationally demanding. You may not really need a model of the antenna if you are more interested in far-field behaviour.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 5, 2016, 7:52:30AM",
        "content": "Hi Jonhatan,\n\nIf you are using IDS GPR systems and you need an antenna model you can ask IDS if they are willing to help you create one. The more GPR users ask the manufacturers for such tools the more chance there is to get information and build such models for the research community. The problem is that the manufacturers need to protect their own IP as well which for them is very important."
      },
      {
        "author": "Jonhatan Barriga",
        "date": "Sep 5, 2016, 10:13:35AM",
        "content": "Thanks Craig."
      },
      {
        "author": "Jonhatan Barriga",
        "date": "Sep 5, 2016, 10:13:51AM",
        "content": "Thanks Antonis."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xnFtFPaEwQo",
    "title": "How to intergrate transfer function of different types of antenna in gprMax+ how to output data with and without coupling of antenna array",
    "original_post": {
      "author": "Pamela Manase",
      "date": "Jun 12, 2020, 4:50:58AM",
      "content": "Dear gprMax community,\n\n\nI was asking if it is possible to intergrate the transfer function (S21) of antenna types into gprMax i.e  from a matlab script. The aim is to detect buried targets. \n \nAnother question is it possible to have the following  data set in gprMax if simulation involving a given antenna array is performed : First dat without direct coupling effect of antenas and second data set with coupling effect?\n\n\nThank you so much in advance !\n\nKind regards\n\nPamela"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2020, 3:28:47PM",
        "content": "Dear Pamela,\n\nYou can extract s21 data from a simulation including antenna models in gprMax, but cannot directly insert the transfer function.\n\nYou can do a numerical background removal by running your simulation with and without your target and subtracting the responses. This will give you the scattered field from your target.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Pamela Manase",
        "date": "Jun 23, 2020, 11:44:48AM",
        "content": "Dear Craig\n\nThank you so much for your response !\n\nBest regards\n\nPamela"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Wc4gveIBjb8",
    "title": "Input HDF5 file",
    "original_post": {
      "author": "Iliyana",
      "date": "May 26, 2017, 2:23:58AM",
      "content": "Howdy,\n\nCould you check if this input HDF5 file is in the correct format?\n\nIt only has -1 and 1, and 1's are I think 9% of the total number of points. I did not expect to see the box of the HDF5 file extent in ParaView when I view the geometry since most of the values in the file are -1.\n\n(I will run it at 1 mm discretization once I am confident of the model.)\n\nThank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 26, 2017, 4:49:03AM",
        "content": "Hi IIiyana,\n\nIt looks like your HDF5 is just filled with 0's, which will correspond to the 'air' material you have defined in the materials file. This is why you are seeing a box of 'air' (red) within the box of 'sand' (which comes directly from the definition in the input file) in Paraview.\n\nI find the HDFView app useful for quickly checking the attributes/contents on a HDF5 file https://support.hdfgroup.org/products/java/hdfview/\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Iliyana",
        "date": "May 26, 2017, 11:51:30AM",
        "content": "Thank you, it works now.\n\nFor reference, this is what worked:\n\n# create array to hold the output data\nmydata = np.zeros((len(x_coord), len(y_coord), len(z_coord)), dtype=np.int16)\n\n# initialize it to -1 which indicats no change in material\nmydata.fill(-1)\n\n# populate mydata\nmydata = ....\n\n# this will be copied to the global attribute and reflects the discretization of the model (2mm in this example)\ntup2 = (0.002, 0.002, 0.002)\n\n# create the HDF5 file and copy mydata to it, add global attribute and close the file\nf = h5py.File(\"filname.hdf5\", \"w\")\ndset = f.create_dataset(\"data\", (len(x_coord), len(y_coord), len(z_coord)), dtype=np.int16,  data=mydata)\nf.attrs['dx, dy, dz'] = tup2\nf.close()"
      },
      {
        "author": "Craig Warren",
        "date": "May 26, 2017, 12:27:29PM",
        "content": "Thanks Iliyana, useful info for others creating their own geometry object files.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_tzW2HQvY8Y",
    "title": "Change interpolation converting B-scan",
    "original_post": {
      "author": "sara donzelli",
      "date": "Nov 14, 2024, 9:13:56AM",
      "content": "Dear gprMax team,\n\nI'm trying to migrate the results from gprMax to get a more readable output.\nI am using the Matlab script \"outputfile_converter\" to convert the merged files, but I would like the converted B-scan to have a smoother interpolation instead of the default nearest interpolation.\n\nWhen I read the script, I couldn't find a line where the interpolation type is defined.\n\nIs it possible to achieve my goal?\n\nKind regards,\nSara"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 14, 2024, 10:52:55AM",
        "content": "Hi Sara,\n\nYou cannot find the interpolation because there is no interpolation done by that script when you join A-scans to make a B-Scan. We just collect the A-scans and put them in one file. What you see is the result of how many scans you simulated across your scan line, the more A-scans you have the smoother the image will look. \n\nFor example, if you have scanned a metre of concrete with a real GPR using a 1cm step you have about 100 scans and even better with 0.5cm you have about 200. Now, if you model this using only 25 scans in gprMax you cannot expect it to look the same. If you use 100 or 200 scans in the simulation the image will look equally smooth when plotted as the real one. \n\nHope this helps\n\nAntonis\n \n\n"
      },
      {
        "author": "sara donzelli",
        "date": "Nov 14, 2024, 12:51:37PM",
        "content": "Thanks for your answer.\n\nI'll try to improve my data.\n\nSincerely\nSara\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KcaMXL8uKkE",
    "title": "Update problem - Visual Studio - Windows 11",
    "original_post": {
      "author": "Heloisa Moraes",
      "date": "May 6, 2022, 11:13:09AM",
      "content": "Hi everyone,\n\nI tried to update gprMax (after updating conda and python packages), it didn't work and a warning showed up instructing me to update Visual Studio, which I did, following the instructions provided by gprMax user guide, http://docs.gprmax.com/en/latest/include_readme.html?highlight=c%20%20#microsoft-windows \n\nAfter that I proceeded to update gprMax again, following the user guide steps. It didn't work and I don't know how to explain what went wrong, so here follows prints of my screen:  \n\n\n\n\n\n\n\nOperating system: Windows 11 Home Single Language Edition; 64 bits; 21H2 Version\n\nDevice specifications: Intel(R) Core(TM) i7-8550U CPU @ 1.80GHz   1.99 GHz; 12,0 GB RAM\n\n I would be so thankful if you could help-me with this.\n\nRegards,\n\nHeloisa"
    },
    "responses": [
      {
        "author": "Heloisa Moraes",
        "date": "May 6, 2022, 11:20:59AM",
        "content": "'Identificador não declarado' means 'the identifier is undeclared' in portuguese.\n\nHeloisa\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 12, 2022, 5:21:14AM",
        "content": "See - https://github.com/gprMax/gprMax/issues/300 and make sure you have pulled the latest code.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LtNyBdZh648",
    "title": "Relationship betn static and infinite permittivity, Water content, Conductivity for soil material",
    "original_post": {
      "author": "Romil Pandya",
      "date": "Jan 26, 2021, 11:18:43AM",
      "content": "Respected,\nCan you pls enlighten me with the relationship between static-infinite permittivity, water content, conductivity for soil. As shown in the attached pic which is relationship between above parameters for concrete material."
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Jan 27, 2021, 9:44:21PM",
        "content": "Hello, \n\nThe relative permittivity of water is frequency dependent. As GPR antenna emission is quite broad band, the variation of the property of water cannot be neglected. Dr Ginnakasis used the Debye function to model these variations. \n\nThis model requires a few parameters:\n- Static permittivity: permittivity when the signal has a frequency close to 0\n- Infinite permittivity: permittivity when the signal has a frequency close to infinite\n- Conductivity of water: equal to 0 in case of pure water, generally depends on solute(s)\n- Relaxation time: time for the water molecules to align with the EM field\n\nAll these properties depends on the solute in the water and, for small water volume, the interactions between water molecules and the surrounding matrix. In the case of concrete, there are very small water pores embedded in a cement matrix. All those effects plays together\nI am unfortunately not expert enough in go deeper in those phenomenon and explain the variation of those properties with pore size / water content in cement. Better look at the reference of Dr Giannakis' paper.\n\n'Ground penetrating radar: Theory and Application' from H.Jol (p44~) would be a good start for a general understanding of importance of water and variation of its electromagnetical properties.\n\nHope this helps\nBest regards\n\nChristian\n"
      },
      {
        "author": "Romil Pandya",
        "date": "Jan 31, 2021, 9:10:13AM",
        "content": "Thank you for your reply,\nI have further few questions regd this topic, pls help me understanding.\n1) To create realistic soil model, Is it necessary to use debye  function or we can create it by using  Peplinski  soil model only ?\n2) How to set output file location for both geometry file and output files to any different drive/directory.\n\nThank you,\nRomil \n\n"
      },
      {
        "author": "Christian Pigot",
        "date": "Feb 1, 2021, 12:02:19AM",
        "content": "Dear Romil,\n\n1) what do you call realistic model?\nThe main skill of the modeller is to adapt the accuracy of the model to the question to be answered.\nWhat is the question you are trying to answer ?\nWhat resources are you ready to allocate? Computational of course but also time. It takes lot of time to establish an accurate model and find the proper model and input the good values for the parameters. \nAssuming you need and have time to establish an accurate model. which model Debye or Pelinski is the most appropriate? It depends on the spatial variation of the permittivity of your soil with regard to the EM wavelength you are using.\nFor example the model you mentioned in your first post, the water pores present in the cement are much smaller than the wavelength. Debye model is appropriate. \nPelinski model would be useful for variation extending on a much wider scale. For example moisture fluctuation in soil for a land mine context.\n\n2) I am not familiar enough with GPR Max to answer this part\nMy opinion: I find it nice to have the 2 files in the same folder. You thus easily know which model created the results you are analyzing.\n\nBest regards\nChristian\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 1, 2021, 5:41:44AM",
        "content": "Dear Romil,\n\nTo add to some of the good points that Christian already made:\nIf you look at the constituents (materials generated) of the Peplinski model you will see each of them uses a single pole Debye model. The Peplinski soil model is only one of many different mixing models for heterogeneous media, others include Topp, CRIM, etc.....\nYou can use the #output_dir command - http://docs.gprmax.com/en/latest/input.html#output-dir\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vsb4MvvfW8s",
    "title": "Reflection coefficient",
    "original_post": {
      "author": "Kenneth Mapoka",
      "date": "Jan 8, 2018, 9:29:00PM",
      "content": "I have been working on determining the reflection coefficient of the GPR wave from the soil and between soil and target, so far it has not worked. I would like to know whether there is a more straightforward way to get the reflection coefficient when simulating?\n\nThank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 9, 2018, 5:19:55AM",
        "content": "Hi Kenneth,\n\nCan you explain exactly how you are trying to determine reflection coefficients and why you think it is not working. Then we might be able to help you.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Kenneth Mapoka",
        "date": "Jan 9, 2018, 11:09:36AM",
        "content": "I computed the reflection coefficient manually by using the dielectric contrast between the target and the soil matrix. So I thought there is a way of determining the reflection coefficient direct from gprMax simulation of which i believe would be more accurate than the latter."
      },
      {
        "author": "Craig Warren",
        "date": "Jan 9, 2018, 12:28:22PM",
        "content": "Hi Kenneth,\n\nIf you set up the model so you can clearly see the separate waveforms from each reflection you should then be able to pick amplitudes from the reflections (choosing the same point in each wavelet) and calculate the reflection coefficients from there. You also know exactly the source wavelet.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Kenneth Mapoka",
        "date": "Jan 9, 2018, 12:41:16PM",
        "content": "I did it like that initially, was not sure its the correct way. Thank you."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rzV6Fsfanww",
    "title": "Ground Bounce Received from Different Heights",
    "original_post": {
      "author": "alpergenc",
      "date": "Nov 4, 2017, 9:54:10AM",
      "content": "Hello Everybody,\n\nI have a confusion about GPRMax. I have created two test scenarios which are shown below. In the first scenario, my GPR antenna is 16 cm above the PEC material. In the second scenario, my GPR antenna is 32 cm above the PEC material. The rest are same for two scenarios. I am using Ricker waveform with amplitude 1 and center frequency 1.5 GHz. I am using \"Hertzian_dipole\" antenna. The reflections from the PEC materials are shown below for these two cases. For the first case, the amplitude of the receiving signal is around 1. However, for the second case, the amplitude of the receiving signal is around 0.26. I think that GPR antenna should send pencilbeam signal. Therefore, my expectation is that these two reflections should be similar. However, the amplitudes are pretty different. What is the reason of that? Can anybody help me to understand this issue?\n\nThanks in advance."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 4, 2017, 11:28:32AM",
        "content": "Hi,\n\nThere is no issue and the responses are supposed to be that way. You need to study how GPR works in order to effectively be able to use gprMax and understand the responses you get. There is no \"pencilbeam\" signal in GPR especially for normal ground-coupled antennas and certainly not for theoretical point sources like a Hertzian dipole. Your expectation for the amplitude of the two signals is not correct. There is geometrical loss in GPR signals which is very important.\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Nov 4, 2017, 2:00:51PM",
        "content": "Hello Antonis,\n\nThank you for your reply. As I understood from your response, \"pencilbeam\" is not a correct assumption for point sources. Hertzian dipole antenna generates large beam, therefore the amount of the signal received by RX antenna will be less when the distance between GPR and object is larger. \n\nBy using gprMax, is it possible to use a point source for TX antenna? I want to create a case such that the receiving signal does not change (too much) when the GPR height changes. To achieve this, which antenna type should I use?\n\nThanks in advance,\n\nAlper"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 4, 2017, 6:24:05PM",
        "content": "Alper,\n\nThere is no real antenna that creates a perfect plane wave. This concept exists only in theory. A plane wave does not diminish as it propagates but this is a pure theoretical contraption and does not happen in reality. Very directive antennas (e.g. horns etc. ) can in a way produce planar waves of some kind that can be to an extent approximated with plane waves at a distance from them. There is no source in gprMax that will do what you want as there is no plane wave source implemented that works with a half space model.  Further, there is no real GPR antenna that can be reasonably approximated using a plane wave or what you refer to as a \"pencilbeam\" that has similar properties.\n\nAntonis"
      },
      {
        "author": "alpergenc",
        "date": "Nov 6, 2017, 7:25:05AM",
        "content": "Hello Antonis,\n\nThank you for your reply. Your comments will really help my workings.\n\nRegards,\nAlper"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Gy2qkcXKZT8",
    "title": "I get this error when running python setup.py install",
    "original_post": {
      "author": "Marco Bittelli",
      "date": "Jan 25, 2022, 6:06:26PM",
      "content": "I get this error at the end of the installation process\n\nFile \"C:\\Users\\MARCOB~1.PER\\AppData\\Local\\Temp\\easy_install-zuz7d2n3\\h5py-3.6.0\\setup_build.py\", line 132, in run\n  File \"C:\\Users\\MARCOB~1.PER\\AppData\\Local\\Temp\\easy_install-zuz7d2n3\\h5py-3.6.0\\setup_configure.py\", line 68, in from_env\n  File \"C:\\Users\\MARCOB~1.PER\\AppData\\Local\\Temp\\easy_install-zuz7d2n3\\h5py-3.6.0\\setup_configure.py\", line 128, in _find_hdf5_compiler_settings\nModuleNotFoundError: No module named 'pkgconfig'\n\nI am using Anaconda and not Miniconda.\n\nMarco"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 1, 2022, 10:59:44AM",
        "content": "Hi Marco,\n\nWe are going to need some more details to assist you.\nWhat OS are you using?\nWhen you say end of the installation process are you talking about the 'pythom setup.py install' step?\nHave you checked that all the packages are working in your Anaconda environment?, i.e the error message snippet you posted refers to the h5py package specifically.\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DRBWu521q6I",
    "title": "Issue using plot_antenna_params - divide by zero",
    "original_post": {
      "author": "Evan Goodacre",
      "date": "Apr 23, 2019, 6:41:49PM",
      "content": "Hi!\n\nI'm new to using the software and am getting the following error when I try to use plot_antenna_params:\n\n(gprMax) C:\\gprMax>python -m tools.plot_antenna_params user_models\\antenna_wire_dipole_fs.out\nTime window: 6.00013e-08 s (31157 iterations)\nTime step: 1.92583e-12 s\nFrequency bin spacing: 1.66663e+07 Hz\nTraceback (most recent call last):\n  File \"E:\\Applications\\Miniconda\\envs\\gprMax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"E:\\Applications\\Miniconda\\envs\\gprMax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\The Dude\\gprMax\\tools\\plot_antenna_params.py\", line 418, in <module>\n    antennaparams = calculate_antenna_params(args.outputfile, args.tltx_num, args.tlrx_num, args.rx_num, args.rx_component)\n  File \"C:\\Users\\The Dude\\gprMax\\tools\\plot_antenna_params.py\", line 104, in calculate_antenna_params\n    s11 = np.abs(np.fft.fft(Vref) / np.fft.fft(Vinc))\nFloatingPointError: divide by zero encountered in true_divide\n\nI believe when I originally got gprMax set up I tried running through this example and it worked, so likely I'm doing something stupid to mess it up but cannot figure out what. I'm getting the same issue on two seperate computers I have gprMax installed on. I don't think I've edited them at all, but I've included my versions of antenna_wire_dipole_fs.in, antenna_wire_dipole_fs.out, and plot_antenna_params.py in case it is useful.\n\nIf anyone can point me in a direction to look at I'd be grateful.\n\nThanks!\n\nEvan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 26, 2019, 5:05:08AM",
        "content": "Hi Evan,\n\nI have not looked specifically at the output file or plot module you attached, but I tested the antenna wire dipole example again with the latest gprMax and it works fine. I can see you have made no changes to the input file. So I would suggest you try updating your conda environment, and updating and rebuilding gprMax - http://docs.gprmax.com/en/latest/include_readme.html#updating-gprmax\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Evan Goodacre",
        "date": "Apr 26, 2019, 1:51:29PM",
        "content": "Thanks Craig,\n\nI tried updating my conda environment and rebuilding gprMax as you suggested and it did not fix the issue (its possible I did something incorrectly). I also attempted to start from scratch and install gprMax in a different location, same result.\n\nI was able to work around the issue by adding with with np.errstate(divide='ignore'): to the s11, s21, zin, and yin calculation steps in plot_antenna_params.py. This appears to work but I'm not sure if it could cause other issues, and I'm not sure why I need it but others don't.\n\n-Evan"
      },
      {
        "author": "Nipun Pruthi",
        "date": "Apr 26, 2019, 1:58:36PM",
        "content": "Hey Evan,\n\nCould you please share the output of \"conda list\" after activating the conda environment.  It may be the case that the system has old version of dependencies( I suspect numpy) and it is using the caches instead of new fetch of dependencies. I will try to add dependency version checker with the next PR. Meanwhile please try to update the dependencies version which seems rather out-dated.\n\nThanks\nNipun"
      },
      {
        "author": "Evan Goodacre",
        "date": "Apr 26, 2019, 2:50:17PM",
        "content": "Hi Nipun,\n\nThanks for the input, here is the output of conda list, from what I can see numpy is up to date.\n\nI apologize for my lack of knowledge, but I don't know how to update the dependencies version beyond the steps for updating conda and python packages outlined in the documentation Craig linked to. I'll try to do some research to figure it out on my own, but if you can link me to some more specific instructions I will try it.\n\nCheers,\n\nEvan"
      },
      {
        "author": "Nipun Pruthi",
        "date": "Apr 27, 2019, 2:20:30AM",
        "content": "Hi Evan,\n\nThanks for sharing the output. Seems like all the dependencies are up to date in your system, so no need to update dependencies.\n\nIf possible, could you share your system properties and OS you are currently using? [Looks like you are on Windows]. Also, most probably you know already, if you don't, we can use Linux(Ubuntu) terminal on Windows 10 by downloading it using Windows Apps Store. Meanwhile, I will try to reproduce the error you are getting with the same OS you are using. It might take some time because of ongoing majors exams. Sorry for the delay.\n\nThanks\nNipun"
      },
      {
        "author": "Evan Goodacre",
        "date": "Apr 29, 2019, 4:11:37PM",
        "content": "Hi,\n\nI am using windows 10 home on the primary PC I'm using, it has an i7-6700k, 32 GB of ram and a GTX 1080 GPU. I had the same issue on a laptop running windows 7, I don't have it with me at the moment so I cant look at its specs.\n\nI'll try setting up linux terminal as you suggest and see how it works. No worries about delays, I don't expect anyone to go out of their way and appreciate the time you've already spent just to look at this.\n\nCheers!"
      },
      {
        "author": "Nipun Pruthi",
        "date": "Apr 29, 2019, 4:43:27PM",
        "content": "Hi Evans,\n\nThanks for providing the system info.\n\nYou can use the following link as a reference to set up an ubuntu terminal.\nhttps://itsfoss.com/install-bash-on-windows/\n\nI appreciate very much that you understand and don't mind the delays caused.\n\nThanks\nNipun"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/mtrkNRzbYt0",
    "title": "Snapshots with geometry information",
    "original_post": {
      "author": "Siqi Wang",
      "date": "Mar 15, 2018, 11:09:49PM",
      "content": "Hi Craig,\n\nSorry to bother. I'm trying to simulate the GPR wave reflection and transmission in the pavement structure. However, I cannot see the boundary or interface between layers in my snapshots using Paraview. Now I can generate an animation using #snapshots:\n\n#python:\nfor i in range(1, 81):\n    print('#snapshot: 0 0 0 0.24 0.8 0.002 0.002 0.002 0.002 {} snapshot{}'.format((i/80)*8e-9, i))\n#end_python: \n\nAnd I can output a geometry file using:\n\n#geometry_view: 0 0 0 0.240 1.0 0.002 0.002 0.002 0.002 thinwaterfilm n\n\nBut I just want to see the animation with all the shape and boundaries of my model, just like the cylinder in your demo snapshots.\n\nOne frame of my snapshots is shown in the attachment.\n\nThank you for your time.\n\nSiqi"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2018, 5:24:10AM",
        "content": "Siqi,\n\nThe geometry file and snapshots must both be loaded into Paraview. You can then adjust the colouring/transparency to overlay the snapshots of the fields on top of the geometry view - this is to do with using Paraview, so I would look in the help docs for Paraview for further guidance.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Siqi Wang",
        "date": "Apr 1, 2018, 1:13:06PM",
        "content": "Thank you for the reply. Really appreciated.\n\nSiqi"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dI7a47AMJko",
    "title": "Creating labelled radargram",
    "original_post": {
      "author": "Matthijs van Delft",
      "date": "May 21, 2019, 4:28:36AM",
      "content": "Dear people,\n\nCurrently, I'm working on creating a labelled radargram based on the parameters from the input file. Bounding boxes are plotted in the radargram based on the location and depth of the input objects.\nThe depth of the bounding box in the radargram is now calculated based on the wave velocity through the different materials resulting in the roundtrip time to an object. Working on this raised a few questions which I'd like to get clarified:\nIs it necessary to include time zero correction in the radargram? In other words, can I always consider the top of the radargram at time 0ns and the bottom the set time window? If I need time zero correction do you have any advice on this?\nCan pec and free_space be described by #material properties? Pec is used to simulated steel, but whenever I can not describe pec in #material properties I can not label it back in the radargram since the variables are needed to calculate the wave velocity.\nI  hope I stated my questions clearly. Please contact me for any more information when needed.\n\nBests,\n\nMatthijs"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 21, 2019, 6:29:28AM",
        "content": "Hi Matthijs,\n\nThe simulation clock does start at time zero. However, all internal excitation waveforms have a time delay build in in order to achieve a smooth transition as sharp changes introduce high frequencies that might be affected by numerical dispersion. So, in a similar way to a GPR system a time zero correction is required for the most accurate positioning of events especially if you want to put them close to the actual wavelets and not at the onset of the response which is really hard to pick as it is very small. This in essence is similar to real GPR. However, the time delay to the theoretical pulse in the gprMax simulation is known and hence a lot easier to count for it. Check the documentation on the waveforms\n\npec and free_space are build in materials but you can define your own free_space if you want and call it something convenient (e.g. 'air') PEC is enforced as a boundary condition (i.e. Electric Field is set to zero). A very similar effect can be obtained by using a very large value of conductivity instead 10^6 or 10^8 and then call this material something else (e.g. copper, metal, etc.) It is not going to be PEC but obviously in reality there is no PEC either ... (there are some other subtle issues here with skin depth modelling etc. that most likely not important)\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "Matthijs van Delft",
        "date": "May 21, 2019, 9:28:35AM",
        "content": "Hi Antonis,\n\nThank you for the quick response. I was wondering how I can find the builtin time delay of the internal excitation waveforms?\nI was thinking to plot the desired waveform using the plot source wave tool and calculate the time zero correction based on the first zero amplitude point (or any other technique from the report http://emph.com.ua/18/pdf/yelf_03.pdf). Would this make any sense, or would it result in the wrong delay?\n\nThank you for your help,\n\nMatthijs"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 22, 2019, 4:20:34AM",
        "content": "Information on the waveforms is at http://docs.gprmax.com/en/latest/plotting.html#built-in-waveforms\nWe are working on an approach similar to Richard's Yelf paper but this involves modelling the antenna etc. For simple theoretical sources then things might be a bit simpler.\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/epijgwF7M8k",
    "title": "Snapshot:What do the xs, ys, zs,xf,yf,zf,mean",
    "original_post": {
      "author": "HIT-flower",
      "date": "Apr 14, 2017, 7:54:04AM",
      "content": "Hi everyone,\nCan anyone tell me how to use Snapshot？I can't figure out what do the xs, ys, zs,xf,yf,zf,mean.\n\n\nTIP:\nYou can take advantage of Python scripting to easily create a series of snapshots. For example, to create 30 snapshots starting at time 0.1ns until 3ns in intervals of 0.1ns, use the following code snippet in your input file. Replace xs, ys, zs, xf, yf, zf, dx, dy, dz accordingly.\n#python:\nfrom gprMax.input_cmd_funcs import *\nfor i in range(1, 31):\n    snapshot(xs, ys, zs, xf, yf, zf, dx, dy, dz, (i/10)*1e-9, 'snapshot' + str(i))\n#end_python:"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/V39zTAgH76k",
    "title": "questions about 3D model and mixing model",
    "original_post": {
      "author": "Rohanna",
      "date": "Jun 11, 2018, 7:31:26AM",
      "content": "Hi, I have two questions about simulation.\n\nThe first question is about 3D models. As shown in the figure, I placed two pipes in the three-dimensional space. The left pipe is orthogonal and the right side shows a certain horizontal angle. When I finished running I got the B-Scan image, which is a cross section of the pipe. If I want to get the results of C-Scan, can I achieve it through GprMax? I guess it can be done by changing the step in the z direction of the antenna . I hope you can give me some ideas about C-Scan.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe second question is about the mixing model. When I set different sand content and clay content, the figure obtained through #geometry_view is the same. In addition, I have run a total of nine models, and the moisture content distribution I get is exactly the same. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHope to be answered. Thank you.\n\n\nRegards,\n\nRohanna"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2018, 5:53:39AM",
        "content": "Hi Rohanna,\n\n1. You must assemble the C-scan yourself from running multiple B-scans. There are no specific tools provided to do this. You will probably want to change the polarisation of your source and how it is being moved in each simulation to create a orthogonal set of B-scans.\n\n2. If you are seeding the random number generator with a number, you will get the same fractal distribution each time, but by changing the sand/clay content of the soil model the properties will be different. Check the table of materials printed when gprMax runs.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Mo5WfXwdyLo",
    "title": "how to simulate an impulse reflection response",
    "original_post": {
      "author": "Echo",
      "date": "Mar 21, 2019, 1:44:26PM",
      "content": "Hello,  can somebody tell me how to simulate an impulse reflection response? (the source is an impulse waveform or a flat frequency source)\n\nFor example, I use a simple layer model (see the attachment input file). \n\nThen I pick the E_z component value and plot it but the result looks strange (see the *.png file).  \n\nCan somebody tell me why and how to modify this input file to get a correct result?\n\nThanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 22, 2019, 8:02:19AM",
        "content": "Echo,\n\nUse of an impulse excitation in gprMax is possible (as you have discovered), but is not documented. This is because it is an advanced feature that requires a very good understanding of FDTD and the implications and uses of the impulse, e.g. convolving the impulse response of the model with different excitation waveform without needing to run separate models for each new excitation. You must be very familiar with the limitations and constraints of using it though!\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/YEsx80R3QDc",
    "title": "installation problem",
    "original_post": {
      "author": "emran daradkeh",
      "date": "Aug 11, 2023, 4:18:20AM",
      "content": "i have this problem \nwhat is the solution ?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 11:17:35AM",
        "content": "The dollar symbol '$' is the command prompt on some platforms, it is not part of the command itself.\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Iij9R5EHxEI",
    "title": "Spatial resolution",
    "original_post": {
      "author": "Robert Gallagher",
      "date": "May 26, 2021, 7:59:33AM",
      "content": "Hi all,\n\nI have a query in relation to the spatial resolution of a model I am constructing. I have calculated my minimum spatial resolution to be 0.001m. However, I am receiving an error in relation to the element in my model with the lowest velocity. \n\nMy issue is this, I cannot increase the size of the element causing the error, and I cannot reduce my min spatial resolution any further due to time and hardware constraints. \n\nDoes the \"maximum significant frequency\" stated in the message mean that it is the max frequency that I can use on my model and that anything below this frequency should be ok?\n\n\n\n\nAdditionally, if anyone has any experience applying fixed position antenna arrays in gprMax I would love to discuss this option.\n\nAs always any thoughts or assistance would be greatly appreciated.\n\nKind regards,\nRob"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 26, 2021, 1:08:21PM",
        "content": "Hi Rob,\n\nSadly you are in a difficult position that has no easy answer now but it will hopefully very soon. You have a relatively high permittivity target that in order to be modelled properly requires a very small cell size which should be 10 times at least smaller that the smaller wavelength. For a pulse with centre frequency of 3 GHz this is easily the wavelength that corresponds to a frequency of 5 GHz. If you do the simple calculations you will see that 1 mm is not enough to prevent numerical dispersion in a material of relative permittivity of 40. The problem is that using a small cell for this little area - at the moment - forces you to have this cell size everywhere. \n\nFortunately the work of my PhD student Dr John Hartley has been incorporated into the next version of gprMax that is on the development branch to be released very soon. Details of the subgridding work that John has done can be seen on John's excellent thesis at https://era.ed.ac.uk/handle/1842/37552\n\nAt the moment there is not much more you can do. If propagation within the small target is not essential then you can run the model knowing that the response is not ideally correct but numerical dispersion is something that affects the propagating pulse and if there is no much propagation inside the high permittivity material the effect is smaller. However, strictly speaking this is not right and if I was reviewing a paper on this I will have pointed that out. Lowering the cell size to 0.5 mm might do it but your model will become too big. Maybe the PML boundaries can come closer if a better PML is used to save some space and make the model manageable.\n\nOnce the subgridding code is out these models will become much easier to do with reasonable resource requirements!\n\nBest wishes\n\nAntonis\n"
      },
      {
        "author": "Robert Gallagher",
        "date": "May 27, 2021, 4:56:23AM",
        "content": "Hi Antonis,\n\nThank you for your quick reply. Hopefully, the newer version of gprMax will be released in time for me to update my models.\n\nI have one other question. I have created an antenna array for my model and it runs quite well. This allows me to plot the  Bscans for each of the antennas in the array from the single merged output file. This is an excellent feature and a great time saver. However, when I import my merged output file into Geolitix it will only see a singular antenna Ex Ey and Ez scan. Is it possible to separate the scans for each of the antennas in the array from the merged output file into their own .out files?\n\nKind regards,\nRob.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:22:51AM",
        "content": "Hi Rob,\n\nAFAIK - Geolitix will only read a single receiver from a gprMax output file. \n\n| Is it possible to separate the scans for each of the antennas in the array from the merged output file into their own .out files?\n\nIt is possible, but you'd need to write your own Python or MATLAB script to process the output file and split it. Have a look at how some of the plotting scripts or output file merger reads and writes the output files - this should give you some guidance.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/osq9Z1l_mRk",
    "title": "Shape of B-scan singal",
    "original_post": {
      "author": "­유영준[컴퓨터공학과]",
      "date": "Jun 4, 2020, 11:46:01PM",
      "content": "\"in_file.PNG\" is my in.file.\nWhen I execute B-scan(Trace : 30) with my in_file, the shape of B-scan looks like \"b-scan.PNG\".\n\nBut, I hope the shape of B-scan comes out more round like \"b-scan_example.PNG\".\n\nBased on my in_file, how should I modify my in_file to achieve my goal? \n\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 11, 2020, 4:47:27PM",
        "content": "If you can attach your actual input file rather than a screenshot, that would be helpful.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "­유영준[컴퓨터공학과]",
        "date": "Jun 11, 2020, 9:22:44PM",
        "content": "Here is my input file.\n\nThank you."
      },
      {
        "author": "Craig Warren",
        "date": "Jun 13, 2020, 4:26:47AM",
        "content": "You just need to apply some gain to your results, as you would with real GPR data. See attached B-scan which I generated from your input file, and applied (a rather crude) constant gain to. I also attach the geometry you are modelling which allows us to see that the B-scan makes some sense. However, you should be aware that your model is very close to having numerical dispersion (that is what the warning in red text indicates when the model runs). Have a read in the docs for how to avoid this - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Sy6mAO7phYk",
    "title": "Can't view the geometry in Paraview",
    "original_post": {
      "author": "Taseer Ali",
      "date": "Feb 6, 2023, 4:49:34PM",
      "content": "Hi gprMax Community,\n\nI have created an h5 file from a png image file of a C-channel section. Then, I generated the geometry only .vti file and tried to view that file in paraview. But as evident from the paraview screenshot.png file attached I couldn't view the geometry of C-channel in the paraview. \n\nI need help in knowing what bugs might have been the reason of this problem?\n\nAll the files are attached here.\n\nSuggestions/help appreciated.\n\nThank you and Regards,"
    },
    "responses": [
      {
        "author": "Taseer Ali",
        "date": "Feb 7, 2023, 11:57:31AM",
        "content": "Hi Group Members,\n\nHas anybody solved or experienced this problem before? Any suggestion/help is appreciated.\n\nThank you.\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 17, 2023, 4:47:02AM",
        "content": "Can you share your input file, so we can understand exactly the commands and order in which you are specifying them.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Muhammad Taseer Ali",
        "date": "Feb 22, 2023, 4:21:43PM",
        "content": "Hi Dr. Craig,\n\nThank you for your response. Actually I was able to solve that problem of geometry view in Paraview. Attached is the image of the steel channel section geometry view. \n\nI have assigned 'pec'  material property to this channel and run a B-scan with 60 iterations. However, I didn't get the hyperbola as expected (Image attached of the scan).\n\nI am also attaching my input file (title: Cchannel_scanOrg.png). Any help/suggestion is appreciated regarding what went wrong.\n\nRegards,\nTaseer Ali\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2023, 6:21:59AM",
        "content": "Dear Taseer,\n\nFrom your input file it looks like you are not moving your source and receiver positions so not generating a proper B-scan. Take a look at the example in our docs - https://docs.gprmax.com/en/latest/examples_simple_2D.html#b-scan-from-a-metal-cylinder Think about the starting position of your source and receiver, and moving them using the #src_steps/#rx_steps commands.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7anPfZ5o9jY",
    "title": "Geometry visualization and triangle patch constuction",
    "original_post": {
      "author": "Svetlana Bricheva",
      "date": "Feb 29, 2016, 6:02:39AM",
      "content": "Hello, dear masters, thanks for your previous help, it is priceless!\nI have two more questions.\n\n1) Unfortunately I can't use Paraview to see the geometry file. I have installed the Paraview 4.0.1, I have read that it is the most stable version, but when I open my file some bug appears and programm closed. Are there other ways of visualizing the geometry files? May be in MATLAB?\n\n2) I simulate the triangle patch in the box of frozen soil. I write the code, as it was recommend here: http://docs.gprmax.com/en/latest/input.html#triangle\n\n#domain: 2 3 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 5e-8\n#time_step_limit_type: 2D\n#pml_cells: 10 10 0 10 10 0\n---------------------------------------------------------------------\n#material: 9 0 1 0 frozen_soil\n\n#waveform: ricker 1 3e8 my_ricker\n#hertzian_dipole: z 0.75 2.82 0 my_ricker\n#rx: 1.25 2.82 0\n---------------------------------------------------------------------\n#box: 0 0 0 2 2.8 0.01 frozen_soil\n##cylinder: 1 1.8 0 1 1.8 0.01 0.25 pec\n#triangle: 0.75 1.8 0.01 1 0.8 0.01 1.25 1.8 0.01 0 pec\n\nI haven't any reflections, only direct and ground waves! When I put in the same place the cylinder, I have all reflections. What's the matter?\n\nThank you!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 29, 2016, 8:59:13AM",
        "content": "Hi Svetlana,\n\n1. It is key to be able to view your geometry - Paraview is best for this. Paraview 4 is a little old now, but should still work. Please post the error message you get when loading a geometry file.\n\n2. The 2D model is a single cell slice of a 3D model, therefore using plates or triangular patches (triangles without any thickness) in the plane perpendicular to the infinite direction will not work as you are setting components on the boundaries (in your case the infinite direction is z, so the x-y plane). We need to document this, hopefully with a sketch to aid the explanation! If you change your triangle command to have some thickness e.g. ``#triangle: 0.75 1.8 0 1 0.8 0 1.25 1.8 0 0.01 pec`` you should see it appear in the geometry file, and you should see a reflection in your output file.\n\nCraig"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Mar 3, 2016, 7:33:00AM",
        "content": "Hi, Craig\n\n1. Paraview problem description.\n\nIf I try to open a simple model, like cylinder_2D, it works. Sometimes I don't understand how to look at this picture, how to turn it, how to look at the slices - but it is my problem, I've never used this program before =)\nBut when I try to open more comlicated file (some B-scan) I have an ugly picture (picture 1 below) and an error: \n\"paraview.exe has stopped working. A problem caused the program to stop working correctly. Windows will close the program and notify you if a solution is available.\"\nI put \"debug\" button and my system proposes to use a debugger of Visual Studio 2015, like on the picture 2 below (it is in Russian, sorry). I put \"Да\", it is \"Yes\". After this I have an another error message (picture 3 below). In English it is something like this:\n\"An unhandled exception at 0x0000000000E4CE9A (vtkCommonDataModel-pv4.0.dll) in paraview.exe: 0xC0000005: Access Violation when reading at 0x0000000000000000.\nIf there is a processor, the program can safely be continued for this exception.\"\n\nAnd buttons \"abort\" and \"continue\". If put \"continue\", the error repeats. \n\n2. My triangle model are working now, thanks for your advice, it was helpful, as always!"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 3, 2016, 7:41:32AM",
        "content": "Svetlana,\n\nCan you clarify what you you mean by \"more comlicated file (some B-scan)\"? It looks like an issue with Paraview (and possible the macro that thresholds the different materials), I'd advise using a newer version if possible.\n\nCraig"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Mar 3, 2016, 10:14:28AM",
        "content": "Ok, I will install the newer version and write you about my result."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Lfr1igM6Lfg",
    "title": "visualization model by paraview",
    "original_post": {
      "author": "navid seifosadat",
      "date": "Jul 3, 2023, 4:18:11AM",
      "content": "Hi everyone,\nI'm having trouble viewing my simulation geometry with paraview. When I try to create the geometry, I\n get the following error message.\nYou can see the simulation commands and the error message respectively.\nCan someone please guide me how to solve this problem?\nIn fact, I want to see both the antenna model and the ground structure, similar to the article \"An advanced GPR modeling framework:\nthe next generation of gprMax\"\n\nThanks,\nNavid."
    },
    "responses": [
      {
        "author": "Thomas Simader",
        "date": "Jul 3, 2023, 12:13:04PM",
        "content": "Hi,\nto me it seems that you forgot the hash command before the geometry_file command.\nBest regards,\nThomas\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9hUhzMKd_JQ",
    "title": "Kontur antennae(s)?",
    "original_post": {
      "author": "Brad Artman",
      "date": "Jan 12, 2024, 2:53:00PM",
      "content": "Has anyone implemented a model for Kontur equipment?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 22, 2024, 4:52:55AM",
        "content": "Not aware of any antenna models for Kontur GPR.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/frU4xs0TTKQ",
    "title": "CMD commands in one touch",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Jul 29, 2019, 5:22:17AM",
      "content": "Good morning,\ndo you can help me to execute the three command line\nin  matlab or batch file or python with one click .\n\n\nThis command stands for the three commends in CMD terminal：\ncd gprMax\nactivate gprMax\npython -m gprMax user_models/cylinder_Ascan_2D.in"
    },
    "responses": [
      {
        "author": "Feng Zhou",
        "date": "Jul 29, 2019, 5:30:00AM",
        "content": "I have the same problem .,"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/TtTGuZsXhhA",
    "title": "Surface Roughness implementation issue",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Mar 23, 2023, 4:04:19PM",
      "content": "Dear All,\n\n\nI hope you are wee. I am trying to add surface roughness to my model, here is my script\n\n#title: A-scan from a plate buried in a dielectric half-space\n#domain: 0.5 0.5 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5e-9\n    #python:\nfrom gprMax.input_cmd_funcs import *\nimport os\nimport numpy as np\nimport random\n  l_1 = True\nfreqs = [0.5]\nf = random.choice(freqs)\nindices = [5,40,60]\np1 = random.choice(indices)\nd1 = 0.10\nd2 = 0.20\nif l_1:\n              print(\"#waveform: ricker 1 {:.2f}e9 ricker\".format(f))\n              print(\"#hertzian_dipole: z 0.24 0.40 0 ricker\")\n              print(\"#rx: 0.26 0.40 0\")\n              print(\"#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\")\n              print(\"#fractal_box: 0 0 0 0.1 0.1 0.002 1.5 1 1 1 2 my_soil my_fractal_box\")\n              print(\"#add_surface_roughness: 0 0 0 0.1 0.1 0.002 1.5 1 1 0.085 0.110 my_fractal_box\")\n\nI do get some error regarding this, can someone help to understand wat I am doing wrong in here.\n \n\nBest \n\nHiman"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 24, 2023, 7:32:29AM",
        "content": "Dear Himan,\n\nCan you post the error message please.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Himan Namdari",
        "date": "Mar 24, 2023, 10:39:19AM",
        "content": "Hi, \n\nHere is the error \n\n\n\nBest \n\nHiman\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iKNiYPSscGo",
    "title": "Possible Bugs in gprMax",
    "original_post": {
      "author": "yan zhang",
      "date": "Feb 10, 2022, 2:48:15PM",
      "content": "Hi Warren,\n\nI am currently trying to create my own geometry by creating the HDF5 file and using the command #geometry_objects_read. I can successfully read my own geometry, but in the documentation, it says \" if the geometry objects being imported were generated by an external method then dielectric smoothing will not take place.\" So, I need to use the c1 optional parameters in command #geometry_objects_read to manually turn on the dielectric smoothing. However, it seems that the c1 optional parameter is not implemented:\n\n\nI use the command \"#geometry_objects_read: 0 0 0 my_geometry.hdf5 my_materials.txt y\" to turn on the dielectric smoothing, but errors occur saying that \"'#geometry_objects_read: 0 0 0 my_geometry.hdf5 my_materials.txt y' requires exactly five parameters\". \n\nI just suspect the optional c1 parameter is not implemented or did I not correctly use it?\n\nThanks,\nYan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 16, 2022, 4:14:39AM",
        "content": "Hi Yan,\n\nAs the docs state 'Dielectric smoothing can only be turned on if the geometry objects that are being read were originally generated by gprMax, i.e. via the #geometry_objects_write command.' Therefore because you are generating your geometry using an external source you cannot use dielectric smoothing, i.e. parameter c1 is not relevant.\n\nHope this helps.\n\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qQLvBroyvqI",
    "title": "Generating A-scans for various cases using embedded Python code",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Nov 23, 2018, 6:15:28AM",
      "content": "Hello Craig, Antoinis,\n\nI need to generate A-scans for a multi-layered (three-layered to be specific) asphalt structure. In the structure, the first and third layer are of fixed thicknesses (Layer-1 is 10cm thick and Layer-3 is 40cm thick). \nThe second layer however is of varying thickness (from 1mm to  20mm).\n\nFor your reference, here is the snippet from my code:\n **********************************************************************************\nLayer 1: \n#box: 0.0 0.4 0.0 2.0 0.5 0.002 asphalt_layer_1\n \nLayer 3:\n#box: 0.0 0.0 0.0 2.0 0.4 0.002 asphalt_layer_2\n \nLayer 2:\n#python:\nfrom gprMax.input_cmd_funcs import *\nfor x in range(1, 25):\n box(0.0, 0.399 - x*0.001, 0.0, 2.0, 0.4, 0.002, 'asphalt_debonding');\n#end_python:\n***********************************************************************************\n\nWhat I'm trying to do: \nI would like to create Layer 2 with a 1mm thickness, obtain an A-scan and then create the next thickness (2mm) in the same place and repeat the process till 20mm.\n\nMy question is, is it possible to add a subroutine that can do so? If yes, could you provide me with some suggestions?\n\nThanks in advance.\n------------------------------\nHave a good day.\nShreedhar."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 23, 2018, 6:32:14AM",
        "content": "Hi Shreedhar,\n\nI think all you need to do is make use of the variable 'current_model_run' which is incremented for every new run of a model (http://docs.gprmax.com/en/latest/python_scripting.html#constants-variables). Use this variable in your for loop to change the thickness depending on the model run. Then run the model multiple times using the '-n' flag. This should give you the A-scans you desire.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Nov 23, 2018, 7:57:59AM",
        "content": "Works like a charm! thanks Craig."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ORHpfgRtUn4",
    "title": "Save Specific Component in a snapshot",
    "original_post": {
      "author": "Armando Schneider",
      "date": "Apr 28, 2024, 10:35:57AM",
      "content": "Hello,\n\nI am wondering whether GPRMAX allows a user to save specific components in a snapshot. For instance, I want to save just the Ey component. How can I do it?\n\nSo far, the command I used to save snapshot is:\n\n#snapshot: f1 f2 f3 f4 f5 f6 f7 f8 f9 i1 file1\n\nHow should I convert it such that specific components can be saved only?\n\nCheers,\n\nTed"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 29, 2024, 9:26:41AM",
        "content": "Yes, this is possible using the Python API in the 'devel' branch which is currently in beta - https://docs.gprmax.com/en/devel/input_api.html#snapshot\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eqiw45yQr3o",
    "title": "Data set",
    "original_post": {
      "author": "FRA",
      "date": "Nov 6, 2018, 11:34:08AM",
      "content": "Is there a big data set of GPR images available?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LQc5fJgZufY",
    "title": "how to convert E field in A B scan to voltage",
    "original_post": {
      "author": "xianyang gao",
      "date": "Oct 27, 2017, 5:17:48AM",
      "content": "Hi everyone,\n\nWhen plotting A B scan, the results are in E field. Do you know how to convert E filed into voltage? Do they have the same shape but different magnitude?\n\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 27, 2017, 5:42:58AM",
        "content": "Hi Xianyang,\n\nVoltage and electric field are related by V = -Ed, where V is voltage, E is the electric field (V/m), d is distance (m). In this case d is the spatial discretisation in the direction of the electric field component you are interested in.\n\nYou can edit the plotting scripts appropriately.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Oct 27, 2017, 10:34:13AM",
        "content": "Dear Craig,\n\nFor example, if I have transmitter bowtie antenna and receiver bowtie antenna, placed side by side facing the ground. What is the distance should be in V = -Ed? The distance between the two antennas?\n\nBest regards\nXianyang"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 27, 2017, 10:52:00AM",
        "content": "Xianyang,\n\nWe are talking about converting the electric field value, sampled at a single FDTD cell location, to voltage. The distance is the spatial discretisation in the direction of the electric field component you are interested in, e.g. dx, dy, or dz.\n\nCraig"
      },
      {
        "author": "Daniel González",
        "date": "Oct 24, 2018, 4:06:23PM",
        "content": "Dear Craig,\n\nI'm currently simulating a coaxial transmission line in order to measure a reflected voltage. I placed a 50 Ohms #voltage_source with one side connected to the inner conductor and the other to the outter conductor. In order to measure the reflected voltage I copied the idea from the GSSI antenna, I placed an #rx with one side connected to the inner conductor and the other to the outter conductor, I used the #edge command to make the connection and make a 50 Ohms resistance over the #rx location.\n\nWith that setup I get the electic field on the #rx point and I'm currently wondering if for: V=-Ed, d = (b-a)? b -> outter conductor diameter and a -> inner conductor diameter. Or should it be dx any way? Or perhaps do I have to calculate an integral?\n\nAlso I'm not sure if I should take into account all of the components of E or only the x compontent. I attach an image of the setup.\n\n\nMany thanks for your help!\n\nDaniel"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 25, 2018, 4:08:51AM",
        "content": "Hi Daniel,\n\nThe distance will be a multiple of the spatial resolution in the orientation of the voltage source or receiver. I assume that your voltage source and receiver span a single cell (I can't tell from the geometry). In that case the distance is simply dx, dy, or dz depending on the orientation. You should only use the electric field component in the orientation of the voltage source or receiver.\n\nHope this helps.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Daniel González",
        "date": "Oct 25, 2018, 12:04:44PM",
        "content": "Craig,\n\nMany thanks, that is exactly what I needed.\n\nBest regards,\n\nDaniel"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-Hg3a1lFM0Y",
    "title": "Error: Receivers will be stepped out of the domain",
    "original_post": {
      "author": "m mh",
      "date": "Jan 14, 2018, 10:52:48PM",
      "content": "When I run the following code I get the error: Receivers will be stepped out of the domain . I know that I have to change the x axis in rx but I need the whole object to be included. Any advice?\n\nhalf-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 4 0 1 0 half_space\n#material: 4.5 0 1 0 Concrete\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.070 0.170 0 my_ricker\n#rx: 0.180 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.130 0.118 0 0.130 0.118 0.002 0.050 pec"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 15, 2018, 4:38:52AM",
        "content": "As the warning message suggests, you either need to run less A-scans (so that the receiver is not moved outside the domain), or extend your model domain in the x-direction.\n\nCraig"
      },
      {
        "author": "m mh",
        "date": "Jan 15, 2018, 6:38:31PM",
        "content": "Thank you so much. That was really helpful!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gK1tbnSYmtg",
    "title": "About the contsine waveform",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "May 27, 2020, 3:57:39AM",
      "content": "Hi everyone!\n          If we use the contsine waveform , does the direct coupled wave mix with the reflected wave? Is there a good method to wipe off the direct coupled wave? \n     Sincerely\n      Dongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 27, 2020, 4:25:56AM",
        "content": "Dear Dongyang,\n\nWith any excitation waveform you use, there is always the possibility for the direct wave to overlap with reflected waves. This is dependent on the problem you are trying to simulate. You could run a model without your target, i.e. creating a model of only the 'background', then subtract that response from you model containing your target. This will give you the scattered field from only your target.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "Jun 3, 2020, 4:28:34AM",
        "content": "Dear Craig,\n                                 Thanks for your reply, I have another question, if we use contsine waveform ,how to set the time_window? Is it the same with pulse waveform? Since when we use pulse waveform , we only need to guarantee the time_window long enough in order that the Rx can receive the complete pulse singal reflected from underground,  but in the situation of continuous wave(contsine), the Tx is transimitting singal throughout the time_window, so how should we set the time_window?\n\nKind regards,\nDongyang"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 3, 2020, 4:43:54PM",
        "content": "Hi Dongyang,\n\nThe first question is why you really need to use a a single sine wave as a source? FDTD is a time domain method that is suited for pulsed problems which are wiideband. GPR is one of them. Obtaining a solution for a single frequency component is not really the best way to use FDTD as there are other formulations that are more efficient in solving problems in the frequency domain. Frequency domain information is available via FFT of the time domain response as well and this is useful in many cases.\n\nNow, depending on what you want to get out of the single frequency excitation you can set the time-window. In order to be useful a solution with a single frequency needs to reach state state. This means that the spatial variation of the fields is not changing and all transients have gone. At that point you can pick the solution you need which is might be amplitude and possibly phase. If you want the response itself you can get this as well. A number of cycles of the frequency of the excitation should be OK to reach this state depending obviously on your model, its size and the its Q factor. \n\nAs a piece of advice I think you need to understand well what is you are trying to do and why. If you are trying to simulate single frequencies then a frequency domain solver might be better. \n\nBest\n\nAntonis"
      },
      {
        "author": "Dongyang Liu",
        "date": "Jun 4, 2020, 2:14:53AM",
        "content": "Hi Antonis,\n\nSince my research subject is about the numerical simulation of continuous wave gpr, I read the Ground Penetrating Radar Theory and Applications(Harry M. Jol), this book gives me some guidance of the simulation of stepped frequency continuous gpr(see in the atached .png), I was wondering whether I can achieve what it said through gprMax.\n\nSo,as what you said, is gprMax not suitable for continuous-wave singal?  What can I do to start this subject? Much appreciate if you could give me some suggestions.\n\nSincerely,\nDongyang"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 4, 2020, 10:28:17AM",
        "content": "Hi Dongyang,\n\nWhat is the difference in terms of the underlying problem with synthetic pulse or impulse GPR? In terms of simulation there is nothing more to be really gained by trying to replicate in a modelling exercise the process of building a GPR in a different way. \n\nYou can use gprMax to simulate this process but you can make it a lot more efficiently than running a single sine wave at one time for the same model. The impulse response of the model is not any different and at the end a linear model is just its impulse response convolved with an excitation function.\n\nSo, gprMax is suitable for what you are trying to do but you need to think why you are doing this and what you hope to achieve from such a model. The theoretical view of a GPR is not changing because our hardware implementation differs. Time and Frequency domains are two views of the same thing …\n\nIn your case I will have a good chat with my supervisor to define what is needed to be done and why …\n\nBest\n\nAntonis"
      },
      {
        "author": "Dongyang Liu",
        "date": "Aug 4, 2020, 8:45:59AM",
        "content": "Dear Antonis,\n\n              Thanks for your workshop last week, it was a great job and really helpful for me,especially your presentation about simulating SFCW radar in Matlab.\n\nHowever , I didn't fully understand the skill at that time, and it't a pity that I didn't record the screen. I will much appreciate if you could share the concerning files(readgprMax.m, \n\nSFCW.m, SFCWtest.out), it definitely will help me understand the whole process. \n\n              Here attached my e-mail address: csudong...@gmail.com\n                           Hopefully to get your help!\n\nSincerely,\nDongyang"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 4, 2020, 3:10:45PM",
        "content": "Hi Dongyang,\n\nWe will be providing a video from our recent workshop that explains how to use the impulse waveform and how to simulate a SFCW radar using gprMax in the next week or so.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "Aug 4, 2020, 9:50:01PM",
        "content": "Thanks a lot! That will be great help for me !\n\nKing regards \n\nDongyang"
      },
      {
        "author": "Dongyang Liu",
        "date": "Aug 14, 2020, 11:58:36PM",
        "content": "Hi Antonis\n\n               I saw that you have constructed a function readgprmax() in matlab to extract the Ez fields and dt of .out file when you show us how to simulate SFCW gpr.  Can I see the code of readgprMax.m? Since it wasn't shown on the recorded screen.\n\nBest\n\nDongyang"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 15, 2020, 11:22:30AM",
        "content": "Hi Dongyang,\n\nThis was based on the MATLAB script that plots the data without doing the plotting. Here it is\n\nfunction [Ascan] = readgprMax()\n% readgprMax \n% Function convereted from Craig's script to read Ascans in MATLAB\n%\n% Craig Warren and Antonis Giannopoulos\n    [filename, pathname] = uigetfile('*.out', 'Select gprMax A-scan output file to plot');\nfullfilename = strcat(pathname, filename);\n  if filename ~= 0\n     header.title = h5readatt(fullfilename, '/', 'Title');\n    header.iterations = double(h5readatt(fullfilename,'/', 'Iterations'));\n    tmp = h5readatt(fullfilename, '/', 'dx_dy_dz');\n    header.dx = tmp(1);\n    header.dy = tmp(2);\n    header.dz = tmp(3);\n    header.dt = h5readatt(fullfilename, '/', 'dt');\n    header.nsrc = h5readatt(fullfilename, '/', 'nsrc');\n    header.nrx = h5readatt(fullfilename, '/', 'nrx');\n      % Time vector for plotting\n    time = linspace(0, (header.iterations - 1) * header.dt, header.iterations)';\n         % Initialise structure for field arrays\n    fields.ex = zeros(header.iterations, header.nrx);\n    fields.ey = zeros(header.iterations, header.nrx);\n    fields.ez = zeros(header.iterations, header.nrx);\n    fields.hx = zeros(header.iterations, header.nrx);\n    fields.hy = zeros(header.iterations, header.nrx);\n    fields.hz = zeros(header.iterations, header.nrx);\n         % Save and plot fields from each receiver\n    for n=1:header.nrx\n        path = strcat('/rxs/rx', num2str(n));\n        tmp = h5readatt(fullfilename, path, 'Position');\n        header.rx(n) = tmp(1);\n        header.ry(n) = tmp(2);\n        header.rz(n) = tmp(3);\n        path = strcat(path, '/');\n        fields.ex(:,n) = h5read(fullfilename, strcat(path, 'Ex'));\n        fields.ey(:,n) = h5read(fullfilename, strcat(path, 'Ey'));\n        fields.ez(:,n) = h5read(fullfilename, strcat(path, 'Ez'));\n        fields.hx(:,n) = h5read(fullfilename, strcat(path, 'Hx'));\n        fields.hy(:,n) = h5read(fullfilename, strcat(path, 'Hy'));\n        fields.hz(:,n) = h5read(fullfilename, strcat(path, 'Hz'));\n             end\n    Ascan.header=header;\n    Ascan.fields=fields;\nend\n\n\n"
      },
      {
        "author": "Dongyang Liu",
        "date": "Aug 17, 2020, 3:54:59AM",
        "content": "Thanks for your reply, Antonis.\n\nBest\n  Dongyang"
      },
      {
        "author": "Dongyang Liu",
        "date": "Aug 29, 2020, 4:32:41AM",
        "content": "Hi Antonis\n\nSorry to bother you again, I have two questions about the SFCW.m code you have illustrated as below(part of the SFCW.m code):\n\nfor k=1:NumberPulses\n   SF(k)=mean(I(round(length(I)/2),k))+1j*mean(Q(round(length(Q)/2),k));% Question 1:Why take the value of intermediate position of I and Q of  Freqs(k) as the real and imaginary part of SF(k)?\n   MAG(k)=abs(SF(k));\n   F(k)=angle(SF(k));\nend\nWW=zeros(FFTSize,1);\nSFDelay=exp(-1j*2*pi*Freqs.*1e-9);%Question 2: What't the function of SFDelay? What will happen without SFDelay?\nWW(round(StartFreq/Df)+1:round(StopFreq/Df)+1)=SFDelay.*SF.*hamming(NumberPulses)';\n\nBest\n\nDongyang"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 29, 2020, 9:23:11AM",
        "content": "As you will notice by plotting the I and Q vectors after have been obtained by filtering they suppose to have a constant amplitude which is the Inphase and Quadrature component for that frequency. This is obviously not perfect and I thought picking the mean value might be better. You can experiment with other positions or processes etc. It has to be a single number for I and Q.\n\nIdeally there should be no need for a delay but if you take it out I found out that the iFFT does not return the time respond in the correct location (try it) It only shifts the start of the response in time and does not affect the relative position of the wavelets. Again I don't know what is a better way to do this.\n\nI am not an expert in microwave engineering of SFCW radar systems or in signal processing. I just followed the very simple steps of a SFCW block diagram radar. In reality the development of such a system will require a lot more careful handling of the signal paths etc.\n\nThe presentation and script is only done to highlight how to use the impulse response excitation to mimic a SFCW process without wasting too much computing time.\n\nGood luck\n\nAntonis  \n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZbP8iKSgTeU",
    "title": "Gaussian source Amplitude",
    "original_post": {
      "author": "Kenneth Mapoka",
      "date": "Jan 30, 2018, 1:04:03PM",
      "content": "An amplitude of 1 V/m was defined for the source, however the output scan shows amplitude strength in the hundreds. Why is that? see the A-scan below"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 30, 2018, 3:20:36PM",
        "content": "If you are using a proper antenna and a voltage source for excitation then the amplitude is not V/m but in V. If you are using the Hertzian dipole the amplitude is not V/m but the dipole's current (A). Electric Field is in V/m making this into V requires you to multiply the component with the appropriate spatial step. e.g. Vx = Ex*Dx. \n\nRead the manual carefully as it explains a lot of these things ... \n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HIXrFPr-oOQ",
    "title": "Customise Debye material model",
    "original_post": {
      "author": "Lauren Barr",
      "date": "Apr 14, 2025, 11:17:34AM",
      "content": "Hello,\n\nFirst of all thanks for such a great package, gprMax has been incredibly useful for many of my projects!\n\nThe latest project I am working on involves studying some materials by extracting their real and imaginary permittivity as a function of frequency. I want to simulate these in gprMax and have only had limited success in fitting to my data using the built-in Debye model. Ideally I would use a double-Debye description of the material, but include relaxation parameters alpha and beta, following the equation here: https://en.wikipedia.org/wiki/Havriliak%E2%80%93Negami_relaxation\n\nI think I need to adjust the `calculate_er` function in the `materials` subpackage, specifically this part:\nif 'debye' in self.type:\n    for pole in range(self.poles):\n        er += self.deltaer[pole] / (1 + 1j * w * self.tau[pole])\n\nAnd thought of modifying the last line to something like this, adding new attributes to the relevant classes, etc:\ner += self.deltaer[pole] / (1 + (1j * w * self.tau[pole]) ** self.alpha[pole]) ** self.beta[pole]\n\nDoes this seem like a sensible approach, or can you see any obvious problems? Maybe you've thought of something like this before. Any advice or direction would be very appreciated before I get lost down a rabbit-hole of no return.\n\nMany thanks,\nLauren"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 14, 2025, 12:33:09PM",
        "content": "Hi Lauren,\n\nIf your material does not follow one of the classic or analytically available relaxation mechanisms that you can use directly (e.g. Debye, Lorentz, Drude)  then the only option is to try and fit a number of simple mechanisms like the Debye one two approximate the behaviour of your material in a given frequency range of interest. Outside that range the fit can be really bad but hopefully it will not affect you. \nThe more Debye poles you use the better the fit will be but the more memory it will be needed for your model. If you look into our development branch there is work on this topic that slowly makes its way into gprMax under the Materials folder in the toolboxes. There are also papers on this. So, you can convert your material fitting process into an optimisation process for fitting the parameters of a number of Debye poles to match your experimental frequency data.\n\nThis has been done many times and it works. For example the models of echosorb absorbers available in gprMax have been done that way. Once you have the Debye poles that fit your data you just use them in gprMax as a normal material.\n\nSadly, you cannot add the alpha and beta parameters to generalise the relaxation function. This will be very nice to be able to do but not all alpha and beta combinations have closed form time domain representations that can be implemented in FDTD. So, the best option is to try and use more Debye poles to fit the experimental data. Also, our underlying formulation is very generic and maybe can fit other mechanisms but see our paper on how is done (number 4 in the publications list)\n\nChanging the code as you suggest will not work as the formulation is in frequency domain and getting it back to the time domain there is no closed solution unless alpha and beta are very specific.\n\nHope this helps.\n\n Antonis\n\n"
      },
      {
        "author": "Lauren Barr",
        "date": "Apr 15, 2025, 3:40:52AM",
        "content": "Hi Antonis,\n\nThanks so much for your response. I was worried there would be issues with implementation in the time domain and I'm glad I checked with you first! I will definitely look into expanding the number of poles to improve the fit, and take a look at those useful references.\n\nBest wishes,\nLauren\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ReGlx1n8A3c",
    "title": "plane wave as source",
    "original_post": {
      "author": "Hanne Pappen",
      "date": "Dec 23, 2016, 7:10:16AM",
      "content": "Hey guys,\n\nfirst of all: great job!\n\nAnd here comes a question:\nI found in the code a class called 'Plane_Wave'. Is it possible to use this somehow as a source?\nUnfortunately, I'm not that experienced in python to figure it out myself.\n\nFYI:\nI wanted to simulate the optical properties of split ring resonators\n\nCheers,\nHanne"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 23, 2016, 7:17:22AM",
        "content": "Hi Hanne,\nWelcome to the forum!\nI am in the process of implementing a plane wave source which is why you found it in the source code. It is not yet ready which is why it is not available as a command yet. It will probably be a month or two before I have time to continue to work on it.\nKind regards,\nCraig"
      },
      {
        "author": "Hanne Pappen",
        "date": "Dec 23, 2016, 7:25:46AM",
        "content": "Thanks for the quick response\n\nCheers,\nHanne"
      },
      {
        "author": "Hugo Day",
        "date": "Dec 23, 2016, 9:12:21AM",
        "content": "Hi Hanne,\n\nIn the meantime if you want to try something similar you can simulate a dipole source and just ensure you're in the far-field (say more than 2 wavelengths away). I've been doing studies of plane wave responses of spheres (transition from Rayleigh to Optical responses) and this has worked well (although not purely monochromatic).\n\n@Craig - Interesting to hear, look forwards to it!\n\nHugo"
      },
      {
        "author": "Sernita",
        "date": "May 4, 2017, 6:55:23AM",
        "content": "Hi all,\n\ndo you have any update about the command to generate plane waves?\n\nBest"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 4, 2017, 7:50:11AM",
        "content": "We have not implemented the plane wave source yet but we will try and make this a priority for simple source configurations when the target is located inside a simple homogeneous background (e.g. free space). In this case, a plane wave source is rather simple to implement. However, if you need to have a plane wave that interacts with layered media then the formulation, although possible, is a lot more tedious and tricky to program and this could take some time.\n\nIn GPR simulations we do not need plane wave sources as much and this is the reason that we have not implemented one. However, as gprMax is increasingly used for other EM modeling problems we would add this capability soon.\n\nBest\n\nAntonis"
      },
      {
        "author": "Lee",
        "date": "Aug 20, 2017, 9:36:38AM",
        "content": "Hi Antonis,\n\nFirst off, I love the software. Very nice work.\nSecond, a plane wave source for a simulation with layered media would be extremely useful.\n\nThank you for your hard work.\n\nLee"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 20, 2017, 5:04:00PM",
        "content": "Hi Lee,\n\nThanks for your interest in gprMax. As Antonis said implementing a plane wave source inside a simple homogeneous background is not too difficult to do, but not that useful for many cases. To implement a plane wave source for a model with layered materials is much trickier and time consuming. If we get some time (which is pretty rare these days!) or it fits within a project we are involved in then there is chance we could do it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "A Vaudemont",
        "date": "Jun 7, 2018, 9:20:35AM",
        "content": "Hi All,\nThanks for this very user-friendly SW! easy to instal and to use.\nJust a question: what about the plane wave as sources?  Are you planning a new version with that at least in vacuum?  \nI need that and I try to generate with an array of hertzian dipole at the moment.\nthanks\nAlan"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 8, 2018, 9:25:08AM",
        "content": "Hi Alan,\n\nThanks for your good words! We will try to have a look now over the summer to get at list a simple plane wave source in. This used to be available in the old version but we are rather ambitious and wanted to be able to do one that works for half and multilayered space. This is a bit trickier but possible. I suppose having a simple one to start with might not be a bad idea.\n\nBest\n\nAntonis"
      },
      {
        "author": "A Vaudemont",
        "date": "Jun 26, 2018, 2:51:57AM",
        "content": "Hi\nI'm trying to generate plane-wave with an array of dipole and I've a problem at domain limits.  \n  The following example is \"1D\" with PML at 0 in the propagation direction in order to use periodicity.\nThe plane wave present a default at the limit of the propagation domain (see snapshot) which behaviors as a spherical wave.\nI tested different array:\n- i from 0 to 101  and hertzian_dipole( 'z' , 2.0*i/100 ,  5.0, 0, 'my_ricker')\n- i from 0 to 100  and hertzian_dipole( 'z' , 2.0*i/100 ,  5.0, 0, 'my_ricker')\n- i from 0 to 100  and hertzian_dipole( 'z' , 2.0*i/100+0.01 ,  5.0, 0, 'my_ricker')\nSo I can generate different kinds of default\n\nDo you have an idea? \nThanks!\nCheers\nAlan\n \n\n\n\n#domain: 2.0 10.000 0.001\n#dx_dy_dz: 0.01 0.01 0.001\n#time_window: 8e-9\n#material: 6 0 1 0 half_space\n#waveform: ricker 1 0.3e9 my_ricker\n#python:\nfrom gprMax.input_cmd_funcs import *\nfor i in range(0, 100):\n  hertzian_dipole( 'z' , 2.0*i/100 ,  5.0, 0, 'my_ricker')\n#end_python:\n#rx: 1.0 1.50 0\n#box: 0 0 0 2.0 10.0 0.001 half_space\n#pml_cells: 0 10 0 0 10 0\n#python:\nfrom gprMax.input_cmd_funcs import *\nfor i in range(3, 8):\n  snapshot(0, 0, 0, 2.0, 10.0, 0.001, 0.01, 0.01, 0.001, (1*i)*1e-9, 'snapshot' + str(i))\n#end_python:"
      },
      {
        "author": "A Vaudemont",
        "date": "Jun 26, 2018, 3:15:44AM",
        "content": "ps: could we start with initial conditions by anyway ? E and H everywhere at t=0"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/b41SRcmVUdI",
    "title": "Readgprmax matlab",
    "original_post": {
      "author": "Carlo Gravante",
      "date": "Aug 16, 2022, 9:39:06AM",
      "content": "Hello, i am trying to use command readgprax() on MATLAB for open a file.out, but it don't allows me to open this kind of file, but only .m files. How i can do? Thanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2022, 4:52:20AM",
        "content": "I'm not sure what readgprmax() MATLAB file you are talking about, as this is not part of the current gprMax package. All our MATLAB helper tools are in 'tools->MATLAB_scripts'. Where is it from?\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Carlo Grandioso",
        "date": "Aug 17, 2022, 6:41:03AM",
        "content": "Hello, thanks for the answer. \nI am try to copy the MATLAB file used in this video: \nhttps://youtu.be/_FWNeqTr9nc\nDr. Giannopoulos open on matlab a file FDTImpulse, where he used: trace=readgprmax().\nI have Copy the file FDTImpulse on my MATLAB, and i am try to run it, but MATLAB give me an error \"unrecognized function or variabile 'readgprmax' \".\nHow can i do?\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2022, 6:59:37AM",
        "content": "I will check with Antonis, but I imagine the readgprmax() function he shows is based on our 'plot_Ascan.m' script to load a trace from the HDF5-based output file.\n\nCraig\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 17, 2022, 10:07:52AM",
        "content": "readgprMax() is a MATLAB function that is a cut down hacked version of the one available to read gprMax files and plot them in MATLAB. I have seen changed it many times and I am not sure if it will work for that script. The only purpose of it is to read the data in from gprMax and you can customise easily the one that is there to do this.\n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lbsMu4VU1CE",
    "title": "Unwanted reflections in GPRmax images",
    "original_post": {
      "author": "Enver Aydın",
      "date": "Jul 17, 2017, 6:07:33AM",
      "content": "Hi Everybody,\n\nI have question about unwanted reflections. I have also attached that input file and output images of GPRmax. \nDo you see problem in input file? I dont understand why occur this reflections that above on buried object like cross marks. \nI paid attention not to stay dipole and rx antenna in PML region, but this reflections are occured.\n\nThanks in Advance.\n\nKind Regards.\nEnver AYDIN"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 17, 2017, 12:00:23PM",
        "content": "Hi Enver,\n\nWelcome to forum! The first thing you should do is carefully check your input file and view the geometry of your model (see attached image). What I notice straightaway is that you have a very elongated model domain. Not necessarily a problem but in this case there are not enough cells between the source, receiver, and the PMLs. If you check the User Guide it advises at least 10-15 cells between PML and any source, receiver etc... http://docs.gprmax.com/en/latest/gprmodelling.html#absorbing-boundary-conditions So you need more space in every direction. \n\nAdditionally, although I see you are not using all of your material definitions to build objects yet, you will have problems with numerical dispersion with the frequency content of waveform you are using and the spatial discretisation - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretisation\n\nAlso you can see that with a 4mm spatial discretisation your cylinder of diameter 20mm is represented by 4 cells, i.e. not much of a cylinder.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Enver Aydın",
        "date": "Jul 18, 2017, 4:51:40AM",
        "content": "Hi Craig, \n\nThanks for your quick reply. I will pay attention what you said.\nif I use smaller spatial discretisation like 2mm , my simulation is running slower. Same way, if z-axis size is enlarged, simulation is running slower. \nDo you advise for slowness? I need a lot of output as attached in first message. Because of that, speed is important for me.\n\nThanks in Advance\nKind regards.\n\nEnver"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 18, 2017, 5:35:31AM",
        "content": "Hi Enver,\n\nWhen your spatial resolution gets smaller and/or the domain size gets bigger, you have more cells, and that means it will take longer to solve. That is just a fact of using a volumetric method like FDTD - 3D FDTD models, especially, can be computationally demanding. You should ask yourself whether you need to be solving a 3D model for your problem. If you are looking at cylindrical targets and don't require a full antenna model in your simulation, then why not use a 2D model, which will run much faster.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 18, 2017, 1:52:03PM",
        "content": "Hi Enver,\n\nAs Craig has mentioned FDTD is a computationally expensive method especially if you need a lot of detail and small discretization steps. The PML absorbing boundary condition that gprMax implements a rather powerful implementation of a general formulation. However, the PML in its standard form performs well in \"normal\" situations and it has some problems in others. This is documented in the appropriate literature. For, example elongated domains ( where on dimension is very small) do present problems for standard PML. gprMax supports the application of the CFS-PML and even higher order implementations but there is no clear optimisation path for these PMLs. So, we cannot have automatically selected settings for these PMLs to offer to users. As a result, the default PML in gprMax is a \"simple\" PML which offers decent performance in \"standard\" cases. If you want to use elongated models maybe you need to delve more into the details (see the literature and papers referenced at the website) to experiment with CFS-PML settings that might help. We have recently started an investigation into these with promising results but not general enough to publish for robust general use. \n\nIf you are interested in simpler pattern responses a 2D model, as Craig has suggested, might be easier to start with. The amplitude decay will be different from a full 3D model but the hyperbolic pattern should be OK.\n\nGood luck with your work\n\nAntonis"
      },
      {
        "author": "Enver Aydın",
        "date": "Jul 20, 2017, 2:34:15AM",
        "content": "Hi Craig and Antonis,\n\nThanks your interest. \nI try to some input file is changing as you said. I used 2D model. Simulation time gets better. \nBut I encounter same unwanted reflections.\nWould you mind controlling my input file? I couldn't figure out where I made mistake. \nThe input file as given below is like your 2D_Bscan model http://docs.gprmax.com/en/latest/examples_simple_2D.html#b-scan-from-a-metal-cylinder\nMaybe I have a suspicion on material of box and cylinder. What's your comments?\n\n\n#domain: 0.500 0.600 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-9\n\n#material: 6 0 1 0 half_space\n#material: 6.0 0.001 1.0 0.0 concrete\n#material: 8.0 0.01 1.0  0.0 damp_sand\n#material: 3.0 0.00001 2.0 0.01 dry_sand\n\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.06 0.55 0 my_ricker\n#rx: 0.1 0.55 0\n#src_steps: 0.005 0 0\n#rx_steps: 0.005 0 0\n\n#box: 0 0 0 0.5 0.5 0.002 damp_sand\n#cylinder: 0.26 0.22 0 0.26 0.22 0.002 0.01 concrete\n\nThanks in Advance\nEnver"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 20, 2017, 5:12:36AM",
        "content": "Hi Enver,\n\nYour input file looks OK. What 'unwanted reflections' are you observing? \n\nYour source and receiver are off-ground (therefore less energy will be coupled into the ground), both materials have some conductivity (will therefore attenuate the signal), and the dielectric contrast between the two materials is not large. Therefore I would expect the hyperbolic reflection from the cylinder of concrete will be fairly weak. Indeed you can adjust the colour scale for the B-scan to observe the hyperbola.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Enver Aydın",
        "date": "Jul 20, 2017, 7:06:17AM",
        "content": "Hi Craig,\n\nUnwanted reflections is like in \"1002.jpg\" as cross marks above hyperbola shape.\nHyperbolic reflection is not a problem for me that they are weak. \nI don't want to cross marks that unwanted reflections like \"1002.jpg\" as shown in attacehed \"1002(1).jpg\""
      },
      {
        "author": "Hugo Day",
        "date": "Jul 20, 2017, 10:20:30AM",
        "content": "Hi Enver, \n\nIf your emitter and receiver are off the ground those are likely the surface reflection of the GPR signal. This is entirely normal. If you're not interested you could set the time signal for that area to be zero."
      },
      {
        "author": "Enver Aydın",
        "date": "Jul 20, 2017, 10:35:35AM",
        "content": "Hı Hugo,\n\nIn fact, ground bounce is removed from this image. I think these reflections is occured by another reason that I didnt figure out.\n\nFurthermore, in Real world the emitter and receiver are must be above the ground aren't they. İs this antenna in ground possible?? İf I understand correctly.\n\nKind regards.\nEnver"
      },
      {
        "author": "Enver Aydın",
        "date": "Jul 22, 2017, 8:38:45AM",
        "content": "Hi Craig, \n\nThanks for your help.\nI am doing trials on gprmax  yesterday, I realizing that if any material doesnt exist in sand, I see cross marks like in attachment. And I wrote input file below this message.\nAs I understand, this cross marks are always exist, but any material buried in sand, these cross marks doesnt seem . Because they are weak signals.\nIs there any way to get rid of these signals  like cross shaped as shown in attachment?\n\nThis input file is in gprmax user guide, I just removed buried cylinder to simulate empty box. \n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n\nKind Regards.\nEnver"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 31, 2017, 10:54:34AM",
        "content": "Hi Enver,\n\nCan you just explain exactly the sequence of steps you are taking to get this result. For example, when you say 'ground bounce is removed from this image', what did you do?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Enver Aydın",
        "date": "Aug 2, 2017, 1:29:16PM",
        "content": "Hi craig,\n\nI just do that either cut rows until end of ground bouce or mean remove (background subtraction).\n\n%%MEAN REMOVE%%\n[m,n] = size(data);\nmean_trace = mean(data,2);\ndata_mr = data - repmat(mean_trace,1,n);\n\nKind regards.\nEnver"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 3, 2017, 3:53:40AM",
        "content": "Hi Enver,\n\nAs I am away at the moment I cannot run your model to have a definitive check on what is happening but I think I know what you see so, here are some points trying to explain and give you some suggestions.\n\nFDTD requires absorbing boundary conditions to operate an Open Boundary problem like GPR. These are good in absorbing most waves that come to the end of the model but they are not perfect and they can never be such. The problem is actually worst at the interface with a half space for reasons that it will be difficult to explain here. There is a lot of literature on the PML and its problems and how to treat them.\n\nYou are running a clinical simple model and as a result removing the direct response accentuates the error from the PML which is stronger at the edges. The shape of the response is indicating that the origin should be the corner of the half-space interface. The error is not constant as it is stronger closer to the PML. The reason is not symmetric is due to your scan not being exactly symmetric with regards to the model space. \n\nTo reduce or remove this error there are two options. One will work pretty well and the other requires a lot more understanding of the workings of the PML.\n\nA. To remove the \"background\" properly in a model like this you need to run a full model without a target. Then subtract each corresponding trace from this background run from the full model (not the mean). This will give you the scattered response from the target and will remove both the direct response and this first order PML error.\n\nB. Adust the parameters of the PML to make it perform a lot better. gprMax has a very powerful PML formulation that can be used and optimised to perform very well. This, unfortunately, is often problem dependent and as a result, cannot be done automatically (that is why we use by a default a simple standard PML). This requires more research and understanding on how the PML works etc. which might be more educational but you might not have the desire to follow.\n\nI suggest giving option A. a try first and if that does not work then we can look further into the issue. \n\n\nHope this helps!\n\nAntonis"
      },
      {
        "author": "Enver Aydın",
        "date": "Aug 3, 2017, 4:45:05AM",
        "content": "Hi Antonis,\n\nThanks for your helps.\n\nIf I understand correctly, you suggest run two seperate input file (full model with target and full model without target).\nAnd then subtract each corresponding traces two model eachother(full model with target - full model without target = desired result).\nIf I misunderstand,could you say more clear? If I suppose understand this issue, How can I simulate model without target with this method?\n Moreover, Is the following input file a full model? What does the full model? \n\n\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n\nKind Regards,\nEnver"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 3, 2017, 5:29:41AM",
        "content": "Hi Enver,\n\nYes, you are correct. You should run one model with the target and one model without the target (only the background). Then subtract the background model from the one with the target to get only the scattered field from the target.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MNJhwbqwQZs",
    "title": "gprMAX B-Scan oputput file processing.",
    "original_post": {
      "author": "Faisal Gerdazi",
      "date": "Feb 12, 2019, 1:00:46AM",
      "content": "Hello guys,\n  I need your help regarding the simulation of the B-Scan output file in the python/Jupiter notebook as i am new in this field.  I want to generate different B-Scan images for my work. Can someone guide me how can I get the output as shown below? Initially, I have used the sample model defined by the name cylinder _ B Scan.in. I have generated the O/P using the following command as well.\npython -m tools.plot_Ascan user_models/cylinder_Bscan_2D.out\n\n\nHow can i generate such scans? thanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 12, 2019, 12:43:31PM",
        "content": "Faisal,\n\nYou need to know the geometry and materials of the environment that you want to simulate. Therefore you need to know this information for the B-scans of the real data (I'm assuming it is real) you are trying to model.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yiheng Song",
        "date": "Apr 16, 2019, 5:39:48AM",
        "content": "Hello Craig,\n    I want to get an image like the first img,but I always get the second one with  using the plot-tool in gprMax3.0 on ubuntu 16.04. \nHow can i get what my target img?\n                                                               Yours lovely \n                                                                             Song"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 17, 2019, 3:59:28AM",
        "content": "The B-scan will of course depend on what the geometry and materials you have entered into the model. If they are not similar to the real situation then the B-scans will be different. It will also depend on how the real data has been processed, you should apply a similar processing to the simulated data if you want similar results.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yiheng Song",
        "date": "Apr 17, 2019, 9:57:10AM",
        "content": "I think my question is how to plot the img as gray image basing on the data that I have gotten.But I don't find one  instruction of the gprMax's tools that can do what I want.I use the gpr in my school(GSSI 400Mhz) to get the image like the follow one.Can you give me some ideas about how to get the similar imge？Need I coding for plotting with python or Matlab?\n                                                                                                                        Yours sincerely\n                                                                                                                              Song"
      },
      {
        "author": "Yiheng Song",
        "date": "Apr 17, 2019, 9:59:53AM",
        "content": "Following is the model I used."
      },
      {
        "author": "Craig Warren",
        "date": "Apr 17, 2019, 10:03:30AM",
        "content": "You can change the colour map in the B-scan plotting module (tools->plot_Bscan.py) at line 48:\n\nplt.imshow(outputdata, extent=[0, outputdata.shape[1], outputdata.shape[0] * dt, 0], interpolation='nearest', aspect='auto', cmap='seismic', vmin=-np.amax(np.abs(outputdata)), vmax=np.amax(np.abs(outputdata)))\n\n\nplt.imshow(outputdata, extent=[0, outputdata.shape[1], outputdata.shape[0] * dt, 0], interpolation='nearest', aspect='auto', cmap='gray', vmin=-np.amax(np.abs(outputdata)), vmax=np.amax(np.abs(outputdata)))\n\nhttps://matplotlib.org/tutorials/colors/colormaps.html\n\nKind regards,\n\nCraig"
      },
      {
        "author": "路瑞彪",
        "date": "Apr 22, 2019, 11:33:23PM",
        "content": "Thank you very much, Craig."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vDA9JZ3tp70",
    "title": "#excitation_file, compatibity of gprMax version and python version",
    "original_post": {
      "author": "ee20d058 Masoom Verma",
      "date": "Aug 20, 2023, 12:40:06AM",
      "content": "Hi everyone,\n                    I was trying to use stepped freq waveform(any waveform) through #excitation_file, but every time I landed on one particular error, which I have attached with this mail. I have tried to find the meaning of this error, which shows a compatibility problem between the gprMax version and to Python version.\nPlease make me sure about the meaning of this error and the solution to this issue.\n\n\nThank You\n\nRegards\nMasoom Verma"
    },
    "responses": [
      {
        "author": "ee20d058 Masoom Verma",
        "date": "Aug 21, 2023, 9:37:58AM",
        "content": "I have solved this problem. Thank You.\nI have a query regarding collecting the phase information of the reflected wave. When I look at the data file, the Ez is the absolute value.\nCan you suggest how to extract the phase information of the reflected wave?\n\nThank You\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wMgzMu0BAtc",
    "title": "Building main grid,#geometry_objects_read",
    "original_post": {
      "author": "Dave Bédard",
      "date": "Mar 2, 2025, 6:01:13PM",
      "content": "Hi everyone,\n\nI'm trying to use #fractal_box and Pepinski mixing model. Building main grid take a long time, so as recommended, I used #geometry_objects_write to build my model in a HDF5 file. The input file Affaissement_figure23.in is attached and used to build my model.\n\nI made another input file to run my simulation with #geometry_objects_read (Affaissement_figure23.in), but the simulation is two times longer as the grid is built two times instead of one (13 minutes total, 2 min for the simulation vs 6 minutes total, 2 min for the simulation). I thought #geometry_objects_read was not supposed to build the model on every iteration.\n\nI also have some #material with negative conductivity in the material text file created by #geometry_objects_write.  \n\nI don't know what I'm doing wrong, can someone help me?\n\nThanks,\n\nDave"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 3, 2025, 9:31:56AM",
        "content": "Hi Dave,\n\nDid you also use the argument --geometry-fixed? If you don't gprMax will build the model for every model run.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Dave Bédard",
        "date": "Mar 3, 2025, 12:09:13PM",
        "content": "Hi Craig,\n\nNo, I didn't use the -geometry-fixed argument. It's much faster now, I don't have to build the geometry every time and I don't need to write geometry object.\n\nThanks for your quick reply.\n\nBest regards,\n\nDave\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dsn_gZSoyjs",
    "title": "Ham radio application at 100's of kHz",
    "original_post": {
      "author": "david vanhorn",
      "date": "Nov 20, 2019, 5:14:00PM",
      "content": "Would gprMax be the right platform to start working with?\n\nI'm interested in the behavior of the electric and magnetic fields near the radiansphere.  My particular frequency of interest is the new ham band at 475kHz.\nI've worked with xFDTD previously, up at 2.4GHz, but I don't have the $30k for that, and it doesn't work particularly well (at all?) at this frequency.\n\nI want to see how the electric and magnetic fields behave as we increase distance from an electric or magnetic antenna, both in amplitude and phase."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 21, 2019, 5:56:31AM",
        "content": "Hi David,\n\nI can't comment on the pros and cons of xFDTD, as I too do not have the $$ for a licence!\n\nYou probably already know that for any FDTD solver if you have to use a fine (small) spatial resolution to model your objects of interest (antennas, targets), combined with a low frequency source (kHz) then the simulation times can be potentially long. This is because you have to run a significant number of iterations until the response dies down and the time step will be small because of the small spatial resolution and the stability (CFL) condition.\n\nYou can take snapshots of the electric and magnetic fields with gprMax to look at how they behave. Just be aware that you might end up with large models and long simulation times depending on your exact case.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "david vanhorn",
        "date": "Nov 21, 2019, 10:17:45AM",
        "content": "\"Long\" is relative. :)\n\nWith Xfdtd I was used to a single sim running 5-6 hours on a TitanX card, and running sims for several days to optimize a given antenna in its enclosure.\nI have a lot more horsepower available today with 5GHz CPU and RTX 2080 card available.\nIf it proves useful, I can add video cards as needed. \n\nThe size of my playing field is a radius of maybe 100 to 400m, and a resolution of 1m^3 would be useful.\n\nI see a steep learning curve ahead, and I want to be confident I'm not wasting my time."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/YwpnIrYt62I",
    "title": "Question about the Trace interval/step(m) field in the Additional Information window.",
    "original_post": {
      "author": "Matheus Almeida",
      "date": "Jun 21, 2021, 3:00:58PM",
      "content": "Hi\n\nI'm using the outputfile_converter.m code to simulate an .OUT file, generated in a problem that I'm solving through gprMax.\n\nWhen using the outputfile_converter.m file, the \"Additional information\" window appears, I can't understand what the Trace Interval / Step (m) field would be.\n\nDear users and developers, can you guide me regarding what this information would be Trace Interval/Step(m)?\n\nI did some tests and this error message appears:\n\nError using resample (line 102)\nthe 'pchip' method is only applicable when you supply the time vector input, Tx\n\nError in outputfile_converter (line 107)\ndata = resample(data, tx1, fs1, 'pchip');\n\nThank you in advance."
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Jul 1, 2021, 3:32:11PM",
        "content": "Hello Matheus,\n\n\nThe script will only work for merged gprMax output files, i.e., for b-scans.\n\nThe trace interval/step (in meters) is the src_steps/rx_steps that you have used for your simulation with gprMax.\n\n\nKind regards,\n\nDimitris\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/I9E1sD1IPGw",
    "title": "Receiving 3D data from real environment in Gprmax",
    "original_post": {
      "author": "Gökçen Merve Horuk",
      "date": "Nov 5, 2019, 9:20:41AM",
      "content": "Hello to everyone,\n\nI am a young engineer and I wanted to do a project on Gprmax in my graduate project. I'm very new to Gprmax. There are many technical issues and I am trying to learn. I ask you to support me to learn and achieve my purpose.\nI made the necessary downloads for GprMax. I have tried A - scan and B - scan samples in 2D and 3D. I was sure by viewing the models I created in Paraview.\nMy goal is to measure up to 4 meters by working with a signal in the 1.3 - 2.7 GHz range. I aim to take snapshots in a real environment. First I try to simulate a few examples. Since the soil structure will vary, I am having problems in the order in which I need to enter the materials (moist soil, dry soil, clay, mud, water, ice, etc). The objects I want to find are, for example, precious metals (gold, silver, bronze, copper, etc). Of course, as well as other materials such as plastic, concrete I want to detect. The maximum distance between Tx and Rx is 25cm. I will save the model in hdf5 format and upload it to Mbed device.\nCan you guide me and help me achieve my goal?\n\nBest regards,\nGokcen"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 5:41:38AM",
        "content": "Gökçen,\n\nDo you have a specific question on creating your simulation? Have you thought about the basics of GPR and electromagnetic wave propagation, i.e. is it realistic to be detecting objects at depths of 4m with a 1.3-2.7GHz source? How are you going to differentiate between the different metals?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Gökçen Merve Horuk",
        "date": "Nov 7, 2019, 8:37:58AM",
        "content": "Hello, \n\nWhen creating a simulation, I ask in what order should I create the materials of the layers. For example, when defining soil in the form of clay, sand, moist soil, in what order can I simulate the soil correctly?\n\nI think it will be difficult to distinguish metals. So I wanted to consult you. I thought to distinguish it by wavelengths, but I realize that in such highly conductive materials, it is necessary to create highly sensitive models to achieve small field penetration levels. I realized this would be very difficult to distinguish, as the materials in this metal structure exhibit excellent conductivity. Right now I just want to display the metals under the ground in 3D. Is it possible to get images like this?\n\n\n\n\n\nI checked the penetration depth. 1.3-2.7 GHz is not enough as you say, but I tried it in the simulation model in this way. When I decrease the frequency, I hope to get a 4m image. Do you think that makes sense?\n\nBest regards,\nGokcen."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_TbLBQrKo7w",
    "title": "Questions about wave propagation in gprMax",
    "original_post": {
      "author": "Matthijs van Delft",
      "date": "Jul 31, 2019, 8:58:13AM",
      "content": "Dear forum,\n\nWorking with gprMax raises a few questions about wave propagation and general functionality. I will just summarize my questions:\n\nAssuming a 3D model, and a 2D approximate of the 3D model, (e.g., a buried cylinder and a circle/slice of the cylinder). Simulating both with the exact same parameters result in similar reflections, but the reflections of the 2D model have a way higher contrast. Why is this? I assume it is a result of dissipating energy in the third dimension of the 3D model or something similar but I don't know if my assumption is correct.\nDoes it make sense to make the trace spacing smaller than the Yee cell size? I've tested this and it looks like the virtual antenna stays in its place because the coordinates are rounded down or something. Is this correct?\nShould the trace spacing be a multitude of the Yee cell size because of the rounding of the antenna coordinates?\nHopefully, somebody can enlight me on these questions.\n\nBests,\n Matthijs"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2019, 4:46:09AM",
        "content": "Hi Matthijs,\n\nHere are some answers:\n\n1. As the electromagnetic waves propagate they experience spreading losses. The geometric spreading losses in 2D and 3D are different as the energy spreads out in cylindrical and spherical forms respectively. So you would expect to see higher amplitudes for the 2D cases. You can of course correct for geometrical spreading to compare 2D and 3D directly.\n\n2 & 3. The size of the Yee cell, i.e. spatial discretisation, is the smallest unit by which any geometry can be defined in the model. You can't have a trace spacing smaller than the spatial discretisation. If you try to do so you will either get rounded down to zero, or up to the spatial discretisation depending on how close to either you are.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/o8yHmoi41bM",
    "title": "Processing geometry related cmds:",
    "original_post": {
      "author": "Michael Fehér",
      "date": "Apr 25, 2020, 7:31:07AM",
      "content": "I have a big model of 3.5m x 0.4m x 1.85m  x 0.002m  (1680 x 200 x 925 = 3.108e+08 cells)\n\nI have as well a very big computer:\nhost: TerraCarta | System manufacturer System Product Name | 1 x Intel(R) Core(TM) i9-9900X CPU @ 3.50GHz (10 cores, 20 cores with Hyper-Threading) | 126GiB RAM | Linux (4.15.0-96-generic, debian)\nGPU(s) detected: 0 - TITAN RTX, 23.7GiB | 1 - TITAN RTX, 23.7GiB\n\nthat about 22Gb with a peplinsky soil, imported as precalculated model. (#geometry_objects_read: 0 0 0 pep3Dsk_g.h5 pep3Dsk_g_materials.txt)\n\nI'm using mpi: #python -m gprMax 2201.in -n 150 -mpi 3 -gpu 0 1 | tee  2201.txt\n\nI want to ask about the time what a processing of geometry related cmds should take.\n\nat this moment the CPU calculates at one core already about 1600 minutes.\nGeometry objects from file pep3Dsk_g.h5 inserted at 0m, 0m, 0m, with corresponding materials file pep3Dsk_g_materials.txt.\nProcessing geometry related cmds:   3%|▊                          | 1/34 [00:52<28:37, 52.05s/cmds]\n\nis this okay? shoul I wait or kill the process?\nis there a option of a more verbose output where I might see some hickups?\n\n\nIve letting doe about 2000 models of mostly 9Gb in the last year, but I got no problems like this yet. So I didn't noticed this one:\nAm I seeing it right: this calculation is made vor every model and then pumped towards the GPU? or is this calculation made once every model and then used (im my case 150 times)?\n\n\nThank in advance, for your reaction.\n\nsincerly, Micha"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 27, 2020, 4:36:01AM",
        "content": "Dear Micha,\n\nTITAN RTX 23.7GiB! Wow, am jealous!\n\nI have explanations and some questions which may help:\n\n- The model is 'built' for every run, unless you use the --geometry-fixed argument which re-uses the whole grid and just moves any simple sources (such as Hertzian dipoles) and receivers. If you are working with a full antenna model then this is not suitable.\n- There is no more verbosity available to see what geometry command is slowing the build process.\n- You are importing geometry from a HDF5 file. Why do you also need other geometry commands? Are these for objects that move between your model runs? If not, it would be faster to export all your geometry to HDF5 and then import it in one go.\n- The 'building' of the model always happens on the host (CPU) no matter if you use CPU or GPU for solving. Once the model is built it is then copied to the GPU if you are using that to solve. The building of the model can't really be further parallelised for speed.\n- Can you share your input file, as I might be able make further suggestions based on that.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Michael Fehér",
        "date": "Apr 28, 2020, 2:24:17AM",
        "content": "Dear Craig,\n\nfor sure i'll post mij input file:\n\n#title: leeg_kleiigzand\n\n#domain: 3.36 0.400 1.85\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 55e-9\n\n\n#geometry_objects_read: 0 0 0 pep3Dsk_g.h5 pep3Dsk_g_materials.txt\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_400\nantenna_like_GSSI_400(0.180 + current_model_run * 0.02, 0.200 , 1.6, resolution=0.002)\n#end_python:\n\nnothing special, no objects yet.\nI want to simulate serveral dipping objechts and objects at an angle.\n\nI have attatched the screen-output, taken via | tee 2200.txt\n\nit seams to me that there was went something wrong, preparing the pep-model. this I have done via:\n\n#title: zandig_klei\n\n#domain: 3.36 0.400 1.60\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 1.0e-9\n\n\n#soil_peplinski: 0.1 0.9 2.0 2.66 0.25 0.35 my_soil\n#fractal_box: 0 0 0 3.36 0.400 1.60 2 1 1 0.5 50 my_soil my_soil_box\n\n#waveform: ricker 1 15e8 my_ricker\n#hertzian_dipole: y 0.5 0.001 0.1 my_ricker\n#rx: 0.5 0.001 0.1 rec Ey\n#geometry_objects_write: 0 0 0 3.36 0.400 1.60 pep3Dsk_g\n#geometry_view: 0 0 0 3.36 0.400 1.60 0.002 0.002 0.002 pep3Dsk_g n\n\nthen: # python -m gprMax pep3Dsk_g.in --geometry-only\n\nI've calculates the soilbox again as wel with no success\n\n\n\nMany thanks for your attention!\n\n\nKind regards,\n\nMicha"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 28, 2020, 5:34:51AM",
        "content": "Dear Micha,\n\nYour input file looks fine. I don't *think* the slow-down is related to the soil model. To check this can you just remove the insertion of the antenna and run the model.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Michael Fehér",
        "date": "Apr 28, 2020, 6:55:10AM",
        "content": "Dear Craig,\n\nthis seems to look fine.\n\nwithout the antenna-model it's going to compute.\n\n... without the soil as well! - I changed the fractal-box to a normal box of 9 0 1 0 homogenius medium\n\nboth situations are computing as expected.\n\nsincerly, Micha"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 28, 2020, 8:19:02AM",
        "content": "So that points to the antenna model as potentially the problem. I didn't create model like the GSSI 400MHz antenna, but I know it is based on the ones I did do. You might trying putting the antenna back in and running with the argument '--write-processed'. This will produce an input file with all the antenna geometry as hash commands. It might help narrow down where the problem lies.\n\nCraig"
      },
      {
        "author": "Michael Fehér",
        "date": "Apr 28, 2020, 9:16:30AM",
        "content": "here we go:\n\nit seems, that the command #python -m gprMax 2200.in -n 150 --write-processed -mpi 3 -gpu 0 1 | tee 2200.txt , (which had could have been #python -m gprMax 2200.in -n 150 --write-processed als well?) makes the first two files 22001_processed.in and 22002_processed.in.\n\n#python -m gprMax 2200.in --write-processed -gpu makes  2200_processed.in and is gouing to compute the whole bunch.\njust as\n#python -m gprMax 2200.in - n 150 --write-processed -gpu makes  22001_processed.in and is gouing to compute the whole bunch.\n\nwithin seconds (6 seconds) the geometry related commands where done en the PML is built.\n\n\n\nnow we are coming closer:\nWithout mpi the computing would have been started, if there was enough memory at the GPU\n\nsee enclosed logfile (2200.txt) - the model with peplinsky-soil and antenna-model asks for 29 Gb RAM, where the same model without the factal-box but with a box of homogenius soil fits the memory provided from the GPU (22Gb)\n\nboth logs (homogenous and heterogenius soil) are showing:  Memory (RAM) required: ~22GB host + ~22GB GPU\n\njust this one with the peplinsky soil complains later on too few memory.\n\nthis is strange: without -mpi 3 -gpu 0 1  option geometry was complete processed and PML and maingrid was built. just at hte point of putting te pakage to the GPU gprMax drops.\nWhile -mpi is active gprMax loops inside Processing geometry related cmds\n\n\nSincerly, Micha"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 28, 2020, 9:32:37AM",
        "content": "Dear Micha,\n\nThis is what I think is going on based on what you reported (but I'm a little confused by your message in places):\n\n1. The fractal box requires more memory to build than a simple homogeneous box. This is not included in the total memory estimate for the model - see https://github.com/gprMax/gprMax/issues/76. Therefore you won't get a memory warning if for your fractal box model you are exceeding the RAM available (~23GB) per GPU. Can you try running the fractal box model on a single GPU without MPI and see what happens.\n2. When using MPI you will require enough memory on the host (CPU) to build all models. This is number of MPI tasks minus one, i.e. number of MPI workers, multiplied by the memory estimate for a single model. I don't think this will be a problem in your case as if you need ~29GB per model then the host must have 2x29=58GB, and you have 126GB.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Michael Fehér",
        "date": "Apr 28, 2020, 9:54:55AM",
        "content": "you are right.\n\non a single CPU the model runs as expected.\non multiple CPU (up to 4 tested) the model runs as expected. with a virtual memory-claim of about 29 GB per modelling-task\non a single GPU the model the error appears (see updated logfile, I copied the errormessage at the end of this log)\n\n\nI think, tat we have pointed it out. right?\nI just have to make the model smaller unless the memory-expectations of 22GB.\n\nbut why is a fractal-box bigger ten a normal box? it contains the same amount of cells.\n\n\nmany thanks!"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 29, 2020, 4:16:34AM",
        "content": "Dear Micha,\n\nThat makes some sense. It is not the fractal box, per se, that requires more memory in the solving phase (although the fractal box can require extra memory in the build phase), it is the dispersive soil properties associated with the fractal box. The dispersion for the Peplinski soil is simulated using a single pole Debye model which requires extra coefficients to update, and hence extra memory variables at every grid point. This is what causes the increased memory footprint. We don't yet include this extra memory in the estimation of the total memory required for a model - although this will be included in the next release of gprMax which I am presently working on.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Michael Fehér",
        "date": "Apr 29, 2020, 5:47:52AM",
        "content": "Dear Craig,\n\nmany thanks for this lucid explaination.\n\nand last but not least: Many thanks for this great tooling of gprMax and magnifique support!\n\n\nSincerly, Micha"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zfoWDkDw02Q",
    "title": "Object : Plate and edge commands",
    "original_post": {
      "author": "sravanip...@gmail.com",
      "date": "Nov 11, 2022, 4:38:47AM",
      "content": "Hi team,\nI cannot see the plate and edge objects in paraview  the input files of plate and edge are attached below can you please tell me what is the reason?\ninput file for plate:\n#domain: 0.264 0.25 0.3\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n\n#material: 6 0 1 0 half_space\n##material: 12 0.002 1 0 my_sand\n\n#box: 0 0 0 0.240 0.22 0.2 half_space\n#plate: 0.1 0.1 0.1 0.2 0.22 0.1 pec\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.125, 0.094, 0.200, resolution=0.002)\n#end_python:\n#geometry_view: 0 0 0 0.264 0.25 0.3 0.001 0.001 0.001 bowtie_plate n\n\ninput file for edge:\n#domain: 0.264 0.25 0.3\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n\n#material: 6 0 1 0 half_space\n##material: 12 0.002 1 0 my_sand\n\n#box: 0 0 0 0.240 0.22 0.2 half_space\n#edge: 0.1 0.2 0.2 0.1 0.22 0.2 pec\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.125, 0.094, 0.200, resolution=0.002)\n#end_python:\n#geometry_view: 0 0 0 0.264 0.25 0.3 0.001 0.001 0.001 bowtie_edge n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 26, 2022, 7:17:33AM",
        "content": "You need to use a fine geometry view to see plates and edges, see the syntax of the #geometry_view command and in particular variable c1 in docs - https://docs.gprmax.com/en/latest/input.html#geometry-view\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lsDksRIiuRk",
    "title": "Creating C scans",
    "original_post": {
      "author": "Robert Gallagher",
      "date": "May 11, 2021, 6:45:25AM",
      "content": "Hi All,\nI appriciate the assitance this forum and its mmebers have provided so far, it has allowed me to make significant progress with my thesis project.\n\nI have created a number of B scans from my model and now trying to find out how to create C scans from them. Is there anyone with any experience in doing this with gprMax?\n\nKind regards,\nRob"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 11, 2021, 9:23:08AM",
        "content": "Hi Rob,\n\nImporting gprMax data into GPR processing software could help you in processing B-scans using depth slicing etc.  if you do not want to create your own processing scripts in Python or MATLAB. Recently geolitix (www.geolitix.com) have included a gprMax data reader for their platform that reads in the gprMax merged B-scan file generated by the python script available as part of the gprMax tools to merge A-Scans to B-Scans. If you have your B-Scans created that way you can import them in geolitix and process them there.\n\nThere might be other scripts that might be available in converting gprMax data to other GPR formats so they can be used with other GPR processing softwares.\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Shikhar Sharma",
        "date": "Jun 28, 2023, 9:55:15AM",
        "content": "Hi Rob and Antonis , \n\nHave you figure out the way to create C-scans images using series for B-scans without geolitix because it is paid . \nIf you have created any script in python that would be really helpful.\n\nThanks and Regards,\nShikhar \n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 29, 2023, 9:28:43AM",
        "content": "Sadly, No. I use geolitix with my undergraduate students in my GPR course and they gives us access for academic use which is big enough for our little projects. \nThere are some free processing alternatives like RGPR but have not used them as I don't know R. \n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bkcN1k-64zk",
    "title": "About Sphere Material",
    "original_post": {
      "author": "­유영준[컴퓨터공학과]",
      "date": "Jun 1, 2020, 6:09:44AM",
      "content": "Can I set the part of one Sphere to a different material like this(Attached \"sphere_material.jpg\")?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2020, 10:56:08AM",
        "content": "No, not that I can think of with the geometry primitives currently available. You can create geometry outside gprMax and import it - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MniT_F-Ai_c",
    "title": "multiple sources (Bscan)",
    "original_post": {
      "author": "Brad Artman",
      "date": "Sep 6, 2022, 1:55:56PM",
      "content": "in my .in I have:\n#domain: 2. 1.23 0.2 \n#rx: 1.66 1.21 .10  \n#rx: 1.00 1.21 .10  \n#hertzian_dipole: x 1.00 1.21 .10 my_ricker\n#src_steps: .66 0 0\nI was hoping for a miserly 4 traces: two zero-offsets, one in the middle of domain and one 2/3 across X; then 2 offset traces, one with source in middle and one 2/3 across X.\nMy .out file only has 1 src however. So, I think I'm misusing src_steps somehow? Or, since I'm only doing 2 src loc's, maybe I can just add another hertzian_dipole entry?\n\nBest- B"
    },
    "responses": [
      {
        "author": "Brad Artman",
        "date": "Sep 7, 2022, 5:00:22PM",
        "content": "Dr. C-\nDo multiple hertizian_dipole locations, and running with -n numberofdipoles make a Bscan?\n\nfor some reason, \n#title: NE 6 onlytrench Ez\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 6e-7 \n#waveform: ricker 1 1.5e9 my_ricker \n#domain: 2. 1.23 0.002 \n#rx: 1.66 1.21 0  \n#rx: 1.00 1.21 0  \n#hertzian_dipole: z 1.00 1.21 0 my_ricker\n#src_steps: .66 0 0\nsays sources will move outside domain. I thought src_steps would start at 1m in a 2m domain_x, then move to 1.66m\n"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 8, 2022, 3:58:06AM",
        "content": "Whenever you move sources and receivers - using either #src_steps & #rx_steps or some Python code - then you will create a B-scan.\n\nIn your example, if you produce more than 2 A-scans, i.e. with -n > 2, then your source will step outside the domain. In the first A-scan your source will be at (1.00, 1.21, 0) and in the second A-scan at (1.66, 1.21, 0). If you try and run it a third time the source will go to (2.32, 1.21, 0) which will step outside the domain in the x-direction.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zzk-rXaYXPA",
    "title": "Running python scripts with other Py-modules",
    "original_post": {
      "author": "Anadyr",
      "date": "Apr 18, 2020, 10:53:27AM",
      "content": "Hi guys,\n\nI have one question: reading in this forum I found an interessant question (here) regarding running gprmax using python to run multiple files.\nI think that the author wanted to automate the process of reading datas from a file. But Craig's answer surprised me a little bit, because Craig suggests to have a python script from where to start gprMax and other tools.\nBut another way could be using python modules like pandas directly in the .in file\nSomething like:\n\n#python:\nfrom gprMax.input_cmd_funcs import *\n\nimport pandas as pd\n\npandas.read_csv( 'file.csv' )\n...\n\n\nBut it gives an error.\nHow is it possibile to use tools like pandas, numpy, etc. directly in the .in script?\n\nThanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 19, 2020, 8:57:56AM",
        "content": "Ahmed,\n\nThere is no problem to import and use Python modules in the input file within #python: #end_python: blocks. I suspect your example fails because you imported pandas as pd then tried to use it by calling pandas.\n\nCraig"
      },
      {
        "author": "Anadyr",
        "date": "Apr 20, 2020, 1:32:16PM",
        "content": "Yes,\n\nthat was a typing mistake.\n\nBut I discovered that pandas is not installed in the gprMax environment.\n\nMaybe this is useful for everybody looking for a method to simulate from data spreaded in many different files.\n\nBye!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/u4xC3RN2_vg",
    "title": "Fourier Transform",
    "original_post": {
      "author": "Tony",
      "date": "Sep 27, 2016, 10:53:08AM",
      "content": "Hello!\n\nWe are new to GPRMax, and recently got confused on the fft of the A scan data. For instance, we defined a Ricker waveform of 700MHz as the excitation signals, and the medium is air with no objects (pipes or anything) in the simulated domain. We wanted to verify the fourier transform with GPRmax. And after the standard fft of the output, and found that it resonates at around 1GHz. Shouldn't it be 700MHz? Or do we miss anything here?\n\nThanks a lot!\n\nTony"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 28, 2016, 5:48:30AM",
        "content": "Hi Tony,\n\nI'll try and provide a more detailed answer later if I get more time, but the short(ish) answer for now is that using the current (Iz component) and taking a FFT of it in your model is not the right thing to do. The current outputs from a receiver in the model are intended to be used when you want to know the current in a metal structure, e.g. along a dipole antenna. Since you are using a Hertzian source model and have no other geometry in your model you should be looking at the electric (and/or magnetic) field components.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Tony",
        "date": "Sep 30, 2016, 2:10:37AM",
        "content": "Hi Craig\nThank you for your reply. We followed your suggestion, but the results were not fully satisfactory. We think we'd better to understand how gprmax defines the excitation exactly.\n\n1. We use Hertzian dipole, and based on gprmax documentation, a current density term is specified at the electric field location (analogue to the feed point of an electric dipole), so can we simply treat it as a current source? If so, it is sensible to take current component for fft. (at the back of our mind, we shall always work on the same component in the same direction, i.e., if current in z direction is the excitation at TX, we shall look at the current in the same z direction at RX). Are we right?\n\n2. What's the main difference between Hertzian dipole and Voltage source type of excitation. We think the difference is current excitation vs voltage excitation, thus for the voltage source type we need to specify the \"internal resistance of the voltage source\". Shall we simply use the intrinsic impedance 120*pi/sqrt(er)?\n\n3. We also found that the discretised cell size has an important impact on the fft results. We think your statement that at least of 10 cell across any strucutre is vital in FDTD simulations, the smaller the better if computational resources permit. But back to our original problem, if we don't have any objects buried in the domain, how can we decide what cell size is good enough to calculate the right frequency response of the antenna?\n\nWe'd graceful if you can answer these questions and help us understand the fundamentals correctly. Thank you very much!\n\nBest regards,\nTony"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 30, 2016, 10:00:05AM",
        "content": "Hi Tony,\n\n1. A hertzian dipole in gprMax is just a current density term in Maxwell's equations. What you specify is the time dependence of the current on this dipole that defines a dipole moment i(t)*DL. The current is assumed to have a constant spatial extent (i.e. does not vary with distance along the dipole). That is why is a small Hertzian dipole model. This works reasonably well in gprMax and there are good comparisons with the analytical solutions. Now, the output current Ix,y,z IT IS NOT a proper output parameter and it is not related to the current of the source dipole. What you want to look at are the E and H fields. The current I is there as a convenience when we want to check what is the current that \"runs\" along a conductor. In essence Ix, Iy and Iz are the time-dependent output of the [curl H]x or [curl H]y or [curl H]z. This is more or less equivalent to the [partial D/partial t] term. In free space it is close in shape to the time derivative of the Electric Field multiplied by epsilon_0 or otherwise j*w*E(w)*epsilon_0\n\nIn the following plot, you can see how the centre frequency \"discrepancy\" arsies from this. The blue line is the normalised power spectrum of a \"gaussiandotnorm\" pulse (700e6) and the red line is the same as \"j*w*gaussiandotnorm\" normalised version. The centre frequency shifts towards 1GHz. The centre frequency of the blue line is not exactly 700e6 because of FFT binning and not appropriate df. So, that explains what you see for Iz that is only useful for specific uses and not as a \"field value\" in this kind of experiments. Actually, we are discussing with Craig to remove it as a default output as it is only useful under certain conditions and can create confussion.\n\n\n\n2. The hertzian dipole is a transparent source that is added as a current density (J) term in the appropriate Maxwell's equation. The voltage source prescribes the variation of an electric field component. A hard source replaces the Electric field and is like a PEC reflecting when it drops to zero. A voltage source with resistance is similar to an added current density term and it is not reflecting after its amplitude has reached zero.\n\n3. The 10 cell rule is a minimum to keep numerical dispersion under control; if you can afford 20 cells this is even better. There are other errors as well. For example, if you do not adequately resolve your structure then you do not model the object you think you might do ... If you have no high dielectrics in your model then obviously your spatial step can increase.\n\nIf you are going to use gprMax for antenna modelling and more \"advanced\" stuff I recommend getting to grips with the FDTD method as gprMax is just an FDTD solver used for GPR modelling because we work with GPR. You can use it for anything related to EM modelling but its features are not as extended as some commercial codes and there is no GUI. There is some good capability there, although I say this myself, and a very good price ;-)\n\nA good starting point for FDTD is \n\nhttp://www.eecs.wsu.edu/~schneidj/ufdtd/\n\nand/or the videos of UTEP at:\n\nhttps://www.youtube.com/channel/UCPC6uCfBVSK71MnPPcp8AGA\n\nBest wishes in the hope that this answers your questions\n\nAntonis"
      },
      {
        "author": "Tony",
        "date": "Sep 30, 2016, 10:05:06PM",
        "content": "Hi Antonis\nMany thanks for your detailed answer, really appreciate it!\nBest regards,\nTony"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nlbzFtYEQo4",
    "title": "object not picked up in b-scan",
    "original_post": {
      "author": "Patrick Carson",
      "date": "Mar 2, 2016, 10:06:08AM",
      "content": "Hi all,\n\nI have a pipeline that creates many input files for gprMax, each file is different with respect to the placement of 200 'noise' objects and a box. The following input file is an example. However for this input file the corresponding B-scan doesn't seem to pick up the box. I can't figure out why since other input files (of the same structure) and ultimately B-scans do pick up the box. I should also add that I remove the ground coupling and direct wave signals then normalise to grey values within a range of 0-255.\n\ninput file:\nhttps://www.dropbox.com/s/r1p14yxs2hkahyx/with0.txt?dl=0\n\nB-scan:\nhttps://www.dropbox.com/s/hbh2pns3txiy20x/with0.png?dl=0\n\ngeometry screenshot:\nhttps://www.dropbox.com/s/bn77t6336ir3fpv/with0_geometry.png?dl=0\n\nsuccessful B-scan (same file convention) - box return signal middle left of image:\nhttps://www.dropbox.com/s/8nq29cqhj9w6rvs/with1.png?dl=0\n\nThanks very much for any help.\n\nPatrick"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 3, 2016, 7:39:33AM",
        "content": "Patrick,\n\nAre you sure your pec boxes are not being overwritten by the granite spheres?\n\nCraig"
      },
      {
        "author": "Patrick Carson",
        "date": "Mar 3, 2016, 8:24:27AM",
        "content": "Hi Craig,\n\nYes, I code that doesn't allow the coordinates of a sphere to be placed within a certain distance of the box - this can be seen in the geometry view.\n\nPatrick"
      },
      {
        "author": "Patrick Carson",
        "date": "Mar 7, 2016, 6:09:39AM",
        "content": "Hi Craig,\n\nCould it be that there are too many objects being placed in the domain?\n\nPatrick"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 7, 2016, 9:26:14AM",
        "content": "That should have no effect. If I get a chance I'll run your example for a better look.\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 7, 2016, 9:42:13AM",
        "content": "Hi Patrick,\n\nThe easiest way to find out the contribution of a target to a signal is to run a model with and without the target in question and then compare them. If you subtract them you will get exactly the contribution of the PEC box. if the difference is zero then something strange might happen with your model as it does not appear that you can completely shield the box (according to what you are doing). gprMax does not pick objects but it process them in the order they appear in the input file. If you can see the box in the geometry plot then it is there. You can shield a part of a geometry by placing something metal above it but this is not what you are doing here. In any case the box's response might not be as strong as you might think if there is significant clutter above it. So, my recommendation is to run two models and verify if there is a problem or the response from the box is not as strong as expected.\n\nRegards\n\nAntonis"
      },
      {
        "author": "Patrick Carson",
        "date": "Mar 8, 2016, 7:09:31AM",
        "content": "Hi Antonis,\n\nThanks for the advice.\n\nAfter running the input file with and without the box you can see a very small change in the radargram where the box should be. I imagine it is down to the fact that there is significant clutter located above the box - something i will have to look at.\n\nI have one more question. In the gprMax user guide notes section 'to calculate a spatial resolution and domain size' the equation to calculate the spatial resolution uses the relative permittivity of the half space. In my simulations I use a soil peplinski model where no relative permittivity is defined - how should i then calculate the optimum spatial resolution?\n\nThanks again for the help.\n\nPatrick"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 8, 2016, 7:20:23AM",
        "content": "Hi Patrick,\n\nInteresting question! The implementation of the Peplinski soil model is coming out from very recent research work which will be detailed in Iraklis Giannakis PhD thesis (soon link to appear for downloading it) or from the paper published recently (10.1109/JSTARS.2015.2468597). There is obviously a translation of soil properties to electrical properties and this can be easily seen by the formulae. At the moment maybe the best way is to check the materials list and see for information on the media generated. You need to check for the highest permittivity value to use in your calculations. Maybe it will be a good feature to state this as a message in a more prominent way at some point. \n\nBest\n\nAntonis"
      },
      {
        "author": "Patrick Carson",
        "date": "Mar 9, 2016, 4:16:11AM",
        "content": "Hi Antonis,\n\nReally interesting paper, thanks for pointing me towards it. Looking forward to reading his thesis.\n\nCheers,\n\nPatrick"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rHxY-L7LlhU",
    "title": "maximum sitze of .in file",
    "original_post": {
      "author": "Michael Fehér",
      "date": "May 4, 2021, 6:38:12AM",
      "content": "Dear Craig, Dear Antonis,\n\nI've made an input-file of (at this time) 767 lines.\n\nI get an error from gprMax:\nTraceback (most recent call last):\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 197, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\m.feher\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"e:\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 68, in main\n    run_main(args)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 190, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"e:\\gprMax\\gprMax\\gprMax.py\", line 231, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"e:\\gprMax\\gprMax\\model_build_run.py\", line 149, in run_model\n    singlecmds, multicmds, geometry = check_cmd_names(processedlines)\n  File \"e:\\gprMax\\gprMax\\input_cmds_file.py\", line 213, in check_cmd_names\n    cmdparams = cmd[1]\nIndexError: list index out of range\n\nit seams that the in file is a littel big ... big.\nI want to generate an .h5 in order to use it for simulations\n\n\nis there a reason why there is a maximum?\n\nthere is an in-file upcoming, which is even bigger.\nDo I have to split these files to get smaller geometry_objects?\nhow can I merge a couple of .h5 to one big?\n\n\nregards, Micha"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 5, 2021, 6:51:00AM",
        "content": "Dear Micha,\n\nI don't think this has to do with the size of your input file. The error points towards a problem with one of the commands in your file. I can't really give more advice without seeing the file.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/0fY8QYH8USQ",
    "title": "Merge Error for Cylinder Bscan",
    "original_post": {
      "author": "Aiman",
      "date": "May 29, 2020, 9:30:13PM",
      "content": "Hello everyone,\nAnybody can help me regarding to this problem, Im a newbie here\nFor the cylinder_Ascan_2D sample result, is perfectly working as shown in gprMax User Guide 3.1.5\nThis problem happens when I want to run the sample of cylinder Bscan 2D provided in https://github.com/gprmax/gprMax\nThe merge is not working perfectly for cylinder_Bscan_2D\n\n\n(gprMax) C:\\Users\\Aiman\\Desktop\\gprMax>python -m tools.outputfiles_merge C:\\Users\\Aiman\\Desktop\\gprMax\\user_models\\cylinder_Bscan_2D1.out\n\n(gprMax) C:\\Users\\Aiman\\Desktop\\gprMax>python -m tools.plot_Bscan C:\\Users\\Aiman\\Desktop\\gprMax\\user_models\\cylinder_Bscan_2D1.out_merged.out Ez\nTraceback (most recent call last):\n  File \"C:\\Users\\Aiman\\miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Users\\Aiman\\miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\Aiman\\Desktop\\gprMax\\tools\\plot_Bscan.py\", line 83, in <module>\n    nrx = f.attrs['nrx']\n  File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"C:\\Users\\Aiman\\miniconda3\\envs\\gprMax\\lib\\site-packages\\h5py\\_hl\\attrs.py\", line 60, in __getitem__\n    attr = h5a.open(self._id, self._e(name))\n  File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"h5py\\h5a.pyx\", line 77, in h5py.h5a.open\nKeyError: \"Can't open attribute (can't locate attribute: 'nrx')\"\n\nThank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2020, 10:47:47AM",
        "content": "Dear Aiman,\n\nThe error KeyError: \"Can't open attribute (can't locate attribute: 'nrx')\" suggests your file does not contain multiple traces (A-scans). Check you have followed the example, and make sure your folder/directory containing the A-scans to be merged does not contain any other files with the same naming scheme.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Aiman",
        "date": "Jun 1, 2020, 5:39:55PM",
        "content": "Thank you Craig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-6swQKmHM7U",
    "title": "How to Use a Custom Antenna in Simulation Model?",
    "original_post": {
      "author": "chaitanya...@gmail.com",
      "date": "Oct 31, 2022, 11:53:43AM",
      "content": "I have created my own microstrip antenna in Ansys, and would like to import it into the system setup for gprMax. Is it possible to import maybe import a Huygen's box (around the antenna) so that the equivalent current distributions on the box can be modeled as multiple sources (instead of the antenna)?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 1, 2022, 2:49:34AM",
        "content": "The quick answer is No. It would be a nice feature and in our plans we will re-implement plane wave sources using Huygen's sources and NFTF transforms but this is not possible at the moment in any easy way. Our sub-gridding approach is based on using Huygen's sources and it works so the idea is feasible in theory but not in the current code.\n\nAntonis\n\n"
      },
      {
        "author": "chaitanya...@gmail.com",
        "date": "Nov 1, 2022, 8:21:58AM",
        "content": "I see. Thanks for the quick reply!\n\nChaitanya\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/RMjd0_Bdp40",
    "title": "Some questions about the material parameter",
    "original_post": {
      "author": "Haoran",
      "date": "Jul 1, 2020, 8:19:56AM",
      "content": "Hi Craig，\n\nI'm a beginner of GPR and gprMax. I had some questions about the material parameter. According to some literature, the dielectric constant and conductivity vary with the frequency. Should I use the dielectric constant and conductivity of the material at the antenna center frequency or zero-frequency? And why？\n\nThanks,\nBest regards,\nHaoran"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2020, 10:59:57AM",
        "content": "Dear Haoran,\n\nWelcome to the forum!\n\nYou can model the frequency dependent properties of the material, for example using a Debye model (http://docs.gprmax.com/en/latest/input.html#add-dispersion-debye). Or you can pick a set of properties that are around the operational frequencies of your source/antenna, bearing in mind that GPR systems are generally broadband.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BHrogCWxt0U",
    "title": "'#fractal_box:' without '#soil_peplinski:'",
    "original_post": {
      "author": "Aleksei Titov",
      "date": "Mar 20, 2017, 1:39:14PM",
      "content": "Dear gprMax community,\n\nI would like to enquire you about '#fractal_box:' command. Could I use the command with some user-defined mixing model but not with soil_peplinski?\nE.g. I need some fractally distributed volume of 10 media with dielectric constant from 15 to 25 and sigma equals to zero.\n\nSincerely,\nAleksei"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 22, 2017, 2:18:07PM",
        "content": "Hi Aleksei,\n\nWelcome to the forum!\n\nSo, you currently can only use the #fractal_box with the #soil_peplinski model. We coded this in a fairly general way, as we anticipated either ourselves (or others!) adding other mixing models, such as CRIM, that could be used with the #fractal_box. The use-case you are talking about is distributing a series of 'standard' materials using the #fractal_box command. This is certainly possible but would take some adjustments to the code (with possibly a new command).\n\nIf I get some time, I will look into it further. Of course you are welcome to contribute to the code yourself if you wish.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Aleksei Titov",
        "date": "Mar 23, 2017, 9:48:24AM",
        "content": "Dear Craig,\n\nThank you for your answer and gprMax.\n\nAll the best,\nAleksei"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xICgfLkFTg8",
    "title": "No reflected signal from the target",
    "original_post": {
      "author": "Hussain Mumtaiz",
      "date": "Feb 17, 2021, 6:12:38PM",
      "content": "Hi to all; \nWhy I have no reflected signal from the target for my model,  the size of the target is 1cm.\nIt is because of the size of the target or something else, I am looking for advice.\nHussain"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 18, 2021, 5:45:21AM",
        "content": "Your model uses small 4cm cells and you ask it to model something that has a radius of 1cm. Does this makes sense to you? How can something smaller than you cel size can be modelled that way?\n\nYou need to understand how the modelling method works and its basic concepts and not use it as a black box if is to get any sensible results for your work.\n\nGood luck\n\nAntonis\n\n"
      },
      {
        "author": "Hussain Mumtaiz",
        "date": "Feb 19, 2021, 1:57:14AM",
        "content": "Hi, Antonis again:\nThank you for your response, I am still learning to use gprMax and appreciate any comments.\nThe problem I have in my model is to recognise the reflected signal from the direct wave, I already used different spatial resolution and time window as attached below. \nHussain\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 19, 2021, 7:58:59AM",
        "content": "Hi Hussain,\n\nyou've got a wired geometry.\n\na giant modelsize with huge cell-sizes\n\nright, 2D-approarch with dipole on top of your sand-box.\n\nbut: your cylinder is very close to the 'surface' - about 10 cm (!!)  below your dipoles\n\nso the A-Scans seams plausible to me:\n\nhere you got your direct wave and the reflection of the cylinder.\n\n2 suggestions:\n1)             #cylinder: 1 0.1 0 1 0.1 0.006 0.05 pec\n2) \n#hertzian_dipole: z 1 1.1 0 my_ricker\n#rx: 1.04 1.1 0\n#box: 0 0 0 2.0 1.1 0.006 sand_space\n#cylinder: 1 0.1 0 1 0.1 0.006 0.05 pec\n\n\nget more aware of the sizes of your model to clarify the results:\n\nhttp://docs.gprmax.com/en/latest/output.html?highlight=paraview#geometry-output\n\n\nregards, Micha\n"
      },
      {
        "author": "Hussain Mumtaiz",
        "date": "Feb 20, 2021, 6:31:40AM",
        "content": "Hi again,\nThank you Michael for your response.\nI fixed my model with a new target position.\nI have another issue that there is no Hy field strength as in the attached file, I am not sure it is related to the sit-up model or something else.\n\nReg ;\nHussain\n\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 22, 2021, 1:23:08AM",
        "content": "just have a look.\n\nthere is Hy - everything is fine.\n\nyou'll have no Ex ans Ey since your dipole is z oriented. so there is no Hz.\n\n\neverything looks cool to me. maybe you'll have to apply some gain on Hy to see the reflection of your target in Hy. but please don't say anything about 'no signal' the direct wave is signal too. and as soon as the direct-wave appears you know that your model is working. if you have no expected results, you'll neet to read the documentation of gprMax and dive into the theoretics of FD-modelling.\n\n\ncheers, micha\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_mgkonLbZoo",
    "title": "Rock Block GPR data, how to use it?",
    "original_post": {
      "author": "Guillermo Jordan Ibanez",
      "date": "Nov 1, 2022, 8:52:35AM",
      "content": "Good morning group.\nI would like to receive support on whether it is possible to reproduce the experimental values by GPR of a cracked rock block (100x90x80 cm), using GPRMax. I have all files generated by MALA. I have no idea how to work with data manipulation nor how to set input parameters. I have some basics of Python.\nRegards\nJordan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 10, 2022, 4:11:05AM",
        "content": "Hi Jordan,\n\nThe quick answer, and in principle, is yes. However, as with any simulation, how close you get to reality depends on well you can specify the parameters in your model. There are many aspects to the model that may be important, for example, correctly modelling the Mala antenna you used, knowing the material properties of the rock etc.... We can assist with specific questions but is probably better if you go and think about some of these questions first. Also it is important to understand why you want to simulate this scenario.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XZn49i3MU4s",
    "title": "Signal spectrum analysis of dispersive media",
    "original_post": {
      "author": "James T",
      "date": "Jan 5, 2022, 9:48:51AM",
      "content": "hello, doctor!\n\nI am doing the simulation of dispersive media and the analysis of its related frequency shift and attenuation phenomena. I established a simple layered medium, with cracks in the upper part, abnormal medium in the middle and water in the lower part to obtain strong reflection signals. I analyzed the spectrum of the reflected signal on the intermediate abnormal medium and found that its dominant frequency is lower than that of the antenna. I know this is normal. However, after removing the direct wave and gain, I analyzed the spectrum of the remaining signal and found that its main frequency is much higher than the antenna frequency I set, and the frequency of time-frequency analysis is also much higher than the antenna frequency, which is abnormal. I hope to get suggestions in this regard."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NV5vQy3Bf3Q",
    "title": "GPU using Error",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Oct 14, 2021, 2:44:32AM",
      "content": "Hello everyone!\n\n          My computer has four GeForce GTX 1660 SUPER GPU, when I use the command\npython -m gprMax user_models/cylinder_Bscan_2D.in -n 60 -gpu 0 1 2 3\nIt shows this error:\n\nOutput file: C:\\Users\\Administrator\\gprMax\\user_models\\cylinder_Bscan_2D1.out\n\nTraceback (most recent call last):\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 197, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\Administrator\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\Administrator\\gprMax\\gprMax\\gprMax.py\", line 69, in main\n    run_main(args)\n  File \"C:\\Users\\Administrator\\gprMax\\gprMax\\gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\Administrator\\gprMax\\gprMax\\gprMax.py\", line 232, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\Administrator\\gprMax\\gprMax\\model_build_run.py\", line 373, in run_model\n    tsolve, memsolve = solve_gpu(currentmodelrun, modelend, G)\n  File \"C:\\Users\\Administrator\\gprMax\\gprMax\\model_build_run.py\", line 508, in solve_gpu\n    kernels_fields = SourceModule(kernels_template_fields.substitute(REAL=cudafloattype, COMPLEX=cudacomplextype, N_updatecoeffsE=G.updatecoeffsE.size, N_updatecoeffsH=G.updatecoeffsH.size, NY_MATCOEFFS=G.updatecoeffsE.shape[1], NY_MATDISPCOEFFS=1, NX_FIELDS=G.nx + 1, NY_FIELDS=G.ny + 1, NZ_FIELDS=G.nz + 1, NX_ID=G.ID.shape[1], NY_ID=G.ID.shape[2], NZ_ID=G.ID.shape[3], NX_T=1, NY_T=1, NZ_T=1), options=compiler_opts)\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 349, in __init__\n    cubin = compile(\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 298, in compile\n    return compile_plain(source, options, keep, nvcc, cache_dir, target)\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 87, in compile_plain\n    checksum.update(preprocess_source(source, options, nvcc).encode(\"utf-8\"))\n  File \"C:\\ProgramData\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 58, in preprocess_source\n    raise CompileError(\npycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\tmpv0icuzb0.cu failed\n[command: nvcc --preprocess -w -arch sm_75 -m64 -Ic:\\programdata\\miniconda3\\envs\\gprmax\\lib\\site-packages\\pycuda\\cuda C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\tmpv0icuzb0.cu --compiler-options -EP]\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\nDoes anybody know where the problem is?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 23, 2021, 6:47:38AM",
        "content": "Dear Dongyang,\n\nIt doesn't look like you are using MPI which is necessary for farming out the models to multiple GPUs. See example in docs - http://docs.gprmax.com/en/latest/gpu.html#combining-mpi-and-gpu-usage\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Dongyang Liu",
        "date": "Oct 25, 2021, 9:40:37PM",
        "content": "Hi Carig:\n\n   Thanks for your remind, I did make a command mistake before. But after I change the command to:\npython -m gprMax user_models/cylinder_Bscan_2D.in -n 60 -gpu \nIt still give a mistake:\npycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\tmp2qm1qh35.cu failed\n[command: nvcc --preprocess -w -arch sm_75 -m64 -Ic:\\programdata\\miniconda3\\envs\\gprmax\\lib\\site-packages\\pycuda\\cuda C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\\tmp2qm1qh35.cu --compiler-options -EP]\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\nSo where the problem is?\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DN2Q9_TwFBk",
    "title": "questions about #soil_peplinski",
    "original_post": {
      "author": "Rohanna",
      "date": "Jun 8, 2018, 8:34:32AM",
      "content": "Hi Craig,\n\nI have some questions about mixing soil models. I have defined a 2D model for simulation. The code is shown below. \n\n#title: mixture_sand0.5_clay0.5\n#domain: 1.5 1.5 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 20e-9\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.1 my_soil\n#waveform: ricker 1 0.6e9 my_ricker\n#hertzian_dipole: z 0.10 1.4 0.0025 my_ricker\n#rx: 0.15 1.4 0.0025\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n#fractal_box: 0 0 0 1.5 1.4 0.005 1.5 1 1 1 50 my_soil my_soil_box\n#cylinder: 0.75 0.75 0 0.75 0.75 0.005 0.15 free_space\n#geometry_view: 0 0 0 1.5 1.5 0.005 0.005 0.005 0.005 mixture_sand0.5_clay0.5 n\n\nAfter I finished the operation, I used Paraview to view the model and found that the model of each line was different. Here are two examples. \n\n\nMy understanding is that the water content of the mixed model is generated randomly, but once the simulation is started, the model should be determined. So I think this seems unreasonable and I hope to get an answer. Thank you.\n\nKind regards,\n\nRohanna"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 8, 2018, 9:18:46AM",
        "content": "The answer is in the manual \n\nhttp://docs.gprmax.com/en/latest/input.html#fractal-box\n\nevery time you run a model with a fractal box or other command that creates a stochastic distribution you get a new variation. That is why you can use seeding into the random generator to lock down the distribution and be able to obtain the same distribution again every time you call the command. The optional parameter you need is [i2] and it is all explained in the manual if you look carefully ;-)\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/N7_T0fA-9jc",
    "title": "tomographic analysis",
    "original_post": {
      "author": "qwyuan",
      "date": "Nov 19, 2017, 6:42:11AM",
      "content": "hello everybody!\n\n        i want to perform tomographic analysis through defining the coordinate of Rx and Tx, But the result showed that the travel time of direct wave is inconsistent with  the depth of  wave propagation. is the  two-way travel time always be showed in tomographic result?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 23, 2017, 9:15:48AM",
        "content": "Hi qwyuan,\n\nYou'll need to better explain what you are trying to simulate. Are you trying to simulate a B-scan where the source and receiver follow a rough surface? What do you mean by 'the travel time of direct wave is inconsistent with  the depth of wave propagation'?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Narayanarao",
        "date": "Dec 6, 2017, 8:59:30AM",
        "content": "Hello Craig,\n\nI have a list questions in my mind. Just please make me understand the following.\n 1. How to make source and receiver follow rough surface?\n 2. Can we include imaginary part of dielectric constant?\n 3. How to choose custom band width? Is there any default bandwidth ?\n \nThank you,\n\nWarm Regards,\n\nNarayana"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 6, 2017, 9:44:50AM",
        "content": "Dear Narayanarao,\n\n1. You need to use some simple python scripting in your input file to control the position of Rx and Tx in your model depending on the model you have. This is something you need to research how to do it as it is not a build in option. Examples of using a small python block have been given before and can be a starting point.\n2. gprMax has a very advanced and sophisticated mechanism to include dispersive materials. You need to understand the dispersive properties of your material and then use the correct formulation (multi-debye or single pole debye etc.). The imaginary part of the permittivity can be evaluated for a specific frequency and then you can get the corresponding effective conductivity from it to use it in a simpler way. Note that this will only be valid for that specific frequency. Details of how to do this are in numerous introductory electromagnetic books.\n3. You can define custom pulse shapes if you wish and hence control the bandwidth.\n\nRegards\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/R6fX1Mdj0zA",
    "title": "HDF file creation",
    "original_post": {
      "author": "Faisal Gerdazi",
      "date": "Mar 4, 2019, 4:49:17AM",
      "content": "Hello guys,\n  Can anyone please help me to creat a dataset from images in a directory(lot of PNG images). I want to creat a dataset in .h5 formate along with their labels like we have \"cat and dog train\" as shown below.Thanks"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Xv7hfBzgHdU",
    "title": "the ratio of front surface reflection and penetration signal",
    "original_post": {
      "author": "Zhang",
      "date": "Mar 12, 2017, 11:26:59PM",
      "content": "Hi\nIn my model, I put the transmitter and the receiver in the air, and the results show that the receiver can receive the front surface reflection and interface reflection.Can I obtain the ratio of front surface reflection and penetration signal, or the proportion of the front surface reflection in the source signal?  Could you give me some advice? (or depend on the material property?)\nThank you very much"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 15, 2017, 1:20:53PM",
        "content": "Hi Zhang,\n\nYour diagram is not entirely clear. I assume there is another material below 'Material 1' that you intend to see a reflection from the interface? What you will see at the receiver is a combination of the direct wave (in air) from transmitter to receiver, reflection from the air-Material 1 interface, and reflection from the Material 1-other material interface. You can run different models with and without the presence of Material 1 and the other material to see how each reflection contributes to the overall response at the receiver.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Zhang",
        "date": "Mar 15, 2017, 11:15:19PM",
        "content": "Hi Craig,\n\nThanks for your response!\n\nSorry, I didn't explain clearly. Maybe I want to obtain the S11 or S21 parameter but I don't know how to do. Could you give me a simple example to illustrate how to use the transmission line (I tried, failed) and obtain the s11 and s21 parameters? If I use a hertzian_dipole could I obtain the he S11 or S21 parameter?\n\nThanks!"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 16, 2017, 8:52:48AM",
        "content": "Hi Zhang,\n\nThe #transmission_line command is intended to be used when you model the antenna in your simulation, i.e. when you include the physical structure of the antenna. It can then be used to investigate the s11 of the antenna, and by including a receiver antenna (also with a transmission line) you can get the s21. Have a look in the User Guide at the wire dipole antenna example - http://docs.gprmax.com/en/latest/examples_antennas.html#wire-dipole-antenna-model\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/txBevzqGzcM",
    "title": "the parameter [i2] in the command #fractal_box",
    "original_post": {
      "author": "Zhang",
      "date": "Jun 26, 2017, 3:47:29AM",
      "content": "hi guys,\n\nabout the command #fractal_box: f1 f2 f3 f4 f5 f6 f7 f8 f9 f10 i1 str1 str2 [i2] [c1] \n\nwhen i want to use the mixing soil model, I don't know how to use this parameter [i2]\n\nhow can i set [i2] to get a fixed-random number sequence in a B-scan simulation?\n\nif i use \n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.1 my_soil\n#fractal_box: 0 0 0 2.4 1.0 0.005 1.5 1 1 1 50 my_soil my_soil_box 5\n\nwhat does the value 5 represent, how about 1\\2\\3 or other value ?\n\nbest regards."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 26, 2017, 4:28:53AM",
        "content": "Hi Zhang,\n\nWelcome to the forum!\n\nThe parameter 'i2' in the #fractal_box command is used to seed the random number generator which is used in generating the fractals, see - https://docs.scipy.org/doc/numpy-1.12.0/reference/generated/numpy.random.RandomState.html#numpy.random.RandomState\n\nBy specifying 'i2' you will get the same fractal distribution which is useful if you are doing a B-scan or repeated models.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Zhang",
        "date": "Jun 26, 2017, 9:41:46PM",
        "content": "Hi Craig,\n\nThanks for your reply!\n\nbest regards,\n\nZhang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1s7NfbrFa-w",
    "title": "SMALLER MODEL",
    "original_post": {
      "author": "GLORY ANNABELLE",
      "date": "May 27, 2020, 2:01:21PM",
      "content": "Hello, im new here. i was wondering if there is a way to make our model smaller, because if i try to simulate real model with X axis of 6 Meter and longer time window, it will take alot of time to process it. Any idea how?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 27, 2020, 2:49:22PM",
        "content": "Dear Glory,\n\nWelcome to the forum!\n\nI appreciate you are new but you really need a good understanding of the underlying principles of GPR modelling and the Finite-Difference Time-Domain (FDTD) method upon which gprMax is based. There is a basic introduction in the docs - http://docs.gprmax.com/en/latest/gprmodelling.html#guidance-on-gpr-modelling \n\nInherently, the FDTD method is volumetric based on a spatial resolution that is determined by your specific problem and controlling numerical dispersion. The time step is then set by the spatial resolution according to the Courant–Friedrichs–Lewy condition, and the number of time-steps depends on the length of your time window. There is no shortcutting this to reduce the computational requirements. So think about whether you need to simulate such a large domain, and if you are using reasonable values for spatial discretisation and time window.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iFVGeX6s_IY",
    "title": "i came across a problem when execute conda env create -f conda_env.yml ：failed building wheel for mpi4py",
    "original_post": {
      "author": "刘梦娜",
      "date": "Oct 29, 2017, 4:24:37AM",
      "content": "when i execute conda env create -f conda_env.yml ,there appears the following error：（i have delete and restarte from the first step，it didnt works）\n\nCollecting terminaltables\n  Downloading terminaltables-3.1.0.tar.gz\nCollecting tqdm\n  Downloading tqdm-4.19.4-py2.py3-none-any.whl (50kB)\n    40% |█████████████                   | 20kB 365kB/s eta 0:00:01\n    60% |███████████████████▍            | 30kB 529kB/s eta\n    80% |█████████████████████████▉      | 40kB 356kB/\n    100% |████████████████████████████████| 51kB\n 409kB/s\nBuilding wheels for collected packages: mpi4py, terminaltables\n  Running setup.py bdist_wheel for mpi4py ... error\n  Complete output from command C:\\Users\\liumengna\\Miniconda3\\envs\\gprMax\\python.\nexe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\LIUMEN~1\\\\AppData\\\\L\nocal\\\\Temp\\\\2\\\\pip-build-kb9aovpd\\\\mpi4py\\\\setup.py';f=getattr(tokenize, 'open',\n open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code\n, __file__, 'exec'))\" bdist_wheel -d C:\\Users\\LIUMEN~1\\AppData\\Local\\Temp\\2\\tmpk\nxzm4fqmpip-wheel- --python-tag cp36:\n  running bdist_wheel\n  running build\n  running build_src\n  running build_py\n  creating build\n  creating build\\lib.win-amd64-3.6\n  creating build\\lib.win-amd64-3.6\\mpi4py\n  copying src\\__init__.py -> build\\lib.win-amd64-3.6\\mpi4py\n  copying src\\__main__.py -> build\\lib.win-amd64-3.6\\mpi4py\n  creating build\\lib.win-amd64-3.6\\mpi4py\\include\n  creating build\\lib.win-amd64-3.6\\mpi4py\\include\\mpi4py\n  copying src\\include\\mpi4py\\mpi4py.h -> build\\lib.win-amd64-3.6\\mpi4py\\include\\\nmpi4py\n  copying src\\include\\mpi4py\\mpi4py.MPI.h -> build\\lib.win-amd64-3.6\\mpi4py\\incl\nude\\mpi4py\n  copying src\\include\\mpi4py\\mpi4py.MPI_api.h -> build\\lib.win-amd64-3.6\\mpi4py\\\ninclude\\mpi4py\n  copying src\\include\\mpi4py\\libmpi.pxd -> build\\lib.win-amd64-3.6\\mpi4py\\includ\ne\\mpi4py\n  copying src\\include\\mpi4py\\MPI.pxd -> build\\lib.win-amd64-3.6\\mpi4py\\include\\m\npi4py\n  copying src\\include\\mpi4py\\__init__.pxd -> build\\lib.win-amd64-3.6\\mpi4py\\incl\nude\\mpi4py\n  copying src\\include\\mpi4py\\__init__.pyx -> build\\lib.win-amd64-3.6\\mpi4py\\incl\nude\\mpi4py\n  copying src\\include\\mpi4py\\mpi.pxi -> build\\lib.win-amd64-3.6\\mpi4py\\include\\m\npi4py\n  copying src\\include\\mpi4py\\mpi4py.i -> build\\lib.win-amd64-3.6\\mpi4py\\include\\\nmpi4py\n  copying src\\MPI.pxd -> build\\lib.win-amd64-3.6\\mpi4py\n  copying src\\libmpi.pxd -> build\\lib.win-amd64-3.6\\mpi4py\n  running build_clib\n  MPI configuration: [mpi] from 'mpi.cfg'\n  error: Microsoft Visual C++ 14.0 is required. Get it with \"Microsoft Visual C+\n+ Build Tools\": http://landinghub.visualstudio.com/visual-cpp-build-tools\n\n  ----------------------------------------\n  Failed building wheel for mpi4py\n  Running setup.py clean for mpi4py\n  Running setup.py bdist_wheel for terminaltables ... done\n  Stored in directory: C:\\Users\\liumengna\\AppData\\Local\\pip\\Cache\\wheels\\96\\0c\\9\na\\0ec2bcad2ac1fb1d0e4695879386460cec1a947cd7413d1b17\nSuccessfully built terminaltables\nFailed to build mpi4py\nInstalling collected packages: mpi4py, terminaltables, tqdm\n  Running setup.py install for mpi4py ... error\n    Complete output from command C:\\Users\\liumengna\\Miniconda3\\envs\\gprMax\\pytho\nn.exe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\LIUMEN~1\\\\AppData\\\n\\Local\\\\Temp\\\\2\\\\pip-build-kb9aovpd\\\\mpi4py\\\\setup.py';f=getattr(tokenize, 'open\n', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(co\nde, __file__, 'exec'))\" install --record C:\\Users\\LIUMEN~1\\AppData\\Local\\Temp\\2\\\npip-b76i9fis-record\\install-record.txt --single-version-externally-managed --com\npile:\n    running install\n    running build\n    running build_src\n    running build_py\n    creating build\n    creating build\\lib.win-amd64-3.6\n    creating build\\lib.win-amd64-3.6\\mpi4py\n    copying src\\__init__.py -> build\\lib.win-amd64-3.6\\mpi4py\n    copying src\\__main__.py -> build\\lib.win-amd64-3.6\\mpi4py\n    creating build\\lib.win-amd64-3.6\\mpi4py\\include\n    creating build\\lib.win-amd64-3.6\\mpi4py\\include\\mpi4py\n    copying src\\include\\mpi4py\\mpi4py.h -> build\\lib.win-amd64-3.6\\mpi4py\\includ\ne\\mpi4py\n    copying src\\include\\mpi4py\\mpi4py.MPI.h -> build\\lib.win-amd64-3.6\\mpi4py\\in\nclude\\mpi4py\n    copying src\\include\\mpi4py\\mpi4py.MPI_api.h -> build\\lib.win-amd64-3.6\\mpi4p\ny\\include\\mpi4py\n    copying src\\include\\mpi4py\\libmpi.pxd -> build\\lib.win-amd64-3.6\\mpi4py\\incl\nude\\mpi4py\n    copying src\\include\\mpi4py\\MPI.pxd -> build\\lib.win-amd64-3.6\\mpi4py\\include\n\\mpi4py\n    copying src\\include\\mpi4py\\__init__.pxd -> build\\lib.win-amd64-3.6\\mpi4py\\in\nclude\\mpi4py\n    copying src\\include\\mpi4py\\__init__.pyx -> build\\lib.win-amd64-3.6\\mpi4py\\in\nclude\\mpi4py\n    copying src\\include\\mpi4py\\mpi.pxi -> build\\lib.win-amd64-3.6\\mpi4py\\include\n\\mpi4py\n    copying src\\include\\mpi4py\\mpi4py.i -> build\\lib.win-amd64-3.6\\mpi4py\\includ\ne\\mpi4py\n    copying src\\MPI.pxd -> build\\lib.win-amd64-3.6\\mpi4py\n    copying src\\libmpi.pxd -> build\\lib.win-amd64-3.6\\mpi4py\n    running build_clib\n    MPI configuration: [mpi] from 'mpi.cfg'\n    error: Microsoft Visual C++ 14.0 is required. Get it with \"Microsoft Visual\nC++ Build Tools\": http://landinghub.visualstudio.com/visual-cpp-build-tools\n\n    ----------------------------------------\nCommand \"C:\\Users\\liumengna\\Miniconda3\\envs\\gprMax\\python.exe -u -c \"import setu\nptools, tokenize;__file__='C:\\\\Users\\\\LIUMEN~1\\\\AppData\\\\Local\\\\Temp\\\\2\\\\pip-bui\nld-kb9aovpd\\\\mpi4py\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=\nf.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\"\ninstall --record C:\\Users\\LIUMEN~1\\AppData\\Local\\Temp\\2\\pip-b76i9fis-record\\inst\nall-record.txt --single-version-externally-managed --compile\" failed with error\ncode 1 in C:\\Users\\LIUMEN~1\\AppData\\Local\\Temp\\2\\pip-build-kb9aovpd\\mpi4py\\\n\nCondaValueError: pip returned an error.\n\n\nC:\\Users\\liumengna\\gprMax>conda env create -f conda_env.yml\n\nCondaValueError: prefix already exists: C:\\Users\\liumengna\\Miniconda3\\envs\\gprMa\nx"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 30, 2017, 5:15:02AM",
        "content": "Hi,\n\ngprMax has an option to use the Message Passing Interface (MPI) to farm out multiple models as tasks on bigger more high performance computers. The error you are experiencing is because you don't have an underlying MPI installation - http://docs.gprmax.com/en/latest/openmp_mpi.html#mpi It looks like you are using Windows? If you are not going to use MPI, and I suspect not if it is a Windows desktop machine, then you can simply comment out the 'mpi4py' package in the 'condo_env.yml' file, e.g.\n\n- pip:\n#  - mpi4py\n\nIf you want to use MPI, then read the aforementioned docs - you will probably need to install Microsoft MPI.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "刘梦娜",
        "date": "Oct 31, 2017, 4:45:42AM",
        "content": "Hi,Craig\n\nThanks for the fast response :)\n\nI Uninstall the anaconda. After install Microsoft MPI, I follow the gprMax installation steps, However, it appears the same error.\nso, I try to simply comment out the 'mpi4py' package in the 'condo_env.yml' file, and I simulate the example .in file,  it works. \nI would like to know not to install ‘mpi4py’ will affect my simulation results and simulation speed or not?\n\nThanks for your help!"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 31, 2017, 5:00:12AM",
        "content": "That would seem like mpi4py is not finding your Microsoft MPI installation.\n\nNot having mpi4py will not affect the speed of a single simulation, it is just useful if you have access to a HPC machine for distributing multiple models.\n\nCraig"
      },
      {
        "author": "刘梦娜",
        "date": "Oct 31, 2017, 5:06:25AM",
        "content": "so how can i make the mpi4py find my MPI installation？"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/WdPp53Zu8es",
    "title": "GSSI 5100 source impedance problem",
    "original_post": {
      "author": "mohammadreza roohi",
      "date": "Oct 9, 2020, 5:35:08AM",
      "content": "Hi all \n\nI am simulating GSSI 5100 antenna in CST microwave studio for my master's thesis, and I am using the data provided in PHD thesis of  Dr.Warren to reconstruct the antenna model.\n\nI have a serious problem about the optimized antenna parameters, especially about impedance of voltage source in Tx antenna. In the thesis, it is mentioned that the optimized value of input impedance of voltage source in Tx antenna is 4 ohm, but the input impedance of Tx antenna is about 100 ohm, which makes a considerable impedance mismatch between excitation source and the antenna.\n\nAccording to maximum power transfer theorem, the input impedance of an antenna and the impedance of the excitation source should be matched for maximum power to be transfered ( conjugate matching ).\n\nI would be very grateful if someone help me understand the reason behind this choice of impedance?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 15, 2020, 11:16:53AM",
        "content": "Dear Mohammadreza,\n\nIt is important to understand the rationale behind the development of the GPR antenna model(s). The antennas in question are commercial GPR antennas and as such key details such as material properties, source waveform, and feed mechanisms are unknown to the end-user. This is because the manufacturers do not want to give away what is their intellectual property - which is perfectly understandable. What this means is that to build a model of these antennas, these properties must be determined through measurements (where possible) or by some other means such as trial and error or a more systematic optimisation method. The aim when creating these particular GPR antenna models was not to replicate the true design of the antenna, but to create a model that behaved in the same way as the real antenna. This may seem like a subtle difference, but it is an important one. In the first instance if you want to faithfully replicate as much detail of the real antenna in the model, usually because you are interested in the antenna design, and perhaps changing the design with regard to the performance. In the second case (which is what I did), the end goal was to achieve a model that behaved like the real antenna. I wasn't interested in the optimised values of the components (such as the impedance of the source and receiver), so long as the output of the antenna model was as close to the real antenna as possible. So that is why you see values for impedance of the source and receiver that are unrealistic, i.e. you wouldn't expect in a real antenna. However, the important thing is that the performance of the antenna model was very similar to the real antenna.\n\nWe have made very good comparisons of these antenna models in both gprMax and CST, which you can read about in the following paper - dx.doi.org/10.1109/EuCAP.2016.7482010\n\nYou may also like to read about further developments to these antenna models that have been made since my PhD in the following paper - https://doi.org/10.1109/TGRS.2018.2869027\n\nKind regards,\n\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XGMsWKylhmI",
    "title": "Reading real for dataset",
    "original_post": {
      "author": "Tushar Gautam",
      "date": "May 28, 2020, 5:32:24AM",
      "content": "Hi\nI'm starting a new project in gpr imaging and looking for some opensource software(preferably in python as I'll be working with numpy array later) to visualise mala x3m gpr data.\nThanks"
    },
    "responses": [
      {
        "author": "Kerem Ozkap",
        "date": "May 28, 2020, 7:39:54AM",
        "content": "Dear Tushar,\n\nYou can check the two open-source software below. They may not be enough for advanced data processing, but you can apply basic data processing steps. I think both programs can read MALA data. The first program is based on python and the second one is r.\n\nhttps://nsgeophysics.github.io/GPRPy/\n\nhttps://emanuelhuber.github.io/RGPR/\n\nIf you want advanced data processing, you can try the open-source \"Seismic Unix\" software. However, it is not a user-friendly software, especially for beginners. You can find the link below;\n\nhttps://github.com/JohnWStockwellJr/SeisUnix/wiki\n\nI hope one of these helps you.\n\nGood luck!\n\nKerem"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/WVNt3mgXVgQ",
    "title": "GPU installation",
    "original_post": {
      "author": "David Guilbert",
      "date": "Sep 14, 2022, 2:30:29AM",
      "content": "Dear all,\nI had no problems installing gprMax and pycuda.\n\nWithout gpu I can generate an the example cylinder_Ascan_2D.in, but when I want to use -gpu I get an error.\n\n\nNumpy version is 1.22.3 and pycuda version is 2022.1, I am  under Windows 10.\nHave you encountered this problem before?\nBest regards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 16, 2022, 5:48:36AM",
        "content": "Hi David,\n\nCan you log this as an issue on GitHub - https://github.com/gprMax/gprMax/issues - and I'll pick it up from there.\n\nThanks,\nCraig\n\n"
      },
      {
        "author": "David Guilbert",
        "date": "Sep 16, 2022, 5:57:16AM",
        "content": "Hi,\nI have done it.\nBest regards\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JWQ5O54P9qM",
    "title": "I can not run gprMax",
    "original_post": {
      "author": "Alex Tito",
      "date": "Nov 6, 2019, 10:58:15PM",
      "content": "Good morning everyone!!!\n\nI can not run gprMax. This same problem always comes up. I have reinstalled several times and used several versions of Anaconda and Miniconda. However, the problems persist."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 5:52:51AM",
        "content": "Hi Alex,\n\nThis looks like gprMax is having a problem detecting the spec of your machine. Can you run the 'lscpu' command in a terminal and post the results here please.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Alex Tito",
        "date": "Nov 7, 2019, 7:23:45AM",
        "content": "Hello Craig I did what you asked. Thank you for your help."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 9:17:54AM",
        "content": "Thanks. I think gprMax is not parsing the information because of the locale. Can you try this command and post the output:\n\nenv LANG=en_US.utf8 lscpu\n\nCraig"
      },
      {
        "author": "Alex Tito",
        "date": "Nov 7, 2019, 11:31:22AM",
        "content": "Good afternoon Craig !!!\n\n Craig, i  used the env command LANG = en_US.utf8 lscpu\nand got the same response as the lscpu command. However, when I only use env LANG = en_US.utf8 I get other information as shown in figures p1 and p2."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 11:53:51AM",
        "content": "OK. Hopefully this command should provide the output in English:\n\nLC_ALL=C lscpu\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VNQ-9-wGHqE",
    "title": "C-scan Data Generation",
    "original_post": {
      "author": "Mike Smith",
      "date": "Dec 3, 2017, 12:53:17PM",
      "content": "The basic gprMax download provides the B-scan example to generate and plot the data.  A natural extension would be to generate C-scan data, for example, where a number of B-scans are generated iterating over the x dimension inside of a loop which iterates over the y dimension.\n\nI first thought the following might work:\n\n#src_steps: delta_x delta_y 0\n#rx_steps:  delta_x delta_y 0\n\nHowever, in this case both x and y positions are updated on every iteration rather than obtaining a grid over all x and y.\n\nDoes anyone have a code snippet showing how to perform the desired C-scan, perhaps using embedded Python?\n\nAlternatively, have the authors considered a new command that might do this automatically?\n\nAny help would be appreciated!\n\nThanks,\n\nMike"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 4, 2017, 6:47:15AM",
        "content": "Hi Mike,\n\nWelcome to the forum!\n\nHere is a snippet, using some Python, that I used to move a full antenna model in a simulation to create multiple B-scans in one direction. It can be simplified if you want to use a Hertzian source model, but it relies on using the variable 'current_model_run' to move the antenna (or source) to the correct location for each A-scan.\n\n#python:\n\n## Scans information\n## Total Ascans: 37 * 91 = 3367\n## Job options: -n 3367\n\nbscans = 37\nascans_per_bscan = 91\nascan_spacing = 0.010\nbscan_spacing = 0.025\n\n## 14 cells PML + 10 cells free_space + antenna_dim/2 + padding to create 900mm total dist\nxoffset = 0.028 + 0.020 + 0.085 + 0.017\nyoffset = 0.028 + 0.020 + 0.054 + 0.048\nbscan_num = np.floor((current_model_run - 1) / ascans_per_bscan)\nascan_num = current_model_run - (bscan_num * ascans_per_bscan) - 1\n\nx = xoffset + (ascan_num * ascan_spacing)\ny = yoffset + (bscan_num * bscan_spacing)\n\nantenna_like_GSSI_1500(x, y, 0.24, resolution=0.002)\n\n#end_python:\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mike Smith",
        "date": "Dec 5, 2017, 6:59:34PM",
        "content": "Craig,\n\nThank you very much for the information and quick response.\n\nRegards,\n\nMike"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bE4dhd5RjeU",
    "title": "Max radar frequency",
    "original_post": {
      "author": "Federico Ezequiel",
      "date": "Aug 31, 2022, 2:54:08AM",
      "content": "Hello,\n\nI am new in this, and i would like to know since I have a FMCW 24 GHz radar at work if is it possible to simulate this kind of radar (at this high frequency) with gprMax.\n\nThanks,\n\nFederico"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 31, 2022, 6:54:42AM",
        "content": "There is no maximum frequency limit. gprMax is an FDTD full wave solver. If FDTD as a numerical method fits your problem well then gprMax can be used. Depending on requirements and setup of your problem other methods might be better (e.g. MoM, TDIE, etc.) but this applies to all electromagnetic problems where a numerical solution is needed.\n\nHope this helps\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yhP0JFwZxQo",
    "title": "CompileError( pycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\25244\\AppData\\Local\\Temp\\tmpgvjck3sh.cu failed",
    "original_post": {
      "author": "王辰宇",
      "date": "Mar 3, 2025, 5:31:41AM",
      "content": "I met problems when running the gprMax on another PC and I don't know why. I tried running gprMax to produce an A-scan on the ternimal and it worked well. But when I tried running my code it occurred errors below. Here is what it looks like:\n\nException in Tkinter callback\n    kernels_fields = SourceModule(kernels_template_fields.substitute(REAL=cudafloattype, COMPLEX=cudacomplextype, N_updatecoeffsE=G.updatecoeffsE.size, N_updatecoeffsH=G.updatecoeffsH.size, NY_MATCOEFFS=G.updatecoeffsE.shape[1], NY_MATDISPCOEFFS=1, NX_FIELDS=G.nx + 1, NY_FIELDS=G.ny + 1, NZ_FIELDS=G.nz + 1, NX_ID=G.ID.shape[1], NY_ID=G.ID.shape[2], NZ_ID=G.ID.shape[3], NX_T=1, NY_T=1, NZ_T=1), options=compiler_opts)\n  File \"D:\\Dpanfilefoder\\pythonProject\\gprMax-master\\venv\\lib\\site-packages\\pycuda\\compiler.py\", line 349, in __init__\n    cubin = compile(\n  File \"D:\\Dpanfilefoder\\pythonProject\\gprMax-master\\venv\\lib\\site-packages\\pycuda\\compiler.py\", line 298, in compile\n    return compile_plain(source, options, keep, nvcc, cache_dir, target)\n  File \"D:\\Dpanfilefoder\\pythonProject\\gprMax-master\\venv\\lib\\site-packages\\pycuda\\compiler.py\", line 87, in compile_plain\n    checksum.update(preprocess_source(source, options, nvcc).encode(\"utf-8\"))\n  File \"D:\\Dpanfilefoder\\pythonProject\\gprMax-master\\venv\\lib\\site-packages\\pycuda\\compiler.py\", line 58, in preprocess_source\n    raise CompileError(\npycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\25244\\AppData\\Local\\Temp\\tmpgvjck3sh.cu failed\n[command: nvcc --preprocess -w -arch sm_86 -m64 -Id:\\dpanfilefoder\\pythonproject\\gprmax-master\\venv\\lib\\site-packages\\pycuda\\cuda C:\\Users\\25244\\AppData\\Local\\Temp\\tmpgvjck3sh.cu --compiler-options -EP]"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GUwPmgHT2Ao",
    "title": "How to input 3D model from Matlab",
    "original_post": {
      "author": "Yu LIU",
      "date": "Jan 25, 2019, 10:02:08AM",
      "content": "Hi experts,\n\nI hope you are doing well.\n\nI have constructed a 3D model using Matlab, and would like to simulate on gprMax. But it seems that,  the png-convertion tools can only input 2D or 2D-extended models. Also, I haven't thought of an idea by python script.\n\nIs there any good solution? Thanks in advance!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 25, 2019, 11:20:26AM",
        "content": "From MATLAB you could export to HDF5 following the format described in the docs - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read NB The format and structure of the matrix.\n\nThen import the HDF5 file as geometry to gprMax.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yu LIU",
        "date": "Jan 25, 2019, 12:06:18PM",
        "content": "Great thanks! Sorry for my carelessness in manual reading...\n\nHave a nice weekend!"
      },
      {
        "author": "Yu LIU",
        "date": "Jan 26, 2019, 1:30:52PM",
        "content": "The #object_geometry_read command is really great.\n\nYet I simulated a 3D stochastic model in Matlab like below, and the number of materials seem to be... really large...\n\n\n\nThen, could I ask about the built-in material Peplinski Soil, can I set it to be not dispersive? Thus I could directly use this kind of stochastic medium... :-)"
      },
      {
        "author": "Xuebing Zhang",
        "date": "Jan 26, 2019, 10:31:30PM",
        "content": "hi, Dear Craig and Yu Liu,\n\nI am also curious about the dispersity of the built-in material. Among the built-in materials, which one are dispersive, and which one are non-dispersive?\nThanks~\n\nXuebing"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 27, 2019, 6:59:48AM",
        "content": "Hi Xuebing,\n\nThe only non-dispersive material is a pure dielectric with frequency independent permittivity. All lossy materials are dispersive even if their properties are not frequency dependent. Frequency dependent material properties will cause velocity dispersion which might be or not evident depending on the frequency range and the type of frequency dependency. If materials are defined using a Debye model they are both frequency depended and will cause velocity dispersion at some frequency range. If materials are described with constant parameters will cause dispersion of they include conductivity but usually in much lower frequencies  than what GPR is operating for (not always! and only when conductivity is low!) \n\nSo, look at the definition of materials and then you can decide. Reading about the effects that material properties have on frequency domain concepts such are phase velocity and attenuation and propagation constants will clarify the above better.\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "Yu LIU",
        "date": "Jan 28, 2019, 7:51:27AM",
        "content": "So, is there a method that can input this kind of 3D stochastic media?    Reeealy thanks for that."
      },
      {
        "author": "Craig Warren",
        "date": "Jan 29, 2019, 7:33:22AM",
        "content": "You can do it according to my previous post, however you will end up requiring a large list of materials. This is inevitable unless you 'bin' some of your material values together to reduce the number of individually defined materials. The memory requirement becomes extremely large for FDTD if you have to define all material properties for every cell in the grid.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yu LIU",
        "date": "Jan 29, 2019, 9:19:48AM",
        "content": "Hi,\n\nThanks for your kind reply. I will consider more about it.\nHave a good day!\n\nRegards,\nYu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6T7m_MSHK8k",
    "title": "Processing time too long",
    "original_post": {
      "author": "tmgimgz",
      "date": "Oct 5, 2017, 7:14:09AM",
      "content": "Hi,\n\nWe are trying to simulate stepped frequency gpr, using gprMax. We generate the signal from Matlab script and import in our gprMax file. We managed to  obtain A scan and range profile, but we want to form a B scan also. In attachment, there are 2 files ( the imported signal and the script ). We want to utilize MPI, but the time we get is too long (2000 h).\n\nSystem specifications \nX550LD; 1 x Intel(R) Core(TM) i7-4500U CPU @ 1.80GHz (2 cores, 4 cores with Hyper-Threading); 7.68GiB RAM; Linux (4.4.0-67-generic, debian)\n\nWe run the script with the following command \npython -m gprMax gprmaxsfcw.py -n 60 -mpi 61 --geometry-fixed\n\nCan you suggest some solution ? \nThanks in advance.\n\nKind regards,\ntmgimgz"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 5, 2017, 8:53:12AM",
        "content": "Hi tmgimgz,\n\nWelcome to the forum!\n\nSimulating a stepped-frequency GPR system using FDTD is never going to be very efficient. What is the pulse shape that you are trying to use?\n\nThe principle reason for your model taking so long to run is the length of the time window you are using, 9e-5 seconds, which will result in ~19M iterations! Why do you need such a long time window? I understand that a longer time window will give better frequency resolution if you are doing a FFT.\n\nSecondly, the MPI task farm functionality is designed for a machine (typically a HPC) with many cores and nodes. Your machine has a mobile spec CPU with 2 cores, so there is no benefit in using MPI. Also the clock frequency is rather low (1.8GHz) which won't help either.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "tmgimgz",
        "date": "Oct 5, 2017, 9:25:35AM",
        "content": "Hi,\n\nThanks for the fast response :)\nFirst, the signal we are using is cosine steeped frequency waveform, with incremental frequency step (df) of 10 MHz ( there is a figure attach in this mail ).\n\nSecond, about the long time window. We constantly get this warring WARNING: Numerical dispersion analysis not carried out as either no waveform detected or waveform does not fit within specified time window and is therefore being truncated.  So, we thought that we will solve this by increasing the time. Our pulse length is 0.05e-6 (s) and T (period between pulses) is 0.1e-6 (s). We also have a train of 100 repetitions, giving us the time of 100*0.1e-6(s). We thought that this time is needed for the source to transmit the signal and the same time for the receiver to receive the signal. Thus, giving us time od 2* 100*0.1e-6(s) + propagation time .. we assume that this analysis is not correct because we still get the warrning.\n\nWe can change the CPU frequency to performance if that helps.\n\n\nThanks,\ntmgimgz"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 5, 2017, 11:52:42AM",
        "content": "Hi tmgimgz,\n\nIf I understand correctly what you are trying to do, I don't think this approach will work. To simulate a SF GPR you will need to run a separate simulation for each frequency step, you can't combine all the frequency steps into a single model. I think this is what you are trying to do? Hence, the long time window?\n\nHaving said that, there is a (advanced) workaround that can alleviate this problem but you need to have a good understanding of FDTD and take care when using it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 5, 2017, 12:34:15PM",
        "content": "Hi tmgimgz\n\nFDTD - which gprMax is based upon - is suited to time-domain problems and you are trying to simulate a frequency domain GPR process. The two are equivalent but a brute force time approach is not efficient as you have found out. One way to approach this is to use the 'impulse' excitation in gprMax (not documented) that creates an output due to a Dirac delta excitation. This needs to be treated cautiously (that is why is not documented !!!) as the response as it is is not useable unless further processed. If you convolve this response (use Python or MATLAB) with your forcing function (i.e. excitation pulse) You will get the same response as if you had run the model with this function. So, you can do things in post-processing faster in your case. \n\nThere are a number of pitfalls in this approach!!! You need to know what you are doing and you are going to have truncation errors as your impulse response might be too short or might not have died down sufficiently. You might need or want or have to use some windowing function etc. \n\nSo, approach with caution this feature and if you can use it to your advantage then it is good. Otherwise, you will find that a brute force approach will take forever as FDTD is not really designed to be used that way.\n\nHope this helps!\n\n\nAntonis"
      },
      {
        "author": "tmgimgz",
        "date": "Oct 6, 2017, 7:56:11AM",
        "content": "Hi, \n\nThanks for the ideas :)\n\nThere is file attached in this post with gprMax code. Although, this model does not take in concern the ( recommended ) settings for the PML region and the position of the elements in relation to the region, the output signal is identical as the one we import in the simulation (only different phase, but the waveform is the same). The problem is that after processing in matlab we don't get correct distance from the object and the ground (cross-talk).\n\nWhen we run the model attached in the first post, we get correct results ( 2 peaks, on correct positions ). To check the reflections, we ran the same model without cylinder, and we processed the output signal. As expected, we get only one peak ( the first peak from the original model ). When we subtract the aforementioned signals, we get only the second peak.\nWhat bothers us, is that this model ( correct PML and object positioning ), outputs weird signal ( nothing like the imported signal), but the results are correct.\n\n\nThe idea about running the simulation in multiple iterations ( changing the frequency only ) sounds great, but we need to automate that, because we have 100 pulses, plus we want B scan .\n\nAbout the idea with convolution .. You suggest to generate dirac delta function from matlab and to import in gprmax and run the simulation.. or there is build in dirac impulse in gprmax that we can use ( if so, please can you tell us the syntax for the impulse )\n\nThanks for the help,\ntmgimgz\n\np.s we run modified models with smaller time window .. i will report for results :)"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 6, 2017, 8:33:49AM",
        "content": "You need to use a waveform command and use 'impulse' as the excitation type. You need to specify a frequency but this is ignored internally.\n\nAntonis"
      },
      {
        "author": "tmgimgz",
        "date": "Oct 6, 2017, 10:00:25AM",
        "content": "Hi, \n\nThis is code example for A scan from the manual .. I only changed the waveform .. I get this error AttributeError: 'bool' object has no attribute 'ID'\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n#material: 6 0 1 0 half_space\n#waveform: impulse 1 1.5e9 ricker\n#hertzian_dipole: z 0.100 0.170 0 ricker\n#rx: 0.140 0.170 0\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\nThanks,\ntmgimgz"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 25, 2017, 12:07:01PM",
        "content": "Hi tmgimgz,\n\nThanks for spotting this. The 'dispersion analysis' function, which is designed to warn users of potential numerical dispersion in their simulation, was not handling the case where the impulse (Dirac delta) waveform was used. This should now be corrected if you update gprMax and pull the latest code from the master GitHub branch.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "tmgimgz",
        "date": "Oct 27, 2017, 3:38:20AM",
        "content": "Hi,\n\nThanks for your continuous and thoroughly support :)..we will definitely try the code in couple of days.\nI would like to mention that we succeeded to simulate models using the stepped frequency waveform and they look great. Maybe in future, we should chose different antenna type for obtaining more narrower radiation angle ( now we are using the dipole model, but it \"catches\" the object from long distance ). Can you suggest some existing antenna model with more narrower radiation angle ( the working frequency is between 10 MHz and 1 GHz ).\n"
      },
      {
        "author": "yan zhang",
        "date": "Aug 3, 2020, 10:52:35AM",
        "content": "Hi, tmgimgz,\n\nThanks for your post and your shared code. I am currently also working on simulating a SFCW radar. Could you please tell me how you finally managed to simulate the SFCW radar with gprMax? \nDid you use the impulse waveform and then do convolution or just put all the sine waves in a single excitation file?\n\nThanks,\nYan"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NnnmWM-B0m4",
    "title": "Begginers Question",
    "original_post": {
      "author": "Narayanarao",
      "date": "Aug 11, 2017, 1:21:04AM",
      "content": "hello everyone\ni have been using gprMax from two weeks.\ni am not clear about how to calculate time_window and no.of B_scans and is there any relation between these to domain size, receiver position, frequency etc.\nthanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 11, 2017, 10:27:18AM",
        "content": "Hi Narayanarao,\n\nWelcome to the forum! Have you looked at the Guidance on GPR modelling in the User Guide - http://docs.gprmax.com/en/latest/gprmodelling.html? Also the introductory example - http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder. These should help with some of your questions. Otherwise I recommend looking at some books on GPR and FDTD modelling.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Narayanarao",
        "date": "Aug 18, 2017, 6:30:15AM",
        "content": "Thanks criag,\nThe manual helped me a lot..\nI have one more question that can we plot depth instead of time and can we plot reflectivity instead of filed strength in B-Scan plot\n\nKind regards,\nNarayanarao"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 8:40:18AM",
        "content": "Narayanarao,\n\nYou can modify the script to plot B-scans for depth instead of time if you know the velocity. I don't understand what you mean by plotting reflectivity instead of electric field strength. Reflectivity is determined by the complex impedance of the different material(s).\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Narayanarao",
        "date": "Aug 18, 2017, 11:17:41PM",
        "content": "Thank you Craig for early response. I will work on that.\n\nKind regards,\n\nNarayanarao"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Wi183acuG7k",
    "title": "question about HDF5",
    "original_post": {
      "author": "xianyang gao",
      "date": "Dec 7, 2016, 9:38:23AM",
      "content": "Hi craig,\n\nWhen I exported my basic bowtie antenna simulation to hdf5 file using #geometry_objects_write command. I found four datasets: ID, data, rigidE, rigidH. I tried to look at gprMax code, but still cannot fully understand what information are stored in these four datasets. Can you please explain them to me briefly if you have time?\n  And It is really strange to see that although all the exported integers in ID is ‘1’, data is ‘1’, rigidE is ‘0’, rigidH is ‘0’(I have looked at every data carefully), I can still import them back to gprmax and a bowtie antenna is shown!\nThe material.txt is 0 for pec, 1 for free_space. I think maybe I neglect something.\n  This problem has bothered me for a long time.  Thank you very much for your time.\n\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 7, 2016, 12:26:49PM",
        "content": "Hi Xianyang,\n\nWelcome to the forum!\n\nThe datasets created in the HDF5 geometry file exported by gprMax (using #geometry_objects_write) are really for internal use and should not be manually modified, as you will easily break the geometry. It would take some time to explain what they all do. As I said in another post, if I get some time I plan to create a flowchart for the code which will give an overview of the different parts of the code and how they interact.\n\nFor advanced usage: If you want to create your own HDF5 geometry file to be read into gprMax (using the #geometry_objects_read command) read the notes in the User Guide at http://docs.gprmax.com/en/latest/input.html#geometry-objects-read It involves creating only a single dataset named 'data'.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lvBywLLlIZA",
    "title": "ploting Error in B_scan",
    "original_post": {
      "author": "RafalM",
      "date": "Jan 24, 2018, 5:50:57AM",
      "content": "Dear all,\nWhat does it means?\nModuleNotFoundError: No module named 'tools.outputdata'\nBest"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 24, 2018, 8:13:02AM",
        "content": "It likely means you have not typed the command correctly, as there is no such module. Follow the examples in the documentation carefully - http://docs.gprmax.com/en/latest/examples_simple_2D.html#b-scan-from-a-metal-cylinder\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Vu4F6BUAiHk",
    "title": "Power Spectrum",
    "original_post": {
      "author": "Davide Campo",
      "date": "Nov 7, 2017, 2:41:55PM",
      "content": "Dear all,\n\nI am a quite new user of gprMax.\n\nI built few simple models reproducing reinforced concrete or just concrete elements, but when I looked at the power spectrum I noticed that the frequency peak is slightly above (instead of below as I was expecting) the central frequency of the signal set.\n\nI checked that on the example file cylinder_Ascan_2D.in (removing the cylinder from the model) and also changing the medium from half_space to free space.\n\nWhy does that happen?\n\nThanks in advance"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 7, 2017, 5:26:19PM",
        "content": "Hi Davide,\n\nWelcome to the forum!\n\nIt depends on the waveform you are using for excitation. If you are using a 'gaussiandot' then the pulse is designed to have a peak frequency as specified. Small variations could be caused due to coarse frequency resolution in the frequency-domain that depends obviously on the length of the time window in the time-domain. The longer that is the finner the ability to resolve the peak in the frequency spectrum and not have energy leaking into adjacent frequency bins. \n\nThe effect of changing (usually lowering) of a GPR pulse's peak frequency from the original value at source is related to a number of things. Some of these relate to the antenna loading by the medium close to it (if you model the antenna structure) and some (more commonly discussed) to the absorption of higher frequencies from the pulse as it propagates in a lossy medium. There are specific conditions that this effect becomes important and more pronounced without changing significantly the pulse's shape (i.e. not having strong velocity dispersion). If your medium is low loss and obviously in free space, you should not see this effect. \n\nHope this helps and does not confuse matters further ...\n\nAntonis"
      },
      {
        "author": "Davide Campo",
        "date": "Nov 8, 2017, 3:01:56PM",
        "content": "Dear Antonis,\n\nthanks. My aim was to try to study the GPR response in the frequency-domain instead of the time-domain only starting with simple simulations and simple sources\n\nI used a Ricker wavelet with a time window of 8ns in two models taken modifying the example file \"cylinder_Ascan_2D.in\" modelling the source in free_space only and then in the half_space only\n\nI attached the command files I used and the spectra I got.\n\nThe peak frequencies extracted are 1590 for the half_space model and 1690 for the free_space model, but In some other model with higher frequency central pulse (2.0GHz) I got peaks at around 2.4GHz.\n\nSo is the reason just in the wavelet I used?  I tried one model with guassiandot wavelet and still the frequency peak is above the central frequency I set\n\nthanks again\n\nDavide"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 8, 2017, 5:30:17PM",
        "content": "Your frequency resolution is about 125MHz for a time window of 8 nanoseconds. The plot you see by the provided simple python plotting tool is a quick depiction of the spectrum and not all of it as the highest frequency (Nyquist) for your dt is a lot higher than the range of the plot which is reduced for convenience. So, every bin of the FFT has a width of 125MHz. If you want to analyze the signal in frequency domain you need to improve your frequency resolution by running the model for a lot longer in order to have a better resolution of the peak. Try 80 nanoseconds for an experiment or even longer. Obviously, doing proper signal analysis of the received signal in Python or MATLAB is the best way to have control over this process.\n\nAntonis"
      },
      {
        "author": "Davide Campo",
        "date": "Nov 13, 2017, 4:05:47AM",
        "content": "Thanks for your help. I was doing the analysis with Reflex software. I will try with longer time windows.\n\nDavide"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/0IdIX_fF5ac",
    "title": "How to change the antenna arrangement position",
    "original_post": {
      "author": "longxiang yao",
      "date": "Nov 4, 2024, 11:10:34PM",
      "content": "Dear GPRMAX team,\n I am a master's student. In GPRMAX, when performing 3D simulations, the rx command only allows the excitation or receiver antenna to rotate within the vertical plane. My question is how I can make the excitation antenna rotate around a specific point or axis, or how to rotate it in a custom manner as needed. I would greatly appreciate your assistance. Thank you!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 5, 2024, 10:20:30AM",
        "content": "Hi,\n\nI am not sure I understand exactly what you mean but here some information that might be helpful. The #rx: command in gprMax allows you to output the tie history of the E and H field components at a specific location in the model. They do not behave as real GPR antennas but are simplified \"theoretical\" proxies for them. As gprMax is an FDTD solver developed in Cartesian Coordinates these components are available along these axes (x,y,z) If you want to convert these to another direction you can but be aware that this conversion is only Ok if the material around these components is the same (i.e. you cannot do this without more thought and care on what you are doing when the components are on interfaces).  \n\nSometimes it is easier to rotate the target to form a specific angle you want with the orientation of your receiver than rotating the receiver. For hertzian dipole sources that is even more tricky to do.\n\nHope that helps!\n\nAntonis\n"
      },
      {
        "author": "longxiang yao",
        "date": "Nov 6, 2024, 4:10:50AM",
        "content": "Thank you very much for your reply!\n I think I may understand what you mean by rotating the subsurface target.\nHowever, we would like to further implement the three polarization-way corresponding acquisition methods in gprMax, namely, vertical-vertical polarization (VV), horizontal-horizontal polarization (HH), and vertical-horizontal polarization (VH). Is it possible to achieve this by controlling #rx or #Hertzian dipore commands?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 6, 2024, 6:04:24AM",
        "content": "The terms VV, HH and HV are used by people only because they do not understand what they are doing and borrow terms from other areas of radar and electromagnetics without knowing why. Your VV is actually better and more correctly referred to as  the broadside-perpendicular arrangement when the antennas are \"facing\" each other and the scan line direction is perpendicular to that arrangement. The HH is called the broadside - parallel arrangement which is the same as before but now the scan line direction is parallel to that arrangement. The other is just one way of a cross dipole arrangement. \n\nIn gprMax you can mimic all of them by using the right cartesian components. If your source is in the xy plane and in the y direction and the receiver is in the y direction and you are moving both in the x dimension then you are having your \"VV\" arrangement. If your source is in the x direction and the receiver is in the x direction and you are moving in the x direction you are having the HH arrangement. For the cross dipole your source and receiver need to be in opposite directions and the scan direction depends on what you want to image. For the cross dipole the symmetry is not exactly as in the image but to understand this you need to study how the model and FDTD works and not just use it as a back box.\n\nHope this helps\n\nAntonis \n"
      },
      {
        "author": "longxiang yao",
        "date": "Nov 7, 2024, 2:28:04AM",
        "content": "Thank you very much for your reply!\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CzdI8S8ez4c",
    "title": "PML in the near field",
    "original_post": {
      "author": "Hideaki Page",
      "date": "Dec 14, 2023, 4:35:17AM",
      "content": "Dear All,\n\nAre perfectly matched layers valid in the near field?\n\nI'm modelling a patch antenna. The geometry is flat so I wish the limit the size of the computational domain by wrapping the antenna in a closely fitting box. I then aim to model the far field by using the near field distribution on the surface of the bounding box.\n\nAs I understand, PML should have no reflection back into the model. However, the near field does not represent a simple propagating wave, so are the conditions for a PML still valid.\n\nHow far away from my antenna do I have to place the PML to have valid results.\n\nHideaki"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XQ-vqfDMTTg",
    "title": "Distance between transmitter and receiver in antenna models",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Jun 15, 2018, 4:33:35AM",
      "content": "Hi Craig,\n\nI will like to know the distance between the Rx and Tx bowties in the MALA and GSSI antenna models. I have gone through your thesis but I don't seem able to find these information\n\nThanks \nIkechukwu"
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Jun 18, 2018, 7:20:08PM",
        "content": "Hello Ikechukwu\n\nI think that the TxRx distances are the following:\n\nantenna_like_MALA_1200 --> TxRx distance = 0.076m\n\nantenna_like_GSSI_1500 --> TxRx distance = 0.059m\n\nantenna_like_GSSI_400  --> TxRx distance = 0.160m\n\nKind regards,\nDimitris"
      },
      {
        "author": "Ikechukwu",
        "date": "Jun 19, 2018, 10:17:14AM",
        "content": "Thanks Dimitris.\n\nCheers\nIkechukwu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7SuFuW-b1HU",
    "title": "Range profile extraction",
    "original_post": {
      "author": "richard s",
      "date": "Mar 2, 2021, 6:02:29AM",
      "content": "Hi, could I get a little bit of advice on the following?\nI would like to use gprMAX to create possible solutions to through-wall radar problems (for basic validation ).\nMy problem is how to create a range profile from gprMAX then process it further into a SAR image. Has anyone done this? Some advice would be appreciated, so far I understand that gprMAX is time-domain so I need to convert each Ascan into a frequency domain (complex number) then further process using my backprojection algorithm.\nTo keep the idea simple for now, the input would be an SFCW from 1-1.1GHz in 100 steps. So, would I be correct in saying that would be 100 Ascans? Then if I move through a synthetic aperture of let's say 5cm in 1cm steps that would be a Bscan collection of five sets.\n  My ideal eventual goal would be to classify simulated objects and validate vs real-world data I am in the middle of collecting.\nThank you"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 2, 2021, 8:33:36AM",
        "content": "You can do this in gprMax and you do not need to run 100 A-scans for every SF pulse as you can do this in post processing if you use an Impulse excitation that gives you the impulse response of the model. You need to understand what you are doing and how the FDTD works and the pitfalls involved if you do not this correctly but potentially you can do this without a lot of time wasted.\n\nSee this video for a bit of more detail\n\nhttps://youtu.be/_FWNeqTr9nc\n\nAntonis\n"
      },
      {
        "author": "richard s",
        "date": "Mar 2, 2021, 1:54:31PM",
        "content": "Thanks for the reply,\n\nwill go through the video suggested tonight. Then let you know how I progress over the next few days.\n\nThanks\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JEzMsddtPsM",
    "title": "Error of simulation results of anisotropic medium",
    "original_post": {
      "author": "Ying Huang",
      "date": "Apr 19, 2018, 9:00:14AM",
      "content": "Hello, professor.\n      I use gprMax3.0 to study the electromagnetic properties of the medium. My problem is, when I change the isotropic medium from the model to the anisotropic medium, the electromagnetic field in the receiving point has not changed in addition to the amplitude, and there is no polarization rotation. Why is it? I have passed my own model file and simulation structure diagram in the annex. I hope you can give me your answer in your spare time,thank you very much! \n\n         For your reference, attached are some files:\n         1. Model code- isotropic medium                       \n         2.Electromagnetic field result diagram - isotropic medium           \n         3.Model code -anisotropic medium           \n         4.Electromagnetic field result diagram - anisotropic medium\n\nThanks  for all the help.\nWish you have a good day."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 19, 2018, 11:20:40AM",
        "content": "Hi Ying,\n\nWelcome to the forum!\n\nI have had a quick look at your input files and output data, and your results seem reasonable. I would have expected to see increases in amplitude for the reflection from the surface of your material for the Ey and Ez components at the receiver for the anisotropic case. This is due to the increase in relative permittivity of the material in these directions compared to the isotropic case, and hence increased reflections coefficients. I don't know what you were expecting to see, or what you mean by 'polarisation rotation'. Perhaps you can clarify.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ying Huang",
        "date": "Apr 20, 2018, 3:32:48AM",
        "content": "Dear Craig,\n    I really appreciate you answering my question.\n        In theory, for anisotropic media, if the transmitting wave is  Z polarization, then the reflection wave  from the surface of my material should not only has Z polarization, but also X and Y polarization components, and for the isotropic medium, if the transmitting  wave is  Z polarization, then the reflection wave theoretically should  only have  Z polarization. But in my codes, the anisotropic results compared to the isotropic results, only have a difference in amplitude, however, there is no new polarization component such as Ex. I think this is not consistent with the theory. I hope to get your answer and thank you very much."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 20, 2018, 9:04:15AM",
        "content": "Hi Ying,\n\nYou assumption is not correct when dealing with sources that are not simple plane waves. A z-directed dipole source should only have a zero component at Hz (which within the limits of the computation it does). Especially as your receiver is at an offset you are going to have both x and y as the dipole source is on the xz plane. There is no plane wave source in gprMax yet to test the simple case you are referring to in your question. You need to be careful when you try to check the theory that determines the nature of a response that the test has the same assumptions both in terms of the development of the theory and of the model.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JMLWXpxjL6Y",
    "title": "2D and antenna orientation",
    "original_post": {
      "author": "Prodromos Nikolaidis",
      "date": "Jul 15, 2021, 8:17:29AM",
      "content": "Greetings all,\n\nI was wondering if it is possible to run a 2D simulation in gprMax using different antenna orientations? For reference regarding antenna orientations please see the following image:\n\n\nSpecifically, I want to do a comparison analysis between PR-BD and XPOL. I've managed to run successfully (?) both of these in 2D but the final output file of the XPOL simulation seems to have some sort of error. So I was wondering if it is possible to run an XPOL in 2D?\n\nThe source is Hertian dipole.\n\nCheers,\n\nProdromos\n\nNote: I've managed to make simulations for every antenna orientation as seen in the attached image with no problem when using a 3D domain - the problem seems to occur only in the 2D domain."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 26, 2021, 11:59:45AM",
        "content": "Dear Prodromos,\n\nYour Hertzian source in 2D is a line current in the invariant direction of the model. Also in 2D gprMax is simulating the tranverse magnetic (TM) modes, e.g. TMx, TMy, TMz, where the subscript denotes the invariant direction. Therefore by definition your source must be polarised in the invariant direction in 2D, i.e. if your model is TMz then your source must be z-polarised. What all this means, is that you can only really simulate your PR-BD mode in 2D, not the others, for which you need 3D.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "Prodromos Nikolaidis",
        "date": "Jul 26, 2021, 12:09:21PM",
        "content": "Dear Craig,\n\nThank you for the nice explanation.\n\nAll the best,\n\nProdromos\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6aU7uVVbjXU",
    "title": "Antenna excitation using voltage source",
    "original_post": {
      "author": "Rahul Choudhary",
      "date": "Aug 27, 2024, 1:30:45AM",
      "content": "Hello,\n\nI am trying to simulate a monopole antenna (operating frequency: 3GHz) in gprMax. I am using a sine wave. I have tried using both transmission line and a voltage source for antenna excitation. I am unable to excite the antenna. Please have a look at my gprMax code: \n\n#title: wire monoploe antenna model\n#domain: 0.110 0.110 0.058\n#dx_dy_dz: 0.0005 0.0005 0.0005\n\n#time_window: 5e-9\n\n\n#material: 2.1 0 1 0 teflon\n\n#waveform: contsine 1 3e9 sine_wave\n\n#voltage_source: z 0.05295 0.055 0.020 0 sine_wave\n#rx: 0.05295 0.055 0.020\n\n#snapshot: 0.020 0.055 0.01475 0.090 0.058 0.05475 0.001 0.001 0.001 2e-9 monopole_snap_vs\n\n#cylinder: 0.055 0.055 0.020 0.055 0.055 0.022 0.00266 pec\n#cylinder: 0.055 0.055 0.020 0.055 0.055 0.022 0.00205 teflon\n#plate: 0.010 0.010 0.020 0.100 0.100 0.020 pec\n#cylinder: 0.055 0.055 0.020 0.055 0.055 0.0435 0.000635 pec\n#edge: 0.05563 0.055 0.020 0.05705 0.055 0.020 free_space\n\n#geometry_view: 0 0 0 0.110 0.110 0.058 0.0005 0.0005 0.0005 monopole_3GHz_0.5mm n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 27, 2024, 9:14:55AM",
        "content": "Can you show us some geometry views? Particularly a fine one of the source/excitation region to check everything is connected.\n\nCraig\n\n"
      },
      {
        "author": "Rahul Choudhary",
        "date": "Aug 28, 2024, 12:36:02AM",
        "content": "Dear Prof. Craig,\n\nThank you for your reply.\n\nI have modeled an SMA connector, including the inner conductor, dielectric, and outer conductor. I have placed the voltage source in the dielectric between the inner and outer conductors. For your reference, I have attached a screenshot of the antenna geometry.\n\nThank you again for your guidance. \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6BHsUQ7Wm4g",
    "title": "Why the B-scan has two strange lines?",
    "original_post": {
      "author": "Zoey",
      "date": "Nov 25, 2019, 6:28:32AM",
      "content": "Hi everyone!\n\nI forwarded a model but the B-scan has two strange lines I don not know why. Will someone tell me please?\n\nThank you very much!\n\nZoey"
    },
    "responses": [
      {
        "author": "Kerem Ozkap",
        "date": "Nov 25, 2019, 8:04:52AM",
        "content": "Hi Zoey,\n\nThese reflections look like side reflections. If there is a free space on the right and left sides of the model, these reflections may occur.\n\nBest,\n\nKerem"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sEcR6CVIeQU",
    "title": "Two doubts: 1)Radiation pattern 2)source reference",
    "original_post": {
      "author": "Nicolás Zilberstein",
      "date": "Dec 20, 2018, 4:42:35PM",
      "content": "Hello,\n\nI have two questions:\n\n1)Why in the calculation of the radiation pattern, in the case of the E-plane, is it only used the theta component of the electric field? Isn't necessary to use the phi component? Is there a reference where i can find the explanation for this? This paper (https://www.sciencedirect.com/science/article/pii/S0926985113001511?via%3Dihub), which is cited in the gprMax guide, explain something but i don't understand.\n\n2)When i use the voltage source, where is the ground reference of the source? Because there is only one position that i have to specify in its command.\n\nIn my case, i have an antenna that have two faces, one with a microstrip line and the other with a ground plane, so i don't know how i have to connect the source (i.e., modelling the SMA connector).\n\nThanks,\nNicolas"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 3, 2019, 6:07:08AM",
        "content": "Hi Nicolas,\n\n1) I didn't author the paper you reference. However, if you look at the coordinate system given in Figure 2 of the paper to get the E-plane pattern of the antenna you need to investigate theta values from 0, 360 degrees, where phi is fixed at 90 (or 270) degrees. If you look at the transformation (Kraus,1991,Electromagnetics,p.34 is a example) from Cartesian to spherical coordinates you'll see that the E_theta component requires Ey and Ez values. \n\n2) The voltage source command specifies a voltage across a Yee cell. If it is used with zero resistance it is a hard source, i.e. replaces the E-field component at that location, or if used with some resistance it is a soft (or additive) source. Is the ground plane you refer to, the ground plane in the microstrip line? If so, then I think you should use a PEC box to simulate your ground plane. An image or sketch of what you are trying to model may help as assist you.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gqnw5tQaoOY",
    "title": "Propagation issue along metal wires created with box()",
    "original_post": {
      "author": "David Schriebman",
      "date": "Jun 8, 2021, 6:23:37PM",
      "content": "Hello,\n\nI am having an issue getting our gprMax simulation to propagate at all along a defined metal line that is representative of copper leads that feed a bowtie antenna.\n\nA--------V----\nA = antenna\nV = voltage source\n- = copper line\n\nRelevant code (simplified) is below:\n    define_material(\n        permittivity=1,\n        conductivity=59600000,\n        name='copper',\n    )\nfrequency=1e10\n  resistance=40,\n    pulseplus = waveform(\n        'gaussian',\n        amplitude=1.0,\n        frequency=frequency,\n        identifier='pulseplus',\n    )\n            voltage_source(\n                'z',\n                p.x,\n                p.y,\n                pmax.z-dp.z*15, (in the middle of the rx's so one voxel is excited)\n                resistance,\n                pulseplus,\n            )\n            for i in range(1, 20):\n                rx(\n                    p.x,\n                    p.y+dp.y,\n                    pmax.z-dp.z*11-dp.z*i, #creates rx's down the line\n                )\n        box(\n            p.x, p.y + (0.0 + 1*dp.y), p.z,\n            p.x+dp.x, p.y + (0.0 + 2*dp.y), pmax.z-dp.z*10,\n            'copper',\n            smooth_materials_txt,\n        )\nThe rx's are plotted (attached 2, one is of all rx, one is all rx less transmitter for fine detail of the other receivers) and only 1 has any substantial energy on it, for a short time when the excitation occurs.\nI've tried a lot of different variations on the above, and I'm not sure why the energy won't propagate out of the voxel it is created in when the energy is created in metal. When I create the energy in the air or other material type (add a tiny offset to x or y on the voltage source) it works fine, and propagates throughout the whole experiment, but this isn't representative of our apparatus.\nAny help would be appreciated, this must be something simple I am doing wrong, but I'm not seeing what.\nNext things to try: use edge instead of box for metal feeds. Expand wires to more than x:1,y:1 (this will have debilitating speed consequences if this is required)\n\nBest regards,\nDavid Schriebman"
    },
    "responses": [
      {
        "author": "David Schriebman",
        "date": "Jun 9, 2021, 3:05:09PM",
        "content": "\" Next things to try: use edge instead of box for metal feeds. Expand wires to more than x:1,y:1 (this will have debilitating speed consequences if this is required) \"\nNeither switching to edges or expanding the wires to 3x3 made it work.\nSo I'm stumped. I get no output at all using 'pec', and I get the output shown above using 'copper'. The only way I can seem to get reasonable output is by placing the excitation source next to the metal instead of inside it. But its reasonable for an excitation in air, its not reasonable for our physical apparatus, which programmably excites the copper.\n"
      },
      {
        "author": "David Schriebman",
        "date": "Jun 9, 2021, 4:35:28PM",
        "content": "Reducing the conductivity of copper from 59M (correct value) to 150K (incorrect value) produces approximately the right results, qualitatively. But this is supposed to be highly quantitative...\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 9, 2021, 5:19:02PM",
        "content": "Hi David,\n\nThe voltage source is a source model to be used in a gap, i.e. if you have copper wires (modelled as either edges or boxes) that are connected to the arms of the bowtie, then you must leave a gap from the voltage source to be in. I'm not clear if this is what you are doing or not? You can then model the wires and bowties with whatever you like, i.e. PEC or copper with a high conductivity.\n\nHave you had a look at the example antenna models (in user_libs) - particularly the ones like the GSSI 1.5GHz antenna or MALA 1.2GHz antenna, which are both bowties. That might help.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "David Schriebman",
        "date": "Jun 9, 2021, 7:46:06PM",
        "content": "Hi Craig,\n\nThank you for your response.\nI have looked through the GSSI and MALA antenna files extensively. They are much too large for our apparatus (we have very small antennas) so I needed to make our own. I did see that they were exciting inside a cavity, which I tried to replicate without much success.\nI previously had the voltage between the feeds as you were suggesting, but the results were looked incorrect. I just tried it again and it still looks quite incorrect. (We have a physical device we are comparing against).\nIs there any complication with having rx points inside the copper as I have done? Should they be outside the copper, like the voltage source?\n\nBest regards,\nDavid Schriebman\n"
      },
      {
        "author": "David Schriebman",
        "date": "Jun 9, 2021, 9:45:15PM",
        "content": "This is solved. Both voltage sources and rx points need to be in between objects.\nThe documentation for voltage_source that says \"allows you to introduce a voltage source at an electric field location\" is incorrect. The voltage source is not at an electric field location (x+dx/2, y+dy/2, z+dz/2), it is across spatial coordinates x,y,z and x+dx,y+dy,z+dz.\n\nBest regards,\nDavid Schriebman\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 10, 2021, 5:57:15AM",
        "content": "Hi David,\n\nThe voltage source and the current sources in a particular direction are introduced conceptually and mathematically and in the gprMax implementation at the spatial location of the electric field components. FDTD's fundamental concept is the arrangement of field components in a specific way to implement a digitised version of Maxwell's equations that need to be also balanced in time and space (i.e. all mathematical elements such derivatives, and curls to refer to the same point in space). Object properties are assigned at these locations and hence object building happens as a consequence of this which results to some conceptual issues especially when trying to model detailed structures. \n\nIn PEC metallic structures the electric field is zero and is applied as a boundary condition. In any high conductivity medium the end result will be the same as the electric field is practically zero as the skin depth will be tiny for metals. Obviously, you can study skin depth field penetration in metallic structures but then the resolution of the grid needs to be very fine to really capture this. Even for higher frequencies than GPR (10 - 20GHz) this still will apply. Also, in FDTD the fields are considered piece-wise constant along their cell edges and for the small volume they occupy. I do not know what you are trying to model but is also important to keep in mind that FDTD cannot model all components of a system without other modifications and often is no needed to get close to a good prediction. It can model the electromagnetic part well but the interface between the circuit parts and the radiating structure is not easy to model well unless enough resolution is available. \n\nHope this helps\n\nAntonis\n\n"
      },
      {
        "author": "David Schriebman",
        "date": "Jun 10, 2021, 2:14:32PM",
        "content": "Hi Antonis,\n\nThank you for your response. My suggestion would be to have the documentation match the description you just provided.\nOn the page http://docs.gprmax.com/en/latest/input.html for voltage_source, it says: \" Allows you to introduce a voltage source at an electric field location\". The word location is singular, and as such it is incorrect.\nIt should say: \"Allows you to introduce an idealized voltage difference across a gap in one dimension at the discretization of the simulation.\"\n\nBest regards,\nDavid Schriebman\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 10, 2021, 6:08:39PM",
        "content": "Hi David,\n\nWhat the documentation says is correct because this is what the code does. An Electric field location is the place where an Ex, Ey or Ez component belongs in the specific Yee cell which for the \"normal\" depiction of the Yee cell is an edge. As it refers to a point it is located half-way along this edge but obviously the assumption is that it does not vary along that edge. If that edge is a free space gap (i.e. has Er = 1) where as the adjacent edges are PEC or other metal you create a simple gap feed model to excite an antenna (there are other ways). Similarly a Hertzian dipole source is applied at the same position, when it is used as a simple antenna and not to feed a structure, and the transmission line source model couples into the 3D FDTD mesh in the same way at an electric field location. If the feed gap is longer than one edge or even wider  a number of voltage sources can be used together if you calculate the amplitude weightings and resistances correctly (this is left to the user) at the same time. That means your gap feed model does not have to be one Yee cell edge if your geometry demands this. What you propose to an extent it says the same thing but in a more limited way reflecting feeding in a specific way a radiating structure. However, in gprMax  you can use the voltage source model in different ways if needed and the simple definition on where is introduced in the FDTD grid is the best and correct way.\n\nHope this makes sense but in any case if you have found a way to make it work for your model then that is great and what it counts.\n\nBest\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KSSrdYYlrc0",
    "title": "how to automate the processing of N files?",
    "original_post": {
      "author": "Alex",
      "date": "Dec 21, 2016, 1:49:37AM",
      "content": "how can i realize command \"python -m gprMax current_i.in -n 60\" N-times for all files from folder?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 21, 2016, 6:22:07AM",
        "content": "Hi Alex,\n\nWelcome to the forum!\n\nIf you could explain more fully what kind of simulation you are trying to run, we could help, i.e. multiple A-scans to make a B-scan, multiple models that have different geometry etc....\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Alex",
        "date": "Dec 21, 2016, 6:34:20PM",
        "content": "multiple B-scan\nfor different distance between the sand boxes\n\n#title: B-scan\n#domain: 2.2 0.7 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5e-9\n#material: 1 0 1 0 air1\n#material: 9 0 1 0 sand1\n#material: 80 0 1 0 water1\n#waveform: gaussiandot 1 1.2e9 my_gaussiandot\n#hertzian_dipole: z 0.040 0.6 0 my_gaussiandot\n#rx: 0.4 0.6 0\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n#box: 0 0.5 0 2.2 0.6 0.002 air1\n#box: 0 0 0 0.2 0.5 0.002 air1\n#box: 0.2 0.1 0 1.0 0.50 0.002 sand1\n#box: 1.0 0.1 0 1.25 0.50 0.002 air1\n#box: 1.25 0.1 0 2.0 0.50 0.002 sand1\n#box: 2 0 0 2.2 0.5 0.002 air1\n#box: 0 0 0 2.2 0.1 0.002 water1"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 22, 2016, 5:12:43AM",
        "content": "Hi Alex,\n\nThere a few different ways of doing this depending on how experienced you are with Python and/or shell scripting (macOS/Linux).\n\n- Option 1: If you are using macOS or Linux, write a shell (usually bash) script to run the separate input files written for each B-scan.\n- Option 2: Use Python scripting in the input file to change the position of the sand boxes based on the 'current_model_run' variable. You can read more about Python scripting in the User Guide at: http://docs.gprmax.com/en/latest/python_scripting.html. For example, if there are 60 A-scans per B-scan:\n#python:\nif current_model_run <= 60:\n    box(0.2, 0.1, 0, 1, 0.5, 0.002, 'sand1')\nelif current_model_run > 60 and current_model_run <= 120:\n    box(0.3, 0.1, 0, 1.1, 0.5, 0.002, 'sand1')\n#end_python:\n...etc...You will then have to carefully combine groups of 60 A-scans into B-scans.\n\nIf you don't have many B-scans to create I'd suggest option 1.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Alex",
        "date": "Jan 12, 2017, 9:24:26PM",
        "content": "Can i use in gprMax some filters like \"Average subtraction\" or other to remove direct signal?"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 13, 2017, 5:53:45AM",
        "content": "Hi Alex,\n\nNot directly, our aim (at present) is to focus efforts on developing the simulator. We have used standard, open formats (like HDF5) so that you can use a variety of different tools to manipulate/process/analyse the output data from gprMax. For example you can use/adapt the Python loading/plotting tools or MATLAB scripts. For a background removal you can run a model with any targets removed, and then subtract this response from your results with the target.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EV85PLK6i4E",
    "title": "how to generate a geometry file",
    "original_post": {
      "author": "yong yang",
      "date": "Sep 15, 2016, 9:19:40AM",
      "content": "in command   #geometry_objects_file, we can define the geometry and material in different files,\n\nbut how the geometry file organized?\nin the docs and the source code, some instruction mentioned:\n f = h5py.File(geofile, 'r')\n        dx_dy_dz = f.attrs['dx, dy, dz']\n        if dx_dy_dz[0] != G.dx or dx_dy_dz[1] != G.dy or dx_dy_dz[2] != G.dz:\n            raise CmdInputError(\"'\" + ' '.join(tmp) + \"'\" + ' requires the spatial resolution of the geometry objects file to match the spatial resolution of the model')\n        data = f['/data'][:]\nbut I don't understand  how the 'data' organized, especially when I want to generate a polygon, how the vertex store in the 'data' dataset.\nthank you!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 16, 2016, 6:52:48AM",
        "content": "Dear Yang,\n\nThe docs http://docs.gprmax.com/en/latest/input.html#geometry-objects-file contain information on how the HDF5 file, to be used with the #geometry_objects_file, should be formatted. Specifically see the notes section. The geometry is specified using a 3D array of integer numbers (named data) stored in a HDF5 file. Each element of the data array represents a FDTD cell. The integer numbers must correspond to the position of a list of #material commands specified in a text file.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "yong yang",
        "date": "Sep 16, 2016, 12:27:43PM",
        "content": "Dear Craig\n\ndos that mean I need to define every point of the geometry on the cell.\nfor example:\n#domain is 0.4 0.4 0.4\n#dx_dy_dz: 0.004 0.004 0.004\nif I want to define a box with leftlower(0,0,0) and righupper(0.4,0.4,0.4)\nthen create the geometry file\nimport h5py\nimport numpy as np\nf=h5py.File(\"test.hdf5\",\"w\");\nf.attrs[\"dx, dy, dz\"]=[0.004,0.004,0.004]\nn=np.array([[0,0,0],[100,0,0],[100,0,100],[100,100,100],[100,100,0],[0,100,0],[0,100,100],[0,0,100]]);\ndset=f.create_dataset(\"data\",n,dtype='int16')\nin the material file\n#material: 1 0 1 0 Air\nIs that correct? some error with change turple to hsize\nthank you again.\n\nby the way, snapshot command will be error in the newest version with line 127 self.filehandle.write(pack('I', datasize)) in snapshot.py\nthe old version is ok.\n\nBest regards\nYang"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 16, 2016, 12:49:27PM",
        "content": "Dear Yang,\n\nThanks for spotting the bug with the snapshots, it is now fixed in the master branch.\n\nThe attribute of the HDF5 file that specifies the resolution of the geometry object should be a tuple of floats (see the notes section in the docs). Each element of the NumPy array, in your case, represents a 4mm FDTD cubic cell. The contents of the cell should contain an integer which refers to the position of a material in the list in your materials file. So, in your case, you only have air, so you could only use the integer zero in your NumPy array.\n\nPerhaps if you explain what you are trying to model I can better help.\n\nCraig"
      },
      {
        "author": "yong yang",
        "date": "Sep 17, 2016, 8:51:55AM",
        "content": "Dear Craig\n\nGprMax is  a great work and help me a lot, thanks again.\n\nAs I menthioned in the github, orignally I wanted to sim in a rough surface of concrete with the command #add_surface_roughness, but there were bugs(already fixed), so I wondered whether or not the command  #geometry_objects_file could generate the rough surface.\n\nNow the fixed command #add_surface_roughness works and realizes this function, but it is still not satified with my demand very well. For example, a rebar with fixed cover depth exists in the concrete, if using the command #add_surface_roughness, the cover depth will change. So I still want to create a polygon for concrete and a rebar with fixed cover depth by mannual.\n\nBest regards\nYang"
      },
      {
        "author": "Aleksandr",
        "date": "Sep 17, 2016, 9:33:28AM",
        "content": "Dear Yang, I used following Python script to convert .png image to gprMax geometry object. Hope this will help"
      },
      {
        "author": "yong yang",
        "date": "Sep 17, 2016, 10:49:59AM",
        "content": "Dear Aleksandr：\n\nI misunderstand the docs. It defines the material on the Yee cell. One parameter on one cell.\n\nThank you very much.\n\nBest regard\nYang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/A2EB-93cQZk",
    "title": "Modeling a metallic plate",
    "original_post": {
      "author": "calles...@yahoo.com",
      "date": "May 13, 2017, 8:55:53PM",
      "content": "Hi All:\n\nIs there a way to model a metallic plate?  In general, I'm interested in modeling thin layers and would like to determine the reflection coefficient by normalizing with the reflection from a metal plate.  In 2-D mode, I tried to include a box within a larger half space, and used \"pec\" in the material command, but this didn't work.  Is pec only used in the cylinder statement?\n\nAny information is appreciated.\n\nThanks,\n\nBrian"
    },
    "responses": [
      {
        "author": "calles...@yahoo.com",
        "date": "May 13, 2017, 10:08:32PM",
        "content": "Hi All:\n\nIgnore my previous post.  I see my error.  For the box command, the pec is entered directly without needing to define a separate material.\n\nNew user...sorry!\n\nGreat code, nice job.\n\nBrian"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 14, 2017, 7:19:34AM",
        "content": "Hi Brian,\n\nHope you will find gprMax useful for your work.\n\nTo further clarify the 'pec' material means Perfect Electric Conductor. The behaviour for a 'pec' in gprMax as in other FDTD codes, is a boundary condition. gprMax sets the Electic field to zero on a 'pec'. This does happen in most metals to a very good approximation for GPR modelling etc. You can create materials with the properties of metals that usually have extremely high conductivity. However, if you properly want to model propagation inside (i.e. skin depth etc.) then your model resolution needs to be very fine. From simple reflection for GPR calibration purposes using a 'pec' should be fine.\n\nBest\n\nAntonis"
      },
      {
        "author": "Yekuaraw",
        "date": "Jan 24, 2018, 7:42:11AM",
        "content": "Hi\nI am new user too and i need help.\n\nI am interested to build three layer with different material with in a box\n1. Is that possible on gprmax? if it is possible would you mind give me some hint how am going to?\n2. I tried to view 3d picture on paraview from usermodel, it showed me that only box. I dont know how to view inside material? pls help me\n\nThanks"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 24, 2018, 8:14:53AM",
        "content": "You should find all the information you need in the user guide to create a model with 3 layers of different materials. Follow the section on viewing the geometry in Paraview (in particular pay attention to installing and using the macro) - http://docs.gprmax.com/en/latest/output.html#geometry-output"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/drsZxj6oI9E",
    "title": "Simulation Results Scaling with Grid Size",
    "original_post": {
      "author": "Ismael Xique",
      "date": "Nov 28, 2016, 9:38:46AM",
      "content": "Hello! Thanks for the quick response from before. I have run several simulations and it seems to me that the signal returned scales with the grid size. For example, when I run a model with grid resolution of 0.002 (m) and then run the model at 0.005 (m) then the amplitude of the signal after self-response removal grows by a factor of 2.5. The same is true after I run the model with 0.002 and 0.0025 except the scaling factor of the signal is now 1.25. This seems a little strange because the values used in the second example both fall within the range of lambda/10 as recommended, so I believe that this scaling behavior should not be occurring any longer. Any explanation for this behavior would be greatly appreciated. I have attached a set of files I have been working with. The models have a single object in free space with one transmitter and multiple receivers spaced 0.1 (m) apart. The files with selfResp in the title run the model without a target to simulate the self response which is then simply subtracted.  I have also posted an image with the simulation results from the attached files which show that the amplitude scales by a factor of 2 when changing grid resolution from 0.0025 to 0.005 (m). Thank you for your help!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 30, 2016, 10:38:50AM",
        "content": "Hi Ismael,\n\nThe short answer is that this is expected behaviour. I'll try and explain why...\n\nWhen you use a #hertzian_dipole source gprMax sets the length of the Hertzian dipole (dl) to the length of the cell in the polarisation direction of the dipole, and you get a dipole moment, i.e. I * dl (current multiplied by Hertzian dipole length). So, by only changing the spatial resolution of your model you are specifying a different source (dipole moment) in each, and hence getting differently scaled results. This behaviour is documented in the User Guide (http://docs.gprmax.com/en/latest/input.html#hertzian-dipole) but it could be made clearer. I'm going to work on this! So to use the same #hertzian_dipole source with models that have different resolutions you must adjust the scaling of the maximum amplitude of the waveform (http://docs.gprmax.com/en/latest/input.html#waveform) you are using, e.g. if you are using a 1mm cubic grid with a scaling of 1, then when you move to a 2mm cubic grid you must set the scaling to 0.5, which means the same dipole moment is being used in both models.\n\nHope this is clear.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ismael Xique",
        "date": "Nov 30, 2016, 5:18:28PM",
        "content": "Hello Craig,\n\nThis makes perfect sense. Thank you so much for your help!\n\n-Ismael"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KJiRMSLncIw",
    "title": "the maximum frequency",
    "original_post": {
      "author": "ben khalifa Montassar",
      "date": "Oct 16, 2017, 9:26:28AM",
      "content": "Hi,\n\nI want to ask about the maximum frequency\n\nHow to choose the center frequency of a signal (eg gaussian, ricker..)\nto obtain the same maximum frequency‌ at a level -40dB.\n\n\nKind regards,\nBen Khlifa"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2017, 5:11:10AM",
        "content": "Hi Ben,\n\nI don’t really understand your question. The centre frequency of your waveform is usually chosen on the basis on the GPR antenna/system you are trying to simulate.\n\nTo perform an analysis of potential numerical dispersion in your model you need to approximate the maximum frequency present, which is not the centre frequency. A good approximation for the maximum frequency is to take the frequency at which the power has dropped 40dB from the maximum.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "ben khalifa Montassar",
        "date": "Oct 22, 2017, 10:01:30AM",
        "content": "Hi Mr.Craig\nEverything goes well, If I did use the gpprMax v3.0.12. But, when i updated to the latest version (gprMax v.3.1.1 (Big Smoke)), i had a problem of the maximum frequency.\nThank you in advance for your assistance with this.\nsincerely\nBen khalifa"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2017, 12:17:17PM",
        "content": "Hi Ben,\nYou have numerical dispersion in your model. The docs provide a very basic description - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretisation but you need an understanding of this (and how to mitigate it) before proceeding.\nWe have a method that tries to detect potential numerical dispersion and warn you of this. In version 3.0.12 the warning is not reported correctly (you see a NaN), but v.3.1.1 gives you the correct warning.\nKind regards,\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/uxB2sj7XCtY",
    "title": "Geometric path loss in near field and far field",
    "original_post": {
      "author": "Zoe",
      "date": "Jul 3, 2019, 5:43:26PM",
      "content": "Hi, I am trying to calculate geometric path loss from the simulation. I use a simple hertzian dipole antenna and also consider the time delay of the incident waveform. \n\nHowever, in far field (distance between tx and rx is from 1 to 2.6 m), the relationship between the received maximum amplitude and the distance cannot be perfectly fitted by Amplitude=a/distance. It is better to be fitted by Amplitude=a/distance+b or Amplitude=a/(distance^0.5). In nearer distance (around 0.3-1.0 m), the relationship can also be better fitted by Amplitude=a*distance^b, where b is usually around 0.5. \n\nCould you please explain this? My input file is as follows.\n\n\n#domain: 1 3.2 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 12e-9\n\n#waveform: ricker 1 1.71e9 myricker\n\n\n#python:\nfrom gprMax.input_cmd_funcs import *\nimport math\nhertzian_dipole('z',0.5,1.3+(current_model_run-1)*0.02,0,'myricker')\nrx(0.5,0.3,0,'r1','Ez')\n#end_python:\n\nThanks in advance!\n\nRegards,\nZoe"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 15, 2019, 6:24:02AM",
        "content": "Hi Zoe,\n\nYour model is 2D, so your Hertzian dipole source is a line source (it would be a point source if the model were 3D). Therefore, I would expect amplitudes in the far-field to decrease with 1/sqrt(r). Your distances from the source begin at 1m so all results (from this input file) will be far-field (>>2lambda), where lambda = 0.1754m.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lBS_4fNNI4g",
    "title": "Why did I spend a lot of time when collecting multiple data? Is there any way to reduce the time it takes to collect data?",
    "original_post": {
      "author": "jie wang",
      "date": "Apr 20, 2017, 11:25:43PM",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 21, 2017, 3:24:20AM",
        "content": "Hi Jie,\n\nIf you mean collecting A-scans together to form a B-scan, then see: http://docs.gprmax.com/en/latest/utils.html#outputfiles-merge-py\n\nAlso take a look at the simple examples which demonstrate how to do this: http://docs.gprmax.com/en/latest/examples_simple_2D.html#b-scan-from-a-metal-cylinder\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fIHB1eOzeHw",
    "title": "ADD NOISE",
    "original_post": {
      "author": "ABEEDA SHAH",
      "date": "Mar 29, 2017, 3:31:58PM",
      "content": "HI,\nI am doing a critical analysis on techniques to segment out hyperbolas for cylindrical objects underground. For that i need some noise like straight lines or anything underground  that do not make a hyperbola with gpr. is there any geometry that i can include in my model for noise? rx7 is my result for 3 buried cylinders to which i want to add some noise(any shape that do not give a hyperbola).\n\nINPUT FILE\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 5 0.800 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 15e-9\n#material: 3.0 0.00001 2.0 0.01 dry_sand\n#waveform: ricker 1 1e9 my_ricker\n#hertzian_dipole: z 0.040 0.760 0 my_ricker\n#rx: 0.080 0.760 0\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n#box: 0 0 0 5 0.760 0.002 dry_sand\n#cylinder:  1.50 0.500 0 1.50 0.500 0.002 0.05 pec\n#cylinder:  3.00 0.250 0 3.00 0.250 0.002 0.100 pec\n#cylinder:  4.00 0.100 0 4.00 0.100 0.002 0.200 pec"
    },
    "responses": [
      {
        "author": "Hugo Day",
        "date": "Mar 31, 2017, 11:48:39AM",
        "content": "What type of noise do you mean? If EM noise, maybe it'd be easier to add to the output signal? i.e. take the output fields and add random noise. For object noise maybe something like a wooden (defined by electrical permitivitty) plate or box above the surface will cause attenuation etc.\nSome examples:\nhttps://www.quora.com/What-is-the-standard-way-to-add-noise-signals-in-Python\nhttp://dsp.stackexchange.com/questions/25119/generating-a-noisy-sine-wave-in-python-efficiently"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hhGviEdaiGQ",
    "title": "Subgrid option for complex model",
    "original_post": {
      "author": "Rahul Choudhary",
      "date": "Nov 15, 2024, 1:27:02AM",
      "content": "Dear gprMax team,\n\nI am working on designing an antenna which needed fine grid which drastically increases the computational time for my gprMax simulations. I request you to allow me to become a beta tester for your V4.0 which has subgrid option. \n\nThanks & regards,\nRahul Choudhary"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 15, 2024, 8:01:44AM",
        "content": "Hi Rahul,\n\nThank you for your offer. It will be really nice if you can do this and let us know how it works. Please note that a sub grid can never be exactly as accurate or transparent as one grid. There is always some error in connecting the two grids and this cannot be avoided irrespectively of the method used to create a sub grid. However, some cases will be better than others. Stability can also be an issue when using a sub grid. I will suggest to start from simple cases and then progress to more complex and see how it works. Hopefully it will be useful for your application. \n\nAny advice or bugs or examples we can use to help others using it or to improve it are very welcome as well.\n\nBest of luck with your testing and thanks for doing this!\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bvnn-1MujsM",
    "title": "Horn Elliptical Antenna unicode error 'unicodeescape' Basic .IN files in gprMax",
    "original_post": {
      "author": "Diego Osorio",
      "date": "Jul 23, 2021, 12:19:16PM",
      "content": "Hello dear Drs Craig, Antonis and community,\n\nI am currently working with a Horn Elliptical basic Antenna which I am trying to simulate in gprMax and check its geometry in Paraview. My .IN file is the following:\n\n\n#title: Antenna Elliptical import from ANSYS SAT file to hdf5 file gprMax\n#domain: 0.08382 0.08382 0.08991\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 5e-9\n\n#material: 250000 58.7 0.9999 1\n\n#python:\nfrom user_libs.construccion import satlib\nsatlib( \"C:\\Users\\VivoBook\\Documents\\AUXILIAR DOCUMENTOS\\Talleres\\Taller 1 Antenas\\WORKSPACE\\SAT files\\HORN ELLIPTICAL\\SAT_HORN_ELLIPTICAL.sat\", [0.08382 0.08382 0.08991] , [0.001 0.001 0.001])\n#end_python:\n\n#geometry_view: 0 0 0 0.08382 0.08382 0.08991 0.001 0.001 0.001 elliptical_antenna n\n\n\nThe satlib converts .SAT files into hdf5 integer package files in python\nI attach the error message received from Miniconda console.\n\nThanks a lot !!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 26, 2021, 11:51:33AM",
        "content": "I suspect it is the back slashes '\\' in your path. Try converting them to forward slashes '/'.\n\nCraig\n\n"
      },
      {
        "author": "Diego Osorio",
        "date": "Jul 29, 2021, 10:52:26PM",
        "content": "Thanks Dr Craig, it worked.\nI am currently trying to test my code that transforms .SAT files into .HDF5 geometry files. I debugged my python code and it seems to be working fine. The .py script basically creates a python dictionary o type List of 'Points' and 'Surfaces' from the .SAT file, and then constructs the HDF5 geometry file.\n\nUnfortunately I haven't been able to run the code. I am getting the following error:\n'module' object is not callable. I would really appreciate your opinion. I attach the error received in Miniconda prompt and the geometry of the box with which I am trying to visualize using gprMax. I have tried it with other solids but I get the same error.\n\nThanks a lot!  \n\n \n\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2021, 9:53:40AM",
        "content": "It may still be a path error. Try placing the HDF5 file you are trying to import at a location with a path that does not include spaces.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vDwKb1SzPXQ",
    "title": "calculate_waveform_values",
    "original_post": {
      "author": "Armando Schneider",
      "date": "Nov 5, 2024, 12:36:04PM",
      "content": "Hello gprMax Team,\n\nI’ve developed an optimized version of the calculate_waveform_values function, which I’ve attached for your review.\n\nThe original version of the code (commented in the attachment) is slower due to its use of a loop to iterate over each timestep (for iteration in range(G.iterations)), which can become computationally intensive, especially when G.iterations is large.\n\nIn my case, when injecting 60,000 Hertzian dipole sources simultaneously into the simulation domain, the simulation itself only takes 30 minutes; however, loading the sources can take up to 1 hour and 30 minutes—an unexpectedly high amount of time.\n\nThe new version leverages Python vectorization, reducing the source-loading time from 1h30 to approximately 20 seconds. I have used the np.allclose function to verify that the results are identical within machine tolerance.\n\nI would be pleased to contribute this improvement to gprMax.\n\nBest regards,\nSchneider\n\n#################\n    def calculate_waveform_values(self, G):\n        \"\"\"Calculates all waveform values for source for duration of simulation.\n\n        Args:\n            G (class): Grid class instance - holds essential parameters describing the model.\n        \"\"\"\n\n        # Waveform values on timesteps\n        self.waveformvalues_wholestep = np.zeros((G.iterations), dtype=floattype)\n\n        # Waveform values on half timesteps\n        self.waveformvalues_halfstep = np.zeros((G.iterations), dtype=floattype)\n\n        waveform = next(x for x in G.waveforms if x.ID == self.waveformID)\n\n        # # ----- Original code (start) -----\n        # for iteration in range(G.iterations):\n        #     time = G.dt * iteration\n        #     if time >= self.start and time <= self.stop:\n        #         # Set the time of the waveform evaluation to account for any delay in the start\n        #         time -= self.start\n        #         self.waveformvalues_wholestep[iteration] = waveform.calculate_value(time, G.dt)\n        #         self.waveformvalues_halfstep[iteration] = waveform.calculate_value(time + 0.5 * G.dt, G.dt)\n        # # ----- Original code (end) -----\n\n        # tmp1 = self.waveformvalues_wholestep\n        # tmp2 = self.waveformvalues_halfstep\n\n        # ----- Optimised code (start) -----\n        valid_range = (G.dt * np.arange(G.iterations) >= self.start) & (G.dt * np.arange(G.iterations) <= self.stop)\n        valid_indices = np.where(valid_range)[0]\n        times = G.dt * valid_indices - self.start\n\n        self.waveformvalues_wholestep[valid_indices] = waveform.calculate_value(times, G.dt)\n        self.waveformvalues_halfstep[valid_indices] = waveform.calculate_value(times + 0.5 * G.dt, G.dt)\n        # ----- Optimised code (end) -----\n\n        # tmp3 = self.waveformvalues_wholestep\n        # tmp4 = self.waveformvalues_halfstep\n\n        # # ----- Check if the two methods give the same results -----\n        # if np.allclose(tmp1[valid_indices], tmp3[valid_indices]) and np.allclose(tmp2[valid_indices], tmp4[valid_indices]):\n        #     print(\"Match\")\n        # else:\n        #     raise ValueError(\"The two methods do not give the same results\")"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 5, 2024, 3:28:35PM",
        "content": "Hi Armando,\n\nThanks for this. Vectorising always makes sense but we never thought that someone will use some many sources at the same time! In any case it makes sense to be faster even for one source and happy that you have found a solution to your problem.\n\nBest wishes\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wTFxOur_tdI",
    "title": "porous media",
    "original_post": {
      "author": "Roshan",
      "date": "Mar 22, 2019, 3:17:52AM",
      "content": "Hi\nIs there a way to create a layered porous media in gprmax. I wanted to study the propagation of em wave inside a porous layered media with different pore size (micron) and different density.\nThanks\nRoshan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 22, 2019, 7:59:53AM",
        "content": "Hi Roshan,\n\nYou will need a model to relate density, porosity etc... to electromagnetic properties. We currently have a soil model (http://docs.gprmax.com/en/latest/input.html#soil-peplinski) which can be used with fractals to create a heterogeneous, dispersive, layered soil (http://docs.gprmax.com/en/latest/input.html#fractal-box). Also see the example in the docs - http://docs.gprmax.com/en/latest/examples_advanced.html#building-a-heterogeneous-soil You can also create your geometry and materials outside of gprMax and import using the geometry_objects_read command (http://docs.gprmax.com/en/latest/input.html#geometry-objects-read). \n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OXEdfaMd7BM",
    "title": "Antenna polarization",
    "original_post": {
      "author": "Hussain Mumtaiz",
      "date": "Dec 16, 2020, 3:00:50AM",
      "content": "Dear Devloper;\nI would like to know the type of the polarization used on the gprMax.\nhussain"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Dec 17, 2020, 6:45:01PM",
        "content": "Hussain,\n\nIts up to you to set it.\nyou can find this in the documentation\nhttp://docs.gprmax.com/en/latest/input.html\nunder the section sources and output command\n\nwould you preferer a more realistic antenna, here too the documentation is your friend\nhttp://docs.gprmax.com/en/latest/user_libs_antennas.html\nand\nhttp://docs.gprmax.com/en/latest/examples_antennas.html\n\nBest regards\n\nChristian\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NQnZ8v5SXyI",
    "title": "fractal model",
    "original_post": {
      "author": "jamaledin baniamerian",
      "date": "Mar 6, 2023, 6:54:34AM",
      "content": "Hello\nIF it is possible to create a fractal model not using Peplinski model?\nFor example using Debye formula directly?\nRegards\nJamaledin"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 7, 2023, 1:40:03PM",
        "content": "Dear Jamaledin,\n\nAt the moment the fractal box can only be used with the Peplinski soil mixing model. In principle it could be applied to other mixing models such as CRIM. However, I don't understand what you mean by using it with the Debye model directly? Please explain.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "jamaledin baniamerian",
        "date": "Mar 8, 2023, 6:00:28AM",
        "content": "Thank you very much. \nIn fact, I am trying to generate a fractal model in which the loss tangent is almost constant versus the frequency band used by gprMax (e.g., 0.5-1.5) when the centroid frequency of transmit pulse is 1 GHz. But, the presence of water impacts the loss of tangent and causes a large variation. In addition, in my case, the relaxation term of loss is of interest.\nRegards\nJamaledin\n"
      },
      {
        "author": "Brad Artman",
        "date": "Mar 8, 2023, 12:54:41PM",
        "content": "I too am frustrated in fractal boxes only available with Peplinski models.\nI would like a base case where a #box: concept with an associated #material: of constant parameters can be awesomized by #fractal_box:\n\n"
      },
      {
        "author": "Shikhar Sharma",
        "date": "Jun 23, 2023, 5:58:03AM",
        "content": "did you got anything to deal with ?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 23, 2023, 6:10:21AM",
        "content": "The new updated version of gprMax that is close to completion has functionality to deal with this.\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/caCGiejdeTw",
    "title": "GprMax by using Matlab",
    "original_post": {
      "author": "amit sarkar",
      "date": "Jun 21, 2017, 6:13:33AM",
      "content": "Guys could you please help me to share how to use complete gprMax features by using only matlab? I mean each and every feature, without depending on Python."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 21, 2017, 6:50:04AM",
        "content": "Hi Amit,\n\nHave you developed MATLAB scripts for gprMax and you want to share them?\n\nBest\n\nAntonis"
      },
      {
        "author": "amit sarkar",
        "date": "Jun 21, 2017, 9:07:46AM",
        "content": "Actually sir its the opposite. I wanted to know if I can use MATLAB to perform all the functions of gprMax."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 21, 2017, 9:35:20AM",
        "content": "Hi Amit,\n\nIn this case, the answer is No. There is a MATLAB script that allows you to upload HDF5 output data from gprMax to MALTAB but there is nothing else to allow you to create input files etc. in MATLAB. There are some tools under development by other researchers that might become available at some point but not by us. \n\nGood luck\n\nAntonis"
      },
      {
        "author": "amit sarkar",
        "date": "Jun 21, 2017, 10:48:52AM",
        "content": "Sir is there any updates regarding GprMax2d and Gprmax3d exe files for V3?"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 21, 2017, 10:51:10AM",
        "content": "Hi Amit,\n\nThe old version of GprMax that has two different codes for 2D and 3D is obsolete and not maintained anymore. I think you can still download it from our website but I STRONGLY RECOMMEND to use the new version. \n\nAntonis"
      },
      {
        "author": "amit sarkar",
        "date": "Jun 21, 2017, 10:54:30AM",
        "content": "Yes sir I am telling that is there gonna be any new codes for 2D and 3D for latest version?"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 21, 2017, 11:00:35AM",
        "content": "Amit,\n\nThe new version can already do 2D and 3D. Please look at the detailed documentation that is available online.\n\nAntonis"
      },
      {
        "author": "Amit Sarkar",
        "date": "Jul 4, 2017, 10:24:40AM",
        "content": "Sir is there any other way to view geometry files other than using paraview?"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 4, 2017, 11:55:31AM",
        "content": "The geometry files use the Visualisation Toolkit (VTK) format which is open-source - http://www.vtk.org We recommend using Paraview it is free and what we use.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Amit Sarkar",
        "date": "Jul 6, 2017, 12:20:49AM",
        "content": "Sir could you please explain how to get the number of Ascans required for constructing a Bscan?"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2017, 5:12:53AM",
        "content": "Hi Amit,\n\nThe number of A-scans that compose a B-scan is entirely up to you to set according to the problem you are trying to simulate. For example, you may set the number of A-scans per B-scan to give the same inline spacing (i.e. A-scan every so many metres) that you may use with your actual GPR system. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Amit Sarkar",
        "date": "Jul 12, 2017, 6:38:06AM",
        "content": "Sir could you please guide me as to how to make a Bscan from gprMax? Specifically how to find the adequate number of A scans required to completely represent a B scan."
      },
      {
        "author": "Craig Warren",
        "date": "Jul 13, 2017, 10:00:08AM",
        "content": "Amit,\n\nSee my previous answer on the number of A-scans to use for a B-scan. For an example of how to compile the A-scans into a B-scan with gprMax see the examples in the docs - http://docs.gprmax.com/en/latest/examples_simple_2D.html#b-scan-from-a-metal-cylinder\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Fdyt9hKcGKU",
    "title": "beginner question",
    "original_post": {
      "author": "Yang",
      "date": "Feb 24, 2016, 6:43:45PM",
      "content": "Hi gprmax-users,\n     I am a gprmax beginner, I want to check wire dipole antenna performance locates at the interface of two different materials. I modify the codes from the user_model file and meet one problem. May I ask some questions about that? Thanks.\n     I set two boxes with different relative permittivity and a wire dipole antenna locates at the interface between these two boxes. \n\nHere are the codes:\n\n#domain: 0.050 0.050 0.200\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 60e-9\n#time_step_limit_type: 3D\n#pml_cells: 10 10 10 10 10 10\n\n#material: 2 0 1 0 half_space\n#material: 2 0 1 0 half_space_1\n\n#waveform: gaussian 1 1e9 mypulse\n#transmission_line: z 0.025 0.025 0.100 73 mypulse\n ## 150mm length\n#edge: 0.025 0.025 0.025 0.025 0.025 0.175 pec\n\n## 1mm gap at centre of dipole\n#edge: 0.025 0.025 0.100 0.025 0.025 0.101 free_space\n\n#box: 0 0 0 0.05 0.025 0.2 half_space\n#box: 0 .025 0 0.05 0.05 0.2 half_space_1\n\n    I check the antenna performance(s11). But I get errors when I plot params, the min s11 is -0.000137dB and \"userwarning:attemping to set identical bottom-- top results in singular transformations\". I think I obey the rule for setting boxes(lower point to upper point). Also, I put gap in half_space. \n    Please be free to let me know if you have any suggetions. Thank you very much!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 25, 2016, 8:51:42AM",
        "content": "Hi Yang,\n\nAn important piece of advice I can give is to always check the geometry of your model (using the geometry view command) before running your simulation. Information on how to do this at http://docs.gprmax.com/en/latest/input.html#geometry-view\n\nThere are a couple of issues with your model:\n\n- Remember object construction commands are processed in the order they appear in the input file. Therefore, you have written over your antenna with your half-space boxes. If you look at your geometry file you'd see you have no antenna. The edges creating the antenna need to come after the half-space boxes.\n- Both of your half-space materials have the same dielectric constant...perhaps a typo?\n\nThe frequency spacing in the s11 plot (and other antenna parameters) is controlled by the length of the time window of the simulation, df = 1/T\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yang",
        "date": "Feb 25, 2016, 11:37:35AM",
        "content": "Hi Craig\n     Thank you for your response. The problem is sloved now. I did not notice the order of putting objects. \n     I set the same dielectric constant because I want to testify the effective dielectric constant of the whole medium. I also testify some other parameters of dielectric constant in two boxes. \n\nThank you very much for your help."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZBAzK5wVdig",
    "title": "Hi",
    "original_post": {
      "author": "savita s",
      "date": "Jun 4, 2021, 9:22:07AM",
      "content": "Hi\nI am attaching my code below. I am not able to see the cylinder object in paraview and also in plot also no underground object. Please tell me any wrong in the code. Thank you in advance.\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 5.0 4.0 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 1.5 3.0 0 my_ricker\n#rx: 3.0 3.0 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 5.0 3.0 0.002 half_space\n#cylinder: 2.5 2.2 0 2.5 2.2 0.002 0.010 pec\n\n\n#geometry_view: 0 0 0 5.0 4.0 0.002 0.002 0.002 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Jun 7, 2021, 9:18:14AM",
        "content": "just a quick hint:\n\na) 3 ns time - window\nb) cylinder burried  at 2.2 m\n\nfor 2.2m you'll need minimum 25 ns ... its basicly a GPR-simulation, so GPR-estimations apply.\n\nyour cylinder is just 2cm in diameter - try to hide the half_space in paraview ...\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 9, 2021, 5:04:38PM",
        "content": "As Michael pointed out, your cylinder is very small compared to the half space it is embedded in. So you can see it in Paraview you just have to zoom in. Also as pointed out you need to think about choosing an appropriate time window and how the size of your target and distance will effect the reflected response from it. These are basic concepts of GPR that you need to understand before using gprMax.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/g6Cg2aNlv48",
    "title": "fractal box with #material",
    "original_post": {
      "author": "Brad Artman",
      "date": "Dec 14, 2022, 7:25:05PM",
      "content": "I was hoping that I could use one of my #material definitions in #fractal_box\n\n#material: 12. .002500 1.0 0.0 upper \n#fractal_box: 0. .06 0. 2. 1.21 0.002 1.25 1 2 1 20 upper fb_upper 1 y\nis that not the case?\nI get:\nProcessing geometry related cmds:   0%|                | 0/5 [00:00<?, ?cmds/s]^MProcessing geometry related cmds:  20%|█▌  \n    | 1/5 [00:00<00:00,  8.92cmds/s]\nTraceback (most recent call last):\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/runpy.py\", line 196, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/site-packages/gprMax-3.1.6-py3.10-linux-x86_64.egg/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/site-packages/gprMax-3.1.6-py3.10-linux-x86_64.egg/gprMax/gprMax.py\", line 69, in main\n    run_main(args)\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/site-packages/gprMax-3.1.6-py3.10-linux-x86_64.egg/gprMax/gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/site-packages/gprMax-3.1.6-py3.10-linux-x86_64.egg/gprMax/gprMax.py\", line 232, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/site-packages/gprMax-3.1.6-py3.10-linux-x86_64.egg/gprMax/model_build_run.py\", line 187, in run_model\n    process_geometrycmds(geometry, G)\n  File \"/u/st/du/bartman/.conda/envs/gprMax/lib/python3.10/site-packages/gprMax-3.1.6-py3.10-linux-x86_64.egg/gprMax/input_cmds_geometry.py\", line 1525, in process_geometrycmds\n    volume.fractalvolume += mixingmodel.startmaterialnum\nAttributeError: 'NoneType' object has no attribute 'startmaterialnum'\nsrun: error: c035: task 0: Exited with exit code 1\n~"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 15, 2022, 6:02:27AM",
        "content": "You can use a single material with a #fractal_box so long as you are also applying rough surface(s) (with #add_surface_roughness). A #fractal_box with a single material and no other modifications is just a plain #box so not permitted/allowed. The reason I think your example is not working is that you are, correctly, associating a single material ('upper') with the #fractal_box but asking for a distribution of 20 different materials in the #fractal_box command:\n\n#fractal_box: 0. .06 0. 2. 1.21 0.002 1.25 1 2 1 20 upper fb_upper 1 y\n\nSee parameter i1 in https://docs.gprmax.com/en/latest/input.html#fractal-box\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7fNapSksg6Q",
    "title": "Problem with direct wave",
    "original_post": {
      "author": "Phoebe Wong",
      "date": "Mar 18, 2019, 3:01:14AM",
      "content": "Hello Craig,\n\nI am trying to extract the amplitude of direct wave (DW) of EM signal, but I found that the amplitude of DW is almost always weaker than the reflected waves (see attached image).\n\nIt is strange as the energy level of the signal should be decreasing due to attenuation, and I believe the program has accounted of attenuation as user has to input the dielectric constant and electrical conductivity of material.\n\nI would like to ask how is the signal being simulated in gprMax, making the amplitude of DW weaker than the reflected waves.\n\nThank you very much.\n\nBest regards,\nPhoebe"
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Mar 18, 2019, 6:56:52AM",
        "content": "Hello Phoebe,\n\nThe energy reduction of a signal is depented on many factors such as geometrical spreading, scattering losses (e.g. from small objects), attenuation losses (EM properties),\nreflection-transmission losses, etc.\n\nFor a simple 2D model with homogeneous medium it makes sense that the direct wave is weaker than the reflected waves.\n\nIn order to achieve a more realistic result you will have to simulate a more realistic complex model too, namely a 3D model with inhomogeneous medium or very complex medium.\n\nKind regards,\n\nDimitris"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2019, 5:21:57AM",
        "content": "Hi Phoebe,\n\nApologies if you already know this, but I thought it was worth remembering a couple of important points:\n\ngprMax is a full wave EM simulator, essentially this means Maxwell's equations are solved subject to proper boundary conditions and considering all modes and all field components with no approximation.\nIn terms of simulating a GPR antenna, you can use simplified source models, such as the Hertzian dipole, or you can model all the geometry, materials, and excitation waveform of the real antenna. Which you choose depends on a number of factors, including: computational resources available, whether you need a good representation of the amplitude information of the signal, whether you are interested in near/far-field behaviour.\nFrom the plot you attached, it looks like you are comparing a simulated free space response from the antenna, with one over concrete. Is this from a hertzian dipole source? Can provide your input file? \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Phoebe Wong",
        "date": "Mar 20, 2019, 12:01:43AM",
        "content": "Hi Craig,\n\nUsing gprMax is a constant learning process, I hope I am using it correctly.\n\nI used hertizian dipole source, you may find the details in the attached input files.\n\nThanks and regards,\nPhoebe"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 20, 2019, 4:58:39AM",
        "content": "Hi Phoebe,\n\nI have had a quick look at your input files. One issue I see immediately is that for the model with the concrete slab, the source (Hertzian dipole, red dot) is inside the PML region (see attached geometry view from Paraview). Hint: always check the geometry of a model before running it. This will cause problems as you shouldn't place sources or receivers inside the PML. You should have seen a red warning message when you ran the model. So either move the source and receiver further into the model (x-direction) and/or enlarge the domain in the x-direction if you want to maintain the same starting distance between source/receiver and first rebar.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Phoebe Wong",
        "date": "Mar 24, 2019, 10:21:54PM",
        "content": "Hi Craig,\n\nThank you for pointing that out, I missed the red warning because the input file executed anyway, so I did not notice the problem.\n\nI have changed the code and run it again.\n\nThanks and regards,\nPhoebe"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/RhV-puXWjgs",
    "title": "#excitation_file with a file MATLAB to generate a sfcw signal",
    "original_post": {
      "author": "Andrea",
      "date": "Mar 5, 2020, 10:50:06AM",
      "content": "Good morning I have some questions. Can anyone help me please?\nI want to create a simulation for a Stepped Frequency Continuous Wave radar.\n I generate my signal in MATLAB and i want import it in GprMax to simulate it.\n\nMatlab parameter:\nStepped Frequency Continuous Wave Signal GENERATION\nPARAMETER:\nAmplitude= 1.000000 [V]\nN= 51\nBw= 5e+08 [Hz]\nDwell Time= 8.33333e-11[s]\nPRI=4.25e-09 [s]\nFrequency Step= 10.000000 [MHz]\nRange Resolution= 0.094868 [m]\nUnambiguous Range= 4.838285[m]\n\nthis code generate a txt file named my_wave.txt :\n\ntime my_pulse\n0 1 \n8.33333e-13 0.992115 \n1.66667e-12 0.968583 \n2.5e-12 0.929776 \n3.33333e-12 0.876307 \n4.16667e-12 0.809017 \n5e-12 0.728969 \n5.83333e-12 0.637424 \n6.66667e-12 0.535827 \n7.5e-12 0.425779 \n.. .. ..\n\nGprMax code\n\n#title: scenario_0_cubo_cilindro_al_centro\n#domain: 2.0 1.5 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 8.5e-9\n\n#material: 10 0 1 0 ground\n#excitation_file: my_wave.txt\n\n#hertzian_dipole: z 1.0 1.0 0.0 my_pulse\n#rx: 1 1.01 0.0\n\n#box: 0 0 0 2.0 1.0 0.002 ground\n#cylinder: 1 0.5 0.0 1.0 0.5 0.02 0.1 pec\n\n#geometry_view: 0 0 0 2.0 1.5 0.002 0.002 0.002 0.002 scenario_0_cubo_cilindro_al_centro n\n#snapshot: 0 0 0 2.0 1.5 0.002 0.002 0.002 0.002 8.5e-9 snap1\n\nI'm sorry but I can't understand where I'm wrong\n\nThe cmd return:\n\nModel title: scenario_0_cubo_cilindro_al_centro\nNumber of CPU (OpenMP) threads: 4\nSpatial discretisation: 0.002 x 0.002 x 0.002m\nDomain size: 2 x 1.5 x 0.002m (1000 x 750 x 1 = 750000 cells)\nMode: 2D TMz\nTime step (at CFL limit): 4.71731e-12 secs\nTime window: 8.5e-09 secs (1803 iterations)\n\nExcitation file: C:\\Users\\andre\\Desktop\\gprMax\\ESEMPI_PROVA\\scenario_0_sfera\\my_wave.txt\nUser waveform my_pulse created using user-defined time array and, if required, interpolation parameters (kind: linear, fill value: nan).\n\nTraceback (most recent call last):\n  File \"C:\\Users\\andre\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\andre\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 66, in main\n    run_main(args)\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\model_build_run.py\", line 166, in run_model\n    process_multicmds(multicmds, G)\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\input_cmds_multiuse.py\", line 230, in process_multicmds\n    h.calculate_waveform_values(G)\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\sources.py\", line 67, in calculate_waveform_values\n    self.waveformvaluesJ[iteration] = waveform.calculate_value(time + 0.5 * G.dt, G.dt)\n  File \"C:\\Users\\andre\\Desktop\\gprMax\\gprMax\\waveforms.py\", line 118, in calculate_value\n    ampvalue = self.userfunc(time)\n  File \"C:\\Users\\andre\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\scipy\\interpolate\\polyint.py\", line 79, in __call__\n    y = self._evaluate(x)\n  File \"C:\\Users\\andre\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\scipy\\interpolate\\interpolate.py\", line 663, in _evaluate\n    below_bounds, above_bounds = self._check_bounds(x_new)\n  File \"C:\\Users\\andre\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\scipy\\interpolate\\interpolate.py\", line 695, in _check_bounds\n    raise ValueError(\"A value in x_new is above the interpolation \"\nValueError: A value in x_new is above the interpolation range.\n\nCan anyone help me please?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 9, 2020, 5:43:41AM",
        "content": "Dear Andrea,\n\nA quick Google will give you suggestions - https://stackoverflow.com/questions/45429831/valueerror-a-value-in-x-new-is-above-the-interpolation-range-what-other-re\n\nTry using extrapolate with your excitation file command - http://docs.gprmax.com/en/latest/input.html#excitation-file\nhttps://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Andrea",
        "date": "Mar 11, 2020, 6:55:41AM",
        "content": "thank you very much. I think I understand the mistake. I generate my wave for 4.25e-09 (PRI) second. while I was setting the #time_window: 8.5e-9 (2*PRI), if I set #time_window: 4.25e-09, it works.\nSo in order not to have the error and to have the time to receive the signal I increased the time up to 8.5e-9 and added 0 as an amplitude value after the time 4.25e-09.\nex:\ntime my_pulse\n0 1\n5e-13 0.998027\n1e-12 0.992115\n1.5e-12 0.982287\n2e-12 0.968583\n2.5e-12 0.951057\n3e-12 0.929776\n3.5e-12 0.904827\n4e-12 0.876307\n4.5e-12 0.844328\n5e-12 0.809017\n5.5e-12 0.770513\n6e-12 0.728969\n6.5e-12 0.684547\n7e-12 0.637424\n7.5e-12 0.587785\n....\n..\n..\n2.547e-09 -0.45399\n2.5475e-09 -0.382683\n2.548e-09 -0.309017\n2.5485e-09 -0.233445\n2.549e-09 -0.156434\n2.5495e-09 -0.0784591\n2.55e-09 0\n2.5505e-09 0\n2.551e-09 0\n2.5515e-09 0\n...\n..\n..\n."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sN2dBttzkaw",
    "title": "Simulating along topography and GPU",
    "original_post": {
      "author": "James Whittaker",
      "date": "Oct 5, 2020, 7:35:16AM",
      "content": "Hi all,\n\nI've found your software very interesting. I have a couple of questions,\n\n1) How would you simulate along topography? would the pulse applied to the simulation be applied vertically down or at a direction? I noted a previous post mentioning that the pulse can only be applied in a x,y,z direction.\n\n2) I had issues with the GPU application. I've got a Quadro RTX 3000 in my laptop, and I installed CUDA 11.1 as this was the most recent update. Is this supported? This was the error I received.\n\nTraceback (most recent call last):\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\runpy.py\", line 194, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.5-py3.8-win-amd64.egg\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.5-py3.8-win-amd64.egg\\gprMax\\gprMax.py\", line 66, in main\n    run_main(args)\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.5-py3.8-win-amd64.egg\\gprMax\\gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.5-py3.8-win-amd64.egg\\gprMax\\gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.5-py3.8-win-amd64.egg\\gprMax\\model_build_run.py\", line 373, in run_model\n    tsolve, memsolve = solve_gpu(currentmodelrun, modelend, G)\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\gprmax-3.1.5-py3.8-win-amd64.egg\\gprMax\\model_build_run.py\", line 508, in solve_gpu\n    kernels_fields = SourceModule(kernels_template_fields.substitute(REAL=cudafloattype, COMPLEX=cudacomplextype, N_updatecoeffsE=G.updatecoeffsE.size, N_updatecoeffsH=G.updatecoeffsH.size, NY_MATCOEFFS=G.updatecoeffsE.shape[1], NY_MATDISPCOEFFS=1, NX_FIELDS=G.nx + 1, NY_FIELDS=G.ny + 1, NZ_FIELDS=G.nz + 1, NX_ID=G.ID.shape[1], NY_ID=G.ID.shape[2], NZ_ID=G.ID.shape[3], NX_T=1, NY_T=1, NZ_T=1), options=compiler_opts)\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 290, in __init__\n    cubin = compile(source, nvcc, options, keep, no_extern_c,\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 254, in compile\n    return compile_plain(source, options, keep, nvcc, cache_dir, target)\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 78, in compile_plain\n    checksum.update(preprocess_source(source, options, nvcc).encode(\"utf-8\"))\n  File \"C:\\Users\\james.whittaker\\Anaconda3\\envs\\gprMax\\lib\\site-packages\\pycuda\\compiler.py\", line 54, in preprocess_source\n    raise CompileError(\"nvcc preprocessing of %s failed\" % source_path,\npycuda.driver.CompileError: nvcc preprocessing of C:\\Users\\JAMES~1.WHI\\AppData\\Local\\Temp\\tmpgy_kbyt2.cu failed\n[command: nvcc --preprocess -w -arch sm_75 -m64 -Ic:\\users\\james.whittaker\\anaconda3\\envs\\gprmax\\lib\\site-packages\\pycuda\\cuda C:\\Users\\JAMES~1.WHI\\AppData\\Local\\Temp\\tmpgy_kbyt2.cu --compiler-options -EP]\n\nThanks \nJames"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/A0flfLegdi8",
    "title": "An abnormal 3D model",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Dec 19, 2018, 11:14:49AM",
      "content": "I have met with some incorrect results in my borehole model. To find out the poroblems, I run a simple and normal 3D model. However, the reults look strange. I post the input file and A scan figures. \n\ninput file:\n\n#title: Heterogeneous soil \n#domain: 0.15 0.15 0.1\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: y 0.045 0.075 0.085 my_ricker\n#rx: 0.045 0.075 0.085\n#rx: 0.105 0.075 0.085\n#geometry_view: 0 0 0 0.15 0.15 0.1 0.001 0.001 0.001 heterogeneous_soil n\n\nThe first figure is the Rx1 receiving signals, which is in the same position of Tx; the second figure is the Rx2 receiving signals, which has a distance of 0.55 m from Tx but in the same horizontal level. \n\nmy query is that:\nFigure 1:\n(1)  Due to the settings of the polarization direction of Tx in Y axis, why do the Rx1 has large signals in X and Z polarization directions?\n(2) Hy is abnormal. \n\nFigure 2:\n(1) There are obvious phase distortion in all polarization components, while the propagation material is free space. \n(2)Why are Ex and Ez not equvalent since they are symmetric?\n\nI have to check my model from the scratch. Thus, I will start from the simplest 3D model. \n\nMany thanks, Crag and Antonis."
    },
    "responses": [
      {
        "author": "Feng Zhou",
        "date": "Dec 19, 2018, 12:56:55PM",
        "content": "I have found the reeason. It ws caused by the position of the receiver. I remember that the receiver and source of GPR must stay away from the boundary. I remember that the distance of the receiver should be at least 10 cells away from the boundary. However, it seems that 10 cells are not enough. A farther distance could be more safe. How do you think, Crag?"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 20, 2018, 3:40:21AM",
        "content": "You must keep all sources and receivers out of the Perfectly Matched Layer (PML) absorbing boundaries. Since the default thickness of the PML is 10 cells, the advice is to keep sources and receivers at least 20 cells away from the domain edge, i.e. 10 cells for the PML, and 10 further cells away from the PML.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bOwpppL5buU",
    "title": "How make a good water leakage model",
    "original_post": {
      "author": "Rizka",
      "date": "Mar 24, 2019, 5:49:45AM",
      "content": "Hi,\n\nI am a student in college and this is my very first time and I learnt by myself using gprmax to complete my final task. I already learnt to scan normal pipe and it worked, so I want to try added a water material because, my topic is about water pipe leakage detection. I confused how adding it, because I try some method but still didn't work. I try to use object with water material and patch it with the cylinder in sand box, but it failed, I wonder if its because the frequency or not, but if its only cylinder, the simulation can be run successfully  (I will attach the file and the result). Even I try with object with water material only (without cylinder) it still had warning (I will attach it too). Can you help me how to solve it? and what better way to use for this water leak model? I am sorry if I ask to much and still has a mistake in it as I am a very beginner at this things.\n\nThank you for your time."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 25, 2019, 7:42:30AM",
        "content": "Hi Rizka,\n\nThe warnings/errors you received are due to numerical dispersion. This is something you have to understand as part of learning about modelling GPR using the Finite-Difference Time-Domain (FDTD) method. We have a brief guide in the docs - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization Please read it all, but specifically the section on spatial discretisation, where you must consider the material with the smallest wavelength ini your model, and the maximum frequency of interest (which is not usually the centre frequency of the source pulse).\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OYCcaFsK6Xw",
    "title": "Reference the gprMax User Guide",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "May 13, 2021, 10:43:19AM",
      "content": "Dear developers,\n\nIs there an ideal way to reference the gprMax User Guide in latex format?\n\nRegards,\n\nBruno"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 13, 2021, 10:58:34AM",
        "content": "Can I ask why you want to reference the User Guide? If it is a question of needing to cite a publication then we would prefer if you cited one of our papers, see the Cite gprMax section of https://www.gprmax.com/publications.shtml\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Bruno Barauna",
        "date": "May 13, 2021, 11:04:06AM",
        "content": "I have already referred to this publication. My intention of referencing the manual is to guide the parameterization. But now I realized that it doesn't make sense. Mentioning the main reference will be enough.\n\nKind Regards,\n\nBruno\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kCevtSc7Was",
    "title": "RAM usage on multiple GPUs",
    "original_post": {
      "author": "Mark Dunscomb",
      "date": "Aug 25, 2017, 9:41:50AM",
      "content": "Hi All,\n   Q: Is gprMax capable of combining RAM from several gpu's to process a single model?\n\n   The manual discusses using MPI in conjunction with gpu's but it's not clear whether or not the code is capable of combining RAM from multiple cards to process a single model.  My understanding is that not all code is written to jointly use RAM from multiple gpu's so, before we build a multiple gpu system, my IT folks are asking to confirm that building one will help my RAM woes.\n\nThanks for any answers!!"
    },
    "responses": [
      {
        "author": "Mark Dunscomb",
        "date": "Aug 25, 2017, 10:47:48AM",
        "content": "Additional Background:\n\nThe video cards are individuals components and can’t share their onboard RAM. Dual processor like the Intel Xeon can share each other’s RAM because each processor has a RAM controller that is linked to the other processors RAM controller. This doesn’t t exist on the video cards.  Even when used in SLI configuration where they are linked together in a master slave arrangement they are still treated as individual compute components and do not have access to each other’s onboard RAM. (I.e. the master divides the compute tasks among the individual slave cards who do the compute on their segment and transfer the result back to the means for presentation).\n  A number of applications do use multiple GPUs for computing. I suggest you check with the company supplying the application to see if they have a way of access the video card RAM as a single logical pool."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 25, 2017, 12:57:45PM",
        "content": "Hi Mark,\n\nThe quick answer is NO. \n\nThe only way to use multiple computing units - in this case CPUs/Cores - at the moment is using the OpenMP parallelisation (i.e. multi-threading). The benefit there is that communication between CPUs/Cores is happening directly and easily as they have access to the same memory (RAM). Such parallelisation is not easy if every computing unit has its own memory and cannot only be achieved by exchanging appropriate information using some kind of a message passing protocol (e.g. MPI). In essence, a domain decomposition parallelisation approach is a lot trickier and it will be as slow as the slowest part of the network that is used to exchange messages and data that is connecting the computing units. In essence, MPI is supposed to be used for such a parallelisation approach that will allow you to run massive models on clusters etc. The current MPI implementation in gprMax is just a simple task farming of independent models that do not require any communication while they are executing. In essence, we use MPI to create \"efficiently\" a job array. \n\nIn a similar way, you can see the multi GPU problem. You can use many cards in parallel to run independent jobs (i.e. models) as the task farming approach used at the moment in gprMax, but you cannot split a big model amongst a number of GPUs without having as a bottleneck the communication at every iteration step of parts of the memory of each of the GPUs. In principle, you can build the algorithm using similar tools (maybe MPI) but it will not be as efficient. This obviously is not available in gprMax.\n\ngprMax does not do any of the domain decomposition stuff but we would like to have a go with the multi-node big cluster implementation which we know that works. Actually, an MSc student tried this year as part of his thesis project but we kind of run out of time. \n\nBest\n\nAntonis\n\nPS It is not a trivial coding effort to robustly do proper MPI domain decomposition parallelisation including all the extra stuff that gprMax does (i.e. PMLs, dispersive media, etc.)"
      },
      {
        "author": "Mark Dunscomb",
        "date": "Aug 25, 2017, 1:24:16PM",
        "content": "Thanks for your quick answer Antonis!!  I'm jumping into the deep end of HPC and wasn't quite sure how the bus from multiple GPUs worked regarding RAM and the code.  Your response makes perfect sense (unfortunately :)).  It seems then the only effective way to substantially improve overall processing speed for a model requiring more RAM than on a single gpu card is to use MPI with multiple nodes, Phi Coprocessors, or some other similar scenario.  Does that sound correct to you and have you tried using coprocessors? \n\nRegards,\nMark"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 25, 2017, 1:42:07PM",
        "content": "It is certainly possible to use multiple GPUs in the same paradigm that one will use multiple CPU nodes in a cluster. The coding will be a bit trickier but the speed will depend on the slowest part of the network communicating parts of the memory amongst the GPUs RAM modules at every iteration. In essence, you need to communicate field information at every step. This is obviously not the complete model but everything else waits until this process completes.\n\nIt is an interesting idea if you want or need to model big challenge problems that require more than 1T memory. For problems that are just out of the grasp on the current GPUs I think in a year or so we will have GPUs with 32GB or 64GB RAM. These will not solve the big challenge problems but will allow pretty big models to run easily ...\n\nBest\n\nAntonis"
      },
      {
        "author": "Mark Dunscomb",
        "date": "Aug 25, 2017, 2:05:10PM",
        "content": "Thanks again for your help.  I need to continue working this issue since running a B scan based on a model that needs 24 hrs per A scan isn't reasonable.\n\nI also have a separate question regarding using a peplinski model in a fractal box for soil, B scans, and a hdf5 format geometry file.  I'd hoped to save a modelspace geometry so that variation in the peplinski model isn't developed anew between each A scan (and to save time).  However, I'm hitting an error that seems to indicate the hdf5 model doesn't contain the peplinski information.  I need to investigate further and will post on the issues page on github.\n\nCheers,\nMark"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2017, 3:16:25AM",
        "content": "Hi Mark,\n\nSaving the geometry and reloading it should certainly save time when creating a B-scan. We have done this with the soil model/fractal box. Let me know if you have any specific problems.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mark Dunscomb",
        "date": "Sep 6, 2017, 10:24:01AM",
        "content": "Thanks Craig,\n\nThat certainly helps.  \n\nFYI, I'm about to run benchmarking on a cluster of Xeon Platnum 8180 processor nodes and will let you know the result.  In the mean time...\n\nThe #geometry_objects_read: command throws an error if you use the last argument for incorporating dielectric smoothing.  The error states that the command configured to accept exactly five arguments and dielectric smoothing is the sixth.\n\nCheers and thanks,\nMark"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2017, 12:29:38PM",
        "content": "Hi Mark,\n\nYes, definitely interested to see results from the Intel® Xeon® Platinum 8180. RRP $10,000!\n\nAre you looking at the most up-to-date docs? There was a mistake in the docs for the #geometry_objects_read command which I recently corrected. It shouldn't have the dielectric smoothing option - explained here at https://github.com/gprMax/gprMax/issues/122\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mark Dunscomb",
        "date": "Sep 6, 2017, 1:56:37PM",
        "content": "Thanks, that's exactly what happened; I had an obsolete doc."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/z3eFBtF4HRk",
    "title": "#edge command to create an abitary directed line",
    "original_post": {
      "author": "呉尽",
      "date": "Jun 22, 2020, 1:42:42AM",
      "content": "Hi!\nRecently, I have been learning how to use gprMax.\n\nQ1:\nI have one question about using #edge command which defines a line in the model.\nUsing #edge 0.5 0.5 0.5  0.7 0.5 0.5 material, a x-directed line is created.\nHowever, I want to create an arbitrary directed line (e.g., #edge 0.5 0.5 0.5 0.6 0.6 0.5). \nIn this case, gprMax throws errors. \nIt seems that gprMax can only created x-, y-, or z-directed line. \nIf I want to create an arbitrary line, how should I do it?\n\nQ2:\nAlso, I want to use python to access grids that gprMax creates. \nI use following commands:\n#python:\nfrom gprMax.grid import *\nmy_grid = Grid(grid) # Here, I don't know to create grid object.\ncoordinates = my_grid.get(0,0,0)\n#end_python: \nI want to know how to access grid object that gprMax creates.\n\nThanks,\nBest regards,\nJin"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 22, 2020, 4:13:26AM",
        "content": "Dear Jin,\n\n1. The #edge command can only be used to create edges that aligned to the FDTD grid, i.e. in x, y, and z directions. It is not currently possible to create a 'staircased' edge or line, which is what would be necessary to do follow a line specified at an arbitrary angle.\n\n2. The current version of gprMax does not allow users direct access to an API, therefore you cannot access objects such as the grid. What is available are the variables listed in the docs (http://docs.gprmax.com/en/latest/python_scripting.html#scripting-the-input-file) and the functions in the 'input_cmd_funcs.py' module. The upcoming version of gprMax which we hope to release in the summer will have access to a much more fully featured API. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "呉尽",
        "date": "Jun 25, 2020, 11:15:49PM",
        "content": "Dear Craig,\n\nThanks so much for your answers.\nI made a 'staircased' edge to represent a line at an arbitrary angle using Python according to your advice.\n\nThanks again!\nBest regards,\nJin"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sLk3zE7UuEo",
    "title": "Transmission configuration GSSI",
    "original_post": {
      "author": "Stephen RAZAFINDRATSIMA",
      "date": "May 16, 2019, 7:59:51AM",
      "content": "Dear Craig, Antonis and other gprMax users,\n\n\nI am trying to build and run a \"transmission model\" with two antennas GSSI in order to prepare some experimental measurements. One of the antenna is at the top of the model and the other at the bottom. We would like to validate some research results obtained with 2D modelling.\n\nIf I use two antenna GSSI in my model (transmission configuration), I have the following error when plotting Ascan: \"No receivers found in the output file\". Please find attached the input file of this model (dcnd_gssi_double_15e-1_GHz_small-stones_5_8_0.01_Ohm-m.in).\n\nTherefore I have tried to adapt the antennas.py file (please find herewith antennas_SR.py file and at the beginning of the file as comment what I did). I have got the same error message. Please find attached the input file (dcnd_gssi_double_15e-1_GHz_small-stones_5_7_0.01_Ohm-m.in).\nBoth models are running but I cannot get any result.\n\nMany thanks for whatever help you can give.\n\nBest regards,\nStephen RAZAFINDRATSIMA"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 17, 2019, 5:13:54AM",
        "content": "Hi Stephen,\n\nThe primary reason for this not working is that in both your input files the statements to import the GSSI antenna models are not within a #python block, so won't do anything, i.e. the antenna is not being imported at all. This is why you get the warning:\n\nWARNING: Numerical dispersion analysis not carried out as no waveform detected.\n\n and also why you get the error:\n\nNo receivers found in the output file\n\nYou will need to modify the antennas->GSSI.py module to achieve the transmission configuration you want. From a quick look, the changes that you have made should work, i.e. turning off the transmitter in one antenna, and the receiver in the other. You can just comment out one set of the materials, rather than renaming them, but either approach should work.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Stephen RAZAFINDRATSIMA",
        "date": "May 17, 2019, 8:58:49AM",
        "content": "Hi Craig,\n\nmany thanks for your answer. I'll correct the models.\nAlso, Do you know if normal position of the antenna will give correct answers? I mean do we need to put upside down the antenna at the bottom of the model? If so, how can we do that?\n\nBest regards,\nStephen"
      },
      {
        "author": "Craig Warren",
        "date": "May 17, 2019, 10:28:32AM",
        "content": "No you will need to rotate the antenna into the correct orientation for your application. Correctly only a 90 degree rotation in the x-y plane is possible. You'll have to perform the rotation yourself. I would suggest you consider exporting the antenna geometry (#geometry_objects_write), and perhaps using MATLAB to import the HDF5 file, rotate the matrix as you require, and then read it back into gprMax (#geometry_objects_read).\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Stephen RAZAFINDRATSIMA",
        "date": "May 17, 2019, 5:30:16PM",
        "content": "Many thanks Craig, we'll do that.\n\nKind regards,\n\nStephen"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7JddEKTh7bw",
    "title": "error while run the code",
    "original_post": {
      "author": "Ahmed sayed sayed Madbouly",
      "date": "Mar 9, 2024, 1:02:53PM",
      "content": "every time I am trying to run setup.py built I get this error:\nerror: Microsoft Visual C++ 14.0 or greater is required. Get it with \"Microsoft C++ Build Tools\": https://visualstudio.microsoft.com/visual-cpp-build-tools/\n\nI am  trying   to solve it , but actually I have download Microsoft visual studio 2019 \"community\" and 2022 \"build tools\" , in both I downloaded c++ for desktop (MSV 142 , windows sdk 10 ) ,also i added this to my environment variables path : C:\\Program Files (x86)\\Microsoft Visual Studio\\2022\\BuildTools\\VC\\Tools\\MSVC\\14.39.33519\\bin\\Hostx64\\x64\n\nbut also didn't work"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/oaxO63phZXg",
    "title": "Inserting pre-defined geometry - identifying materials",
    "original_post": {
      "author": "Heloisa Moraes",
      "date": "Jan 13, 2022, 5:13:59PM",
      "content": "Hi, everyone.\n\nBefore I ask any more questions, I would like to thank Craig for all the support. I end up asking questions when I am in a hurry and never return to give feedback, so I apologize for that.\n\nI have been testing the amazing convert_png2h5.py and everything worked great, then I got curious about how the geometry data is presented in the output files and opened a vti file from a previous work. The lines below caught my attention:\n\n<Material name=\"pec\">0</Material>\n<Material name=\"free_space\">1</Material>\n\nSince my next step is to test the #geometry_objects_read command, I wonder if when I create the #material commands file is it possible to insert the above type of information, identifying the material by a chosen name (just like in the AustinManWoman_materials_dispersive.txt file) instead of a number?\n\nBest regards,\n\nHeloisa"
    },
    "responses": [
      {
        "author": "Heloisa Moraes",
        "date": "Jan 13, 2022, 7:06:18PM",
        "content": "Hi, everyone.\n\nJust to let you know that I used the RTFM method and found the answer to my question: it's the  second note in the list below item 4.4.15\n\nSorry!\n\nHeloisa\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yUCr9egoLS4",
    "title": "GUI Interactive User Interface and 3D modeling Tools Libraries in gprMax",
    "original_post": {
      "author": "Diego Osorio",
      "date": "Aug 18, 2021, 10:22:34PM",
      "content": "Hello dear Drs Craig, Antonis and community, \n\nThanks for the last advice. It was really helpfull.\nI am currently working on developing a series of modeling tools for basic 3D geometries (like point, like, segment) and some already implemented in the object construction commands. The goal is to develop some additional object construction commands needed for a specific geometry and to develop a User-Interactive GUI where one can build some geometries - then convert these volumes directly into a HDF5 file or change its format in orden to be read by gprMax in pre-processing ( .IN file). Which GUI libraries or approach could you suggest?\nThanks a lot for your support"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 19, 2021, 6:42:07AM",
        "content": "Hi Diego,\n\nI don't have much experience in developing GUIs (at least the last 25 years ... I had \"one\" in the early 90s ...) . However, I think strategically it is better to work with Web based technologies instead of creating monolithic applications that run old on a subset of OSes or need a lot of modifications to run at different OS. Running on a web browser might be a better approach to be cross-platform. Saying that, there are tools these days that will allow design of apps for various platforms anyway. \n\nBest\n\nAntonis\n"
      },
      {
        "author": "Diego Osorio",
        "date": "Aug 19, 2021, 2:18:53PM",
        "content": "Thanks a lot Dr. Antonis,\n\nI've done some research and found some Python  3-D modeling libraries, being CadQuery, Tkinter, KIVY some alternatives. There are 2 main GUI building types libraries: scripting-based and visual-based, being the last the most desired approach ( the idea is to build an intuitive interface composed of buttons where the User can call the Objects Construction Commands (box, plate, edge, etc) and visualize them, using a CAD software like FreeCAD or any visual interface). \n\nBut the main problem I visualize, in the scenario I can develop the 3D CAD interface tools is how then can I export/convert the CAD file from the GUI successfully into a .IN file, in order to fully use the pre- processing and post processing of gprMax (A-scans, electromagnetic fields plotting, etc), without crashing the load-up.\n\nThanks for all your advices!\n\nDiego\n\n\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iBSFEz_wmZU",
    "title": "Interpolation error using #excitation_file",
    "original_post": {
      "author": "Owen Mays",
      "date": "Jun 2, 2020, 9:08:42PM",
      "content": "Hi all,\n\nI'm attempting to use a custom excitation waveform, and I'm encountering the following error:\n\n\"ValueError: A value in x_new is above the interpolation range.\"\n\nI've attached my input file and the custom signal file. I've tried removing the final few lines from the signal file (thinking that it needs to be shorter than the duration of the simulation), but that didn't help. I also decimated the signal by a factor of 2 to see if it was just sampled too finely, and that didn't help either.\n\nAny idea what's wrong?\n\nThanks,\nOwen"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 3, 2020, 3:47:54PM",
        "content": "Dear Owen,\n\nI have not looked specifically at your custom waveform but the error is from the scipy interp1d function (https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html) which is used. Most probably there are values that are slightly beyond the interpolation range. You can add the optional 'kind' and 'fill_value' arguments to the #excitation_file command (http://docs.gprmax.com/en/latest/input.html#excitation-file) to enable interp1d to extrapolate to accommodate values that lie outside the interpolation range, e.g.\n\n#excitation_file: ReusedSignal.txt linear extrapolate\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Owen Mays",
        "date": "Jun 4, 2020, 1:20:27AM",
        "content": "Dear Craig,\n\nThank you, adding those two options solved my problem. On a related note, is there any way to see what the actual signal input was (after any automatic interpolation/extrapolation)?\n\nBest regards,\nOwen"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 11, 2020, 4:45:56PM",
        "content": "Dear Owen,\n\nNo there is not a direct method to view the input waveform when using the #excitation file. Depending on your model you could use a transmission line (http://docs.gprmax.com/en/latest/input.html#transmission-line) at the feed which allows you to view the incident and total voltages and currents in the line.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Owen Mays",
        "date": "Jun 12, 2020, 3:16:14AM",
        "content": "Dear Craig,\n\nThank you for that suggestion, the transmission line will do what I need.\n\nBest regards,\nOwen"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jxeyjQ0IfoI",
    "title": "Less than Yee cell plates for antenna modelling",
    "original_post": {
      "author": "James Whittaker",
      "date": "Nov 24, 2022, 9:27:05AM",
      "content": "Hi,\n\nWe've been looking at antenna modelling recently. In your GSSI.py file you use plates for the bowties that are less than a grid cell in depth, why? Does it have a critical purpose to form a clearer signal compared to the real world equivalent?\n\nThanks\nJames"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 26, 2022, 7:15:31AM",
        "content": "Hi James,\n\nWhen you are defining the objects in your model you are in fact mapping material properties onto Yee cells. When you specify a volumetric geometry command like a box your are specifying the material properties on the 12 vertices of the Yee cell (for electric update coefficients) - see Figure 1 at https://docs.gprmax.com/en/latest/gprmodelling.html If you specify a box that is a single Yee cell you are effectively getting an object that is thicker than the spatial resolution (size of the Yee cell). With plates you are just setting the material properties on a surface of the Yee cell. So plates allow you to specify objects with effective thickness of a Yee cell. This is useful when trying to model antenna components (such as bowties) that can be of the order of 1mm thick or less. \n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Kf99Y99ZIqE",
    "title": "Re: What is the status quo of the development of foreign ground penetrating radar technology?",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 19, 2017, 6:00:34AM",
        "content": "Hi Jie,\n\nCan you clarify your question, I don't really understand what you are asking.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_bZdUKo5cm8",
    "title": "Fields Grid Values",
    "original_post": {
      "author": "Carlos Díaz",
      "date": "Apr 21, 2017, 5:53:22PM",
      "content": "Hi,\n\nI´m trying to extract the Fields Grid Values in an archive .txt but I just can plot them, I need to know de exact value for each point in the grid, could you give me a guide please.\n\nThanks a lot."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 21, 2017, 6:16:29PM",
        "content": "Hi Carlos,\n\ngprMax uses the well known and well defined HDF5 format to store output field information (look at the documentation). The tools provided to simply plot A-Scans or B-Scans are just some simple examples for doing some quick plots and in there you will find a good starting point for reading the data using simple scripting. They can be easily adapted to display data values or made to store data in other formats but this requires some simple scripting. Alternatively, there are a number of tools that can read HDF5 files and therefore gprMax data. For example, you can use MATLAB and we do provide some simple MATLAB scripts to make this easier. Once data are in MATLAB you can write a simple MATLAB script to export them in other formats.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Gq0wDqz7kpc",
    "title": "fractal box and soil",
    "original_post": {
      "author": "Brad Artman",
      "date": "Nov 4, 2022, 1:19:10PM",
      "content": "do these work in a 2D model , or only 3D?\n\n\n1 #title: NE 6 homoandpipe Ez\n  2 #dx_dy_dz: 0.002 0.002 0.002\n  3 #time_window: .6e-7\n  4 #waveform: ricker 1 1.5e9 my_ricker\n  5 #domain: 2. 1.23 0.002\n  6 #rx: 1.66 1.21 0\n  7 #rx: 1.00 1.21 0\n  8 #hertzian_dipole: z 1.00 1.21 0 my_ricker\n  9 #src_steps: .33 0 0\n 10 #material: 9. .002000 1.0 0.0 lower\n 11 #soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n 12 #fractal_box: 0 .06 0 2. 1.21 0.002 1. 1. 1. 20 my_soil soil_box  y\n 13 #box: 0. 0. 0. 2. .06 0.002 lower n\n 14 geometry_view 0 0 0 2. 1.23 0.002 0.002 0.002 0.002 geom f\n 15 #cylinder: 1.00 .44 0. 1.00 .44 0.002 .07 free_space y"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 5, 2022, 12:42:25AM",
        "content": "They work in 2D but your command is missing parts (http://docs.gprmax.com/en/latest/input.html#fractal-box)\nThe fractal dimension is missing (e.g. 1.5) and if you want to switch on or off dielectric smoothing with 'y' or 'n' then you must  specify the seeding number to the number generator as well. It is clear in the docs\n\nSo, the following should run but I have not check the geometry it produces:\n\n#fractal_box: 0 .06 0 2. 1.21 0.002 1.5 1. 1. 1. 20 my_soil soil_box 1 y\n\nBest\n\nAntonis\n\nRTFM applies a little bit here but granted is an elaborate command with too many parameters ;-) \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qoXT88SITa0",
    "title": "convert_png2h5 & #geometry_objects_read",
    "original_post": {
      "author": "Ivan Dubrovin",
      "date": "Apr 9, 2018, 7:29:40AM",
      "content": "Good day to everyone!\n\nJust now I decided to learn how to use the convert_png2h5 tool to create a model with rather complicated geometry, and I don't seem to understand how to use it properly.\nWhen .h5 file is created, there are IDs assigned to materials of different colors. Are these IDs needed when importing the file?\nOr, rather, could you please explain to me, how to correctly use the #geometry_objects_read command to import the geometry to the model? In particular, how should the file containing #material commands be structured? Should the IDs be used for identifiers, may be? Or if one of the materials is vacuum, do I need to choose it in the convert_png2h5 and manually specify in the #material file?\n\nI read the documentation on all of the commands, but found the example with AustinManWoman to be too complex to take in and understand.\n\nThanks a lot,\nIvan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 9, 2018, 7:42:34AM",
        "content": "Hi Ivan,\n\nThe convert_png2h5 tools simply stores a matrix of integers in a HDF5 file. The integers correspond to the different colours (and also the order) you clicked in the PNG file. You can then use the #geometry_objects_read command to read in the geometry from the HDF5 file. However, you will first need to make a text file containing a list of materials (and properties) that corresponds to the integers in the HDF5 file. All materials in the HDF5 file must be listed in the materials file. For example, this means if you have free space (vacuum) in your PNG (and hence HDF5) file, you must specify in the list of materials. You can use whatever identifier you like for the materials, but the order they appear in the materials file is mapped to the order you clicked colours in your PNG file. This is in general how the #geometry_objects_read command functions.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ivan Dubrovin",
        "date": "Apr 9, 2018, 8:56:57AM",
        "content": "Thanks a lot!\nNow it's working and it's working perfectly.\nGreat module!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/C-VGODb56Ww",
    "title": "Installation process for work station (conisits of 16GB GPU)",
    "original_post": {
      "author": "Santhu Athidi",
      "date": "Sep 6, 2022, 6:48:10AM",
      "content": "Hello all,\n\nWe have a work station consists of 16GB GPU, 1TB of SSD and windows 10 operating system. I want to install gprMax software, Is there any seperate installation procedure for work stations?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2022, 6:52:24AM",
        "content": "No different installation process needed for workstations.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/E8pnFMJONNw",
    "title": "How to set the hertzian_dipole",
    "original_post": {
      "author": "lu tao",
      "date": "Jul 24, 2019, 5:25:17AM",
      "content": "Hi everyone !\n     I do not understand the commond #hertzian_dipole: c1 f1 f2 f3 str1 [f4 f5]; How to set the the coordinates (x,y,z) of the source in the model. \n     For example, i want to simulate a rock model sized 4*15*1 using 80MHz ricker. How to set the parameters? If i do the wrong, the gprMax will report an error and the waveform will not be expected."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 29, 2019, 5:13:54AM",
        "content": "Dear Tao,\n\nPlease follow the docs (http://docs.gprmax.com/en/latest/input.html#hertzian-dipole) and the basic 2D example (http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder) to understand how to specify a simple source. For example the parameters, f1, f2, f3 in the command for the Hertzian dipole specify the x, y, and z coordinates.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bELLr1EzygQ",
    "title": "Big and complex geometry",
    "original_post": {
      "author": "Jacek Lachowicz",
      "date": "Apr 29, 2016, 5:29:57AM",
      "content": "Hello,\n\nI am using the new gpMax, which new features I like very much.\nUnfortunately I have a little problem. I have a quite big and complex model geometry. I want to calculate the B-scan consisting of 150 traces.\nThe geometry is loaded every loop, which is time consuming. It is possible to load the model geometry once for 150 traces as in gprMax v2?\n\nThank you very much for your help."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 29, 2016, 8:30:30AM",
        "content": "Hi Jacek,\n\nThanks for using gprMax. You raise a very good point, for scenarios where the geometry does not change between A-scans, reloading it every time can be time consuming if the geometry is complex. There is no way to avoid this currently. \n\nIn your case I assume the only thing that is changing between A-scans is the position of any Hertzian sources and receivers?\n\nWe are thinking of implementing a method to build the geometry once and then dump it to file to be quickly reloaded in subsequent models. However to do this I need some more information. Can you tell us which part of processing the geometry is taking the time, i.e. what times does gprMax report for 'Input file processed...' and for 'Model built...'\n\nThanks,\n\nCraig"
      },
      {
        "author": "Jacek Lachowicz",
        "date": "Apr 29, 2016, 9:15:38AM",
        "content": "Craig,\n\nThanks for your answer. You are right, the only thing that is changing betweens A-scans is the position of Hertzian source and receiver.\nIt would be great if you would implement this feature. In my model:\nInput file processed in 0:02:09\nModel built in 0:00:47\nI know that for one A-scan it is not too much, but for 150 traces it will take about 5 hours only for input file processing.\n\nThanks,\nJacek"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 29, 2016, 11:26:13AM",
        "content": "So that means most of the time is spent processing the input file, rather than doing the dielectric smoothing (averaging) which is the model built time.\n\nCan you provide some more information on your model and setup:\n\n- How many lines (approx) are in your input file?\n- What are the dimensions (in cells) reported?\n- What is the memory reported?\n- What machine are you using? Number of CPUs/cores? Speed of cores? Amount of RAM?\n\nThis should help us when thinking about the best route to address the problem.\n\nCheers,\n\nCraig"
      },
      {
        "author": "Jacek Lachowicz",
        "date": "Apr 29, 2016, 12:24:37PM",
        "content": "Answers in red:\n\n- How many lines (approx) are in your input file?\n- 120 lines\n- What are the dimensions (in cells) reported?\n- 525 x 525 x 375\n- What is the memory reported?\n- 7,5GB required 15,9 avaible\n- What machine are you using? Number of CPUs/cores? Speed of cores? Amount of RAM?\n- Intel Core i7-4770 CPU @ 3,40 GHz Cores:4 (2 logical cores per physical), 16 GB RAM\n\nThanks a lot,\nJacek"
      },
      {
        "author": "Craig Warren",
        "date": "May 6, 2016, 11:46:50AM",
        "content": "Hi Jacek,\n\nI've made some changes to the code that means that the input file and building of the model geometry do not have to be repeated for every A-scan. This is only intended for when your geometry does not change between A-scans, and sources/receivers are moved using the #src_steps and #rx_steps commands. This option must be specifically invoked using the command line argument --geometry-fixed, so for example:\n\npython -m gprMax user_models/cylinder_Bscan_2D.in -n 60 --geometry-fixed\n\nCan you test this out with your simulation and let me know how it goes. I'd like to know the time improvement.\n\nYou'll have to build gprMax from the master branch as I've not yet done a release with this in. Let me know if this is a problem. \n\nThanks,\n\nCraig"
      },
      {
        "author": "Jacek Lachowicz",
        "date": "May 10, 2016, 7:18:04AM",
        "content": "Hi Craig,\n\nThank You for implementing this feature.Now is great. The input file is processed in 0:02:15 only at the beggining of the simulations. Model is built in 0:00:49 also only once.\nI can still compare total times, but it may take a while...\n\nThanks,\nJacek"
      },
      {
        "author": "Jacek Lachowicz",
        "date": "May 18, 2016, 5:20:44AM",
        "content": "Hi Craig,\n\nFinally, I was able to carry out calculations for my model and compare the total times.\nUsing the command --geometry-fixed, the calculations were performed in 1D 16:00:31 (45 A-scans).\nWhile for the standard procedure it was 1D 18:48:58.\n\nBest regards,\nJacek"
      },
      {
        "author": "Craig Warren",
        "date": "May 18, 2016, 10:11:46AM",
        "content": "Good to see it improved the overall sim times!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8STMDR5R24M",
    "title": "Calculation of RCS",
    "original_post": {
      "author": "Ruonan Chen",
      "date": "Dec 11, 2020, 4:04:22AM",
      "content": "Hi, all.\n\nCould I use gprMax to calculate the radar cross section directly?\n\nBest regards,\nRuo"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 11, 2020, 6:07:42AM",
        "content": "Hi Ruo,\n\nUnfortunately not at the moment. To calculate RCS you usually need far field data and plane wave excitation for targets (e.g. sphere or whatever). The older version of gprMax had both features (a Huygens Total/Scattered field plane wave source and a Near to Far Field Transformation)  but unfortunately the new one does not as they are not used in GPR modelling and were not a priority when we redeveloped gprMax few years ago. We want to introduce them back in a more powerful way that takes into account a half space and this is a lot more tricky to do so we have not yet managed to implement it.\n\nThe more people ask for this the more it will come up in the list of things we want to do!\n\nBest wishes\n\nAntonis\n\n"
      },
      {
        "author": "Ruonan Chen",
        "date": "Dec 13, 2020, 12:49:39AM",
        "content": "Thanks for your reply! Could you please give me an older verison and its user guide? \n\nBest regards,\nRuo\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 14, 2020, 10:40:25AM",
        "content": "@Ruonan,\n\nSorry, no, the previous version (v.2) of gprMax is no longer maintained or supported.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HANqpF-BTTM",
    "title": "About the topography of snow-soil interface",
    "original_post": {
      "author": "Zohaib Akbar Khan",
      "date": "Aug 10, 2024, 6:07:03AM",
      "content": "hello team.\ni am strugling to creat an inital 2D-model (25m) of snowpack with gprMax by using fractal_box and add_roughnes commonds, try to tune the values but could not creat the unduation in soil as we have from the real field data. is there anyother technique to import the same geometry (topography) into the gprmax through GPS cordinates or the DEM etc?\nRegards\nZohaib"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/tdhBE_Sz6ts",
    "title": "'str' object has no attribute 'endwith'",
    "original_post": {
      "author": "Junjun Liu",
      "date": "Dec 10, 2016, 4:03:54AM",
      "content": "Hi Craig,\n\n   I downloaded and installed gprMax yesterday, and there was a question when I run a file, as shown in the figure, then I checked it, may there should be an attribute named endswith but not endwith in the 143th row in the utilities.py. Hope you can confirm it. Thanks!\n\nJunjun Liu"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 10, 2016, 7:20:26AM",
        "content": "Hi Junjun,\n\nThe attribute needs to be 'endswith'  and I think Craig has fixed this as it is correct in the 'utilities.py' file in GitHub. Try to update the code base you have and should be OK.\n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 10, 2016, 9:19:20AM",
        "content": "Yep this has been fixed - https://github.com/gprMax/gprMax/issues/86"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zAVQEMQm280",
    "title": "ARGS IN FUCTION gprMax.input_cmds_geometry.build_box()",
    "original_post": {
      "author": "Felipe Augusto",
      "date": "Sep 7, 2018, 8:03:14PM",
      "content": "Hi,\n\nUtill this moment i couldn't undestand how i should input some arg's in this function, for exemple:\n\nbuild_box(int xs, int xf, int ys, int yf, int zs, int zf, int numID, int numIDx, int numIDy, int numIDz, bool averaging, __Pyx_memviewslice solid, __Pyx_memviewslice rigidE, __Pyx_memviewslice rigidH, __Pyx_memviewslice ID)\n\naveraging (bint): Whether material property averaging will occur for the object.\nsolid, rigidE, rigidH, ID (memoryviews): Access to solid, rigid and ID arrays.\n\nwhat kind of values should i input to use this function on jupyter notebook?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 11, 2018, 7:43:21AM",
        "content": "Hi Felipe,\n\nThis is an internal function and not part of the exposed gprMax API, i.e. you should not really be using it directly unless you are wanting to develop the code - which we always of course welcome!\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Y1W_KTTz87U",
    "title": "Question about dimensions of model created by PNG",
    "original_post": {
      "author": "Emiliano",
      "date": "Nov 16, 2017, 5:13:32AM",
      "content": "Good morning and thank you very much for the support!\nI'm creating complex geometries using the (amazing) tool that convert PNG file in HDF5 file. Everything is clear, except the method to define the dimensions of the model.\nI'm drawing the geometry in AutoCAD and using the snipping tool of Windows to save the image in PNG.\nI understand how to assign the material and how to position the image into the model, but I can't understand how to define the scale of it. I'm sorry if you have already explained the matter or if it is a common question, but I did not find the answer and I'm not practical in these things.\n\nBest reguards\n\nEmiliano"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 16, 2017, 11:27:32AM",
        "content": "Hi Emiliano,\n\nWelcome to the forum!\n\nSo the size (extent of the domain) of the geometry generated is governed by the pixel dimensions of the image, and each pixel will correspond to the spatial discretisation you specify when you use the 'convert_png2h5' module.\n\nHope this helps.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QLoivd-JoOg",
    "title": "May I ask why my hyperbola is so flat",
    "original_post": {
      "author": "邢小林",
      "date": "Aug 29, 2020, 11:19:58PM",
      "content": "The effect of adjusting some parameters is not very satisfactory.Excuse me .How to set the parameters to make it a bit steeper？"
    },
    "responses": [
      {
        "author": "Cabriell",
        "date": "Aug 30, 2020, 10:26:29AM",
        "content": "Exception has occurred: CompileError\nnvcc preprocessing of C:\\Users\\Admin\\AppData\\Local\\Temp\\tmpbd2c1tr9.cu failed\n[command: nvcc --preprocess -w -arch sm_75 -m64 -Id:\\users\\admin\\anaconda3\\envs\\gprmax\\lib\\site-packages\\pycuda\\cuda C:\\Users\\Admin\\AppData\\Local\\Temp\\tmpbd2c1tr9.cu --compiler-options -EP]\n  File \"C:\\Users\\Admin\\Desktop\\gprmaxdata\\piliangzhuanhuan.py\", line 22, in <module>\n    api(filename,num_scan, geometry_only=geo_only,gpu=[0]) #geometry_only：仅几何图形\n\nThis error occurred when I tried to run with gpu. How can I solve it? I'd appreciate it if you could help me ."
      },
      {
        "author": "Cabriell",
        "date": "Aug 30, 2020, 10:57:47PM",
        "content": "After my constant modification, I found that it may be caused by the two versions of cuda I installed. Now I deleted CUDA9.0, but still have this problem:\nExcuse me .I don't understand why."
      },
      {
        "author": "Craig Warren",
        "date": "Sep 2, 2020, 9:12:37AM",
        "content": "Dear Cabriell,\n\nThe hyperbolic response is fundamental in understanding GPR. It is dependent on a number of different parameters, including the target shape, target material, and background material. How it is displayed is also dependent on the plotting parameters and length of the B-scan.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 2, 2020, 9:14:00AM",
        "content": "Dear Cabriell,\n\nPlease share your Python script that you are trying to run so we can see the full context of the problem.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Hussain Mumtaiz",
        "date": "Dec 14, 2020, 5:05:03PM",
        "content": "Dear Craig ;\nI am interested in understanding the type of change in the hyperbolic response in relation to the target substance. It is in speed or informs or something else.\nreg\n\n"
      },
      {
        "author": "Christian Pigot",
        "date": "Dec 14, 2020, 6:43:22PM",
        "content": "Dear Reg, \nAll the game in the GPR is to interpret those hyperbolas.\nAs Craig mentioned they are dependent on a lot a think and thus contains lots of information.\nWe might better help you if you open a tread with a more specific question\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GrGkizZvJbU",
    "title": "An irregular shape stone buried undergorund",
    "original_post": {
      "author": "alpergenc",
      "date": "Mar 5, 2017, 6:27:01AM",
      "content": "Hi everybody,\n\nBy using GPRmax, is there a way to simulate a single stone which has not a smooth shape? I mean, I want to simulate a realistic stone buried underground which is not perfectly cylindrical or circular. For the material type, I am planning to use the dielectric properties of limestone or sandstone. My problem is to create the shape of the stone. When I have looked at the input commands of GPRmax, there are geometrical shape commands (#cylinder, #sphere, #box, etc.). I could not find a command to create an irregular shape. Is there a way to create irregular shape materials?\n\nKind regards,\nAlper GENC"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 6, 2017, 5:53:46AM",
        "content": "Hi Alper,\n\nWe don't have a specific command for creating discrete rocks/stones at the moment. What you can do at present is add rough surfaces to boxes, but this is not intended for creating a realistic rock. If you can create/find an algorithm for  creating rocks that I'm sure you can test it out by building it from box objects and utilising the Python scripting capabilities of the input file.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "alpergenc",
        "date": "Mar 6, 2017, 2:45:14PM",
        "content": "Hi Craig,\n\nThank you for your answer. For the input file commands, it is written that \"add_surface_roughness\" command allows to add rough surfaces to a \"fractal_box\" in the model. Is it possible to use \"add_surface_roughness\" command with a \"box\" or \"cylinder\" in the model? Otherwise, by using \"fractal_box\", I think I cannot simulate a homogeneous stone.\n\nKind regards,\nAlper GENC"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 10, 2017, 5:01:22AM",
        "content": "Hi Alper,\n\n#add_surface_roughness can be used only with the #fractal_box command. It can be used to add roughness to any side of the box, and can be used with the Peplinski soil model (#soil_peplinski) or with a normal #material\n\nExample of rough surface and homogeneous material\n#material: 5 0 1 0 er5\n#fractal_box: 0 0 0 0.3 0.4 0.5 1.5 1 1 1 1 er5 myfbox\n#add_surface_roughness: 0 0 0.5 0.3 0.4 0.5 1.5 1 1 0.45 0.55 myfbox\n\nKind regards,\n\nCraig"
      },
      {
        "author": "alpergenc",
        "date": "Mar 10, 2017, 5:50:45AM",
        "content": "Hi Craig,\n\nThank you for your answer. It will really help.\n\nKind regards,\nAlper GENC"
      },
      {
        "author": "alpergenc",
        "date": "Mar 12, 2017, 7:51:23AM",
        "content": "Hi Craig,\n\nBy using #add_surface_roughness method I can add roughness to multiple sides of a box, am I right? I mean, for instance:\n\n#material: 5 0 1 0 er5\n#fractal_box: 0.2 0.3 0.4 0.3 0.4 0.5 1.5 1 1 1 1 er5 myfbox\n#add_surface_roughness: 0.2 0.3 0.5 0.3 0.4 0.5 1.5 1 1 0.45 0.55 myfbox\n#add_surface_roughness: 0.2 0.3 0.4 0.3 0.4 0.4 1.5 1 1 0.35 0.45 myfbox\n\nBy using the command above, I can add roughness to both upper and lower side of the box. Is it correct?\n\nRegards,\nAlper GENC"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 12, 2017, 1:14:00PM",
        "content": "Yes, you can use the #add_surface_roughness command up to six times, for each side of a #fractal_box\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kI5t3wi2B3s",
    "title": "Subgridding in gprMax",
    "original_post": {
      "author": "Peleg Haruzi",
      "date": "Jul 4, 2018, 5:36:34AM",
      "content": "Hi gprMax developers\n Your group just presented subgridding approach for efficient modelling of GPR using FDTD  \n(Hartley et al., 2018. 17th International Conference on Ground Penetrating Radar ) \nCan you tell when it will be available for gprMax users ?\nGreetings\nPeleg"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 4, 2018, 5:52:13AM",
        "content": "Hi Peleg,\n\nThis is John's PhD research and finishing the work he is doing is obviously his priority. At some point the subfridding code will be merged with the normal gprMax but there is no firm timeline at the moment. If John has anytime this summer there might be an attempt to release it but there is no immediate plan and cannot make any firm commitments.\n\ngprMax is developed on the back of research work we do and no one is purely a full time developer for it so, timelines are not as well specified for releasing things.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gXU8xGlBNU4",
    "title": "Puzzle about the air wave signal is smaller than the reflected wave",
    "original_post": {
      "author": "HT.T",
      "date": "Oct 13, 2020, 3:56:46AM",
      "content": "Hello developer\n\n       When I was doing the CMP simulation, I found a problem which puzzled me. In the same model, \n\nthe receiving antenna received the direct wave signal from the air weaker than the reflected wave \n\nsignal in the material, especially when the transmitting antenna was far away.\n\nKind regards。\n\n       HT.T\n\n\n  #domain: 1 0.65 0.002 \n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 20e-9\n\n## zn000 \n#material: 13.8 0 1 0 zn000\n#add_dispersion_debye: 2  0.898796825856692   2.66366042522921E-10   330.666646373169   9.99999999999934E-8  zn000\n#pml_cells: 1 0 0 1 0 0 \n\n#box: 0 0 0 1 0.65 0.002 free_space\n#box: 0 0.1  0 1.0 0.11 0.002 pec\n#box: 0 0.11 0 1.0 0.28  0.002 zn000\n#waveform: ricker 25 600e6 my_ricker\n#hertzian_dipole: z 0.1 0.31 0.000 my_ricker\n#src_steps: 0.01 0 0\n#rx: 0.9 0.31 0.000\n#rx_steps: -0.01 0 0"
    },
    "responses": [
      {
        "author": "HT.T",
        "date": "Oct 13, 2020, 4:14:44AM",
        "content": "Sorry, I can't upload pictures due to Google"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 15, 2020, 11:38:21AM",
        "content": "Dear HTT,\n\nI haven't looked at the geometry of your model, and if you can find a way to upload a picture of the geometry and the CMP data that would help. \n\nWhat I would say is that (for common offset data) depending on the separation of your source and receiver, the material properties of the surface layer of your model, and the height of your source and receiver above the surface, the direct air way and ground wave can combine destructively (depending on phase) so that the first part of your signal has a smaller amplitude than reflections from sub-surface events. If you lift your source and receiver off the surface in your simulations you be able to confirm or not whether this is happening.\n\nI would also note that your model appears to only use 1 cell of PML in the x-directions and no PML in the y-directions. Is there a reason for this?\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MA4MOH88fiI",
    "title": "how to use the vti file to make a picture by python",
    "original_post": {
      "author": "HT.T",
      "date": "Jan 29, 2021, 9:56:04AM",
      "content": "Hello guys! I am bothered by how to use  a vti file  to build a picture  by python not paraview,  I need  some  help\nThanks!\nHT.T"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 29, 2021, 3:59:48PM",
        "content": "There is a VTK toolkit for Python which you could look at - https://pypi.org/project/vtk/ This might allow you to convert the file to a numpy array and then display as an image. Why do you want to do this? It may be OK for smaller 2D geometries, but will most likely be quite slow and tricky for bigger 3D models.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "HT.T",
        "date": "Feb 2, 2021, 7:21:28AM",
        "content": "Thank you! When I used vtkDataSetReader or vtkXMLImageDataReader to open my vti  file, there was a mistake 'ValueError: could not extract hexadecimal address from argument string',But I can use paraview to open the vti file.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/px4KpWkl3rs",
    "title": "Absorption in the model",
    "original_post": {
      "author": "Svetlana Bricheva",
      "date": "Mar 15, 2016, 9:17:32AM",
      "content": "Hello, dear masters! I have one question to you. I'm doing the simulation of experiment with separated source and receiver. I have a model, like at the picture below. Between the antennas I put the water with different conductivity. After the simulation I analyze the spectra of first and multiple reflections. And I see, that the central frequency (about 700MHz) of these waves are not change. You can see my radar trace and spectra on the picture also.\nIt is not right, the frequency should decrease because of absorption effects. And I want to ask you, how GprMax take into account the absorption of the medium?\nThank you!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 15, 2016, 9:31:10AM",
        "content": "Hi Svetlana,\n\ngprMax solves numerically Maxwell's equations without any major simplifying assumptions about the properties. They can be diagonally anisotropic and frequency dependent if you wish. In a simple form the permittivity and conductivity assume frequency independent parameters. However, that does not mean that absorption is not still frequency dependent. It all relates to the size of your pulse, the strength and type of the attenuation and the distance waves need to travel through a medium.\n\nI do not know in your case what properties you have used for water and its description of its conductivity. However, your model is rather short and even your third multiple has only travelled just over half a meter in the medium. If the conductivity is not very strong there will be no much of pulse alteration apart from geometric amplitude loss. \n\nBest\n\nAntonis"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Mar 18, 2016, 8:22:09AM",
        "content": "Thank you for response, dear Antonis!\n\nI have one more question to you about amplitudes and, maybe, attenuation.\nFirstly, I have the water with such properties:\n\n#title: my waterbox (58 cm) with real pulse\n---------------------------------------------------------------------\n#domain: 0.2 0.8 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 10e-8\n#time_step_limit_type: 2D\n#pml_cells: 10 10 0 10 10 0\n---------------------------------------------------------------------\n#material: 81 0.03 1 0 my_water\n#excitation_file: mysource.txt\n#hertzian_dipole: z 0.1 0.69 0 mysourceres\n#rx: 0.1 0.09 0\n---------------------------------------------------------------------\n#box: 0 0.1 0 0.2 0.68 0.001 my_water\n\n\n\nHere I use box with two variants of heigh^ h = 28 and 58 cm. I analyze both spectra and amplitudes of all reflections.\nThe amplitude of second reflection should decrease by 3 times compared to the first reflection because of divergence loss (this wave go through the medium three times) and by reflections on the boundaries water-air (reflection coefficient is 0.64). So, the total amplitude decrease must be by 3/0.64 = 4.69 times. When I simulate the smaller distance (28 cm) I have this values for second and third reflections. But for the larger distance (58 cm) my amplitude decrease by 7 times... Maybe I didn't consider some attenuation? But what else can affect the amplitude decrease in gprmax?\n\nThank you,\nSveta"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 18, 2016, 8:41:34AM",
        "content": "Hi Svetlana,\n\nThe simple calculation of loss mechanism is not wrong but it makes sometimes assumptions and simplifications that are not always valid 100%. For example the geometric loss mechanism assumes propagation of energy through an over expanding sphere (in 3D) which in reality neglects contributions of the antenna gain in specific directions. The reflection coefficient is only valid to normal plane wave incidence and the attenuation losses are assumed to be frequency independent. Not all of these assumptions are valid 100% in a full-wave model that uses 3D sources and not simple plane wave scattering. If you want to isolate the effects of loss mechanisms and study how they compare to the simplified theoretical versions you use, you should do experiments that involve the variation of only one parameter. (e.g. no attenuation in the media to check geometry loss, etc.)\n\nFinally, your water model is not strictly correct especially as gprMax allows you to model it properly using the Debye model for water relaxation. An example is in the manual.\n\nRegards\n\nAntonis"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Mar 25, 2016, 8:35:14AM",
        "content": "Hi. Antonis!\n\nThanks for your helpful advices. I modelled some examples of my previous task with water box. The obtained results don't satisfy me :)\n\nI examined three heighs of box with water - 28 cm, 58 cm and 100 cm - and two conductivities - 0.03 Sm/m and 0.01 Sm/m. In all these cases the central frequency of spectra is not change. The behavior of amplitudes is also unclear. I create the table, where the relations between amplitudes are represent. A1 - first signal amplitude, A2 and A3 - multiple reflections amplitudes.\n\nh\nr = 100 Ohm*m\nr = 30 Ohm*m\nA1/A2\nA2/A3\nA1/A2\nA2/A3\n28 cm\n4.3\n3.3\n3.6\n3.4\n58 cm\n4.29\n3.32\n7\n5,42\n100 cm\n8\n7\n18.47\n17\n\n3-4 times decreasing is correct, but why this ratio decreases so sharply - to 8-18?..\n\nUnfortunatelly, I couldn't find in manual, how the attenuation of material is defined.\n\nSvetlana"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 25, 2016, 9:10:01AM",
        "content": "Hi Svetlana,\n\nThe attenuation is modelled via the use of a conductivity term in Maxwell's equations or via the use of a dispersive permittivity mechanism or by a combination of both mechanisms. You can check the references on the implementation of the dispersive media formulation that are in the manual. \n\nFinally, \"attenuation\" does not really exist as a parameter of the material itself. It depends on the material loss mechanisms that can be rather complex. gprMax handles this well using the definitions above (i.e. conductivity and dispersive permittivity) \n\nWhat are the formulas that you are using to make your theoretical predictions? \n\nBest\n\nAntonis"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Apr 4, 2016, 8:10:11AM",
        "content": "Hi, Antonis!\n\nI want to model my waterbox using the Debye model for water relaxation, as you adviced. I try to run my input file with commands from the manual:\n\n#domain: 0.2 0.8 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 10e-8\n#time_step_limit_type: 2D\n#pml_cells: 10 10 0 10 10 0\n---------------------------------------------------------------------\n#material: 4.9 0 1 0 my_water\n#add_dispersion_debye: 1 75.2 9.231e-12 my_water\n\n#excitation_file: mysource.txt\n#hertzian_dipole: z 0.1 0.69 0 mysourceres\n#rx: 0.1 0.09 0\n---------------------------------------------------------------------\n#box: 0 0.1 0 0.2 0.68 0.001 my_water\n\nAll was running correctly, until the string, where I put the dispersion. I have this error:\n\n  File \"C:\\Users\\admin\\Desktop\\new_version\\gprMax-v.3.0.0b20\\gprMax\\input_cmds_m\nultiuse.py\", line 531, in process_multicmds\n    print('Debye-type disperion added to {} with delta_epsr={:g}, and tau={:g} s\necs created.'.format(material.ID, ','.join('%4.2f' % deltaer for deltaer in mate\nrial.deltaer), ','.join('%4.3e' % tau for tau in material.tau)))\nValueError: Unknown format code 'g' for object of type 'str'\n\nCan you explain me, what is wrong, please? Thank you!\n\nSveta"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 4, 2016, 8:16:22AM",
        "content": "Hi Svetlana,\n\nThis is printing bug I fixed at the end of February. The version you are running is out-of-date.....we update things quickly! Download the latest version and the error should disappear. You can also remove the #pml_cells command and #time_step_limit_type command as these are now set automatically.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Apr 4, 2016, 10:09:58AM",
        "content": "Oh, Craig, you are really fast! =)\n\nI have installed the last version of gprmax, and now, when I try to run one of my previous files (it works in older version of gprmax) here I have some error with dividing by zero. It is strange...\n\nFile \"C:\\Users\\admin\\Desktop\\new_version\\gprMax-v.3.0.0b25\\gprMax-v.3.0.0b25\\g\nprMax\\grid.py\", line 126, in dispersion_check\n    minwavelength = minvelocity / maxfreq\nFloatingPointError: divide by zero encountered in double_scalars\n\nDo you think about the creation of a list of some common error messages for beginners like me, so we did not ask you a a lot of simple questions?)"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 4, 2016, 10:18:43AM",
        "content": "Svetlana, Can you paste or attach the input file.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Apr 4, 2016, 10:24:53AM",
        "content": "Of course, here it is:\n\n#title: my waterbox with analytical signal\n#domain: 0.2 0.5 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 5e-8\n\n#material: 81 0.03 1 0 my_water\n\n#excitation_file: mysource.txt\n#hertzian_dipole: z 0.1 0.39 0 mysourceres\n#rx: 0.1 0.09 0\n\n#box: 0 0.1 0 0.2 0.38 0.001 my_water\n\n#geometry_view: 0 0 0 0.2 0.5 0.001 0.001 0.001 0.001 my_waterbox f"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 4, 2016, 10:33:16AM",
        "content": "I see the problem.....not your fault. This is why we beta test!\n\nI introduced a check to help users avoid numerical dispersion in their models. It looks for the maximum frequency present in the model. Although the check works for built-in waveforms, i.e. gaussian, ricker etc... I did not code it to handle user defined excitations. I'll try to fix this later today or tomorrow, and post a new release when I've done so. You can try using a built-in waveform for now.\n\nCraig"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Apr 4, 2016, 10:46:22AM",
        "content": "Yes!! It works! Thanks, Craig. I will continue my work with ricker pulse, it is ok. The comparison our pulse with table waveform is also part of my work!\n\nSveta"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 4, 2016, 1:08:42PM",
        "content": "Great.\n\nI've updated the code (v.3.0.0b26) so it should correctly check/warn for numerical dispersion when a waveform is user-defined. Can you run it with your own excitation and check please.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Svetlana Bricheva",
        "date": "Apr 4, 2016, 2:19:59PM",
        "content": "I have installed v.3.0.0b26 and run my model. It work correctly! Thanks.\n\nSveta"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hDxChxFxxp4",
    "title": "gprMax-questions",
    "original_post": {
      "author": "zhou shirong (jfzsr)",
      "date": "Jan 30, 2024, 2:26:00AM",
      "content": "Dear gprMax developers,\n\nHow is geometric damping (i.e. signal decay over distance) achieved by gprMax during simulation?\n\nSincerely, \nShirong Zhou"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 21, 2024, 5:40:10AM",
        "content": "gprMax is a full wave electromagnetic solver and discretises Maxwell's equations in 3D using the Yee cell and Finite-Difference Time Domain (FDTD) method. Therefore the effect of geometric spreading is fully captured in the simulations.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lMjqKTalNFc",
    "title": "execution multi inputfiles in one commands",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Apr 17, 2020, 11:14:29AM",
      "content": "Good afternoon ,\n\n\nas we known to execute inpute files i need to write this commands in cmd \n\ncd \"path\"\nactivate gprMax\npython -m gprMax filename.in\n\nit works well !\n but it is not practical for multi inputs files\n\ni have now 100 inputfiles and i want appropiate code to write it in python or in matlab or even in cmd windows to obtains 100 output files (one after another) in one click"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 19, 2020, 8:55:36AM",
        "content": "Ahmed,\n\nYou could write a batch file for Windows (note I have no experience of this), or use the gprMax API which I described in a previous post - https://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FCge8DOhZ7rk%2F0qNySJhfGgAJ\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HkUz6CWgSig",
    "title": "Is there a way to introduce some angle of rotation to an antenna?",
    "original_post": {
      "author": "Arden Kuyumcu",
      "date": "Dec 9, 2018, 7:19:28AM",
      "content": "I want to simulate a moving antenna which should rotate arround its axis perpendicular to the screen. Is there a way to do it? \n\nThank you!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 9, 2018, 6:08:22PM",
        "content": "The short answer is No. An antenna model can be positioned along the three man axes and it cannot be rotated. You might want to consider to rotate the targets instead (if that is possible)\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 10, 2018, 3:40:58AM",
        "content": "Hi Arden,\n\nAs Antonis says only rotation about the 3 main axes is allowed for the antenna models, see the docs for how to perform this rotation - http://docs.gprmax.com/en/latest/user_libs_antennas.html#how-to-use-the-module\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Kju9ciEmfjw",
    "title": "Waveguide excitation",
    "original_post": {
      "author": "Tim Tilford",
      "date": "Nov 24, 2017, 12:07:42PM",
      "content": "Hi,\n\nJust a quick query regarding wave guide excitation. I would like to excite a normal rectangular waveguide with a TE10 mode. What is the best way to do this in gprMax? Is there a total-scattered formulation?\n\nThanks in advance.\n\nTim."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 27, 2017, 5:26:17AM",
        "content": "Hi Tim,\n\nAt the moment there is no TF/SF separation and plane wave excitation. This is not a very difficult thing to add and the older version had this implemented. However, we wanted to upgrade the formulation to handle a half-space or even a layered model and this is more tricky to do. As we do not use these types of excitation in GPR modelling they have been pushed back as a priority. So, it is not available at the moment but it will be...\n\nThe current excitation mechanisms are primarily based on adding current density terms J and M (hertzian dipole and magnetic dipole) which they are not really what you want. The voltage source is close but even that is not just setting the E and H field to specific values for a waveguide excitation. This again is not difficult to do but it needs someone to spent some time and implement it. The framework for programming these is pretty much the same as the existing sources but needs to be done ...\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qMlBrA-3Vp0",
    "title": "About convert_png2h5",
    "original_post": {
      "author": "Haoyuan Cheng",
      "date": "Aug 16, 2022, 9:22:07AM",
      "content": "Dear Craig，\nI want to know if this can realize the function of rotation?\n\nkind regards,\ncheng"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2022, 4:50:57AM",
        "content": "Dear Cheng,\n\nIf you want to rotate geometry that you have generated using the 'convert_png2h5.py' tool, then you have a couple of options:\nThe easiest is probably to rotate your image with an image tool (Adobe Photoshop, GIMP etc....) before using the 'convert_png2h5.py' tool.\nBy default the 'convert_png2h5.py' tool assumes the invariate geometry direction as z, if you want to change this then you would need to carefully edit the code in the 'convert_png2h5.py' module.\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Haoyuan Cheng",
        "date": "Aug 17, 2022, 10:59:26PM",
        "content": "Thank you,Dr.Craig,\nFor your guidance.I understand,but it can't rotate as a whole(for example,forming a 45° angle with the XOY surface).It must be ensured that the generated model is perpendicular to the two coordinate axes,can i understand it this way?\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 19, 2022, 5:39:07AM",
        "content": "You could rotate your image as you like in an image manipulation tool before using 'convert_png2h5.py'. Since FDTD uses a cubic Yee cells it is usually better (objects more accurately modelled) if objects are aligned to the grid, but there is nothing preventing them not being aligned - you should just be careful if your objects are fine and detailed structures (like antenna models) that you do not break connections when you rotate to angles not aligned to the grid.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PoGPIIuAvTs",
    "title": "A question about command #rx",
    "original_post": {
      "author": "Lun MA",
      "date": "May 3, 2019, 12:18:54PM",
      "content": "Hi,\n\nI noticed that there is a parameter str1, the identifier of the receiver,  in command #rx.  In GSSI.py, it is set as 'rxbowtie'. I wonder if there's any other option for this identifier, such as a dipole. \n\nThank you very much!\n\nLun"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 7, 2019, 5:01:29AM",
        "content": "Dear Lun,\n\nThe str1 parameter in the #rx command is purely an identifier. You can set it to any name you like, it does not affect the modelling.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FiPedRBUISo",
    "title": "How to move the object to be detected in the simulation",
    "original_post": {
      "author": "Lun MA",
      "date": "Jun 3, 2020, 5:19:11AM",
      "content": "Hi everyone,\n\nAs we know, gprMax can move the transmitter or receiver in the simulation. I wonder if there's a way to make the object moving whereas the radar keeps stationary.\n\n\nCheers,\nLun"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 3, 2020, 3:51:00PM",
        "content": "Dear Lun,\n\nYes, you could use Python scripting in your input file (http://docs.gprmax.com/en/latest/python_scripting.html#scripting-the-input-file) to move objects between model runs. Using the 'current_model_run' variable with the coordinates of your object. It is in effect the same as using '#src_steps' or \"#rx_steps' but you use it to move (or change) objects and parameters for different model runs.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Lun MA",
        "date": "Jun 6, 2020, 4:49:51AM",
        "content": "Thanks, Craig, I will try:)"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EEXXyOXZBDI",
    "title": "Error in gprMax_info macro in Paraview",
    "original_post": {
      "author": "Hengameh Noshahri",
      "date": "Aug 18, 2020, 5:08:25AM",
      "content": "I installed gprMax_info.py as a macro in Paraview. However, when I select the macro from the Toolbar I get the following error:\n\nTraceback (most recent call last):\nFile \"<string>\", line 43, in <module>\nTypeError: startswith first arg must be bytes or a tuple of bytes, not str\n\n\nCan someone please help me with resolving this error?\n\nI appreciate your attention and effort.\n\nBest regards,\nHengameh"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "Aug 18, 2020, 3:34:27PM",
        "content": "Hi,\nwhat version of Paraview are you using? The macro gave me errors in Paraview 5.8. I tried 5.7 and 5.5.2 and they both work.\n\nBest regards\nAndrés\n"
      },
      {
        "author": "Hengameh Noshahri",
        "date": "Aug 19, 2020, 6:53:06AM",
        "content": "Hi Andrés,\n\nThanks for your reply. I use 5.8, I'll try previous versions as you suggested.\n\nbest regards,\nHengameh"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/tqLwxumj6Ps",
    "title": "Simulating antenna arrays",
    "original_post": {
      "author": "Vaheed G",
      "date": "Dec 26, 2023, 12:47:05PM",
      "content": "Hello,\n\nHappy holidays everyone, I was wondering what is the best way to simulate an antenna array, by default all the Rx points receive from all Tx points, I can delay (and stop) the firing of each Tx point but there is no way to delay (and stop) a Rx point.\nIs there anyway other than post processing to simulate an array scenario?\n\nThanks,\n-Vaheed"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 22, 2024, 5:27:07AM",
        "content": "Don't think so. As you suggest post-processing the receiver outputs is probably what you will need to do.\n\nCraig\n\n"
      },
      {
        "author": "Florence Lucey",
        "date": "Jul 30, 2024, 10:49:31AM",
        "content": "Following up on this question, \n\nIs there a way to turn the receiver off and on as we can with the source? If not, why isn't that something that is apart of the software? \n  \n-Flo\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2024, 11:15:35AM",
        "content": "I am not sure why you would need this or what you are trying to achieve, but you can just ignore or cut the output from a receiver at whatever point in time you want it to stop - the receiver is just a point that is sampling the electromagnetic field, it has no physical representation.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/n0E2UUZRBuI",
    "title": "request for real dataset for learning",
    "original_post": {
      "author": "AISWARYA K P",
      "date": "Jul 12, 2024, 3:20:23AM",
      "content": "Hello everyone,\nCould anyone please share some real GPR data obtained from GPR equipment, along with the corresponding simulation data generated using gprMax? I need this for practice with the gprMax software.\nThank you in advance!"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Q6jXlRh9DR4",
    "title": "1600Mhz",
    "original_post": {
      "author": "Dafnik Saril Kumar David",
      "date": "Aug 23, 2022, 10:40:43AM",
      "content": "Hai,\n\nThis is Dafnik David, a researcher at UTA. I am looking for an antenna like_1600MHz input for experimental is there any python source code available for it?\n\nThanks\nDafnik"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 29, 2022, 7:16:51AM",
        "content": "Hi Dafnik,\n\nThe antenna models are only the ones included in the user library antenna models packages, i.e. GSSI 400MHz and 1.5GHz amd Mala 1.2GHz. Each GPR antenna is different (some more so than others), so each requires a unique antenna model to be created. You can read about the process of creating antennas models in some of our publications:\n\n• Giannakis, I., Giannopoulos, A., Warren, C. (2019). Realistic FDTD GPR Antenna Models Optimized Using a Novel Linear/Nonlinear Full-Waveform Inversion. IEEE Transactions on Geoscience and Remote Sensing, 57(3), 1768-1778. 10.1109/TGRS.2018.2869027\n• Warren, C., Giannopoulos, A. (2011). Creating finite-difference time-domain models of commercial ground-penetrating radar antennas using Taguchi's optimization method. Geophysics, 76(2), G37-G47. 10.1190/1.3548506\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/j0aXFjMQR2Q",
    "title": "reading Ascan only Ez as array by python",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Jun 30, 2020, 9:19:23AM",
      "content": "Hallo ,\n i have generated  huge number of output files (35600) and  i want for every file to read corresponding input file.\n\nhave anyone of you  an idea or code to read only Ez component by python in Array from h5py files\n\nthank u in advanced"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2020, 10:31:38AM",
        "content": "Dear Ahmed,\n\nHave a look at the code in the 'plot_Ascan.py' module. You will see how to load output data (and specific field components) from the HDF5 file. You can also look in the 'outputfiles_merge.py' module for how to read data in a loop from multiple output files.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fnYOlzlgcbA",
    "title": "GPR MAX installation problem",
    "original_post": {
      "author": "江立超",
      "date": "Nov 5, 2019, 4:34:05AM",
      "content": "Hello everyoe\n when i install gprMax in our school HPC cluster (centos) i come across a problem,like that\nthis problem take place at the command of \"conda env create -f conda_env.yml\",it stucks me for some weeks i hpoe someone can hellp me solve it.\nThank you\n with my best wish!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 5, 2019, 7:01:02AM",
        "content": "Can you post the full traceback error please, as the screenshot does not show everything.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/H_M9d3A3EEc",
    "title": "Bscan error",
    "original_post": {
      "author": "Jordan John",
      "date": "May 25, 2020, 1:40:41AM",
      "content": "When i tried to run a B scan with own data, and it shows this error, what is the mistake that i probably has done?. I would appreciate if anyone can solve my problem. Thanks a lot. (Still learning)\n\nTraceback (most recent call last):\n  File \"C:\\Users\\COMP1\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"C:\\Users\\COMP1\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 86, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\COMP1\\Desktop\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\COMP1\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 66, in main\n    run_main(args)\n  File \"C:\\Users\\COMP1\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"C:\\Users\\COMP1\\Desktop\\gprMax\\gprMax\\gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\COMP1\\Desktop\\gprMax\\gprMax\\model_build_run.py\", line 313, in run_model\n    raise GeneralError('Source(s) will be stepped to a position outside the domain.')\ngprMax.exceptions.GeneralError: Source(s) will be stepped to a position outside the domain."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 25, 2020, 6:13:30AM",
        "content": "Dear John,\n\nWelcome to the forum! \n\nAs the error message suggests you have tried to move the sources in your model to a position outside of the domain of the model. So either:\n\n- Change the starting position of your source(s)\n- Change the distance they move on each run of the model, e.g. #src_steps\n- Change the number of times you run the model\n\nWhich one (or more) of these you need to address will depend on your specific situation.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Jordan John",
        "date": "May 26, 2020, 6:01:56AM",
        "content": "Thank you Dr Craig, Will try with your suggestion"
      },
      {
        "author": "Jordan John",
        "date": "May 26, 2020, 6:09:21AM",
        "content": "As i were trying with the suggestion, i did obtain and warning message: \n\nWARNING: Numerical dispersion analysis not carried out as waveform does not fit within specified time window and is therefore being truncated."
      },
      {
        "author": "Craig Warren",
        "date": "May 26, 2020, 8:48:01AM",
        "content": "Dear John,\n\nAgain, the error message explains what is going wrong. I'm afraid if you don't understand this you need read a bit more about the underlying numeric method (the Finite-Difference Time-Domain (FDTD) method) that gprMax uses. There is some very basic guidance in our docs - http://docs.gprmax.com/en/latest/gprmodelling.html#guidance-on-gpr-modelling\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JbogrQ1Eji4",
    "title": "gprMax question",
    "original_post": {
      "author": "zhou shirong (jfzsr)",
      "date": "Jan 23, 2024, 9:29:10AM",
      "content": "Dear gprMax developers, \n\nMy questions is:Does gprMax have geometric damping (i.e. signal attenuation with distance) during simulation?\n\nSincerely, \nShirong Zhou"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 23, 2024, 10:11:41AM",
        "content": "Yes it does.\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/0MKmQQEwpfY",
    "title": "Data Availability request",
    "original_post": {
      "author": "Samuel Hailemariam",
      "date": "Jul 18, 2023, 5:25:19PM",
      "content": "hello Dr. Antonis Giannopoulos\n\nOn your behalf, the following paper is attached: https://doi.org/10.3390/rs13040723: Optimising the Complex Refractive Index Model for Estimating the Permittivity of Heterogeneous Concrete Models. Additionally, could you send me a sample input file for a gprmax simulation using a heterogeneous concrete model? if it is possible.\n\nSamuel.H"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 19, 2023, 12:43:09PM",
        "content": "Hi Samuel,\n\nThe results for this paper were generated by the first author who was my PhD student at the time. I do not have any input models. His PhD thesis can be freely obtained from \nhttp://dx.doi.org/10.7488/era/1466 in case it helps your research.\n\nBest wishes\n\nAntonis\n"
      },
      {
        "author": "Samuel Hailemariam",
        "date": "Jul 19, 2023, 1:20:35PM",
        "content": "Dear Dr. Antonis \n\nI appreciate the information; I'll read the thesis.\n\nSamuel.H\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QuN19nKUJcs",
    "title": "Unable to load gprMax on Microsoft Windows",
    "original_post": {
      "author": "David Rohde",
      "date": "Jul 1, 2021, 3:18:59PM",
      "content": "Hi, I hope someone can help me with this.\n\nI'm able to get through the initial installation steps of loading gprMax, but I get these two errors when executing the \"python setup.py build\". My path environment has been set properly so I don't think that is the issue:\nLINK : fatal error LNK1104: cannot open file 'build\\lib.win-amd64-3.9\\gprMax\\pml_updates\\pml_updates_magnetic_HORIPML_ext.cp39-win_amd64.pyd'\nerror: command 'C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.29.30037\\bin\\HostX86\\x64\\link.exe' failed with exit code 1104\nAlso, when I followed the path it doesn't look like the file is part of the build:  \"build\\lib.win-amd64-3.9\\gprMax\\pml_updates\\pml_updates_magnetic_HORIPML_ext.cp39-win_amd64.pyd\" \n\nthanks,\nDavid"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 1, 2021, 3:46:50PM",
        "content": "David we will look at this via the post you made on our GitHub issue tracker - https://github.com/gprMax/gprMax/issues/289\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/l03dIh0QINU",
    "title": "How to correctly back calculate permittivity from the output.",
    "original_post": {
      "author": "Kaushal Kishore",
      "date": "Feb 5, 2022, 10:46:48PM",
      "content": "Hi I have modeled 2D 3 layered system. I want to back-calculate permittivity from the signal that i obtained. The permittivity values for the first layer was near to the modeled value, however, for the second and third layers i am getting some weird values when compared to the input values."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 8, 2022, 9:25:06AM",
        "content": "We'll need some more details to help. How are you trying the back calculate the permittivity? You have both lossy and heterogeneous (via Peplinski soil model and fractal distribution) materials in your model.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/c5k_Im4N4T4",
    "title": "About 400 MHz GSSI antenna",
    "original_post": {
      "author": "Kerem Ozkap",
      "date": "Nov 19, 2018, 1:27:18PM",
      "content": "Hi Craig,\n\n I want to test the 400 MHz GSSI antenna, but when I use the existing antenna_like_GSSI_400_fs.in file in the user_models folder, I get the following error messages;\n\nWARNING: Numerical dispersion analysis not carried out as either no waveform detected or waveform does not fit within specified time window and is therefore being truncated.\n\nCould you help me please about this issue?\n\nBest regards,\n\nKerem"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 20, 2018, 6:14:12AM",
        "content": "Hi Kerem,\n\nIn this case you can ignore the numerical dispersion warning. It occurs with this model because an extra waveform with zero amplitude is used to be able to place a resistive source on the receiver part of the antenna. You can view the entire input file by running it with the '--write-processed' argument. See http://docs.gprmax.com/en/latest/include_readme.html#optional-command-line-arguments\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/10q5MNeE2Hc",
    "title": "Is there any .m function for conversion from ‘.out’ file to '.mat' file?",
    "original_post": {
      "author": "Xuebing Zhang",
      "date": "Dec 19, 2018, 10:46:30AM",
      "content": "Dear Craig,\n\nI noticed that there are some issues concerning about how to convert the ‘.out’ file to '.mat' file. You have answered the question that it could be found in the latest code. i.e.  http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2F-7Z1Ja4F07w%2FWXTa2YFGCwAJ. \nBut I only found some .m function from .out to .rad in the MATLAB_scripts. So I am writing to consult is there any matlab scripts are provided for conversion from ‘.out’ file to '.mat' file.\n\nRegards,\nXuebing Zhang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 20, 2018, 3:32:47AM",
        "content": "Dear Xuebing,\n\nYou can use as a base either the 'plot_Ascan.m' or 'plot_Bscan.m' scripts (in the tools->MATLAB_scripts directory), which import the HDF5 (.out) file into MATLAB. You can then save the data from MATLAB in whatever way you like.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8x-erhogqGY",
    "title": "Problems with gpu acceleration",
    "original_post": {
      "author": "ss s",
      "date": "Oct 10, 2024, 11:49:15PM",
      "content": "Dear gprMax team, Recently I've been getting some warning messages while accelerating my simulation with GPU, I'm wondering if this will affect the simulation process and if it will hopefully tell me how to fix it."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 20, 2024, 10:59:19AM",
        "content": "I've seen these types of warnings on Windows with CUDA before - I don't believe they affect performance.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EuAuz2KufJ8",
    "title": "How to scan using a circular profile",
    "original_post": {
      "author": "Paride Betti",
      "date": "May 7, 2019, 8:27:03AM",
      "content": "Hello everyone,\nI want to show my problem\nFirst of all I'm using version 2.0 of gprmax.\nI want to know how you can solve the problem in an intelligent and fast way.\nI have to do many 2D scans in a circular way, but the commands for scan steps are available only to follow linear and non-curved directions.\nMy tests were:\nTry to find a step for x and y at least to approximate a part of the circular form, but it is an inaccurate job and not very fast.\n\nI wrote a code with precise coordinates for tx following the results of sine and cosine with respect to the increasing angle of the point where the scans start, with the whole tx under the same analysis, but tracing the results obviously I find a lot of interference.\n\nLast attempt, obtain a b-scan starting from the assembly of all the a-scans obtained from as many different analyzes.\nObviously this would resolve itself but not very quickly.\n\nThe best thing would be to feed the sine and cosine functions to the tx_steps commands.\nI would like to know if there is a faster solution than those found for obtaining measurements taken in circular and non-linear geometry.\nThanks for the attention.\nParide Betti."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 7, 2019, 8:48:59AM",
        "content": "Hi Paride,\n\nThe short answer is: upgrade to gprMax v.3!\n\nThe longer answer: We don't support v.2 anymore. You may find some people on the forum willing to help. In v3 you can use a block of Python in your input file to help script the position of transmitters and receivers to anywhere you like in the model. You can then use the variable 'current_model_run' to ensure they are moved between A-scans to build up your B-scan from a single input file.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paride Betti",
        "date": "May 11, 2019, 7:02:56AM",
        "content": "Hi Craig, I installed version 3.0 but now, besides not knowing Python, I don't know how to use python in the gprmax code. I could have some examples of gprmax code that uses python blocks and then some syntax rules?\nthanks\nParide"
      },
      {
        "author": "Craig Warren",
        "date": "May 13, 2019, 3:46:35AM",
        "content": "You need some basic knowledge of Python, otherwise, you could use MATLAB to construct your input file.\n\nFor examples of Python blocks in the input file see:\n\nhttp://docs.gprmax.com/en/latest/python_scripting.html\nhttp://docs.gprmax.com/en/latest/examples_antennas.html#bowtie-antenna-model\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paride Betti",
        "date": "May 15, 2019, 10:01:09AM",
        "content": "Hello mr Craig, the code i wrote is as follow and it works:\n\n#title: 126 circular scans from a tree trunk\n#domain: 1.2 1.2 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 20.0e-9\n\n#material: 3 0.001 1 0 my_sand\n#cylinder: 0.7 0.7 0 0.7 0.7 0.005 0.4 my_sand\n#cylinder: 0.65 0.8 0 0.65 0.8 0.005 0.2 free_space\n\n\n\n#python:\n\nfrom gprMax.input_cmd_funcs import *\nwaveform('ricker', 1, 900e6, 'my_ricker')\nhertzian_dipole('z', 0.05*current_model_run, 1.1, 0, 'my_ricker')\nrx(0.05*current_model_run, 1.1, 0)\n#end_python:\n\nNow i would like to edit the previous code in this way:\n\nhertzian_dipole('z', 0.7+ cos(0.05*current_model_run)*0.4, 0.7+ sin(0.05*current_model_run)*0.4, 0, 'my_ricker')\nrx(0.7+ cos(0.05*current_model_run)*0.4, 0.7+ sin(0.05*current_model_run)*0.4, 0)\n\nI don't know which folder i have to import in the code for the cosine and sine. Could you kindly suggest it to me. Do you think it can work?"
      },
      {
        "author": "Craig Warren",
        "date": "May 17, 2019, 4:59:09AM",
        "content": "Sine and cosine functions can be used from the numpy package  - https://www.numpy.org\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/a7kqmA_pN3M",
    "title": "Coordinates (x,y,z) confusion",
    "original_post": {
      "author": "Kenneth Obrien M",
      "date": "Dec 9, 2017, 2:53:39PM",
      "content": "Hi,\nJust need clarification;\n\nIn the 2D cylinder model examples, the coordinates are defined to be 3D (x,y,z)  as soon as you set the coordinates to only have x,y (which is 2D) you get an error. Why is it not feasible to define just two coordinates (x,y) in the 2D model?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 9, 2017, 3:56:03PM",
        "content": "Kenneth,\n\n2D models in gprMax are a single cell slice of a 3D model, which is why they always require a third dimension/coordinate. We achieve this by applying PEC boundaries to the invariant direction of a single cell slice of a 3D model. See the attached image of a Yee cell for 2D models - electric field components are in red; magnetic field components in green; and zeroed out components (by applying PEC boundaries) in black. You can see the components to be updated will be Hx, Hy, and Ez, which is correct for a 2D TMz mode.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Dec 10, 2017, 5:41:08PM",
        "content": "Thank you CraigWarren\n\nRegards\nKenneth"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1VNi6XqA1so",
    "title": "Question about Object Construction",
    "original_post": {
      "author": "Akhil Amara",
      "date": "Mar 20, 2016, 2:28:27PM",
      "content": "Hi Guys,\n\nI am beginner user of gprMax and your guide has been immensely useful in getting me started. But I ran into a problem, i was hoping you guys might be able to help me. For some reason when I create my model and plot it, it is missing some of the objects that I wanted to create. Mainly triangles. I made sure to check to see that it is not being overwritten by other objects. But when I plot the geometry file in paraview, only one of the triangles shows up. The following is the code I am using. \n\n#title: Model #4 \n#domain: 60 10 1\n#dx_dy_dz: 0.05 0.05 0.05\n#time_window: 160e-9\n\n#pml_cells: 10 10 0 10 10 0\n\n#material: 4.0 0.001 1.0 0.0 fractured_zone\n#material: 9.0 0.001 1.0 0.0 granite\n#material: 3.0 0.001 1.0 0.0 dry_sand\n#material: 20.0 0.001 1.0 0.0 wet_sand\n#material: 80.0 0.05 1.0 0.0 water\n\n\n#waveform: ricker 1 200e6 my_ricker\n#hertzian_dipole: z 5.6 9.0 0 my_ricker\n#rx: 5.2 9.0 0\n#src_steps: 0.4 0.0 0\n#rx_steps: 0.4 0.0 0\n\n#box: 0.0 0.0 0 60.0 10.0 1 free_space\n#box: 0.0 0.0 0 25.0 9.0 1 dry_sand\n#box: 0.0 0.0 0 25.0 5.0 1 granite\n#box: 25.0 0.0 0 60.0 9.0 1 granite\n#box: 20.0 7.0 0 35.0 9.0 1 fractured_zone\n#box: 21.0 4.0 0 36.0 7.0 1 fractured_zone\n#box: 22.0 2.0 0 37.0 4.0 1 fractured_zone\n#box: 23.0 0.0 0 38.0 2.0 1 fractured_zone\n#triangle: 25.5 7.5 0 26.1 6.4 0 26.7 5.9 0 1.0 water\n#triangle: 30.0 8.2 0 31.0 7.2 0 32.0 6.2 0 1.0 water\n\n\n\n#geometry_view: 0.0 0.0 0.0 60.0 10.0 1.0 0.05 0.05 0.05 model_4 n\n\n\nThis is the paraview image that I am getting. The red color is representing the first triangle object.  \n\n\nAny help in this would be greatly appreciated.\n\nAkhil Amara"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 21, 2016, 6:13:32AM",
        "content": "Hi Akhil,\n\nGlad you have found the User Guide of benefit.\n\nI suspect the second triangle is not showing up as no cells have been set by the triangle algorithm, perhaps because the triangle is so slender. The algorithm tries to set cells based on whether they are inside or outside the vertices of the triangle. To see if this is the case, open up the angle of the triangle. \n\nI also notice a couple of other things about your model:\nThe spatial discretisation you are using may cause numerical dispersion as it is not small enough to adequately resolve the smallest wavelength present in your model. See these links for more information: http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretisation and http://docs.gprmax.com/en/latest/examples_simple_2D.html#calculate-a-spatial-resolution-and-domain-size\nYour model appears to be 3D (from the domain size) but you have turned off the PML absorbing boundaries in 2 directions '#pml_cells: 10 10 0 10 10 0'. If your model is indeed 3D just remove this command. If it is meant to be 2D, remove this command and ensure the domain is only 1 cell thick in one of the dimensions.\n\nCraig"
      },
      {
        "author": "Akhil Amara",
        "date": "Mar 21, 2016, 2:58:17PM",
        "content": "Hi Craig,\n\nThanks for you help. That fixed it. I didn't realize I was doing a 3d model. Since I am running the model on my personal laptop, it was taking a long time to run the model. To speed it up, I increased the discretisation steps to help speed up the time since I was still experimenting a little bit with how the model is going to look. I am trying to model water filled fractures in a fault zone, so I was trying to make the fractures slender. But thanks for your help!\n\nAkhil"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 22, 2016, 6:16:51AM",
        "content": "Akhil,\n\nRemember you can use the '--geometry-only' flag when you are initially building a model to check the geometry. This will only produce the geometry files and not run the simulation.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/76OKN_w3gcw",
    "title": "How can I use SFCW signal in the simulation?",
    "original_post": {
      "author": "Arden Kuyumcu",
      "date": "Dec 3, 2018, 7:13:25AM",
      "content": "I am creating my SFCW signal as follow in MATLAB:\n\nc = 3e8; delf = 80;% MHz f = 1e6*(800:delf:1600); dr = c/(2*range(f)) R = dr*5 % range t_delay = 2*R/c % delay PRI = 1.0*t_delay; t_dwell = PRI N = length(f) % # of frequency steps fs = 10*max(f) % sampling frequency dt = 1/fs % sampling time Ns = floor((t_dwell/dt)+1) % number of sample per frequency t1 = linspace(0,t_dwell*N,N); L = N*Ns % length of arrays Rmax = dr*N r = 0:dr:dr*(N-1); rend = r(end) %% ff = []; for i = 1:N ff = [ff f(i)*ones(1,int32(Ns))]; end t2 = linspace(0,t_dwell*N,N*Ns); % Tx = 1*exp(-j*2*pi*ff.*t2); figure plot(t2,real(Tx))\n\nWhose zoomed-in output is like this one;\nAnd the result I get from the input file of:\n#python: from gprMax.input_cmd_funcs import * command('title', 'Simple Source Sink') z_dim = 2e-3 resolution = 2e-3 tsim = 1.3e-07 B_scan = False #commands domain = domain(x=64e-2, y=30e-2, z=z_dim) dx = dx_dy_dz(resolution, resolution, z_dim) time_window(tsim) material(permittivity=6, conductivity=0, permeability=1, magconductivity=0, name='half_space') excitation_file('exitfile.txt') if B_scan: x_ant = 8e-2 else: x_ant = domain.x/2 - 1e-2 # in the middle of the x-axis tx = hertzian_dipole('z', x_ant, domain.y - 4e-2, 0, 'sfcw') rx(tx.x, tx.y - 10e-2, tx.z) if B_scan: src_steps(dx=0.8e-2/4) rx_steps(dx=0.8e-2/4) geometry_view(0,0,0,domain.x,domain.y,domain.z, dx.x,dx.y,dx.z,'simple','n') #end_python:\n\nI don't know how can I get the signal shape smooth and as close as I desired. It seems it is kind of noisy (due to instant start of signal in FDTD sim.) and some peaks in some parts."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 3, 2018, 12:09:15PM",
        "content": "Hi Arden,\n\nIf you want to do this directly in the time domain using gprMax or any FDTD solver you need to ramp up the signal slowly and not start abruptly. The 'contsine' excitation in the #waveform command does this and you can programme yours to do something similar. Modelling a SFCW process by running each model with different single frequency excitation is counterproductive and will take too much time. You can run the model with an impulse excitation and then convolve the output with any single frequency excitation you want in a post-processing step. This will produce the same output but obviously the frequency content of the excitation must be OK with regard to numerical dispersion etc. For example, running a model with a 1cm spatial step and obtaining the impulse response and then convolving it with a 30GHz signal will be very wrong as an FDTD solution has a range of validity depending on the grid resolution and its electrical properties. So, in essence the excitation should always have a frequency content that is acceptable for the given FDTD model. Sharp initiation of signals introduce high frequency noise for obvious reasons.\n\nHope that makes sense ...\n\nBest\n\nAntonis"
      },
      {
        "author": "Arden Kuyumcu",
        "date": "Dec 3, 2018, 3:00:39PM",
        "content": "Hello Antonis,\n\nI got the first point of not starting the waveform suddenly. It is Ok.\n\nWhat I am not clear about is why I cannot use a signal having a varying frequency in time directly by setting time window to cover the wave from f_start to f_end and waiting for it to be sensed at Rx?\nAnd I couldn't get how will I run the simulation with impulse and convolve with single frequency excitation."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 4, 2018, 5:11:02AM",
        "content": "Hi Arden,\n\nYou can use any excitation that you want as far as it conforms to the limitations of the FDTD solver. In essence a smooth start is required for that reason. \nFDTD is a linear process (unless explicitly non-linearity is modelled for specific reasons and it requires specific approaches). So, if you obtain the impulse response of your model you can convolve it with any excitation function and the result should be (and it is) identical to having your model excited by that function. The impulse response from an FDTD (i.e. the FDTD digital green's function) is obtained by exciting the model with just an impulse at time 0. In gprMax there is a 'hidden' waveform option (not any more ...) that you can use called 'impulse'. As the output of FDTD is not correct for all frequencies this impulse response is not really useful (and actually not correct!) if it is not convolved with a proper pulse. \n\nThis process is easy to be carried out in post-processing.\n\nHope this helps explain.\n\nAntonis"
      },
      {
        "author": "Ikechukwu",
        "date": "Dec 12, 2018, 9:54:41AM",
        "content": "Hi Arden,\n\nYou can checkout the attached paper. I think it might be helpful.\n\nThanks\nIkechukwu\nTarget Detection in SFCW Ground Penetrating Radar with C3 ..."
      },
      {
        "author": "yan zhang",
        "date": "Aug 3, 2020, 10:33:33AM",
        "content": "Hi, Antonis,\n\nYou said that the 'hidden' waveform option of the impulse waveform no longer exists. Can I create a similar impulse excitation? If I can, then can you tell me how? I am also working on a project to simulate SFCW GPR. \n\nThanks,\nYan"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 4, 2020, 3:10:15PM",
        "content": "Hi Yan,\n\nThe impulse waveform is part of the code, it is just not documented - https://github.com/gprMax/gprMax/blob/301e9da1bbf13e4b041f7aea9db619f9f62562f2/gprMax/waveforms.py#L110\n\nYou can use it as follows: #waveform: impulse 1 1e9 mypulse\n\nThe centre frequency parameter is not relevant when the impulse is used.\n\nWe will be providing a video from our recent workshop that explains how to use the impulse waveform and how to simulate a SFCW radar using gprMax in the next week or so.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "yan zhang",
        "date": "Aug 4, 2020, 5:46:16PM",
        "content": "Hi, Professor Craig Warren,\n\nThanks for your kindly reply. I will definitely go over the workshop videos when they are released.\n\nYan"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JUVcnZsRhbc",
    "title": "Question about an example in the documentation",
    "original_post": {
      "author": "Anadyr",
      "date": "Dec 9, 2019, 5:54:39AM",
      "content": "Dear all,\n\nI have a question about the example in the documentation about the B-scan of a metal cylinder with a bowtie antenna model: http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model\n\nTaking a look to the input file and the geometry you can see that a big block has been created and a small cylinder is inside this block. Now the domain of this block is:\n\n#domain: 0.480 0.148 0.235\nwhich are the X,Y,Z coordinates of the simulation environment.\n\nLooking at the picture in paraview you can see the expected dimension of the domain:\n\n\n\n\n\nThe problem arise with the line of code:\n\npython -m tools.plot_Bscan user_models/cylinder_Bscan_GSSI_1500_merged.out Ey\nBecause to me the electric field, which has to be visualized, is the Ez (the electic field along the Z axis) at every sample point.\nChanging the last paramater to respectively Ex or Ez leads to an error. It seems that there is no computation for the electric field along those axis. The only one is along the Y axis.\n\nWhy is the B Scan made of scans along the Ey?\n\nRegards."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 9, 2019, 6:00:54AM",
        "content": "Dear Anadyr,\n\nThe antenna is polarised in the y-direction which is why the Ey component is being stored. Details of the antenna models are at: http://docs.gprmax.com/en/latest/user_libs_antennas.html and in the relevant module in the 'user_libs' package.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Zhs5e6jGyQU",
    "title": "What values are set in the Peplinski Model",
    "original_post": {
      "author": "Paul-Benjamin Riedel",
      "date": "Jun 18, 2020, 4:31:36AM",
      "content": "Hi there.\n\nI am having a hard time understanding the Peplinki class.I want to use it to derive a class for Asphalt and/or Concrete.\n\n\nReading the paper it is based in I do not understand what values are set in this part:\n\nm.type = 'debye'\n                m.averagable = False\n                m.poles = 1\n                if m.poles > Material.maxpoles:\n                    Material.maxpoles = m.poles\n                m.er = eri\n                m.se = sig\n                m.deltaer.append(er - eri)\n                m.tau.append(Material.watertau)\n                G.materials.append(m)\n\neri is the \"permitivity at infinite frequency\" according to the code comments, however it is setr as the m.er property\n\n\nIn the Material class in line 157 I can find that it's  # Permittivity at infinite frequency if the material is dispersive\n        er = self.er\n\nor when we have more than one pole it's er+se/(w e0)\n\nSig is the effective conductivity, but then again detaer seems to be er -eri which is the real permitivity  minus the  permitivity at infinite frequencies.\n\n\nAm I correct in this view?\n\n\nBecause then I would, as you suggested in another thread create an Asphalt class that would just use the paper you suggested as a lookuop table for these values:\n\ndoi:10.1088/0022-3727/45/40/405401\n\ndepending on the moisture of the Asphalt.\n\nBest regards"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 18, 2020, 5:52:35AM",
        "content": "er and m.er are not the same things. In the new gprMax we did not want to have too many parameters in a command and the idea to create an add dispersion command was implemented. When there is no dispersion the er in the #material command is the relative permittivity which is the same either for DC or infinite frequencies. Most people will be thinking of it being the one at the low frequency limit as this is more closer to what they will be accustomed to but if you think about it is irrelevant as there is no frequency dependence. However, when you use the #add_dispersion command the relative permittivity in the #material command must be  the infinite permittivity otherwise we do not have enough information. However, when this is the case and if we get the Delta er from the #add_dispersion command we have all we need. \n\nIn the code snipped 'er' is determined above that part as the new static (or DC) permittivity according to the Dobson model with the Peplinski correction and is correctly used with eri calculated again above this part from the Dobson/Peplinski model to create the required Debye material. \n\nFor all Debye materials m.er = relative permittivity at Infinite frequencies m.se is the effective conductivity \n\nHope this clarifies matters! \n\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/q-qfluJS4EE",
    "title": "Re: bad object header version number",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 4, 2019, 4:58:46AM",
        "content": "As the error message suggests it looks like a problem with the header of your merged B-scan HDF5 file. Have you tried viewing some of the individual A-scans to check they are OK? If not, try that first.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/RqopvuUcB5w",
    "title": "User wavelets",
    "original_post": {
      "author": "James Whittaker",
      "date": "Nov 4, 2020, 4:25:07PM",
      "content": "Hi guys,\n\nI'm having some issues with user wavelets. My wavelet is sampled coarser than the sampling interval of the simulation of a ratio of around 10 -1. \n\nI get a error of \"    raise ValueError(\"A value in x_new is above the interpolation \"\nValueError: A value in x_new is above the interpolation range.\"\n\nWhat are the limits for this, do I need to resample first before input in gprMax? This is important as I'm planning to do RTM with the traces so I need to setup a sequence for this processing.\n\nThanks\n\nJames"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "Nov 5, 2020, 3:08:02PM",
        "content": "Hi James,\nI think that it is not a problem with the coarseness of your waveform. I think that maybe the problem is that maybe your signal has a duration T and you want to simulate  duration T' > T. Internally, gprmax will use the interp1d function (https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html) to interpolate the function.\n\nIf T' > T then the interpolation is outside the defined range, so interp1d will raise the error that you are trying to predict a future value of the function (extrapolate) instead of interpolating. I see two options to solve this problem:\n+ I imagine that your signal is 0 after T, so you can add an additional point to the file where you defined the point: [T  0 ], [T' 0]. In this way, any value between T and T' will be linearly interpolated to 0.\n+ If not you can disable this error using the  \"bounds_error\" argument in interp1d. Look at the documentation:\n\nbounds_errorbool, optional\nIf True, a ValueError is raised any time interpolation is attempted on a value outside of the range of x (where extrapolation is necessary). If False, out of bounds values are assigned fill_value. By default, an error is raised unless fill_value=\"extrapolate\".\nfill_valuearray-like or (array-like, array_like) or “extrapolate”, optional\nif a ndarray (or float), this value will be used to fill in for requested points outside of the data range. If not provided, then the default is NaN. The array-like must broadcast properly to the dimensions of the non-interpolation axes.\nI believe that you can pass the 'fill_value=extrapolate' to the excitation file command.\n\nBest regards,\nAndrés\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/a8W0Qlvfy2w",
    "title": "Different kind of input",
    "original_post": {
      "author": "André Costa Batista",
      "date": "Nov 22, 2018, 6:28:27PM",
      "content": "Hi,\n\nI have been using gprMax for scattering with some simple objects. But I need to run experiments with more complex geometries in which I can define the geometries by myself, i.e., I can enter a matrix with the dielectric information in each voxel of the grid. So I was wondering if there would be some way that, instead of defining cubes, spheres etc, I could enter a 3D matrix defining permittivity, conductivity, and permeability for every voxel (node) of the grid. Is this possible?\n\nKind regards,\nAndré Costa Batista"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 23, 2018, 6:28:42AM",
        "content": "Hi André,\n\nYes, you can build your own geometries and create a HDF5 file along with a materials list file that can be imported into gprMax. Essentially the HDF5 file contains a 3D matrix of integers which correspond to a list of materials in a separate file. The integer value relates to the position of each material in the list. If each cell is a different material this approach will be very inefficient, so you might what to think about binning values to use less materials. The requirements can be found in the docs - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read  \n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wfURt2RKaLU",
    "title": "The Automation of the 3 codes in Command line",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Nov 5, 2019, 10:31:57AM",
      "content": "Good Afrenoon everybody,\n\n\nhave anyone an idee to Automation these 3 commands\n\n\ncd Desktop\\Die_Ernte   %is the path \nactivate gprmax\npython -m gprMax test.in\npython -m tools.plot_Ascan test.out\n\n\ni dont want to give it lione with line but to give it in python or matlab and executing these automatically\n\ni have to generate alot of file output files and it is not practical to make it these three line by line\n\n\nany script in matlab or python to execute these three line i would be very grateful"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 5:49:27AM",
        "content": "Ahmed,\n\nYou can import gprMax (and the other tools for plotting output) as a Python package. You can therefore create your own Python script to call gprMax and plot output. For example:\n\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nfrom gprMax.gprMax import api as gprMax\nfrom tools.outputfiles_merge import get_output_data\nfrom tools.plot_Ascan import mpl_plot\n\n# Run gprMax model(s)\ngprMax(input file, n=traces, geometry_fixed=True, geometry_only=False)\n\n\nAlso take a look at our Jupyter notebook examples.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OpDPkVJyG20",
    "title": "Importing 3D models in gprMax",
    "original_post": {
      "author": "MOLOY DAS",
      "date": "Oct 24, 2024, 2:28:56AM",
      "content": "Hi everyone, very good morning and thank you for allowing me to write the issue!!\n\nWe are presently developing some landmine models and simulating the response using MALA like 1.2 GHz antenna.\nTo develop the model, we have made use of different geometrical shapes like sphere, cylinder, box etc. and the resulting object is quite complex (IN file attached). I have two issues:\n1. When changing the domain size I have to recalculate all the geometrical parameters. I tried the geometry_read and geometry_write command but is not able to import circular shaped objects like sphere and cylinder.\n2. The generated model is far from practical in terms of shape, filling material etc. How to create accurate model once and import it to the desired geometrical location inside the domain like we do for importing MALA and GSSI antennas.\n\nWaiting for your help. Advance thanks to everyone.\n\nBest Regards,\nMoloy"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zrV17C06rNw",
    "title": "set antenna height above the ground",
    "original_post": {
      "author": "张欣",
      "date": "Mar 30, 2023, 4:37:36AM",
      "content": "Dear all,\n      I want to know how to set the antenna height above the ground in gprMax,  hope someone can give me help with this command. \nBest wishes."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Us5AVq3kJMc",
    "title": "#hertzian_dipole Antenna Pattern",
    "original_post": {
      "author": "Nihat Alperen Dayanır",
      "date": "Dec 22, 2023, 5:38:35PM",
      "content": "Hello, If it's a simple question, I'm very sorry in advance, I couldn't see it in the documentation. How can I access the antenna pattern information of the #hertzian_dipole antenna used in the introduction model? Since there is no file for this antenna model, I cannot use the antenna pattern module in library."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 22, 2024, 5:06:25AM",
        "content": "Which example are you referring to?\n\nThe antenna pattern library is designed to be used with full antenna models (often similar to commercial GPR antennas). It simply samples the fields around the antenna at appropriate distances and converts the cartesian field components to spherical coordinates. You can do this yourself and use some of the code in the library to help.\n\nKind regards,\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/u8cSsMu5VPo",
    "title": "Question about implementation of analytical solution",
    "original_post": {
      "author": "Thomas Simader",
      "date": "Jul 4, 2023, 7:20:29AM",
      "content": "Dear developers of gprMax,\nthank you for creating this amazing tool!\nI had a lot of fun working with it. These days I tried to deeper understand the forward calculation in FDTD and found the section \"Analytical Comparisons\" in the developer manual.\n\nHere the gprMax results for a z-polarised Hertzian Dipole in free space are compared to the analytical solutions according to https://doi.org/10.1016/0021-9991(83)90103-1.\nThe formulas are given in Appendix C, where I attached the solution for Ez-component attached.\nAs far as I understood, f denotes the temporal waveform of the current in Ampere.\n\nThe implementation in gprMax can be found in GitHub (Link).\nIn the manual (Link), you excite the Hertzian Dipole with a \"gaussiandot\"-waveform, whereas in the description in GitHub you write that it is the solution for a gaussian current waveform. \n\nI thought that the waveform you excite the hertzian dipole with in gprMax corresponds to f, but according to the code it is the first derivative f_prime?\n\nI hope I made my question understandable.\nThank you for your time!\n\nBest regards,\nThomas"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 7, 2023, 7:14:55AM",
        "content": "Hi Thomas,\n\nThanks for the question - it helps us improve some of the terminology in the docs that we will update in the upcoming release. The FDTD model is excited with a waveform of the form of the first derivative a gaussian. This corresponds to the term df/dt in the equation for the Ez component that you give of the analytical field of the Hertzian dipole in free space. f is then the integral (in this case is the gaussian) and d2f/dt2 the derivative (in this case the second derivative of a gaussian). This can be more obviously seen from the frequency domain representation of the same equation.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MxzIHw5wPsU",
    "title": "Directional antenna in gprmax",
    "original_post": {
      "author": "Selim Sahin",
      "date": "Dec 30, 2019, 4:53:02AM",
      "content": "Hello everyone,\n\nTo the best of my knowledge, there is not a built in directional antenna model in gprmax. Is there anyone tried to model a directional antenna and want to share it?\n\nAny advices about how to model and use a directional antenna are also welcome.\n\nBest regards,\nSelim"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Jan 6, 2020, 3:07:09AM",
        "content": "Dear Selim,\n\nas far as I know are there some directional antenna's.\n\nYou have to use the built-in 3D antenna-models.see: http://docs.gprmax.com/en/v.3.0.0b20/examples_antennas.html#bowtie-antenna-model\n\nthis requires to built big models, which takes much time to compute on a (of more) CPU's. Recomerented to use a (or more) CUDA-capable GPU with a memory which fits the desired model-sizes.\n\nRegards, Micha"
      },
      {
        "author": "Selim Sahin",
        "date": "Jan 7, 2020, 4:58:45AM",
        "content": "Dear Micha,\n\nThank you for your answer. I will check out bow tie antenna.\n\nAnother question came to my mind about your suggestion. What is the reason of using bow tie antenna requiring to built big models? I am not sure but may it be because of the radiation pattern or the structure of antenna model?\n\nRegards,\nSelim"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 7, 2020, 3:19:47PM",
        "content": "Dear Selim,\n\nYou can build a model of pretty much any antenna you like using the geometry primitives available in gprMax. In terms of what is already pre-built, as Michael said there is a simple wire dipole (http://docs.gprmax.com/en/latest/examples_antennas.html#wire-dipole-antenna-model) and  bowtie antennas available (http://docs.gprmax.com/en/latest/comparisons_numerical.html#bowtie-antenna-in-free-space). There are also detailed models of GPR antennas - http://docs.gprmax.com/en/latest/user_libs_antennas.html\n\nAntenna models often need to capture fine and complex geometric details which necessitates using a fine FDTD mesh. This leads to larger computational (RAM and CPU time) requirements. This is just how a volumetric technique such as the FDTD method works. There are techniques to that can help this, such as sub-gridded areas of the mesh, and we are currently working to develop these features.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LIm2vL9RPr8",
    "title": "A question about #geometry_objects_read",
    "original_post": {
      "author": "Ruo nan",
      "date": "Sep 5, 2019, 5:17:22AM",
      "content": "Hi craig,\n\nI've just learned the usage of #geometry_objects_read, and I made a simple example using this function, but the results show that the model cannot be successfully inserted.\nThe scripts and the results are shown as follows:\n\nFigure 1\nFigure 2\nFigure 3\nFigure1 is the scripts of the example, I don't know if there is anything wrong. And Figure 2 is the result displayed in the terminal, which is already show the material has been inserted into the model. However, it can be seen from the Figure 3 that it cannot be inserted successfully. \n\nCould you please have a look at this problem. Thank you very much for your time!\n\nRegards,\nRuo nan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 5, 2019, 2:55:04PM",
        "content": "Hi Ruo,\n\nUnfortunately I don't have the time to look into this in depth, but on quick glance you have inserted your geometry object with a z-coordinate that is not within the model domain - 0.02m when you domain in the z-direction is only 0.002m.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ktD3VCEF8s0",
    "title": "Problem with reflected wave",
    "original_post": {
      "author": "Kelly",
      "date": "Mar 26, 2019, 4:00:49AM",
      "content": "Hi Craig,\n\nI am a new beginner of gprMax and I am trying to extract both direct wave (DW) and reflect wave (RW) of the EM signal of concrete. There are only two variables in my model, they are dielectric constant and radius of rebars (for section loss). because I would like to find out the early-stage corrosion amplitude changes under accelerated DC impression.\n\nOne problem found is the amplitude change of RW was exactly inverse of DW. I think the DW trend is similar to the authentic result which i recieved during the laboratory experiment. Is RW reasonable in gprMax? Here attached with the change of RW and DW.\n\nBest regards,\nKelly"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 26, 2019, 7:16:49AM",
        "content": "Hi Kelly,\n\ngprMax is a full wave FDTD based electromagnetic solver, so all waves are \"reasonable\" in gprMax. It does not separate DW or RW in terms of the solution process. If your model is reasonably representative of the real situation then the answer will be reasonably close especially if it is a full 3D model including the appropriate model of a transducer. There are many reasons you get a specific response from the model. If the numerical process has been followed properly but the result is not what you expected either the expectation was wrongly assumed to be what is happening or often most likely you are not modelling correctly the situation you think you are trying to model. Often oversimplification is the cause for this. \n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5yHJca1dYgc",
    "title": "Circular polarisation",
    "original_post": {
      "author": "Svetlana Bricheva",
      "date": "Nov 28, 2017, 4:46:59AM",
      "content": "Dear colleagues!\n\nNow me and my student are at the beginning of a quite interesting task - planetary (orbital) radar data modeling. We are thinking about using gprMax, that was the perfect software for GPR modeling. So, the general question is the possibility of using gprMax for it; in particular - is it possible to model the circular polarisation of source and receiver antennas?\n\nKind regards,\nSvetlana"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 28, 2017, 5:12:06AM",
        "content": "Hi Svetlana,\n\nIt depends how you want to model your source. You can model spiral antennas in FDTD like other antennas (e.g. bowties, vivaldi, etc.) but the solution will be near field as you will need a fine mesh to model the structure of the antennas. If you want to use theoretical sources then you should be able to use appropriate components of dipoles to excite a circular wakefield. It is not as easy but it is possible as the circular polarisation can be decomposed in cartesian components.\n\nLook in the literature for FDTD and circular polarisation and I suppose you should be able to replicate what you find there in gprMax. There might be some scope for small modifications but should be doable.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/YAf8-xdZZk4",
    "title": "Material properties",
    "original_post": {
      "author": "mahmood safavi 123",
      "date": "Aug 15, 2017, 2:37:08PM",
      "content": "hi\ni know should be set 4 parameters to create new material, but in many paper just give me 2 parameters.\nfor example :\naluminum: dielectric constant is 3.1 and conductivity is 2.3e7\nor\nplastic: dielectric constant is 3.0 and conductivity is 0.01\ni set this parameters but my result is very differente.\nmy question is this, how fine 2 other parameters.\nthanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 16, 2017, 4:56:50AM",
        "content": "Hi Mahmood,\n\nSee the User Guide - http://docs.gprmax.com/en/latest/input.html#material - for the parameters for the #material command.\n\nGenerally (but not always), materials encountered with GPR are non-magnetic. Therefore the relative permeability will be that of free space (i.e. 1) and the magnetic loss will be zero. You can find plenty of references for electromagnetic material properties online.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MUrH6WCW1Ok",
    "title": "Increase gain of Bscan",
    "original_post": {
      "author": "Josh Smith",
      "date": "Jul 28, 2021, 10:48:51AM",
      "content": "Hi all,\nIs there a way of increasing gain of the Bscan signal, I.e as shown with the GUI in this lecutre https://www.youtube.com/watch?v=gkNPeGwJjJQ&t=187s&ab_channel=gprMax\n\nIn my model I have anomalous objects made from polycarbonate, which has very simular parameters to the surrounding modeled sand (the default sand mentioned in the gprMax manual)\nI'd like to increase the gain to be able to get a better contrast. Right now the reflection is just visible (I understand it will be quite a weak signal regardless due to the very similar dielectric properties)\n\nThanks,\nJosh"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2021, 9:51:12AM",
        "content": "You can increase the gain and/or process your B-scan any way you like by just manipulating the data in Python. In our plot_Bscan.py module you will see the B-scan data being loaded before plotting, so you can process it yourself prior to that.\n\nYou may also like to look at the cloud-based GPR processing tools produced by Geolitix (https://www.geolitix.com/) which can import gprMax output files directly.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zC1MLDba-Ho",
    "title": "permittivity that changes linearly with depth",
    "original_post": {
      "author": "Nadjib Kemache",
      "date": "Mar 7, 2023, 4:41:05AM",
      "content": "how to create a layer with permittivity that changes linearly in gprMax?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 7, 2023, 1:41:05PM",
        "content": "You could code this yourself using a Python block in the input file, with box commands and different materials. There is no built-in function (at present) to do this for you.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/WUIwTa6qGdQ",
    "title": "How to apply a gain functionto the results and how to following an irregual surface with Sx and Rx?",
    "original_post": {
      "author": "Emiliano",
      "date": "Nov 30, 2017, 4:57:02AM",
      "content": "Hi everyone,\n\nI'm creating some models with gprMax for my thesis. I would like to ask you two questions:\n\n1) I'd like to amplify the segnal for a better visualization of the following output. As you do with the gain function in real data. I'm sure it is possible, but I don't know how. Can you help me?\n\n2) Is there a way to follow the shape of the irregular surface with the Sx and Rx step by step?\n\nI can't find the answers to these questions. Thank you very much for the valuable assistance.\nBest reguards\n\nEmiliano"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 30, 2017, 6:35:41AM",
        "content": "Hi Emiliano,\n\n1. You can apply gain to field values before the data is plotted. The data (for a B-scan) is stored as a matrix which you can manipulate either inside the Python module ('plot_Bscan') or using MATLAB is you prefer.\n\n2. There is no automated way to do this using the source and receiver step commands. I'd suggest using some Python in your input file to move the source and receiver according the surface profile - assuming you have the coordinates of the profile?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Heloisa Moraes",
        "date": "Oct 17, 2018, 9:18:15PM",
        "content": "Hi Craig,\n\nFirst I want to be sure that I understood correctly: gain is applied by manipulating the datasets within each individual rx group (stored as the matrix)? If I understood correctly, how can I do it and \"apply gain to field values before the data is plotted\" using the 'plot_Bscan' module?\n\nUnfortunately, using MATLAB is not an option (for now).   \n\nKind regards.\n\nHeloisa"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 18, 2018, 9:11:31AM",
        "content": "Hi Heloisa,\n\nYou can manipulate the output data, i.e. apply gain, in the 'plot_Bscan' module. If you look at line 48 which does the plotting (imshow) you'll see the 'outputdata' argument. You can manipulate this however you like. Numpy has many of the same functions as MATLAB so you can easily use that.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/l2aMhArD3Dc",
    "title": "Issues setting up the devel version",
    "original_post": {
      "author": "Gilad Margalit",
      "date": "May 1, 2024, 9:42:52AM",
      "content": "Hi,\n\nAfter getting gprMax 3.1.7 to run successfully (on Windows), I attempted to try the devel branch (4.0.0b0) to use the Python API. However, I'm unable to get even the example antenna script to run correctly.\n\nThe instructions in the devel version of the guide (https://docs.gprmax.com/en/devel/inc_README.html) actually result in installing the 3.1.7 version. Instead, my process was to follow the standard guide (https://docs.gprmax.com/en/latest/include_readme.html), but replace git clone https://github.com/gprMax/gprMax.git with git clone -b devel https://github.com/gprMax/gprMax.git gprMax-devel. I'm following the lead of a colleague who seemingly took the exact same steps yet had no issues.\n\nThis process finishes without error and sets up the environment gprMax-devel. However, when I run antenna_wire_dipole_fs.py in that environment, I get the following error:\n\n\n\n\nC:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\python.exe C:\\Users\\GiladM\\Downloads\\antenna_wire_dipole_fs.py\nTraceback (most recent call last):\n  File \"C:\\Users\\GiladM\\Downloads\\antenna_wire_dipole_fs.py\", line 69, in <module>\n    gprMax.run(scenes=[scene], n=1, outputfile=fn)\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\gprMax.py\", line 159, in run\n    run_main(args)\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\gprMax.py\", line 219, in run_main\n    results = context.run()\n              ^^^^^^^^^^^^^\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\contexts.py\", line 84, in run\n    model.build()\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\model_build_run.py\", line 74, in build\n    self.reuse_geometry() if config.get_model_config().reuse_geometry else self.build_geometry()\n                                                                           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\model_build_run.py\", line 142, in build_geometry\n    self.build_scene()\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\model_build_run.py\", line 265, in build_scene\n    scene = parse_hash_commands(scene)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\hash_cmds_file.py\", line 394, in parse_hash_commands\n    user_objs = get_user_objects(processedlines, checkessential=True)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\hash_cmds_file.py\", line 349, in get_user_objects\n    parsed_commands = check_cmd_names(processedlines, checkessential=checkessential)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\GiladM\\AppData\\Local\\anaconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.12-win-amd64.egg\\gprMax\\hash_cmds_file.py\", line 304, in check_cmd_names\n    raise SyntaxError\nSyntaxError: None\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v4.0.0b0 (Càrn Mòr)\n\n Copyright (C) 2015-2024: The University of Edinburgh, United Kingdom\n Authors: Craig Warren, Antonis Giannopoulos, and John Hartley\n\n gprMax is free software: you can redistribute it and/or modify it under the\n  terms of the GNU General Public License as published by the Free Software\n  Foundation, either version 3 of the License, or (at your option) any later\n  version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY\n  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n  A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with\n  gprMax.  If not, see www.gnu.org/licenses.\n\n[PC-NAME] | 0 x unknown (10 cores, 12 cores with Hyper-Threading) | 31.7 GiB | Windows 11 (64-bit)\n|--->OpenMP: 10 threads\n\n--- Model 1/1, input file: C:\\Users\\GiladM\\Downloads\\antenna_wire_dipole_fs.py\n\nConstants/variables used/available for Python scripting: {c: 299792458.0, current_model_run: 1, e0: 8.8541878128e-12, inputfile: C:\\Users\\GiladM\\Downloads\\antenna_wire_dipole_fs.py, m0: 1.25663706212e-06, number_model_runs: 1, z0: 376.73031366686166}\n\nYour input file contains an invalid command: # title\nNoneType: None\n\nProcess finished with exit code 1\n\n\n\nHas anyone encountered this before? I assume it's an issue with my installation process or Python environment, but no amount of uninstalling and reinstalling seems to affect it.\n\nBest,\nGilad"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 8, 2024, 9:14:24AM",
        "content": "Error suggests 'Your input file contains an invalid command: # title'\n\nLooks like a whitespace character between the hash symbol and the command, so gprMax will not recognise it as valid.\n\nCraig\n\n"
      },
      {
        "author": "Gilad Margalit",
        "date": "May 12, 2024, 6:45:15AM",
        "content": "Hi Craig,\n\nThe '# Title' text is a comment from antenna_wire_dipole_fs.py, a default python script from the gprMax-devel documentation. It's not designed to be an input file, but my install of gprMax seems to be mistaking it for one. Which is very odd, because gprMax 4.0.0b0 is clearly present (when it's not, the previous line, title = gprMax.Title(name=fn.with_suffix(\"\").name) gives an error), yet for some reason it's having trouble with some aspects of the 4.0.0b0 API. Have you encountered anything like this before?\n\nBest,\nGilad\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 13, 2024, 3:38:44PM",
        "content": "Thanks - this seems to be related to a potential bug in the devel version with retaining/clearing the list of scenes in a model. I've updated the code to revert to our previous behaviour which should fix your issue but needs longer term thought as sometimes the list of scenes is being retained, erroneously, if the gprMax API is called in a loop.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qYBad-a_Hhc",
    "title": "How to apply PEC amterial to geometry_load model ?",
    "original_post": {
      "author": "Paul-Benjamin Riedel",
      "date": "Jul 28, 2020, 10:36:03AM",
      "content": "I need the model as the .h5 data so I can work with it later and this requires me to draw circles/pipes of PEC not through the infile command, but through\n\"painting\" it in a np. array\n\nThat part I have done, however I am not sure ow to handle that in my material file.\n\nLike, I set it to material 7 on my model and the 7th material is like\n\n#material 9001 90001 1 0 testpipe\n\nBut that obviously doesn't work as there is no physical wave propagation.\n\nSo, is there any way to deal with this?\n\nCheers, Paul"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 4, 2020, 3:03:19PM",
        "content": "Hi Paul,\n\nYou should be able to define your own PEC material in the materials file that accompanies the HDF5 input geometry. If you specify 'inf' in the material command as conductivity, i.e. to define infinite conductivity, then gprMax will recognise it as PEC and set the correct update coefficients. e.g. #material: 1 inf 1 0 mypec\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hahJ6QbQItY",
    "title": "how solve this error",
    "original_post": {
      "author": "shereen ebrahim",
      "date": "Dec 20, 2023, 5:56:44AM",
      "content": "waveform does not fit within specified time window"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 22, 2024, 5:04:14AM",
        "content": "Lengthen the time window or shorten the waveform.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BwmK9k2-1Dw",
    "title": "Output lists in documentation don't match that in HDF5",
    "original_post": {
      "author": "Hugo Day",
      "date": "Dec 14, 2016, 4:51:45AM",
      "content": "Hello all!\n\nI'm doing some simulations involving large numbers of receivers as field monitors and whilst the documentation lists the receiver group tree as listing position as well as H/E fields this isn't implemented in practice, nor is it for sources from searching. Am I just being dumb and missing a tag for this whilst defining receivers?\n\nExample definition is\n#rx: 0.2 1.04247779608 0.2"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 14, 2016, 5:26:23AM",
        "content": "Hi Hugo,\n\nYes, the position attribute is definitely being written to the HDF5 output file for both sources and receivers. From a quick 'h5dump' of an output file:\n\nGROUP \"rxs\" {\n     GROUP \"rx1\" {\n        ATTRIBUTE \"Name\" {\n           DATATYPE  H5T_STRING {\n              STRSIZE H5T_VARIABLE;\n              STRPAD H5T_STR_NULLTERM;\n              CSET H5T_CSET_UTF8;\n              CTYPE H5T_C_S1;\n           }\n           DATASPACE  SCALAR\n           DATA {\n           (0): \"Rx(70,85,0)\"\n           }\n        }\n        ATTRIBUTE \"Position\" {\n           DATATYPE  H5T_IEEE_F64LE\n           DATASPACE  SIMPLE { ( 3 ) / ( 3 ) }\n           DATA {\n           (0): 0.14, 0.17, 0\n           }\n        }\n        DATASET \"Ex\" {\n           DATATYPE  H5T_IEEE_F32LE\n           DATASPACE  SIMPLE { ( 637 ) / ( 637 ) }\n           DATA {\n           (0): 0, 0, 0, 0, 0, 0, 0, 0\n \n       ............\n\nI will however update the docs to indicate that the current (Ix, Iy, Iz) are now no longer output by default.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Vp1C59YXyGQ",
    "title": "snapshot occupies the memory.",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Feb 3, 2019, 11:35:21AM",
      "content": "When I run gprMax with snapshots, I found that the memory requirement is increased in a large amount. It seems that gprMax saves every snapshot in the memory and export all of them in the end of the simulation. Is it possible to export every snapshot and afterwards release the memory?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 4, 2019, 4:35:56AM",
        "content": "Hi Feng,\n\nIndeed snapshots are saved to memory and then all written to file(s) at the end of the simulation. This is done for performance reasons, as writing the snapshot to file at the end of each iteration is slow. Memory is usually not a problem if you are using the CPU-solver.....unless you have a lot of large snapshots. If you are using the GPU-solver then gprMax should recognise when the snapshots will not fit on the GPU memory, and will copy the snapshot back to the host (CPU) memory after each iteration. This will be slower but still allows you to run on GPU.\n\nWhich solver are you using? And how many and how big are your snapshots?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Feng Zhou",
        "date": "Feb 10, 2019, 5:45:46AM",
        "content": "Thanks, Craig. Sorry for the late reply. \n\nActually，it is not a big problem for my current study. I am simulating a small temporal interval for snapshots, in order to observe how the wave propagates. But it can be done by decrease the time range or increase the time interval. I am just curious why each snapshot is not exported sequentially."
      },
      {
        "author": "Feng Zhou",
        "date": "Feb 10, 2019, 5:52:47AM",
        "content": "\"If you are using the GPU-solver then gprMax should recognise when the snapshots will not fit on the GPU memory, and will copy the snapshot back to the host (CPU) memory after each iteration.\" \n\nIf adding snapshots in the input file, the simulation will stop after the model building. If gprMax can check and give warning message before the simulation runs, it could be more user-friendly."
      },
      {
        "author": "Craig Warren",
        "date": "Feb 11, 2019, 6:51:52AM",
        "content": "I am just curious why each snapshot is not exported sequentially.\n\nPurely for performance reasons. If you write a snapshot to file immediately inside the FDTD solver loop then it kills the performance as file writes are very slow compared to storing in memory.\n\nAt the moment gprMax will report estimated memory usage and update the estimate when it detects use of the snapshot command. This gives you an indication of the memory required. We don't really want to halt the build/run process as memory estimates are just that, i.e an estimate, so we leave it to the user.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Feng Zhou",
        "date": "Feb 12, 2019, 3:30:35AM",
        "content": "Thanks"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ybFc7XIe_LU",
    "title": "Coordinate system of Tx and Rx for beginners",
    "original_post": {
      "author": "Isabel Rabad",
      "date": "Nov 6, 2017, 1:35:41PM",
      "content": "Hello to everybody,\n\nwe are starting our work with GPRmax, but we have some problems to understand the coordinate system of the antenna (emitter and receiver). We are working with a 2 GHz GSSI antenna. According to the manufacturer the distance between Tx and Rx is 4 cm. We are working with concrete samples. The dimensions of the blocks are 20 x 20 cm and 12 cm height. The antenna is located at the very center of the Surface (20 x 20). Therefore, we have written the following code. But , it is not working and we obtain only the direct wave and not the reflected at the base of the sample. We understand that we are misunderstanding the coordinate system for Tx and Rx. But we do not find why.\n\n#title: A-scan for a concrete block\n#domain: 0.200 0.200 0.200\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 7e-9\n#material: 9 0 1 0 concrete\n#waveform: ricker 1 2e9 youmi_ricker\n#hertzian_dipole: z 0.080 0.120 0.100 youmi_ricker\n#rx: 0.120 0.120 0.100\n#box: 0 0 0 0.200 0.120 0.200 hormigon\n#geometry_view: 0 0 0 0.200 0.200 0.200 0.002 0.002 0.002 concrete n\n\nPlease, do you have any suggestion?\n\nThank you!\n\nIsabel"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 6, 2017, 3:32:23PM",
        "content": "Hi Isobel,\n\nHope you will find gprMax useful. \n\nYour #box: is made out from 'hormigon'  Are you not getting a warning or an error that there is no such medium? Your #box should be made out of 'concrete' as this is the medium you have defined in the #material command.\n\nThe coordinate system of gprMax is a right-hand Cartesian system but obviously, everything is rounded to fit with the integer spacing of cells. Your theoretical source (i.e. hertzian dipole) is not exactly the same as modelling the GSSI 2 GHz antenna but it will be OK to start experimenting without having to delve too much into the antenna modelling part. \n\nHope that helps.\n\nAntonis"
      },
      {
        "author": "Isabel Rabad",
        "date": "Nov 8, 2017, 5:30:56AM",
        "content": "Hello,\n\nthank you very much for the information. Please, find attached the answers, since it contains images.\n\nThank you very much in advance\n\nIsabel"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 8, 2017, 6:39:00AM",
        "content": "Hi Isabel,\n\nA couple of issues that I can see:\n\nYou are not modelling a slab, you are currently modelling a half space, i.e. there is no 'bottom' to your concrete box at the moment. So you won't see a reflection.\nWhen you have corrected the above, remember there maybe gain applied to the real data. So you may want to remove the gain from the real data or apply something similar to the modelled data. \nYou should then have a better match between modelled and real data, at least the reflection events should be similar.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/giSEANOmYeA",
    "title": "Form of scattered field",
    "original_post": {
      "author": "Vittorio Pio Ronga",
      "date": "Mar 7, 2016, 6:41:19AM",
      "content": "Hello, I am a young italian engineer.\nI am using your software in both version 2 and 3.\n\nI have a simple question for you.\n\nWhen I use a signal for a source, i see that the scattered field has a form of the first derivative of my source.\n\nFor example, if I use a gaussiandotnorm (in version 3) like a source, i see a scattered field like a ricker pulse.\n\nThanks for your the attention"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 7, 2016, 8:42:50AM",
        "content": "Hi Vittorio,\n\nThis is pretty much normal. The source you specify is a current distribution and the radiated field will be related to its derivative. It varies a bit if you are in 2D or 3D and if you are very close to the source (in 3D).  You can check the gprMax output against some analytical solutions for a simple hertzian dipole that is available in the manual."
      },
      {
        "author": "Vittorio Pio Ronga",
        "date": "Mar 7, 2016, 9:35:58AM",
        "content": "Thanks for your fast answer. Now I can work with your software without problems."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/AzfYPK1X9VI",
    "title": "Model hits GPU RAM limit",
    "original_post": {
      "author": "Paul-Benjamin Riedel",
      "date": "Mar 19, 2019, 4:27:42PM",
      "content": "Yea, title says it all. \n\nI am running a model that's above my GFX card RAM limit(2 GB). \n\nIs there a way to mitigate this?\n\nOtherwise I have to drop CUDA again as the seize of the model only seems limited by the system memory on CPU ..!?\n\nCheers"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 19, 2019, 7:55:36PM",
        "content": "Unfortunately you are out of luck with this. We build the model on CPU but it needs to transfer to GPU memory if it is to run on the GPU. If we jump between CPU and GPU RAM at every iteration the speed of execution will be rather slow. In future an investigation into doing chunks of a big model in sequence using one GPU might be an interesting thing to consider but given the costs of a Titan X with 11GB it might be some time as it is not high on the priorities list!\n\nBest\n\nAntonis"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Mar 20, 2019, 3:49:07AM",
        "content": "How many of those undergraduate and/or PhD workstations where people are put in to do their thesis do you know that have the budget to buy a 2.5k card? XD\nWhen I did my MSc. people considered me lucky to have been provided a desk ..."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 20, 2019, 7:00:14AM",
        "content": "We have two Titan Xs and two GTX 1080 Tis with about 11Gb RAM each (the Xs have 12 I think) The 1080 Ti costed about £750 at the time and the new version should be around or under £1000. They are expensive gaming cards and not the server grade V100 or P100s that cost much more. My students get access to the required resources to do their work (as it should be ...) It is not right, in my view, to ask a student to work on a project that requires 10Gb size models and offer him/her a little laptop to work on ... I know things are not the same everywhere! \n\nThere is the aspect of diminishing returns as well. Developing a GPU code is complex enough but trying to efficiently shift parts of the model in and out of the GPU it is not easy and cannot be done to preserve the speedup gain like the way it works if all the model is in GPU memory. Saying that we have not tried this but we need to prioritise the limited resources we have.\n\n\nBest\n\nAntonis"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Apr 26, 2019, 10:08:14AM",
        "content": "The hardware itself is not the point here. \nPeople are not calculating how much RAM a model is gonna use before appinting projects. \nAll I am saying is that it would be damn convenient and remove a lot of barriers if chunks would be possible. \n\nFor example I wuld really like to compare the results of  the  \"TU1208 Open Database of Radargrams: The Dataset\nof the IFSTTAR Geophysical Test Site\"\nI'ts about 20m x5m  for each profile. \n\nAs of right now, I would have to go through my uppers and somehow convince them to buy a multi-thousand euro piece of equipment for an experiment that might not yield any results at all. \nI get the limitations of the code, I am just thinking if there might be a way to sacrifice a bit of accuracy to get bigger models."
      },
      {
        "author": "Craig Warren",
        "date": "Apr 29, 2019, 5:44:06AM",
        "content": "Hi Paul,\n\nPeople are not calculating how much RAM a model is gonna use before appointing projects. \n\nActually this is exactly the sort of estimate I make, before deciding what resources I need to include in the budget for a project. Whether that be costing for time on someone elses HPC, buying a new GPU, or more RAM for a machine.\n\nOr course it would be great to be able to decompose a model domain across multiple GPUs or multiple CPU nodes of a HPC. However, this will most likely require a MPI-based domain decomposition. Whilst this is theoretically not that difficult to do, neither Antonis or I have the time to do the coding. Therefore it means we need to find the budget and more importantly the person with the necessary skills to do it - coding experience and a knowledge of MPI and the Finite Difference Time Domain method.\n\nSo yes, if would be good to have, and may come at some point to gprMax, but not right now.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zAB1zjiCBn8",
    "title": "Why I can't see the object in the geometry view?",
    "original_post": {
      "author": "m mh",
      "date": "Jan 16, 2018, 6:04:45PM",
      "content": "Why I can't see the object in the geometry view resulted from the following code?\n\n#domain: 0.440 0.410 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.370 0 my_ricker\n#rx: 0.140 0.370 0\n\n#box: 0 0 0 0.340 0.270 0.002 half_space\n#cylinder: 0.120 0.268 0 0.120 0.268 0.002 0.100 pec\n\n#geometry_view: 0 0 0 0.440 0.410 0.002 0.002 0.002 0.002  cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 17, 2018, 4:20:52AM",
        "content": "See attached image of the geometry from Paraview. Your model is rather strange, but all the objects you have specified are there. What are you using to visualise the geometry? As mentioned in another thread, we recommend Paraview and supply a macro to help with viewing the geometry in Paraview.\n\nCraig"
      },
      {
        "author": "m mh",
        "date": "Jan 17, 2018, 3:35:44PM",
        "content": "I have used this macro \nhttps://github.com/gprMax/gprMax/tree/master/tools/Paraview%20macros\n\nbut I still can't get the same image as yours!\nI am new to this, so thank you so much for your helpful answers and for the time you spend to answer our questions."
      },
      {
        "author": "Craig Warren",
        "date": "Jan 17, 2018, 3:44:49PM",
        "content": "Hi,\n\nI appreciate you are new, but we have tried to put a lot of effort into the documentation which describes how to visualise the geometry - http://docs.gprmax.com/en/latest/output.html#geometry-output\n\nIf you are following these instructions with the input file you posted previously then you should get the same image I posted earlier. If this is not happening then let us know the version number of gprMax you are using and the operating system you are running on.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "m mh",
        "date": "Jan 17, 2018, 4:30:33PM",
        "content": "Yes !! thank you thank you. it is working now.\n I really appreciate your help."
      },
      {
        "author": "m mh",
        "date": "Jan 17, 2018, 5:56:21PM",
        "content": "I can see the geometry but I do not see the transmitter and the receiver\n here is the code:\n\n#domain: 1.600 1.700 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n#material: 4.5 0 1 0 Concrete\n#material: 5.8 0 1 0 pvc\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.400 1.600 0 my_ricker\n#rx: 1.200 1.600 0\n\n#box: 0 0 0 1.600 1.600 0.002 half_space\n#cylinder: 0.800 0.700 0 0.800 0.700 0.002 0.300 pec\n\n#geometry_view: 0 0 0 1.600 1.700 0.002 0.002 0.002 0.002 \n\ncylinder_half_space222 n"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 18, 2018, 4:28:46AM",
        "content": "They are there, hide the half_space material in Paraview, the zoom in.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/UfnBpUAh6Fo",
    "title": "Inquiry regarding exporting Pemittivity and conductiviy maps",
    "original_post": {
      "author": "Zohaib Akbar Khan",
      "date": "Dec 1, 2024, 1:54:24AM",
      "content": "Hi Team\nOnce gprMax creat the .vti file, it can be visulize in paraview, but if i want to extract the same topography or map with pre-assigned model properteies, so is there nayway to extract them ?\nlike can i extract the perm, cond spatial distributed data from the .vti file? or anyother way to extract it?\nthanks\nregards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 2, 2024, 9:28:55AM",
        "content": "You could use #geometry_objects_write to export to HDF5 and then read the 'solid' array - https://docs.gprmax.com/en/latest/input.html#geometry-objects-write This will give you an array of integers which can be 'looked up' against your list of materials to see the permittivity and conductivity. gprMax purposing does not store material properties for every cell - it uses a lookup table which is more memory efficient.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Zohaib Akbar Khan",
        "date": "Feb 12, 2025, 2:17:20AM",
        "content": "Thanks Craig,\nI have used this  #geometry_objects_write to get eh h5 for overall subsurface and also for the indiviual material too, but that values are wiered, like for low conducitivty like 0.0001 it shows the 7 value and similarly for high resisitivty 0.1 it gives the 35, so what factors it incorporated while creating this file? in short, mainly i am confused that how can i get the exact same values of perm and conduc from this file, do we have to use the replace option in excel to change the values as per the guess? becasue there is not specific formula about these values?\nthanks\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/e2ZslC4yTGk",
    "title": "python script error",
    "original_post": {
      "author": "Rakeeb Jaufer",
      "date": "Dec 3, 2019, 5:35:06AM",
      "content": "Hi there, \n\n\ni am getting an error in the code says 'gprMax is not defined '   ,  please may i know the reason ?.  i want to introduce script to vary the input parameters. \nregards\nRakeeb \n\n\n#python:\nfrom gprMax.input_cmd_funcs import *\nfor x in range(1,3):\n gprMax.input_cmd_funcs.domain(x, 1.15, 0.002)\n#end_python:\n\n#dx_dy_dz: 0.001 0.001 0.002\n#time_window: 40e-9\n#material: 20 0.001 1 0 layer1\n\n#box: 0 0 0  1 1.1 0.002 layer1\n#cylinder: 0.5 0.1 0 0.5 0.1 0.002 0.02 pec\n#waveform: ricker 1 1e9 my_wave\n#hertzian_dipole: z 0.10 1.101 0 my_wave\n#rx: 0.10 1.101 0\n#src_steps: 0.01 0 0\n#rx_steps:  0.01 0 0"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 3, 2019, 6:41:34AM",
        "content": "Hi Rakeeb,\n\nBe careful with your Python commands. If you are importing the input_cmd_funcs module from gprMax, then you should be using functions directly be their name, e.g. domain(x, 1.15, 0.002). I would also ask you to think carefully why you need to parameterise the domain size.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kSJP76b0dnM",
    "title": "Is it possible to set a source array with different phase?",
    "original_post": {
      "author": "Dongyu Du",
      "date": "Apr 1, 2024, 9:40:05PM",
      "content": "Hello,\nI am wondering if it is possible to set a source array in gprMax. And each element has different phase. Thanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:16:19AM",
        "content": "Not directly, but you may be able to achieve what you desire by using a different waveform (with different phase) for each source in your array, or you may be able to use the start/stop time parameters in the source specification, e.g. f4/f5 in https://docs.gprmax.com/en/latest/input.html#hertzian-dipole\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jcBN4psQMtQ",
    "title": "GSSI - 1500",
    "original_post": {
      "author": "Mahdi Njf",
      "date": "Feb 9, 2023, 9:56:15AM",
      "content": "hi.\nim student of university and working on gssi-1500 code,\ni have 2 problems\n1-what is difference of these resistances in code and How is their value calculated?\n2-why we must use these edges for exiting antenna and coneccting bowties?\nthanks for your helping."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 17, 2023, 4:45:20AM",
        "content": "The two resistance values represent the resistance at the feed point of the transmitter bowtie antenna element and the resistance betweeen the arms of the receiver bowtie antenna element. There values are derived from an optimistion process which is described in published papers - you'll find links to the papers in comments next to the code, or in the publications section of our website.\n\nThe edges of Perfect Electric Conductor (PEC) material are used to represent physical wire that runs between the bowties arms (of both transmitter and receiver) to a single cell gap where either the source/feed is placed (for the transmitter) or the receiver/output is taken. Again if you look in the papers/thesis we have published you will see both photos and modelled geometries of the antenna, so can see how the physical antenna geometry is modelled.\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZDv7dtOPG1I",
    "title": "Mixture building and analysing through CRIM model",
    "original_post": {
      "author": "Mustapha Bahich",
      "date": "Sep 12, 2022, 5:04:11AM",
      "content": "Hello everyone, We want to simulate electromagnetic response of some construction materials mixtures with gprMax using CRIM models. Please, can anyone help me? Thank you in advance."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bsiRvluVhRU",
    "title": "A_scan plot error",
    "original_post": {
      "author": "Tolunay Aydın",
      "date": "Jul 19, 2016, 4:42:02PM",
      "content": "Hi, i use 3.0.0b19 version and when i try to plot the A-scan output file i get the following error\n[gprMax] C:\\Users\\Tolunay Aydın\\Downloads\\gprMax-v.3.0.0b19>python -m tools.plot_Ascan cylinder_Ascan_2D.out\nTraceback (most recent call last):\n  File \"C:\\Users\\Tolunay Aydın\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 170, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Users\\Tolunay Aydın\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\Tolunay Aydın\\Downloads\\gprMax-v.3.0.0b19\\tools\\plot_Ascan.py\", line 39, in <module>\n    f = h5py.File(file, 'r')\n  File \"C:\\Users\\Tolunay Aydın\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\h5py\\_hl\\files.py\", line 272, in __init__\n    fid = make_fid(name, mode, userblock_size, fapl, swmr=swmr)\n  File \"C:\\Users\\Tolunay Aydın\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\h5py\\_hl\\files.py\", line 92, in make_fid\n    fid = h5f.open(name, flags, fapl=fapl)\n  File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper (C:\\aroot\\work\\h5py\\_objects.c:2579)\n  File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper (C:\\aroot\\work\\h5py\\_objects.c:2538)\n  File \"h5py\\h5f.pyx\", line 76, in h5py.h5f.open (C:\\aroot\\work\\h5py\\h5f.c:1813)\nOSError: Unable to open file (Unable to open file: name = 'cylinder_ascan_2d.out', errno = 2, error message = 'no such file or directory', flags = 0, o_flags = 0)\n\nHow can i solve the problem.Thanks in advance"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 20, 2016, 4:42:16AM",
        "content": "Hi Tolunay,\n\nThe error message indicates it can't find the file with that name. Are you sure you got the name (and case) of the output file correct and the path was correct?\n\nCraig"
      },
      {
        "author": "Mert Su",
        "date": "Jul 25, 2016, 9:45:12AM",
        "content": "Tolunay,\n\nTry this; python -m tools.plot_Ascan user_models\\cylinder_Ascan_2D.\nout\n\nYou need to make sure that the correct file path is specified for the files."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IqhVDu3SrCk",
    "title": "Issue in ground truth generation for grass surface",
    "original_post": {
      "author": "Santhu Athidi",
      "date": "Nov 2, 2023, 10:58:11AM",
      "content": "Dear all,\n\nI have seeded the random number generator to get  the same seed for the models with and without the target for generating ground truth. it is working fine for added roughness and water cases. for grass surface it leaves some clutter portions. please help me in this regard."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fBd-8Hx3M-0",
    "title": "gprMax for full waveform inversion",
    "original_post": {
      "author": "Yanting Ma",
      "date": "Oct 16, 2024, 5:35:07AM",
      "content": "Dear gprMax Team,\nI have been trying to use gprMax as the forward model simulator for full waveform inversion within an iterative reconstruction algorithm. At each iteration of the algorithm, the permittivity map of the computational domain gets updated, and I need to use gprMax to perform simulation with the updated permittivity map. For now, I use the #geometry_objects_read command, and I define each pixel in the computational domain to be an individual material. In this way, the number of materials in the .txt material file is the number of pixels in the computational domain. While this method worked, it was running very slowly for two main reasons:\n1. Writing the .txt material file took a lot of time\n2. The memory required to store the UpdatecoeffsE and UpdatecoeffsH arrays exceeded the limit allowed by GPU simulation, so I was only able to run the simulation on CPU.\nI am wondering if there is a more efficient way to pass an arbitrary permittivity map to gprMax for simulation. If I need to modify the gprMax code, what would be your suggestions for modifying it?  \nThank you very much for your help.\nYanting"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 16, 2024, 7:38:54AM",
        "content": "Hi Yanting,\n\nThat is a very interesting question! gprMax has been used in the past by researchers as part of an inversion process and this is a problem that has been faced by others in the past and has not immediate obvious solution. Interfacing directly with the code instead of exchanging files will help with computation speed but this requires extra work and then embedding gprMax ir your inversion code or your inversion code in gprMax  means that in future if you want to publish your code you need to follow the same criteria as we do for open-source. Not interfacing directly at the code level, as you do at the moment, does not have such problems. \n\nNow a possible improvement you could try - depending on the approach you are taking for inversion - is to \"bin\" your permittivity variation and limit the allowed steps that permittivity can take. If you are inverting for both permittivity and conductivity this will not help you as much but for permittivity only inversion it might be worth trying. If you round your relative permittivity update to the 2nd decimal point then from 1 to 81 range of relative permittivity that is practically the most you can expect you will have only 8001 possible materials. If you do that more accurately and round it to the 3rd decimal you just increase this by 10. However, 8001 materials that can be pre-stored are a lot but not that many when compared with creating a new material for each cell as that number can run easily to millions for big models. You need to consider if it is really possible to discriminate very small differences of permittivity by allowing one cell to have a different material that only varies very little from its neighbour. Obviously, this approach becomes more difficult if you need to consider conductivity ranges as well. Also, depending on the algorithm that you use the loss of such precision in the steps might be important and this is something that you need to consider. In real practice we can not really discriminate very small changes of permittivity from actual GPR data as there are factors that influence the real signals that will mask them completely (e.g. clutter and noise)\n\nIrrespectively of how you do this even if you interface the algorithm directly, if you need to have a different set of update coefficients for every Yee cell in the FDTD model the memory footprint will become very large very quickly. In gprMax we use an associative array approach where every component has an integer ID and this points to the list of materials that give the correct recalculated update coefficients. This is very memory efficient in comparison with storing for every field component the update coefficients as often they are the same for big regions of the model.\n\nIt will be interesting to see any results you get from your inversion approach and how you manage to do this! If you need help with understanding aspects of the code get in touch and also look at our development branch as the new version will have some better features than the current one.\n\nBest wishes\n\nAntonis \n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3bipQfQ_BBo",
    "title": "Installation on machines disconnected from Internet",
    "original_post": {
      "author": "Cédric Augonnet",
      "date": "Jun 13, 2020, 3:40:44PM",
      "content": "Dear group,\n\nWe are trying to install gprMax (with GPU support if possible) on a machine which has no access to Internet, so that the standard way to install gprMax with Anaconda is delicate to carry out.\n\nSince many (most) supercomputers are offline, this issue has perhaps already been solved in a documented way?\n\nSpack would be a perfect fit, but there does not seem to be a spack package available for gprMax so far?\n\nThe Anaconda pack project might be a solution, but perhaps the usual approach is to setup a mirror with all the required anaconda dependencies on the offline machine.\n\nSo I would be glad if there is some good practice that we can apply on our machine!\n\nCedric Augonnet\nFrench Alternative Energies and Atomic Energy Commission (CEA)"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 15, 2020, 4:21:05AM",
        "content": "Hi Cedric,\n\nI have done quite a few installs of gprMax on HPCs, but always just in user space with an internet connection, so I don't have an immediate solution for you. Spack looks interesting....I will take a look when I get a chance. Meantime please let me know how you get on, and if I can be of any help let me know.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Cédric Augonnet",
        "date": "Jun 15, 2020, 5:50:58AM",
        "content": "Craig,\n\nThanks for your reply ! I confirm that SPACK is getting an increasing audience in HPC, and makes it possible to deal with problems like using both dependency packages compiled with SPACK (and their appropriate options), and system installed software like CUDA. Packaging it in SPACK means anyone can then call \"spack install gprmax\" (+gpu support if needed).\n\nIn the meantime, we could either try to install gprMax manually, but it may end up being faster to follow https://spack-tutorial.readthedocs.io/en/latest/tutorial_packaging.html on our side too...\n\nBest,\nCédric"
      },
      {
        "author": "Cédric Augonnet",
        "date": "Jun 17, 2020, 3:06:47AM",
        "content": "Dear all,\n\nIt looks one (skilled) admin managed to set up a Docker container which has a HTTP proxy well hidden under the hood on some small experimental cluster. So docker can be an approach for some users even though I personally find this tedious...\n\nYet, it does not solve the case of classified machines with more restrictive access which are not physically connected to the outer world.\n\nCédric"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 18, 2020, 4:33:06AM",
        "content": "Another option would be dockerizing the environment and use that docker container, no?"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FMB_GrI5wGE",
    "title": "Loss tangent or complex permittivity in material",
    "original_post": {
      "author": "Sudantha Perera",
      "date": "May 2, 2020, 12:33:26PM",
      "content": "Dr. Warren,\n\nCan we define material with loss tangent or complex permittivity?\n\nThank you\n\nSudantha"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 3, 2020, 5:11:59AM",
        "content": "Dear Sudantha,\n\nYes, there are different mechanisms for modelling materials with frequency dependent permittivity - Debye, Drude, Lorentz - see the docs: http://docs.gprmax.com/en/latest/input.html#material All can be used with multiple poles to fit your material behaviour.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GXUQKctAvI0",
    "title": "Will two GPUs accelerate an A-scan computing?",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Oct 26, 2017, 8:42:38AM",
      "content": "I used a NVIDIA GPU for Gprmax GPU running, and got a fast computing. I am wondering if it will achieve further acceleration when I add another GPU card. I do not mean the B-scan. I am referring to a A-scan. Will two GPUs accelerate the solver in GprMax?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 26, 2017, 9:09:36AM",
        "content": "Hi Feng,\n\nThe short answer is no, multiple GPUs will not speed up single A-scan. At present multiple GPUs can help for a B-scan by being able to run multiple A-scans in parallel. Also in the future we will look at using some sort of MPI on GPUs so that models that are too big (require too much memory) for a single GPU, can be split across multiple GPUs.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/G691dB1ceFo",
    "title": "Snapshot folder",
    "original_post": {
      "author": "Mert Su",
      "date": "Apr 13, 2016, 11:36:51AM",
      "content": "Hi all,\n\nI have a question about the snapshot option. I am not an experienced python user and I tried couple of different ways to get around creating a snapshot folder via an automated process without any luck. I am generating many models for similar scenarios using a complicated model name scheme. e.g. 2dAr2St1212f.in and 2dAr2Sm3232i.in represent two similar but different scenarios that I need to examine the E and H fields of. There are many more and I run the models in different folders but I still need to create folders for the snapshots. Hence I can store the relevant snapshots within their respective folders. This can be accomplished by manually modifying the input file. However, I am tired of doing it manually. I need the program create a folder for the snapshots having the same name as the input file and store that folder within the same folder as the input file. I am sure there is a better way to do this than manually.\n\nBasically, I would like the program to create a folder, with the same name as the model input name without \".in\" and store all the snapshot.vti files in that folder. When I create the folder from Finder/Windows Explorer and implement the following code segment in the \".in\" file, all the snapshots are stored in that folder for that model.\n\n#python:\nfor i in range(1,n):\n   print('#snapshot: x1 y1 z1 x2 y2 z2 dx dy dz {} Folder_name/file_name{}'.format(...))\n#end_python:\n\nHowever, this seems like a poorman's coding because I can see that there are variables for the file path and the file name in the main module (gprmax.py);\n\ninputdirectory\ninputfile\n\n\n\nWhat I have in mind is; once inputfile and inputdirectory are set; python will create a folder something called \"snaps_\"inputfile and store the snapshot data in that folder. I am not sure whether this can be accomplished by something like the following;\n\nImplement a single line of code to create a folder name called snaps_inputfile within gprmax.py or elsewhere;\nsnapdirectory = \"snaps_\" + inputdirectory + os.path.basename(args.inputfile)\n\nthen implement that variable within the \".in\" file to something like below;\n\n#python:\nfor i in range(1,n):\n   print('#snapshot: x1 y1 z1 x2 y2 z2 dx dy dz {} \"snapdirectory\"/file_name{}'.format(...))     <------- \"snapdirectory\" is still a variable here, not an absolute name or location. Program will call that variable when running this line.\n#end_python:\n\n\nCheers!\nMert"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2016, 1:35:55PM",
        "content": "Hi Mert,\n\nNice suggestion! I think making gprMax automatically create a folder with a name based on the input file for any snapshots is a good idea. It will be fairly straightforward to do, so I'll look into it.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 14, 2016, 11:42:15AM",
        "content": "I've now implemented this in v.3.0.0b27 which is available from the master branch on GitHub, but not yet as a release. Please give it a go and let us now if it works for you.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Mert Su",
        "date": "Apr 14, 2016, 9:18:16PM",
        "content": "Craig,\n\nThank you for quickly implementing the code however, it did not work for me. I had version b24 installed and everything was working fine until I tried implementing the changes. First, I manually entered the code in b24 in each respective file following your steps but it did not work. Then I reversed everything I did and it started working again without snapshot folder availability of course. I thought maybe it had something to do with b24 and downloaded and upgraded to b26. It did not work. Then I thought maybe the environment needed to be rebuilt for b26. I did that too but no luck. I attached the screenshot. I hope it helps to resolve the issue. Although, this error seems not to be related to snapshots folder, it would be nice to use the latest version. Until then I will use b24. \n\nCheers,\nMert"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 15, 2016, 4:04:38AM",
        "content": "Hi Mert,\n\nTo use the master branch from GitHub you must build some modules yourself. It is not too difficult and is described here - http://docs.gprmax.com/en/latest/readme_install_devs.html#installation-for-developers If you follow these instructions it means you can always use the latest code, and not have to wait for me to build a new release. However you are welcome to wait, and I will properly have a chance to make a new release next week.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mert Su",
        "date": "Apr 18, 2016, 9:39:03AM",
        "content": "Craig,\n\nI used the developers' code and it completed without a problem however, now I am receiving a different message.\n\nImportError: No module named 'gprMax.fields_update'\n\nRegards,\nMert"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 18, 2016, 9:42:48AM",
        "content": "Mert,\n\nThat usually indicates you did not compile the Cython modules correctly, i.e. step 4b. \n\nCompile the Cython extension modules using: python setup.py build_ext --inplace. You should see a set of .c source files and a set of .so (Linux/Mac OS X) or .pyd (Windows) compiled module files inside the gprMax directory.\n\nDid you run this command and see the modules being compiled?\n\nCraig"
      },
      {
        "author": "Mert Su",
        "date": "Apr 18, 2016, 11:25:02AM",
        "content": "Craig,\n\nThanks a lot. It works!! I had added two comments and deleted them later on. Please disregard those."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EpLTdtU54jE",
    "title": "Access to a Database",
    "original_post": {
      "author": "Mohammad Ali Ameri",
      "date": "Feb 20, 2022, 12:18:14AM",
      "content": "Hello\n\nI watched the video \"Machine learning using synthetic data\" by Dr. Iraklis Giannakis. I was wondering whether it is possible to have access to the data they have produced for training their neural network? \n\nProducing such an amount of data for training a neural network takes a lot of time. Hence, I appreciate it if you let me have access to this database or a similar one. Specifically, I am working on the issue of rebar detection in concrete beams or decks. Thus, having access to a database containing a large amount of A-scans or B-scans from buried rebars would be really helpful. Is it any way to have access to such an amount of data?\n\nThanks in advance,\nBest"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 22, 2022, 7:10:24AM",
        "content": "We don't currently have plans to release the data we have generated for some of our machine learning approaches. \n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Mohammad Ali Ameri",
        "date": "Mar 2, 2022, 4:59:17PM",
        "content": "Hello\n\nThanks for your answer. I have another question. I could open several command prompts in windows and run several gprMax models simultaneously. Do you have any comments on this method? Does this method for producing large data make any problem in the analysis?\nAlso, I will appreciate any other suggestions you have for producing large amounts of data more efficiently using gprMax.\n\nRegards,\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 3, 2022, 8:35:27AM",
        "content": "Opening several command prompts and running multiple copies of gprMax is not a great approach. If you read the docs you'll see that the best way to manage multiple gprMax instances is using MPI. However, you still have to have the available computational resources to make it worthwhile.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/j5SaARukWUw",
    "title": "Error in B-Scan Output",
    "original_post": {
      "author": "savita s",
      "date": "Jun 9, 2021, 11:45:15AM",
      "content": "Hi all,\nAnyone please help me out why i am getting error in this file. Everything is same like example given in the example.Only i changed is cylinder x- axis 0.060 . The orientation of the object i moved to 0.060.Why this error? Please help me out. Thank you\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.060 0.080 0 0.060 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 9, 2021, 5:06:25PM",
        "content": "You are not merging your A-scans into a B-scan correctly - probably because of the filename you have chosen - hence you are trying to plot something which is not a B-scan.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yutd7yctCik",
    "title": "Amplitude's strangeness",
    "original_post": {
      "author": "Svetlana Bricheva",
      "date": "Feb 25, 2016, 7:59:25AM",
      "content": "Hi, masters of GprMax!\n\nI'modelling the simple task now: I have a box, full of water (code is below).\nSource and receiver are located on the water surface. As a result of simulation I want to obtain the direct wave, the reflection from the border between waterbox and air, and some multiple reflections.\nI change the discretization. When I use dx=dy=0.002 m, I have a trace with strange \"noisy\" part in signal (as a picture below).\nWhen I use the smaller dx=dy=0.001m, there are no such noise, but the amplitude of first reflection is greater, than the direct wave... I can't understand my mistake. May be it is something in gprmax calculations?\nThank you for any advice!\n\nMy code:\n\n#domain: 0.2 0.5 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 5e-8\n#time_step_limit_type: 2D\n#pml_cells: 10 10 0 10 10 0\n---------------------------------------------------------------------\n#material: 81 0 1 0 my_water\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.075 0.39 0 my_ricker\n#rx: 0.125 0.39 0\n---------------------------------------------------------------------\n#box: 0 0.1 0 0.2 0.38 0.001 my_water"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 25, 2016, 9:02:11AM",
        "content": "Hi Svetlana,\n\nYour model with dx=dy=2mm has numerical dispersion. Remember, 1.5GHz is the centre frequency of the Ricker wavelet. There will be frequency components 2-3 times this value propagating in the simulation. So your spatial resolution must be calculated using a higher frequency - see http://docs.gprmax.com/en/latest/examples_simple_2D.html#determine-the-source-type-and-excitation-frequency A dx=dy=1mm is on the limit. The three events in the response are:\n\n- The combination of the direct and ground wave\n- The reflection from the lower water/air interface\n- A multiple reflection of the reflection from the lower water/air interface\n\nThe direct and ground waves are likely combining destructively, resulting in a lower amplitude than the reflection from the lower water/air interface. You can play around with the Tx/Rx spacing and distance from the air/water interface to investigate this.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gjfOXSea1Lo",
    "title": "Multiple sources within one simulation",
    "original_post": {
      "author": "James Whittaker",
      "date": "Nov 25, 2021, 9:44:30AM",
      "content": "Hi All,\n\nI'm looking within one simulation run activate multiple sources. I tried to use the following as a quick test but this didn't work.\n\nprint('#waveform: gaussiandot 1 0.9e9 my_ricker')\nprint('#waveform: gaussiandot 1 0.9e9 my_ricker2')\n\n\n\n#Duel source following the rotation\nx1=0.05*np.cos(theta)+pivotx\ny1=0.05*np.sin(theta)+pivoty\nz1=0\ntxt='my_ricker'\nprint('#hertzian_dipole: z {} {} {} {}'.format(x1,y1,z1,txt))\n\n#Duel source following the rotation\nx1=0.05*np.cos(theta)+pivotx+0.4\ny1=0.05*np.sin(theta)+pivoty\nz1=0\ntxt='my_ricker2'\nprint('#hertzian_dipole: z {} {} {} {} {}'.format(x1,y1,z1,txt))\n\nI got a error of IndexError: Replacement index 4 out of range for positional args tuple\n\nWhat am I doing wrong here? I'm looking to project a series of sources with a set time delay as part of a re-working of the RTM method.\n\nThanks\nJames"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 8, 2021, 3:15:50PM",
        "content": "James,\n\nLooks like an error with your print function - print('#hertzian_dipole: z {} {} {} {} {}'.format(x1,y1,z1,txt)) \n\nYou have one too many sets of brackets {}.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Cd5h6AWoMik",
    "title": "SFCW or FMCW waveform in gprMax",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Mar 7, 2023, 12:40:25PM",
      "content": "Dear all, \n\n\nI hope you are well, anyone has experience implementing SFCW or FMCW waveform or may knew a source that can help me to implement these type of waves?\n\n\nBest\n\nHiman"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 7, 2023, 1:44:52PM",
        "content": "Dear Himan,\n\nHave a look on our YouTube channel - https://www.youtube.com/watch?v=_FWNeqTr9nc&list=PLf_lDHRs1yH6h5T-s-RvPbkdXFMqLrhy4&index=16\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LQMI6vcsxTM",
    "title": "GprMax limitation in term of direct control over geometry (topography) creation.",
    "original_post": {
      "author": "Zohaib Akbar Khan",
      "date": "Dec 1, 2024, 1:50:11AM",
      "content": "Dear gprMax Team,\n\nI have been trying to create 2D models of snowpack using gprMax. I have made several attempts using the fractal box and the add_surface roughness functions; however, despite my efforts, I have been unable to create the desired topography or undulations of the soil or snow layering. my questions are:\n\n1; Is it possible to create geometrical models in other software and subsequently import them into gprMax for simulation purposes?\n2: If you encounter this kind of issue, what strategies do you typically recommend?\n\nThank you in advance\nregards,\nZohaib\nphD researcher"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 2, 2024, 9:25:42AM",
        "content": "Yes - you can create your own geometry outside of gprMax and import it using #geometry_objects_read, see our docs https://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nKind regards,\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/z_rgSuus9oc",
    "title": "tqdm AttributeError",
    "original_post": {
      "author": "Ivan Dubrovin",
      "date": "Jan 8, 2019, 7:39:32AM",
      "content": "Good day to you!\n\nI have just installed gprMax after not using it for quite a long time and tried to run a test cylinder Ascan model, but python throws an exception from within the tqdm module that reads:\nAttributeError: type object 'tqdm' has no attribute '_lock'.\n\nThat has never happened before, and by what I found here and on gprMax GitHub page, it doesn't happen to any one else, which is quite strange.\ntqdm had an issue about it a while back, but it was closed long before I started using gprMax.\n\nThe whole traceback looks like this:\nTraceback (most recent call last):\n  File \"/Users/sir-dio/anaconda3/envs/gprmax/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/Users/sir-dio/anaconda3/envs/gprmax/lib/python3.6/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/Users/sir-dio/gprMax/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/Users/sir-dio/gprMax/gprMax/gprMax.py\", line 70, in main\n    run_main(args)\n  File \"/Users/sir-dio/gprMax/gprMax/gprMax.py\", line 203, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/Users/sir-dio/gprMax/gprMax/gprMax.py\", line 244, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/Users/sir-dio/gprMax/gprMax/model_build_run.py\", line 161, in run_model\n    process_multicmds(multicmds, G)\n  File \"/Users/sir-dio/gprMax/gprMax/input_cmds_multiuse.py\", line 582, in process_multicmds\n    tqdm.write('Material {} with eps_r={:g}, sigma={:g} S/m; mu_r={:g}, sigma*={:g} Ohm/m created.'.format(m.ID, m.er, m.se, m.mr, m.sm))\n  File \"/Users/sir-dio/anaconda3/envs/gprmax/lib/python3.6/site-packages/tqdm/_tqdm.py\", line 525, in write\n    with cls.external_write_mode(file=file, nolock=nolock):\n  File \"/Users/sir-dio/anaconda3/envs/gprmax/lib/python3.6/contextlib.py\", line 81, in __enter__\n    return next(self.gen)\n  File \"/Users/sir-dio/anaconda3/envs/gprmax/lib/python3.6/site-packages/tqdm/_tqdm.py\", line 540, in external_write_mode\n    cls._lock.acquire()\nAttributeError: type object 'tqdm' has no attribute '_lock'\n\nFrom what I gathered from the issue, the problem is that tqdm.write() call.\nI am not sure how to fix this. Any ideas?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 8, 2019, 9:46:30AM",
        "content": "Hi Ivan,\n\nMy first suggestion (if you haven't already done so) would be to update conda, then activate your gprMax environment and update that:\n\n$ conda update conda\n(gprMax)$ conda env update -f conda_env.yml\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ivan Dubrovin",
        "date": "Jan 8, 2019, 1:32:58PM",
        "content": "Thanks for the quick response!\n\nI have tried that, also tried uninstalling, rebuilding and reinstalling everything. It still does that. \nIt starts, prints the logo, host info, model parameters, etc. The last thing it prints before the exception is receiver coordinates and components. For some reason, it stops at materials.\n\nI tried all that on another machine that runs Ubuntu (the broken one runs macOS) and everything works fine there. I am well confused."
      },
      {
        "author": "Ivan Dubrovin",
        "date": "Jan 8, 2019, 1:56:50PM",
        "content": "I checked the installed versions of tqdm on both machines. The one on Ubuntu was a lot older, so I tried downgrading the second one to match it. It works now, but I have no understanding of what the problem was.\n\nMy guess is that on Mac I installed conda for python 3.7 and updates for some packages there somehow break something.\n\nAnyhow, thank you for answering!"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 9, 2019, 8:21:02AM",
        "content": "Glad it is working. The conda environment file for gprMax should keep Python at 3.6.x irrespective of what you downloaded from the conda website. This is because we know there are issues with Python 3.7 and some of the maths libraries. With the gprMax environment activated you can use\nconda list\nto check the version number of what tqdm is installed.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 11, 2019, 6:24:02AM",
        "content": "This looks like a problem with version 4.29.0 of the tqdm package. Until it is fixed I have pinned tqdm to 4.28.1 in the conda environment file.\n\nIssue report is at: https://github.com/gprMax/gprMax/issues/188\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ycWVVS2lbhY",
    "title": "Tracking rebar in concrete: estimating the power required for gpr",
    "original_post": {
      "author": "مهرداد کریمی",
      "date": "Apr 25, 2024, 12:10:50PM",
      "content": "Hi everyone.\n    I tried to place two rebars with a diameter of 3 cm in a depth of 4 meters of concrete. Then with Hertzian dipole source and placing some rx in different positions, I tried to get the ratio of the received signal to the transmitted signal t.\n    My main goal is the ratio of returned power to transmitted power. (This is the first stage of the initial simulation to estimate the power required for this application)\nThis is my code.\n\n#Title: Hertzian dipole _ tow cylinder at a depth of 4 meters in concrete\n\n#domain: 0.3 0.40 4.3\n#dx_dy_dz: 0.0025 0.0025 0.0025\n\n#time_window: 80e-9\n#waveform: contsine 300 8e8 my_sine\n\n#hertzian_dipole: x 0.15 0.175 4.2 my_sine 0 30e-9\n\n#material: 4.5 1e-2 1 0 concrete\n#box: 0 0 0 0.3 0.3 4.1 Concrete y\n#cylinder: 0 0.05 0.05 0.3 0.05 0.05 1.5e-2 pec y\n#cylinder: 0 0.35 0.05 0.3 0.35 0.05 1.5e-2 pec y\n\n#rx: 0.15 0.175 4.2\n#rx: 0.15 0.175 4.15\n#rx: 0.15 0.175 4.05\n#rx: 0.15 0.175 2.05\n#rx: 0.15 0.175 0.05\n#rx: 0.2 0.175 4.2\n#rx: 0.2 0.175 4.25\n#geometry_geometry: 0 0 0 0.3 0.35 4.3 0.0025 0.0025 0.0025 hertzian_dipole f\n\n    But the simulation results are a bit strange. Although the transmitted signal stops after a while, I have a continuous received signal like noise, which does not look like a rebar reflection at all. Or I do not receive at all.\nMy questions are:\nIs my path to get this power a reasonable way?\nIs there a better way to estimate the required power of the device in gprmax software?\nDoes the signal have enough range?\n\nCan anyone introduce me to a better way or help me with possible problems with this simulation?\n\nMehrdad Karimi\nNit University"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lXXrgKUSjAI",
    "title": "Model used in 2D simulations.",
    "original_post": {
      "author": "Fabio da Silva",
      "date": "May 22, 2018, 1:40:04PM",
      "content": "Hi,\n\nI have been using gprMax to test some aspects of electromagnetic wave propagation for imaging purposes and have gone pretty far with my results. Even though I plan on experimentally implementing a full 3D solution, I actually use gprMax mostly on 2D simulations. Recently, however, I ran some of my results by a colleague who is a mathematician and he asked me a couple of questions about 2D simulations in gprMax. The first one is what model is actually being used to perform a 2D simulation. Second, in the documentation, you mention that Hertzian dipoles are assumed to be infinite lines in the direction perpendicular to the 2D plane, so does that mean that the propagating field is actually the solution of the 2D wave equation? If you could shed light to this, that would be great.\n\nCordially,\nFabio."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 22, 2018, 5:02:20PM",
        "content": "Hi Fabio,\n\nIt is a good idea to study the underlying method of a numerical solver in order to understand its abilities and limitations. The answer to your questions are very easy to find\n\nhttp://www.gprmax.com/about.shtml\n\nhttp://docs.gprmax.com/en/latest/gprmodelling.html\n\nBest\n\nAntonis"
      },
      {
        "author": "Fabio da Silva",
        "date": "May 23, 2018, 10:42:40AM",
        "content": "Thanks, Antonis.\n\nI was able to go back to your thesis, which states the 2D problem as reduction of the 3D problem dimension where the solution for (H1,E2,H3) is calculated [pgs. 56-57]. If I understand correctly, to invoke this solver, all we need to do is to define one of the directions in the simulation as containing one cell only. If that is correct, I can study the methods cited in your manuscript.\n\nCordially,\nFabio."
      },
      {
        "author": "Craig Warren",
        "date": "May 29, 2018, 10:02:52AM",
        "content": "Hi Fabio,\n\nWe are developing the docs further to explain how the 2D mode is simulated. Take a look at - http://docs.gprmax.com/en/latest/gprmodelling.html#basic-concepts\n\nThis is a work in progress as we aim to make the description as clear as possible.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Fabio da Silva",
        "date": "May 29, 2018, 4:13:35PM",
        "content": "Thanks, Craig.\n\nI looked in the literature for the impulse response in 2D and got something that goes like 1/sqrt(t^2-r^2). Since any solution to the wave equation in 2D will essentially have this behavior in time I wonder what guarantees does the model give as far as convergence at large times. I have not gotten down to answer this question but if you know could reference me to where it is addressed, I would highly appreciate it.\n\nCordially,\nFabio."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/d9EV-GsJPPE",
    "title": "Anyone please tell me how to compare these two images",
    "original_post": {
      "author": "savita K.B",
      "date": "Nov 15, 2021, 12:20:41PM",
      "content": "HI everyone,\nHereby i am attaching my two images with a change different objects buries. (metal and Pipe).How to compare these two images? what is the next step? For comparisons is any algorithms are there? \nPlease help me Thankyou inadvance.\n\nBelow is the code for metal\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.66 0.28 0.0005\n#dx_dy_dz: 0.0005 0.0005 0.0005\n#time_window: 5e-9\n\n#material: 3 0 1 0 sand_space\n\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.03 0.25 0 my_ricker\n#rx: 0.13 0.25 0\n#src_steps: 0.005 0 0\n#rx_steps: 0.005 0 0\n\n#box: 0 0 0 0.66 0.23 0.0005 sand_space\n\n\n#cylinder: 0.3 0.14 0 0.3 0.14 0.0005 0.015 pec\n\n\n\n#geometry_view: 0 0 0 0.66 0.28 0.0005 0.0005 0.0005 0.0005 cell1_concrete n\n\n\n\nBelow is the code for PVC pipe\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.66 0.28 0.0005\n#dx_dy_dz: 0.0005 0.0005 0.0005\n#time_window: 5e-9\n\n#material: 3.0 0.01 1 0 sand\n#material: 5 0 1 0 pvc\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.03 0.25 0 my_ricker\n#rx: 0.13 0.25 0\n#src_steps: 0.005 0 0\n#rx_steps: 0.005 0 0\n\n#box: 0 0 0 0.66 0.23 0.0005 sand\n\n\n\n\n#cylinder: 0.3 0.14 0 0.3 0.14 0.0005 0.015 pvc\n#cylinder: 0.3 0.14 0 0.3 0.14 0.0005 0.013 free_space\n\n\n#geometry_view: 0 0 0 0.66 0.28 0.0005 0.0005 0.0005 0.0005 cell1_pvc n\n\nThe first attached file is metal and the next one is PVC."
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Nov 16, 2021, 4:30:48PM",
        "content": "Hello\n\nI guess you got these B scans using the 'plot_Bscan.py' macro located in ''gprMax/tools' folder.\nIf you open that macro, you can see how to open a '.out' file and convert it into an array.\nRather that a gprMax issue, the rest is playing around with python. I am sure someone in your lab has a few python skills and can help you getting your job done\n\nThere are also a few Matlab macros, if you are more familiar with\n\nBest regards\n\nChristian\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ftQut-Y3XYw",
    "title": "command line arguments",
    "original_post": {
      "author": "Brad Artman",
      "date": "Jan 16, 2023, 11:57:26AM",
      "content": "Suggestion:\nWith the paradigm of extensive model.in file to control simulations, it seems an anathema to also require command line arguments on occasion. (Specifically, -n and --geometry-view-only keep tripping me up.)\nCan you move such into the model.in file upon next release?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 23, 2023, 12:23:36PM",
        "content": "Interesting thought....we will certainly have a think about it. The original 'design' thought was that the command line args pertain to a higher-level than model information which goes into the input file, e.g. they are parameters for a series of models/simulations.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bhTtP7LFr7A",
    "title": "Subject: Question on Time Discretization and Its Relationship with Spatial Discretization",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Nov 26, 2024, 4:46:29PM",
      "content": "Dear gprMax Community,\nI have a question regarding the relationship between space discretization (Δx,Δy,Δz) and the time window and how these affect the number of samples in the received signal. Specifically:\nHow does space discretization (Δx,Δy,Δz) relate to the total propagation time and the number of samples in the received signal?\nWhat is the formula or method for calculating time discretization (Δt) from the space discretization values?\nIn this context, are there any specific considerations or rules for ensuring stability and accuracy? I found that gprMax is processing this using the Courant stability condition, but I am not sure how accurate this is.\nI would appreciate any clarification or guidance on these points so that you can better understand the relationships and their impact on simulations.\nThank you in advance for your assistance!\nBest regards,\n\nHiman"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 27, 2024, 8:59:54AM",
        "content": "Hi Himan,\n\nI don't really understand the difficulty in answering these questions yourself. gprMax is an FDTD solver. You do not need to become an expert on FDTD to use but it is advisable to understand the basic concepts as given in http://docs.gprmax.com/en/latest/gprmodelling.html\n\nFDTD is an explicit numerical technique and it is conditionally stable. So, the time step is controlled by the speed of electromagnetic waves and the distance they need to cover from one elementary cell to the next. The maximum time step that is permitted can be found using a stability analysis (easy to see how it is done in papers and books). Once the time step is obtained then if you divide the total time window of the simulation by it you can find a number of iterations that you need to perform. gprMax does this for you. This number is often higher than the number of samples you have in a real GPR signal of the same duration as the sampling rate of real GPR systems is a different concept than the number of iterations needed by a numerical model.  You can always downsample a simulated GPR signal to make it comparable in number of samples with a real GPR signal. \n\nThe formula you ask for is given in the documentation. This is something you should read carefully.\n\nIf the FDTD solver does not follow the CFL stability condition your solution will be unstable and therefore useless. As the solution that gprMax provides is stable then it is evident that it follows the CFL condition well so you do not need to be worried. Actually you can see the way it does it yourself by looking at the relevant part of the gprMax code which is freely available at https://github.com/gprMax/gprMax/blob/master/gprMax/input_cmds_singleuse.py#L143  \n\nThere are other methods that allow you to use a bigger time step. They have other drawbacks but also benefits. If your problem is better served by them then you can investigate them (e.g. ADI-FDTD) \n\nHope this helps\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XkoKyQA5Hj0",
    "title": "What is the interface treatment strategy in gprMax?",
    "original_post": {
      "author": "zhang",
      "date": "Apr 21, 2022, 4:27:40AM",
      "content": "Dear Dr. Craig, \nI'm focusing on Maxwell's interface problems with discontinuous coefficients and complex interfaces. After comparison, I found that the results calculated with gprMax are very accurate around the material interfaces. How does gprMax handle discontinuous interfaces and curved interfaces?\nSome FDTD algorithms use curvilinear grid to solve the staircase approximation caused by Cartesian grid. And some strategies, such as Immersed Interface Method (IIM), Matched Interface and Boundary Method (MIB), and Correction Function Method (CFM), are used to deal with discontinuous interfaces. \nI notice that dielectric smoothing is used at material discontinuities in gprMax.  Does gprMax use other interface treatment strategies?  I don't find related information in the gprMax userguide and related papers.\nThank you.\nZhang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 21, 2022, 5:33:47AM",
        "content": "Thanks Zhang. We don't do anything special at boundaries to improve staircasing errors. As you say we do implement dielectric smoothing which can be toggled on or off as desired.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dkl4hy4EZ7M",
    "title": "'Position' doesn't exist",
    "original_post": {
      "author": "Armando Schneider",
      "date": "May 17, 2024, 1:47:31PM",
      "content": "Hello,\n\nI am encountering an issue with reading the position of a receiver from my simulation output file. \n\nIn my input file, I have defined the receiver's location with the following line:\n\n#rx: 0.5 3.2 0.75 \n\nAfter the simulation, I attempted to read the receiver's position using the following code:\n\nwith h5py.File(fname, 'r') as f: # Open the file using h5py\nprint(f['rxs']['rx1']['Position'])\n\nHowever, I received the following error message:\n\n\"Unable to open object (object 'Position' doesn't exist)\"\n\nI am able to read the six components, which indicates that the simulation completed successfully. Despite this, I cannot access the position information. According to the documentation (http://docs.gprmax.com/en/latest/output.html), the position should be saved in the output data.\n\nCould you please advise on how I can locate and read the receiver and source positions in the data?\n\nThank you for your assistance.\n\nBest regards,\n\nTed"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/TQXlp84kv2k",
    "title": "Antenna modelling",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "May 2, 2021, 8:08:19AM",
      "content": "Dear sir,\n             I have been working on development of analytical modelling for bi-static GPR. Currently I want to perform bi-static antenna calibration in gprMax. I have few queries related to this which are mentioned below.\n\n1. I want to generate S parameters (S11 and S21) in gprMax. I have referred to the transmission line command given in gprMax manual. But I am not clear on how to use this transmission line command for transmitter and receiver antennas, which can lead to s-parameter results, in bi-static scenario (Air-PEC scenario). I have simulated the example program of antenna_wire_dipole_fs.in. But I am facing an error (can't open attributes) in simulating the corresponding out file. I didn't get where it went wrong.\n\n2. We can use hertzian dipole, magnetic dipole as current sources in gprMax. Similarly can we use bow-tie antennas for subsurface investigation in gprMax? I have referred to an example program on bowtie antennas given in manual. But it is related to the commercial system where we cannot change the specifications. Moreover I can get only Ey field results. How to model a simple bow-tie antenna for a bistatic GPR scenario which can generate fields and s-parameters?\n\nKindly help me in this regard.\n\nThank you\n\nRegards\nRohit"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 2, 2021, 8:32:10AM",
        "content": "Hi Rohit,\n\nYou can do all these things in gprMax but you need to understand the way these parameters are calculated and the fact that gprMax will only provide you with the raw data that you will need to process properly further. If you want to use a transmission line feed for a receiving antenna you need to create another transmission line but the amplitude of the incident pulse in that second line should be set to zero (0). This way the transmission line is working as a receiver line. It is much easier to use a simple output point instead of this that will give you the electric field at the feed location and then you can convert this to a voltage. If you do not want to use the transmission line source you can achieve very similar results using the voltage source excitation. In this case you need to generate in post processing the incident voltage pulse as you will needed for S parameters but this is easy to do.\n\nYou can design your own bow-tie or other antenna structures. The models based on the GSSI antenna can be used as the basis of further study to see how they have been build and you can follow the same process for your own designs. You can always change their parameters and see the effect they have.\n\nThe tools are there but you need to be able to use them effectively and understand how the work (FDTD) and their limitations making your own scripts and post-processing ways (i.e. using Python or MATLAB or something else)\n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Ua6GWWBDMQs",
    "title": "gprMax update equation for a dispersive medium",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Nov 26, 2020, 8:16:50PM",
      "content": "Dear gprMax developers and users,\n\nCould someone tell me where I can find the gprMax update equation for a dispersive medium with N poles from Debye?\n\nAnother question: Does gprMax incorporate absorption? Or do you only consider geometric spreading and dispersion when applied?\n\nSincerely,\n\nBruno Barauna"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 27, 2020, 3:47:36AM",
        "content": "Hi Bruno,\n\nPlease check the documentation about materials. gprMax can simulate almost any dielectric properties with diagonal anisotropy and obviously material losses as well as any multi Debye or Drude or Lorenz media poles. The details of the implementation for the latter are found https://ieeexplore.ieee.org/document/6748914\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-Pcm7-9m38A",
    "title": "User-beginner help me",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "May 21, 2019, 9:19:44AM",
      "content": "First of all, congratulations on the creation of this software and the enormous benefit to science. I hope to know a lot more about him.\n\nI'm having difficulty finding an example that creates a 1D model and that I can see the radar session (radix section).\n\nI have questions on how to create a delo of two layers or more. I would have to use the #dx_dy_dz command more than once to determine these layers. And just like the previous doubt, as I see my radagrama secion, to show the effects of the EM waves on the interfaces created by the layers and the implemented targets.\n\nattentively,\n\nBruno Barauna\nMaster's degree student"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 22, 2019, 5:12:31AM",
        "content": "Dear Bruno,\n\nI don't fully understand your question. Have you worked through the simple 2D examples given in the docs? - http://docs.gprmax.com/en/latest/examples_simple_2D.html Once you have completed these you should be able to create a model with two layers. \n\nTo visualise the EM wave propagation you will need to use the snapshot command (http://docs.gprmax.com/en/latest/output.html#snapshots) and then visualise in Paraview afterwards.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "May 22, 2019, 7:16:56AM",
        "content": "Thank you Craig,\nI got to do the 2D simple example. But in the B-Scan section is colored and I want to simulate a GPR section that has the colors in shades of gray. I tried to follow the path (tools> B-scan plot) and in line 48 to change the command cmap = 'seismic' to cmap = 'gray'. However, the color grid still continue in red and blue as in the example http://docs.gprmax.com/en/latest/examples_simple_2D.html that you have generated."
      },
      {
        "author": "Pavan Kumar Akula",
        "date": "May 22, 2019, 7:25:20AM",
        "content": "Hi Bruno,\n\nAccording to my understanding once you change something in gprMax software (for example the cmap in your case), you should rebuild the software for the settings to apply across all the files in gprMax:\n\npython setup.py cleanall\npython setup.py build\npython setup.py install\n\nOr one other way to achieve the same objective:\nOnce you have generate the B-Scan file from gprMax, you can write a Python Script for plotting the B-Scan with cmap='gray'.\n\nI hope this helps you in solving your problem.\n\nKind regards\nPavan."
      },
      {
        "author": "Bruno Barauna",
        "date": "May 22, 2019, 10:58:42AM",
        "content": "Dear Pavan, thank you very much for your help. Worked perfectly.\n\nRegards,\n\nBruno Barauna"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/q8wbQnOpGtw",
    "title": "Creating a data set in MATLAB/ Python from 20 A-scan signal.",
    "original_post": {
      "author": "Hussain Mumtaiz",
      "date": "Jun 9, 2021, 5:17:21PM",
      "content": "Hi All;\nI'm running multi-A-scans with a single input file that's run multiple times with Python in different cylinder radius for different model runs. \n\nI already got two folders one with 20 output files another folder with related 20 radius values.\nI am looking for a solution or suggestion to transfer these folders to MATLAB/Python for further process.\nTake care and thank you in advance\nReg;\nHussain"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 10, 2021, 3:58:16PM",
        "content": "Dear Hussain,\n\nI don't understand what you are asking, please try to explain your question again.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Hussain Mumtaiz",
        "date": "Jun 16, 2021, 3:00:25AM",
        "content": "Hi again:\nI am looking for a way to transfer these folders to MATLAB or Python for further process. I would like a way that involves an automated way of not moving the files one by one.\nTake care and thank you in advance.\nReg;\nhussain\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/avFLrNfXO4I",
    "title": "Reconstruct Wavefield backward in time",
    "original_post": {
      "author": "Armando Schneider",
      "date": "Sep 2, 2022, 4:20:13AM",
      "content": "Hello,\n\nI am wondering whether gprMax can reconstruct Green's function backward in time from boundary values that are obtained from forward simulation.\n\nFor instance, if I want to do time-domain reverse time migration, I need snapshot from nt (time max) to 1. \n\nCertainly, I do not want to do simulation nt times and extract the last snapshot each time. I also do not want to save all nt snapshots in disk because the entire Green's function is large. \n\nHence, can gprMax reconstruct Green's function?\n\nCheers,"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 12, 2022, 4:48:16AM",
        "content": "You can perform reverse-time migration (RTM) with gprMax. The received signals (usually from a B-scan) must be reversed and used as sources at the location the signals were received. The geometry and materials need to match whatever your approximated velocity model is, N.B permittivity values will be squared to give correct velocities. You must still run the simulation for the required time window and store the final snapshot - remember the model is still using the Finite-Difference Time-Domain (FDTD) method.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "Brad Artman",
        "date": "Sep 13, 2022, 3:26:19PM",
        "content": "while gprMax does provide glorious physics- there is a difference between physics and geophysics often.\nRTM has a substantial literature canon, and the suggestion that the package as released can do RTM, I don't believe is correct.\nRTM requires two wave-fields (down-going and up-coming), an imaging condition (cross-correlation), and output that sums over source positions. This structure is substantive.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 14, 2022, 4:04:49AM",
        "content": "Hi Brad,\n\nSee any of the following publlications for evidence of RTM using gprMax:\nAlani, A.M., Giannakis, I., Zou, L., Lantini, L., Tosti, F. (2020). Reverse-time migration for evaluating the internal structure of tree-trunks using ground-penetrating radar. NDT and E International, 115, . 10.1016/j.ndteint.2020.102294\nLv, Y.-Z., Wang, H.-H., Gong, J.-B. (2020). Application of GPR reverse time migration in tunnel lining cavity imaging. Applied Geophysics, 17(2), 277-284. 10.1007/s11770-020-0815-9\nYang, Z., Yang, X., Wang, B., Lan, T., Zhao, Y. (2020). Fast frequency domain reverse-time migration based on nufft for ground penetrating radar. In IET Conference Publications, 604-608 10.1049/icp.2021.0850\nLei, W., Liang, Q., Tan, Q. (2018). A new Ground Penetrating Radar signal denoising algorithm based on automatic reversed-phase correction and kurtosis value comparison. Journal of Radars, 7(3), 294-302. 10.12000/JR17113\nFor example,  the paper by Alani et al  uses an exploding reflector model following the approach I previously outlined.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "gprMax-users",
        "date": "Sep 14, 2022, 5:32:04AM",
        "content": "Hi Brad,\n\nYou are correct that RTM requires a number of steps but centrally in its concept and development needs a forward solver for the fields a job that commonly is done by using FDTD. gprMax can and has provided that step as evidenced by the many papers Craig provided in the list. We do not say anywhere that gprMax performs RTM as it does not do any GPR processing. If anyone needs an FDTD solver for a task like RTM or other I think gprMax can provide that function well. Any other steps need to be sourced elsewhere or developed by the user and this depends on what is the specific task.\n\nHope that clears up any confusion.\n\nBest\n\nAntonis \n\n"
      },
      {
        "author": "Brad Artman",
        "date": "Sep 14, 2022, 11:57:45AM",
        "content": "I agree that propagation with good physics is important. However, the structure of a real RTM algorithm is the difference between physics and geophysics. Reality of acquisition, and wavefield access and use make for lots of coding.\n\nSeismic processing packages like Madagascar for instance might be able to accommodate such demands if a user is able to extract data from HDF and put it into a regularly sampled n-dimensional binary.\n\nAs a self aggrandizing example to add to the literature list:\n\n\nhttps://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.469.7938\n\nOn Monday, September 12, 2022 at 2:48:16 AM UTC-6 Craig Warren wrote:\n"
      },
      {
        "author": "Brad Artman",
        "date": "Sep 27, 2022, 2:36:15PM",
        "content": "Thanks- \nThe details of RTM are immense, and do entail a lot of book keeping and structure. A system for seismic processing might be applicable, if one could organize data into regularly structured cubes.\n\nAs a self-promoting extra, I also include a reference to a study on the topic I did in school-\n\nhttps://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.469.7938\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ABmZh24dOT4",
    "title": "Model building spends too much time",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Feb 10, 2019, 6:05:17AM",
      "content": "GPU speedup is really fantastic. However, GPU only accelerates the linear equation solving part. For the remaining ports, it is still the task of CPU, and especially the remaining codes is single-thread computing. \n\nA report of a simulation is:\n\nNumber of CPU (OpenMP) threads: 4\nGPU solving using: 0 - Quadro M1200\nSpatial discretisation: 0.001 x 0.001 x 0.001m\nDomain size: 0.5 x 0.1 x 0.3m (500 x 100 x 300 = 1.5e+07 cells)\n\n\nBuilding PML boundaries:   0%|                           | 0/6 [00:00<?, ?it/s]\nBuilding PML boundaries:  17%|███▏               | 1/6 [00:39<03:19, 39.87s/it]\nBuilding PML boundaries:  33%|██████▎            | 2/6 [01:44<03:09, 47.29s/it]\nBuilding PML boundaries:  50%|█████████▌         | 3/6 [02:07<02:00, 40.06s/it]\nBuilding PML boundaries:  67%|████████████▋      | 4/6 [02:13<00:59, 29.74s/it]\nBuilding PML boundaries:  83%|███████████████▊   | 5/6 [03:24<00:42, 42.14s/it]\nBuilding PML boundaries: 100%|███████████████████| 6/6 [03:48<00:00, 36.68s/it]\n Building main grid:   0%|                                | 0/2 [00:00<?, ?it/s]\nBuilding main grid:  50%|███████████▌           | 1/2 [10:32<10:32, 632.90s/it]\nBuilding main grid: 100%|███████████████████████| 2/2 [20:59<00:00, 631.05s/it]\n\n\n Memory (RAM) used: ~1.36GB host + ~1.59GB GPU\nSolving time [HH:MM:SS]: 0:03:24.696125\n \n=== Simulation completed in [HH:MM:SS]: 0:29:13.357208 ========================\n\nGPU spends 3 mins to solve the equations while CPU spends 20 minutes to build up the geometric model. It seems the grid building is a single-thread. It could be easily to parallelized by multiple threads or GPU."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 11, 2019, 6:59:22AM",
        "content": "Hi Feng,\n\nThe FDTD solving part of gprMax is parallelised for either multi-threaded CPU or GPU execution. Only the more intensive parts of the model building process, i.e. building up the FDTD mesh/grid, are parallelised, the rest is not, and probably never will be. The main reason for this is that there is quite a lot of complex logic used in the building that is fairly straightforward to implement in Python (as we have done), but cannot be easily broken down into parallel operations.\n\nIf you are not already doing so, I would recommend building and exporting your geometry (using geometry_objects_write) and then it will be much quicker to read it back it in (using geometry_objects_read), rather than having to build it every time. However, this only helps for things like B-scans where the geometry may not be changing for every run.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Feng Zhou",
        "date": "Feb 12, 2019, 3:29:06AM",
        "content": "Thanks, Craig. I've got it. \n\nI have used 'geometry_objects_write/read' commands when I was in Edinburgh. I will do it in this way for the B scan of my study. \n\nThanks\n\nFeng"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KoGRT2cfm7Y",
    "title": "Rule-of-thumb: -60dB frequency cut off?",
    "original_post": {
      "author": "Patrick Carson",
      "date": "Aug 25, 2016, 3:56:29AM",
      "content": "Hi,\n\nWhat is the reasoning behind cutting off all frequencies beyond -60dB?\n\nI am using a ricker waveform with a centre frequency of 0.5Ghz which means at  the -60dB cutoff all frequencies beyond ~1.5Ghz won't be relevant. Have I taken the correct approach? The soil model in my simulations is 1m x 2m and is defined by a peplinksi mixture model.\n\nThanks for any help."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 25, 2016, 9:14:13AM",
        "content": "Hi Patrick,\n\nOne of the fundamental and inherent errors in an FDTD solver (as gprMax is just an implementation of such a solver) is numerical velocity dispersion. In essence, the FDTD approximation becomes worst as the wavelenght of the EM wave approaches the spatial discretisation step (DL) of the model. The error manifests as a \"velocity\" error as the velocity of a wave that propagates inside the FDTD grid differs from the one that the same wave would have had if it was propagating in a normal physical medium of the same parameters. This error cannot be completely eliminated but we can improve our accuracy by significantly reducing it and keeping it small.\n\nOne of the \"rules of thumb\" is to enforce the fact that the spatial step in our model is at least 10 times smaller than the wavelength of the EM wave. This gives a velocity error just under 1% which for a number of applications for a short distances is acceptable. If you go to 20 times smaller then the error drops even more and things are better but obviously the computational cost increases. \n\nThings are a little bit more complicated when we are dealing with short broadband pulses. The obvious reason is that they do contain frequencies that are much higher than the nominal centre frequency and these relate to small wavelengths. Further, the wavelengths get even smaller inside dielectrics and the situation gets more tricky. There is a point that you must decide that for frequencies higher than a given number your pulse's frequency content is small enough in order to compute the smallest wavelength to have a handle in this velocity error. For same situations -60db might be and often is OK. For others you might need to go even higher. The error is cumulative and if you are modelling propagation oner long distances eventually you will notice velocity dispersion even at this level. The way it manifest itself is as a phase error i.e. an unnatural pulse distortion. \n\nSo, in your example you have a pulse of 0.5 GHz centre frequency and you decide that up to 1.5GHz is the maximum frequency that might contain energy that can be significant for numerical dispersion errors. Then you should find the highest relative permittivity in your model and then calculate the wavelength of the 1.5GHz in that medium. Then your DL is 0.1 times that wavelength. Smaller DL is fine but a bigger one would start creating problems. If you want you can try setting the limit to even smaller levels of significance in your spectrum (e.g. -80db) this will result in even much smaller DL as the frequency to be considered will be higher and the wavelength smaller. Going the other way could be OK as well but then at some point you will start noticing errors. I suppose -50db might be OK but it is problem dependent. \n\nThe bottom line is that unless a full dispersion analysis is performed (as the numerical dispersion error it is even angle dependent ...) there is no such a clear cut way to decide on the appropriate DL for a given pulse or frequency in a model. The rule of thumb has be proven to us that it kind of works in most cases. Understanding how numerical dispersion affects the FDTD solution is the key of making informed choices on discretisation in your model.\n\nHope that helps!\n\nAntonis"
      },
      {
        "author": "Patrick Carson",
        "date": "Aug 25, 2016, 7:11:25PM",
        "content": "Hi Antonis,\n\nThat's a fantastic, in-depth explanation - thanks! \n\nPatrick"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2_FxbFZKVdc",
    "title": "Pixel size when using impulse waveform",
    "original_post": {
      "author": "Noushin Khosravi Largani",
      "date": "Feb 8, 2025, 10:36:42AM",
      "content": "Hello,\n\nHope you are well and thanks for providing this great software. I have a question:\n\nWhen we use impulse waveform in gprMax to illuminate a medium, the frequency of the transmitted impulse is not important (according to this video Day 3 - Impulse response & introduction to SFCW GPR simulation). So, how can we set the pixel size of the medium when we are using impulse waveform?  If we want to use the maximum frequency to obtain the smallest wavelength, what should be that maximum frequency? \n\nI would appreciate it if you could guide me on that.\n\nThanks,\nNoushin"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 8, 2025, 2:00:01PM",
        "content": "Hi Noushin,\n\nUsing an impulse excitation is a way to be able to get simulated output for different wavelets or frequencies in case of SFCW. It is important to understand that the FDTD solution for an impulse is not strictly correct unless it gets convolved with a wavelet that contains energy at frequencies where the solution will be valid for. When you convolve the impulse solution with a valid wavelet then you filter out the erroneous aspects of the solutions for frequencies where the model is not correct.\nTo decide the size of the spatial step you need to consider the smallest wavelengths for the highest frequencies you will be convolving the impulse response. The impulse response on its own cannot be used as a correct time domain solution it needs to be convolved with an acceptable wavelet of frequency tone. The reason I used this for SFCW modelling is because I can run the model only once and produce all the specific frequency outputs in post processing. My model has to be correct for the highest frequency used if it was used directly in gprMax on its own.\n\nI hope that helps.\n\nAntonis\n"
      },
      {
        "author": "Noushin Khosravi Largani",
        "date": "Feb 8, 2025, 4:40:20PM",
        "content": "Thank you very much. I am using your method for  applying SFCW in gprMax. So, I will use the highest frequency of SFCW (that will be convolved afterwards) for the pixel size of impulse response generation in gprMax. Many thanks for your help.\n\nBest,\nNoushin\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xGYYCYDBkS4",
    "title": "Regarding GPRMAX OUTPUT",
    "original_post": {
      "author": "savita K.B",
      "date": "May 10, 2021, 11:25:40AM",
      "content": "Hi \n\nI am trying this code, but i am not getting the output. I am not getting what is this error. Please try to solve this problem.\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 3.0 3.0 3.0\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 4 0 1 0 half_space\n\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 4:14:02PM",
        "content": "Dear Savik,\n\nA basic understanding of GPR modelling and FDTD is necessary before you use gprMax. You'll find some guidance in our docs - http://docs.gprmax.com/en/latest/gprmodelling.html Please read this and follow the example models before posting this type of question. \n\nThe model you posted above would require ~237GB of RAM to run, and you have placed sources and receivers in the PML region!\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vapf1T4IruM",
    "title": "The choice of resolution under the premise of determined voltage amplitude",
    "original_post": {
      "author": "C Master",
      "date": "Oct 27, 2020, 10:41:53PM",
      "content": "Dear gprMax developers and users,\n\n    I want to use a 3D scan to detect an object in the ground, a ricker wave with a determined voltage, and a 200 MHz  hertzian_dipole  source. But with the increase of resolution, the same voltage input will get smaller electric field value.  \n    On the premise of determining the voltage value, how to select the resolution can make the output electric field strength  larger  , and there will be no numerical dispersion and other abnormal conditions.\n    Because I want to test whether the output electric field intensity can reach my own set threshold, so I hope the electric field strength can be larger.\n\nAny suggestions would be much appreciated!  \n\nC Master"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5q4zdaoDBLU",
    "title": "Silt in Peplinski simulation",
    "original_post": {
      "author": "Noushin Khosravi Largani",
      "date": "Jul 12, 2024, 1:48:39PM",
      "content": "Hello,\nHope you are well. Thanks for your great software. In gprMax Peplinski model, we can only define the percentage of sand and clay, not silt. How the silt percentage is considered in gprMax? I would appreciate it if you could guide me on that. Thanks\nSincerely\nNoushin"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 15, 2024, 4:44:20AM",
        "content": "The silt is the remaining percentage, e.g. if you specify sand as 50% and clay as 15%, then silt is implicitly 35%.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Noushin Khosravi Largani",
        "date": "Jul 15, 2024, 2:18:25PM",
        "content": "Thank you very much.\nSincerely\nNoushin\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fGyz29OtYBE",
    "title": "Installation process",
    "original_post": {
      "author": "Craig Warren",
      "date": "May 25, 2016, 5:48:17AM",
      "content": "We are looking at streamlining the installation process for gprMax, i.e. trying to make the process for users and developers the same, and as simple as possible. Please note it is not going to be a double-clickable .exe file any time soon(!), but we would like some feedback on how you find the current process and your thoughts on our proposed changes. \n\nIt would be great if you could complete the Doodle poll to tell as which operating system you are using http://doodle.com/poll/4vqw5tn9a4f8zye7\n\nThe current installation process (for Windows users) is:\nDownload source code and binary extensions from GitHub\nExpand zip files and copy binary extensions into gprMax folder\nDownload and install Miniconda\nCreate the Python environment with packages\nDownload and install C library redistributables\nWe would like to avoid ourselves having to build binary extensions for multiple platforms for every release. This would also mean you can easily get the most up-to-date code all the time. So, the proposed new install procedure (for Windows users and developers) would be:\nDownload and install Miniconda\nInstall Git and checkout latest gprMax source code\nCreate the Python environment with packages\nDownload and install Microsoft Visual Studio Build Tools\nRun ``python setup.py install`` to build and install gprMax\nThe beauty of this is that to update gprMax you would simply run ``git pull`` and then ``python setup.py install`` again.\n\nWhat do you think? We don't think this is a more difficult procedure, and it offers advantages for everyone.\n\nKind regards,\n\nCraig"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 30, 2016, 10:31:58AM",
        "content": "I have updated the Installation instructions, which now describe this new procedure: http://docs.gprmax.com/en/latest/include_readme.html#installation\n\nGrateful for any feedback.\n\nCraig"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 4:55:00AM",
        "content": "Hey Craig,\n\nCongrats on a spectacular job putting all this together! (though I haven't managed to get it working yet... see below)\n\nOn the installation, your notes are fine and clear, but I did run into one problem: though I had installed gcc-6 (on Mac OS 10.11 El Capitan), when building the gprMax environment, the package mpi4py would not compile. I then tried compiling it with by hand pointing to the right path to gcc-6 (using sudo also), but no dice. Ultimately I had to install mpicc to be able to compile the mpi4py package. I then installed the remaining packages, had to remove the gprMax enviroment and then build it again. That seems to have worked.\n\nHowever, when running you first example on your notes, I get this error:\n(gprMax) Geo00494:gprMax ivanvasconcelos$ python -m gprMax user_models/cylinder_Ascan_2D.in\nTraceback (most recent call last):\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 174, in _run_module_as_main\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 133, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 109, in _get_module_details\n    __import__(pkg_name)\n  File \"/Users/ivanvasconcelos/gprMax/gprMax/__init__.py\", line 2, in <module>\n    from .gprMax import api as run\n  File \"/Users/ivanvasconcelos/gprMax/gprMax/gprMax.py\", line 40, in <module>\n    from .fields_update import update_electric, update_magnetic, update_electric_dispersive_multipole_A, update_electric_dispersive_multipole_B, update_electric_dispersive_1pole_A, update_electric_dispersive_1pole_B\nImportError: dlopen(/Users/ivanvasconcelos/gprMax/gprMax/fields_update.cpython-35m-darwin.so, 2): Symbol not found: ___emutls_get_address\n  Referenced from: /usr/local/opt/gcc6/lib/gcc/6/libgomp.1.dylib (which was built for Mac OS X 10.11)\n  Expected in: /usr/lib/libSystem.B.dylib\n in /usr/local/opt/gcc6/lib/gcc/6/libgomp.1.dylib\n\nIt seems to suggest some type of mismatch of where to find the right OMP library? I'll try and figure it out, but if anyone knows the answer please let me know.\n\nCheers,\nIvan."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 19, 2016, 5:54:01AM",
        "content": "Thanks Ivan.\n\nSounds like you have had a bit of a struggle so far! My own machine runs macOS Sierra and previously Mac OS X El Capitan, both with gcc6, so I know it can work ;-)\n\nThe mpi4py package is only really required if you intend to use our MPI based task farm, aimed at HPC environments. So if you find problems installing mpi4py you can edit the 'conda_env.yml' file in the gprMax package and remove the mpi4py line. This will stop it being installed as part of the gprMax conda environment.\n\nBut it seems the error you are getting is more likely related to your gcc6 installation and the OpenMP library. How did you install gcc6? I have successfully installed it through Homebrew on my machine. To install this way you usually have to run 'brew install gcc-6 --without-multilib' to ensure you get the OpenMP support.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 6:17:41AM",
        "content": "Hi Craig,\n\nThanks for the quick feed back.\n\nYes I installed gcc6 with homebrew, though the brew command on your page did not work for me (brew didn't know the 'gcc-6' formula name). Instead I followed the Homebrew instructions from:\nhttps://deadline.today/sysadmin/GCC6-on-OSX/\nand added the --without-multilib option.\n\nRunning\nbrew search gcc\nfor me gives\nGeo00494:local ivanvasconcelos$ brew search gcc\ngcc                                      homebrew/versions/gcc48\nhomebrew/versions/gcc43                  homebrew/versions/gcc49\nhomebrew/versions/gcc44                  homebrew/versions/gcc5\nhomebrew/versions/gcc45                  homebrew/versions/gcc6 ✔\nhomebrew/versions/gcc46                  homebrew/versions/llvm-gcc28\nhomebrew/versions/gcc47\nhomebrew/dupes/apple-gcc42               Caskroom/cask/gcc-arm-embedded\n\nSo no gcc-6 formula (explicitly).\n\nCheers,\nIvan."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 19, 2016, 6:55:49AM",
        "content": "Thanks, the gcc-6 is a typo (I'll correct it in the install instructions). Either 'brew install gcc --without-multilib' or 'brew install gcc6 --without-multilib' should both currently install GCC 6.x using Homebrew.\n\nWhat output do you get from the command 'brew info gcc'?\n\nCraig"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 8:13:43AM",
        "content": "OK, thanks.\n\n'brew info gcc' gives\nGeo00494:local ivanvasconcelos$ brew info gcc\ngcc: stable 6.2.0 (bottled), HEAD\nGNU compiler collection\nhttps://gcc.gnu.org\nNot installed\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/gcc.rb\n==> Dependencies\nRequired: gmp ✔, libmpc ✔, mpfr ✔, isl ✔\n==> Options\n--with-all-languages\n    Enable all compilers and languages, except Ada\n--with-java\n    Build the gcj compiler\n--with-jit\n    Build the jit compiler\n--with-nls\n    Build with native language support (localization)\n--without-fortran\n    Build without the gfortran compiler\n--without-multilib\n    Build without multilib support\n--HEAD\n    Install HEAD version\n==> Caveats\nGCC has been built with multilib support. Notably, OpenMP may not work:\n  https://gcc.gnu.org/bugzilla/show_bug.cgi?id=60670\nIf you need OpenMP support you may want to\n  brew reinstall gcc --without-multilib\n\nI have run 'brew reinstall gcc --without-multilib' ... now the issue on installing it over is\nGeo00494:local ivanvasconcelos$ brew reinstall gcc --without-multilib\n==> Reinstalling gcc with --without-multilib\nError: You must `brew link isl` before gcc can be installed\nGeo00494:local ivanvasconcelos$ brew link isl\nLinking /usr/local/Cellar/isl/0.17.1...\nError: Could not symlink lib/pkgconfig/isl.pc\n/usr/local/lib/pkgconfig is not writable.\nGeo00494:local ivanvasconcelos$ brew info isl\nisl: stable 0.17.1 (bottled), HEAD\nInteger Set Library for the polyhedral model\nhttp://isl.gforge.inria.fr\n/usr/local/Cellar/isl/0.17.1 (79 files, 3.9M)\n  Poured from bottle on 2016-10-19 at 13:45:49\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/isl.rb\n==> Dependencies\nRequired: gmp ✔\n\nThis isl linking seems to be a common problem on OS X. I'm going through searches to see if I can sort it out...\n\nThanks again!"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 8:15:16AM",
        "content": "P.S.: not sure why I currently don't have OMP support as I did add the --without-multilb option on originally...."
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 8:25:05AM",
        "content": "Ok, if I do\n\nGeo00494:local ivanvasconcelos$ brew info gcc6\nhomebrew/versions/gcc6: stable 6.2.0 (bottled)\nThe GNU Compiler Collection\nhttps://gcc.gnu.org\n/usr/local/Cellar/gcc6/6.2.0 (5,156 files, 382.2M)\n  Built from source on 2016-10-18 at 14:11:02 with: --without-multilib --with-all-languages --with-java\nFrom: https://github.com/Homebrew/homebrew-versions/blob/master/gcc6.rb\n==> Dependencies\nRequired: gmp ✔, libmpc ✔, mpfr ✔, isl014 ✔\n\n==> Options\n--with-all-languages\n    Enable all compilers and languages, except Ada\n--with-java\n    Build the gcj compiler\n--with-jit\n    Build the jit compiler\n--with-nls\n    Build with native language support (localization)\n--with-profiled-build\n    Make use of profile guided optimization when bootstrapping GCC\n\n--without-fortran\n    Build without the gfortran compiler\n--without-multilib\n    Build without multilib support\n\n\nEverything appears to be fine.... It seems 'brew install gcc' and 'brew install gcc6' don't do the same thing?"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 19, 2016, 8:45:30AM",
        "content": "I think can do the same thing, and currently both install GCC 6.x, just at slightly different paths, which I don't think this makes any difference. \n\nCan you run 'gcc-6 -v' and paste the output.\n\nCraig"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 9:30:06AM",
        "content": "Ok , now I got\nGeo00494:~ ivanvasconcelos$ brew info gcc\n\ngcc: stable 6.2.0 (bottled), HEAD\nGNU compiler collection\nhttps://gcc.gnu.org\n/usr/local/Cellar/gcc/6.2.0 (1,358 files, 242.6M)\n  Built from source on 2016-10-19 at 15:18:26 with: --without-multilib\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/gcc.rb\n==> Dependencies\nRequired: gmp ✔, libmpc ✔, mpfr ✔, isl ✔\n\n==> Options\n--with-all-languages\n    Enable all compilers and languages, except Ada\n--with-java\n    Build the gcj compiler\n--with-jit\n    Build the jit compiler\n--with-nls\n    Build with native language support (localization)\n--without-fortran\n    Build without the gfortran compiler\n--without-multilib\n    Build without multilib support\n--HEAD\n    Install HEAD version\n\nThis is after sorting out 2 problems:\n1) the read/write settings of lib/pkgconfig, by 'sudo chown ivanvasconcelos /usr/local/lib/pkgconfig'\n2) I had to manually go into Xcode preferences and set the latest version of command line tools (CLT) under the Locations tab, even though in the bash terminal I was being told Xcode CLT was installed.\n\nThen I ran 'brew install gcc --without-multilib'.\n\nSo now I get a different run-time error in the gprMax environment:\n(gprMax) Geo00494:gprMax ivanvasconcelos$ python -m gprMax user_models/cylinder_Ascan_2D.in\nTraceback (most recent call last):\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 174, in _run_module_as_main\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 133, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 109, in _get_module_details\n    __import__(pkg_name)\n  File \"/Users/ivanvasconcelos/gprMax/gprMax/__init__.py\", line 2, in <module>\n    from .gprMax import api as run\n  File \"/Users/ivanvasconcelos/gprMax/gprMax/gprMax.py\", line 40, in <module>\n    from .fields_update import update_electric, update_magnetic, update_electric_dispersive_multipole_A, update_electric_dispersive_multipole_B, update_electric_dispersive_1pole_A, update_electric_dispersive_1pole_B\nImportError: dlopen(/Users/ivanvasconcelos/gprMax/gprMax/fields_update.cpython-35m-darwin.so, 2): Library not loaded: /usr/local/opt/gcc6/lib/gcc/6/libgomp.1.dylib\n  Referenced from: /Users/ivanvasconcelos/gprMax/gprMax/fields_update.cpython-35m-darwin.so\n  Reason: image not found\n\nI wonder if I need to make the enviroment again? ...\n\nSo sorry for this mess: but thanks for the help!"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 9:32:49AM",
        "content": "Oh I forgot to mention that between 1) and 2), and uninstalled and reinstalled isl."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 19, 2016, 9:53:51AM",
        "content": "I wouldn't have thought you need to rebuild the Python environment again, it still looks like a gcc install error to me. You could try rebuilding gprMax with 'python setup.py build'.\n\nCraig"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 19, 2016, 10:51:34AM",
        "content": "Yup, so, I had to additionally install with 'brew install gcc6 --without-multilib', then build it again. Even though brew installed gcc6 with 'brew install gcc --without-multilib', and the Cellar is there when doing 'find Cellar' on /usr/local/ , gcc -v always points to clang instead of the brew-installed one. Now at least gcc6 points to the brew-installed one.\n\nNow the modelling code runs! :-D But plotting is failing:\nOutput file: /Users/ivanvasconcelos/gprMax/user_models/cylinder_Ascan_2D.out\n\nRunning simulation, model 1 of 1: 100%|█████| 637/637 [00:00<00:00, 979.95it/s]\nMemory (RAM) used: ~36.3MB\n\n=== Simulation completed in [HH:MM:SS]: 0:00:00 ===============================\n\n(gprMax) Geo00494:gprMax ivanvasconcelos$ python -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\n\nTraceback (most recent call last):\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 184, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/Users/ivanvasconcelos/gprMax/tools/plot_Ascan.py\", line 25, in <module>\n    import matplotlib.pyplot as plt\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/site-packages/matplotlib/__init__.py\", line 1131, in <module>\n    rcParams = rc_params()\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/site-packages/matplotlib/__init__.py\", line 975, in rc_params\n    return rc_params_from_file(fname, fail_on_error)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/site-packages/matplotlib/__init__.py\", line 1100, in rc_params_from_file\n    config_from_file = _rc_params_in_file(fname, fail_on_error)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/site-packages/matplotlib/__init__.py\", line 1018, in _rc_params_in_file\n    with _open_file_or_url(fname) as fd:\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/contextlib.py\", line 59, in __enter__\n    return next(self.gen)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/site-packages/matplotlib/__init__.py\", line 1000, in _open_file_or_url\n    encoding = locale.getdefaultlocale()[1]\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/locale.py\", line 558, in getdefaultlocale\n    return _parse_localename(localename)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/locale.py\", line 486, in _parse_localename\n    raise ValueError('unknown locale: %s' % localename)\nValueError: unknown locale: UTF-8\n\nPossibly some typo in the plotting script in passing the 'localename' variable? I'll sort it out tomorrow.\n\nThanks  for all the help, Craig!"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 19, 2016, 12:17:50PM",
        "content": "So, 'gcc' should always point to Apple installed clang. 'gcc-6' (note the dash) should point to /usr/local/bin/gcc-6 which in turn points to /usr/local/Cellar/gcc/6.x. For me on different Macs 'brew install gcc --without-multilib' and 'brew install gcc6 --without-multilib' have had the same overall effect but YMMV.\n\nThe error you are getting with plotting is to do with Python somehow not recognising the region of the world (locale) your are in. What is the output when you run the command 'locale' from a Terminal? Mine is:\n\nLANG=\"en_GB.UTF-8\"\nLC_COLLATE=\"en_GB.UTF-8\"\nLC_CTYPE=\"en_GB.UTF-8\"\nLC_MESSAGES=\"en_GB.UTF-8\"\nLC_MONETARY=\"en_GB.UTF-8\"\nLC_NUMERIC=\"en_GB.UTF-8\"\nLC_TIME=\"en_GB.UTF-8\"\nLC_ALL=\n\n I suspect you may have to set these either in Terminal prefs (see attached screenshot) by selecting 'Set locale environment variable on startup', or in your .bashrc or .profile.\n\nCraig"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 21, 2016, 9:23:34AM",
        "content": "Thanks, Craig,\n\nI ended having to manually set the locale variable $LANG in my .bash_profile .\n\nThat seems to have done the trick. Now, still no plot:\n(gprMax) Geo00494:gprMax ivanvasconcelos$ python -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\n\nTraceback (most recent call last):\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 184, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/Users/ivanvasconcelos/miniconda3/envs/gprMax/lib/python3.5/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/Users/ivanvasconcelos/gprMax/tools/plot_Ascan.py\", line 231, in <module>\n    plt = mpl_plot(args.outputfile, args.outputs, fft=args.fft)\n  File \"/Users/ivanvasconcelos/gprMax/tools/plot_Ascan.py\", line 165, in mpl_plot\n    raise CmdInputError('Output(s) requested to plot: {}, but available output(s) for receiver {} in the file: {}'.format(', '.join(outputs), rx, ', '.join(availableoutputs)))\ngprMax.exceptions.CmdInputError: Output(s) requested to plot: Ex, Ey, Ez, Hx, Hy, Hz, Ix, Iy, Iz, but available output(s) for receiver 1 in the file: Ex, Ey, Ez, Hx, Hy, Hz\n\nThat seems to be an actual error in the script (the I-field components not output by the modelling script)?\n\nOtherwise, I'm nearly there! :-)"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 21, 2016, 9:53:47AM",
        "content": "Ha! Glad you are nearly there.\n\nPull the latest version from the master branch. The error you are seeing was from a bug in the plotting script introduced a few weeks ago and fixed a day ago.\n\nCraig"
      },
      {
        "author": "Ivan Vasconcelos",
        "date": "Oct 25, 2016, 5:58:41AM",
        "content": "Success! :-D\n\nThanks *very* much for all your help, Craig.\n\nIn the coming days, I'll contact you through email to discuss some science.\n\nCheers,\nIvan."
      },
      {
        "author": "Mohammed Mustapha",
        "date": "Jan 13, 2017, 6:17:30AM",
        "content": "Good Sir.\nThanks for this wonderful job.  I have a challenge with \n gprMax installation Am at the\n stage of installing of Microsoft\nVisual C++ Build Tools 2015. I keep on receiving a message that \" a setup package is Missing or damage\" Please, help me out? Thanks"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 13, 2017, 7:17:34AM",
        "content": "Hi Mohammed,\n\nWelcome to the forum!\n\nHave you followed the install instructions and tried watching the screencast (http://docs.gprmax.com/en/latest/screencasts.html#installation)?\n\nCan you post a screenshot of the error you are receiving?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mohammed Mustapha",
        "date": "Jan 13, 2017, 1:01:15PM",
        "content": "Thank u very much Sir, I have followed Have the installation instructions and watched the screencast. That was what enable me to reach the stage I am presently.\nbelow is the message i have been receiving. I tried the download package from internet option but to no avail."
      },
      {
        "author": "Craig Warren",
        "date": "Jan 17, 2017, 7:01:57AM",
        "content": "Hi Mohammed,\n\nThis is obviously an issue with installing the Visual Studio C compiler on Windows. It is not a problem we have seen before with other users, and is not related to the gprMax software itself. Therefore all I can suggest is that you have a look at the info in this thread http://stackoverflow.com/questions/32445763/a-setup-package-is-either-missing-or-damaged-error-while-installing-visual-stu Perhaps there was a problem with Microsofts server when you tried it, or you can find an offline installer to download.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "AI",
        "date": "Sep 5, 2018, 11:23:56AM",
        "content": "Hi Craig,\nI already updated miniconda and installed git, and also changed the path in Environment Variables. I'm getting an error message that git is not recognized though. \nI then manual downloaded the latest package from gitHub, but then I can't create the environment. What am I missing?\n\nThanks for your help."
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2018, 3:41:49AM",
        "content": "Hi Al,\n\nThere should be no need to be installing or working inside the Miniconda directory. Once you have Miniconda downloaded and installed, close and re-launch the Command Prompt. Then you should install git with conda as per the instructions. It is highly recommended to use conda/miniconda with gprMax as it keeps all the required Python packages installed in a single environment that is separate from any other Python install on your machine.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "AI",
        "date": "Sep 6, 2018, 9:56:25AM",
        "content": "I already installed miniconda + git per the instructions. I also closed and relaunched the command prompt. Please see the attached screenshot with my comments. git is still not recognized for some reason. I even restarted my laptop. What am I missing?"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2018, 10:51:19AM",
        "content": "Looks like Miniconda is not correctly set on your path, which is why git is not found. Can you post a screenshot of your PATH environment variable settings.\n\nCraig"
      },
      {
        "author": "AI",
        "date": "Sep 6, 2018, 11:00:44AM",
        "content": "Please see attached the screen shot of the environment path. \nOn a different note, when I type \"conda env create -f conda_env.yml\", I got this error message:\n\"SpecNotFound: Can't process without a name\""
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2018, 11:09:41AM",
        "content": "So indeed Miniconda is not correctly installed, as there should be more items to other Miniconda directories that are automatically added to your path. I suggest deleting and re-installing Miniconda. Watch the screencast carefully (switch on HD to read all the text) if you are still unsure.\n\nAlso you should not be operating inside the Miniconda scripts directory - install (or clone) gprMax elsewhere, i.e. your desktop. Finally, when you try to create the conda environment you must be inside the top gprMax directory, i.e. not the Miniconda scripts directory.\n\nCraig"
      },
      {
        "author": "AI",
        "date": "Sep 6, 2018, 11:30:36AM",
        "content": "Actually, I had manually changed the path to Scripts directory. Please see attached the original path. \nWhat is the right path to set? Should it be the top GPRMax directory?\n\nI have additionally attached a snapshot of my miniconda directory."
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2018, 11:33:30AM",
        "content": "Just let the Miniconda install set the path - there are a number of them to various bin directories - I would not try to do this manually.\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 25, 2018, 12:01:22PM",
        "content": "Hi Craig,\nI updated using the commands from the Getting Started page, and now I am unable to plot.\nWhen I run the command\npython -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\n\nIt gives me a long traceback, ending with\nImportError: cannot import name 'get_backend'\n\nI am running Python 3.6.7 on Mac OS 10.12.6.\n\nThank you for your help,\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 25, 2018, 12:19:32PM",
        "content": "Hi Trevor,\n\nYes, I just spotted a similar error occurred on my Mac after I updated my conda environment. There seems to be issues between Python 3.6.7 and Python 3.7.x and the mkl package. These can be fixed by ensuring Python 3.6.6 and mkl 2018.0.0 are used. I have now specified these in the environment file. So if you pull the latest from with git, and then update your conda environment with:\n\nconda env update -f conda_env.yml\n\nThis should sort the issue, until I get some time to investigate more the combination of the versions of packages that is causing problems.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 25, 2018, 4:47:38PM",
        "content": "Hi Craig,\nThat worked! I am now able to plot results. However, my results using the provided cylinder_Ascan_2D.in result in what looks like a numerical instability of some type. I am using the exact input file provided in the tutorial and running the commands as described there. I am attaching a .png of the results. Note that they are missing the third column shown in the tutorial, and that the Ez, Hx, and Hy field solutions blow up.\n\nI tried going back through the process of updating gprMax outlined on the Getting Started page, and I noticed that\npython setup.py install\n\nends in the following error:\nValueError: bad marshal data (unknown type code)\n\nI'm attaching a screenshot of the rest of the traceback.\n\nThank you,\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 26, 2018, 5:03:51AM",
        "content": "Thanks. Yeh there were a couple of further gotchas I had to iron out:\n\nAdding removal of .pyc files to our 'cleanall' procedure. A bad/corrupt .pyc file was causing your install error.\nFurther updated the environment file. Double equals is required to force use of a specific version of a package. In this case mkl==2018.0.0, which should work with Python 3.6.6 or Python 3.6.7 but does not work with Python 3.7.x\nI need to look further at what has changed with mkl to cause the problem, but if you pull the latest code (git pull), update your environment (conda env update -f conda_env.yml), then clean (python setup.py cleanall), and finally build (python setup.py build) and install (python setup.py install), it should now work correctly.\n\nLet me know if you still have problems.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 26, 2018, 9:19:52AM",
        "content": "Hi Craig,\nThanks! That solution seems to get me most of the way there. I'm now getting the solution shown in the tutorial, except that my plot only has the first two columns (E and H), but not the third (I).\nWhen I run\npython setup.py install\nit results in the same error (ValueError: bad marshal data (unknown type code)) as before, though this time the traceback leads to line 183 in setup.py.\n\nThanks for all your help.\n\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 26, 2018, 9:31:02AM",
        "content": "Good.\n\nThe 'I' column in the example image was plotting currents (Ix, Iy, Iz). This use to happen by default which is why it is shown in the example image, but we changed this behaviour and made it an option. I've updated the example image now to avoid confusion in the future, but it is nothing to worry about. You can specify currents as an optional output for receivers, see http://docs.gprmax.com/en/latest/input.html#rx\n\nStrange that you are still getting the 'bad marshal data' error. Did you definitely pull the latest setup.py code and run the cleanall step?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 26, 2018, 10:05:13AM",
        "content": "Okay, good! Then it looks like I'm up and running.\n\nRegarding the bad marshal data error: I performed all the steps as you outlined them. However, since the simulation is working and plotting, it doesn't seem to be affecting anything yet.\n\nThanks,\nTrevor"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 26, 2018, 10:48:58AM",
        "content": "Actually, perhaps I have found what is missing from the installation. I am trying to run the jupyter notebook example_Ascan_2D, and I get the following error every time it calls to import from gprMax:\n---------------------------------------------------------------------------\nModuleNotFoundError                       Traceback (most recent call last)\n<ipython-input-10-32f7855d4488> in <module>\n      1 get_ipython().run_line_magic('matplotlib', 'inline')\n      2 \n----> 3 from gprMax.waveforms import Waveform\n      4 from tools.plot_source_wave import check_timewindow, mpl_plot\n      5 \n\nModuleNotFoundError: No module named 'gprMax'\n\n\nThese commands work when I run them in ipython.\n\nSorry to be so much trouble!\n\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 29, 2018, 4:56:35AM",
        "content": "Hi Trevor,\n\nThe Jupyter notebooks are working OK for me. I am fairly sure the reason for them not working for you is because of the 'bad marshal' error you get when you try to install gprMax. If the installation phase is not completing then gprMax will not be installed as a module that can be imported into the Jupyter notebook. Can you post the full traceback of the 'bad marshal' error again.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Felipe Augusto",
        "date": "Oct 29, 2018, 7:25:30AM",
        "content": "Hello Trevor,\n\nDid you try activate gprMax on the anaconda (or miniconda) prompt before run Jupyter Notebook?\n\nTry this e tell me if works!"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 29, 2018, 12:08:01PM",
        "content": "Hi Felipe,\nYes, I activated gprMax before running Jupyter Notebook.\n\nCraig,\nHere is the full traceback:\n\nTraceback (most recent call last):\n  File \"setup.py\", line 183, in <module>\n    include_dirs=[np.get_include()])\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/site-packages/setuptools/__init__.py\", line 140, in setup\n    return distutils.core.setup(**attrs)\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/distutils/core.py\", line 148, in setup\n    dist.run_commands()\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/distutils/dist.py\", line 955, in run_commands\n    self.run_command(cmd)\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/site-packages/setuptools/command/install.py\", line 67, in run\n    self.do_egg_install()\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/site-packages/setuptools/command/install.py\", line 109, in do_egg_install\n    self.run_command('bdist_egg')\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/distutils/cmd.py\", line 313, in run_command\n    self.distribution.run_command(command)\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/site-packages/setuptools/command/bdist_egg.py\", line 220, in run\n    os.path.join(archive_root, 'EGG-INFO'), self.zip_safe()\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/site-packages/setuptools/command/bdist_egg.py\", line 273, in zip_safe\n    return analyze_egg(self.bdist_dir, self.stubs)\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/site-packages/setuptools/command/bdist_egg.py\", line 383, in analyze_egg\n    safe = scan_module(egg_dir, base, name, stubs) and safe\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/site-packages/setuptools/command/bdist_egg.py\", line 422, in scan_module\n    code = marshal.load(f)\n\nValueError: bad marshal data (unknown type code)\n\nThanks,\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 30, 2018, 4:57:55AM",
        "content": "Hi Trevor,\n\nI have done a bit of searching and the 'bad marshal' error seems to point to a corrupt .pyc file somewhere in your environment. The 'cleanall' step should have deleted these but I think the next step is to delete and rebuild the gprMax conda environment, i.e.\n\nconda env remove --name gprMax\nconda clean --all\nconda env create -f conda_env.yml\nconda activate gprMax\npython setup.py cleanall\npython setup.py build\npython setup.py install\n\nLet me know if this fixes it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 30, 2018, 11:34:00AM",
        "content": "Hi Craig,\nI'm sorry to say that did not fix it.\n\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 31, 2018, 6:37:14AM",
        "content": "Hi Trevor,\n\nThats annoying! I don't have any other suggestions at the moment, but will continue to look into as and when I have time.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 31, 2018, 9:25:00AM",
        "content": "Hi Craig,\nHere's an update. As per usual, I fixed one thing and broke another.\n\nI was able to get through the installation steps you suggested above by removing my old gprMax directory and starting all the way at the beginning with\ngit clone https://github.com/gprMax/gprMax.git\nIt no longer gives the bad marshal data error when I run\npython setup.py install\n\nHowever, now when I run any command in the gprMax environment (from command line or Jupyter Notebooks), I get the following error:\n\nTraceback (most recent call last):\n\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 183, in _run_module_as_main\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 142, in _get_module_details\n    return _get_module_details(pkg_main_name, error)\n  File \"/Users/trevorhillebrand/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 109, in _get_module_details\n    __import__(pkg_name)\n  File \"/Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/__init__.py\", line 2, in <module>\n    from .gprMax import api as run\n  File \"/Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/gprMax.py\", line 38, in <module>\n    from gprMax.model_build_run import run_model\n  File \"/Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/model_build_run.py\", line 44, in <module>\n    from gprMax.fields_updates_ext import update_electric\nImportError: dlopen(/Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/fields_updates_ext.cpython-36m-darwin.so, 2): Symbol not found: _GOMP_parallel\n  Referenced from: /Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/fields_updates_ext.cpython-36m-darwin.so\n  Expected in: flat namespace\n in /Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/fields_updates_ext.cpython-36m-darwin.so\n\n\nIt seems this issue has been raised before (here and here), but setup.py seems to have already incorporated these workarounds, i.e.:\nlinker_args = ['-fopenmp', '-Wl,-rpath,' + rpath]\n\n\nI am using gcc7 on Mac OS 10.13.2.\n\nThanks,\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 31, 2018, 11:37:32AM",
        "content": "Hi Trevor,\n\nGlad one problem is fixed!\n\nDid you install gcc7 via Homebrew? Can you check if 'libgomp.1.dylib' exists at '/usr/local/opt/gcc/lib/gcc/7/'? Also print the output of:\n\notool -L /Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/fields_updates_ext.cpython-36m-darwin.so\n\nThanks,\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 31, 2018, 12:14:55PM",
        "content": "Hi Craig,\nThis is interesting.\notool -L /Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/fields_updates_ext.cpython-36m-darwin.so\nreturns\n/Users/trevorhillebrand/Documents/Antarctica/Radar/gprMax/gprMax/fields_updates_ext.cpython-36m-darwin.so:    @rpath/libgomp.1.dylib (compatibility version 2.0.0, current version 2.0.0)\n    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.0.0)\n    /usr/local/lib/gcc/7/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n\nBut there is no /usr/local/opt/gcc/lib/gcc/7. I do, however, have  /usr/local/opt/gcc/lib/gcc/8, which does contain 'libgomp.1.dylib',  but the 'build' step does not seem to find that.\n\nI did install gcc7 using homebrew:\nbrew install gcc@7\n\nThanks,\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 31, 2018, 12:44:02PM",
        "content": "Hmmm...looks like you have a strange mixture of gcc7 and gcc8. I see 'libgcc' is coming from your gcc7 install. The 'setup.py' simply looks for the latest gcc in /usr/local/bin and sets the rpath accordingly. You could try to resolve your mixture of gcc's or modify the setup script to look for 'libgomp.1.dylib' in another location, but I'm not sure I'd recommend that.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Trevor Hillebrand",
        "date": "Oct 31, 2018, 1:07:40PM",
        "content": "Okay, I just uninstalled my older versions of gcc (6&7, it turns out) using Homebrew and reinstalled gprMax. Now everything works, including Jupyter Notebooks! Thank you for your help and patience!\n\nBest,\nTrevor"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 1, 2018, 4:36:26AM",
        "content": "Great. Glad it is all solved. \n\nIt would be great to hear how you are using or plan to use gprMax - it helps us fund and develop the code if we know how people use it, and the potential impact it may have in different areas of research.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Heloisa Moraes",
        "date": "May 19, 2019, 5:25:41PM",
        "content": "Hi everyone.\n\nI have a new computer and to install gprMax I followed all the steps listed in: http://docs.gprmax.com/en/latest/include_readme.html#installation\n\nEverything went well during the process, but when I try to produce the geometry view of my model I get the ModuleNotFoundError: No module named 'gprMax.fields_updates_ext' error. This is the third time I repeat the installation.\n\nI still have my old machine, so I updated the gprMax on it and I'm using it.  One thing caught my attention: on both machines I can only update gprMax before activating it  as you will see in the image bellow (from my new computer)\n\n\nThe message is in portuguese and says: 'git' is not recognized as an internal or external command, an operable program, or a batch file\n\nWhat can be (or am I doing) wrong?\n\nGrateful for any feedback.\n\nHeloisa"
      },
      {
        "author": "Craig Warren",
        "date": "May 22, 2019, 5:09:23AM",
        "content": "Hi Heloisa,\n\nOnce you have activated the gprMax environment make sure you then do the build and install steps:\n\n(gprMax)$ python setup.py build\n(gprMax)$ python setup.py install\n\nThe error you are receiving is because the built (Cython) modules cannot be found.\n\nThe git error is most probably caused by the fact git is only installed in your base conda environment. gprMax can be updated without having its environment activated.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Heloisa Moraes",
        "date": "May 28, 2019, 11:31:55AM",
        "content": "Hi Craig,\nI followed your instructions and everything worked out. I was able to produce my geometry view. Thank you very much.\nBest regards,\nHeloisa"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2peMk7xzPJ8",
    "title": "CUDA execution failed",
    "original_post": {
      "author": "Michael Fehér",
      "date": "Apr 1, 2019, 6:57:52AM",
      "content": "Dear Craig,\n\nFinally I got my GeForce GTX 570 up and running.\nafer much Time I spend getting pycuda running I would mention to update the instructions to:\n\n[code]\nconda activate gprMax\npython3 -m pip install pycuda\n[/code]\n\nbut now i face the next issue - one I've read much: PyCUDA ERROR: The context stack was not empty upon module cleanup.\n\nbut first things first:\n\nnvcc --version\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2017 NVIDIA Corporation\nBuilt on Fri_Sep__1_21:08:03_CDT_2017\nCuda compilation tools, release 9.0, V9.0.176\n\n\nHost: Hal9000 | System manufacturer System Product Name | unknown x Intel(R) Core(TM) i3-2120 CPU @ 3.30GHz (2 cores) | 3.84GiB RAM | Linux (4.15.0-46-generic, debian)\nGPU(s) detected: 0 - GeForce GTX 570, 1.19GiB\n\nModel title: GSSI 1.5GHz 'like' antenna on 20cm ground with 2cm pec\nNumber of CPU (OpenMP) threads: 2\nGPU solving using: 0 - GeForce GTX 570\nSpatial discretisation: 0.002 x 0.002 x 0.002m\nDomain size: 0.27 x 0.2 x 0.3m (135 x 100 x 150 = 2.025e+06 cells)\nMode: 3D\nTime step (at CFL limit): 3.85167e-12 secs\nTime window: 1.3e-08 secs (3377 iterations)\n\n\n\nMemory (RAM) required: ~198MB host + ~198MB GPU - It shoult fit the GPU\n\ngprMax is building the geometry, PML boundaries and the main grid. just as it names the output file an error accours\n\npycuda.driver.CompileError: nvcc preprocessing of /tmp/tmpv6jsttg5.cu failed\n[command: nvcc --preprocess -arch sm_20 -I/home/micha/miniconda3/envs/gprMax/lib/python3.7/site-packages/pycuda/cuda /tmp/tmpv6jsttg5.cu --compiler-options -P]\n[stderr:\nb\"nvcc fatal   : Value 'sm_20' is not defined for option 'gpu-architecture'\\n\"]\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\n\nas far as I read, this issue belongs mainly to Windows10. in my case its Xubuntu 18.04.2\n\nThe model should work, it is already computed biy te CPU.\n\n\n\ndo you have an idea to fix this?\n\n\n\nsincerly, Micha\n(Netherlands)"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 1, 2019, 9:01:28AM",
        "content": "Hi Micha,\n\nThe 'sm_20' error is a CUDA nvcc compiler error. I suspect it is because your GPU is too old to support some of the required features and/or the version of CUDA you have installed.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Michael Fehér",
        "date": "Apr 4, 2019, 4:26:00AM",
        "content": "Dear Craig,\n\nthank you for this suggestion.\n\nsm_20 is well supported by the GPU. but not bij the CUDA-Toolkit (got version 9.0 installed) .\nI've downgraded to cuda 8.0 and now it works.\nIk works pretty well,with thhis old GPU I gained 7x more speed om my models.\n\nThank you very much!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/mafbGkk3Gtg",
    "title": "How to obtain dilectric distribution of geometry - 2D",
    "original_post": {
      "author": "Ahmed Nirjhar Alam",
      "date": "Oct 5, 2020, 1:35:50PM",
      "content": "Hello all,\n\nI have just started using gprMax. I am using it now to create data that will be used to train an ML algorithm that can produce B-scan patterns for a given dielectric distribution. (The problem will be 2D)\n\nTo generate the input data, I, therefore, need a dielectric distribution of the geometry that I am using, in terms of the grids/cells that gprMax is using the solve the problem. Is there any way to obtain this distribution in the form of a matrix or maybe a text file?\n\nThanks\nNirjhar"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 9, 2020, 11:07:03AM",
        "content": "Dear Nirjhar,\n\nYou can write out the geometry/materials using the #geometry_objects_write command, for more info see the docs - http://docs.gprmax.com/en/latest/input.html#geometry-objects-write. This will give you a HDF5 file of the geometry (essentially a matrix of FDTD cell integers) and a text file that lists the materials (listed in order corresponding to the integer numbers in the matrix in the HDF5 file).\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dVqefMceax0",
    "title": "Bscan is Asian loops?",
    "original_post": {
      "author": "Brad Artman",
      "date": "Sep 1, 2022, 11:53:17AM",
      "content": "I may be wrong, but it seems to me that the architecture of the system for Bscans is simply a loop of Ascans for each receiver location. \nSince the solver is global, that means we do the same physics over the entire domain multiple times instead of saving results at multiple locations. True?"
    },
    "responses": [
      {
        "author": "Brad Artman",
        "date": "Sep 1, 2022, 11:54:06AM",
        "content": "Oops. Asian not Asian\n"
      },
      {
        "author": "Brad Artman",
        "date": "Sep 1, 2022, 11:54:37AM",
        "content": "Ascan!\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 1, 2022, 12:01:50PM",
        "content": "Indeed the solver is global and in creating B-Scans we do \"similar\" things over the entire domain. However, we do not do the \"same physics\" as in this term you must include the initial conditions (i.e. the source) which is different every time in relation to the problem's domain. It would have been so nice to be able to do different A-scans or entire B-Scans with one run and this obviously can be done but sadly as expected it gives a different answer as what you get is the superposition of the field of all sources recorded at the same time in all receivers and this cannot be detangled later to produce the B-Scans we know. If you are having one source and multiple receivers like a CDP then this can be done in one go as it should.\n\nhope that helps!\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gjiLXFs0qp4",
    "title": "Mixture of two different materials",
    "original_post": {
      "author": "Victor Okonkwo",
      "date": "Jul 31, 2018, 11:25:12PM",
      "content": "Hi everyone,\n\nI would like to know how I can mix two different materials together in a model. I have attached an image of what I want to model. Instead of having an abrupt change from one medium to another, I want a gradual change from one to the other.\nI think the \"soil_peplinski\" command is just for a mixture of sand and clay.\nThanks for your help."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 1, 2018, 5:50:26AM",
        "content": "Hi Victor,\n\nThe '#soil_peplinski\" command is for simulating soils where you can specify different sand and clay fractions (as well as water content, particle density etc...). So you are correct in thinking this is probably not what you need. There is no specific gprMax command for defining a volume with materials that create a gradual change in permittivity. However, you could do this yourself using some Python in the input file. I would think some sort of for loop that creates boxes (#box command) with different materials (also created) of increasing permittivity would work.\n\nYou should also note that gprMax implements 'dielectric smoothing' by default (it can be turned off). This means at the interface between materials of different permittivities, the cell edges at the interface will get properties that are the average of the materials around that cell edge. See the docs - http://docs.gprmax.com/en/latest/input.html#dielectric-smoothing\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/q7p8FNGudM8",
    "title": "Publications tab",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Apr 12, 2023, 10:10:32AM",
      "content": "Dear developers,\n\nI would like to understand how the Publications tab works is updated. I´ve read some publications which cites gprMax, but I cannot see in the website.\n\nBest Regards,\n\nBruno B. Santos"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 12, 2023, 10:27:30AM",
        "content": "Hi Bruno,\n\nWe periodically run a script to download citations from scopus and these are converted to a BiBTex style formatted list that is used to create the page. Scopus is not as inclusive as Google Scholar in terms of conference papers but should be able to pick up all journal articles and conference papers published in proceedings that have a proper ISSN number.\nAlso, we only are looking for citations on the more recent 2016 paper and not to any of the other ones (e.g. the 2005 one)\n\nBest\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pRh1VaYYu_k",
    "title": "Why are there no oscillations in GPRMax waveforms?",
    "original_post": {
      "author": "Ahmed Nirjhar Alam",
      "date": "Mar 24, 2023, 4:37:00PM",
      "content": "I am using the following waveform in gprMax. \n\nCommand:\n#waveform: ricker 1 1000000000 my_wave\n#hertzian_dipole: z 0.01 0.02 0.000 my_wave\n\nI see that there are no oscillations in the GPRMax A-scan(attached) apart from the wavelet. However, when looking at experimental data that is also using Ricker wavelet (attached), I see that there are oscillations throughout the A-scan. Is there a specific reason behind this general difference? The scans are both of 0.3cm wood layer with concrete floor underneath.\n\nMy understanding is that EM waves propagate by oscillation. So, shouldn't I expect to see oscillations throughout the length of each A-scan, regardless of interactions with matter?\n\nRegards\nNirjhar"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jd9PBnZpjF8",
    "title": "How to access or download the Austinmanwoman model",
    "original_post": {
      "author": "Md Shamsul Alam",
      "date": "Sep 10, 2024, 12:08:44PM",
      "content": "Dear gprMax team,\n\nI am master's student and as part of my Thesis, I am focusing on study Austinman/AustinWomen model using gprMax.\n\nI tried to access the model but login credential is needed to download it. As per the instruction on the website,  I reached out to them for login credential, But no response yet. This model is extremely important in my thesis.\n\nCould somebody please help to get this model or any information related to this would be great help. \n\nThank You.\n\nKind Regard,\nMd Shamsul Alam"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 10, 2024, 12:36:18PM",
        "content": "Hi Shamsul,\n\nSadly there is very little we can do. The licensing of the Austin/Austinwoman meshes is clear and the files can only be obtained following their instructions. We can not provide any gprMax models of these meshes as we will be breaching their license and this is not something anyone should be doing for any license!\n\nBest of luck\n\nAntonis\n"
      },
      {
        "author": "Md Shamsul Alam",
        "date": "Sep 10, 2024, 12:54:53PM",
        "content": "Hi Antonis,\n\nThanks for you reply. I understand it. \n\nI have already emailed Professor Ali E. Yilmaz through the provided email on the website for the access of this model. But haven’t got any response yet. I found out he moved in a company to the industry. Also reach out to the first author Jackson via linked in. still no response. That’s why I am reaching out here for,  should I approach to anyone else apart from them or anyone here is can connect me with Professor Ali E. Yilmaz.\n\nThank you for your time.\n\nMd Shamsul Alam\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vcqqZssnA3c",
    "title": "coordinate system",
    "original_post": {
      "author": "Brad Artman",
      "date": "Oct 6, 2022, 2:54:12PM",
      "content": "Dr. C\nAs a seismologist, I'm still getting used to your coordinate system.\nI think Z should be down...\n\nin \n#hertzian_dipole: z 1.00 1.21 .10 my_ricker\n\ndoes this really mean the dipole is acting in/out of the page, or down/up."
    },
    "responses": [
      {
        "author": "Colin Stark",
        "date": "Oct 6, 2022, 8:42:06PM",
        "content": "Different Dr C here: yes, the z axis is out of the page for \"2d\" sims.\nThe x-y plane is the \"2d\" sim plane, and there's one cell in the z direction out of the plane.\n\nLoad up the sim output in Paraview and the coordinate system will be clear.\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 7, 2022, 1:44:40AM",
        "content": "Since its inception and first version 25 years ago gprMax was based on a right-hand Cartesian coordinate system. This will continue in future. It is simple, promotes consistent use and removes any ambiguity in modelling any structure you need.\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Q2vR_TtRxWA",
    "title": "Output file conversion",
    "original_post": {
      "author": "Dimitrios Angelis",
      "date": "Oct 5, 2016, 7:23:26AM",
      "content": "Hello!!!\n\nIs there a way to convert an .out file (hdf5) to radan/rd3 or to segy format?\n\nCurrently i am trying to process the results of a bscan and i need to convert these files but i dont know how.\n\nAlso i am using matlab and hdfview to get the info from the .out files but i dont know how i can use them.\n\nAny advice?"
    },
    "responses": [
      {
        "author": "Richard Delf",
        "date": "Oct 5, 2016, 6:30:32PM",
        "content": "Someone may have a better solution but some pointers (and useful links)\n\nYou should be able to import the datasets from the hdf5 file into Matlab, using the built-in h5read function. Once you have the matrix of values in Matlab with associated file parameters there are other packages available to export as SEGY or rd3 files. I've personally successfully used SegyMAT or the CREWES Matlab toolbox to export seismic data from Matlab. \nFor rd3 data I've used an rd3 library available on the Mathworks website to read data in, but not yet to export data as rd3, may be worth a look though. \n\nhttps://uk.mathworks.com/help/matlab/import_export/importing-hierarchical-data-format-hdf5-files.html\nhttp://segymat.sourceforge.net/\nhttps://www.crewes.org/ResearchLinks/FreeSoftware/\nhttp://uk.mathworks.com/matlabcentral/fileexchange/6129-rd3-library\n\nThere may be better more streamlined ways but that's a good start\n\nCheers,\n\nRichard"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Oct 6, 2016, 8:23:33AM",
        "content": "Indeed this seems to be a good start.\nThanks a lot for your answer Richard."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xcytrD8Pros",
    "title": "Antenna patterns - OSError: user_models/(...)_rxsorigin.txt not found.",
    "original_post": {
      "author": "Sigurd Eide",
      "date": "Jan 11, 2019, 12:28:57PM",
      "content": "Hi,\n\nWhen I try running the command for Antenna patterns, \n>python -m user_libs.antenna_patterns.initial_save user_models/Bowtie_test.out\n\nI get the following error:\nOSError: user_models/Bowtie_test_rxsorigin.txt not found.\n\nHowever, I can not understand when the file _rxsorigin.txt should have been created.\nDo I need to add something to the in-file or run any preliminary commands, maybe?\n\nAny clue about what I may have forgotten here, or what may be wrong?\n\nFYI.\nI have run the model (here \"Bowtie_test.in\") beforehand and can f.ex. plot the results from its .out-file.\nThe in-file is basically the MALA-example from docs online:  http://docs.gprmax.com/en/latest/_downloads/antenna_like_MALA_1200_fs.in\n\n\nLooking forward to hear from you!\n\nBest regards, Sigurd\n\n-----------------------------------\nFull output from command:\n>python -m user_libs.antenna_patterns.initial_save user_models/Bowtie_test.out\n\nCentre frequency: 1.2 GHz\nCritical angle for Er 1 is 90.0 degrees\nWavelength: 0.250 m\nObservation distance(s) from 0.100 m (0.4 wavelengths) to 0.300 m (1.2 wavelengths)\nTheoretical boundary between reactive & radiating near-field (0.62*sqrt((D^3/wavelength): 0.018 m\nTheoretical boundary between radiating near-field & far-field (2*D^2/wavelength): 0.029 m\nTraceback (most recent call last):\n  File \"C:\\ProgramData\\Miniconda3\\envs\\develop\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\ProgramData\\Miniconda3\\envs\\develop\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \" C:\\Users\\sigurd\\gprMax\\user_libs\\antenna_patterns\\initial_save.py\", line 72, in <module>\n    origin = np.loadtxt(os.path.splitext(outputfile)[0] + '_rxsorigin.txt')\n  File \"C:\\ProgramData\\Miniconda3\\envs\\develop\\lib\\site-packages\\numpy\\lib\\npyio.py\", line 926, in loadtxt\n    fh = np.lib._datasource.open(fname, 'rt', encoding=encoding)\n  File \"C:\\ProgramData\\Miniconda3\\envs\\develop\\lib\\site-packages\\numpy\\lib\\_datasource.py\", line 262, in open\n    return ds.open(path, mode, encoding=encoding, newline=newline)\n  File \"C:\\ProgramData\\Miniconda3\\envs\\develop\\lib\\site-packages\\numpy\\lib\\_datasource.py\", line 618, in open\n    raise IOError(\"%s not found.\" % path)\nOSError: user_models/Bowtie_test_rxsorigin.txt not found."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 14, 2019, 4:33:15AM",
        "content": "Hi Sigurd,\n\nYou should follow the example input file referenced in the module overview, http://docs.gprmax.com/en/latest/user_libs_antenna_patterns.html#module-overview, for the GSSI 1.5GHz antenna model pattern (E-plane and/or H-plane). It shows you how to create all the receiver points for the pattern, and it also saves the coordinates of the origin of the pattern to file - which is where the error you are getting stems from. You can then adapt this for the Mala antenna if you like.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sigurd Eide",
        "date": "Jan 15, 2019, 6:07:40AM",
        "content": "Great, works perfectly!\n\nFor some reason I had missed the information about those .in-files that comes with the distribution, sorry about that.\nThank you for the guidance regardless!\n\nKind regards Sigurd"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/47paj-WWnJE",
    "title": "paraview",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Feb 19, 2024, 9:58:12AM",
      "content": "Can you tell me how can i activate gpr_max feature to paraview."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 21, 2024, 4:38:53AM",
        "content": "https://docs.gprmax.com/en/latest/output.html#geometry-output\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6Q32a1rthJA",
    "title": "Create hetereogeneous model for simulating concrete",
    "original_post": {
      "author": "Phoebe Wong",
      "date": "May 9, 2019, 10:28:47PM",
      "content": "Hi all,\n\nI am interested in simulating EM signals in concrete, and would like to take its heterogeneity into account.\n\nThere's Peplinski model for simulating soil, so it is convenient to do simulation with soil.\n\nAre there any existing solutions in the gprMax environment for modelling concrete? If no, do you have any advice for me?\n\nThanks and regards,\nPhoebe"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VWvaTN17jmQ",
    "title": "Question on gprMax getting started tutorial",
    "original_post": {
      "author": "Lion Brown",
      "date": "Dec 11, 2021, 9:26:36PM",
      "content": "Dear users of gprMax, \nI am a beginner of gprMax trying to get started with test models that come with gprMax. When I run \"python -m gprMax path_to/name_of_input_file\", I got a bunch of errors:\n\nHow to fix this?"
    },
    "responses": [
      {
        "author": "Lion Brown",
        "date": "Dec 13, 2021, 1:52:10AM",
        "content": "Ignore my question. I forgot to build and install gprMax. See the gprMax installation guide in the documents.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6jRCPi0xZoQ",
    "title": "gprMax beginner",
    "original_post": {
      "author": "Da Hu",
      "date": "Oct 22, 2018, 10:44:09AM",
      "content": "Hi,\n\nI have a question regrading the following simple question. I upload a simple version of my question. I want to detect the free space. But I don't know where is the signal come from shown in the figure indicated by the black box? The source and receiver are located on the slope. I appreciate any help provided.\n\n\n\n#domain: 2 2.04 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-8\n#material: 6 0 1 0 concrete\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.5 1.4 0 my_ricker\n#rx: 0.54 1.416 0\n#src_steps: 0.01 0.004 0\n#rx_steps: 0.01 0.004 0\n#box: 0 0 0 2 2 0.002 concrete\n#triangle: 0 0.5 0 2 1.9 0 2 0.5 0 0.002 free_space\n#pml_cells: 20 10 0 20 10 0\n#geometry_view: 0 0 0 2 2.04 0.002 0.002 0.002 0.002 Case2 n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2018, 12:18:04PM",
        "content": "Hi Da,\n\nWelcome to the forum! I have not looked at your model in detail, but one quick tip that helps in general when you are not sure where parts of the signal are from - use the #snapshot command to visualise the EM wave propagation. This should help you see where the different reflections are coming from.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Da Hu",
        "date": "Oct 22, 2018, 2:22:21PM",
        "content": "Thank you, Craig. This is very helpful for the debug.\n\nBest,\nDa Hu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/r0O1EBSXmwI",
    "title": "Creating B-scan",
    "original_post": {
      "author": "Kenneth Obrien M",
      "date": "Aug 22, 2017, 9:09:32PM",
      "content": "How to choose the right number of scans to create B-scan with a complete hyperbola. In case of the file provide below I'm getting the attach image (50 traces)\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3.5e-9\n\n#material: 8.3516 0.035 1 0 half_space\n\n#waveform: gaussian 1 1.5e9 my_gaussian\n#hertzian_dipole: z 0.100 0.170 0 my_gaussian\n#rx: 0.140 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#sphere: 0.120 0.08 0.002 0.010 pec\n##sphere: 0.120 0.04 0.002 0.040 pec"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 23, 2017, 4:23:57AM",
        "content": "Kenneth,\n\nThis covered in the User Guide and examples.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/UoS8oo3rKWo",
    "title": "Running Simulation Stopped",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Mar 11, 2020, 9:45:50AM",
      "content": "Hi Craig and Antonis,\n\nI am running my model and the less I wait, the simulation stops. I am using a GPU (NVIDIA TESLA K40c).  What can be happening?\n\nAs you see, the simulation stops at this point.\n\nThank you all."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 17, 2020, 1:27:19PM",
        "content": "Bruno,\n\nDoes the same model run successfully using CPU?\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "Apr 7, 2020, 2:35:57PM",
        "content": "Yes Craig, the same model is run using the CPU. However, I restarted the machine and ran all the traces successfully.\n\nI would like to take the opportunity and take a question that disturbs me. How could I mitigate the stair effect of my B Scans?\n \nIn the example of the site ( http://docs.gprmax.com/en/latest/examples_simple_2D.html ) I changed the code in time window and the domain to be able to see the whole reflection, and I notice multiple reflections due to the stair effect.\n\nI know your time is short, but could you guide me?\n\nThank you so much.\n\nBarauna"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 8, 2020, 5:31:00AM",
        "content": "Bruno,\n\nI think you are slightly confused here, as you have used a some terms together that do not make sense.\n\n1. The term 'stair-casing' which is often used when discussing FDTD is the error that can occur when trying to represent an object with a curved surface using cubic Yee cells. However, I don't think that is what you mean here. \n2. Multiple reflections (multiples) can occur in GPR data (simulated or measured). This can be expected depending on the environment being investigated with GPR. \n3. Lastly, if you are referring to the pixelation in your B-scan, that is dependent on the number of A-scans (traces) that comprise the B-scan and/or any interpolation that is used to smooth the plotting.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "Apr 8, 2020, 9:42:16AM",
        "content": "Craig, thanks for answering me. In fact, I got confused by the terms.\n\nThe term I was referring to was \"pixelation\".\n\nWhen I was converting my png template to h5 the pixelation effect was very strong and therefore I thought it would be generating diffractions in my section (B-scan) and masking the real reflectors that make up my original model.\n\nResearching, I found a possible solution to solve this problem in my image and try to mitigate the problem I saw the following proposal that is attached. The problem is that when performing this procedure, the convert_pngtoh5 tool doesn't  recognize the original RGB color scale, which makes it unfeasible.\n\nRegarding topic 3, I am using a stroke every 5 cm. Simulating a conventional GPR survey. And I will try to modify my interpolation for better results. Thank you for this valuable tip and for your time to help us.\n\nKind regards,\n\nBruno"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HSt1D0_eO0k",
    "title": "Soil mixing model broader frequency support",
    "original_post": {
      "author": "Vaheed G",
      "date": "Dec 20, 2023, 12:25:35PM",
      "content": "Hello,\n\nMay I ask why have you decided to limit soil mixing model to Peplinksi (0.3 to 1.3Ghz) frequencies?\nIn PeplinskiSoil Class, Calculate_Properties function, I see you already have the required formula for broader frequency support, but elected to comment them out.\nWhy not get the frequency as input and create a mixing model for soil that has a broader frequency support?\n\nThanks,\n-Vaheed"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9sDU0Ch3y1o",
    "title": "How to model a railway ballast random sequential Absorption algorithm.",
    "original_post": {
      "author": "Samuel Hailemariam",
      "date": "Jul 9, 2023, 5:48:46PM",
      "content": "how to use the random sequential absorption method to imitate a ballast. I tried to study up on the RSA approach, but I couldn't find the gprmax code, so I was hoping you might help or give me some advice.\n\nI'm included a study (https://doi.org/10.7843/kgs.2021.37.9.13) that used the RSA technique to describe the ballast, but I couldn't figure out how to create it.\n\nSamuel.H"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Jul 10, 2023, 1:51:18AM",
        "content": "Hello Samuel\n\nThe RSA technique is not included in GPRMax.\nIn the publication you are mentionning they use a 3rd party software (see fig 6)\nI would be curious to know what they are using.\nI have still not found a way that satisfys me and that a I could share.\n\nBest regards\n\nChristian\n"
      },
      {
        "author": "Samuel Hailemariam",
        "date": "Jul 10, 2023, 7:09:37AM",
        "content": "Hello Christian \n\nThank you for your information. \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZvKRTzdoU3o",
    "title": "Antenna pattern in a lossy heterogeneous environments",
    "original_post": {
      "author": "Haoyuan Cheng",
      "date": "Mar 20, 2022, 5:17:53AM",
      "content": "Dear Dr.Craig,\nAfter reading your paper,I tried to build an antenna pattern in lossy heterogeneous environments,but the results remained unchanged.An why only the first of 50 materials is displayed in thhe moel?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 21, 2022, 7:05:08AM",
        "content": "Can you print your full input file using the command line flag '--write-processed'\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Haoyuan Cheng",
        "date": "Mar 22, 2022, 1:13:14AM",
        "content": "Thank you for your quick reply!This is my series of input file.\n\nKind regards,\nHaoyuan\n\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2022, 5:26:59AM",
        "content": "I don't see anything fundamentally wrong with your input file. You have specified 50 materials to use with Peplinski soil and fractal box, which you can see listed in the gprMax materials table. Your screenshot from Paraview looks odd, as I don't see the heterogeneous soil displayed there - so perhaps check that as a first step. You are looking at E-plane patterns. I wouldn't have imagined the pattern shape to be quite as smooth given the heterogeneous nature of the soil.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Haoyuan Cheng",
        "date": "Apr 13, 2022, 7:34:03AM",
        "content": "Hi~long time no see! Yes,the problem is that there are  50 materials  in the gprMax materials table,but in the paraview is only one.I will try to reinstall gprmax, and then try to run the command again.Thanks for your guidance\n\nKind regards,\nHaoyuan\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 14, 2022, 10:01:51AM",
        "content": "We discovered a bug with generating fractal distributions that could effect certain specific cases (yours included). It related to the use of float types instead of doubles. This is now fixed, so if you pull the latest version and build/install, you should find your issue is now resolved.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Haoyuan Cheng",
        "date": "Apr 17, 2022, 10:24:05PM",
        "content": "Yes! It works very well now! Thank you very much for your help with your team. It's really great!\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hBVwS3S4rT4",
    "title": "Unexpected attenuation from air",
    "original_post": {
      "author": "Da Hu",
      "date": "Feb 1, 2019, 5:33:51PM",
      "content": "Hi everyone,\n\nI tested the attenuation of the materials and found the unexpected significant attenuation from the air based on the snapshot. I don't know what is the problem. Attached is the code and the result. Any help is appreciated. \n\n#domain: 0.30 1.5 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 1.2e-8\n\n#material: 6 0 1 0 concrete\n\n#waveform: ricker 1 1e9 my_ricker\n#hertzian_dipole: z 0.1 1.4 0 my_ricker\n#rx: 0.14 1.4 0\n\n\n#box: 0 0 0 0.3 0.5 0.002 concrete\n#box: 0 0.5 0 0.3 1.4 0.002 free_space\n\nThanks,\nDa Hu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 4, 2019, 4:42:10AM",
        "content": "Hi Da,\n\nI am not sure what the problem is here. You see the direct wave between the transmitter (Hertzian dipole) and receiver. You then see a small reflection from the interface between air and concrete after ~7ns. This is expected to have a much smaller amplitude then the direct wave - calculate the reflection coefficient between the two materials if you like.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Da Hu",
        "date": "Feb 4, 2019, 12:32:31PM",
        "content": "Thank you, Dr. Craig,\n\nI have two confusions here. First, the reflection is two small based on the direct wave and reflection coefficient. Second, there is significant attenuation in the air.\n\nSincerely,\nDa Hu"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 5, 2019, 5:05:32AM",
        "content": "Hi Da,\n\nI am still not sure why you think there is a problem with these results. Are you remembering about geometric spreading loss? The Hertzian dipole is a point source in 3D, so geometric spreading loss (spherical) will be ~1/r. Since your simulation is 2D the Hertzian dipole is effectively a line source of current, the geometric spreading loss (cylindrical) will be ~1/sqrt(r)\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Da Hu",
        "date": "Feb 5, 2019, 8:46:14AM",
        "content": "Thank you very much, Dr. Craig.\n\nI don't even know this concept. Thanks for your patience and suggestions. \n\nBest,\nDa Hu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/c2vUKUhxNyU",
    "title": "problems with GPU usage",
    "original_post": {
      "author": "MinJu Kim",
      "date": "Jun 30, 2017, 9:12:26AM",
      "content": "Hello, \n\nI tried to using GPRmax with GPU\n\nbut following error massages are displayed.\n\nCould you give me some advice ? \n\nI'm using python 3.5 and pycuda 2017 version"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 3, 2017, 6:05:01AM",
        "content": "Hi Minju,\n\nWelcome to the forum!\n\nThis is potentially a bug - either with gprMax, or (more likely) the installation of supporting packages. There is already a similar bug report in our GitHub Issue tracker - https://github.com/gprMax/gprMax/issues/115 Can you add your details to this along with the specification of machine and operating system you are running on. Then we can look into the problem.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 11, 2017, 9:19:04AM",
        "content": "Minju,\n\nDid you solve this problem? The other user, who was having similar issues, found that be reinstalling the CUDA Toolkit and then pycuda that the issue disappeared.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7mwxcukAh_s",
    "title": "Bscans processing time",
    "original_post": {
      "author": "Nathan Loubat",
      "date": "Apr 7, 2020, 9:10:56AM",
      "content": "Hello everyone,\n\nI need to generate a large number of Bscans but the generation time is very long. I generate all the .in files with a python script and then I want to generate the Bscans corresponding to the .in files. \nIs there any way to speed up the generation time of Bscans other than using a gpu?\nI attach a .in file as an example.\n\nThank you in advance for your answers."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 8, 2020, 5:34:20AM",
        "content": "Nathan,\n\nAre you referring to length of time to simulate multiple B-scans? If so, it is simply a function of the size of your models (which look quite small given the input file you have shown) and the number of B-scans you want. FDTD is a volumetric numerical method and must satisfy the CFL condition. So exploiting parallelisation to speed up simulation times using either more CPU threads or GPUs is an option.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-9h_K3255Ek",
    "title": "Odd reflections - 200 MHz modelling",
    "original_post": {
      "author": "Dave Bédard",
      "date": "Apr 25, 2023, 1:46:58PM",
      "content": "Hi everyone,\nI want to model the propagation of 200 MHz GPR antennas through a natural deposit. As no 200 MHz antennas are modeled, I tried to use a Hertzian dipole source. I did a test with two materials, but there are odd reflections starting from the boundaries as you can see in the Bscan below.\nAre these reflections caused by the source type or maybe by the boundaries?\nIs the Hertzian dipole source the best way to mimic 200 MHz Sensors&Software antennas? If not, what would it be?\nThanks,\n\n#title: Modelisation affaissement Bellemare\n#domain: 11 21 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 200e-9\n\n#material: 5 0.00001 1 0 dry_sand\n#material: 15 0.001 1 0 wet_sand\n\n#waveform: ricker 1 0.2e9 my_ricker\n#hertzian_dipole: z 0.5 10.5 0 my_ricker\n#rx: 1 10.5 0\n#src_steps: 0.20 0 0\n#rx_steps: 0.20 0 0\n\n#box: 0.5 5.5 0 20.5 10.5 0.01 dry_sand\n#box: 0.5 0.5 0 20.5 5.5 0.01 wet_sand\n\n#geometry_view: 0 0 0 11 11 0.01 0.01 0.01 0.01 Affaissement_Bellemare_r0_geometry n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2023, 4:01:30PM",
        "content": "Hi Dave,\n\nA quick look suggests it is because you have air (free_space) around your 2 layers. So you get reflections from the interfaces between the layers and free space as you move to-from them. If you intend to create a layered space then extend the dimensions of your boxes to the edges of the domain.\n\nHertzian dipoles are never going to be a substitute for a model of the actual antenna, but maybe fine depending on what you are interested in. For example, if you are looking for quantitative information, i.e. trying to get close to real amplitude differences and pulse shapes, then you will need an antenna model. However, if you are looking more qualitatively at responses from targets and times/velocities, then the Hertzian dipole may be fine.\n\nHope this makes sense.\n\nCraig\n\n"
      },
      {
        "author": "Dave Bédard",
        "date": "Apr 25, 2023, 6:06:27PM",
        "content": "Hi Craig, \n\nThank you for your quick reply! The reflections were caused by the free space, it's good now.\n\nDave\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/L98bTNCvnt0",
    "title": "How to open .out files with c++ using HDF5",
    "original_post": {
      "author": "David Schriebman",
      "date": "May 17, 2022, 8:43:37PM",
      "content": "Hello,\n\nI've manged to install HDF5 and figured out all the manual stuff to get it to work, but I'm having an issue opening the .out file produced by gprMax.\nI can open files that are generated with the H5Dcreate2 command, but not files that are created with gprMax\nUsing the command H5Dopen2, as seen in the HDF5 examples, what should I put in the 'name' field to open a .out file from gprMax? Everything I try throws a 'major:dataset' 'minor:can't open object' error.\nThanks."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 19, 2022, 8:20:20AM",
        "content": "Hi David,\n\nI have no experience of using C libraries to read HDF5 files. We have used Python (h5py), MATLAB and HDFView (https://www.hdfgroup.org/downloads/hdfview/) to read gprMax output files successfully.\n\nMaybe others on the forum have tried the C library and can assist.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "David Schriebman",
        "date": "Feb 14, 2023, 2:57:46PM",
        "content": "Bump. Still no resolution on this issue:\nDoes anyone know what to put in the 'name' field to open a .out file from gprMax using H5Dopen2?\nThanks.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/49ReUPr3b6I",
    "title": "Modelling infinite microstrip by extending into the PML.",
    "original_post": {
      "author": "Andres Altieri",
      "date": "Jun 14, 2021, 8:01:58AM",
      "content": "Hello,\nI am trying to simulate a perfectly matched microstrip line or waveguide, that is, a structure in which I generate an incident wave but there is no reflected wave.\n\nWhat I did, which works, is continue the structure into the PML, that is, define the structure up to the model edge so that its final part is embedded in the PML.\n\nFor example for the microstrip line, I do the following:\n\n\nThe substrate and the conductors of the microstrip extend into the standard 10-cell PML. Then I generate a forward travelling wave on the edge of the microstrip, which moves towards the PML.\n\nThis works fine, that is, I don't see any reflections coming from the PML.\n\nMy questions are:\n+ Could there be a problem with extending the substrate and the conductors into the PML?\n+ Does the PML override the substrate material? What about the 2D metal plates?\n+ Would it be the same to simply finish the structure at the edge of the PML?\n\nThank you very much in advance.\nBest regards,\nAndres"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2021, 9:03:50AM",
        "content": "Dear Andres,\n\nInteresting stuff - I'm sure Dr PML, AKA @Antonis will be along here shortly ;-)\n\nMy questions are:\n+ Could there be a problem with extending the substrate and the conductors into the PML?\n\nI don't see a problem with this, so long as you understand what is going on. The PML update coefficients, which effect the performance (how well it works) are based on average values of permittivity and permeability in the PML slab. So by extending the substrate and conductor into the PML the update coefficients will change. Are you modelling the conductor as PEC?\n\n+ Does the PML override the substrate material? What about the 2D metal plates?\n\nThe PML is a handled as a correction after the normal electric and magnetic field updates are done. It doesn't change the properties in the main grid, it uses these properties for its own update coefficients which are then used to correct the electric and magnetic field values in the PML regions.\n\n+ Would it be the same to simply finish the structure at the edge of the PML?\n\nNo, it would be different. See previous for reasons why.\n\nCraig\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 14, 2021, 10:57:30AM",
        "content": "Hi Andres,\n\nCraig is right. The PML does not override or change the physical material extending in it. Although you can see the PML as a non-Maxwellian absorbing medium with strange properties the best way to see it is a spatial coordinate transformation making spatial coordinates to be complex numbers and having some interesting properties. That way the PML is not seen as a superposition of some other properties on top of your normal ones. Saying this PMLs do not perform equally well for all structures and guided or evanescent fields are not attenuated as nicely as normal simple body waves. Equally, grazing angle of incidence create poor performance for PMLs.\n\nThe main proof for you is how well it works fro your problem. To improve its performance you might want to try a thicker  PML which as a result offers milder absorption and see the difference (e.g. 16 cells or 20 cells) If computational requirements are restricting you then the same size which is the default (10 cells) but with a CFS-PML instead can improve performance and you can easily get a good value for the extra \\alpha parameter that the CFS-PML needs from some papers. We do not use CFS-PML as a default because is not easy to universally optimise this. \n\ngprMax has the most advanced PMLs even considering commercial codes as I do a bit of research on PML implementations and we implement the results of this  work into the code.\n\nHope all work well for you.\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Andres Altieri",
        "date": "Jun 14, 2021, 1:16:21PM",
        "content": "Dear Craig and Antonis,\nthank you very much for your fast and complete replies.\n\nI think that things are much clearer for me know. My thinking was similar to what Craig explained, that the PML would slowly attenuate the wave as it moves through the substrate. On the other hand, if the substrate and microstrip ended touching the PML I assumed it would behave somewhat like an open stub and still have a rebound on the edge, with some perturbation due to the close PML.\n\nIn my tests this approach has worked well with the standard PML formulation of gprMax, I didn't need to extend the PML or use other formulations using either copper or PEC for conductors. I wasn't sure if what I was doing was acceptable, and I know that Antonis has done a lot of work on this.\n\nI am using this to simulate a perfectly matched port, that is, in reality the \"incident wave\" in my diagram is the reflected wave that comes from a circuit and I don't want this wave to reflect and go back into the circuit again. Thus the PML works as a perfectly matched port.\n\nThank you very much once again!\nBest regards,\nAndres\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wZsehKMLze8",
    "title": "Artefacts in Antenna Patterns",
    "original_post": {
      "author": "Tobias Gunther",
      "date": "May 2, 2021, 2:03:14PM",
      "content": "Dear gprMax Developers,\n  for my research, I investigate antenna patterns. Therefore, I try to plot antenna patterns. I ran some simple simulations based on the provided E- and H-Plane scripts which were provided in gprMax to simulate the 1.5 GHz GSSI Antenna. I did only minor adjustments of the script. I changed the discretization to 2mm for the Antenna and the domain and I increased the radius to investigate the far field.  \n  For the H-Plane, I also moved the antenna by 2.9 cm to set the voltage source into the center of the surrounding receivers (I tried other distances out of interest). However, at certain radii, I encountered artefacts which are not explainable by the simulation itself (see figures). Some radii show them while other radii are not affected.\n  These artefacts appear to be caused by moving the Antenna, whereas the increased discretization seems not to affect the patterns except for the higher phase-velocity errors of course. The plotting and initial.save files were not changed except for the layout. I added the input file. \n  I am pretty new to gprMax and FDTD modelling. Thus, I am a bit lost, why this happened. Perhaps, the mesh is faulty due to my changes in discretization in combination with the moved antenna. Anyway, thank you in advance for looking at my problem. If you have any more questions, feel free to ask.\n  Kind regards,              \n  Tobias"
    },
    "responses": [
      {
        "author": "Tobias Gunther",
        "date": "May 2, 2021, 2:06:18PM",
        "content": "Sorry, the attachements cannot be posted.... instead, I add the code directly:\n\n#title: GSSI 1.5GHz antenna field patterns\n#dx_dy_dz: 0.002 0.002 0.002\n#pml_cells: 14\n\n#num_threads: 28\n\n#python:\nimport os\nimport numpy as np\n\nfrom gprMax.input_cmd_funcs import *\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\n\nfilename = os.path.splitext(os.path.split(inputfile)[1])[0]\n\ntimewindows = np.array([30e-9]) # For 0.3m max\n#radii = np.linspace(0.3, 0.5, 10)\nradii = [1.0, 1.5, 2.0, 2.5, 3.0]\ntheta = np.linspace(3, 357, 200)\nmaterials = ['4 0 1 0 er5'] # Can add more to list and use selector integer to choose\nselector = 0\n\nfs = np.array([0.040, 0.040, 0.040])\ndomain = np.array([2 * fs[0] + 2 * radii[-1], 2 * fs[1] + 0.107, 2 * fs[2] + 2 * radii[-1]])\nantennaposition = np.array([fs[0] + radii[-1] - 0.028, domain[1] / 2, fs[2] + radii[-1] + 0.00])\nantenna_like_GSSI_1500(antennaposition[0], antennaposition[1], antennaposition[2], resolution = 0.002)\n\nprint('#domain: {:.3f} {:.3f} {:.3f}'.format(domain[0], domain[1], domain[2]))\nprint('#time_window: {:.3e}'.format(timewindows[selector]))\n\n## Can introduce soil model\n#print('#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 mySoil')\n#print('#fractal_box: 0 0 0 {} {} {} 1.5 1 1 1 50 mySoil mySoilBox 1'.format(domain[0], domain[1], fs[2] + radii[-1]))\n\nprint('#material: {}'.format(materials[selector]))\nprint('#box: 0 0 0 {} {} {} {} n'.format(domain[0], domain[1], fs[2] + radii[-1], materials[selector].split()[-1]))\n\n## Save the position of the antenna to file for use when processing results\nnp.savetxt(os.path.join(os.path.dirname(inputfile), filename + '_rxsorigin.txt'), antennaposition, fmt=\"%f\")\n\n## Generate receiver points for pattern\nfor radius in range(len(radii)):\n    ## H-plane circle (xz plane, y=0, phi=0,pi)\n    x = radii[radius] * np.sin(theta * np.pi /180) * np.cos(180 * np.pi / 180)\n    y = radii[radius] * np.sin(theta * np.pi /180) * np.sin(180 * np.pi / 180)\n    z = radii[radius] * np.cos(theta * np.pi /180)\n    for rxpt in range(len(theta)):\n        print('#rx: {:.3f} {:.3f} {:.3f}'.format(x[rxpt] + antennaposition[0] + 0.028, y[rxpt] + antennaposition[1], z[rxpt] + antennaposition[2] - 0.0))\n\ngeometry_view(0, 0, 0, domain[0], domain[1], domain[2], 0.002, 0.002, 0.002, filename, 'n')\n#end_python:"
      },
      {
        "author": "Tobias Gunther",
        "date": "May 2, 2021, 2:08:20PM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "May 5, 2021, 5:13:33PM",
        "content": "Dear Tobias,\n\nIts an interesting issue! Here are my first thoughts:\nI doubt it is a problem with the 2mm mesh, as I think if it was it would likely effect all patterns. However, if you haven't already done so, it is worth checking the geometry view to make sure everything looks properly connected up.\nI suspect it is more likely a numerical error/precision problem happening in the calculation of the field values in spherical coords, i.e. in the 'initial_save.py' module.\nGiven the above, worth looking at some of the calculations and values around the points where the artefacts are present.\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Tobias Gunther",
        "date": "Jun 6, 2021, 1:52:18PM",
        "content": "After a veryyyyyyy long search, I found the issue that is so ridiculously simple....\n\nThe script does not account the Voltage Source as its origin, but the geometric center of the antenna. Thus, the origin.txt file does use the wrong x coordinate which is shifted by the 3cm I added into the code. As a result of this, the script struggles to properly plot the patterns at certain points causing the artefacts. I just manually added/substracted the antenna shift back in the origin.txt file to move the origin back to the antenna's geometric center. Now it works fine.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HEVjNCvJaS0",
    "title": "B-scan problem",
    "original_post": {
      "author": "­유영준[컴퓨터공학과]",
      "date": "Jun 1, 2020, 6:07:51AM",
      "content": "Attached \"Model.jpg\" is my model.\n\n\nI did B-scan(trace number : 20) with this model along y-axis.\n\nAttached \"Plot.jpg\" is my result processed by matalb.(total 20 trace , I expand the image to expand area of 1~8 trace)\n\nAs you can see, the object is detected between 17~18.\nI cannot understand that even though my transmitter started from y(0.2) and sphere(underground object) exists y(0.33~0.43),\nwhen I see at the plot above, it seems that transmitter detects sphere from the beginning.\nAnd from 1 to 20 trace, it has same shape of waveform.\nI expected it should detect the sphere from trace 13~20.\n\nSo, I guess that my in.file has a problem.\n\n\"In_file.jpg\" is my in.file.\n\nWhat is the problem? \n\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2020, 3:52:51PM",
        "content": "There is not a problem with your input (although it might not be what you intended to simulate), just your interpretation of the results. Here are some obervations:\n\n- I would expect to see a reflection from your spherical target at ~17ns given the geometry and material properties of your model. So the reflection shown in the A-scans of 'Plot.jpg' are logical.\n- The shape of the waveform of the reflections from the sphere will look like your source waveform, which is Ricker shaped.\n- At what position your receiver detects the sphere depends on the geometry and attenuation of your materials (asphalt 20mS, soil 10mS). Remember you Hertzian dipole is a point source from which will radiate spherical wavefronts. Therefore I am not surprised that you detect the sphere from the first trace in your B-scan.\n\nI hope this helps you understand more about your simulation. It might be helpful to start with an even simpler model so you understand what is going on.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/koGp_wPtOPE",
    "title": "Small hypobola",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Mar 19, 2024, 9:15:39AM",
      "content": "Salut, \n\nCan someone help me to compute a hyperbola-like image attached hbola_s. \n\nI always get something like this image hbola_mine. \n\nwhere should I change it? \n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 2.000000 0.500000 0.002000\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-08\n\n#output_dir: out\n\n#material: 6 0 1 0 half_space\n#material: 12 0 1 0 root\n\n#waveform: ricker 1 1.8e9 my_ricker\n#hertzian_dipole: z 0.040000 0.4000 0 my_ricker\n\n#rx: 0.060000 0.040000 0\n#src_steps: 0.005000 0 0\n#rx_steps: 0.005000 0 0\n\n#box: 0 0 0 2.000000 0.475000 0.002000 half_space\n\n#cylinder: 1.817356 0.117820 0.000000 1.817356 0.117820 0.002000 0.050000 root\n#cylinder: 1.200023 0.232026 0.000000 1.200023 0.232026 0.002000 0.050000 root\n#cylinder: 0.716889 0.220410 0.000000 0.716889 0.220410 0.002000 0.050000 root\n#cylinder: 0.292172 0.115330 0.000000 0.292172 0.115330 0.002000 0.050000 root\n#cylinder: 0.991200 0.165042 0.000000 0.991200 0.165042 0.002000 0.050000 root"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PbzG2pt1Yc4",
    "title": "Contributing to grpMax",
    "original_post": {
      "author": "Sahil Ahmed",
      "date": "Sep 15, 2023, 5:44:21PM",
      "content": "Hi,\nI was looking through the GSOC 2023 project ideas list and looked into those which were not selected. I found \"Performance gains through memory usage and cache access\" idea listed there. And read through the description.\n\nFrom what I understand, it was mentioned that the solver is limited by the memory bandwidth, I guess this is due to memory access being considerably slow than the speed at which CPU executes instructions. So I guess using the cache memory would help in this case. I dont know how this could be done and  I can't access the paper https://ieeexplore.ieee.org/abstract/document/7481533 linked in the description via my institute ID unfornately.\n\nI would be happy to learn more on this topic and hopefully contribute something meaningful. I have experience with openMP.\n\nThank You"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/R-o3XkHpY9k",
    "title": "3D A scan results are abnormal",
    "original_post": {
      "author": "C Master",
      "date": "Sep 25, 2020, 9:51:14PM",
      "content": "Hello, I used A 3D A scan to detect a wafer of an ideal electric conductor at A depth of 3m, but I felt the waveform was a bit abnormal. I don't have as many peaks and troughs when I'm using a lower frequency, but when I'm using 1GHz it becomes the case in the picture below. Why is there so much jitter in this waveform?\n\nAnd this is my .in file\n#title: A new test\n#domain: 1 1 5\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 100e-9\n\n#material: 5 0 1 0 drysoil\n\n#box: 0 0 0 1 1 4 drysoil\n#box: 0 0 0.995 1 1 1 pec\n\n#voltage_source: y 0.8 0.5 4 50 my_wave\n#waveform: gaussian 10 1e9 my_wave\n#rx: 0.5 0.5 4.2\n\n#geometry_view: 0 0 0 1 1 5 0.005 0.005 0.005 test_16_Ascan n\n\nAnd this .out file"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 15, 2020, 11:46:14AM",
        "content": "Dear C Master,\n\nYou are likely experiencing numerical dispersion because your spatial resolution is small enough to suitably discretise the smallest wavelengths in your model. There is plenty of literature available on the internet for you to read about numerical dispersion, how it happens, and what you should do to mitigate it. There is also a mention in our docs - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nReduce your spatial discretisation, to say 3mm, and re-run your model, and it should disappear.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9VcNmu-Sggo",
    "title": "Soil peplinksi on devel version in python",
    "original_post": {
      "author": "Léa Mercier",
      "date": "Feb 29, 2024, 9:15:21AM",
      "content": "Hello, I am using the BETA version of gprmax, and I would like to know if it is possible to incorporate heterogeneity using the Peplinski soil function or any other method  (if you have suggestions)while using the subgrid. I have attempted to call the function with the Fractal Box , but it didn't work.\nI write my Python scripts like this:\n\n# File path - used later to specify name of output files\nfn = Path(__file__)\nparts = fn.parts\n\n# Subgrid spatial discretisation in x, y, z directions\ndl_sg = 5e-3\n\n# Subgrid ratio - must always be an odd integer multiple\nratio = 5\ndl = dl_sg * ratio\n\n# Domain extent\nx = 3\ny = 1\nz = 2\n\n# Time window\n# Estimated two way travel time over 1 metre in material with highest\n# permittivity, slowest velocity.\ntw = 2 / 3e8 * (np.sqrt(3.2) + np.sqrt(9))\n\nscene = gprMax.Scene()\n\ntw=round((((z)*2 / 3e8 )* (np.sqrt(9))),10)+10e-9\n\nn=60\nstep=(x-ant_pos[0]*2)/(n-1)\nprint(step)\n\nfor i in range(0, n): \n\n    title = gprMax.Title(name=fn.name)\n    dxdydz = gprMax.Discretisation(p1=(dl, dl, dl))\n    domain = gprMax.Domain(p1=(x, y, z))\n    time_window = gprMax.TimeWindow(time=tw)\n\n    scene.add(title)\n    scene.add(dxdydz)\n    scene.add(domain)\n    scene.add(time_window)\n\n    # Dimensions of antenna case\n    antenna_case = (0.3, 0.3, 0.178)\n\n    # Position of antenna\n    antenna_p = (x / 2, y / 2, 170 * dl)\n\n    # Extra distance surrounding antenna for subgrid\n    bounding_box = 2 * dl\n\n    # Subgrid extent\n    sg_x0 = antenna_p[0] - antenna_case[0] / 2 - bounding_box\n    sg_y0 = antenna_p[1] - antenna_case[1] / 2 - bounding_box\n    sg_z0 = antenna_p[2] - bounding_box\n    sg_x1 = antenna_p[0] + antenna_case[0] / 2 + bounding_box\n    sg_y1 = antenna_p[1] + antenna_case[1] / 2 + bounding_box\n    sg_z1 = antenna_p[2] + antenna_case[2] + bounding_box\n\n    # Create subgrid\n    sg = gprMax.SubGridHSG(p1=[sg_x0, sg_y0, sg_z0], p2=[sg_x1, sg_y1, sg_z1], ratio=ratio, id=\"sg\")\n    scene.add(sg)\n\n    # Create and add a box of homogeneous material to main grid - sandy_soil\n    sandy_soil = gprMax.Material(er=3.2, se=0.397e-3, mr=1, sm=0, id=\"sandy_soil\")\n    scene.add(sandy_soil)\n    b1 = gprMax.Box(p1=(0, 0, 0), p2=(x, y, antenna_p[2]), material_id=\"sandy_soil\")\n    scene.add(b1)\n\n    # Position box of sandy_soil in the subgrid.\n    #   It has to be positioned manually because it traverses the main grid/subgrid\n    #   interface. Grid traversal is when objects extend beyond the outer surface.\n    #   Setting autotranslate to false allows you to place objects beyond the outer\n    #   surface.\n\n    # PML separation from the outer surface\n    ps = ratio // 2 + 2\n    # Number of PML cells in the subgrid\n    pc = 6\n    # Inner surface/outer surface separation\n    isos = 3 * ratio\n\n    # Calculate maximum z-coordinate (height) for box of sandy_soil in subgrid\n    h = antenna_p[2] - sg_z0 + (ps + pc + isos) * dl_sg\n\n    # Create and add a box of homogeneous material to subgrid - sandy_soil\n    sg.add(sandy_soil)\n    b2 = gprMax.Box(p1=(0, 0, 0), p2=(411 * dl_sg, 411 * dl_sg, h), material_id=\"sandy_soil\")\n    # Set autotranslate for the box object to false\n    b2.autotranslate = False\n    sg.add(b2)\n\n    # Import antenna model and add components to subgrid\n    gssi_objects = antenna_like_GSSI_400(*antenna_p, resolution=dl_sg)\n    for obj in gssi_objects:\n        sg.add(obj)\n\n    # Create and add a homogeneous material with a rough surface\n    soil = gprMax.Material(er=9, se=0.397e-3, mr=1, sm=0, id=\"soil\")\n    scene.add(soil)\n\n    fb = gprMax.FractalBox(\n        p1=(0, 0, 0),\n        p2=(3, 1, 1),\n        frac_dim=1.5,\n        weighting=(1, 1, 1),\n        n_materials=1,\n        mixing_model_id=\"soil\",\n        id=\"fbox\",\n        seed=1,\n    )\n    scene.add(fb)\n\n    rough_surf = gprMax.AddSurfaceRoughness(\n        p1=(0, 0, 1), p2=(3, 1, 1), frac_dim=1.5, weighting=(1, 1), limits=(0.4, 1.2), fractal_box_id=\"fbox\", seed=1\n    )\n    scene.add(rough_surf)\n\n    # Create some snapshots and geometry views\n    for i in range(1, 51):\n        snap = gprMax.Snapshot(\n            p1=(0, y / 2, 0),\n            p2=(x, y / 2 + dl, z),\n            dl=(dl, dl, dl),\n            filename=Path(*parts[:-1], f\"{parts[-1]}_{str(i)}\").name,\n            time=i * tw / 50,\n        )\n        scene.add(snap)\n\n    gvsg = gprMax.GeometryView(\n        p1=(sg_x0, sg_y0, sg_z0),\n        p2=(sg_x1, sg_y1, sg_z1),\n        dl=(dl_sg, dl_sg, dl_sg),\n        filename=fn.with_suffix(\"\").parts[-1] + \"_sg\",\n        output_type=\"n\",\n    )\n    sg.add(gvsg)\n\n    gv1 = gprMax.GeometryView(\n        p1=(0, 0, 0), p2=domain.props.p1, dl=dl, filename=fn.with_suffix(\"\").parts[-1], output_type=\"n\"\n    )\n    scene.add(gv1)\n\nThank you, \nLéa"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 4, 2024, 5:03:59AM",
        "content": "Hi Lea,\n\nCan you provide a example of your script that generates the error please. The one you provided has missing package imports and undefined variables.\n\nThanks,\nCraig\n\n"
      },
      {
        "author": "Léa Mercier",
        "date": "Mar 4, 2024, 6:35:22AM",
        "content": "Hi Craig,\nThanks for the response. Here is my entire code for creating a fractal box with Soilpeplinsi :\n\n\nfrom pathlib import Path\n\nimport gprMax\nfrom toolboxes.GPRAntennaModels.GSSI import antenna_like_GSSI_1500\n# File path - used later to specify name of output files\nfn = Path(__file__)\nparts = fn.parts\n\n# Subgrid spatial discretisation in x, y, z directions\ndl_sg = 0.002\n\n# Subgrid ratio - must always be an odd integer multiple\nratio = 3\ndl = dl_sg * ratio\n\n#domain variable \npml_dl10= 10*dl\npml_dl20=20*dl\nair_h=0.6\nh_antenna=0.30\n\nx_domain=1.5\ny_domain=0.8\nz_domain=1.9\n\n# Domain\nx = x_domain +pml_dl20\ny = y_domain +pml_dl20\nz = z_domain +pml_dl20\n\nbounding_box = 2 * dl\n\nantenna_case =  (0.170, 0.108, 0.043)\n# Position of antenna\nant_pos = (antenna_case[0]+ bounding_box*2 , y/2, z  - air_h + h_antenna+ antenna_case[2]/2 -  pml_dl10)\n\ntw=30e-9\n\nn=60\nstep=(x_domain-ant_pos[0]*2)/(n-1)\n\n\nfor i in range(0, n):\n\n    scene = gprMax.Scene()\n\n    title =gprMax.Title(name=fn.with_suffix(\"\").parts[-1]+str(i))\n    dxdydz = gprMax.Discretisation(p1=(dl, dl, dl))\n    domain = gprMax.Domain(p1=(x, y, z))\n    time_window = gprMax.TimeWindow(time=tw)\n\n    scene.add(title)\n    scene.add(dxdydz)\n    scene.add(domain)\n    scene.add(time_window)\n    # Position of antenna\n       ant_pos = (antenna_case[0]+i*step+pml_dl10 , y/2, z - air_h + h_antenna+antenna_case[2]/2 -  pml_dl10)\n        sg_x0 = ant_pos[0] - antenna_case[0] / 2 - bounding_box\n    sg_y0 = ant_pos[1] - antenna_case[1] / 2 - bounding_box\n    sg_z0 = ant_pos[2] - bounding_box\n    sg_x1 = ant_pos[0] + antenna_case[0] / 2 + bounding_box\n    sg_y1 = ant_pos[1] + antenna_case[1] / 2 + bounding_box\n    sg_z1 = ant_pos[2] + antenna_case[2] + bounding_box\n    sg = gprMax.SubGridHSG(p1=[sg_x0, sg_y0, sg_z0], p2=[sg_x1, sg_y1, sg_z1], ratio=ratio, id=\"sg\")\n    scene.add(sg)\n\n    # Create and add a box of homogeneous material to main grid - sandy_soil\n    sandy_soil = gprMax.Material(er=3.2, se=0.397e-3, mr=1, sm=0, id=\"sandy_soil\")\n    scene.add(sandy_soil)\n\n    b1 = gprMax.Box(p1=(0, 0, 0), p2=(x, y, ant_pos[2]-h_antenna), material_id=\"sandy_soil\")\n    scene.add(b1)\n\n    soil_p=gprMax.materials.PeplinskiSoil(\n        ID=\"my_soil\",\n        sandfraction=0.5,\n        clayfraction=0.5,\n        bulkdensity=2.0,\n        sandpartdensity=2.66,\n        watervolfraction=0.001,    \n    )\n    scene.add(soil_p)\n\n    fb = gprMax.FractalBox(\n        p1=(0, 0, 0),\n        p2=(x, y,1),\n        frac_dim=0.2,\n        weighting=(1, 1, 1),\n        n_materials=1,\n        mixing_model_id=\"my_soil\",\n        id=\"fbox\",\n        seed=3,\n    )\n    scene.add(fb)\n\n    rough_surf = gprMax.AddSurfaceRoughness(\n        p1=(0, 0, 1), p2=(x, y, 1), frac_dim=0.2, weighting=(1, 1), limits=(0.9, 1.1), fractal_box_id=\"fbox\", seed=3\n    )\n    scene.add(rough_surf)\n\n\n    gvsg = gprMax.GeometryView(\n        p1=(sg_x0, sg_y0, sg_z0),\n        p2=(sg_x1, sg_y1, sg_z1),\n        dl=(dl_sg, dl_sg, dl_sg),\n        filename=fn.with_suffix(\"\").parts[-1] + \"_sg\"+str(i),\n        output_type=\"n\",\n    )\n    sg.add(gvsg)\n\n    gv1 = gprMax.GeometryView(\n        p1=(0, 0, 0),p2=domain.props.p1, dl=dl, filename=fn.with_suffix(\"\").parts[-1]+str(i), output_type=\"n\"\n    )\n    scene.add(gv1)\n\n    # Utilisation dans votre script\n    gvslice1 =  gprMax.GeometryView(p1=(0, 0, 0.9), p2=(x, y, 1.1), dl=dl, filename=\"gvslice1\", output_type=\"n\")\n    scene.add(gvslice1)\n\n    gprMax.run(scenes=[scene], n=1, geometry_only=False, outputfile=fn.with_suffix(\"\").parts[-1]+str(i), subgrid=True, autotranslate=True)\n\n\n\nAnd the error :\n(gprMax-devel)gprMax\\examples\\subgrids\\dim frac>python -m test\nThis object is unknown to gprMax\nNoneType: None\nTraceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"C:\\Users\\Léa\\gprMax\\examples\\subgrids\\dim frac\\test.py\", line 89, in <module>\n    scene.add(soil_p)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 59, in add\n    raise ValueError\nValueError\nI tried to remove the  scene.add(soil_p) but I got this error:\nModel title: test0\nSpatial discretisation: 0.006 x 0.006 x 0.006m\nDomain size: 1.62 x 0.92 x 2.02m (270 x 153 x 337 = 1.39215e+07 cells)\nMode: 3D\nTime step (at CFL limit): 1.1555e-11 secs\nTime window: 3e-08 secs (2598 iterations)\nMaterial sandy_soil with eps_r=3.2, sigma=0.000397 S/m; mu_r=1, sigma*=0 Ohm/m created.\nGeometry view from 0m, 0m, 0m, to 1.62m, 0.918m, 2.022m, discretisation 0.006m, 0.006m, 0.006m, with filename base test0 created.\nGeometry view from 0m, 0m, 0.9m, to 1.62m, 0.918m, 1.098m, discretisation 0.006m, 0.006m, 0.006m, with filename base gvslice1 created.\n#fractal_box: 0 0 0 1.62 0.92 1 1.2 1 1 1 3 my_soil fbox 1 mixing model or material with ID {mixing_model_id} does not exist\nNoneType: None\nError creating user input object\nTraceback (most recent call last):\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 70, in build_obj\n    obj.build(grid, uip)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\cmds_geometry\\fractal_box.py\", line 178, in build\n    self.pre_build(grid, uip)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\cmds_geometry\\fractal_box.py\", line 153, in pre_build\n    raise ValueError\nValueError\nTraceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"C:\\Users\\Léa\\gprMax\\examples\\subgrids\\dim frac\\test.py\", line 126, in <module>\n    gprMax.run(scenes=[scene], n=1, geometry_only=False, outputfile=fn.with_suffix(\"\").parts[-1]+str(i), subgrid=True, autotranslate=True)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 159, in run\n    run_main(args)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\gprMax.py\", line 219, in run_main\n    results = context.run()\n              ^^^^^^^^^^^^^\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\contexts.py\", line 83, in run\n    model.build()\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 74, in build\n    self.reuse_geometry() if config.get_model_config().reuse_geometry else self.build_geometry()\n                                                                           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 142, in build_geometry\n    self.build_scene()\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\model_build_run.py\", line 268, in build_scene\n    scene.create_internal_objects(self.G)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 161, in create_internal_objects\n    self.process_geocmds(self.geometry_cmds, G)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 109, in process_geocmds\n    self.build_obj(obj, grid)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\scene.py\", line 70, in build_obj\n    obj.build(grid, uip)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\cmds_geometry\\fractal_box.py\", line 178, in build\n    self.pre_build(grid, uip)\n  File \"C:\\ProgramData\\miniconda3\\envs\\gprMax-devel\\Lib\\site-packages\\gprmax-4.0.0b0-py3.11-win-amd64.egg\\gprMax\\cmds_geometry\\fractal_box.py\", line 153, in pre_build\n    raise ValueError\nValueError\nThanks,\nLéa\n\n\n\n\n\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 4, 2024, 3:46:53PM",
        "content": "Hi Lea,\n\nYour use of the API function for the Peplinski soil model is wrong, see the devel docs - https://docs.gprmax.com/en/devel/input_api.html#soil-peplinski\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/B0mfvdd3raQ",
    "title": "pycuda._driver.MemoryError",
    "original_post": {
      "author": "Haoyuan Cheng",
      "date": "Aug 29, 2022, 6:15:37AM",
      "content": "Dear  Dr.Craig,\nAfter the recent update,an error occurred.There was no such problem with using mpiexec -n 3 python -m gprMax...before.Sorry i don't know what went wrong.\n\nkind regards,\ncheng"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 29, 2022, 7:19:08AM",
        "content": "Dear Cheng,\n\nWe will need more information - like input file and machine(s)/GPUs you are trying to run on - to help you. At first glance the out of memory error suggest either your model RAM requirements have changed or the GPU you are trying to run on has something else running.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Haoyuan Cheng",
        "date": "Aug 30, 2022, 11:20:22PM",
        "content": "Sorry,Dr.Craig,it only ran perfectly for a while,and then the same error occurred.But there has been no such problem before.Please guide me in your busy schedule.Thank u verrrry\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qjdAxHoYUEI",
    "title": "Hyperbola Size",
    "original_post": {
      "author": "ABEEDA SHAH",
      "date": "Mar 12, 2017, 4:19:56PM",
      "content": "when i am running my input file for B-scan of buried cylinders i get the result attached rx1.but i want small size hyperbola. what parameter in my input file should i change to get results attached in rx2.\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.800 0.300 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 6e-9\n#material: 3.0 0.00001 2.0 0.01 dry_sand\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.260 0 my_ricker\n#rx: 0.080 0.260 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n#box: 0 0 0 0.800 0.260 0.002 dry_sand\n#cylinder:  0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n#cylinder:  0.400 0.150 0 0.400 0.150 0.002 0.010 pec\n#geometry_view: 0 0 0 0.800 0.300 0.002 0.002 0.002 0.002 user_libs n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2017, 6:47:56AM",
        "content": "Hi Abeeda,\n\nWelcome to the forum!\n\nIf you can explain a bit more about the situation you are trying to model/simulate we can try and help.\n\nThe attachment 'rx2.jpg' looks very similar to another recent post, an explanation of which was given at http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FH5F3Gt4FXLc%2FqkVwJzqvBAAJ\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZIm6Wt4Vakw",
    "title": "The position of sources and receivers and cells",
    "original_post": {
      "author": "Rohanna",
      "date": "May 22, 2018, 3:12:43AM",
      "content": "Hi Craig, \nI have some questions about the model and the function of GPRMax.\n\nI want to simulate a model which domain is big:500 500 10. The code and result are in the appendix.\nIn fact, the model I originally wanted to build was larger than the current one. But I find I don't have enough memory on my computer. So I try to scale down the space.\n\nI'm using these formulas to divide the cells:\ndx(dy/dz)=1/10λ;\\\nλ=c/3f√ε\n\nAs is showed in my code, when the frequency is 60MHz and the material is ice, the calculated value is probably 0.15, so there will be about 450 M cells in the model.\n\nMy question is :\nCan I use other values to define the dx/dy/dz?\nWhere should I put the sources and receivers to make sure they are not in the PML?\nWhat is the maximum space that GPRMax can simulate? Are there any restrictions?\n\nBest regards,\nRohanna"
    },
    "responses": [
      {
        "author": "Rohanna",
        "date": "May 22, 2018, 3:25:32AM",
        "content": "I have another question: How should I use the command 'geometry-only'?\nCan you give me a concrete example?\nFor example, if I want to check my model follow but don't simulate, what should I input in the GPRMax?\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\nBy the way,I have used paraview to check this model, but my result is different from the example."
      },
      {
        "author": "Craig Warren",
        "date": "May 22, 2018, 6:15:49AM",
        "content": "Hi Rohanna,\n\nI would recommend you spend some more time getting familiar with the examples and the FDTD method in general, as many of your questions can be answered through a better understanding of both. \n\nFor example you model domain size of 500x500x10 will not work with the default 10 cells of PML. Either your model is 2D with a single cell in the z-direction, i.e. 500x500x0.15 or it is 3D and you must extend the z-direction to accommodate the PML and further cells to avoid a seriously elongated domain.\n\nThere is no upper limit to the size of simulation you can run with gprMax, it is only limited by the computational resources you have available. Larger domain sizes require more RAM and longer computation time.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Et-7Q18op0o",
    "title": "3D modelling",
    "original_post": {
      "author": "Rakeeb Jaufer",
      "date": "Feb 12, 2019, 9:28:34AM",
      "content": "Hi, \n\nI am trying to make a 3D modelling .  initially i placed the single tx and rx at z=0.4 , but i dont see any electric field reflections.  here is the code, can someone help me to rectify the issue please. \n\ncase 1 : single tx and rx\n\n#title: single cylinder\n#domain: 1 0.7 0.7\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 10e-9\n#material: 2 0.001 1 0  layer1\n#box: 0 0 0  1 0.6 0.7  layer1\n#cylinder: 0.50 0.35 0 0.5 0.35 0.7 0.15 pec\n\n#waveform: ricker 1 1.5e9 my_wave1\n\n\n#hertzian_dipole: z 0.5 0.61 0.4 my_wave1\n#src_steps: 0.01 0 0\n#rx: 0.5 0.61 0.4\n#rx_steps: 0.01 0 0\n\n\ngeometry_view: 0 0 0 1.6 0.8 3 0.005 0.005 0.005 utilityscan n\n\n\n\n\n\ncase2:  3 tx and 3rx \n\n#title: single cylinder\n#domain: 1 0.7 0.7\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 10e-9\n#material: 2 0.001 1 0  layer1\n#box: 0 0 0  1 0.6 0.7  layer1\n#cylinder: 0.50 0.35 0 0.5 0.35 0.7 0.15 pec\n\n#waveform: ricker 1 1.5e9 my_wave1\n#waveform: ricker 1 1.5e9 my_wave2\n#waveform: ricker 1 1.5e9 my_wave3\n\n#hertzian_dipole: z 0.25 0.61 0.2 my_wave1\n#rx: 0.25 0.61 0.2\n\n#hertzian_dipole: z 0.25 0.61 0.4 my_wave2\n#rx: 0.25 0.61 0.4\n\n#hertzian_dipole: z 0.25 0.61 0.6 my_wave3\n#rx: 0.25 0.61 0.6\n\n\n#src_steps: 0.1 0 0\n#rx_steps: 0.1 0 0\n\n\ngeometry_view: 0 0 0 1.6 0.8 3 0.005 0.005 0.005 utilityscan n"
    },
    "responses": [
      {
        "author": "Rakeeb Jaufer",
        "date": "Feb 13, 2019, 4:39:58AM",
        "content": "Hi Craig \n\nmay i have a feedback for my query pls.  in both cases i can not see the scattered signals when rx moved to z > 0,   im wondering why.  is it a 3D realated issue or due to multiple sources and multiple rx.    multipl tx, rx configrations are possible on gprmax (array) ?."
      },
      {
        "author": "Craig Warren",
        "date": "Feb 13, 2019, 4:52:32AM",
        "content": "Hi Rakeeb,\n\nI don't have time to look in detail at your model at the moment. From a quick look I would think the reflection from surface of your layer and from your pec cylinder have been absorbed into the direct wave. This is because the material (layer1) has a very low relative permittivity (high velocity), and the distances (from source to targets to receiver) are relatively small. You can quickly prove this by increasing the permittivity of layer1, you will then see all the separate reflections.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BvMj0hjF6Ao",
    "title": "Missing attributes in merged B-scan files",
    "original_post": {
      "author": "Ivan Dubrovin",
      "date": "Dec 21, 2017, 2:27:20PM",
      "content": "Hi!\n\nWhile trying to make some things happen with .hdf5 output files I've come to notice that when one is using the outputfiles_merge tool some attributes of the output files get lost in the process. The only attributes left in the merged file are: 'Title', 'gprMax', 'Iterations', 'dt', 'nrx'. \nI checked the outputfiles_merge.py to see how that happens, and came here to ask whether you are aware that they are just never being set while writing the merged file.\n\nNow, I don't need any help with that – I modified it for myself already – but since gprMax is being so useful to me I really want to take part in making it better, even if just a little bit. So just letting you know of the little missing piece I stumbled across.\n\nMay the Force be with you!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 2, 2018, 5:33:14AM",
        "content": "Hi Ivan,\n\nThanks for pointing this out. It was, somewhat, intentional that the properties in a merged file (using the output files_merge module) are a subset of those in a single model. The thinking was that the output files_merge module should be very general. For example, there maybe cases where you want to merge outputs from models that do not have the same spatial discretisation, therefore including this property in the merged file would be misleading. \n\nSo I'm glad you have modified to suit your needs.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bF2gMdKUdkM",
    "title": "Error essential commands",
    "original_post": {
      "author": "Leticia Sabater Belmar",
      "date": "Mar 22, 2018, 4:50:57AM",
      "content": "Hello everybody,\nI wrote a few days ago because the gprMax gives me an error in the essential commands.\nI have made some changes to the file but the error is still there.\nSomebody could help me? \nWhat I want is to get the graphics on the air with the antenna provided by the program.\nAttached the .in and the photo of the error. \n\nthank you very much.\nYour sincerily Leti"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 22, 2018, 5:55:17AM",
        "content": "Hi Leti,\n\nThere are quite a few problems with your input file, which is why it is not running. I will point out the main issues, which if you fix, should allow you to run the model.\n\nThe domain is not large enough to include the antenna model that you are trying to import. See the docs for the size of the GSSI 1.5GHz antenna model - http://docs.gprmax.com/en/latest/user_libs_antennas.html\nThe #python: command should be on a line of its own.\nThere is no material called 'frees_space'. The builtin material is 'free_space' or you can define your own.\nKind regards,\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 22, 2018, 5:58:07AM",
        "content": "Hi Leticia,\n\nI replied to you few days ago but you did not follow all the steps I suggested or corrected all errors. Your #python: command is wrong. Look at the example in the manual and try to replicate it. You can then move on from there.\n\n#python:from user_libs.antennas.GSSI import antenna_like_GSSI_1500\n\nshould be\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\n\nThere are might be other errors(most likely) as the 0.2^3 domain is very small for this antenna\n\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PktoW2aVwEU",
    "title": "Directional Antenna Radiation?",
    "original_post": {
      "author": "Paul-Benjamin Riedel",
      "date": "Jul 3, 2020, 10:20:03AM",
      "content": "Hi all.\n\nI am simulating roads.\n\nA central problem that I encoutered the following:\n\nI simulated several \"layers\" and put some \"damage\" parts into my model, these damages sit right on top of the asphalt layers, are filled with a permitivity close to air(basically a gap)\n\n\n\nAs you can see, the lower layer generates a more visible hyperbole, than the very top ones.\n\nI tried several setups and narrowed it down to geometrical effects.\n\nIn reality this is visible as well, that's why we use horn antennas.\n\nI would like to use one as a source, however simulating a whole antenna is not a plausible option, as it would trigger to need to move geometry every turn, which is not fast enough for my\nwork.\n\n\nMy question is if it's posible to use an antenna that is not a hertzian dipole but rather something that limits the radiation angle of the antenna to a very very marginal degree.\n\nI know with FD-simulation this is very complicated, I would just like to check if you can think of a possibility that lets me stay in the 2D domain.\n\nCheers,\nPaul"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 3, 2020, 12:06:59PM",
        "content": "Hi Paul,\n\nIn 2D you are not simulating the behaviour of an antenna and the fields you get have different spreading loss characteristics. However, scattering patterns for 2D geometries are OK and as far as you happy with the limitations all is well. In 2D you source is a line source (infinite length in the invariance direction). It is possibly to consider including the cross section of a horn in 2D to guide your energy a bit more. This again is an approximation but you can experiment and see how it goes. You will make this almost triangle shape using pec  and be above the interface as a normal horn antenna ...\n\nNot easy in a full wave solver to selectively chop parts of the waves ...\n\nBest\n\nAntonis"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 6, 2020, 5:40:35AM",
        "content": "Thank you for the reply, I thought so.\n\nSo this requires to change the geometry every step, meaning I would have to move along my PEC horn for every step of the B-Scan.\n\nIs there a decoumentation of available python commands to access useful variables aside from the current run number? Stuff like discretisation, current rx/tx position within the model and so on?\nCurrent documentation seems to cocnentrate on the .in file, I'd rather go more into the python parts so I'd be glad for a hint"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 6, 2020, 5:58:43AM",
        "content": "Hi Paul,\n\nScripting is the only way to do this and looking into the future it will become more robust and powerful. If you look at the examples for the GSSI 1.5Ghz b-scan you can create a simple alternative for your geometry and do what you want. Other people in the forum maybe can help more with scripting.\n\nBest\n\nAntonis"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 6, 2020, 7:02:48AM",
        "content": "Hi Antonis,\n\nyeah, I got this working already, moving my PEC with the RX/TX . \n\nthis is what it looks like with a box of pec left of and just under the RX/TX\n \nMy main concern is how this impacts performance as I can not use the \"geometry-fixed\" option with this as well as secondary reflections.\n\nIs there a way I can make a box into pml?"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 6, 2020, 7:19:23AM",
        "content": "Hi Paul,\n\nWe use a very versatile PML (OK it is my formulation ...) and the reason apart from being generic and easy to implement was to allow its use internally as an absorber in creating a PML box. However, although the mechanics are there and it is not as difficult to do as the theory and implementation could support it a lot easier than other approaches we are not there yet in having this feature ...\n\nSo, I am afraid this is not an option for you and to be realistic I don't see it happening very soon. Understanding the intricacies of the PML formulation and implementation will take a bit of effort for anyone with the right programming skills so, it is not something I recommend to someone with not enough time and inclination to get into this ...\n\nBest\n\nAntonis"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 6, 2020, 8:14:19AM",
        "content": "Yeah I get that, in the end I of course can not expect a special use case like mine to be focus of yours.\n\nAnyway, a 2D horn antenna/directed radiation would be quite useful for quickly simulating road conditions and since I am coming from the Machine Learning corner, this would be awesome to have for generating realistic data for training(perfect in-situ knowledge, what a dream for every applied geophysicist !!) so maybe it can be a scenario for the future\n\ncheers"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2020, 11:12:53AM",
        "content": "You could try filling the horn cavity with some dielectric loading. Obviously it won't do the same job as a PML but may help reduce some of the ringing you are probably getting from the horn.\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 7, 2020, 10:23:45AM",
        "content": "Hi Craig.\n\nIn the 2D  case i can not get a horn antenna.\n\nMy main concern is also not exactly the ringing, it's actually pretty close to reality\n\nit's more the shapes the responses from deeper layers.\nThey are \"too hyperbolic\".\n\nExample:\n\n(ignore the problems with PML crossing and my makeshift \"shielding\", the model is not from the exact run that the snapshot is from)\n\nThe result of the B-Scan after background removal is \n\n\nAs you can see, the deeper layer, despite bing relatively continouous, shows hyperboles from it's \"tips\" that should not be as pronounced. After all, the upper layers do not show such a behaviour.\n\nMy first suspicion is that my layers steepness is too high, falling about 1m within 10m of distance.\n\nBut from real measurements I know that this happens, especially when construction of roads hits something like a bridge. And the data of a \"real\" antenna does not show these hyperboles."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 7, 2020, 11:06:44AM",
        "content": "Hi Paul,\n\nSignals attenuate very differently in a 2D model than in a 3D model and the real world. The spreading loss is different as the physics of the problem are different. The directivity of a 2D line source is not the same as the one of a dipole. In reality the directivity of your antenna will be better than the one in a 2D model, the loss will be more (especially the geometric loss). Depolarisation can play a role that you do not have in 2D and obviously you might not have the correct material model that might have different attenuation profile than the one you assume and this plays another role.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EMyLpGXI5s4",
    "title": ".out Files are the same on Soild Peplinski (B-Scan)",
    "original_post": {
      "author": "Luis Eduardo Quibano Alarcon",
      "date": "Mar 31, 2018, 12:55:00PM",
      "content": "Hello GprMax Users!!!! i've been using GprMax since a couple of months and  working on soil peplinski models. I've got a doubt accordong to .out files.\n\nI understand how permitivity varies accoring to Ps, Pd, S, C, and Mu;  I created a simulation with and without a pec box of 2.5cm buried at 30cm.\n\nI made a B-SCAN with 8 traces of each simulation in order to substract the pec box  reflection in each trace.  When i check the substraction signal at Ez field,  time reflection are alike in each traces . \n\nI think that time reflection must be different in each trace because there are some points among domain where humidity are different, so permitivity must be different.\n\nThis is the code that i'm using:\n\n\n#title: Heterogeneous Soil\n#domain: 0.5 0.5 0.5\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 20e-9\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole:  z 0.05 0.25 0.40 my_ricker\n#rx: 0.1 0.25 0.40\n#src_steps: 0.05 0 0\n#rx_steps: 0.05 0 0\n#soil_peplinski: 0.1 0.9 2.0 2.66 0.24 0.25 my_soil\n#fractal_box: 0 0 0 0.5 0.5 0.35 1.5 1 1 1 10 my_soil my_soil_box 1\nbox: 0.0 0.0 0.025 0.5 0.5 0.05 pec\nadd_grass: 0 0 0.35 0.5 0.5 0.35 1 0.001 0.4 10000 my_soil_box 1\n#geometry_view: 0 0 0 0.5 0.5 0.5 0.002 0.002 0.002 heterogenPaper n\n\nAccording to the previous code, i expect the signal of the pec box is arround 8ns\n\nI was checking the GprMax code , and the file Materials.py   defines a  class PeplinskiSoil to calculate permitivity, but it seems to calculate a general permitivity according to parmeters of the soil that i define.   is There any parameter  that i could use to get more information of the reflected signal at specific point?\n\n\nI attached a .zip where there are some .out files \n\nThank you so much!!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 3, 2018, 7:14:31AM",
        "content": "Hi Luis,\n\nWelcome to the forum!\n\nA few observations about your model:\n\nThe range you are using for the volumetric water content in your Peplinski soil model is very small, 0.24-0.25, therefore the materials generated will have very similar dielectric properties. You can see this in the table of materials that is output when gprMax runs. So allow you get a fractal distribution of these properties the range is so small it will look practically homogeneous.\nHaving run the geometry and a single A-scan from your model, the result seems reasonable (see attached plots). You need to alter the scale on the A-scan so you can see the reflection from the pec, as by default it will be swamped by the magnitude of the direct wave.\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Yq0Hy_nQpnY",
    "title": "how to make models smaller",
    "original_post": {
      "author": "Michael Fehér",
      "date": "Mar 12, 2019, 12:43:12PM",
      "content": "Dear All,\n\nI'm Micha, I'm trying to simulate some B-sans of \"real\" situations.\n\nI want to use a GSSI 400MHz Antenne at 55ns.\nThen I want to create B-scans of 200 A-scans with 2 cm trace-increment.\n\nfirst 2mm dx dy dz I'll need about 2.40m x-dimention, 0.42m in y and about 2.50 m soil + 23 cm air.\n\nthis is a huge model - it takes about 24Gig of RAM and a computing-time of approx 500 min per A-scan at mij 2x3.3 GHz CPU.\n\nbut 2mm increment is notreally nessessary. 5mm schould be good enough.\n\nVia trial-and-error I came behind, that increasing the y-incement would lead to useless output of a flat A-scan\nIncreasing all values of dx, dy and dz leads to an error-message that the PCB lower values should be smaller than the upper values, wich they are.\n\nI see no further options to reduce the amount of computing steps.\n\nor am I blind?\n\n\nDo you mind to provide options to decrease the model?\n\n- GSSI 400Mz\n- 200 A-scans of 55ns at eps=9 (2,5m soil)\n\n\nmany thanks in advance.\n\n\nKind regards,\n\nMicha"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2019, 5:21:52AM",
        "content": "Hi Michael,\n\nThere is no easy solution to your problem. The size in your model is determined by the physical size of the domain and the spatial resolution. Obviously the domain size is usually based on the problem you are investigating. The spatial resolution is determined based on being able to resolve geometrical details in your model with sufficient accuracy, and avoiding numerical dispersion. The latter means that the spatial resolution is calculated based on the highest frequency of interest in the model and the material with the highest permittivity (smallest wavelength). As a rule-of-thumb the smallest wavelength should be resolved by at least 10 cells to mitigate the effects of numerical dispersion. For a brief guide read our docs - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nWhen you include an antenna model in your simulation you typically need to accurately model all the fine details of the antenna structure. That is why antenna models typically require spatial resolutions of 1 or 2mm (you cannot use them at resolutions beyond what is indicated in the docs - http://docs.gprmax.com/en/latest/user_libs_antennas.html#information). In your case, the requirements to model a relatively low frequency antenna (400MHz) and the typically large domain that would be used for problems involving this antenna, mean the computational requirements are large. The is fact of using the Finite-Difference Time-Domain (FDTD) method with a fixed spatial resolution. This is no easy way around this! One solution that we are working on is to implement sub-gridding which allows different parts of the domain to use different spatial resolutions. For example, this would permit the antenna model to use a spatial resolution of 1mm and the rest of the grid to use 6mm. However, this is not a trivial task, you can read more about the work here - https://ieeexplore.ieee.org/document/8441677/\n\nSo I would ask yourself if you really need to be using an antenna model in your simulations (especially for lower frequency applications), and if you can reduce the domain size of your problem.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/w4u8BD5GfOA",
    "title": "Why the amplitude would be changed with frequency?",
    "original_post": {
      "author": "Yuchen Wang",
      "date": "Dec 12, 2018, 9:02:58AM",
      "content": "Hello, everyone\n  I have a question when I was conducting my stepped-frequency CW radar experiment. \n  I only changed frequency at the same setting, but the amplitude of current density J (I set the scaling of the maximum amplitude of the waveform is 1) seems would changed with frequency. \n  I use reactive current J=ω*ε0*Ez to re-calculate J, where Ez is measured Amplitude multiplied by cubic grid.\n  Following are my code and results.\n\n         gprMax code\n#title: Free Space\n#domain: 3.00 4.25 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 4240\n(only change frequency: 800MHz 1GHz 2GHz) #waveform: contsine 1 8e8 mypulse\n#hertzian_dipole: z 1 1 0 mypulse\n#rx: 1 1 0\n\n\n\n        matlab code\nEz=h5read('amp800M.out','/rxs/rx1/Ez');\nf=8e8;\ndxyz=0.005;\nepsilon_0=8.854187817e-12;\nomega=2*pi*f*epsilon_0;\nfigure\nplot(y*dxy*omega);\ntitle('800MHz')\n\nThank you for your answers!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 12, 2018, 10:46:04AM",
        "content": "Hi Yuchen,\n\nIf you look at the docs for the definition of the 'continue' waveform (http://docs.gprmax.com/en/latest/plotting.html#contsine), you will see that the ramp function that is used to ensure a smooth start to the waveform contains a frequency term. This is why the amplitude is different for different frequencies.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yuchen Wang",
        "date": "Dec 12, 2018, 10:32:31PM",
        "content": "Thank you Craig,\n\nBut just as the definition, if R>1, then R=1. Shouldn't all these amplitudes equal to 1 at different frequencies when the waveform stabilized?"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 13, 2018, 6:13:18AM",
        "content": "Hi Yuchen,\n\nYou are right about the waveforms. They ramp up to 1 oner a few cycles of the underlying excitation frequency. That is why the frequency is used in the ramp calculation. The problem is your calculation of reactive current. There is no structure in a hertzian dipole source. It is a theoretical point source and in essence you prescribe the current in this small dipole (see the definitions in the manual). The accuracy of this model is OK once you are few cells away from it as the analytical solutions show. It is an approximation of a theoretical source and not a real antenna. Your EZ should be the same in amplitude but different in frequency at the source point you are measuring this.\n\nAntonis"
      },
      {
        "author": "Yuchen Wang",
        "date": "Dec 13, 2018, 10:22:48PM",
        "content": "Thank you Antonis,\n\nI get it. But if I use voltage_source far away from receiver, the same phenomenon will occur as shown below. Actually, I need to know the source and receiver amplitude of Ez at each frequency in my experiment. Could you give me some advice? Thanks.\n\n#title: Free Space\n#domain: 3.00 4.25 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 4240\n#waveform: contsine 1 2e9 mypulse\n#voltage_source: z 1 1 0 0 mypulse\n#rx: 2 1 0"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 14, 2018, 7:49:42AM",
        "content": "Hi Yuchen,\n\nYou need to understand how FDTD works and what are the excitation and output options. \n\nThe voltage_source excitation prescribes an electric field component at some point in the model. This is useful as an excitation mechanism if we want to model a real antenna. Using this on its own it does not make much sense and in this case a theoretical point source such a  hertzian_dipole is better. The output of your model is a sample in time of an electric field component. If you model an antenna structure then this field component at the gap of the antenna where the received voltage is supposed to be sampled will give you a representation of this received voltage. In other cases where is just an output point what you have is just the variation of the field there. You have the amplitude of it already.\n\nIn case of pulse excitation you can get the information via the FFT for every frequency you want. If you excite single frequencies it will take much longer and you can get this information from the steady state response once reached. \n\nIf you use a hertzian dipole source you excite the current of this infinitesimal small dipole that has a DL length. If you use a voltage source you prescribe the voltage variation and if there is no source resistance this is a hard source (i.e. replaces the field component with what you prescribe it to be). \n\nComparing these with what a real antenna structure will give you will not be much help in a quantitative way.\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/i1DXjoT3Tos",
    "title": "How to use stepped frequency in gprMax?",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "May 31, 2019, 5:17:23AM",
      "content": "Hi everyone:\n                                   I wonder how to use stepped_frequency when simulate using gprMax, does anybody have tryed successfully?\n Kind regards            \n    Dongyang"
    },
    "responses": [
      {
        "author": "Ikechukwu",
        "date": "Jun 1, 2019, 2:36:32PM",
        "content": "Hi Dongyang,\n\nCheckout this conference paper \"Target Detection in SFCW Ground Penetrating Radar with C3 Algorithm and Hough Transform based on GPRMAX Simulation and Experimental Data\"  from https://doi.org/10.1109/IWSSIP.2018.8439227.\n\nThanks\nIkechukwu"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 3, 2019, 4:39:00AM",
        "content": "@Ikechukwu, thanks for the link. Obviously gprMax is based on FDTD which is efficient for impulse driven GPR. The paper doesn't explicitly describe how they are exciting the antenna for SFCW. I suspect they are running a new model for every frequency and for every antenna position. This is not very efficient but works. There are more advanced 'tricks' you can play to run less models and improve efficiency but these require a very good understanding of the limitations of the FDTD method.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/O8eLDuBVkok",
    "title": "The gssi400Mhz antenna",
    "original_post": {
      "author": "shuai deng",
      "date": "Aug 6, 2024, 11:47:19AM",
      "content": "Dear professor:\n#title: B-scan tunnel\n#domain: 11 0.3 2\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 50e-9\n#material: 10 0 1 0 rock\n#material: 7 0 1 0 concrete\n#box: 0.0 0.0 0.0 11 0.3 1.5 rock\n#cylinder: 1.00 0.0 1.0 1.00 0.3 1.0 0.05 free_space\n#cylinder: 2.70 0.0 1.0 2.70 0.3 1.0 0.15 free_space\n#cylinder: 4.60 0.0 1.0 4.60 0.3 1.0 0.35 free_space\n#cylinder: 6.70 0.0 1.0 6.70 0.3 1.0 0.35 free_space\n#cylinder: 9.05 0.0 1.0 9.05 0.3 1.0 0.50 free_space\n#box: 0.0 0.0 1.0 11 0.3 1.5 concrete\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_400\nantenna_like_GSSI_400(0.20 + current_model_run * 0.01, 0.15, 1.5, 0.002)\n#end_python:\n#geometry_view: 0 0 0 11 0.3 2 0.01 0.01 0.01 tunnel n\nThe above is the in file I wrote. May I ask why there is an error message during operation?\nraise CmdInputError(\"'\" + ' '.join(tmp) + \"'\" + ' the lower coordinates should be less than the upper coordinates')\ngprMax.exceptions.CmdInputError: '#box: 0.092 0.028 1.51 0.168 0.27 1.512 pcb' the lower coordinates should be less than the upper coordinates\nI checked all my coordinates, and they're all in the right range"
    },
    "responses": [
      {
        "author": "Jorge Luis Alva Alarcon",
        "date": "Aug 9, 2024, 12:24:44PM",
        "content": "Hello,\nI am gprMax user. Let me give my opion. The line \" '#box: 0.092 0.028 1.51 0.168 0.27 1.512 pcb' \" is not in you code, so, it is inside the  antenna_like_GSSI_400 code?\nIf this is right, I think it is because the the domain size, maybe you can re-do another example with that antenna and start modifying that example.\nRegards,\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 9, 2024, 2:16:54PM",
        "content": "The antenna models can only be used with specific model resolutions - for the GSSI 400MHz its 0.5mm, 1mm or 2mm. You are using 10mm, so that is why you are seeing an error with the antenna model.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/WiIDvX67jnQ",
    "title": "Error in B scan",
    "original_post": {
      "author": "savita K.B",
      "date": "May 17, 2021, 5:05:30AM",
      "content": "HI\nI am getting error after giving this command.\npython -m gprMax user_models/cylinder_Bscan_2D.in -n 60\n\n\nHere is the code \n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec"
    },
    "responses": [
      {
        "author": "Robert Gallagher",
        "date": "May 17, 2021, 4:19:52PM",
        "content": "Hi,\n\nAre you trying to merge existing B scans or trying to run a model? \n\nI think you are trying to run a model and just have a typo in your file extension. From your screen shot it is looking for \"user_models/cylinder_Bscan_2D63.out\" which is the wrong file extension.\n\nKind regards,\nRob \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VjjrWpEWixs",
    "title": "Synthetic data",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Feb 22, 2024, 9:59:31AM",
      "content": "Dear Sir,\n\nCould you please tell me how can generate synthetic data using gpr max. \n\nI already watch the day 3 video but i cannot understand some parts. \n\nkind regards \nnawaeen"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yQHFApfKWcE",
    "title": "I have a question",
    "original_post": {
      "author": "larent",
      "date": "Apr 25, 2017, 4:39:16AM",
      "content": "Hello~\n Below is the model I designed, but as I am executing this code, an error message is found :\n'gprMax.exceptions.CmdInputError: '#plate: 0.201 0.06 1.004 0.219 0.061 1.004 pec' the plate is not specified correctly' <- message\n #title: GSSI_test\n#domain: 0.480 0.148 1.2\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 20e-9\n #material: 10 0.01 1 0 half_space\n#box: 0 0 0 0.480 0.148 1.0 half_space\n#sphere: 0.24 0.074 0.7 0.05 free_space\n #python:\nfrom user_libs.antennas import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.24, 0.074, 1.0, 0.001)\n#end_python:\n \nI didn't include the #plate command. I can't find why such message appears."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2017, 4:44:46AM",
        "content": "Hi Larent,\n\nWelcome to the forum! The plate is part of the GSSI antenna model that you are using. Your model has a spatial resolution of 2mm, yet you are trying to include the GSSI antenna model with a spatial resolution of 1mm. Therefore I suspect this is where the problem with the plate is coming from. The resolutions must match, so change 'antenna_like_GSSI_1500(0.24, 0.074, 1.0, 0.001)' to 'antenna_like_GSSI_1500(0.24, 0.074, 1.0, 0.002)'.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "larent",
        "date": "Apr 25, 2017, 4:58:55AM",
        "content": "Following your advice, the program is running. Thank you very much!!!\n It seems like I will use this forum very often."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/akNc1Zf6dmI",
    "title": "Plotting of antenna radiation pattern of single frequency",
    "original_post": {
      "author": "Murai",
      "date": "Oct 4, 2021, 5:02:49AM",
      "content": "Hello gprMax-uses,\n\nI wrote the code to see the radiation pattern of single frequency (xz, E-plane), refering to https://github.com/gprMax/gprMax/blob/master/user_libs/antenna_patterns/initial_save.py\n\nHowever, radiation pattern is tilted, and I'm stuck.\n\nI have attached the pictures (antenna model and s11 graph) and the code (dipole_antenna_E,in and plot_E_plane.py).\n\nI was wondering if you could tell me what is wrong with my code (plot_E_plane.py)\n\nBest regards,\nMurai"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 23, 2021, 6:56:48AM",
        "content": "Dear Murai,\n\nSuspect it is a coordinate/plotting problem....yes, I know its the obvious answer ;-) If I get some time I'll try and have a look at your code.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8sJ8pYYJNEM",
    "title": "Saving the B-scan images for post processing",
    "original_post": {
      "author": "Santhu Athidi",
      "date": "Jun 2, 2021, 2:05:59AM",
      "content": "Dear all,\n\nI want to create a database of 50 to 100 B-scan images of different scenarios with different objects for classification and detection purposes. Here my query is how to save the B-scan image obtained from each simulation, (everytime I have created one file in gprMax and Iam extracting B-scan image in matlab and I have applied gaussian as input and finally iam generating green's function after then I have applied some preprocessing for background removal , this is the B-scan image I need. Like this way I need to generate 50 to 100 B-scans  ) \nI have attached my code for reference. How to save the image obtained from imagesc plot, because I have to write 50-100 times for every B-scan."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 9, 2021, 3:22:43PM",
        "content": "There does not seem to be anything attached to this post.\n\nCraig\n\n"
      },
      {
        "author": "Santhu Athidi",
        "date": "Jun 10, 2021, 12:40:57AM",
        "content": "Sorry sir I thought of I have attached my code, now I'm attaching for your reference\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 10, 2021, 3:53:11PM",
        "content": "Still not sure exactly what you are asking.\n\nCraig\n\n"
      },
      {
        "author": "Santhu Athidi",
        "date": "Jun 10, 2021, 11:54:14PM",
        "content": "As I want to create a B-scan images database of 50 to 100, how to save the B-scan image obtained from 'imagesc' , after running 'imagesc' I got a figure window and I'm saving in either '.png' or'.jpg' but I thought of it is a wrong process because  while I am saving the image, the size is changed. (ex: in my data from 2048*130 to 560*420). \n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2021, 8:34:56AM",
        "content": "Why not just save a .mat file of the data you are plotting with imagesc?\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/AGiHPClVbq0",
    "title": "\"Sources will be stepped outside the domain\" ERROR, when they are not",
    "original_post": {
      "author": "Nils Steinau",
      "date": "Nov 18, 2021, 11:13:44AM",
      "content": "Dear gprMax community,\n\nI encountered a rather weird behavior, running the following input with the -n 60 option to create 60 traces.\n\nGeneral commands\n#title: smallTunnel_d2m_50MHz_Schiefer\n\nEssential commands\n#domain: 22.510422 7.910422 0.060261\n#dx_dy_dz: 0.060261 0.060261 0.060261\n#time_window: 3.540182e-07\n\nMaterial commands\n#material: 11.000000 0.001429 1.0 0.0 Schiefer\n\nObject construction commands\n#box: 0.0 0.0 0.0 22.510422 6.705211 0.060261 Schiefer\n#box: 10.755211 3.205211 0.000000 11.755211 4.705211 0.060261 free_space\n\nSource and output commands\n#waveform: ricker 1.0 5.000000e+07 my_pulse\n#hertzian_dipole: z 1.205211 6.705211 0.0 my_pulse\n#rx: 1.305211 6.705211 0.0\n#src_steps: 0.333333 0.0 0.0\n#rx_steps: 0.333333 0.0 0.0\n\nThe program stops with the error message \"GeneralError: Source(s) will be stepped to a position outside the domain.\" However, looking at the initial position of my source, its step size, and the number of traces I want, we see that\n\n1.205211 + 60 * 0.333333 = 21.205191,\n\nwhich is less than the size of the domain in x-direction 22.510422. Funny enough, if I switch to another material, e.g.\n\n#material: 10.000000 0.000333 1.0 0.0 Kalkstein\n\nI don't get an error and the program runs without a problem. Does someone know what is happening here?\n\nCheers,\nNils"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 8, 2021, 3:14:23PM",
        "content": "Dear Nils,\n\nThe error doesn't have anything to do with the different materials (at least not directly) - it is related to the spatial discretisation. Remember all your real coordinates must be (internally) converted into FDTD cells according to the spatial discretisation you specify. So your source/receiver step of 0.333333m will be converted into 0.333333/0.060261=5.5316 cells which will be rounded to 6 cells. So your source/receiver step is actually 6*0.060261=0.3616m. Therefore the distance your sources/receivers travel is 60*0.3616=21.696m + 1.205211m = 22.9012m which is > 22.510422m.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Nils Steinau",
        "date": "Dec 19, 2021, 8:41:35AM",
        "content": "Dear Craig,\n\nthank you very much for your reply! This was indeed the problem.\n\nI had a script that was adjusting the cell size according to the signal velocity of the medium, i.e. its relative electrical permittivity. This had put me on entirely the wrong track in my detective work.\n\nAll the best,\nNils\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/57dit_1UwMc",
    "title": "Custom Waveform",
    "original_post": {
      "author": "Leonardo C",
      "date": "Feb 23, 2017, 2:28:19PM",
      "content": "Hi all,\n\nI have some question regarding loading a custom waveform.\n\nLet us assume I define a function F(t) which I assume to be my electric field and I load it in gprmax by the following command:\n\n#excitation_file: my_waves.txt\n\nIn my understanding I shall use #voltage_source with resistance 0 to obtain an incident E field (i.e. the field radiated by the antenna) exactly equal to F(t), is this correct? (F(t) is just one given component of the E field as function of time). To make it more clear, If I run a simulation and I look at the cross-talk signal between Tx and Rx I should see exactly F(t). At the moment, the signal I see in the cross-talk is close to what I prescribe but not exactly the same.\n\nFor what pertains the sampling on the waveforms in my_waves.txt, I am assuming that gprmax, when running the simulation, is reading the waveform samples at a rate as specified in section 4.1.2 of the manual (i.e. delta_t as function of dx dy dz). Is also this correct?\n\nCheers and thanks for the great software!\nLeonardo\n\nps: Any clues on when #plane_wave command will be implemented?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 23, 2017, 5:42:08PM",
        "content": "Hi Leonardo,\n\ngprMax will read a waveform and assumed that is sampled with the Dt that the simulation uses. This might be improved in the future but at the moment this is what it is assumed. \n\nNow, what you will receive if you apply your own pulse waveform it depends on a number of things. \n\n1. A voltage source with zero resistance simulates a \"hard source\" by prescribing the electric field at a location specified. After your waveform has reached a zero amplitude it behaves as a small PEC structure as a pure metal means E=0. That is why is called a \"hard source\"\n\n2. A voltage source with resistance is a transparent additive source as it is implemented by adding an appropriate current source term (V/R). This is much more useful when exciting antennas.\n\n3. A Hertzian dipole is a little different than the voltage source with resistance as the pulse, in this case, represents the dipole moment variation of the infinitesimal antenna.\n\nWhat you will see at a receiving point very much depends on the geometry and on the type of the structure you excite as a source. If you do not model the structure of the antenna my recommendation is to use the Hertzian dipole source.\n\nThe #plane_wave command might take a little bit of time as we look into extending it to work on half-space problems as well and not just in free space.\n\nHope this helps!\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eYKpRixnM7w",
    "title": "Geometry Model of crack",
    "original_post": {
      "author": "Rym Ghozzi",
      "date": "Dec 8, 2016, 5:39:44AM",
      "content": "Dear others users,\n             I am using the new gpMax, which new features I like very much.\n      Would like to know, please, whether I could do a geometric model of crack using GprMax. As shown in the attached picture.\n      Thank you in advance for your answer.\n\nWarmest regards,"
    },
    "responses": [
      {
        "author": "Hugo Day",
        "date": "Dec 8, 2016, 6:34:56AM",
        "content": "Dear Rym,\n\nAt it's most basic you could define a series of boxes representing the crack cross-section. If you have a way of modelling the line in (x,y) coordinates you could take advantage of the python scripting in the inputfile.\n\nHugo"
      },
      {
        "author": "Rym Ghozzi",
        "date": "Dec 8, 2016, 10:14:19AM",
        "content": "Hi Hugo,\n\n Ok , I will try it.   I thank you for your answer."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-jlAU6sC0Zg",
    "title": "Contributing towards the idea of an AI Chatbot for support",
    "original_post": {
      "author": "Akash Rai",
      "date": "Mar 16, 2024, 6:52:25PM",
      "content": "Hey, I'm Akash Rai and currently pursuing my BEngg from NMIT, Bangalore and I wanted to contribute towards the idea of an AI Chatbot for support as I believe I have the skillset required while creating LLM-based chatbots as I've done many projects and hackathons revolving around LLMs and currently doing an internship at DeepLogicAI regarding LLM based RAG application. Thus I wanted to contribute towards the project, so can you guide me through the initiation of the project? \nIf needed I can share my resume and the qualifications, looking forward to getting onto the project as quickly as possible and contributing towards it.\nThank You."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4nkWOvaJ0d4",
    "title": "about the formula for conductivity of soil_peplinski in Materials.py",
    "original_post": {
      "author": "yang kun",
      "date": "Jul 30, 2020, 4:11:27AM",
      "content": "Hi,Gprmax's team:\n       I have analyzed the conductivity formula of PeplinskiSoil in your Materials.py module, and the code is the follow. But, I don't see the conductivity formula on http://dx.doi.org/10.1109/36.387598, in where the soil model centered on the derivation of dielectric constant unfolding, I want to know how to evaluate the electrical conductivity of soil just like the soil conductivity formula in your code. \n       In addition, after I established the peplinski soil model, since the dielectric constant range of soil is very close to that of my target, the echo signal is very weak. I want to know how to obtain the target echo effectively in the peplinski soil model.Here is my input file.\n\n\npart of code:\n\n# Permittivity at infinite frequency\neri = er - (muiter[0]**(b2 / a) * Material.waterdeltaer)\n\n# Effective conductivity\nsig = muiter[0]**(b2 / a) * ((sigf * (self.rs - self.rb)) / (self.rs * muiter[0]))\n\n\n\nmy input file:\n\n#python:\nfrom gprMax.input_cmd_funcs import *\na=0\nfor i in range(1, 1061):\n     a=a+10\n     snapshot(0,0,0,1.2,1,0.002,0.002,0.002,0.002,a,\"snap\"+str(i))\n#end_python:\n\n\n#domain: 1.2 1 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 50e-9\n\n\n\n#waveform: ricker 1 1e9 my_ricker\n#hertzian_dipole: z 0.580 0.950 0 my_ricker\n#rx: 0.620 0.950 0\n#src_steps: 0.006 0 0\n#rx_steps: 0.006 0 0\n\n#material: 10 0.001 1 0 concrete\n#soil_peplinski: 0.5 0.5 2.0 2.0 0.001 0.2 my_soil\n#fractal_box: 0 0 0 1.2 0.9 0.002 1.5 1 1 1 50 my_soil my_soil_box 10\n\n\n#cylinder: 0.600 0.360 0 0.600 0.360 0.002 0.240 concrete"
    },
    "responses": [
      {
        "author": "Iraklis Giannakis",
        "date": "Aug 24, 2020, 8:48:19AM",
        "content": "Hi Yang,\n\nThe paper you are referencing outlines the semi-empirical model. The conductivity discussed in the paper is the effective conductivity and not the conductivity that we implement in FDTD. The semi-empirical model can not be directly implemented into FDTD. We need to approximate it with an extended Debye model, i.e. we need to find the best conductivity and Debye pole that fits the semi-empirical model. We use an analytical approach to approximate it and derive the conductivity formula you see in the code. You can find more regarding the approximation at my thesis pp. 118-120 \n\nhttps://era.ed.ac.uk/handle/1842/20449\n\nYou can find additional info at this youtube video that I discuss about it \n\nhttps://www.youtube.com/watch?v=DfHuRxfp7ec&t=1500s\n\nIraklis"
      },
      {
        "author": "yang kun",
        "date": "Sep 20, 2020, 8:24:15AM",
        "content": "Thank you. I have attended your online meeting before. Unfortunately, my listening is not good and I didn't notice the details. I will study the article you provided to me and thank you again"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/O7ECsXA8ao4",
    "title": "HDF5 to Rd3/ Rad Matlab Script",
    "original_post": {
      "author": "Dimitrios Angelis",
      "date": "Mar 11, 2018, 4:12:45PM",
      "content": "Hello everyone!\n\nThis is a Matlab script that converts the HDF5 merged output of gprMax to Rd3/Rad files.\n\nSome information about the script:\n1. You will be asked to provide the information about the Tx Rx distance and the trace step.\n    This is because the HDF5 merged file doesnt include these parameters.\n\n2. There are some code lines that are optional, such as data scale and resample.\n     I usually perform the resample part (either 512 or 1024) because the FDTD method produces many\n     samples especially if you have a small discretization step in your model. Many samples mean very\n     slow processing procedure. Furthermore, some times programs such as MALA'S Ground Vision 2 cant\n     load files with so many samples.\n\n3. Lastly, I included in the script some code lines for plots, Bscan and Frequency spectrum in case\n    you just want to check your data fast.\n\nKind Regards,\nDimitris"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 11, 2018, 7:31:43PM",
        "content": "Thanks Dimitris, \n\nThis could be very useful to a number of people that use other tools to process GPR data and they want to import gprMax traces in them. We can review and add this to our MATLAB script library if you want.\n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2018, 5:26:01AM",
        "content": "Thanks Dimitris. If you can submit this as a pull request via Github, then we can review and add to gprMax - https://github.com/gprMax/gprMax/pulls\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/w36D9fRLv8Y",
    "title": "Where is TIme Zero Position in gprMax?",
    "original_post": {
      "author": "Zacharias",
      "date": "Jan 8, 2018, 7:31:57AM",
      "content": "Hello there,\n\nI have created a model by means of gprMax, the input file of which contains the following commands:\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n#title: B-scan from an iron rod of 1cm radius buried in sand in 30 centimeter depth\n\n#domain: 5 3 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 30e-9\n\n#material: 3 0.01 1 0 sand\n\n#waveform: ricker 1 6e8 my_ricker\n#hertzian_dipole: z 0.1 2.5 0 my_ricker\n#rx: 0.2 2.5 0\n#src_steps: 0.025 0 0\n#rx_steps: 0.025 0 0\n\n#box: 0 0 0 5 2.5 0.005 sand\n#cylinder: 2.5 2.19 0 2.5 2.19 0.005 0.01 pec\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nYou will also find attached a picture of the Ascan when transceiver is exactly above the cylinder shaped target and a picture of Bscan. The index of x-coordinate of this position is 95 if we start counting from 1. \n\nI have used the hyperbola fitting technique in order to estimate the propagation velocity in the medium, in this case in sand.The intention of this is to compare the estimated velocity from hyperbola fitting with the theoretical one that derives from the relation v = c/sqrt(er). In order to do this, I need the coordinates of hyperbola in (x, t), where x is the horizontal axis of Bscan (GPR's moving direction) in meters (m) and t is the vertical axis of Bscan in seconds (s). The problem is that I have to pick a time from the reflected pulse with respect to a time zero reference. That could be t=0 or that time position that refers to the reflection of the ground surface. I do not know which one could be the correct.\n\nAnother problem is that If the first pulse we see in the picture corresponds to the direct wave travels through the air from transmitter to receiver, where is the reflection from ground surface? In the paper \"Where is True Time Zero?\" the first pulse is addressed as the ground surface reflection, so the process following that accounts for this assumption. Namely, if you choose as time zero reference the time corresponds to the maximum positive value of the first pulse, then, if the polarity of the reflected pulse of target remains the same with the first pulse, you as well have to choose the time of the maximum positive peak of the pulse. Likewise, if the polarity is reversed, you have to choose the time of the maximum negative peak of the pulse.\n\nWhat is the case in the gprMax model I have created?\n\nI have tried 2 versions of time zero reference:\n\n1. I assumed that the first pulse concerns the ground surface reflection, so I chose as time zero position the time of maximum negative peak of the first pulse. Subsequently I picked from the target reflected pulse the time of maximum positive peak because the polarity has changed. With these given, the hyperbola fitting technique for a known cylinder's radius (r = 0.01m) yielded an estimated velocity of v_est = 1.895e8 m/s , when the theoretical is calculated as v_ther = c/sqrt(er) = 3e8/sqrt(3) =  1.732e8 m/s. The time coordinate of the apex of hyperbola was estimated as t_apex = 3.10164 ns. The corresponding depth of the cylinder was calculated through the relation: depth = t*v_est/2 = 0.29388039 m , which is very close to the real value of depth which is 0.3 m or 30 cm.\n\n2. I assumed as time zero position the t = 0 s. The velocity by means of hyperbola fitting was estimated as v_est = 1.731 m/s, very close to the theoretical one (v_ther = 1.732e8 m/s). The time of hyperbola's apex was estimated as t_apex = 4.09228 ns . This leads to a depth equal to 0.354186834 m which incorporates a greater error than the previous version. What is happening? Why this divergence?\n\nWhat would your choice be for time zero position and what time position would you pick for the hyperbola's apex of this exact model?     \n\nSorry for size of the message, but I found it difficult to explain myself as clearly as possible.\n\n\nBest Regards,\n\nZacharias"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 18, 2018, 4:57:33AM",
        "content": "Hi Zacharias,\n\nSorry for the delay in responding, I just haven't had time to look into your issue. Your explanation is very clear. Here are a few initial thoughts:\n\n- The first part of the response you see in the A-scan is a combination of the direct wave (from transmitter to receiver) and the reflected wave from the ground. You can (in the model) raise the source and receiver off the surface of the ground which will allow you to see (and separate) these two waves.\n- As you have read in the paper by Richard Yelf, there are many different approaches to choosing time zero, and not one correct method.\n- I think the first approach you have mentioned seems reasonable.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Zacharias",
        "date": "Jan 18, 2018, 10:17:13AM",
        "content": "Hello again,\n\nthanks for the response!\n\n- Regarding the first part of the response:  I run some models with different gpr-ground offsets and I verify the fact that the first pulse is a combination of the direct and ground wave, and I also realized that the ground wave's influence to the field strength of the compound wave is small in comparison with the direct wave's.\n\n- The first approach of time reference seems to lead to an estimated velocity (by means of hyperbola fitting technique) that diverges quite enough from the theoretical one, while the second leads to an estimated velocity very close to the theoretical one. I still can not figure out which is the right one, but I slant towards the second one."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 18, 2018, 10:33:53AM",
        "content": "Hi Zacharias,\n\nThe obvious time zero in a numerical simulation is the beginning of the simulation at t=0. This is a lot less ambiguous than the actual time zero at a real GPR system which although can be  similarly defined it is harder to establish and record. The problem arises when you need to pick responses for estimating time of arrival and the shape of hyperbolae. If you use the actual time zero then you cannot pick as arrival time the one that corresponds to the maximum of the waveform but you must pick the time of the onset of the response when its amplitude is really very small. This is a difficult process even in a simulation and extremely tricky and error prone on real GPR data. It is clear to see why this is the case as the gprMax model response is rising very slowly from a low value towards its peak. In a model you can try and correct for this by calculating the time delay to the first maximum of the feeding waveform and use this in your calculation to adjust the time zero. I think this will help. However, in real GPR you do not have this ability. If you move your t_apex in your second option to the correct value then both velocity and depth will be OK. \n\nTime zero is a rather interesting topic for real data and a model can help illustrate some pitfalls but it will be better using a proper antenna model as all other near field effects are included. Obviously, the assumptions inherent in hyperbola fitting etc. do not take into account the presence of near field effects that are especially important for very shallow depth targets. So, in essence this approach will work but not perfectly when the targets get too close. The further away they are the better.\n\nHope this helps you to understand a bit better the problem. The key is to experiment and be critical of analysing your responses and you will get interesting and hopefully useful results.\n\nRegards\n\nAntonis"
      },
      {
        "author": "Anadyr",
        "date": "Oct 6, 2020, 8:22:29AM",
        "content": "Just to understand how one could deal with the time zero problem.\nWould it make sense to run the same script for simulation again removing the cylinder?\n\nSo you get 2 <file>.out results.\n\nresult_normal.out\nresult_air.out\n\nLoading the data from those files and subtracting the air simulation from the normal simulation, like:\n\nelectro_field = electro_normal - electro_air\n\nand then I would work with the electro_field only. To me this makes sense because I can remove the direct coupling Tx -> Rx and the first reflection wave coming from the first surface.\nAre there any arguments this speak against this method?\n\nThanks a lot for your replies."
      },
      {
        "author": "Anadyr",
        "date": "Oct 6, 2020, 8:24:29AM",
        "content": "Sorry guys,\n\nI have made I mistake: I wrote air but what I meant is that the simulation enviroment is made of air and box. Only the cylinder is removed.\n\nSorry for the misunderstanding"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OS-cW7qDuUk",
    "title": "Issue with Importing Custom Antenna Model and Source Placement in gprMax-devel",
    "original_post": {
      "author": "Léa Mercier",
      "date": "Sep 6, 2024, 4:18:12AM",
      "content": "Dear gprMax team,\nI am a Phd currently working with a custom antenna model that I’ve created in CAO and imported it into gprMax using the STL import functionality from the gprMax-devel version. I have included the .h5 files and corresponding material text files as attachments.\nI have tried two approaches for setting up the source and receiver with my custom antenna:\nBy creating the antenna directly within the Python script.\nBy importing the antenna via a library, similar to how the GSSI antenna is imported.\nIn both cases,  the visualization in ParaView always appears correct, with the transmitter (Tx) and receiver (Rx) positioned as intended. The simulation runs without errors, but the resulting .h5 file contains only zeros, despite the setup appearing fine.\nFor both cases , I am attaching the following:\nThe .h5 output files,\nPng for the visualization\nThe Python scripts for the simulation setup,\nAs well as the script for importing the custom antenna via the library.\nAdditionally, I tested my custom signal by using it as input on the GSSI antenna model, and it worked perfectly. This leads me to believe the issue may be related to how I am placing the source on my custom antenna or the method I’m using for setting it up.\nCould someone please help me troubleshoot this issue?\nThank you for your time and support.\nBest regards,\nLéa Mercier"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 10, 2024, 11:14:04AM",
        "content": "Hi Léa,\n\nI've downloaded your files and will try to take a look when I have some time.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/tur25352AuY",
    "title": "Installation problem",
    "original_post": {
      "author": "Volkan Özcan",
      "date": "Feb 8, 2017, 8:29:59AM",
      "content": "Hello,\n\nFirst of all I would like to thank everyone who worked on this program.\n\nI am unable to install the program to an 64 bit PC. \n\nAfter the command \"python setup.py build\" I receive the error;\n\nbuilding 'gprMax.fields_update' extension\nerror: Microsoft Visual C++ 14.0 is required. Get it with \"Microsoft Visual C++ Build Tools\": http://landinghub.visualstudio.com/visual-cpp-build-tools\n\nWhen I try to install the mentioned software from Microsoft's website, it also fails because \"Visual Studio 2015 is already installed on this machine\". \n\nMy VS 2015 is up to date. I also installed Microsoft Build Tools 2015 Update 3 but nothing changed.\n\nI do not want to uninstall my VS 15 since I use it.\n\nIt would be great if you could help me with installation. \n\nHave a nice day,\n\nVolkan Özcan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 9, 2017, 5:40:07AM",
        "content": "Hi Volkan,\n\nWelcome to the forum!\n\nI can't really offer much advice on solving your problem. In my experience the different versions of Microsoft Visual Studio (MSVS) on Windows is a bit of a nightmare! I think the reason you are seeing that error is that you must use the same version of MSVS to build modules that was used to build Python on your machine. You can check what this by starting the Python interpreter. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Hugo Day",
        "date": "Feb 23, 2017, 6:33:11AM",
        "content": "Dear Volkan,\n\nI had some similar experiences, for me the solution was to ensure I was running with sufficient permissions during the install. Try running this through the cmd line as an admin. If not, as Craig mentioned try rebuilding python (FYI, my install began with the latest anaconda distribution and then installed the VS build tools under admin permissions. It's a 64 bit machine so there should be no limit there). Hope that helps!"
      },
      {
        "author": "Volkan Özcan",
        "date": "Feb 23, 2017, 6:40:12AM",
        "content": "Hello, thank you for your help. I already handled my problem. I thought I posted the solution here but now I realize that I only sent it to Mr. Warren.\nLet me copy paste my solution incase someone else needs it, \n\nHello,\n\nProblem is solved by installing the required component through Visual Studio Update Tool. Its explained in detail here,\n\nhttp://stackoverflow.com/questions/38949519/error-while-installing-lxml-through-pip-microsoft-visual-c-14-0-is-required\n\nBest wishes,\n\nVolkan Özcan"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yk-eVjWrt1c",
    "title": "plane wave",
    "original_post": {
      "author": "Hamed Qorbani",
      "date": "Jan 26, 2023, 5:20:06AM",
      "content": "Hello dear gprmax team.\n\nIs there any way we can add a plane wave to our model?\n\nThere is some tips in docs points There was the ability to use plane wave in old versions.\n\nIf it's possible could you help with #plane-wave commands, please? Because it's not explained in website docs.\n\nThanks for your cooperation.\n\nSincerely.\nHamed Qorbani"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 26, 2023, 10:35:03AM",
        "content": "Hi Hamed,\n\nThere is no plane wave source in gprMax at the moment. For free space applications is a feature that will be added in the next version.\n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sk-xZ4c6d5c",
    "title": "PhD opportunities with gprMax team",
    "original_post": {
      "author": "Craig Warren",
      "date": "Dec 2, 2022, 9:35:07AM",
      "content": "There are currently two great Phd opportunities working with the gprMax team (http://www.gprmax.com) in the following areas:\n\n1. Developing advanced tools & processing for planetary GPR at Northumbria University supervised by Dr Craig Warren. This project is funded by the Northumbria University Centre for Doctoral Training on Data Intensive Science. For more information and to apply - https://www.findaphd.com/phds/project/planetary-subsurface-exploration-using-ground-penetrating-radar-developing-data-intensive-processing-methods-and-advanced-numerical-tools-for-multi-offset-measurements-advert-ref-nudata23-mce-warren/?p151832. \nPlease note the closing date is 31/01/2023. For informal enquiries please email or message Craig.\n\n2. Novel Near Surface Geophysics processing & machine learning frameworks for assessing the health of trees at the University of Aberdeen supervised by Dr Iraklis Giannakis. This project is a CASE award and part of the QUADRAT Doctoral Training Partnership. For more information and to apply - https://www.findaphd.com/phds/project/quadrat-dtp-case-applications-of-near-surface-geophysics-to-forestry-and-arboriculture/?p147456 \nPlease note the closing date is 09/12/2022. For informal enquiries please email or message Iraklis."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-bXQ-ltjhm0",
    "title": "Enquiry something about big model simulation",
    "original_post": {
      "author": "Kun Zeng",
      "date": "Feb 28, 2016, 8:25:36PM",
      "content": "Hello\n\nI have used gprMax for several years and now I use the new version to do some simulation. However, my model is little big and the simulation time is too long. I want to know what I can do to improve my input file to reduce the simulation time.\n\nMy input file is as followed:\n\n#num_threads: 20\n#title: circle4\n#domain: 2.0 2.0 3.2\n\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 40e-9\n\n#material: 3 0.01 1 0 my_sand\n\n#box: 0 0 0 2 2 3.1 my_sand\n#sphere: 1.0 1.0 0.3 0.25 pec\n\n#python:\nimport math\nprint('#waveform: ricker 1 150e6 my_pulse')\nprint('#hertzian_dipole: x {} {} 3.1 my_pulse'.format(0.98 + 0.4*math.cos(2*math.pi*(current_model_run - 1)/number_model_runs), 1.0 + 0.4*math.sin(2*math.pi*(current_model_run - 1)/number_model_runs)))\nprint('#rx: {} {} 3.1'.format(1.02 + 0.4*math.cos(2*math.pi*(current_model_run - 1)/number_model_runs), 1.0 + 0.4*math.sin(2*math.pi*(current_model_run - 1)/number_model_runs)))\n#end_python:\n\nAnd after simulation, what should I do to make the reflection of the sphere more obvious? I removed the direct wave but the result is not obvious.\n\nThank you very much for your help."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 29, 2016, 9:11:43AM",
        "content": "Hi Kun,\n\nThe speed of your simulation largely depends on the number of cells in the model and the length of the time window. These in turn are governed by the problem you are investigating. \n\n1. Your source, receiver and sphere are either too close to, or in the PML region. The PML is by default 10 cells thick and you should aim to keep sources, receivers, targets etc... at least a further 10 cells from the PML. So in your case with a dx=dy=dz=10mm, you should keep them 200mm from the edges of the domain. \n\n2. You can run simulations with and without the sphere and take the difference of the output to see the reflection from the sphere.\n\n3. You have a pulse of centre frequency 150MHz so avoid numerical dispersion in your model the spatial discretisation should be less than ~38mm. Since your sphere has a diameter of 500mm I think you could increase the spatial step you are using to say 20mm. Do a quick comparison of the different spatial resolutions to check.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Kun Zeng",
        "date": "Mar 9, 2016, 8:41:34PM",
        "content": "Hi Craig,\n\nThanks for you reply and answer. I try again following your advice, but there is an error that I can not run the simulation:\n\nmy new input file as followed:\n\n#num_threads: 8\n#title: circle5\n#domain: 2.0 2.0 3.6\n#dx_dy_dz: 0.02 0.02 0.02\n\n#time_window: 40e-9\n\n#material: 3 0.01 1 0 my_sand\n\n#box: 0 0 0 2 2 3.2 my_sand\n#sphere: 1.0 1.0 0.4 0.25 pec\n\n\n#python:\nimport math\nprint('#waveform: ricker 1 150e6 my_pulse')\nprint('#hertzian_dipole: x {} {} 3.2 my_pulse'.format(0.98 + 0.5*math.cos(2*math.pi*(current_model_run - 1)/number_model_runs), 1.0 + 0.5*math.sin(2*math.pi*(current_model_run - 1)/number_model_runs)))\nprint('#rx: {} {} 3.2'.format(1.02 + 0.5*math.cos(2*math.pi*(current_model_run - 1)/number_model_runs), 1.0 + 0.5*math.sin(2*math.pi*(current_model_run - 1)/number_model_runs)))\n#end_python:\n\nBut when I run the simulation, the code you can see in the pic.\nPlease help me find the mistake in my input-file.\nThank you very much.\n\nKun"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 10, 2016, 5:01:27AM",
        "content": "That error suggests you have some kind of illegal character in your input file. Have a look yourself, and if you can't spot anything then attach the input file here and we can have a check.\n\nCraig"
      },
      {
        "author": "Kun Zeng",
        "date": "Mar 14, 2016, 3:58:30AM",
        "content": "Dear Craig,\n\nThank you for your reply and I have find the illegal characters in my input file. And I run the simulation and remove the direct wave by using matlab code. However there are some abnormal areas in the radar image. My matlab code to remove the direct wave is as followed:\n\nfunction dbgr = removebgr(d,coef)\n[~, ntr] = size(d);\nbackgr = mean( d' )';\ndbgr = d - coef .* backgr * ones( 1, ntr );\nreturn\n\nPlease help check what should I do to deal with the problem. Thank you very much.\n\nKun"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 15, 2016, 9:29:40AM",
        "content": "Kun, \n\nIf you can post a sketch of the geometry with the sources and receivers, and the original radargram (without any processing), we will be better placed to offer some advice."
      },
      {
        "author": "Kun Zeng",
        "date": "Mar 16, 2016, 12:50:55AM",
        "content": "Dear Craig,\n\nThank you for you reply. You can find the geometry and radargram files in the attachment. The photo of the geometry only shows the model without the sources and receivers. I put the sources and receivers on the left surface of the sand box and along a circle with the 0.4m radius. And the circle center on the right above of the center of the sphere target. There are totally 180 messure points with 2 degree intervals. My input file is :\n\n#num_threads: 20\n#title: circle4\n#domain: 2.2 2.2 3.6\n#dx_dy_dz: 0.02 0.02 0.02\n#time_window: 50e-9\n\n#material: 3 0.01 1 0 my_sand\n#box: 0 0 0 2.2 2.2 3.2 my_sand\n#sphere: 1.0 1.0 0.6 0.25 pec\n\n#python:\nimport math\nprint('#waveform: ricker 1 150e6 my_pulse')\nprint('#hertzian_dipole: x {} {} 3.2 my_pulse'.format(0.98 + 0.4*math.cos(2*math.pi*(current_model_run - 1)/number_model_runs), 1.0 + 0.4*math.sin(2*math.pi*(current_model_run - 1)/number_model_runs)))\nprint('#rx: {} {} 3.2'.format(1.02 + 0.4*math.cos(2*math.pi*(current_model_run - 1)/number_model_runs), 1.0 + 0.4*math.sin(2*math.pi*(current_model_run - 1)/number_model_runs)))\n#end_python:\n#geometry_view: 0 0 0 2.2 2.2 3.6 0.02 0.02 0.02 circle4 n\n\nThank you for help me.\n\nKun"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 16, 2016, 5:53:27AM",
        "content": "Kun,\n\nHave you run the model without the sphere and subtracted that from the model with the sphere to see just the scattered field?\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hJwgTH8rHqA",
    "title": "Why are some fields not in the out file, when merged?",
    "original_post": {
      "author": "Anadyr",
      "date": "Oct 23, 2020, 2:52:53PM",
      "content": "Hi guys,\n\nI realized that if I run a script only once (one radar measure), then those fields are in the .out file:\n\nsrcsteps is the spatial increment used to move all sources between model runs.\nrxsteps is the spatial increment used to move all receivers between model runs.\nnsrc is the total number of sources in the model.\nnrx is the total number of receievers in the model.\n\nas here reported.\n\nBut, if you make more runs (passing the parameter -n) and you merge the .out files, then those fields are not more there?\n\nWhy?"
    },
    "responses": [
      {
        "author": "Anadyr",
        "date": "Oct 27, 2020, 7:00:12AM",
        "content": "Really any idea?\n"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 27, 2020, 12:13:28PM",
        "content": "These attributes are intentionally not kept when multiple output files are merged together, they only all exist (as specified in the docs) for individual output files. This is by design as it doesn't make sense for them to be in a merged file for all possible cases. You can of course add them back as you like, you'll find the relevant code at - https://github.com/gprMax/gprMax/blob/d34edb6dc70ac6d0e3ea307412a2d3417c95389d/tools/outputfiles_merge.py#L87\n\nKind regards,\n\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1cMUB8YaSsM",
    "title": "Low frequency",
    "original_post": {
      "author": "Emiliano Jose Alí",
      "date": "Jan 26, 2020, 12:43:31PM",
      "content": "Hello Everyone,\n\nI am having some issues regarding the simulation time for my model. I will highlight the main points and then ask the questions I have about it.\n\nVery small model, it's a PCB circuit in which the x and y resolution is around the 10s of microns and the z resolution has to be around the 100s of nanometers since it is just a very thin layer of gold.\nThe excitation signal is a square wave that can vary from 10s to 100s of kHz\nThe intention is to monitor the variation of electric field over time due to the excitation in the surface of the PCB\nObviously due to this specifications, the model works with long time windows and small spatial resolution, creating an absurd amount of iterations.\n\nMy question is, is there a solution/workaround for this kind of models using FDTD or should I try to find another method for this kind of simulations (if that is the case and you can recommend me one I would appreciate it)\n\nThank you very much in advance for your time.\n\nKind regards\n\nEmiliano"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 27, 2020, 4:47:59AM",
        "content": "Hi Emiliano,\n\nThe short answer is that FDTD is probably not the choice for you for this application. Small spatial resolutions and large time windows will always require a large number of iterations. As you know, FDTD is a volumetric technique with a specific stability criterion (the Courant-Friedrichs-Lewy condition) which means the time-step of the simulation is controlled by the spatial resolution. So the physical size, excitation frequency, and required spatial resolution will determine if your model is computationally feasible, i.e. without requiring extensive computational resources to run. \n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/eaVgETffnSs",
    "title": "Plugin error in ParaView",
    "original_post": {
      "author": "Dongyu Du",
      "date": "Apr 1, 2024, 8:19:17PM",
      "content": "Hello,\n\nRecently, I try to view the output of gprMax in ParaView. I import the macro in the ParaView. But when I run the marco, the error appears:\n\nI try it on both Mac and Windows and using the ParaView 5.12 and 5.10, but all the same error. Could you help me with this? Thanks!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:17:07AM",
        "content": "Can you confirm you are using the latest version of gprMax from the master branch?\n\nCraig"
      },
      {
        "author": "AISWARYA K P",
        "date": "Jun 18, 2024, 1:45:17AM",
        "content": "I too face the same issue. I am using updated gprMax and ParaView 5.12.1 version. Can you please help me in this. \nThank you in advance.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 18, 2024, 9:30:03AM",
        "content": "Can I have a few more details please. What file are you trying to use the gprMax Paraview macro on?\n"
      },
      {
        "author": "AISWARYA K P",
        "date": "Jun 19, 2024, 9:01:59PM",
        "content": "First of all, thank you for your response. I am trying to open snapshots from gprMax in vti format. \n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2024, 9:11:47AM",
        "content": "OK - so the gprMax macro is not required to view snapshots (.vti) files in Paraview. These can be opened directly, see our docs - https://docs.gprmax.com/en/latest/output.html#snapshots\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "AISWARYA K P",
        "date": "Jun 20, 2024, 8:54:26PM",
        "content": "Thank you for clearing my doubts\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xXuZJv7sPxI",
    "title": "LS 30 ECCOSORB material",
    "original_post": {
      "author": "xianyang gao",
      "date": "Nov 14, 2019, 11:07:43AM",
      "content": "Dear all,\n\nI am trying to use LS30 material in gprMax.\nI compared the LS30 3 pole Debye model with the LS30 datasheet (as attached) and found that only high frequencies were matched with the datasheet.\n\nAny matching evidence for matching the datasheet at about 1 GHz and below in gprMax?\n\nThank you very much\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 21, 2019, 5:46:40AM",
        "content": "Dear Xianyang,\n\nThe 3 pole Debye dispersion curve is fitted over the frequency range plotted in the figure. You are welcome to try using more poles to fit over a broader frequency band, or a use completely different fit for the frequency range you are interested in. We have not yet released the code we use to do the fitting as it needs some cleaning up, but I’m sure you can try your own.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vZhrNX8GLzM",
    "title": "gprMax gives a warning message when running on gpu.",
    "original_post": {
      "author": "Leonard Koh",
      "date": "Feb 18, 2021, 11:28:21PM",
      "content": "Hi All\n\ni get this warning message when running a bscan simulation on gpu. Also i notice that rthe simulation time is longer using gpu rather then my cpu when running the same simulation. Anyone know why this is happening?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 23, 2021, 11:49:29AM",
        "content": "Dear Leonard,\n\nThe CUDA compilers warning should have no impact, and indeed should disappear the second time you run that particular model. I am concerned that your GPU runtime is more than CPU - this should not be the case. What is your GPU? What are the specs of the machine you are using? Or just show us a screenshot of what gprMax detects for these.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Feb 24, 2021, 7:18:19AM",
        "content": "I've got such an error some weeks ago. installing cuda 10.1 solved the issue for me. the cuda-version was too recent.\n"
      },
      {
        "author": "Leonard Koh",
        "date": "Mar 3, 2021, 12:24:15AM",
        "content": "Hi \n\nThe gpu that i am currently using is GeForce GTX 1050\n\nRegards\nLeonard\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 6, 2021, 4:38:33PM",
        "content": "Dear Leonard,\n\nUnfortunately you are probably not going to get much performance benefit from your GeForce GTX 1050. The important metric for GPU performance with gprMax is memory bandwidth. Your GTX 1050 has either 84 or 112 GB/s. If you take a look at this GPU performance graph from our gprMax Twitter feed you can see the Tesla K80 which is the slowest on the graph. The Tesla K80 has a memory bandwidth of 288GB/s. So if your GTX 1050 is fitted to a machine with a decent multi-core CPU, then gprMax may well perform better is CPU/OpenMP mode than using the GTX 1050 GPU.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Leonard Koh",
        "date": "Mar 7, 2021, 5:22:10AM",
        "content": "Dear Craig\n\nThank you for your reply. My comptuer has CPU has this processor below:\n\n Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz\n\n Base speed: 2.80 GHz\n Sockets: 1\n Cores: 4\n Logical processors: 8\n Virtualization: Enabled\n L1 cache: 256 KB\n L2 cache: 1.0 MB\n L3 cache: 6.0 MB\n\n Utilization 21%\n Speed 2.10 GHz\n Up time 2:03:41:52\n Processes 257\n Threads 2798\n Handles 119014\n\nI guess the quad core is decent enough to not see much difference from  my GTX1050 gpu. Thank for your help.\n\nRegards\nLeonard\n\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/07aIadSwyOo",
    "title": "I have the following questions",
    "original_post": {
      "author": "jie wang",
      "date": "Apr 22, 2017, 5:31:56AM",
      "content": "#title: Railway Subgrade Model\n#domain: 0.2 0.1 0.4 \n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 6e-9\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.05 0.05 0.3 my_ricker\n#rx: 0.12 0.05 0.3\n\n\n#material: 9.0 0 1.0 0 soil\n#material: 8.0 0 1.0 0 bottom_soil\n#material: 6.0 0 1.0 0 surface_soil\n#material: 4.0 0 1.0 0 sand\n#material: 5.0 0 1.0 0 gravel\n#material: 1.0 0 1.0 0  air\n\n#box: 0 0  0   0.2 0.1 0.05 soil\n#box: 0 0 0.05 0.2 0.1 0.10 bottom_soil\n#box: 0 0 0.10 0.2 0.1 0.15 surface_soil\n#box: 0 0 0.15 0.2 0.1 0.20 sand\n#box: 0 0 0.20 0.2 0.1 0.25 gravel  \n#cylinder: 0.1 0.05 0.22 0.1 0.05 0.24 0.003 air\n\n\n\n#geometry_view: 0 0 0 0.2 0.1 0.4 0.002 0.002 0.002 air-soilA n\n\n\n\n1. The above is the model I built, how to determine the excitation source can hit the cylinder, how does this work? How to determine the path of the wave of excitation to launch it? 2. Build a model to get out of the file, how to view the specific data of the wave?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 22, 2017, 10:32:38AM",
        "content": "Hi Jie,\n\nI recommend spending some time (if you have not already done so) working through and understanding some of the examples in the User Guide - http://docs.gprmax.com/en/latest/examples_simple_2D.html. These examples will help you answer some of the questions you have, i.e. how to plot output data from receivers etc... You need a basic understanding of GPR and GPR modelling using the FDTD method before using gprMax.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "jie wang",
        "date": "Apr 22, 2017, 10:23:36PM",
        "content": "Thank you for your solution, but what i mean is that I will not use MATLAB to view the output model."
      },
      {
        "author": "jie wang",
        "date": "Apr 22, 2017, 10:26:35PM",
        "content": "For me above the model, which command should be used in the media to add moisture content? I would like to study the relationship between the moisture content of the medium and the signal."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 23, 2017, 9:18:50AM",
        "content": "Hi Jie,\n\nThere is no command that can just add moisture content in your model in a way that can just do the model for you. gprMax is an FDTD solver and allows you to specify the dielectric properties of materials which can be rather complex. There is a mixing model for soils but this is just one implementation and there are others as well. gprMax has sophisticated dispersive media modelling capabilities but you need to know how to use them and for this you need to understand how your electrical properties are being determined for your problem.\n\nYou need to understand your problem well before you consider using gprMax to model it. Once you have understood how moisture content alters the electrical properties of your medium then you can start looking into ways to incorporate it in a gprMax model or use some existing advanced functionality to achieve you modelling ambitions. \n\nWithout good understanding of GPR and of the modelling process you results most likely will be useless and wrong.\n\nBest regards\n\nAntonis"
      },
      {
        "author": "jie wang",
        "date": "Apr 24, 2017, 10:06:28PM",
        "content": "Thank you very much for your answer? I have the following questions: the application of paraview after the map, the color of each layer can be changed? How should it be changed? Gprmax wave after the specific data should be how to view it?"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/soWPpbwbChE",
    "title": "remove G from globals()?",
    "original_post": {
      "author": "Francis Watson",
      "date": "Jul 11, 2017, 9:35:18AM",
      "content": "Hi gprMax community\n\nI'm trying to use gprMax as a module, and I'm writing some other Python code which will call it many times with different inputs.  I've hit a bit of a snag in that, the second time gprMax is called, G is in globals() so the new geometry file isn't processed.  \n\nI'm fairly new to programming in Python so I'm not quite sure what the best workaround is.  Ideally, I want to deal with all memoizing myself, and avoid calling anything from gprMax other than api.\n\nMany thanks in advance,\n\nFrancis"
    },
    "responses": [
      {
        "author": "Francis Watson",
        "date": "Jul 11, 2017, 9:37:05AM",
        "content": "FYI, I'm on v3.0.19 -- if updating to the latest version now will make this easier, I can do so..."
      },
      {
        "author": "Francis Watson",
        "date": "Jul 11, 2017, 9:50:37AM",
        "content": "To be a bit more specific: I think the problem only occurs when I use #geometry_objects_write\n\nIf there's more than one thing I want to write, the second time this seems to be skipped."
      },
      {
        "author": "Craig Warren",
        "date": "Jul 11, 2017, 10:01:45AM",
        "content": "Hi Francis,\n\nWelcome to the forum!\n\n'G' was designed only to be retained when the argument '--geometry-fixed' is given at the command line, or via the API. Otherwise it will be deleted. There was a bug related to this not happening when the '--geometry-only' argument was used with multiple model runs. See https://github.com/gprMax/gprMax/commit/cd3042ec4f2b2b7568059610cb9f0af879c365cb This could be what you are experiencing. It was fixed in v.3.0.20, so I recommend updating to at least that version, and preferably the latest.\n\nLet me know if this solves your issue.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Francis Watson",
        "date": "Jul 11, 2017, 10:27:22AM",
        "content": "Hi Craig\n\nThanks for the quick reply!  I'm working on an off-line machine right now, so I'll copy over the latest version and confirm that fixes the problem later today.\n\nKind regards,\n\nFrancis"
      },
      {
        "author": "Francis Watson",
        "date": "Jul 12, 2017, 4:04:44AM",
        "content": "Just to confirm, this was the bug I was seeing and in the latest version my code runs fine.\n\nMany thanks,\n\nFrancis"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 13, 2017, 10:00:30AM",
        "content": "Great! Glad that solved it.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Hy5nEk2AwBw",
    "title": "Query on posting messages with some attachment files",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "May 6, 2021, 10:22:56AM",
      "content": "Dear all,\n              I am facing a different problem. I can post my queries in this group without any problem. But, whenever I attach any files or photos, I couldn't post the queries. It showing \"error in posting meassage\". I couldn't fix this problem. Can anyone help me?\n\nThank you\n\nRegards\nRohit"
    },
    "responses": [
      {
        "author": "savita K.B",
        "date": "May 7, 2021, 10:50:07AM",
        "content": "Dont attach the files. Copy and paste in the window only.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/H6xl5jIsqjo",
    "title": "Error Essential Commands",
    "original_post": {
      "author": "Leticia Sabater Belmar",
      "date": "Mar 6, 2018, 2:19:23PM",
      "content": "Hello everyone!\nI am new using the program and I tried to do a test with air and metal but it gives me an error in the essential commands. Attached .in and error photo\nAnyone know how to solve it?\n\n\n#title: A-scan from a air pec model\n#domain: 0.300 0.300 0.300\n#dx_dy_dz: 0.003 0.003 0.003\n#time_window: 6e-9\n\n#waveform: ricker 1 1.6e9 my_ricker\n#python:from user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.15, 0.20, 0.150, resolution=0.003)\n#end_python:\n#box: 0 0.01 0 0.300 0.20 0.30 free_space\n#box: 0 0 0 0.30 0.01 0.30 pec\n#geometry_view: 0 0 0 0.300 0.300 0.300 0.003 0.003 0.003 air n"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 8, 2018, 6:34:44AM",
        "content": "Hi Leticia,\n\nI would recommend reading the manual and the examples carefully and depending on what you want to do give some time to understand the underlying numerical method (FDTD) especially if you want to do complicated things.\n\nThe library of antennas that is available has limitations. Your antenna resolution for this particular one cannot be 3mm. Further, if you use the antenna in the library you do not need a waveform command as it will use the one that is defined for this antenna. Your #python: command is wrong as you have missed a line. There is an example about how to use this antenna try to follow this and initially modify it to see how it works.\n\nHope this helps!\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/E_A_rqHhDXo",
    "title": "B-scan merge error on Windows system",
    "original_post": {
      "author": "l wei",
      "date": "Jun 30, 2016, 1:21:22PM",
      "content": "Hi,\n\nToday I tried to install the new version of gprMax on my computers. It works perfect on my LINUX system with the two examples in the link: http://docs.gprmax.com/en/latest/examples_simple_2D.html.\n\nBut when I tested it on a computer with Windows system, there is a problem:\n\nat first, a group of A-scan images were successfully generated and can be displayed with\n  python -m tools.plot_Ascan cylinder_Bscan_2D1.out\n\nthen, we I tried to merge these A-scans as a B-scan image with\n  python -m tools.outputfiles_merge cylinder_Bscan_2D\n\nthere is a problem as shown in the attached image,\n\nCan you help to check the problem?\n\nregards"
    },
    "responses": [
      {
        "author": "l wei",
        "date": "Jul 1, 2016, 5:42:28AM",
        "content": "Sorry, I tried on another windows computer, this problem cannot be repeated. SO it might just be a problem of python package h5py on the previous computer. Anyway, it works now."
      },
      {
        "author": "Craig Warren",
        "date": "Jul 1, 2016, 5:48:51AM",
        "content": "The problem looks like it is because you had some already existing files? Perhaps from a previous run.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HizEUzzUynA",
    "title": "Superimposing A-scans and FFTs",
    "original_post": {
      "author": "Heloisa Moraes",
      "date": "Nov 10, 2019, 8:28:40PM",
      "content": "Hello everyone,\n\nI need to superimpose some A-scans and FFTs as in the attached figure (which is not mine, it's just an example). Is it possible to plot more than one output file at the same time? If not, does anyone have any idea of how I can do it efficiently?\n\nKind regards.\n\nHeloisa"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 11, 2019, 5:55:33AM",
        "content": "Dear Heloisa,\n\nYou can modify the plot_Ascan script to plot traces from different receivers in a single graph rather than separate windows. If you need to plot scans from separate output files in a single plot than you could import functions from the plot_Ascan script into your own script, and call them in a loop. Likewise if you prefer you can do the same with the MATLAB plotting scripts.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Heloisa Moraes",
        "date": "Nov 11, 2019, 9:29:58AM",
        "content": "Dear Craig,\nI really appreciate your help, but unfortunately I still don't know how to script in Python. It's in the plans, but I need to finish this research phase first.\nAfter I posted this message I managed to export the A-scan data to Excel via HDF5 reader, but not the FFT data.Is there any alternative to FFT data that does not require scripting?\nKind regards,\nHeloisa"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 12, 2019, 4:14:41AM",
        "content": "Dear Heloisa,\n\nThere is nothing special about the FFT we do, so you can do the same in MATLAB, or I believe even Excel has some Fourier analysis tools.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5SIqpTcDqMM",
    "title": "Phase information of range profile",
    "original_post": {
      "author": "Sudantha Perera",
      "date": "Nov 1, 2020, 10:50:31AM",
      "content": "Hi everyone,\nIs there a way to plot the phase information of range profile. We can plot E-field and H-field magnitude with preprocessing tool called \"plot_Ascan.py\". But can we extract phase information form .OUT file?"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "Nov 5, 2020, 5:01:45PM",
        "content": "Hello,\nyes, you can recover the time fields and then compute the magnitude and phase information. You should study the \"plot_Ascan.py\" file to see how the fields are recovered from the file:\n\nThe following snippet from the file recovers the value of the field\n------------------\n    for rx in range(1, nrx + 1):\n        path = '/rxs/rx' + str(rx) + '/'\n        availableoutputs = list(f[path].keys())\n\n        # If only a single output is required, create one subplot\n        if len(outputs) == 1:\n\n            # Check for polarity of output and if requested output is in file\n            if outputs[0][-1] == '-':\n                polarity = -1\n                outputtext = '-' + outputs[0][0:-1]\n                output = outputs[0][0:-1]\n            else:\n                polarity = 1\n                outputtext = outputs[0]\n                output = outputs[0]\n\n            if output not in availableoutputs:\n                raise CmdInputError('{} output requested to plot, but the available output for receiver 1 is {}'.format(output, ', '.join(availableoutputs)))\n\n            outputdata = f[path + output][:] * polarity\n------------------\nThe absolute value of the fft is then calculated at:\nfreqs, power = fft_power(outputdata, dt)\n\nYou should write a program to recover the phase information.\n\nBest regards,\nAndrés"
      },
      {
        "author": "Andres Altieri",
        "date": "Nov 5, 2020, 5:02:40PM",
        "content": ""
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/B9JGboDxKrA",
    "title": "Installed, but somewhat broken.",
    "original_post": {
      "author": "david vanhorn",
      "date": "Nov 21, 2019, 10:33:47AM",
      "content": "I've used the directions here: http://docs.gprmax.com/en/v.3.0.0b20/readme_install_devs.html\nto install gprMax on my W10 machine.\n\nNo problems until I try to run the example:\n(gprMax) C:\\gprMax-v.3.1.5>python -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\n\nIt ran for a few seconds, and gave me this:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Dave\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Users\\Dave\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\gprMax-v.3.1.5\\tools\\plot_Ascan.py\", line 28, in <module>\n    from gprMax.exceptions import CmdInputError\n  File \"C:\\gprMax-v.3.1.5\\gprMax\\__init__.py\", line 2, in <module>\n    from .gprMax import api as run\n  File \"C:\\gprMax-v.3.1.5\\gprMax\\gprMax.py\", line 38, in <module>\n    from gprMax.model_build_run import run_model\n  File \"C:\\gprMax-v.3.1.5\\gprMax\\model_build_run.py\", line 45, in <module>\n    from gprMax.fields_updates_ext import update_electric\nModuleNotFoundError: No module named 'gprMax.fields_updates_ext'\n\nSince I'm a total newbie here, I have no idea what is wrong.."
    },
    "responses": [
      {
        "author": "david vanhorn",
        "date": "Nov 21, 2019, 12:32:48PM",
        "content": "Possibly I failed to get the \"binary extensions\" but I don't see where those are to be downloaded from on the link provided."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 22, 2019, 4:03:32AM",
        "content": "Hi David,\n\nI'm not sure how you got those instructions (please do let us know) but they are several years out of date, and the process has changed somewhat since then. Please follow the installation procedure in the current docs: http://docs.gprmax.com/en/latest/include_readme.html#installation Everything current is linked via our website (http://www.gprmax.com) and the GitHub master branch (https://github.com/gprMax/gprMax).\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dS9igmTv8TM",
    "title": "Help Needed with gprMax Simulation Results for Different Buried Objects",
    "original_post": {
      "author": "Ankur Jyoti Kalita",
      "date": "Sep 11, 2023, 3:20:02AM",
      "content": "Hello everyone,\n\nI'm seeking assistance with a gprMax simulation issue I encountered while working on two cases.\n\nIn one case, I buried an aluminium object, and in the other, an iron object, both within a sandy medium.  The issue is that despite the differences in the materials' properties (like conductivity and relative permittivity), I got the same reflected signals for both objects.\n\nSimulation parameters for both cases are identical, including object depth, radius, antenna position, etc.\n\nDomain Size:\nLength (x): 1350 mm\nWidth (y): 750 mm\nHeight (z): 600 mm\n\nSoil Configuration:\nSoil Relative Permittivity- 10.0, Conductivity- 0.002 S/m\nBoth objects are cylindrical and are buried in the soil.\nSoil is filled up to a depth of 400 mm within the domain.\n\nObject properties:\nAluminium: Relative Permittivity-  10.8, Conductivity- 3.5e7 S/m\nIron:  Relative Permittivity-  14.2, Conductivity- 1e7 S/m\n\nDepth of the object: 60 mm\nDiameter of the object: 50 mm\n\nI've attached the simulation configuration files (IN files) and the GPR signal responses for both cases. I'm puzzled by the similarity in the results and would greatly appreciate any guidance on whether I've made errors in setting up the simulations or if there are other factors at play.\n\nThank You."
    },
    "responses": [
      {
        "author": "Ankur Jyoti Kalita",
        "date": "Sep 11, 2023, 3:25:38AM",
        "content": "Sorry,\n\nThere was a slight mistake, depth of the object is 200 mm from the soil surface. However, in my simulation, no matter what depth both objects were placed (same for both cases), it produced similar results.\n"
      },
      {
        "author": "Michael Fehér",
        "date": "Sep 13, 2023, 3:49:37AM",
        "content": "Hey,\n\n\nwhat the FD-algorithm does, it simulates the electromagnetic waves in your model.\n\nAnd just as it is in reality, you'll get a nearly total reflection of your pulse an surfaces of metal.\nIn your case, the significance of conductivity is very high! the ratios aren't as different as it seams 1,75*10^9 for Aluminium versus 0.5*10^9 for iron. both of them are far above every ratio FD can discriminate.\n\n\nMetal (no matter if copper, iron, steel, aluminuim or whatever) burried in a moderate or low conductive medium will reflect 100% of the energy of your GPR signal.\n\nso you won't see any difference.\n\nSure thera are differences, but these are way too small to see, maybe too small to be handled by float.\n\n\nCheers, Micha\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bKpH9Es8l3g",
    "title": "Wave cannot return to zero",
    "original_post": {
      "author": "城阳",
      "date": "Apr 4, 2024, 8:08:57AM",
      "content": "Hello team gprMax，\n\nI created an FMCW waveform with a duration of 0.5e-10s. But after 0.5e-10 seconds, the electric field Ez does not return to zero, and both the electric field and the magnetic field fluctuate strongly. Could this be the reason for PML layer? I used the default PML.\n\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:18:45AM",
        "content": "Can we see a plot of your source waveform and full input file please.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DjF_SX7jn_o",
    "title": "Conversion to Normalized dB Amplitudes",
    "original_post": {
      "author": "AI",
      "date": "Dec 30, 2018, 4:15:50PM",
      "content": "Hi there!\n\nI've done a parametric study and extracted the A-scans. I need to convert the amplitudes to normalized dB to be able to connect my findings to real world GPR surveys. I'm not quite sure how to do that. \n\nFor GSSI 16 bit systems, this is the equation I use:  \nAmp_NdB = 20 x log (Amp_Raw / 2^15) \n\nwhere 2^15 is the maximum measurable amplitude by the system. What would be the equivalent value for the gprMax simulations? I have attached some the A-scans for your reference. These are based on a model of a concrete slab with two bars at the top and bottom similar to a bridge deck. The reflections for the top and bottom rebars are shown on each A-scan. I used a Ricker wavelet as the input.\n\nThanks for your help."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 3, 2019, 5:31:48AM",
        "content": "Hi Al,\n\nAs I see it, you are normalising your measured data to the maximum receivable value of the GSSI system. I don't think there is really a numerical equivalent. With the model you know the amplitude of the source that generated that output, but you don't know this for the real system. My suggestion would be to use one of the model configurations as a baseline and compare the relative amplitudes (in dB if required) to that.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "AI",
        "date": "Jan 3, 2019, 1:38:44PM",
        "content": "Thank you for your help."
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Jan 3, 2019, 3:11:34PM",
        "content": "Hi Al,\n\nIn Radan7 manual Normalized dB is described as follows:\n\"Normalized dB: Normalizes the data amplitude relative to 32767 for 16 bit data and 2147483648 for 32 bit data before converting to dB.\n\nI think that in order to do that for both the raw amplitudes from GSSI systems and from the gprMax you should do the following:\n\nMatlab\ndata = data * 32767.5 ./ max(max(abs(data)));\ndata(data >= 32767) = 32767;\ndata(data <= -32768) = -32768;\ndata = round(data);\ndata = 20*log10(data);      or       data = mag2db(data);\n\n\nKind regards,\nDimitris"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/oe3EA9PoMlQ",
    "title": "Problem while solving a model with \"antenna_like_GSSI_1500\" on GPU",
    "original_post": {
      "author": "Selim Sahin",
      "date": "Nov 27, 2018, 11:40:26AM",
      "content": "Hello,\n\nI am comparing parallelization options in gprMax for speed. Default settings, omp/mpi and gpu options are running correctly for a model with hertzian_dipole source.\nBut I have faced the following warning when I try to use gpu for a model with \"antenna_like_GSSI_1500\":\n\ngprMax.exceptions.CmdInputError: '#transmission_line: y 0.137 0.072 0.174 230 myGaussian' A #transmission_line cannot currently be used with GPU solving. Consider using a #voltage_source instead.\n\nI could not find any further explanation for this message. Is it impossible to use gpu for antenna models? If so, what can you advise me to reduce computation time other than using more cpu cores?\n\nAdditional system infos:\nOS: Linux Mint 17.3 64-bit\nGPU: GeForce GT 420\nCPU: Intel i7 3770\n\nRegards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 27, 2018, 12:17:06PM",
        "content": "Hi Selim,\n\nWelcome to the forum!\n\nI am not sure what version of gprMax you are using, but the 'antenna_like_GSSI_1500' model in the current version (v.3.1.4) does not contain a transmission line. It uses the voltage source which means it can run on the GPU. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Selim Sahin",
        "date": "Nov 28, 2018, 7:49:13AM",
        "content": "First of all, much obliged for your immediate answer.\nIt is version 3.1.2 and recently I have tried to solve the basic example model \"cylinder_Bscan_GSSI_1500.in\" provided inside user_models directory using gpu. Again the same message appeared.\nIs the antenna model for GSSI1500 changed after v3.1.2?\n\nRegards"
      },
      {
        "author": "Selim Sahin",
        "date": "Nov 28, 2018, 8:52:03AM",
        "content": "I have just run the same input file except the antenna model was MALA1200. This time the transmission_line exception was not thrown but a pyCUDA error appeared :\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\n\nWhen I call \"nvcc --version\" I get this:\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2016 NVIDIA Corporation\nBuilt on Tue_Jan_10_13:22:03_CST_2017\nCuda compilation tools, release 8.0, V8.0.61\n\nI have Python 3.6.4 installed via Anaconda."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 28, 2018, 9:27:10AM",
        "content": "So v.3.1.2 is almost 1 year old now, I'd recommend updating to the latest version. The antennas module was overhauled in January 2018 and we moved to using the voltage source to enable it to be run on either CPU or GPU. You can see the versions (and notes) and history on GitHub at https://github.com/gprMax/gprMax/releases and https://github.com/gprMax/gprMax/commits/master/user_libs/antennas\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Selim Sahin",
        "date": "Dec 1, 2018, 3:03:48PM",
        "content": "OK, I have updated to v3.1.4 and now it works on GPU.\nBut after update, -mpi command does not work and stops without a warning or error showing following lines when I call python -m gprMax $file_path -n 2 -mpi 3\n\nHost: LinuxMint-17.3 | Hewlett-Packard HP Compaq Elite 8300 CMT | 1 x Intel(R) Core(TM) i7-3770 CPU @ 3.40GHz (4 cores, 8 cores with Hyper-Threading) | 15.6GiB RAM | Linux (3.13.0-24-generic, debian)\nMPI master (MPI_COMM_WORLD, rank 0) on LinuxMint-17.3 using 1 workers\n\n[mpiexec@LinuxMint-17.3] match_arg (./utils/args/args.c:122): unrecognized argument pmi_args\n[mpiexec@LinuxMint-17.3] HYDU_parse_array (./utils/args/args.c:140): argument matching returned error\n[mpiexec@LinuxMint-17.3] parse_args (./ui/mpich/utils.c:1387): error parsing input array\n[mpiexec@LinuxMint-17.3] HYD_uii_mpx_get_parameters (./ui/mpich/utils.c:1438): unable to parse user arguments\n\nUsage: ./mpiexec [global opts] [exec1 local opts] : [exec2 local opts] : ...\n\nGlobal options (passed to all executables):\n\nShould I also rebuild or update the OpenMPI?"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 3, 2018, 6:33:41AM",
        "content": "Hi Selim,\n\nFrom those errors it looks like you are using mpich as your MPI implementation. I would recommend using OpenMPI as I believe this interfaces well with mpi4py which we use in gprMax.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1DpVC9ys29g",
    "title": "3d QUESTIONS on polarization",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Jan 17, 2019, 4:43:48PM",
      "content": "There are still some strange results in 3D simulation. \n\n\nMy input file is:\n\n#title: Simulations-3D\n#domain: 0.4 0.4 0.4\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 10e-09\n#pml_cells: 15 \n *** Antennas\n#waveform: ricker 1.0 1.000e+09 excitation_waveform\n#hertzian_dipole: z 0.2 0.2 0.2 excitation_waveform\n#rx: 0.2 0.2 0.2\n#rx: 0.1 0.2 0.2\n#rx: 0.2 0.1 0.2\n#rx: 0.2 0.2 0.1\n #geometry_view: 0 0 0 0.4000 0.400 0.4000 0.001 0.001 0.001 TEST-GPU n\n\nThat is to say, I have a 3D model with a source in the center of the domain. One receiver is in the same position of the source. Another three receivers are placed, respectively, left, right and upper of the source with the same distance. The source has a polarization in Z direction. We observe the receiving signals in different components. \n\nSince the polarization direction of source is in Z direction, I expect that we can not observe signal in Ex and Ey components, while we can. How can we explain this?   \n\n\n\nin the position of Source\n\n                                                                                                                                          in the left of the source\n                                                                                                                                             in the right of the source\n                                                                                                                                         in the upper of the source"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 17, 2019, 6:24:54PM",
        "content": "Hi Feng,\n\nYou need to remember that in FDTD all field components as staggered and not placed at the same position. For  a z-directed Hertzian dipole solution in FDTD the only component which should be zero in any location (as it does not get excited at all ..) is Hz. In theory at specific planes some of the Cartesian components should be zero. The point is that you do not really have a real output  component at these locations. When you specify a location as x, y, z which is the corner of a Yee Cell your electric components are all offset by half a cell in their respective directions.\n\nHope this makes sense ...\n\nAntonis\n\nPS Monitoring the source position is not really useful as there is not equivalent theoretical solution at this point ..."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZN0m3BzS1ek",
    "title": "inhomogeneous media in gprMax",
    "original_post": {
      "author": "Afftar F",
      "date": "May 10, 2021, 1:25:03AM",
      "content": "Hello! Is it possible in gprMax to set up the inhomogeneous (spatial) dielectric permittivity (real and imaginay part) that vary as some analytic function of x,y,z (i.e. to model something like Luneburg lens)? Thank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 6:31:49AM",
        "content": "Hi Afftar,\n\nThere are no built-in commands/functions to do this. However, you can create your geometry outside gprMa, create a HDF5 file, and import it using the geometry_objects_read command - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XehqoRfkVao",
    "title": "GSOC 2023 Idea 2 - Google Colab/Jupyter Notebook Integration.",
    "original_post": {
      "author": "Kindawingingit",
      "date": "Mar 27, 2023, 3:06:26AM",
      "content": "Hi! I'm interested in contributing to Idea 2. Apologies if this is not the correct forum to address this issue. I just wanted some clarification regarding the deliverables of the project.\nAfter reading through the description and attending the meeting, I have understood the importance of this project. From the little exploration of the problem, I could understand that the GitHub projects - Agianno and Laokangde try to solve this issue. From what I have understood, the aim of this project is to decrease/remove the need for Paraview. The key deliverable would be an implementation of Paraview using Trame and PyVista which could be accessed by the user in a Jupyter/Google Colab environment. I have gone through the documentation of both Trame and PyVista. I am excited to explore any other avenues as well. I would like to know if my understanding of the idea is as expected from the mentor or not. I would be delighted to get any further pointers for this issue as well. \nRegards,\nAditya."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vMaXTAwEyxE",
    "title": "Help with numerical dispersion",
    "original_post": {
      "author": "Parikshit Sah",
      "date": "Feb 26, 2024, 3:50:46PM",
      "content": "Hi,\nI'm new to using gprMax and wanted some help with numerical dispersion. I'm trying to simulate a potato underground and observe how antenna signals travel. However, based on the input parameters in my .in file I receive a numerical dispersion warning. I have watched the tutorials for gprMax by the official channel but since I would like to keep some of my input parameters the same, I wanted some advice on how I can avoid numerical dispersion. Here is what my input file looks like \n\n```\n#title: A-scan from a potato buried in soil\n\n#domain: 0.250 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 soil\n#material: 9 0 1 0 potato\n\n#waveform: ricker 1 3.3e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.250 0.170 0.002 soil\n#sphere:  0.120 0.080 0 0.022 potato\n\n#geometry_view: 0 0 0 0.250 0.210 0.002 0.002 0.002 0.002 first_potato_test n\n\n#python:\nfor i in range(1, 31):\n    print('#snapshot: 0 0 0 0.250 0.210 0.002 0.002 0.002 0.002 {} snapshot{}'.format((i/10)*1e-9, i))\n#end_python:\n```\n\nHere is the output from the terminal:\nMaterials:\n    |                                 |                     |       | sigma |      | sigma*  | Dielectric\n ID | Name                            | Type                | eps_r | [S/m] | mu_r | [Ohm/m] | smoothable\n----+---------------------------------+---------------------+-------+-------+------+---------+------------\n  0 | pec                             | builtin             | 1     | inf   | 1    | 0       | False\n  1 | free_space                      | builtin             | 1     | 0     | 1    | 0       | True\n  2 | soil                            |                     | 6     | 0     | 1    | 0       | True\n  3 | potato                          |                     | 9     | 0     | 1    | 0       | True\n  4 | free_space+free_space+soil+soil | dielectric-smoothed | 3.5   | 0     | 1    | 0       | True\n  5 | potato+soil+soil+soil           | dielectric-smoothed | 6.75  | 0     | 1    | 0       | True\n  6 | potato+soil+soil+potato         | dielectric-smoothed | 7.5   | 0     | 1    | 0       | True\n  7 | potato+potato+soil+potato       | dielectric-smoothed | 8.25  | 0     | 1    | 0       | True\n\nWARNING: Potentially significant numerical dispersion. Estimated largest physical phase-velocity error is -3.26% in material 'potato' whose wavelength sampled by 5 cells. Maximum significant frequency estimated as 9.31803e+09Hz"
    },
    "responses": [
      {
        "author": "Parikshit Sah",
        "date": "Feb 26, 2024, 4:18:58PM",
        "content": "Adding on to the initial thread...\nI understand my question could be really abstract. It would be really helpful If I can be guided on how to determine material parameters, specifically for potatoes and soil. \n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 27, 2024, 3:52:15AM",
        "content": "The answer is in \n\nhttp://docs.gprmax.com/en/latest/examples_simple_2D.html#calculate-a-spatial-resolution-and-domain-size\n\nYou need to calculate the highest frequency in your pulse that has significant energy and this is not the 3.3 GHz but most likely close 7 or 8 or higher. Then the highest relative permittivity and then once you got the smallest wavelength divide at least by 10 and you will get a smaller DL than the 2 mm you use. Alternatively make the DL smaller until you do not get an error message.\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/63aDonlBLH4",
    "title": "Index Error when adding #hertzian_dipole command",
    "original_post": {
      "author": "Stephanie",
      "date": "Jul 15, 2020, 10:55:38AM",
      "content": "Hello!\n\nWhen I try to run this input file:\n\n#title: Lava Tube GPR Model\n #domain: 10.0000 10.0000 10.0000 \n#dx_dy_dz: 0.1 0.1 0.1 \n#time_window: 2e-7 \n\n#material: 10 0 1 0 basalt \n#material: 1 0 1 0 emptyspace \n\n#waveform: ricker 1.00 1e8 source_wave\n#hertzian_dipole z 1.50 8.00 0 source_wave\n#rx: 3.0 8.00 0\n#rx_steps: 0.1 0 0\n#src_steps: 0.1 0 0\n\n#box: 0.0000 0.0000 0.0000 10.0000 8.0000 10.0000 basalt \n#cylinder: 5.0000 3.0000 0.0000 5.0000 3.0000 10.0000 50.0000 emptyspace \n\nI get the error 'IndexError: List index out of range'. After some experimentation I noticed the file runs when I remove the #hertzian_dipole command, but obviously there is nothing to plot if this is removed. \n\nI've looked around for answers to this issue but I can't seem to find anything. It's possible this is a simple error, but I have read through the documentation and compared it to my input file and as far as I can see it looks like things should work. It's possible I don't understand the PML/Yee cell theory well enough to catch when my input file violates some of the 'rules'. \n\nI would greatly appreciate any tips in the right direction as this is really hindering my research progress!\n\nThanks in advance."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 15, 2020, 11:36:12AM",
        "content": "Hi Stephanie,\n\nYou are trying to put the source and the first receiver point on the Z=0 boundary. As this is the edge of the model (one of the outside boundaries of the grid) the fields there will be zero. So, most likely we have a programming catch condition to prevent you doing things that are that wrong. However, changing this to 0.1 will work and produce wrong results. I am afraid that the answer you are looking for is in your own statement:\n\n \".. It's possible I don't understand the PML/Yee cell theory well enough to catch when my input file violates some of the 'rules'. ...\" \n\nUsing a tool without understanding its limitations and the way it can or cannot work is a recipe for disaster. The classic cliche \"Garbage in, Garbage out\" is an appropriate reminder when we use computer models.  I will suggest that spending some time in understanding and reading on how to use the tool properly for what you want to do will be the best way forward. If you get results that are practically nonsense because you don't know how the tool works and what are its limitation then this will really hinder your research further down the line.\n\nThe other explanation is that you are trying to do a 2D model in the XY plane and then everything else is wrong and not the source command ...\n\nApologies for the didactic tone of this email it is probably due to my age and nature of job ;-) \n\nBest wishes\n\nAntonis"
      },
      {
        "author": "Stephanie",
        "date": "Jul 15, 2020, 4:51:03PM",
        "content": "Hi Antonis!\n\nI suspected there was something like that that I didn't notice, thank you so much for the quick reply! I'll definitely spend some more time with the theory before continuing on.\n\nMuch appreciated, as I'm aiming for results somewhere above 'garbage'!\n\nCheers,\nStephanie"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bGe4YcQwNVo",
    "title": "Electrical properties extraction from .out file",
    "original_post": {
      "author": "Zohaib Akbar Khan",
      "date": "Feb 3, 2025, 6:39:54AM",
      "content": "Hello Team GprMax.\ni ahve successfully genrated the synthetic data of snow layers with gpMax through .in file with GPU.\nnow i want to extract the electrical properties (permitivitty , conductivty) or resitivity from the output (.out) file. I need it to train the NN model for my dataset so that GPR radargram can be maped into electrical properteis. \nNow i am struggling with the extraction of these proeprties, though i have used differnt softwares for it but it seems that i the extracted data is not relable, can you please guide me.\nthanks \nregards\nZohaib"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 3, 2025, 3:46:46PM",
        "content": "Hi Zohaib,\n\nThe gprMax .out files do not have these properties. As gprMax is a modelling software you have specified these properties in the .in file and they were used to generate the synthetic data. You should use these files to get the information you need.\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "Zohaib Akbar Khan",
        "date": "Feb 10, 2025, 4:42:24AM",
        "content": "Thanks Antonis for you time.\nI have been facing this issue that i have created the .in files, but as we know that undulation or surface roughness etc in gprMAx is not under control, so its looks not possible for me to extract the spatial map of perm and condutivity directly from the.in file. Can you please guide me in this ?\n\nWhat i did previously, i simulated the data with gprMax and loaded in georadar_expert (it has interface) so marked the horizons and layering manually as per the idea from .in file and then assign the values to these layers and extracted the both maps, but i don't think that give any relable results.\nmoreover in Kaggle gprMax chalenge , you guys also cerated the labeled data, so that was all on teh basis of prior or what? \nYOur help is always a new sign for my work.\nthanks\nregards\nzohaib\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Bq0A-ALJA5I",
    "title": "Hyperbola Branch Width",
    "original_post": {
      "author": "Enver Aydın",
      "date": "Sep 17, 2017, 6:13:04AM",
      "content": "Hi all,\n\nI am working on small domain area like that 50cmx50cm due to simulation time. Because of that reflection doesnt look like hyberpola.\nIs there any method narrow hyberbola branch width with change other parameters without increase domain area? I tried explain I want. Is this possible?\n\nInput file:\n\n#domain: 0.500 0.600 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-9\n\n#material: 6 0 1 0 half_space\n#material: 6.0 0.001 1.0 0.0 concrete\n#material: 8.0 0.01 1.0  0.0 damp_sand\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.06 0.5 0 my_ricker\n#rx: 0.1 0.5 0\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n\n#box: 0 0 0 0.5 0.5 0.002 damp_sand\n#cylinder: 0.13 0.39 0 0.13 0.39 0.002 0.01 concrete\n\n\n\nBest regards.\nEnver"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 17, 2017, 8:00:20AM",
        "content": "Hi Enver,\n\nYour cylindrical target is not centred in the model so, you see only one part of the hyperbola. The only other way is to increase the relative permittivity of the host material as this changes the directivity of the source. Obviously, this might not be realistic with relation to what you are trying to do. You must be careful to control numerical dispersion if you increase the permittivity. Your time window might need to increase as well.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/F69lFBTcksQ",
    "title": "Dielectric smoothing",
    "original_post": {
      "author": "xianyang gao",
      "date": "Dec 15, 2016, 6:47:32AM",
      "content": "Dear Craig,\n\nI have a question about dielectric smoothing. When I watch the cells in Paraview, I noticed that permittivity of the boundary between two different material is very strange, larger than that of both material.\nHow did you achieve smoothing in gprMax? What kinds of method did you use?\n\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 15, 2016, 8:29:49AM",
        "content": "Dear Xianyang,\n\nJust to be clear for yourself and future readers of this post, the statement\n\nI noticed that permittivity of the boundary between two different material is very strange, larger than that of both material\n\nis not correct. \n\nDielectric smoothing or averaging occurs between volumetric objects (not edges and plates) that use dielectric materials (not PEC). gprMax will create a new material which has the average of the material properties (electric and magnetic) at the interface of the objects. N.B. A cell edge can be shared by up to 4 different materials, so up to a 4-way average is possible. \n\n\n\nYou can see the newly created materials in the printed table of materials when gprMax runs. Their type is 'dielectric-smoothed', and their names are a result of the names of the materials that have been averaged, e.g. in the screenshot 'free_space+free_space+half_space+half_space'. The permittivity in calculated as (1+1+6+6)/4 = 3.5\n\nYou can visualise the objects (edges) created by the averaged materials if you take a geometry view with the 'f' fine specifier.\n\nIf you want to you can turn dielectric smoothing off for objects, see the User Guide - http://docs.gprmax.com/en/latest/input.html#dielectric-smoothing\n\nHope this explanation helps.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Yj0vmH0wzqQ",
    "title": "Re: No response from my model",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 6, 2021, 7:07:26AM",
        "content": "What does the output look like?\n\nAntonis\n\nOn Tuesday, 6 April 2021 at 10:51:08 UTC+1 abhilas...@gmail.com wrote:\nHi there,\n\nI am having issues in the results of my simulation model.\nFollowing are the commands that i am using as input:\n\n\"#domain: 3.4 3.4 2.0\n#dx_dy_dz: 0.02 0.02 0.02\n#time_window: 9.0e-8\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 2.5e8 my_ricker\n#hertzian_dipole: z 0.4 1.7 1.0 my_ricker\n#rx: 0.44 1.7 1.0\n#src_steps: 0.04 0 0\n#rx_steps: 0.04 0 0\n\n#box: 0 0 0 3.0 2.5 2.0 half_space\n#cylinder: 1.5 1.25 0.0 1.5 1.25 2.0 0.5 pec\" \n\nand the results are not promising as there is no response from the buried cylinder."
      },
      {
        "author": "Abhilash Saini",
        "date": "Apr 6, 2021, 7:43:56AM",
        "content": "Thanks for the reply,\n\nOutput has the direct waves shown, but nothing is there for the cylinder, in 1D as well as in 2D.\n\nI have been searching the previous issues and found that it maybe because of the resolution issues? \n\nMay you please confirm it ? or something else is there to be corrected first ?  \n\n"
      },
      {
        "author": "Abhilash Saini",
        "date": "Apr 6, 2021, 8:06:25AM",
        "content": "I have attached the output here,\n\nPlease have a look.\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 6, 2021, 8:11:34AM",
        "content": "Please do a basic check of your mesh geometry! \n\nYou have buried your source and receivers inside your half space, which I don't think is intended. Also your half space does not extend to the full x-dimension of the domain, which is probably also not intended.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Abhilash Saini",
        "date": "Apr 6, 2021, 9:16:42AM",
        "content": "Thanks, It worked well...\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QVTPvNpEpjI",
    "title": "HPC-Europa3 programme",
    "original_post": {
      "author": "Craig Warren",
      "date": "Dec 11, 2018, 6:00:15AM",
      "content": "Hi folks,\n\nSome of you may be already aware of the HPC-Europa3 programme. If you are then please note that both myself (Northumbria University, UK) and Dr Antonis Giannopoulos (University of Edinburgh, UK) are registered as hosts for the programme. So you would come to visit one of our universities and have access to the UK national HPC (ARCHER). If you are interested in the scheme please get in touch to discuss a project.\n\nFor those that haven't heard of the HPC-Europa3, it is a H2020 funded programme to allow access to HPC facilities across Europe as well as academic and industrial researchers.  It allows you to work on a project that requires HPC facilities, and in our case uses gprMax or GPR in some way. The programme covers certain expenses. \n\nFull details on eligibility and criteria are available at: http://www.hpc-europa.eu\n\nThere are deadlines for submitting applications throughout the period of the programme. See the website for the next date.\n\nPlease get in touch with either myself or Antonis if you have a project you are interested in for this programme.\n\nKind regards,\n\nCraig"
    },
    "responses": [
      {
        "author": "Rakeeb Jaufer",
        "date": "Dec 2, 2019, 7:30:40AM",
        "content": "Sir, \nis there any free or cheap HPC facility available to run a gprmax simulation ?: I am a PHD student from france. \n\nbest regards\nRakeeb"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 3, 2019, 6:45:03AM",
        "content": "Dear Rakeeb,\n\ngprMax is capable of running on different HPC machines. It benefits the most from those that have GPU facilities - see https://doi.org/10.1016/j.cpc.2018.11.007 \n\nThere are usually a number of funding programmes to access time on national HPC facilities. Talk to your PhD supervisor and have a look to see if there is something specific to France, or consider the HPC-Europa3 programme mentioned above if you think you have a suitable project.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Chouaib belkhelfa",
        "date": "Apr 21, 2020, 4:42:33AM",
        "content": "Si with simulation matlab gprmax2D it not working with the 32bit windows I need the 64bit version of gprmax"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 21, 2020, 4:49:05AM",
        "content": "Dear Chouaib,\n\nThe old version 2 of GprMax (including GprMax2D) is no longer maintained or supported, see http://www.gprmax.com/about.shtml\n\nPlease consider moving to the current version of gprMax - https://github.com/gprmax/gprMax\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KXZjSgr11Dc",
    "title": "How to generate a Vivaldi antenna model for a GPR simulation?",
    "original_post": {
      "author": "Ruonan Chen",
      "date": "Feb 5, 2021, 9:51:51AM",
      "content": "Hi, developers\n\nI have a question about how to the generate the Vivaldi antenna model. \nI have a look at about the antenna contents in the doc, you provide the bowtie antennas model. Could you please give me some ideas to modify the scripts to generate the Vivaldi model? \n\nHope for your advices and help!!\n\nBest regards,\nRuo"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 9, 2021, 7:17:13AM",
        "content": "Hi Ruo,\n\nYou won't be able to just modify an existing script. The antennas currently available are bowtie designs, a Vivaldi is completely different. You will need to build your antenna model from geometry and material commands - this obviously requires knowing the geometry of your Vivaldi antenna and also material properties.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/xDX0U_iFYTo",
    "title": "raise CmdInputError",
    "original_post": {
      "author": "Londstate",
      "date": "Apr 22, 2019, 11:43:46PM",
      "content": "Hello guys,\n  I have meet an error in pythoning  a model .The error info is the next one and I upload my \".in\".I don't know how to solve it.\n      Yours sincerely,  Londstate\n\nPS:\n'Traceback (most recent call last):\n  File \"/home/lrb/anaconda3/envs/gprMax/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/lrb/anaconda3/envs/gprMax/lib/python3.7/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/lrb/gprMax/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/home/lrb/gprMax/gprMax/gprMax.py\", line 67, in main\n    run_main(args)\n  File \"/home/lrb/gprMax/gprMax/gprMax.py\", line 189, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/home/lrb/gprMax/gprMax/gprMax.py\", line 230, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/home/lrb/gprMax/gprMax/model_build_run.py\", line 166, in run_model\n    process_multicmds(multicmds, G)\n  File \"/home/lrb/gprMax/gprMax/input_cmds_multiuse.py\", line 105, in process_multicmds\n    raise CmdInputError(\"'\" + cmdname + ': ' + ' '.join(tmp) + \"'\" + ' polarisation must be z in 2D TMz mode')\ngprMax.exceptions.CmdInputError: '#voltage_source: y 0.139 0.073 0.174 230 myGaussian' polarisation must be z in 2D TMz mode'"
    },
    "responses": [
      {
        "author": "Londstate",
        "date": "Apr 23, 2019, 3:34:35AM",
        "content": "And I also don't know what's cmd cells? Would you tell me what it means?\n \n'raise CmdInputError(cmd + ' has too many cells for the domain size')\ngprMax.exceptions.CmdInputError: #pml_cells has too many cells for the domain size'"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 23, 2019, 4:15:07AM",
        "content": "Hi Londstate,\n\nPlease read the error messages carefully. Both of them relate to fundamental concepts of EM modelling and the FDTD method that you must have some understanding of.\n\n1. #voltage_source: y 0.139 0.073 0.174 230 myGaussian' polarisation must be z in 2D TMz mode - Your model is 2D which means it is in the transverse magnetic (z-direction) mode (TMz). So all sources must be polarised in the z-direction in this mode, you have tried to use a y-polarised source, which is why you get the error.\n2. #pml_cells has too many cells for the domain size - your model domain is not large enough to hold the number of PML cells (Perfectly Matched Layer absorbing boundary) required. The default is to use 10 cells of PML on each side of the domain. Therefore your domain size must be large enough to accommodate this and provide enough space for the objects you are simulating.\n\nMake sure you read our introductory, brief guide to GPR modelling - http://docs.gprmax.com/en/latest/gprmodelling.html Note this only covers the very basics.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Londstate",
        "date": "Apr 24, 2019, 4:17:29AM",
        "content": "Thank you , Craig."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IJAoFOfxW44",
    "title": "plot_Bscan.m",
    "original_post": {
      "author": "Franc",
      "date": "Nov 16, 2018, 4:52:47AM",
      "content": "I would like to modify the script plot_Bscan.m in orden to obtain an homogeneous curve. In order to do that, I would replace the function pcolor in place of imagesc. The problem is that the variables have different sizes:\nfield: 2121x40\ntraces: 1x41\ntime: 2121x1\nSo, I can't resize the above variables. Do you know any other methods to do that?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 16, 2018, 5:27:54AM",
        "content": "Dear Franc,\n\nYou will need to look carefully at the MATLAB documentation to see differences between the pcolor and imagesc functions. What you are plotting in both cases are the values from the field matrix. The other two vectors (traces and time) are used to set the axes values. You will likely need to adjust the size of the traces vector to account for the differences in the two plotting functions.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Franc",
        "date": "Nov 17, 2018, 1:29:03PM",
        "content": "Thanks Craig,\nwith this command I can interpolate the figure and then I can plot with imagesc as usual\n  field = interp2(field, 3);     \n  im = imagesc(traces, time, field, clims);\nDo you think that the interpolation could modify the figure, giving wrong results?\ninterp2 in this case makes a linear interpolation as default"
      },
      {
        "author": "Franc",
        "date": "Nov 17, 2018, 1:32:41PM",
        "content": "As you can see I obtain an homogeneous curve. \nSorry, for the further message"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Nov 19, 2018, 10:17:13AM",
        "content": "Hi Franc,\n\nI think that in general it should be fine if you perform an interpolation just for the visualization part, as this procedure is followed by many GPR processing software. Infact in some of them this is the default option. However, you should always remember that this will modify your results a little bit.\n\nFurthermore, you should always keep your raw data matrix intact, so do this instead.\n\nnew_field = interp2(field, 3, 'spline')\nim = imagesc(traces, time, new_field, clims)\n\nKind regards,\nDimitris"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Nov 19, 2018, 4:53:06PM",
        "content": "Check the following 1D example. Lets say that this is a part of a GPR trace, see how much better is spline interpolation in comparison to linear.\n\nI know that in your case is a 2D interpolation, but I still think that performs better in this kind of data.\n\nKind regards,\nDimitris"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OIyOQFZKxsI",
    "title": "About the direct wave and the materials。",
    "original_post": {
      "author": "HT.T",
      "date": "Mar 28, 2020, 11:21:43AM",
      "content": "Dear all,\n\n     I am trying to use gprmax to simulate the propagation of radar wave in the polluted soil medium. The material property of the polluted soil medium is ls14, the model is 2D analysis, and the simulation method is CMP, The model is mainly divided into three parts, one is the transmitting antenna (the center frequency is 900 MHz) and the receiving antenna, the other is the contaminated soil medium, the material is ls14, and the third is the ideal metal block under the contaminated soil medium, the material is PEC. But the direct wave signal of radar wave image generated in bscan is very strong, I can't see the echo signal of reflected wave on the image.\n\n    I want to know if gprmax can simulate this kind of problem\n\n   1. Radar wave propagates in dispersive media with frequency dependence.\n\n   2. What is the way to get rid of direct wave in gprmax.\n\n   3. How to construct the three pole Debye formula.\n                                                                                                                                                                                                                                  Thank you very much\n                                                                                                                                                                                                                            Best regards\n                                                                                                                                                                                                                            HT.T\n\n This my code\n\n#domain: 1.2  0.3 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 40e-9\n\n\n## LS14\n#materia：1.0003252658762176 0 1 0 eccosorb_ls14\n#add_dispersion_debye: 3 98.07107793080615 8.504245706576436e-08 0.17461124247006998 2.0239418236665636e-12 0.2391403235994493 5.0816292715563385e-11 eccosorb_ls14\n\n#box: 0 0.01 0 1 0.18 0.002 eccosorb_ls14\n\n#box: 0 0 0 1 0.01 0.002 pec\n\n\n#waveform: ricker 100 900e6 my_ricker\n#hertzian_dipole: z 0.1 0.18 0.001 my_ricker\n#rx: 0.9 0.18 0.001\n#src_steps: 0.004 0 0\n#rx_steps: -0.004 0 0"
    },
    "responses": [
      {
        "author": "HT.T",
        "date": "Mar 28, 2020, 9:22:40PM",
        "content": ""
      },
      {
        "author": "Craig Warren",
        "date": "Mar 30, 2020, 4:40:54AM",
        "content": "Dear HT.T,\n\ngprMax is a full wave solver - solves Maxwell's equations in 2D/3D - using the FDTD method. One of the features is the ability to model multi-pole Debye materials - http://docs.gprmax.com/en/latest/input.html#add-dispersion-debye\n\nFirstly, a question: why are you modelling soil as Eccosorb LS14?\n\nThere are some problems with your model:\n\n1. Please remember to view the geometry (using #geomtry_view)! Your boxes of LS14 and PEC do not extend to the full extent of the domain in the x-direction (see attached image), which I suspect is not what you want.\n2. Just like real GPR data, you often have to apply some gain to see your target reflections, especially if your model contains some loss. Otherwise the direct wave will dominate.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HT.T",
        "date": "Mar 31, 2020, 9:16:45PM",
        "content": "Dear Craig Warren，\n    Thank you very much for your guidance.\n    I need to simulate the propagation of GPR radar wave in heavy metal contaminated soil (CMP). The dielectric constant of the required medium is frequency dependent. The LS series materials I see on the official website are quite in line with my needs. They are temporarily used at the beginning. Now I want to build my own materials. Do you have any good suggestions, especially for the three pole Debye model.\n                                                                                                                                                                                                                                                                            Kind Regards\n                                                                                                                                                                                                                                                                                       HT.T"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 1, 2020, 6:55:20AM",
        "content": "Dear HT.T,\n\nYou need to determine the frequency-dependent loss behaviour of the material you want to simulate, most probably from measured data (e.g. Eccosorb materials have this information in a datasheet). You can then fit a multipole Debye model to this behaviour and implement it in your gprMax model.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HT.T",
        "date": "Apr 13, 2020, 10:29:58PM",
        "content": "Dear Craig Warren，\n    Thank you very much for your guidance.\n    \n                                                                                                                                                                                                                                                                            Kind Regards\n                                                                                                                                                                                                                                                                                       HT.T"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/y1v2ufDuur8",
    "title": "Wave Phase Execution in gprMax",
    "original_post": {
      "author": "Hamed Qorbani",
      "date": "Sep 28, 2024, 10:12:40AM",
      "content": "Dear gprMax Team,\n\nI hope this message finds you well.\n\nI would like to extend my gratitude for your continuous support and the excellent work you are doing on gprMax. Your efforts have greatly enhanced my experience with the software.\n\nI have a question regarding the implementation of wave phase in gprMax. Is the phase computed in the code lines based on the defined waveforms as a function of time? For instance, is it true that for a Ricker wavelet, the corresponding cosine wave is multiplied, resulting in the Ricker function being a modulated version of the cosine signal? Could you please clarify how the phase is executed in the software? Additionally, could you please let me know where in the source code I can find this implementation?\n\nThank you for your assistance. I look forward to your response.\n\nBest regards,  \nHamed Qorbani"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 20, 2024, 10:58:18AM",
        "content": "Dear Hamed,\n\nYou can find all of the built-in waveform definitions in the docs (https://docs.gprmax.com/en/latest/plotting.html#built-in-waveforms) and source code (https://github.com/gprMax/gprMax/blob/master/gprMax/waveforms.py).\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/cs-gdu-Li8k",
    "title": "WARR and COM measurement",
    "original_post": {
      "author": "Kaushal Kishore",
      "date": "Feb 9, 2022, 8:03:41PM",
      "content": "Hi I want to know how can we model 2d Wide-angle reflection and refraction (WARR) and common midpoint (CMP) measurements using gprMax. Thank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 22, 2022, 7:04:42AM",
        "content": "Sources and receievers can be positioned (and moved) anywhere in the model. So you can choose positions to represent WARR and CMP measurements. You will just have to be careful how you collect together the output file(s) at the end.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Ien-5Q0h3yI",
    "title": "A GPU test in Win 1",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Oct 24, 2017, 9:48:07AM",
      "content": "Spending two weeks, eventually, I succeed in running gprMax in GPU in a Windows 10 system.\n  Firstly, I would like to share the experience of installing software for gprMax GPU computing. It seems LINUX is much easier for GPU software installation than Windows for its gcc complier, but I prefer to use Windows GPU computing because I am not familiar with LINUX operations. To install Visual Studio is my first step. I have tried Visual Studio 2017 and 2015, but I recommend to use Visual Studio 2015 to ensure CUDA Toolkit recognizing VS. I used vs2015.ent_enu.iso in my computer, and I choose to install all components. It is time- and space-consuming, but it is safe for a programming beginner. Then, I installed CUDA toolkit as the gprMax doc guide, I chose to install cuda_9.0.176_win10.exe, with all default installation step. The environment variable settings are very important, but it will be OK if you chose the default installation. Afterwards, I install Miniconda and gprMax and have a test of gprMax, as guiding by the gprMax manual. I have met with some problems in this step, because my web link is very unsteady, which might not be a problem for a person in other countries. The next step is to install pycuda according to the guide. Now, everything is finished, I began to run gprMax in GPU. As discussed in the GitHub, I also met with the problem “The context stack was not empty upon module cleanup”. The main reason is the cl.exe, which should have been included into the environment variable path. I manually add cl.exe directory into user path, and it showed everything is OK. I strongly suggest to pay attention to the environment variable settings if you met with some problems. So many software installed that they can not correlate with each other.\n  Then, I had a series of tests in my workstation. My work station is configured as:\nDell T7810, one CPU with Intel Xeon E5-2643 v4 @3.4GHz 6 cores 12 threads, memory 32 G, one NVIDIA Quadro K1200 with 4G memory and 512 cuda cores. My test results are as follows:\n  (1)   cylinder_Ascan_2D.in, cell number: 120*120*1\nCPU: 41.9 M memory, solver time 0.58 s, simulation time 1.45 s      \nGPU: 109 M memory, solver time 0.36 s, simulation time 3.57 s\n(2)   cylinder_Ascan_2D.in, increased cell number: 5000*5000*1=2500*e4\nCPU: 2.59 G memory, solver time 1 m 22 s, simulation time 1 m 27 s\nGPU: 2.84 G memory, solver time 28 s, simulation time 48 s\n(3) heterogeneous_soil.in, cell number: 150*150*100=175*e4\nCPU: 307 M memory, solver time 2 m 47 s, simulation time 3 m 3 s\nGPU: 375 M memory, solver time 35.1 s, simulation time 50.55 s\n(4) heterogeneous_soil.in, increased cell number: 300*300*500=4500*e4\nCPU: can compute\nGPU: warning of GPU memory beyond 4 G\n  I think the GPU mainly decreases the solver time, but it can not compute a large-scale model that consumes GPU memory. Generally, a large-scale model is in more need of GPU for solving linear system of equations, while the resulting memory consuming limits the utilization of GPU."
    },
    "responses": [
      {
        "author": "Mert Su",
        "date": "Oct 27, 2017, 10:30:56AM",
        "content": "Zhou,\n\nCan you try a 3D example \"Antenna 'like' Mala 1200\" and report the results?\n\nI am on Ubuntu 16.04, Intel i5-6660 4 Cores at 3.3 GHz, 16 GB Ram, one Quadro K1200 4GB.\n\nThis model consumes 1.2 GB of  GPU Ram and I see a steep performance decline in number of iterations per second for the cuda cores. It starts with 80 its/sec and drops almost immediately to 20 its/sec in 5 secs and stabilizes around there. \n\nI am wondering if you will see similar results. \n\nRegards,\nMert"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 27, 2017, 11:02:27AM",
        "content": "We have paper that gives more details of the GPU performance of gprMax that is currently in review. For now take a look at the graph on the News page of http://www.gprmax.com\nIt shows that GPU performance throughout increases with model size, reaching a plateau at ~300^3 cells and larger. The plateau is because the arrays that the GPU kernels are operating on become large enough to saturate the memory bandwidth of the GPU. The instantaneous its/sec counter is not really a reliable indicator of overall performance. A better measure is performance throughput in Mcells/s, e.g. P = (NX * NY * NZ * NT) / (T * 1e6), where NX, NY, NZ are the number of cells, NT is the number of time-steps, and T is the runtime of the simulation in seconds.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mert Su",
        "date": "Nov 2, 2017, 3:04:03PM",
        "content": "So, in essence a 560 GB/s bandwidth solves faster than 80 GB/s, if I understood it correctly."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3SmwJLsSZGM",
    "title": "one question about plotting B_scan",
    "original_post": {
      "author": "Zoey",
      "date": "Jul 14, 2019, 2:22:45AM",
      "content": "I have one question about plotting B_scan. The error is following:\n\n\nAnd the in file is cylinder_Bscan_2D.in of the user_models.\n\nAny answers would be appreciated."
    },
    "responses": [
      {
        "author": "Zoey",
        "date": "Jul 14, 2019, 2:24:15AM",
        "content": "the picture is here:"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 15, 2019, 4:24:53AM",
        "content": "Dear Zoey,\n\nSee the example in the docs for plotting a B-scan - http://docs.gprmax.com/en/latest/examples_simple_2D.html#results. You need to specify the electromagnetic field component that you want to plot. In the example model this is the Ez component.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Zoey",
        "date": "Aug 26, 2019, 9:26:10PM",
        "content": "Hi Craig\n\nI am sorry to reply you for so long time. Thank you very much! I got it!\n\nZoey"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jlVcyNcPM30",
    "title": "how antennas work in the simulator",
    "original_post": {
      "author": "Carlos Díaz",
      "date": "May 2, 2017, 8:07:35PM",
      "content": "Hi everybody,\n\nI am trying to understand how antennas work in the simulator, I have done simulations with de hertzian_dipole, GSSI and MALA antennas so I have some questions which I would apprecciate so much if you know what is the problem.\n\n1. When I set the polarisation of the source, for example y in the specific case of GSSI antenna, The bowties are aligned with the y axis so why is just the output the y component of the electric field? \n\n2. If I want to see the output in all components (x, y, z) of both fields (electric and magnetic) at the same simulation, how can I do it? Is it possible?\n\n3. I rotated the antenna setting True the variable rotate90, How could I rotate the antenna 45°? or 30°?\n\n4. In the attached picture is the result of the cylinder_Ascan_2D. It is with the hertzian dipole and it set the polarisation of the source in z,  why can I just plot the Ez? By the theorical survey there are all the fields at the same time, I dont understand why the simulator just generates in one direction.\n\nThanks for your helping.\n\nSincerely,\n\nCarlos Díaz\nBogotá, Colombia"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 3, 2017, 5:06:03AM",
        "content": "Hi Carlos,\n\nYou probably know this, but for the benefit of others reading this post....the Hertzian dipole is a theoretical source that can be used where a full model of an antenna is not required. The Hertzian dipole is part of the main gprMax package. The antenna models that are in the user libraries sub-package were created by me, and perform similarly to a GSSI 1.5GHz antenna and a Mala 1.2GHz antenna. \n\nBoth GSSI and Mala antenna models in their standard orientation (when their rotate90 parameters is set to False) have their transmitter and receiver bowties aligned with the y-direction. No particular reason for this choice, it is just the way I created them. However, it means that the source used to excite the transmitter bowtie must be polarised in the y-direction. Also the output from the receiver bowtie (which is the voltage in the gap between the bowtie arms) is obtained by sampling the y-component of the electric field at that point. So the receiver at that point only specifies the Ey output. \nSo long as you understand a bit of Python, you can easily edit the antennas.py module and add all the other outputs at the receiver if you desire, but why do you want to?\nThe antenna models can be used in either their standard orientation or rotated through 90 degrees. Other rotations are tricky because the geometry of antenna will not align well with the FDTD grid. This is important because some of the fine geometric details of the antenna can then become disconnected, e.g. with edges representing resistors, or with sources at the wrong location.\nThe receiver in the 'cylinder_Ascan_2D' model will plot all the field components (as you see in your attached plot). However, this is a 2D TMz model with a z-polarised source, so there will only be output on the Ez component and Hx, Hy components. If you extend this model to 3D you'll see output on the other components.\nHope this helps.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wMrij-qj9iU",
    "title": "Implementing a Heterogeneous Soil Model Using Mineral Composition Information",
    "original_post": {
      "author": "chaitanya...@gmail.com",
      "date": "Jul 16, 2024, 11:14:19AM",
      "content": "Hello everyone,\n\nI am trying to create a heterogeneous subsurface model. For this, I have information on how much percent weight each mineral is present (like % weight of FeO, Al2O3, etc.). However, I am not sure what exact resources to look up to find the electromagnetic properties of these different components.\n\nThe major problem I found was most studies are for nanoscience and other non-subsurface related applications, which makes me skeptical to use that data since they are trying to manipulate/observe microscopic/molecular level properties.\n\nIf anyone could give me a good reference for where to find electromagnetic properties of subsurface minerals reliable, I would highly appreciate it. Or maybe a way to tackle this problem would also work.\n\nRegards,\nChaitanya"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vDHlKS9SjUs",
    "title": "run error",
    "original_post": {
      "author": "cplasf cf",
      "date": "May 5, 2023, 10:34:46PM",
      "content": "raise TypeError(\"Accessing a group is done with bytes or str, \"\nTypeError: Accessing a group is done with bytes or str,  not <class 'slice'>"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3T7HFkHwYOA",
    "title": "Reflections on the edges that shouldn't appear",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Apr 23, 2020, 8:39:07AM",
      "content": "Dear Craig, Antonis and other gprMax users,\n\nI have the following problem:\n\nI have a model with a diffrator and an inclined layer (attached), however I realize that there are reflections on the edges that should not happen.\n\nCould you guide me to solve this problem?\n\nThanks in advance.\n\nBruno"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 23, 2020, 10:10:18AM",
        "content": "Hi Bruno,\n\nThe problem is caused but the PML absorbing boundaries which in general are not well designed to handle the inclined layers. They do exist as well for horizontal layers but not as pronounced.\n\nThe easiest solution is to increase the depth (i.e. size) of the PML using the corresponding pal layers command. The other option is to use the CFS-PML options to enhance the PML performance as well. gprMax has a very powerful and generic PML formulation that you can play with. The downside is that this is by a bit trial and error and needs some understanding of how the PML works. Increasing the size will work but might not be the optimum way especially for 3D models.\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "Bruno Barauna",
        "date": "Apr 23, 2020, 10:57:01AM",
        "content": "Antonis, thank you for your attention.\n\nThank you for the tips. Initially I will try to use the command #pml_cells: 20 20 0 20 20 0 and check the result. My modeling will be 2D. If the result is good it can be my way out. Otherwise, I will check out the other alternatives you suggested.\n\nSincerely,\n\nBruno"
      },
      {
        "author": "Bruno Barauna",
        "date": "May 4, 2020, 10:57:44AM",
        "content": "Craig,\n\nI'm trying to use the CFS PML, I read some articles that are suggested here on the website, but I'm not being able to parameterize correctly. Could you point me to another article that could help me choose these parameters. I'm using a 200 MHz antenna and 0.01 m discretization with a dash every 5 cm.\n\nBruno"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 4, 2020, 11:56:26AM",
        "content": "Hi Bruno,\n\nUnfortunately, optimising CFS PMLs and higher order PMLs is more of a trial and error process and there is not clear guidance in the literature in terms of an easy approach. The best think you can try is to add a small \"\\alpha\" parameter and see how it works for your problem. There is literature in CFS PML which give some examples but no guarantees that the parameters will work for the general case.\n\nThis is mainly a research topic that I work on and this functionality is there as we like to try and get more research into this area. The easier way to increase PML performance without doing any of these advanced options is to increase the size of it.\n\nBest\n\nAntonis"
      },
      {
        "author": "Bruno Barauna",
        "date": "May 5, 2020, 1:37:49PM",
        "content": "Antonis, thanks for listening.\n\nI'm here trying and one of the reflections is already weaker.\n\nMy master's advisor and I will commit ourselves. Thank you for the tips. Let's go deeper.\n\ngraciously\n\nBruno"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 5, 2020, 3:23:46PM",
        "content": "Hi Bruno,\n\nThere is a lot of literature on PMLs and implementations. The truth is that there is very little guidance on optimising the CFS-PML (alpha) and a lot less for Higher-Order or my Multi-pole. As I work on PMLs gprMax has the potential to do really complex ones (see the papers on the Higher-Order and Multipole) the performance can be very good. How to get it for a generic problem not so easy ... If you go deeper and find useful material to form recommendations then this is great!\n\nGood luck\n\nAntonis"
      },
      {
        "author": "Bruno Barauna",
        "date": "May 6, 2020, 3:45:08PM",
        "content": "Thank you very much, Antonis.\n\nI have a question, does the 'stair-casing error that can occur when trying to represent an object with a curved surface using cubic Yee cells have any relation to the implementation of CFS-PMLS? I tried to create a more complex geometry, but in the result I noticed many small hyperboles between the interfaces.\n\nAt first I thought that the edges of the pixels could introduce additional information, but another interpretation is that the reflections of the edges are generating this undesirable effect.\n\nOr are these separate problems?\n\nBest regards,\n\nBruno"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 6, 2020, 4:18:58PM",
        "content": "Hi Bruno,\n\nIt all depends by the resolution. If the cubes are relatively big in relation to the geometrical detail and and variation then obviously you are not really representing the model well. In 2D the stair casing is not really a big problem from the GPR standard case. It is less of a problem from dielectric targets. It is more important in 3D or the other equivalent 2D case (TE) and for metal targets.\n\nThe boundary errors can be easily seen as they start from the edges and can be for a number of reasons (e.g. a wave guiding effect between layers) the short answer is a thicker PML. If this resolves the issue then you know the cause. If it does not then it is something else in the description of the model.\n\nBest\n\nAntonis"
      },
      {
        "author": "Bruno Barauna",
        "date": "May 14, 2020, 10:46:29AM",
        "content": "Dear Antonis,\n\nI'm using the #pml_formulation: HORIPML command to insert the higher order PML's, but I want to know if there is a specific command to set the order. Or if I just modify the pml.py file. Because as was removed the #abc_order I had this doubt.\n\nThank you one more time,\n\nBruno"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 14, 2020, 11:06:09AM",
        "content": "Hi Bruno,\n\nThe HORIPML is the default so, I don't think you need this but it does not matter. Actually, the newer MRIPML might be easier to optimise as it is a newer idea with good performance (see the paper in IEEE TAP)\n\nThe command you need is #pml_cfs: where you can specify the parameters for a 2nd order PML or for a first order PML with an \\alpha parameter. \n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "May 14, 2020, 11:29:58AM",
        "content": "Bruno,\n\nJust to follow up what Antonis said, the #pml_cfs command (http://docs.gprmax.com/en/latest/input.html#pml-cfs) should be used once (with appropriate parameters) to specify a 1st order PML, and twice (with appropriate parameters) for a 2nd order PML. For example, a 2nd order MRIPML could be specified as:\n\n#pml_formulation: MRIPML\n\n#python:\nimport numpy as np\n\n# Parameters from http://dx.doi.org/10.1109/TAP.2018.2823864\nsmax1 = 0.65 * ((4 + 1) / (150 * np.pi * 0.001))\nsmax2 = 0.65 * ((2 + 1) / (150 * np.pi * 0.001))\nprint(f'#pml_cfs: quadratic reverse 0 0.15 quartic forward 1 12 quartic forward 0 {smax1}')\nprint(f'#pml_cfs: linear reverse 0 0.8 constant forward 0 0 quadratic forward 0 {smax2}')\n#end_python:\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "May 14, 2020, 2:43:06PM",
        "content": "Antonis and Craig, thank you very much for your lucid explanations. It was very clear to me now.\n\nSoon, I will read the article and adapt the parameters to my model.\n\nGraciously,\n\nBruno"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 2, 2020, 3:34:24AM",
        "content": "Hello all.\n\n\nI have a similar problem.\n\n\n\nI tried reading about the PML increase, however I do not posses enough enough knowledge about this kind of material science to get meaningful results.\n\nMy model looks something like this:\n\n\nWith black being air(-1) and the lower layers being a pseudo-random part of road, with some introduced cavities(bight stuff).\nModel is 10x3 and I sampled it every  5 cm in x direction.\n\n\nI would really appreciate a tip on the correct command to increase the PML, memory is not a problem, I am on 12GB GFX ram.\n\nCheers"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 2, 2020, 3:49:25AM",
        "content": "Tried increasing my PML cells but o no avail:\n\n\n#title: randomly generated road\n#domain: 10 3 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 1.75e-8\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.5 2.5 0 my_ricker\n#rx: 0.55 2.5 0\n#src_steps: 0.05 0 0\n#rx_steps: 0.05 0 0\n\n#geometry_objects_read: 0 0 0 rand_defects.h5 drawn_materials.txt\n\n#cylinder: 4 1.3 0 4 1.3 0.001 0.02 pec\n\n#pml_cells: 20 10 10 20 10 10\n\n Gets me\nraise CmdInputError(cmd + ' has too many cells for the domain size')\ngprMax.exceptions.CmdInputError: #pml_cells has too many cells for the domain size"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 2, 2020, 5:21:50AM",
        "content": "I did not see that the 2D case does not use y-PMLs(a least it seems so), so I used the command like this:\n\n#pml_cells 20 10 0 20 10 0"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2020, 11:09:20AM",
        "content": "The PML will be less effective with rough interfaces which is probably why you are seeing additional non-physical phenomena. There is (as far as we know) not really any research on designing or optimising PML formulations to account for rough interfaces. It is an area of research we are interested to explore, perhaps with a PhD if the right person can be found.\n\nFor now, as you have done you can try increasing the thickness of the PML which will improve performance. We can also look at different formulations and parameters as these can currently be adjusted (http://docs.gprmax.com/en/latest/input.html#pml-formulation & http://docs.gprmax.com/en/latest/input.html#pml-cfs), but again there is no 'right' way to choose these parameters, they will likely be different depending on specific model configurations.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8I-yREld07c",
    "title": "Simulating curved interface between two soil layers",
    "original_post": {
      "author": "Ahmed Mahbubah",
      "date": "Sep 1, 2024, 3:43:25PM",
      "content": "Hello,\n\nI am trying to simulate a soil profile something like the attached figure in gprMax. What can be the efficient way to model the curved interface between two layers? I have found 'fractal_box' concept but, I am having trouble in linking that command with the problem. Is it the only way to model this kind of profile?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/U3M_mD9lb3U",
    "title": "Attention gprMax users!!!",
    "original_post": {
      "author": "gprMax-users",
      "date": "Feb 14, 2022, 6:39:16PM",
      "content": "Hi everyone,\n\nIf you can spare a minute it will be nice to mark on our padlet map, that you can see also on the gprMax website, your location as a member of our gprMax community. It is really easy to do and it is obviously anonymous! \n\nIt is very nice to see how far and wide gprMax users are located!\n\nJust go at:  https://padlet.com/gprMax/ldcoxbkq8htsxblr\n\nOr you can do go to the padelt from our website. \n\nBest wishes\n\nAntonis"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_797H3ocq3g",
    "title": "Sources for stripline-mode excitation",
    "original_post": {
      "author": "Lauren Barr",
      "date": "May 16, 2022, 4:27:12AM",
      "content": "Hi there,\n\nThanks so much for this fantastic piece of piece of software!\n\nI am using gprMax to study pulses propagating along transmission lines, and trying to recreate some experimental results. I am struggling a bit to understand one thing - in my experiment I apply a time-varying potential difference between two or three parallel wires, or the wires and a ground plane. How could this be replicated in the modelling with a 'point' voltage source (or any alternatives)?\n\nI thought about having two voltage sources with pi phase difference between the waveforms, but I'm not sure this is correct, or how the sources should be oriented.\n\nAny advice would be really appreciated!\nLauren"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "May 17, 2022, 8:03:23AM",
        "content": "Hi,\nthere are several feed models that you can use to feed this  type of circuit. I am attaching a few papers discussing such models.\n\nThe Luebbers-Langdon model uses a voltage source with internal resistor. To connect two horizontal parallel metal plates, for example of a microstrip or stripline it makes a vertical staircase and then applies the voltage source. The staircase acts as a taper to minimize reflections and reduce the size to place a single voltage source with a resistor. In my experience, this works reasonably well if the circuit is well matched but if there are reflections, the source is not very well matched and generates multiple reflections.\n\nThe other model uses a vertical electric field between both the metallizations and introduces some compensations. I haven't tried this because it involves going under the hood in the software and I don't know or want to do this.\n\nA simple solution I have found (I believe it is similar to the second model but the analysis is beyond me) is to use a planar current (Hertzian dipole) to inject a current between the metals. You can use a current of a width of a single cell or multiple cells, the results are similar.\n\n\n\nAfter the current pulse is injected the source becomes an open circuit (disappears). If you embed the structure on one side on the PML any rebounds are completely absorbed by the PML so this source is very well matched (I have discussed this approach with Craig and Antonis in a previous post).  For example to simulate a perfectly matched microstrip you could do this:\n\nWhen you feed the current vertical (vertical edge feed current), there is a forward wave (going to the right) and a backwards wave (going to the left). The backwave is absorbed by the PML and the forward wave you can study. For example, you can measure the voltage a few cells away. There will be no reflected wave because of the PML on the right. The voltage wave generated is follows very closely the current pulse, with some minimal distorsion and the wave achieves a steady state solution within a few cells.\n\nThen you can do the same with a loading circuit and measure the total voltage for example. This will have the forward and reflected wave of the load (the backwave additionally is canceled by the PML). By substracting the wave from the first simulation from this one you can separate the incident and reflected wave from the load.\n\n\nSome detail on this  can be found in this paper (Section II-A beginning and Section II-B).\n\nhttps://arxiv.org/abs/2106.13737\n\nThis may suit your needs depending on what you want to do with the stripline.\n\nKind regards,\nAndres\n"
      },
      {
        "author": "Lauren Barr",
        "date": "May 20, 2022, 4:21:17AM",
        "content": "Hi Andres,\n\nThank you very much for your detailed reply, I will look into the method you suggest with the current source applied between the two conductors. I have a practical question about how to do this.\n\nWhen writing my script I can only define a source in one unit cell, so if I want to have a current applied along a line, do I just define multiple sources each spaced by one unit cell's length from the other? Eg.\n\n#dx_dy_dz: 0.1 0.1 0.1\n#waveform: gaussian 1 1e6 my_pulse\n#hertzian_dipole: 1.0 1.0 1.0 my_pulse\n#hertzian_dipole: 1.1 1.0 1.0 my_pulse\n#hertzian_dipole: 1.2 1.0 1.0 my_pulse\n#hertzian_dipole: 1.3 1.0 1.0 my_pulse\n\nOr is there an easier way to do this?\n\nI am also finding some peculiarities in the Hertzian dipole when I define a gaussian pulse. In a plot of the electric field with time, after the pulse has switched off I was left with a residual electric field that didn't decay away. However when I used the first time derivative of a gaussian as the pulse profile I didn't have this problem, nor when I used a voltage source instead of current. This was in a model with just a source surrounded by air, nothing more complicated than that. Is this what you describe as \"the source becomes an open circuit (disappears)\", or something else I may have misunderstood?\n\nMany thanks again,\nLauren\n"
      },
      {
        "author": "Lauren Barr",
        "date": "May 20, 2022, 4:29:28AM",
        "content": "Quick correction to my code snippet! The sources should have the orientation specified as x\n"
      },
      {
        "author": "Andres Altieri",
        "date": "May 24, 2022, 11:14:57AM",
        "content": "Hello,\nSorry for the late reply.\n\nIn order to simplify the code you should use the Python scripting option (Link), where you can use for loops and other python routines and data types.\n\nIn your script you write:\n#python:\n----> write python code here\n\n#end_python:\n\nI am attaching a basic script which generates a parallel plate waveguide with a current source excitation using Python:\n\n\n To make the stripline you should add the embedded conductor in the middle and modify the feed lines. In general it is better to work in mm in my opinion. Since dimensions are critical I convert from mm to m and define the domain carefully in number of cells instead of specifying the dimension in meters which may result in imprecisions. If the top and bottom sheets are PEC you could disable the PML an use this as a boundary condition above and below. Keep in mind the symmetry: for example is the plate is 10 cells wide one should place two current source in cells 5 and 6.\n\nWhat you observe of the electric field is reasonable. When you use a current pulse you are basically moving charges between the plates. Total shifted charge is the integral of the current over time. The gaussian pulse has a positive integral, hence when the electric pulse goes back to zero there will be a charge difference between the plates and the plates behave as a capacitor. There will be a residual electric field between the plates which generates a DC voltage between them.\nThe derivative of the gaussian pulse has a zero integral, hence the charges are moved from one plate to the other and then sent back to the original plate. The net displaced charge is zero, so the DC voltage difference at the end is zero. When you use a voltage source the voltage goes to zero, meaning that in the end there is not charge difference. It depends on what you want to do if this affects you or not.\n\n\nKind regards,\nAndrés\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/J363MrfALq4",
    "title": "GprMax Colab Template - GPU enabled",
    "original_post": {
      "author": "Mohammad Moazam",
      "date": "Apr 23, 2021, 4:54:44AM",
      "content": "Hello all\n\nI was working with gprMax and it is a computationally expensive operation. In such cases I usually depend on google colab, so I have developed this Colab template for GprMax.\n\nColab link here\n\nIf you face any issues, please do ping me.\n\nCheers\nMoazam"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rGgNNKlDIxI",
    "title": "#excitation_file with time vector",
    "original_post": {
      "author": "Simen Husøy",
      "date": "Jan 16, 2018, 6:39:01AM",
      "content": "Hi,\n\nI am trying to use a custom waveform with a time vector for my simulations. I do this because I want to define the signal as a function of time easily. When i run the simulation with the custom waveform i get an error saying: FloatingPointError: invalid value encountered in true_divide. What is the reason for this? I have tried to make the excitation file as the template in the documentation. Do anyone have an idea?\n\nSimen"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 16, 2018, 11:51:34AM",
        "content": "Hi Simen,\n\nThe error is related to the interpolation of your pulse from the excitation file. I'm looking into why this is happening, and will get back to you.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Simen Husøy",
        "date": "Jan 17, 2018, 3:13:35AM",
        "content": "Hi, \n\nI found the error! I used to few decimals in the mantissa of the time vector. This causes error in the interpolation between two points, since it tries to calculate the gradient between two equal points (y1-y1)/(x1-x1). I added 2 more digits to the mantissa and everything worked like it should.\n\nSimen"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 17, 2018, 4:13:10AM",
        "content": "Great. Good to know.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/oAbQloJ-O4k",
    "title": "How to solve the polarization problem",
    "original_post": {
      "author": "longxiang yao",
      "date": "Feb 28, 2025, 1:47:43AM",
      "content": "Dear GPRMAX team,\nThe figure below presents the four set of data I acquired from the same 3D GPRMAX model. The sole distinction lies in the polarization mode. It is distinctly observable that both the xz and zx polarization exhibit stronger direct waves than the co-polarization (xx and zz), see figure 2.\n\n\nQ①: Is this due to the antenna distance issue in the GPRMAX command settings, or is it because of the different electric field intensities at the antenna endpoints and sides?\nAnd after background removal, the results are shown in figure 3.\n\nQ②: In our initial hypothesis, we anticipated that for polarization, the effect of co-polarization would be more prominent than that of cross-polarization. However, my results indicate the contrary. I'm curious to know what might be the underlying cause.\nI'm very much looking forward to your reply."
    },
    "responses": [
      {
        "author": "liu ft",
        "date": "Apr 27, 2025, 10:37:46AM",
        "content": "Hello, \n\n\n    I am also experiencing the same issue. Have you resolved it? \n\nI'm very much looking forward to your reply.\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 28, 2025, 4:20:16AM",
        "content": "Your source is on the dielectric interface and  it will be better if it is a few cells further up. In reality your actual antenna structure is not on the interface. So, your y coordinate for the source and the receiver can be 0.758 this puts your source and receiver in air. It is still close to the interface but it is more realistic. The other issue you have is that in FDTD field components are not at the same location and as a result your cross polarisation component is not exactly at the same x position as the source. To get a better simulation of this you can take the average of two z components by getting the output also at z at 0.048 and then average the z components. \n\nSo, your source and receiver should be\n\n#waveform: ricker 1 12e8 my_ricker \n#hertzian_dipole: x 0.3 0.758 0.05 my_ricker\n#rx: 0.4 0.758 0.05\n#rx: 0.4 0.758 0.048\n\nTry this and let me know how it worked. \n\nAlso, in gprMAx models instead of defining the material \"air\" you can use \"free_space\" without definition as well as \"pec\" as they are already known in the code.\n\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JOjlaorSgzI",
    "title": "Getting raw values from Ascan output file",
    "original_post": {
      "author": "Parikshit Sah",
      "date": "Mar 7, 2024, 6:22:03PM",
      "content": "Hi,\nI have an ascan .out file that I want to extract the data values from instead of only viewing the Ascan plot. Is there an existing tool in gprMax that I can make use of, I tried to find related documentation but could not. \n\nI noticed that the output files are in HDF5 format. Would I be able to extract data normally using h5py library like the ascan plot tool?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 8, 2024, 4:17:51AM",
        "content": "Yes - the output file is in HDF5 format, so it can be read by standard HDF5 readers/tools, i.e. Python, MATLAB or HDFView (https://www.hdfgroup.org/downloads/hdfview/).\n\nCraig\n\n"
      },
      {
        "author": "Colin Stark",
        "date": "Mar 8, 2024, 7:50:39AM",
        "content": "FWIW, VS code has a plugin that can read HDF5 files and even plot data slices. It's incredibly useful if you're exploring gprMax output but don't want the bother of loading and parsing the HDF5 in e.g Python.\n"
      },
      {
        "author": "Parikshit Sah",
        "date": "Mar 22, 2024, 1:29:03PM",
        "content": "Hi,\nThanks for the response, I will give it a try\n-Sah\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hI1PoITZt7c",
    "title": "image prepossing",
    "original_post": {
      "author": "Kiki Dempsey",
      "date": "Nov 29, 2023, 10:16:49PM",
      "content": "In the scenario includes grass. I'm unable to see the hyperbola where it should be. I suspect that the issue might be due to excessive background noise. If I don't subtract the background noise, which is generated by gprMax in the same environment, and only rely on preprocessing methods, how can I make the hyperbola more visible?\nthe first picture generate by gprmax in the scenario include grass\nthe secend image subtract the background noise"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nmjp3iNcdvQ",
    "title": "Ground coupling for GSSI1500",
    "original_post": {
      "author": "Mert Su",
      "date": "Aug 30, 2018, 4:33:00PM",
      "content": "I have a model below which I am executing with the \"python -m gprMax test.in -n 5 -gpu\"\nLatest gprMax on ubuntu 16.04\n\ntest.in\n#title: GSSI 1500 MHz\n#domain: 1.30 0.148 0.534\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 8e-9\n\n#material: 2.55 0.0017 1 0 sand\n\n#box: 0 0 0 1.3 0.148 0.470 sand\n#cylinder: 0 0.074 0.170 1.3 0.074 0.170 0.010 pec\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.605 + current_model_run * 0.005, 0.074, 0.470, 0.002)\n#end_python:\n\nThere seems to be a coupling error between the ground and the GSSI 1500 Mhz antenna. It may be a numerical error. It is very consistent. So far I have confirmed;\n-gpu or no gpu is not the problem\ntoggling the #cylinder on/off between models produces same ground-coupling issue.\nchanging the host material parameter (sand) to less conductive has no effect either\nMerging output files is not the problem\nupdated the package, that is not the problem.\nIt seems that the consecutive signals are a time-step off. It becomes more apparent with more runs. Please see the images. If you zoom out you will see more clearly that the ground-coupled signal is jagged. Surprisingly, the deeper signal is not off.\n\nRegards,\nMert"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 31, 2018, 7:24:03AM",
        "content": "Hi Mert,\n\nI don't really understand or see what you are referring to. Can you explain more fully some of your statements:\n\n1. 'consecutive signals are a time-step off'\n2. 'the ground-coupled signal is jagged'\n\nFrom the geometry of your model (see attached image) I can see that you are using an elongated domain. The top of the antenna (z-direction) is inside the PML, and the sides of the antenna (y-direction) are right against the PML. You should always try to leave at least 10 cells of gap between objects and the PML boundaries in order that the PML can be most effective.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mert Su",
        "date": "Sep 5, 2018, 3:35:28PM",
        "content": "Craig,\n \nFor this particular model, there are 2079 time-steps in each scan. Please take a look at the merged output figure. When zoom out, the direct wave in scan #1 is received at time-step n, the direct wave in scan #2 is received at time-step n+1, the direct wave in scan #3 is received at time-step n and so on. Even when I increase the size of the PML region, this does not change.\n\n\n\nBelow is another example. This time I did not place anything except free_space and I increased the size of the model for proper PML placement. The result is the same.\n\n\n#title: free_space GSSI 1500 MHz\n#domain: 1.30 0.188 0.544\n\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 8e-9\n\n#box: 0 0 0 1.3 0.188 0.470 free_space\n\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_1500\nantenna_like_GSSI_1500(0.605 + current_model_run * 0.005, 0.094, 0.470, 0.002)\n#end_python:"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 5, 2018, 4:19:50PM",
        "content": "Hi Mert,\n\nThat is interesting. If you do not use the antenna but a Hertzian dipole are the results OK? In this case it should not be the script that joint the traces together. The small issue I see is that you are moving the antenna in x direction in multiples of 0.005. This is not a multiple of the spatial step and there will a rounding done internally on the position of the antenna which will be different. I think that should not make a difference but can you try with a step say of 0.004 and see if that changed the output to what is expected?\n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2018, 4:01:26AM",
        "content": "Hi Mert,\n\nYes, I see the issue now. Indeed, as Antonis suggests, I think it is being caused by the step size you are using to move the antenna. All object dimensions are internally rounded to the nearest cell coordinate. Therefore the position/geometry of the antenna is being rounded to values that are not a multiple of the spatial resolution. If you try with a step size of 4mm that should confirm it - I will then add a note to docs about this so that others are aware.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Mert Su",
        "date": "Sep 6, 2018, 10:12:18AM",
        "content": "Thank you, Antonis and Craig. That was the problem."
      },
      {
        "author": "Craig Warren",
        "date": "Sep 6, 2018, 10:50:15AM",
        "content": "Great, glad it is solved. I've added a note to the docs in case anyone else is tripped up.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/icPyd0YD9Q0",
    "title": "Transfer fuction (S21) of whole GPR module (Tx,Rx antennas and the buried targets)",
    "original_post": {
      "author": "Pamela Manase",
      "date": "Jul 3, 2020, 8:04:42AM",
      "content": "Dear gprMax community\n\n\nI was kindly asking how to have access to the input source waveform in gprMax i.e in V/m directly from the Tx antenna.\n\n\nI need to calculate the Transfer function (S21) of my whole model of GPR (Tx and Rx  antennas and the buried targets) \n\n\n==> To have an equivalent of Channel frequency response/ Impulse response of my whole GPR module from gprMax simulations\n\n\nWe have acess to  output from Rx ofcourse i.e in V/m\n\nBut I need the input information directly from the transmitter,  but I dont know how to acess it. I use herzian dipole + ricker waveform. \n\n\nThank you so much in advance !\n\n\nBest Regards\n\nPamela"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 3, 2020, 9:10:07AM",
        "content": "Hi Pamela,\n\nIf you are modelling the antenna structure you should not really use the Hertzian Dipole source which adds a current density term in that point.  The transmission line model and voltage source is a better approach. The waveform that will be applied is given by the description (e.g. gaussian pulse) If you modelling the antenna structure a monopulse will work as the antennas kills the DC and in essence radiates a derivative. \n\nAnother option is to see how the provided model of the 1.5GHz antenna is done especially in terms of the excitation.\n\n\nHope this makes sense! \n\nBest\n\nAntonis"
      },
      {
        "author": "Pamela Manase",
        "date": "Jul 6, 2020, 4:26:03AM",
        "content": "Dear Antonis\n\n\nThank you so much for your reply. I understood , will take a closer look into a correct type of source to use for my model.\n\n\nRegards\n\n\nPamela"
      },
      {
        "author": "Pamela Manase",
        "date": "Jul 7, 2020, 8:00:26AM",
        "content": "Dear Antonis\n\nIs there any means that I can access the Electric field emitted in V/m directly the source i.e from voltage/transmission line source + ricker waveform?\n\n\nJust to be more clear:\n\nExample if I am using voltage source+ricker ==> amplitude of source waveform will be in volts, then  I thought of  using this formula V=-Ed  to calculate the emitted field from the transmitter in V/m ?\n\nAim\n\nI need to have the Channel Frequency Response H(f) OR Channel Impulse Response  h(\\tau)  of the whole GPR system model (please see the attachment) I have design in gprMax (voltage source + buried target + Rx )\n\n\n        H(f) = E_out(f) / E_in(f)\n\n\nE_out (f) ==> I can have it from Rx ==>as a matrix ==>  field(Ntime x Nposition)\n\nE_in(f) => This is where I am stuck on how to access this data from gprMax ( I do not prefer to use direct wave since this value is recorded from Rx and involve coupling with the ground and it is accesed from Rx not Tx)\n\n\nThank you so much in advance, I am sory for the long explanation !!\n\n\nRegards\n\nPamela"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 7, 2020, 9:48:46AM",
        "content": "Hi Pamela,\n\nIn FDTD Voltage across a Yee cell edge will be simply related to Electric field as V=-E*DL In essence this is just a scaling factor and not as important as far as you are consistent on what you are doing. In exciting a model there are a number of options. 1. to add a current density term at a point and that creates a \"transparent no-reflecting source\" (i.e. incoming waves do not get reflected by its presence) and this is how you get a Hertzian Dipole or 2. to add a Voltage Source with or with out resistance using a similar analogy by creating a small circuit relation at this cell edge. We do this for the Voltage source formulation with resistance. If you use an old style hard source you then prescribe the electric field in this location and it is called a hard source because when it goes to zero it is equivalent to placing a small PEC edge there (E =0) and can reflect incoming waves. 3. The transmission line source tries to do something similar to the Voltage source by connecting a 1D FDTD to the 3D one at the excitation point offering both reflected and incident pulses. It is an approximation that works better for monopoles (coaxial feeds but we do not implement this yet) but it is OK for the dipole antennas we often use but not perfect (this is another story ...)\n\nWhat it seems you want to do is to deconvolve from your response the \"forcing function\" (i.e. the source) to obtain the impulse response of the system. As far as the amplitude scaling of both receiver and transmitter are the same it will work. The other way is to excite the model with an impulse (1,0 ...) and this will give you the \"digital FDTD Green's function\" of the model. Now this response is not valid as it is as the FDTD solution is not valid for all wavelengths. However, if you convolve this response with any properly weighed in terms of its spectrum excitation function the results will be identical with the ones that you will get if you had excited the model with this function in the first place. Alternatively you can FFT the \"erroneous\" impulse response which will give you in the frequency domain the H(f) but this will only be valid for the frequencies that the simulation is accurate (i.e. the ones that the Lambda/10 criteria is satisfied) these frequencies are a lot less than the ones contained by the transformation that goes up to the Nyquist one. \n\nObviously, if this all happens in 2D the discussion is practically academic as it will not really relate to a proper system function for obvious reasons ...\n\nHope this helps (or I might not have understood your questions ...)\n\nBest\n\nAntonis"
      },
      {
        "author": "C Master",
        "date": "Nov 3, 2020, 7:35:24AM",
        "content": "Hi  Pamela Manase ，\n\nI find that my problem is similar to yours, and I hope your problem has been solved.\n I'm going to use the Hertzian dipole as the source, but I don't know how to set its current value. I have a fixed power for this source, and how do I use that power to calculate the current from this source, or the strength of the electric field that the source is emitting.\n\nbest，\nC Master\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 3, 2020, 7:45:17AM",
        "content": "It is easy to see in the documentation how the Hertzian Dipole is implemented\n\nhttp://docs.gprmax.com/en/latest/input.html#hertzian-dipole\n\nWhen you use the Hertzian Dipole source your waveform specifies the time variation of the current pulse on it I(t) in Amperes. \n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FgZLFtfxMW4",
    "title": "why can't I see the target in the picture",
    "original_post": {
      "author": "小辰",
      "date": "Nov 21, 2017, 11:59:57AM",
      "content": "1\n2\n\n\nI am running the program. What the picture 1 shows is my output. I create two cylinders. But I can hardly see the target in the picture 1. I want to draw the picture of the model like picture 2 shows. Can someone tell why?\nBesides, I can just set the polarization of the transmitter like x,y or z. How can I set the polarization of the receiver."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 23, 2017, 9:13:37AM",
        "content": "Last question first: for an explanation of receiver polarisation see this post http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FiNTimYf8Kno%2FUDrWJyxUAwAJ\n\nYou need to provide some more details of what you are trying to model if you want assistance. Ideally copy/paste or attach your input file. Also please explain what the two images are from - is picture 1 real data or from gprMax?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "小辰",
        "date": "Nov 26, 2017, 11:46:31AM",
        "content": "Sorry to be late to response. My VPN is limited.\n1.If I want to see the xy polarization, I can just set the polarization of the transmitter in the x direction and see the Ey. Do I understand correctly?\n2.Sorry, I have forgotten to paste the input files. Follows are my input file. I want to change the axis of the two cylinders in the x direction or in the y direction. Maybe some other angles, like 45, 60. And then I want to see what their fields will be in different polarization, like xx,xy,yx and yy. Picture 1 is made by others. It has two targets in the model and they are in different angles.It is showed in different polarization and I just chose one. Picture 2 is from gprmax and is made by me.The input file is pasted. I fail to see the target in the picture 2. \n#material: 6.0 0.01 1.0 0.0 soil\n#material: 13.0 0.01 1.0 0.0 metal\n--------------------------------------\n#domain: 1.5 0.8 0.85\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 20e-9\n-------------------------------------\n#box: 0.0 0.0 0.0 1.5 0.8 0.75 soil\n#cylinder: 0.3 0.4 0.4 0.7 0.4 0.4 0.1 metal\n#cylinder: 1.0 0.2 0.4 1.0 0.6 0.4 0.1 metal\n--------------------------------------------\n#waveform: ricker 1.0 900e6 MySource\n#hertzian_dipole: y 0.25 0.4 0.8 MySource\n#rx: 0.45 0.4 0.8\n#src_steps: 0.04 0.0 0.0\n#rx_steps: 0.04 0.0 0.0"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 27, 2017, 6:01:01AM",
        "content": "In answer to 1), Yes. Also remember your source model is a Hertzian dipole, not a physical model of a GPR antenna.\n\nThere are several basic issues with your input file that you need to understand and fix before we can look at the specific scenario you are trying to model:\n\na) Your source and receiver are positioned within the PML, you need to move them out of the PML. See the warning messages (in red) when you run the model. You should not, normally, have sources, receivers, or targets positioned inside the PML. Checking the geometry of your model (#geometry_view command) will also help here.\nb) Your model is suffering from numerical dispersion (see http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretisation), you need to adjust the spatial discretisation.\nc) Why have you defined 'metal' with a relative permittivity of 13? You can use the built-in 'pec' to simulate metal.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "小辰",
        "date": "Nov 29, 2017, 11:45:34AM",
        "content": "Thank you for you advice and I can see the target now. But I still have some question.\n1.What;s the difference between the Hertzian dipole and a physical model.Does it affect the consequence of the polarisation?\n2.After following your advice, I move the source and receiver out of the PML and replace the 'metal' with pec. I can see the consequence now. But it still has the warning about the numerical dispersion. Take the input file pasted above as an example. The frequency is f=900e6 ,so the wavelength is l=c/f=3e8/900e6=1/3. The increment is deltal=0.01(dx,dy,dz). deltal=0.01<l/10=0.03. It is ten times smaller than the wavelength. Why is it still wrong?  When I run the model, it reminds me of the numerical dispersion of the material  'soil'. I really wonder why.\n\nKind regards"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 30, 2017, 6:17:37AM",
        "content": "Most of the answers to your questions are in the documentation.\n\n1. The Hertzian dipole source specifies a current density term (with different definable polarisations), see: http://docs.gprmax.com/en/latest/input.html#hertzian-dipole\n\n2. You need to have a bit more understanding of the basics of FDTD method, and in particular velocity error (numerical dispersion). To calculate a spatial resolution to minimise numerical dispersion you need to consider the smallest wavelength and the highest frequency of interest in your model. So the highest frequency will not be the centre frequency of the waveform - do a FFT of the signal to analyse what the highest frequency of interest - it will likely by 3-4 times the centre frequency. Also the smallest wavelength will not occur in free space, it will occur in the material with the highest permittivity, which in your case is soil (Er=6).\n\nKind regards,\n\nCraig"
      },
      {
        "author": "小辰",
        "date": "Dec 16, 2017, 10:31:15AM",
        "content": "Thank you for your help.\nI am a new learner. In fact, I still can't  understand the numerical dispersion. The input file still has trouble with numerical dispersion. It reminds me of the 'soil' whose wavelength sampled by 8 cells. I fail to understand it. Can you show me how to correct. \n#material: 6.0 0.01 1.0 0.0 soil\n         --------------------------------------\n#domain: 1.5 0.8 0.85\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 14e-9\n-------------------------------------\n#box: 0.0 0.0 0.0 1.5 0.8 0.7 soil\n#cylinder: 0.3 0.4 0.4 0.6 0.4 0.4 0.08 pec\n#cylinder: 0.8 0.4 0.4 1.1 0.4 0.4 0.08 pec\n--------------------------------------------\n#waveform: ricker 1.0 900e6 MySource\n#hertzian_dipole: y 0.25 0.4 0.75 MySource\n\n以y极化方式入射\n\n#rx: 0.45 0.4 0.75\n#src_steps: 0.04 0.0 0.0\n#rx_steps: 0.04 0.0 0.0\n-------------------------------------\n\n\nBest wishes.\n\nWz"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 17, 2017, 10:51:03AM",
        "content": "The following is very helpful in understanding the FDTD method that gprMax uses to solve Maxwell's equations and simulate GPR. It is free and Open Source and will help you understand what numerical dispersion is and how to use FDTD properly to model what you need.\n\nhttp://www.eecs.wsu.edu/~schneidj/ufdtd/\n\nAntonis"
      },
      {
        "author": "Wz",
        "date": "Dec 17, 2017, 1:45:49PM",
        "content": "Thank you.\n\nWz"
      },
      {
        "author": "他我",
        "date": "Apr 19, 2023, 12:37:42PM",
        "content": "Excuse me, which article is this, the link has expired“ http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FiNTimYf8Kno%2FUDrWJyxUAwAJ  ”\n\n在2017年12月18日星期一 UTC+8 02:45:49<Wz> 写道：\nThank you.\n\nWz"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 19, 2023, 3:24:06PM",
        "content": "https://groups.google.com/g/gprmax/c/iNTimYf8Kno/m/UDrWJyxUAwAJ\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_qXNZoso1t8",
    "title": "Google Summer of Code 2021",
    "original_post": {
      "author": "Craig Warren",
      "date": "Mar 10, 2021, 6:08:19AM",
      "content": "gprMax is one of 202 open source projects to be an organisation in Google Summer of Code 2021 (GSoC). \n\n\"Spend your summer break writing code and learning about open source development while earning a stipend! Accepted students work with a mentor and become a part of the open source community. Many become lifetime open source developers!\"\n\nThis is an opportunity to get paid to contribute to open source scientific software. If you are interested in applying please have a look at our Project Ideas List and contact either of the mentors - myself (craig at gprmax dot com), Antonis (antonis at gprmax dot com), Iraklis (giannakis dot iraklis at gmail dot com), or John (johnmatthewhartley at gmail dot com). All information on applying to GSoC is available on their website along with a useful set of FAQs.\n\nA couple of further pointers for GSoC:\n\n1. Read our docs - http://docs.gprmax.com\n2. Have a look at the structure of our code, particularly the 'devel' branch which will soon become our 'master' release.\n3. Try installing gprMax and running some of the simple examples.\n\nKind regards,\n\nCraig"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Mar 15, 2021, 5:00:24PM",
        "content": "There are lots of nice ideas that I hope will come to life\n\nWhich you the best\n\nChristian\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 17, 2021, 4:40:23PM",
        "content": "We are excited about participating in GSoC2021 as an open source org! \n\nWe are arranging a live webinar session which will take place on Tuesday 23rd March, 0930-1030 GMT. \n\nThe main purpose of the webinar is to provide more details and background to the projects on our GSoC2021 ideas list (https://github.com/gprMax/gprMax/blob/master/gsoc/project-ideas-2021.md). It will also be an opportunity for you to ask any questions about the projects or more generally about gprMax. \n\nIf you would like to attend the webinar please register your details using the following Google Form - https://forms.gle/ewPFzrVFbSGbxYTv7 We will then send you a link to join the webinar closer to the date.\n\nKind regards,\n\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vzXUeZB4z4o",
    "title": "add an outer layer on cylinder",
    "original_post": {
      "author": "Phoebe Wong",
      "date": "Nov 22, 2018, 2:39:01AM",
      "content": "Dear all,\n\nI am trying to add a layer on a cylinder object, the current approach is constructing 2 cylinder objects with the same center coordinates, where the radius of the outer layer is greater than the inner cylinder.\n\nExample:\n\ncylinder\n#cylinder: 0.200 0.114 0 0.200 0.114 0.002 0.006 pec\nlayer\n#cylinder: 0.200 0.114 0 0.200 0.114 0.002 0.007 material2\nIt does not seem successful as the material interface layer-cylinder-layer is not created (as displayed in the command prompt) and the location of the object is shown as the outer layer material (grey circle) in Paraview, where the material of the inner cylinder is depicted as blue here.\n\n\nThis is the desired output.\n\nI don't know how I can achieve it, I can provide more information if needed.\n\nThanks and regards,\nPhoebe"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 22, 2018, 3:39:33AM",
        "content": "Hi Phoebe,\n\nBuilding geometry in gprMax is like working from a painters canvas, i.e. a layered approach. Therefore the order in which you specify the geometry commands is critical. From your code snippet, I can see that your pec cylinder will be completed overwritten by the cylinder made of material2. This is because the cylinder made of material2 is of larger radius, and comes after the pec cylinder. So if you want to achieve a solid pec cylinder with a layer of material2 around the outside, the material2 cylinder must come first, e.g.\n\n#cylinder: 0.200 0.114 0 0.200 0.114 0.002 0.007 material2\n\n#cylinder: 0.200 0.114 0 0.200 0.114 0.002 0.006 pec\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 23, 2018, 6:08:47AM",
        "content": "Hi Phoebe, \n\nI also meant to say that is the spatial resolution of your model is 2mm and the difference in diameter between the two cylinders is also 2mm, that's means a difference of only a single cell. So just check your geometry carefully.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5BRFguU34O4",
    "title": "Wire dipole antenna for Bscan",
    "original_post": {
      "author": "Selim Sahin",
      "date": "Jan 27, 2019, 7:03:47AM",
      "content": "Hello,\n\nI am working to genetare a series of Bscans. I have used built in GSSI like antenna model for realistic results but the time required for one Bscan was about 1 hour for a not too complex medium. I want to shorten this duration. Therefore I have tried parallel computation on GPU. Since the graphical card I use is not so powerful no significant improvement happened.\nThe idea to use wire dipole antenna seems good to shorten the duration. As far as I know there is not a detailed example of this antenna in the documentation. Should I add a receiver with #rx command into model or a receiver which is also a wire dipole antenna? What would be the difference? I guess current_model_run variable must be used to move the antennas positions between Ascans, right?\nIn the first place, is it wise to use wire dipole antenna for time concerns instead of complex antenna models? Can you advise me another solution to speed up the process? There are alot of questions I have accumulated and asked at once :) Thank you for help in advance.\n\nRegards,\nSelim"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 27, 2019, 7:37:14AM",
        "content": "Hi Selim,\n\nYou are asking an interesting question. The answer depends on what you want to achieve and what is the key to understand it is the balance between replicating the GPR response as faithfully as possible and balancing at the same time the computational requirements. The more simplified the model is the faster will run and the less resources will need. However, there might be a point that it has become too simple to be useful but this will depend on what is needed for.\n\nUsing a theoretical Hertzian dipole source and a point receiver will give you a good representation of scattering patters and general mechanisms that generate some GPR responses but will not mimic a GPR response at the exact signal level. So, the wavelets might not match when compared as A-scans but the B-scans patterns will be similar and the arrival of the responses could match well enough. It can be very useful for a number of studies. In the same way a 2D model can help us understand complex concepts as well but it cannot really be used for exact GPR signal analysis.\n\nUsing a full 3D antenna model that is optimised to provide a very close match between the simulation and the real GPR data can help with a number of more advanced studies and inversion processes as well but the computational cost is significant as you need big detailed models of the antenna structure in addition with the targets etc. \n\nUsing something in between as a \"wire model\" could or not improve your modelling from the level provide by a simple Hertzian dipole to the full antenna range or not. It all will depend on how this wire model is build and what type of GPR antenna is trying to model. A pure PEC wire antenna will create a resonant dipole that will introduce ringing so it will not be as useful. A resistively loaded wire might be an adequate model that might be better than a simple Hertzian dipole. I will use the same one as a receiver and not just a simple field output point. \n\nThe answer is all about experimentation. You need to develop the model and test it do see if it works for what you are trying to simulate. There is not ready made answer on this. In essence you are trying to introduce just a radiating element without the complexity of other aspects such are shields etc. It can provide an interesting answer and you can get the response reasonably close but need to experiment and see if that can be done and it will depend on the actual antenna you are trying to model. Low frequency antennas can be approximated like that a lot better than high frequency ones.\n\nHope this helps!\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vMb8OvVMsSk",
    "title": "antenna simulation problem",
    "original_post": {
      "author": "Bernd Schafferer",
      "date": "Feb 21, 2017, 1:51:29PM",
      "content": "Hi, \n\nI tried to run the code snippet from the  examples (antenna fed by a transmission line). \nBut, the simulation will not finish and i can't  interpret the error message.\n\n\nThanks, \nBernd\n     \n\n\n\n\nipython cell1 \n----------------------------------------------------------------------------------------------------------------\n%%writefile gprmax1.in\n#domain: 0.050 0.050 0.200\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 60e-9\n\n#waveform: gaussian 1 1e9 mypulse\n#transmission_line: z 0.025 0.025 0.100 73 mypulse\n\n## 150mm length\n#edge: 0.025 0.025 0.025 0.025 0.025 0.175 pec\n\n## 1mm gap at centre of dipole\n#edge: 0.025 0.025 0.100 0.025 0.025 0.101 free_space\n\n\n\n\n\n\nipython cell2 \n----------------------------------------------------------------------------------------------------------------\n\napi('gprmax1.in', n=1, geometry_only=False)\n\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method \n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                       v3.0.16 (Bowmore)\n\n Copyright (C) 2015-2017: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the\n  terms of the GNU General Public License as published by the Free Software\n  Foundation, either version 3 of the License, or (at your option) any later\n  version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY\n  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n  A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with\n  gprMax.  If not, see www.gnu.org/licenses.\n\nHost: Sony Corporation SVD13213CXB; Intel(R) Core(TM) i5-4200U CPU @ 1.60GHz (2 cores); 3.9GiB RAM; Windows 10 (64-bit)\n\n--- Model 1/1, input file: C:\\Users\\bernd\\Desktop\\gprMax\\tools\\Jupyter notebooks\\oven\\gprmax1.in \n\nConstants/variables used/available for Python scripting: {c: 299792458.0, current_model_run: 1, e0: 8.854187817620389e-12, input_directory: C:\\Users\\bernd\\Desktop\\gprMax\\tools\\Jupyter notebooks\\oven, m0: 1.2566370614359173e-06, number_model_runs: 1, z0: 376.73031346177066}\n\nNumber of (OpenMP) threads: 2\nSpatial discretisation: 0.001 x 0.001 x 0.001m\nDomain size: 0.05 x 0.05 x 0.2m (50 x 50 x 200 = 500000 cells)\nEstimated memory (RAM) required: ~107MB\nTime step (at 3D CFL limit): 1.92583e-12 secs\nTime window: 6e-08 secs (31156 iterations)\n\nWaveform mypulse of type gaussian with maximum amplitude scaling 1, frequency 1e+09Hz created.\nTransmission line with polarity z at 0.025m, 0.025m, 0.1m, resistance 73.0 Ohms, using waveform mypulse created.\nEdge from 0.025m, 0.025m, 0.025m, to 0.025m, 0.025m, 0.175m of material pec created.\nEdge from 0.025m, 0.025m, 0.1m, to 0.025m, 0.025m, 0.101m of material free_space created.\n\nPML boundaries: 10 cells\nBuilding PML boundaries: 100%|███████████████████| 6/6 [00:00<00:00, 13.05it/s]\n\nBuilding main grid: 100%|████████████████████████| 2/2 [00:00<00:00, 25.03it/s]\n\nMaterials:\n    |            |         |       | sigma |      | sigma* | Dielectric \n ID | Name       | Type    | eps_r | [S/m] | mu_r | [S/m]  | smoothable \n----+------------+---------+-------+-------+------+--------+------------\n  0 | pec        | builtin | 1     | inf   | 1    | 0      | False      \n  1 | free_space | builtin | 1     | 0     | 1    | 0      | True       \n\nNumerical dispersion analysis: estimated largest physical phase-velocity error is -0.02% in material 'free_space' whose wavelength is sampled by 79 cells. Maximum significant frequency estimated as 3.74992e+09Hz\n\nOutput file: C:\\Users\\bernd\\Desktop\\gprMax\\tools\\Jupyter notebooks\\oven\\gprmax1.out\n\nRunning simulation, model 1/1:   0%|                 | 0/31156 [00:00<?, ?it/s]\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-631990e22b08> in <module>()\n----> 1 api('gprmax1.in', n=1, geometry_only=False)\n\nC:\\Anaconda3\\envs\\gprmax\\lib\\site-packages\\gprmax-3.0.16-py3.5-win-amd64.egg\\gprMax\\gprMax.py in api(inputfile, n, mpi, taskid, benchmark, geometry_only, geometry_fixed, write_processed, opt_taguchi)\n     94     args.opt_taguchi = opt_taguchi\n     95 \n---> 96     run_main(args)\n     97 \n     98 \n\nC:\\Anaconda3\\envs\\gprmax\\lib\\site-packages\\gprmax-3.0.16-py3.5-win-amd64.egg\\gprMax\\gprMax.py in run_main(args)\n    144         # Standard behaviour - models run serially with each model parallelised with OpenMP\n    145         else:\n--> 146             run_std_sim(args, numbermodelruns, inputfile, usernamespace)\n    147 \n    148 \n\nC:\\Anaconda3\\envs\\gprmax\\lib\\site-packages\\gprmax-3.0.16-py3.5-win-amd64.egg\\gprMax\\gprMax.py in run_std_sim(args, numbermodelruns, inputfile, usernamespace, optparams)\n    167         else:\n    168             modelusernamespace = usernamespace\n--> 169         run_model(args, modelrun, numbermodelruns, inputfile, modelusernamespace)\n    170     tsimend = perf_counter()\n    171     simcompletestr = '\\n=== Simulation completed in [HH:MM:SS]: {}'.format(datetime.timedelta(seconds=int(tsimend - tsimstart)))\n\nC:\\Anaconda3\\envs\\gprmax\\lib\\site-packages\\gprmax-3.0.16-py3.5-win-amd64.egg\\gprMax\\gprMax.py in run_model(args, modelrun, numbermodelruns, inputfile, usernamespace)\n    573             # Update magnetic field components from sources\n    574             for source in G.transmissionlines + G.magneticdipoles:\n--> 575                 source.update_magnetic(abstime, G.updatecoeffsH, G.ID, G.Hx, G.Hy, G.Hz, G)\n    576 \n    577             # Increment absolute time value\n\nC:\\Anaconda3\\envs\\gprmax\\lib\\site-packages\\gprmax-3.0.16-py3.5-win-amd64.egg\\gprMax\\sources.py in update_magnetic(self, abstime, updatecoeffsH, ID, Hx, Hy, Hz, G)\n    349 \n    350             elif self.polarisation == 'z':\n--> 351                 self.current[self.antpos] = Iz(i, j, k, G.Hx, G.Hy, G)\n    352 \n    353             self.update_current(time, G)\n\nTypeError: Iz() missing 1 required positional argument: 'G'"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 22, 2017, 4:39:23AM",
        "content": "Hi Bernd,\n\nWelcome to the forum!\n\nIf you pull the latest code (v.3.0.17) this issue should be resolved. I had changed the arguments used to calculate current in a transmission line and this particular function had not been updated until I made other changes yesterday.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Bernd Schafferer",
        "date": "Feb 22, 2017, 6:29:53PM",
        "content": "Dear Craig,\n\nThanks ...it works now \n\nBernd"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Z0Q0A1P8fDU",
    "title": "Remove Direct Wave",
    "original_post": {
      "author": "ss s",
      "date": "Nov 19, 2024, 4:08:38AM",
      "content": "Dear gprMax team,\n\nI would like to know if there is any way to remove the direct waves from the b-scans and if it will make a difference in the quality of my images, if you know of any way to do this please let me know, appreciate it!\n\nKind regards,"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 2, 2024, 9:22:04AM",
        "content": "With modelled/simulated data you can remove the direct wave and background by running the model without the targets and then subtracting this response from the model with the target. Of course, this approach much harder with real data.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/11F81svePCc",
    "title": "The input files are deleted after the simullation is completed",
    "original_post": {
      "author": "Tolunay Aydın",
      "date": "Aug 31, 2016, 8:42:16AM",
      "content": "Hi, after i run an input file the output file is created in the required folder but i lose the input files. How can i solve this problem .\nThanks in advance."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 31, 2016, 8:46:58AM",
        "content": "Hi Tolunay,\n\nThat should not really happen unless you delete them. Have checked at the correct place? Where do you store your input files?\n\nAntonis"
      },
      {
        "author": "fanciedgpr",
        "date": "Sep 4, 2016, 8:04:43AM",
        "content": "Hi, you may download the latest software version and reinstall it. Read the GitHub issues( https://github.com/gprMax/gprMax/issues/70 ), your question may be the same."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MjUGQzpXzTI",
    "title": "Accessing receiver data by identifier instead of number",
    "original_post": {
      "author": "Andres Altieri",
      "date": "Aug 15, 2020, 6:16:50PM",
      "content": "Hi,\nI created a model which has several receivers and I have given each of them an identifier according to the field that I want to measure in each receiver. Is it possible to access the receiver's identifier from the .out file? In this way I do not depend on the port numbering for my computation.\n\nThanks!\nBest regards,\nAndrés"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 21, 2020, 5:39:11AM",
        "content": "Dear Andrés,\n\nIf you look in the docs - http://docs.gprmax.com/en/latest/output.html#output-data - you'll see that the 'name' attribute is stored in the output file for each receiver.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Andres Altieri",
        "date": "Sep 4, 2020, 2:10:28PM",
        "content": "Thank you very much!\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/08Z5D7ju4Xw",
    "title": "Updating a parameter of an input file during each iteration",
    "original_post": {
      "author": "Soumyakanti Maiti",
      "date": "May 18, 2017, 2:41:51AM",
      "content": "Hi,\n\nI am trying to update a parameter of an input file in each iteration.  I am explaining the scenario with an example given below.\n\n#domain: 0.5 0.5 0.002\n#dx_dy_dz:0.002 0.002 0.002\n#time_window: 6e-9\n#material: 6.0 0.1 1.0 0.0 concrete\n#material: 1.0 1.32e6 1.0 0.0 rebars\n#material: 3.0 0.001 1.0 0.0 dry_sand\n#box: 0.0 0.0 0.0 0.5 0.45 0.002 concrete\n#box: 0.0 0.3 0.0 0.5 0.4 0.002 dry_sand\n#cylinder: 0.25 0.2 0.0 0.25 0.2 0.002 0.07 rebars\n#waveform: ricker 1 1.1e9 MyRicker\n#hertzian_dipole: z 0.22 0.45 0.0 MyRicker\n\nNow I would like to run the above code for 100 times using the command python -m gprMax file_name -n 100. Can I write a separate python code to update the radius of the cylinder in each iteration?\n\nThanks and regards,\nSoumya."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 19, 2017, 6:11:19AM",
        "content": "Hi Soumya,\n\nWelcome to the forum!\n\nYou can use a block of Python code in your input file to change the radius of the cylinder on every model run - http://docs.gprmax.com/en/latest/python_scripting.html\nYou just need to wrap the cylinder command in a Python block and utilise the 'current_model_run' variable in a formula to create whatever radii you need, or use it to select from a list of radii, i.e.\n\n#python:\nradii = current_model_run ## Adjust to suit however you are constructing the radii\nprint('#cylinder: 0.25 0.2 0.0 0.25 0.2 0.002 {} rebars'.format(radii))\n#end_python:\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Soumyakanti Maiti",
        "date": "May 19, 2017, 2:09:41PM",
        "content": "Dear Craig,\n\n Thank a lot for your response. This is very much useful..\n\nBest regards,\nSoumya."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/792Q3f06e6I",
    "title": "Boxes, fractal_boxes, add_surface_roughness",
    "original_post": {
      "author": "Brad Artman",
      "date": "Jan 27, 2023, 10:24:37PM",
      "content": "Just to be certain, as it's sometimes hard from the visuals, I'd like to check on order of operations and how such a string of commands works out in reality.\n\nmy premise: \nbox a whole space with a material\nadd a fractal_box for part of it\nadd a soil_peplinski to that fractal_box\nadd surface_roughness to that fractal_box\n\nSo,\nwhat values go into the troughs and peaks of the roughness layer?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 29, 2023, 12:29:26PM",
        "content": "Hi Brad,\n\nThe underlying process of object modelling in gprMax is to keep the idea of a \"painters canvas\" where the latest primitive in the order they are specified overrides what was already there build from the previous ones starting with a free spec box. A fractal box is a single primitive that can have more parts in its creation process but not in its application. You can have a smooth box with fractal properties or add to it a rough surface and even add water puddles and/or even grass. At the end when all the modifications to the basic fractal box have been obtained as desired by the user and specified in the inout file the complete object is build according to what has been desired and it is then applied into the grid as another primitive. So, in the troughs the background medium will be whatever was the underlying medium before the fractal box application and the peaks will override that medium with the values of the fractal box materials. \n\nHope this makes sense.\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vBr6_EE4Psw",
    "title": "interpolation for #excitation_file",
    "original_post": {
      "author": "tamy",
      "date": "Oct 15, 2019, 5:43:44AM",
      "content": "Hi,\n\nI am trying to use a user waveform as input with the #excitation_file: command. When I use the optional parameters 'linear' and 'extrapolate' the code runs fine. However, the resulting Ez-record shows a lot of high-frequency 'noise' on top of the input waveform. I assume that this has something to do with the interpolation.\n\nI am now trying to run it without the optional parameters but then I get the following error message:\n\nValueError: A value in x_new is above the interpolation range.\n\nMy source-pulse file has the same time steps as I want in the model (0.01ns, adjusted with the time_step_stability_factor) and zeros are added after the pulse such that the signal length is the same as the time window (then the number of iterations should be the same). I don't understand why it doesn't work without linear extrapolation...\n\nI attached the corresponding files and and a snapshot of the input signal and the recorded 'noisy' signal. Any ideas what I could change to get a cleaner signal?\n\nMany thanks in advance!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 15, 2019, 12:29:22PM",
        "content": "Hi Tamy,\n\nYour signal should start smoothly from zero and not abruptly as it does at the moment. FDTD is valid for up to a frequency range that is determined by the spatial step and the wavelengths. Introducing energy at high frequencies (i.e. small wavelengths)  that are beyond that range of validity create noise. \n\nOne option is to run a model using the 'impulse' excitation and then convolve the output with a desired waveform. This still can produce wrong results if the waveform has significant components at frequencies beyond the range of validity of your FDTD model but at least you do not need to run the model to many times in order to try different waveforms. The solution using the 'impulse' excitation is in essence the numerical impulse response of your model but it not to be used on its own as it is not valid itself unless properly filtered vi the convolution with an appropriate excitation waveform.\n\n\nHope this helps!\n\nAntonis"
      },
      {
        "author": "tamy",
        "date": "Oct 17, 2019, 3:54:17AM",
        "content": "Hi Antonis,\n\nThank you for your answer. I adapted the source waveform slightly so that it starts from zero and ends smoothly. This seems to work better:)\n\nAll the best,\n\nTamy"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PXxG68pmyc0",
    "title": "Optical applications",
    "original_post": {
      "author": "Amin Khamechi",
      "date": "Jul 31, 2017, 12:58:34PM",
      "content": "Hi,\n\nI am evaluating gprMax for optical applications. The main reason I am interested in gprMax is its GPU capability. I have a few questions to ask:\n\nFirst, is this something that you would recommend based on your knowledge?\nSecond, I use materials that have user-defined dispersion in the optical frequency domain. I usually have the n(\\lambda) or n(k) of the materials. Is this doable in gprMax?\nThird, from time to time I use plasmonic structures (such as micro-metallic structures) in optical devices. Is that feasible?\n\nThanks,\nAmin"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 31, 2017, 1:16:22PM",
        "content": "Hi Amin,\n\nAlthough gprMax was developed with GPR modelling as its prime purpose it is a rather generic FDTD code. In terms of describing frequency-depended materials it has a rather generic formulation describing the frequency dependence of the fundamental material properties (10.1109/TAP.2014.2308549) and a general PML formulation that can be customised and optimised as required (10.1109/TAP.2011.2180344) We have not used gprMax for optical applications and it will be interesting to get some feedback if you manage to compare results from gprMax with other codes you have used. \n\nA limitation of gprMax - at the moment - is the absence of a Plane Wave source which is something that we plan implementing but as it is not used in GPR modelling it was not a priority. \n\nThere is no material description based directly on refractive index (n) but if you convert your material frequency dependence data in any multi-debye and/or Lorenz and/or Drude models then it should work. I am sure there are relevant papers in the literature as these are the fundamental mechanisms describing dielectric behaviour in materials (especially in time domain based codes like gprMax)\n\nHope that you will find gprMax useful for your application.\n\nBest\n\nAntonis"
      },
      {
        "author": "Amin Khamechi",
        "date": "Jul 31, 2017, 4:09:27PM",
        "content": "Hi Antonis,\n\nThank your for your support. Do you think that flat wavefront would be something that you guys would look into in the near future?\n\nI have a rather general question here. Are curved/inclined surfaces treated as clusters of horizontal/vertical cells in FDTD or you can essentially have curved/inclines surfaces in the simulation?\n\nThanks,\nAmin"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 31, 2017, 5:32:37PM",
        "content": "Hi Amin,\n\nYes, we will add a plane wave source. For targets in a homogeneous background is an easy task ( that is the most common source in FDTD) however, for half space problems with plane wave source the problem is rather trickier in its implementation. We want to have a general source model and that is why it is not available at the moment.\n\nIn standard FDTD cells are cuboids and curved interfaces are modelled using a staircase approximation. This is what gprMax does. We currently are developing subgridding capability to allow for finer mesh where is needed. There are other approaches with deforming cells to conform to curved boundaries but theses are not easy to implement without a very big hit on performance. If you resolve your targets with fine enough cells the staircasing error can be controlled.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CA8csPQr__Q",
    "title": "Question for my code",
    "original_post": {
      "author": "Yiwen Pang",
      "date": "Apr 14, 2020, 12:52:22PM",
      "content": "Hi all,\nI attached my code and result after I run it. And now I get the questions that why I can't find my signal of pec cylinder in the Ascan image?\n\nI would appreciate if anyone can solve me problem. Thanks a lot.\n\nBest,\nYiwen Pang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 15, 2020, 4:36:51AM",
        "content": "Dear Yiwen,\n\nWelcome to the forum!\n\nFirstly, please be careful and read the warnings (in red) when gprMax runs. For your model you would have seen the warning:\n\n\"WARNING: Potentially significant numerical dispersion. Estimated largest physical phase-velocity error is -14.20% in material '|0.2525|' whose wavelength sampled by 3 cells. Maximum significant frequency estimated as 5.26465e+09Hz\"\n\nAs the message suggests your model may exhibit numerical dispersion. Please read our guidance on GPR modelling to understand why and what to do to fix it - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nSecondly, you are using a lossy soil model (the Peplinski model), therefore, as with real GPR data, you will most likely have to apply some gain to your data to see the reflected signal from the PEC cylinder.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Yiwen Pang",
        "date": "Apr 16, 2020, 10:11:05PM",
        "content": "Dear Professor Craig Warren,\n\nI ran my gprMax again and noticed the warning you just said, which I didn't see in the first time. But I'm struggle with how to fix the warning even though I went through the guidance. I cannot appreciate anymore if you can help me to specify where I should change in the code.\n\nBest regards,\nYiwen Pang"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 17, 2020, 7:09:21AM",
        "content": "Dear Yiwen,\n\nIn doing more complex modelling, or even simple one, you need to understand how the underlying numerical tool (in this case FDTD) works and the assumptions it makes. This \"protects\" you for using it in the wrong way and obtaining results that are not as valid and accurate. This does take effort and time but it does reward you with good knowledge and skill that will be useful later on.\n\nTo answer your question you can do:\n\n1) Reduce the spatial step (dx_dy,dz) but this will make the model more computational intensive and will take more time.\n2) Change the highest value of relative permittivity in your media but this will change the model itself and you might not be modelling what you set out to do.\n3) Increase the pulse length by reducing the frequency content of the pulse (i.e. lower the centre frequency) but this might mean that you are not modelling the same situation as you want.\n\nOptions 2) and 3) change the actual modelling scenario to make it fit in a specific computational resource. Option 1) allows you to better model what you already have but to do so properly needs more computational resource.\n\nUnderstanding how FDTD works and its limitations will have answered this for you.\n\nHope that helps\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gj5JkBmB6g0",
    "title": "Noise with Impulse Waveform",
    "original_post": {
      "author": "Anne Raingeard",
      "date": "Jan 23, 2019, 4:57:43AM",
      "content": "Hello,\n\nI'm trying to use the impulse waveform I've discovered in this google group and it seems to create a lot of noise. I was wondering if you had any explanation. (Maybe I'm not using it the right way).\n\nThanks a lot\n\nAnne R.\n\n\n\n---------------------------------------------\n#domain: 6 0.02 8\n#dx_dy_dz: 0.01 0.02 0.01\n#time_window: 5e-8\n\n#material: 5 0.005 1 0 sand1\n#box: 0 0 1 6 0.02 6 sand1\n\n#waveform: impulse 1 5e8 mypulse\n#hertzian_dipole: z 3 0.01 7 mypulse\n#rx: 3 0.01 6.5"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 23, 2019, 7:15:33AM",
        "content": "Hi Anne,\n\nYou are not using it right. You are doing a 2D model that is invariant in the y-direction but you use a z-directed electric dipole (line source in 2D). This is not the way you can use the 2D code and it is explained in the manual. The interesting thing is what you do not get just zero in such a model as you should and this we need to look into it. I don't understand why your step in y-direction is 0.02 but then you use 0.01 in the source and the receiver. Actually if you want to do a 2D model you should use 0.01 for the cell size in the invariance direction as well.\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 23, 2019, 8:24:56AM",
        "content": "Hi Anne,\n\nI think you are using an old version of the code, as recent versions will give you an error if you try to use a source that is not polarised in the invariant direction in 2D models.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Anne R.",
        "date": "Jan 23, 2019, 9:29:31AM",
        "content": "Yes Indeed, I updated my version and now  I have the error message ! Thanks.\nFor the cell sizes it's just a mistake because I forgot to change it.\n\nIs it supposed to be okay with the following file ?\nThanks a lot !\n\nAnne\n--------------------------------------------------------------\n\n#domain: 6 0.01 8\n#dx_dy_dz: 0.01 0.01 0.01\n\n#time_window: 5e-8\n\n#material: 5 0.005 1 0 sand1\n#box: 0 0 1 6 0.01 6 sand1\n\n\n#waveform: impulse 1 5e8 mypulse\n#hertzian_dipole: y 3 0 7 mypulse\n#rx: 3 0 6.5"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 23, 2019, 10:08:27AM",
        "content": "Hi Anne,\n\nThat seems OK but please do remember that the impulse excitation unless is convolved with an appropriate band limited pulse contains erroneous frequency components. The FDTD solution that gprMax (or any other FDTD solver) gives is not valid for all frequencies!\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/l-SwhAHUvtk",
    "title": "Could I get the wave of every time node ?",
    "original_post": {
      "author": "Zoey",
      "date": "Nov 13, 2019, 6:34:50AM",
      "content": "Hi !\n    Can I get the wave of the forward propagation of each time node in all spatial locations from gprMax?\n    Thank you!\nZoey"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 13, 2019, 7:23:20AM",
        "content": "Hi Zoey,\n\nIn principle you can but this might result in a very big file that you might not be able to store or process and possibly even create depending how big your model is. You can save the complete time history in many points at the same time if needed which is Ok for most applications and the snapshot command makes it easy if you want to save spatial field variations at specific time instances over larger areas. This is useful when we are making movies of wave propagation as for these you do not really need all time instances but only some at regular intervals. \n\nYou should think what actually you need to get from the model and then decide if complete time history output is needed everywhere as this most likely will not be the case and can be very demanding in resources. There can be exceptions to this but think carefully first!\n\nBest\n\nAntonis"
      },
      {
        "author": "Zoey",
        "date": "Nov 14, 2019, 7:07:29AM",
        "content": "Hi Antonis!\n\nThanks for your reminding. And I wrote an .in file,but gprMax did not move. I need some help. Thank you again!\n\nmy .in file is \n\n#domain: 5 2 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 20e-9\n\n#material: 3 0.01 1 0 my_sand\n\n\n#waveform: ricker 1 6e8 my_ricker\n\n#python:\nfrom gprMax.input_cmd_funs import *\nfor j in range(1,184)\n    hertzian_dipole(z,0.1+0.025*(j-1),1.5,0,my_ricker)\n#end_python:\n    #box: 0 0 0 5 1 0.005 my_sand\n#cylinder: 2.5 0.5 0 2.5 0.5 0.005 0.05 free_space\n\n#python:\nfor i in range(1,1697);\n    print('#snapshot: 0 0 0 5 2 0.005 0.005 0.005 0.005 {} snapshot{}'.format((i/1697)*20e-9,i))\n#end_python:\n\n#geometry_view: 0 0 0 5 2 0.005 0.005 0.005 0.005 111402 n\n\nand the gprMax \nZoey"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 14, 2019, 11:18:40AM",
        "content": "Hi Zoe,\n\nYour input file does not run because it contains errors. I corrected them but that does not mean what you model is right! It is up to you do decide if you want to have 184 dipole sources active at the same time and the number of snapshots you want. Understanding how the model and the method works is key to getting good results. \n\n#domain: 5 2 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 20e-9\n\n#material: 3 0.01 1 0 my_sand\n\n\n#python:\nfrom gprMax.input_cmd_funcs import *\nwaveform('ricker', 1.0, 6e8, 'my_ricker')\nfor j in range(1,184):\n    hertzian_dipole('z',0.1+0.025*(j-1),1.5,0,'my_ricker')\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/V5LldKp3MIY",
    "title": "Understanding the transmission line",
    "original_post": {
      "author": "Hideaki Page",
      "date": "Mar 14, 2024, 7:39:55AM",
      "content": "Dear All,\n\nI'm struggling to understand the transmission line in the halfwave dipole below. It only appears to be connected to one arm of the dipole??? How does that work electrically? Where is the return path?\n\nThe script seems simple enough. Form a wire then add a 1mm gap. The connection point of the transmission line is specified at the end of one arm of the dipole. A real dipole both arms are driven.\n\nThere is a similar problem with the voltage source. #voltage_source: c1 f1 f2 f3 f4 str1 [f5 f6]\n\nIts only connected to one point. Where's the return path? Voltages are defined between two points.\n\nPlease help. I've been stuck on this for sometime. I did post a query on this before Christmas but didn't get a reply.\n\nHideaki\n\n#title: Wire antenna - half-wavelength dipole in free-space\n 2#domain: 0.050 0.050 0.200\n 3#dx_dy_dz: 0.001 0.001 0.001\n 4#time_window: 60e-9\n 5\n 6#waveform: gaussian 1 1e9 mypulse\n 7#transmission_line: z 0.025 0.025 0.100 73 mypulse\n 8\n 9## 150mm length\n10#edge: 0.025 0.025 0.025 0.025 0.025 0.175 pec\n11\n12## 1mm gap at centre of dipole\n13#edge: 0.025 0.025 0.100 0.025 0.025 0.101 free_space\n14\n15#geometry_view: 0.020 0.020 0.020 0.030 0.030 0.180 0.001 0.001 0.001 antenna_wire_dipole_fs f"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 14, 2024, 8:04:12AM",
        "content": "Hi Hideaki,\n\nSources such as the transmission_line and voltage_source should be specified in a one cell gap in the models. They 'connect' to whatever structure(s) are either side of the gap, so in the case of the wire dipole antenna, the transmission line is connected to either arm of the dipole.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-VcNQxnn62o",
    "title": "Hypobola",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Mar 14, 2024, 5:05:58AM",
      "content": "Dear team,\n\nI plan to see some parabola of the radiogram and I generate almost everything but for some reason, I only can see the material difference and this is PVC pipes.\n\nHere I will attach all the files.\n\nCan somebody tell me why I can not see the parabola?\n\n\n#title: A-scan from a pvc cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 6e-9\n\n#material: 8 0.005 1 0 asphalt\n#material: 12 0.005 1 0 cement_concret\n#material: 4 0.005 1 0 granula_material\n#material: 12 0.01 1 0 soil\n#material: 5.8 0 1 0 pvc\n\n#waveform: ricker 1 0.6e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0.150 0 0.24 0.170 0.002 asphalt\n\n#box: 0 0.04 0 0.240 0.150 0.002 granula_material\n#box: 0 0.02 0 0.240 0.04 0.002 soil\n\n#cylinder: 0.095 0.1 0 0.095 0.1 0.002 0.020 pvc\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 mypvc n\n\n\n\nKind regards \nNaween"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 14, 2024, 8:01:07AM",
        "content": "It looks like your domain size is too small for you to see any sort of hyperpola from the cylindrical target. Are you sure you didn't see a warning about stepping your source/receiver into the PML when you ran the model? \n\nGiven the distance between source and receiver (100mm) you will need a larger domain, and to start scan (source/receiver position) further to the left. You should then be able to see the hyperbolic response.\n\nCraig\n\n"
      },
      {
        "author": "naween dissanayake",
        "date": "Mar 15, 2024, 4:57:28AM",
        "content": "Dear Craig,\n\nMay I ask if you could send me some sample input files that are related to the road cross-section to take a look at, it will be really beneficial for my project?  \n\n\nKind regards \nNaween \n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 18, 2024, 6:02:43AM",
        "content": "Sorry - we don't have sample files, only the examples in the gprMax package.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dy75iR5Cqbw",
    "title": "python API bug?",
    "original_post": {
      "author": "Shawn Zhao",
      "date": "Jun 23, 2022, 10:40:03AM",
      "content": "Hi All,\n\nThanks to Craig, Antonis, and team for putting out and maintaining this great tool for the community. \n\nI wanted to point out a behavior If found with playing around with running the code from the python API. In a previous post (https://groups.google.com/g/gprmax/c/R5ZfQclgFQM/m/i1P-IVMoBwAJ), Craig gave us an example of running gprMax by calling it as a module.\n\nThe gprMax.run works great if I use a .in file (with multiple GPUs/mpi4py/etc.), but the trick of using a StringIO doesn't work if I use MPI. I confirmed that MPI is properly installed and working by calling gprMax from the command line, but when it is called using the API (ex: gprMax.run(fileobject, n=3, gpu=[0],mpi=2)), I get different behavior. \n\nError traceback here: \n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.6 (Big Smoke)\n\n Copyright (C) 2015-2022: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the\n  terms of the GNU General Public License as published by the Free Software\n  Foundation, either version 3 of the License, or (at your option) any later\n  version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY\n  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n  A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with\n  gprMax.  If not, see www.gnu.org/licenses.\n\nHost: ---| To Be Filled By O.E.M. To Be Filled By O.E.M. | 1 x AMD Ryzen Threadripper 3960X 24-Core Processor (24 cores, 48 cores with Hyper-Threading) | 252GiB RAM | Linux-3.10.0====\nGPU(s) detected: 0 - GeForce RTX 3090, 23.7GiB | 1 - GeForce RTX 3090, 23.7GiB\n\n=== MPI task farm (USING MPI Spawn) ===========================================\n=== MPI master (MPI_COMM_WORLD, rank: 0) on ---spawning 1 workers...\n\n--------------------------------------------------------------------------- TypeError Traceback (most recent call last) Input In [113], in <cell line: 15>() 13 fileobject = StringIO('\\n'.join(cmds)) 14 fileobject.name = filename ---> 15 gprMax.run(fileobject, n=3, gpu=[0],mpi=2) File ~/gprMax/gprMax/gprMax.py:108, in api(inputfile, n, task, restart, mpi, mpi_no_spawn, mpicomm, gpu, benchmark, geometry_only, geometry_fixed, write_processed, opt_taguchi) 105 args.write_processed = write_processed 106 args.opt_taguchi = opt_taguchi --> 108 run_main(args) File ~/gprMax/gprMax/gprMax.py:177, in run_main(args) 175 if args.task: 176 raise GeneralError('MPI cannot be combined with job array mode') --> 177 run_mpi_sim(args, inputfile, usernamespace) 179 # Alternate MPI configuration that does not use MPI spawn mechanism 180 elif args.mpi_no_spawn: File ~/gprMax/gprMax/gprMax.py:407, in run_mpi_sim(args, inputfile, usernamespace, optparams) 404 worklist += ([StopIteration] * numworkers) 406 # Spawn workers --> 407 newcomm = comm.Spawn(sys.executable, args=['-m', 'gprMax'] + myargv + [workerflag], maxprocs=numworkers) 409 # Reply to whoever asks until done 410 for work in worklist:\n...\nFile mpi4py/MPI/asarray.pxi:72, in mpi4py.MPI.asstring() File mpi4py/MPI/asstring.pxi:19, in mpi4py.MPI.asmpistr() TypeError: expected bytes, StringIO found\n\nI figured it is an issue with how the stringIO is formatted, not necessarily an issue with the gprMax.run, but it is hard for me to know.\n\n\nWhile I am here, I had a quick question. Is there a way to account for a moving target? I am interested in whether or not the doppler effect could be simulated. \n\nThanks for everything!\nShawn"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 28, 2022, 4:45:12PM",
        "content": "Shawn,\n\nI'll need to look into this again - but I do have a memory of StringIO (rather than a true file) not working with MPI.\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hRCMHDXa0_o",
    "title": "How to use variables or constants defined in #python: block",
    "original_post": {
      "author": "Sudantha Perera",
      "date": "Oct 31, 2020, 12:26:54PM",
      "content": "I want to define variables (Primitive Data Types) in #python: block and use that variables out side the #python: block. How can I do that?\n\nAs an example:\n\n#python: \ndk=3\n#end_python:\n\n#material: dk 0.01 1 0 mat1\n#triangle: 0.5 0.5 0.5 0.6 0.4 0.5 0.7 0.9 0.5 0.0 mat1"
    },
    "responses": [
      {
        "author": "Anadyr",
        "date": "Oct 31, 2020, 1:14:21PM",
        "content": "You should  use the import the python functions as explained here: http://docs.gprmax.com/en/v.3.0.0b20/python_scripting.html\n\nIn your case you could write (within the #python and #end_python block):\n\n#python:\nfrom gprMax.input_cmd_funcs import *\n\ndk = 3\n\nmaterial(dk, 0.01, 1, 0, \"mat1\")\ntri = triangle(0.5, 0.5, 0.5, 0.6, 0.4, 0.5, 0.7, 0.9, 0.5, 0.0, \"mat1\")\n\n#end_python:\n\nAllright?\n"
      },
      {
        "author": "Sudantha Perera",
        "date": "Nov 1, 2020, 1:18:28AM",
        "content": "Thank you for helping with the solution.  I just tried to give an example but that is not good example. It's my mistake. I was really trying to use are  #add_surface_roughness and #fractal_box (not  #material  and  #triangle as in the example). Can we used those functions inside #python and #end_python block? As I could know we can not use them in  #python and #end_python block.\n\nThanks again for your help and I really appreciate it.\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 9, 2020, 6:57:24AM",
        "content": "Dear Sudantha,\n\nAs Anadyr said some of the gprMax input file commands are available as functions by importing the 'input_cmd_funcs' module. These can then be used more easily within #python #end_python blocks in your input file. Some commands are not available via this module, but you can still use them within #python #end_python blocks using a print command and variables, e.g. \n\n#python:\nx = 0.5\ny = 0.4\nz = 2\nf\"#fractal_box 0 0 0 {x} {y} {z} 1.5 1 1 1 50 my_soil my_fractal_box\"\n#end_python:\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/0Fn_FwjYIhc",
    "title": "Problem when implementing gprMax through Matlab script.",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Jul 28, 2019, 4:51:21PM",
      "content": "I have programmed a small code with MATLAB to implement gprMax. It can completely operate gprMax in MATLAB script without any tough on the command terminal or python, and it is good at processing a batch of inp files. \n\nThe key code in MATLAB, for example, is :\n\nsystem(['C:\\Users\\zhouf\\Miniconda3\\envs\\gprMax\\python -m gprMax C:\\Users\\zhouf\\gprMax\\user_models\\cylinder_Ascan_2D.in]); \n\nThis command stands for the three commends in CMD terminal：\ncd gprMax\nactivate gprMax\npython -m gprMax user_models/cylinder_Ascan_2D.in\n\n\nI have ran the MATLAB script for months to do my simulations. However, this week when I re-installed the system, the MATLAB script can not work. I have tried in the CMD terminal, and it proved that the gprMax itselft is good. I come back to the MATLAB, it show that:\n\nsystem(['C:\\users\\zhouf\\Miniconda3\\envs\\gprMax\\python -m gprMax ', pathname, filename, Geo_only, GPU]);\nC:\\users\\zhouf\\Miniconda3\\envs\\gprMax\\python.exe: No module named gprMax \n\nI am afraid that there is problem in the environment variable setting, because I did not separately activate gprMax module in MATLAB. I am curious why I have done it well before, but can not now. Should I make some environment settings?"
    },
    "responses": [
      {
        "author": "Pavan Kumar Akula",
        "date": "Jul 29, 2019, 1:07:04AM",
        "content": "Hi,\nCould you please use the same path \"C:\\users\\zhouf\\Miniconda3\\envs\\gprMax\\python.exe\" on a command prompt and check whether Python prompt is showing up or not? If it's not showing up it means that this path should be added to the user/system path environment variable.\nYou could also add the gprMax folder to MATLAB path.\nHope this helps you.\nKind regards\nPavan."
      },
      {
        "author": "Feng Zhou",
        "date": "Jul 29, 2019, 5:34:32AM",
        "content": "Thanks,  I did it already but it still does not work. What I am not clear is that I ran the script well before I re-install my sys."
      },
      {
        "author": "Feng Zhou",
        "date": "Jul 29, 2019, 10:39:15AM",
        "content": "Hi，I have resolved the problem by re-build and re-install setup.py"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8FfJ9QYta04",
    "title": "Windows v. Linux",
    "original_post": {
      "author": "Mark Dunscomb",
      "date": "Oct 17, 2017, 2:55:56PM",
      "content": "Yeah, I know this is a never ending discussion and everyone has an opinion...  However, has anyone performed gprMax benchmarking to compare the same multi-core hardware on both Linux and Windows?  I.e. Results are not the same for all software so specifically, for gprMax does Linux substantially improve total modeling (processing + I/O) speed?  I suspect the difference may become significant with increasing number of cores but it would be nice to see a comparison.  I'm considering CentOS to get as much out of a system as possible.\n\nThanks!!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 17, 2017, 3:30:51PM",
        "content": "Hi Mark,\n\nThe short answer from me is that we have not really done tests of that kind.\n\nI suppose we can partition one server in a dual boot configuration and try but this distracts us quite a bit of the research work we need to be doing some of  the results of which we are trying to transfer to gprMax (e.g. better advanced PMLs, better dispersive media modelling, antenna models, soil models, etc.) In my experience, what was important (or at least it used to be some years ago) was the kind of tools used. By this, I mean the mainly C compilers. The new version of gprMax uses C for its core solving via Cython. The C code produced is not \"pleasing to the eye\" but it needs a compiler which can sometimes make a difference. I had such experience with the old C code. Every OS has some tricks on running codes efficiently depending on what they do. I suspect these days this difference should be small unless codes specifically take advantage of some OS features and are optimised better for particular OSs. For example, when MATLAB came back to the Mac (after abandoning the old Mac OS for few years) it was clear that the same version of MATLAB was not performing the same when compared to computers with similar hardware but running Windows or Linux.  This I think has been not as a problem as it was. \n\nFor gprMax, it will be interesting to know if such performance difference exists but we do not have any real data here to help! I hope others in this forum might or are willing to try ... \n\nBest\n\nAntonis\n\n\nPS We do use CentOS for our local CPU/GPU server (haggis)"
      },
      {
        "author": "Mark Dunscomb",
        "date": "Oct 17, 2017, 3:45:31PM",
        "content": "Thanks Antonis,\n      I've seen a mix of data out there.  Everything from \"they're about the same\" to \"CentOS can be over 2x faster\".  I've run bench marking on a Skylake cluster, which is roughly 5x to 8x faster than my older Xeons but the cluster was also running Linux.  As I mentioned I suspect CentOS manages multiple cores more efficiently.  If nothing else, CentOS is much slimmer than Windows.  I'd likely just run with CentOS but it's not a simple matter to integrate into our Windows based IT structure.  So... If anyone has experience, I'd love to hear it.\n\nThanks again"
      },
      {
        "author": "Mert Su",
        "date": "Oct 26, 2017, 8:01:16AM",
        "content": "This is not exactly what you are asking for however, there is a significant difference between Linux and Windows even computing on the GPU."
      },
      {
        "author": "Mark Dunscomb",
        "date": "Oct 26, 2017, 12:10:21PM",
        "content": "@mert_su  \n\nThanks for the results.  I wouldn't expect the OS would impact GPU performance much but anything is possible.  \n\nThe results are a bit difficult to interpret because they use different GPUs and different computers that presumably have different components.  The Linux systems ran using Tesla P-100's or Tesla V-100's (two of Nvidia's highest end GPU's for HPC) whereas all but one of the the Window's systems used GPUs that are directed toward the visual processing market (Titan and GeForce).  \n\nThat said, one Windows system used a GP-100, which should be slightly faster than a P-100 but had a lower score.  However, GP-100 was tested using OpenCL instead of CUDA so again, it's an issue of comparing apples and oranges.  Could be that Windows is slower but hard to say.  At least, I'd like to say Linux is faster than Windows but that's just me.. ;)\n\nCheers and thanks again!!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/A9VfEXhOjig",
    "title": "workstation performance",
    "original_post": {
      "author": "Christian Pigot",
      "date": "Dec 13, 2020, 8:29:23PM",
      "content": "Dear GPRMax users\n\nI am in the process of extending my simulation capability by acquiring a workstation dedicated to GprMax. I was wondering what were, beside budget, the most important parameters to look at (cores number clock frequency, memory...) and how to prioritize them.\n\nThank you for your advice"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 14, 2020, 10:39:04AM",
        "content": "Dear Christian,\n\nIf your typical models can fit (in terms of RAM) on a GPU, then base your workstation around GPUs. In terms of choosing a GPU, memory bandwidth is the most important parameter for gprMax performance - see our paper in Computer Physics Communications for more information on this. So choose GPU(s) with the most RAM and best memory bandwidth you can afford. How many GPUs you want/can afford, will determine the motherboard and case/PSU requirements. A modest CPU and modest amount of CPU RAM will be fine if you are using the GPUs for running your models. \n\n@Antonis has used versions of this SuperMicro machine as a basis for a workstation. It is quite expensive but has been very reliable. However, I'm sure you could build something cheaper if you look around carefully at components.\n\nKind regards,\n\nCraig\n"
      },
      {
        "author": "Christian Pigot",
        "date": "Dec 14, 2020, 6:37:25PM",
        "content": "OK Craig excellent!\nI shall start with that and my budget\n\nThank you\n\nChristian\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hrd6RbyCnZI",
    "title": "voltage probe",
    "original_post": {
      "author": "Sudantha Perera",
      "date": "Apr 24, 2020, 1:12:38PM",
      "content": "How can I create a voltage probe?\nIf I use a rx function for Rx antenna (I created the geometry), does it function as a voltage probe?\nthis is the code for Rx antenna with rx function\n#sphere: 0.850 0.21 0.152 0.006 pec y\n#sphere: 0.850 0.21 0.139 0.006 pec y\n#rx: 0.850 0.21 0.145"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 27, 2020, 4:20:02AM",
        "content": "Dear Sudantha,\n\nA #rx simply samples the EM field at that point in the grid for the duration of the simulation, so you can think of it as a voltage probe if you like (by converting the E-field to voltage using the spatial step of the grid).\n\nYou can put a receiver antenna model into your simulation if you want. If you look at the examples in the docs (http://docs.gprmax.com/en/latest/user_libs_antennas.html#gpr-antenna-models) you’ll see models of commercial GPR antennas. These happen to be bi-static antennas, but the principle is the same if you are trying to model a system with separate transmit and receive antennas. The antenna structure is built using geometry primitives (such as box and triangle commands), and the materials modelled as necessary. A voltage source (#voltage_source, http://docs.gprmax.com/en/latest/input.html#voltage-source) is used at the dipole gap feed point to excite the antenna, and a receiver (#rx, http://docs.gprmax.com/en/latest/input.html#rx) at the dipole gap in the receiver part. The most time-consuming part will be building the antenna structure using the geometry commands.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sudantha Perera",
        "date": "Apr 27, 2020, 8:37:18AM",
        "content": "Thank you Dr. Warren. This is really helpful."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6nQB6FztaG8",
    "title": "Hi- Its urgent",
    "original_post": {
      "author": "savita K.B",
      "date": "Jul 16, 2021, 7:51:32AM",
      "content": "I am attaching my code here .please tell me why i am getting so much of redlections from the target.its not only one hyperbola.Its showing multiple hyperbola.what changes i shouls do in my code.Please specify Thankyou in advance.\n#title: B-scan from a metal cylinder buried in a soil\n#domain: 1.5 0.8 0.008\n#dx_dy_dz: 0.008 0.008 0.008\n#time_window: 10e-9\n\n#material: 4 0 1.0 0 sand\n#material: 10 0 1.0 0.0 metal\n\n#waveform: ricker 1 800e6 my_ricker\n#hertzian_dipole: z 0.2 0.6 0 my_ricker\n#rx: 0.3 0.6 0\n#src_steps: 0.02 0 0\n#rx_steps: 0.02 0 0\n\n#box: 0 0 0 1.5 0.7 0.008 sand\n\n#cylinder: 0.8 0.4 0 0.8 0.4 0.008 0.05 metal\n\n#geometry_view: 0 0 0 1.5 0.8 0.008 0.008 0.008 0.008 cylinder_metal_metal n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 26, 2021, 7:32:30AM",
        "content": "There are fundamental errors in your understanding, which are apparent if you check your input file carefully, and view your model geometry.\n\nYour 'metal' is not metal as you are modelling it as a dielectric.\nYour source and receiver are inside your sand, which I doubt you want.\nYou have potential numerical dispersion that you should look at resolving - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ipasicVcEDc",
    "title": "Creating a waveform",
    "original_post": {
      "author": "Robert Gallagher",
      "date": "May 20, 2021, 4:10:44PM",
      "content": "Hi all,\n\nI have created a weighted chirped waveform for use on my models. \n\n\nThe issue I am encountering is when I run a waveform with a time longer than the time window gprMax truncates the waveform. In this example my time window is 3e-9 and my waveform is 5e-9. The model runs but displays the following error message.\n\n\n\nHowever, when I reduce the time on my waveform to match my time window the model will not run. \n\n\nI have also tried to replicate the provided waveform structure in an attempt to resolve this. \nThe model now runs but I have an additional error message \n\n\nWhat I am trying to determine is if the truncating of my initial waveform going to cause issues with my results? And what is the best way forward in implementing my weighted chirped waveform?\n\nAs always, any thoughts or assistance would be much appreciated.\n\nKind regards,\nRob."
    },
    "responses": [
      {
        "author": "Robert Gallagher",
        "date": "May 20, 2021, 4:14:25PM",
        "content": "Sorry, it is difficult to see the second error message to I have attached it here.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 6:01:06AM",
        "content": "Dear Robert,\n\nThere are a few important points to note when you are trying to use a custom waveform:\nYou should aim to have your waveform with the same number of samples as required for the time window and time step for you simulation. You can run a simulation where you waveform has less samples, and it will be zero padded, or more samples and it will be truncated. However, in both these cases you may introduce unwanted high frequencies into your simulation due to chopping the signal abruptly, and they may not be resolved correctly. \nSimilarly to 1, your waveform must rise smoothly from zero. Again, any abrupt changes can introduce unwanted high frequencies into your simulation which may not be resolved correctly.\nIt is also good practice to specific a time vector in your excitation file, that matches the time step and window of your simulation. It is not strictly required, but if it is not there then gprMax may use interpolation/extrapolation as necessary.\nPoints 1 and 2 are facts of using the FDTD method and are related to the second error message you encountered - you must choose the spatial resolution for you simulation to correctly resolve the targets/layers etc... of interest, and also to mitigate numerical dispersion. See our docs for more info on this - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DE1fdm2K-WI",
    "title": "Power spectrum of antenna models",
    "original_post": {
      "author": "Selim Sahin",
      "date": "Dec 4, 2018, 7:04:57AM",
      "content": "Hello,\n\nIs there any tool to plot power spectrum of GSSI or MALA antenna models, like the tool used for built-in waveforms?\n\nRegards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 4, 2018, 8:30:30AM",
        "content": "Hi Selim,\n\nYou can use the `-fft` option on any model output with the A-scan plotting tool - http://docs.gprmax.com/en/latest/plotting.html#plot-ascan-py\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Selim Sahin",
        "date": "Dec 4, 2018, 10:53:21AM",
        "content": "If I am not mistaken, this shows me the spectrum of what rx received. But I want to determine the maximum effective frequency of an antenna model like GSSI1500 i.e. the greatest frequency at which the transmitted power is about -40dB less than the power at the center frequency. Because I will set the step distance between Ascans to be half of the minimum wavelength. Do you have any suggestions about step distance between Ascans?\n\nRegards"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 4, 2018, 12:02:34PM",
        "content": "Yes, however the idea is that you can place a receiver anywhere you like in the model, e.g. at the feed of the antenna, to measure the time history of the electric and magnetic fields. Then use the '-fft' option.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bnBrHxomdss",
    "title": "sos!",
    "original_post": {
      "author": "qwyuan",
      "date": "Oct 12, 2016, 10:41:15AM",
      "content": "Traceback (most recent call last):\n  File \"C:\\Users\\yuanyue\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 184, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Users\\yuanyue\\Miniconda3\\envs\\gprmax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\yuanyue\\gprMax\\gprMax\\__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"C:\\Users\\yuanyue\\gprMax\\gprMax\\gprMax.py\", line 72, in main\n    run_main(args)\n  File \"C:\\Users\\yuanyue\\gprMax\\gprMax\\gprMax.py\", line 139, in run_main\n    run_std_sim(args, numbermodelruns, inputfile, usernamespace)\n  File \"C:\\Users\\yuanyue\\gprMax\\gprMax\\gprMax.py\", line 162, in run_std_sim\n    run_model(args, modelrun, numbermodelruns, inputfile, modelusernamespace)\n  File \"C:\\Users\\yuanyue\\gprMax\\gprMax\\gprMax.py\", line 373, in run_model\n    process_singlecmds(singlecmds, G)\n  File \"C:\\Users\\yuanyue\\gprMax\\gprMax\\input_cmds_singleuse.py\", line 208, in process_singlecmds\n    G.srcsteps[0] = round_value(float(tmp[0]) / G.dx)\nTypeError: 'tuple' object does not support item assignment\n\n\nwhat happen?what mean?when i run \"python -m gprMax user_models/cylinder_Bscan_2D.in -n 60'.who can help me? thanks!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 12, 2016, 10:49:41AM",
        "content": "Hi qwyuan,\nUpdate to the latest version of gprMax. This is a small bug introduced a couple of weeks ago that was reported and fixed this morning.\nThanks,\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 13, 2016, 3:01:22AM",
        "content": "Dear qwyuan,\n\nYes, in principle, you can use the #box command to simulate (free_space) voids and cracks in concrete. \n\nI would recommend you do some reading on the fundamentals of the FDTD method, which gprMax is based upon, before proceeding much further. You should certainly have a basic understanding of what numerical dispersion is (the source of the warning message). \n\nOne of the seminal books on computational EM and the FDTD method is Taflove and Harness \"Computational Electrodynamics: The Finite-Difference Time-Domain Method\" http://www.artechhouse.com/International/books/1077.aspx\n\nCraig"
      },
      {
        "author": "qwyuan",
        "date": "Oct 13, 2016, 3:15:43AM",
        "content": "Dear Craig,\n   thank you very much!\n\nqwyuan"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 13, 2016, 5:53:16AM",
        "content": "Dear qwyuan,\n\nThe materials you see listed are completely normal and created from dielectric smoothing that is done in gprMax, see the User Guide http://docs.gprmax.com/en/latest/features.html#dielectric-smoothing\n\nI'm afraid I don't have time to check your input file. I suggest you check/view a geometry file of your model.\n\nCraig"
      },
      {
        "author": "qwyuan",
        "date": "Oct 13, 2016, 12:45:08PM",
        "content": "Dear Craig,\n\n      Thank you very much!\n\nqwyuan"
      },
      {
        "author": "qwyuan",
        "date": "Oct 17, 2016, 4:06:13AM",
        "content": "Dear Craig,\n\n\n      Excuse me. Can the command \"box\" introduce a non-orthogonal parallelepiped? if not, what command could? Thank you!\n\nqwyuan"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 17, 2016, 6:04:03AM",
        "content": "The #box command is the basic building block for a Yee cell, which is the fundamental construct of the FDTD method. You can approximate other shapes by fitting them to the grid of Yee cells, this can cause staircasing errors. The object construction commands in gprMax have been designed to provide the basic primitives for building more complex objects.\n\nCraig"
      },
      {
        "author": "qwyuan",
        "date": "Oct 19, 2016, 11:32:56PM",
        "content": "Hey Craig,\n\n     Can the command\" python -m gprMax path_to/name_of_input_file\"also used to simulate 3D FDTD? how to plot or show the result of them,such as C-scan?\n\n    thank you!\n\nQwyuan"
      },
      {
        "author": "qwyuan",
        "date": "Oct 19, 2016, 11:40:24PM",
        "content": "And after 3D FDTD simulation with the domain of 0.49,0.210 and 0.190, the command of \"python -m tools.plot_Bscan user_models/TT1_merged.out Ez\"  used, but the results  is wrong: the \"KeyError: Can't open attribute (Can't locate attribute: 'nrx')\".\n\nWould you like to tell me what happened? How to see the C_scan redult?\n\nthank you very much!\n\nQwyuan"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 20, 2016, 4:49:15AM",
        "content": "Hi Qwyuan,\n\ngprMax runs 2D or 3D models using the same syntax, e.g. python -m gprMax path_to/name_of_input_file\n\nIf you want to produce C-scans you will have to assemble them yourself from B-scans. We don't have a tool for this, so if you create one in Python please consider contributing it to the code.\n\nThe KeyError you are seeing when trying to plot a B-scan suggests either something went wrong with the original A-scans, or something went wrong when you merged the A-scans together to create the B-scan.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "qwyuan",
        "date": "Dec 19, 2016, 3:05:13AM",
        "content": "HI,everyone!\n         I have some question about the example of \"cylinder_Bscan_GSSI_1500.in\" in the user-guide DOC.\n\n     1)In the line 13,\"antenna_like_GSSI_1500(0.105 + current_model_run * 0.005, 0.074, 0.170, 0.001)\", which point in the actual GSSI 1.5GHz antenna does the coordinate( 0.005,0.074,0.170) refer to? And what means the parameter of 0.105?\n      2)How will I set the above parameters before using the command of \"antenna_like_MALA_1200_fs\" to simulate the actual MALA 1.2GHz antenna?\n\n   3)If i have known the inner size of actual MALA 2.3GHz antenna,where will I modify the code of 1.2GHz MALA antenna to obtain the 2.3GHz bowtie antenna model that can be directly used to simulate like  the example of \"antenna_like_GSSI_1500\"?  Or does any other things need to do?\n    4)And how to read or plot the *.out file in MATLAB?\n\n\n    Urgent need!Thank you!"
      },
      {
        "author": "qwyuan",
        "date": "Dec 19, 2016, 3:11:05AM",
        "content": "HI,Craig,\n"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 19, 2016, 5:57:20AM",
        "content": "Hi qwyuan,\n\n1) & 2) Both GSSI 1.5GHz and MALA 1.2GHz antenna models are used by calling their respective functions with arguments 'x, y, z' and optionally 'resolution' and 'rotate90'. \n\n• 'x, y, z' refers to the coordinates of a location in the model to insert the antenna. Coordinates are relative to the geometric centre of the antenna in the x-y plane and the bottom of the antenna skid in the z direction. (This info was given in the Python module but I'll add it to the main docs.)\n• 'resolution' refers to the spatial resolution for the antenna model, it can be only 0.001m or 0.002m\n• 'rotate90' refers to whether the antenna model should be rotated 90 degrees in the x-y plane. It can be 'True' or 'False' (default).\n\n'0.105 + current_model_run * 0.005' in the example specifies the x-coordinate of the antenna. By utilising the variable 'current_model_run' the antenna is moved in the x-direction every time a new A-scan is taken, building the B-scan.\n\n3) You need to know the geometry, materials, and excitation of the real antenna if you want to start making a model of it. Adjusting an existing model will not likely do a good job.\n\n4) Look in the tools package in MATLAB scripts for A- and B-scan plotting. You can adapt these to read and plot output files as you wish.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "qwyuan",
        "date": "Dec 20, 2016, 11:37:38PM",
        "content": "thank you very much!"
      },
      {
        "author": "qwyuan",
        "date": "Dec 28, 2016, 10:18:25AM",
        "content": "Hi,Craig,\n           excuse me,also have some question to ask you advice!\n           1)After simulating with Mala1200 antenna,why can not use the command \"python -m tools_ascan \" to show the every A scan of simulation result from the output file \"*.out\"?\n\n       2)In order to contrast the signal of every a scan trace from the gprmax outfile  in EXCEL or MATLAB, could you give some detail advice on how operating, such as which command in matlab, because i have tried several failure try.\n\n       3)Would you like to give me some good advice ,when i want to simulate MALA antnnna of 2.3GHz frenquency?\n\n       thank you very much!"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 9, 2017, 5:38:49AM",
        "content": "Hi qwyuan,\n\n1) You can use the Python scripts for plotting both A- and B-scans from the Mala or GSSI antenna models, see the example http://docs.gprmax.com/en/latest/examples_antennas.html#bowtie-antenna-model\n\n2) Look in the tools package in MATLAB scripts for A- and B-scan plotting. You can adapt these to read and plot output files as you wish. You can go from MATLAB to MS Excel if needed, and probably directly from HDF5 in Python to Excel also.\n\n3) As I said before, you need to know the geometry, materials, and excitation of the real antenna if you want to start making a model of it. It is not easy to get this data - from the manufacturer or by measuring yourself.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_tWW1l-M5qo",
    "title": "Running time issue with GSSI 400 MHz antenna",
    "original_post": {
      "author": "Lavanya akila",
      "date": "Apr 17, 2019, 7:27:06AM",
      "content": "Hi Craig,\n\nI want to analyze performance of GSSI 400MHz antenna. Below code is running around five hours but it’s progress is just 2%. In order to reduce running time I chosen resolution to 2mm. I think 10µs is needed for 400MHz antenna. I’m completely blank about how to reduce the running time. Is there any way to minimize it?  \n\n#title: Analysis of target location range for GSSI 400 antenna\n#domain: 0.500 0.500 0.520\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-6\n#material: 4 0 1 0 half_space\n#box: 0 0 0 0.500 0.500 0.335 half_space\n#cylinder: 0.240 0 0.135 0.240 0.148 0.135 0.010 pec\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_400\nantenna_like_GSSI_400(0.220, 0.340, 0.335, 0.002)\n#end_python:"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 18, 2019, 3:51:45AM",
        "content": "Hi Lavanya,\n\nYou don't need a time window of 10 microseconds for the model you running....if you are just interested in the reflection from the rebar? 10 nanoseconds (10e-9) or so should be sufficient.\n\nThis will reduce the computation time. However, you are using a low'ish frequency antenna which must be discretised at least 2mm and the domain size will likely have to be large for a useful simulation, so you will always have demanding computational requirements.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OydT-1AFwgc",
    "title": "Numerical Dispersion in 2D models",
    "original_post": {
      "author": "Hugo Day",
      "date": "Dec 7, 2016, 8:47:31AM",
      "content": "Dear others users,\n\nI've recently started using gprMax (essentially to look at the transition of Rayleigh to Mie to Optical regimes and the resulting GPR signals) and to begin I'm looking at replicating the radar cross section of a perfectly conducting sphere vs. signal frequency in a 2D regime.\n\nWhen running a 2D simulation at some point a numerical dispersion warning arrives concerning cells per wavelength [1]. My suspicion is this is in the infinite axis - is this something I should be concerned about regarding numerical stability for a 2D simulation or to be expected?\nI've attached the sort of input file I've been generating for an ideal of the simulations done [2].\n\nThanks for writing a very useful tool, am liking it very much so far.\n\n\n\n1 - WARNING: Potentially significant numerical dispersion. Largest physical phase-velocity error is -5.81% in material 'free_space' with wavelength sampled by 6 cells (maximum significant frequency 2.7053e+10Hz)\n\n2 - \n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 1.5 1.5 0.002\n#dx_dy_dz: 0.000443266302238 0.000443266302238 0.002 \n#time_window: 2.0013845711889122e-08\n\n#material: 1 0 1 0 half_space\n\n#waveform: contsine 1 6.76325848562e9 my_signal\n#hertzian_dipole: z 0.75 1.48670201093 0 my_signal\n#rx: 0.75 1.48670201093 0\n\n#box: 0 0 0 1.5 1.48670201093 0.002 half_space\n#cylinder: 0.75 0.743351005466 0 0.75 0.743351005466 0.002 0.1 pec\n\n#geometry_view: 0 0 0 1.5 1.5 0.002 0.000443266302238 0.000443266302238 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 7, 2016, 10:09:01AM",
        "content": "Dear Hugo,\n\nWelcome to the forum!\n\n1. You are correct. The numerical dispersion warning (in your case) is related to the spatial discretisation in the infinite direction (z in your case). Is it not relevant for your 2D simulation. I have filed a bug report (https://github.com/gprMax/gprMax/issues/82) and will look to improve the warning to take account of 2D simulations.\n\n2. You don't need to bother with defining a material for free space or using a box as the empty domain is free space.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Hugo Day",
        "date": "Dec 7, 2016, 11:03:48AM",
        "content": "Hi Craig,\n\nThanks for the quick response! Good to hear, if you're open to others helping with the code base I'd be happy to contribute when/where I can.\n\nCheers"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 7, 2016, 12:15:11PM",
        "content": "Hugo,\n\nOf course, we'd be delighted and encourage contributions to the code! When I get some time my intention is to create a flowchart to provide a overview of the different parts of the code and how they work together. This should help people who want to get started contributing. However, if the mean time if you are comfortable please dive in. We will review proposed changes/additions via pull requests on Github.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 8, 2016, 3:43:06AM",
        "content": "The numerical dispersion analysis should now report correctly for 2D simulations with non-cubic cells. Fixed in v.3.0.12.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/I-0LCtRm0ps",
    "title": "Confusion about using gprmax to generate B-scan graphs",
    "original_post": {
      "author": "Weizhen Zhang",
      "date": "Aug 22, 2022, 2:57:15AM",
      "content": "Hi,guys\n         1.I am a new user about gprMax. I want to simulate the radar detection diagram of tunnel lining. the model is 200cm*100cm,and including:Rebar,air,concrete,surrounding rock. I want to generate B-scan \n\n2. this is my test.in file :\n\n#title: the 0th model\n#domain: 2.0 1.0 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 25e-9\n#pml_cells: 0\n#material: 8 0.0001 1 0 concrete\n#waveform: ricker 1 900e6 my_ricker\n#hertzian_dipole: z 0.01 0.95 0 my_ricker\n#rx: 0.05 0.95 0\n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n#box: 0 0 0 2.0 1.0 0.002 concrete\n#geometry_objects_read: 0 0 0 /home/gprmax-dataset/h5-file/rock_defect0.h5 /home/gprmax-dataset/h5-file/defect.txt\n\n3. base this .in file to run script:\npython -m gprMax user_models/ test.in   -n 190 -gpu 0 \n\nthe result output is :\n\n4.my questions are:\n   1、why I can not I can't clearly see the medium with air\n   2、Can you help check the correctness and integrity of the parameters in the written file（test.in）. Because I am worried that these parameters are incorrectly configured, resulting in incorrect results."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 29, 2022, 7:13:05AM",
        "content": "A couple of quick points/questions:\n\n- Have you checked your geometry with the #geometry_view command and Paraview? To be sure your rebar and void geometry is being correctly imported.\n- Can you share 'defect.txt' so we can the material parameters in it?\n- You should turn on the PML, i.e. remove your #pml_cells: 0 command to get the default PML. That should sort out your boundary reflections.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Weizhen Zhang",
        "date": "Aug 31, 2022, 2:24:11AM",
        "content": "thanks for yuour reply\n\nand \n1、I am sure  rebar and void geometry is being correctly imported.\n2、this is my defect.txt file\n3、remove your #pml_cells: 0 use the default 10\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 31, 2022, 4:11:27PM",
        "content": "defects.txt\n#material: 6 0.001 1 0 rock\n#material: 300 1e8 1 0 rebar\n#material: 81 0.0005 1 0 defect\n\nI'd be careful that your air void is actually correctly defined as you have no material for air defined in the 'defect.txt' materials file. \n\nAlso I'd recommend you simulate your rebar as PEC - you can create your own PEC material in your 'defects.txt' file using:\n\n#material: 1 inf 1 0 rebar which will create a PEC material (with infinite conductivity).\n\nCraig\n\n"
      },
      {
        "author": "Weizhen Zhang",
        "date": "Sep 1, 2022, 2:26:54AM",
        "content": "thanks，\nAccording to the information you provided, we made it.\nAs shown in the figure below, thank for your help.\n\nbest\nzhangweizhen\n\n"
      },
      {
        "author": "Weizhen Zhang",
        "date": "Sep 15, 2022, 9:50:18PM",
        "content": "Hi,Craig Warren\n   Now I need to mass produce B-scan，My computer is a machine with 6G memory NVIDIA graphics card GTX1060，\n   I find that data generation is slow, and the rendering time increases with the increase of the number of traces n.\n\n   n =99  、produce 200 data、three processes --->              700 minutes  (model is 2m*0.75m)\n   n = 250 、produce 20 data、three processes ---->             480 minutes  (model is 5m*0.75m)\n\n   my questions are:\n 1、 Whether the running speed is normal？\n 2、How can I improve the running speed?\n 3、We are purchasing better machines: NVIDIA graphics card 3090Ti ,48G ,Can such a machine be of great help？\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FHIn4zetNeo",
    "title": "Access to Austinman/woman and time gating",
    "original_post": {
      "author": "Vignesh Radhakrishnan",
      "date": "Jan 19, 2022, 4:09:14AM",
      "content": "Hello,\n\nHope you are well. I am new to gprMax and to FDTD simulation in general and I apologise if the question is very basic in nature. \nI am trying to see if I can detect bones using RF and would like to simulate it using gprMax for higher fidility simulation. \nI am not able to access the austinman models and saw that there was an issue regarding this in 2019? Has there been an update on this?\nAlso, is it possible to simulate time-gating in gprMax? I would like to ignore primary reflections off the skin and focus on reflections from muscles and bones.\n\nThanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 1, 2022, 10:55:47AM",
        "content": "Dear Vignesh,\n\nAccess to the AustinMan/Woman models is controlled by the group at The University of Texas at Austin (http://sites.utexas.edu/austinmanaustinwomanmodels/) - we do not control that. As requested you should politely contact them for access - http://sites.utexas.edu/austinmanaustinwomanmodels/contact/\n\nYou can time gate your response if you like, but you must still simulate the entire time history, i.e. you cannot shorten the computation time. This is fundamental to the Finite-Difference Time-Domain (FDTD) numerical method.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5gm53D3BUSQ",
    "title": "How to do batch processing with gprMax ?",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Jan 14, 2020, 2:19:12AM",
      "content": "Hi guys !\n\nRecently I want to do machine learning with GPR B_scan images , this involves with bulk generation of models(inputfiles) and run them in gprMax , does anyone know how to do batch processing in gprMax？\n\nSincerely \nDongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 14, 2020, 10:50:00AM",
        "content": "Dear Dongyang,\n\nHave you considered using the #python blocks functionality? Create one input file that changes on every run to do what you need.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/OiVECDcWtgw",
    "title": "Additional Antenna",
    "original_post": {
      "author": "Nicola G",
      "date": "Jun 27, 2018, 5:40:38AM",
      "content": "Is it possible to add more transmit and receive antenna to the GPR max model and if so how would you go about doing it?\n\nI am looking to simulate 3 and 4 antenna methods using the software to validate some other results.\n\nThanks,\n\nNicola"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 27, 2018, 6:53:38AM",
        "content": "Hi Nicola,\n\nYou can build as many antennas as you like especially if you make them yourself and have a big enough computer as they will require a lot of resources. I think using more than one instances of the antennas already there should be possible but have not tried it. You should try and see if it works.\n\nAntonis"
      },
      {
        "author": "Nicola G",
        "date": "Jul 2, 2018, 9:43:34AM",
        "content": "Hi Antonis,\n\nThanks for the response, I have attempted to plot both A-scan and B-scans using three-antennas, two transmit and one receive.\n\nI receive data for the A-scan but when I plot the B-scan the return is just flat. I have attached a power point with my graphs and the code I am using, any suggestions on where I might have gone wrong with the B-scan?\n\nMany thanks,\n\nNicola"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 2, 2018, 11:35:59AM",
        "content": "Hi Nicola,\n\nI think there are a couple of points of confusion here:\n\n1. I can now see from your input file you are simulating your antennas with Hertzian dipole sources. That is a good starting point, but I think Antonis assumed you were using a full model of the antenna, i.e. including the antenna geometry, materials etc... \n2. You need to move the antennas to generate a B-scan, whether you simulate them as simple sources (such as the Hertzian dipole) or use a full antenna model. To move the simple sources (and receivers) you need to include the #src_steps and #rx_steps - see http://docs.gprmax.com/en/latest/input.html#src-steps-and-rx-steps To move full antenna models you need to include some Python and likely use the variable 'current_model_run'. See the docs for examples.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Nicola G",
        "date": "Jul 2, 2018, 12:01:41PM",
        "content": "Hi Craig,\n\nThanks, the code I had attached in the presentation was actually just a the A-scan code twice but with the geometric view removed. But seems at some point I did loose the #src_steps and #rx_steps, all fixed and working now.\n\nMany thanks,\n\nNicola"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/z66Nd_-a3SQ",
    "title": "How to read Rx_array Data : A Big Out File",
    "original_post": {
      "author": "HT.T",
      "date": "Sep 6, 2020, 9:06:02PM",
      "content": "Hello Craig:\n\n     I recently used gprmax to simulate the wide-angle detection (WARR) of GPR, and the receiver used array reception (rx_array), i.e. \n\nBut I have a problem, that is, the output file has only one out file. I want to read the data in it, but find a suitable method.\n\n Can you give me some suggestions in this respect?\n\nKind  regards\n\nHT.T"
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Sep 8, 2020, 12:32:37PM",
        "content": "Hello HT.T,\n\nAll the data are in this file. They are just stored in groups. Since gprMax output file is an HDF5 file, you can use Matlab's and Python's H5 functions to read your data.\n\n\nThis is a simple code for Matlab.\n\nfor i = 1 : your_number_of_receivers\n     dataey{i} = h5read('your_output_file.out', ['/rxs/rx', num2str(i), '/Ey']);\n     dataey{i} = dataey{i}';\nend\n\n\nKind regards,\nDimitris"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/AksrOI8a0lY",
    "title": "Regd several doubts",
    "original_post": {
      "author": "Romil Pandya",
      "date": "Mar 6, 2021, 4:33:45PM",
      "content": "Respected,\nHope you are doing well.\nI'm working on my research project on GPR , after using gprMax software I have few doubts to clarify for quality of output of my work. Please guide me for same.\n1) I'm working on MALA 450 and 750 MHz antennas, Is it possible to create same in gprMax by modifying MALA 1.2GHz python file in the software ? Can I change excitation frequency to above values in python file to make it similar to 450 Hz and 750 Hz antennas?If yes, then which parameters should I change and to which value?\n2) In one of my models, \nthe domain dimensions are : (0.5,0.3,1) m \nspatial steps are (0.001,0.001,0.001) \ntime window as 3000.\nCan you help me understanding how to decide most applicable value for spatial steps for any soil model and then how to decide value of time window from it. ( according to the equation mentioned on website ). Are they both related ?\n3) To generate B_scan from above soil model using Mala Antenna, By running 30 iteration of the same model using change in Antenna position from Left to Right, it's taking around 2 days to complete.\nCan you help me in knowing how to optimize speed of software ? I'm having server of 64 GB Ram I7 7th Gen 4 thread processor.\n Hoping for your guidance for the above questions.\nThank You,\nRomil"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Mar 8, 2021, 12:44:32AM",
        "content": "Dear Romil\n\n1) Creating new antenna models is unfortunately not that simple. The work described in the reference has to be conducted again. I guess not from scratch the material constant should be close to the one found for the 1200MHz one. But still all the dimension have to be optimized again (and material constant also)\n\n2) the time window is a user free parameter, the same way as for when you are acquiring data on the field. \nThe equation you mention is probably the one that link spatial discretization to time steps. Given a certain spatial discretization there is an optimal discretization time that allows for a good compromise between numerical resolution and computation speed. GprMax is already taking care of this. Unless very specific needs there is no reasons to fix the time discretization by yourself.\n\n3) 2 days for such a simulation. There is indeed room for improvements.\nIncrease the spatial discretization, going from 1mm to 2mm in the 3 dimensions gives you already have a shorter computational time by a factor 8. \nTo improve the spatial discretization you can :\n- Take the material with most important permittivity of your model. \n- calculate the wavelength in this material\n- fix dx so as to have about 10 cell/wavelength\nSince for 450/750MHz antennas there are no model, you are free in the spatial discretization.\n\nYou did not specified the unit of your time window, if this is 3000ns. Then indeed this leads to huge computational time. The best would be to stay close to your field data. Mirasoft allows for a maximum time windows of 200ns. You thus have no need to go for longer windows in your simulation. For  450/750MHz antennas this is even too long. Useful signal is usually bellow 100ns. \n\nI hope this helps\n\nBest regards\n\nChristian\n"
      },
      {
        "author": "Romil Pandya",
        "date": "Mar 13, 2021, 2:44:29PM",
        "content": "Respected Christian,\nThank you for answer, it was very insightful.\nCan you help me in resolving how to set depth on the y axis as\nthe parameter of the B scan ? , I've set the Distance Covered by antenna on X axis by modifying the python file, though need some help in converting time (ns) to depth (m) according to geometry of model.\nMy model size is (0.5*0.3*0.4) m\ndx dy dz = 0.001\ntime domain = 3000 steps\nDelta T = 1.92583320154647e-12 seconds\nTotal T = 5.777499604639409e-09 seconds.\nI'm using Mala 1.2 GHz antenna\nPlease find the attached B scan for reference.\n\nThank you,\nRomil\n\n"
      },
      {
        "author": "Christian Pigot",
        "date": "Mar 15, 2021, 4:55:25PM",
        "content": "Hello Romil\n\nHow to convert time into depth information?\nThis is one of the big question in GPR.\n\nYou can see the now ongoing discussion on this forum\nhttps://groups.google.com/g/gprmax/c/UvUOJ3_P7CA\n\nThe core issue is that to do this conversion you need to know the material properties and more specifically its permittivity:\nc0/sqrt(epsilon) = 2d/t\nwhere c0 is the speed of light in vacuum, epsilon the material permittivity, d the depth pf the target and t the travel time.\n\nThere is one equation and 2 unknown (d and epsilon). This cannot be solved\nYou have to known/make assumption on one to get the other.\n\nIn the present case you created the mode. You thus have the permittivity. \nIn the field your are not that lucky\n\nHope this help\n\nChristian\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BXdZS_mSKes",
    "title": "Identifying Two-way travel time from 2D A-scan Output",
    "original_post": {
      "author": "Parikshit Sah",
      "date": "May 2, 2024, 3:02:15PM",
      "content": "Hi,\nI'm analyzing results from a 2D Ascan I conducted with 6.65GHz antenna to calculate the depth from the two-way travel time of the antenna signal. The initial wave from the ascan has multiple waveforms which makes it difficult to select the initial waveform peak. It would be really helpful if I can get any guidance on how to select the peaks in the Ascan to identify the two-way travel time. I have attached the Ascan output I have along with the input file configuration.\n\n#title: Simulation with 6.65GHz Antenna 42mm radius\n\n#domain: 0.250 0.210 0.002\n#dx_dy_dz: 0.0002 0.0002 0.002\n#time_window: 3e-9\n\n#material: 5 0 1 0 sand\n#material: 60 0 1 0 potato\n\n#waveform: ricker 1 6.65e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.250 0.170 0.002 sand\n#sphere:  0.120 0.047 0 0.042 potato\n\n#geometry_view: 0 0 0 0.250 0.210 0.002 0.002 0.002 0.002 6.6GHz_42mm_rad n\n\n#python:\nfor i in range(1, 31):\n    print('#snapshot: 0 0 0 0.250 0.210 0.002 0.002 0.002 0.002 {} Simulation_6.6GHz_42mm_rad_{}'.format((i/10)*1e-9, i))\n#end_python:\n\n\n\nThanks,\nSah"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 8, 2024, 9:32:38AM",
        "content": "I recommend the following paper as a starting point it discusses 'time zero' in relation to GPR and may help your understanding - https://ieeexplore.ieee.org/document/1343425\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hxQ-IMTVk1U",
    "title": "A-scan of changing sand layer thickness",
    "original_post": {
      "author": "Lucy Buck",
      "date": "Nov 8, 2021, 5:31:31AM",
      "content": "Hello,\n\nI am trying to make several A-scans of a sand layer in peat. In each the thickness of the sand layer changes by 1 cm. So 10 cm, 9 cm...1cm, 0 cm.\n\nThe model I have made is working finr for 10 cm - 3 cm however when it gets to 2 cm and 1 cm the model does not run. I am not sure where I am going wrong with this so any help/advice is very much appretiated! Code is below.\n\n\nCode for 3 cm (does run):\n\n#title: A-scan from a peat-sand-peat stratigraphy #domain: 3 6 0.05\n#dx dy dz: 0.05 0.05 0.05\n#time window: 1000e-9\n#material: 60 0 1 0 Peat #material: 3 0 1 0 Sand\n#waveform: gaussiandot 1 50e6 mypulse #hertzian dipole: z 1.25 5 0 mypulse #rx: 1.75 5 0\n#python:\nif current model run == 1:\n# Model 1 - lower to upper layer thicknesses: peat 2 m, sand 0.03m, peat 2.9m print(’#box: 0 0 0 3 2 0.05 Peat n’)\nprint(’#box: 0 2 0 3 2.03 0.05 Sand n’)\nprint(’#box: 0 2.03 0 3 5 0.05 Peat n’)\nprint(’#geometry view: 0 0 0 3 6 0.05 0.05 0.05 0.05 3cm_500 n’)\n#end python: \n\n\nCode for 2 cm (does not run):\n\n#title: A-scan from a peat-sand-peat stratigraphy#domain: 3 6 0.05\n#dx dy dz: 0.05 0.05 0.05\n#time window: 1000e-9\n#material: 60 0 1 0 Peat #material: 3 0 1 0 Sand\n#waveform: gaussiandot 1 50e6 mypulse #hertzian dipole: z 1.25 5 0 mypulse #rx: 1.75 5 0\n#python:\nif current model run == 1:\n# Model 1 - lower to upper layer thicknesses: peat 2 m, sand 0.02m, peat 2.9m print(’#box: 0 0 0 3 2 0.05 Peat n’)\nprint(’#box: 0 2 0 3 2.02 0.05 Sand n’)\nprint(’#box: 0 2.02 0 3 5 0.05 Peat n’)\nprint(’#geometry view: 0 0 0 3 6 0.05 0.05 0.05 0.05 2cm_500 n’)\n#end python:"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Nov 10, 2021, 12:18:47AM",
        "content": "Hello\n\nHave you tried to increase the discretization of your model?\n\nYour discretization is 5cm, while you are defining a model whose smallest dimension is 2cm\nYou need your discretization to be smaller (or at least equal to) than the smallest dimension of your model.\n\nI would recommend to set #dx dy dz to 0.01 0.01 0.01 at least or smaller \n\nBest regard \nChristian\n"
      },
      {
        "author": "Lucy Buck",
        "date": "Nov 12, 2021, 8:08:21AM",
        "content": "That's it! Thank you\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/m4V-Ui9kOMQ",
    "title": "roughness parameters influences the target imagining ?",
    "original_post": {
      "author": "Luken",
      "date": "Jul 16, 2020, 4:01:10AM",
      "content": "Hi every gprmax user:\nI have a problem as following\nI set the roughness heights between 0.40-0.50 , however it influences my target imaging , how can I solve it? Is there somebody have met the same questions?\nThank a lot !"
    },
    "responses": [
      {
        "author": "Luken",
        "date": "Jul 16, 2020, 4:05:15AM",
        "content": "Here is my header\n#domain: 0.5 0.6 0.8\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-9\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.005 my_soil\n#fractal_box: 0 0 0 0.5 0.45 0.8 0 1 1 1 2 my_soil my_fractal_box\n#add_surface_roughness: 0 0.45 0 0.5 0.45 0.8 0 1 1 0.40 0.50 my_fractal_box\n#waveform: ricker 1 2e9 my_ricker\n#hertzian_dipole: x 0.260000 0.550000 0.075000 my_ricker\n#rx: 0.340000 0.550000 0.075000\n#rx: 0.425000 0.550000 0.240000\n#rx: 0.260000 0.550000 0.325000\n#rx: 0.175000 0.550000 0.160000\n#src_steps: 0 0 0.01\n#rx_steps: 0 0 0.01\n#geometry_objects_read: 0.165 0.25 0.37 ../user_libs/landmines/PMA_1.h5 ../user_libs/landmines/PMN.txt"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 20, 2020, 9:32:33AM",
        "content": "Dear Luken,\n\nI haven't run your input file, but I don't really understand your question. If you add roughness to a surface it will effect your response and potentially make your target harder to image.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Luken",
        "date": "Jul 20, 2020, 11:33:55AM",
        "content": "Dear Craig,\n\nThank you for your reply.That's really the question I've had.\n\nTo explain it more clearly,I'll send some pictures which is the model and the B-scan result .I have try change different parameters ,but it comes to the same strange images.I think the problem may be surface roughness is not included in the fractal box. But I'm not quite sure about that.\n I'm so sorry that i didn't explain my questions clearly.If not clearly yet,please let me know.Thank you so much!\n\nBest wishes,\n\nLuken"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 20, 2020, 1:58:24PM",
        "content": "Dear Luken,\n\nSee this thread for your answer: http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FF4oAzrkz1MI%2FDtmr7iaIAAAJ\n\nCraig"
      },
      {
        "author": "Luken",
        "date": "Jul 22, 2020, 5:15:40AM",
        "content": "Dear Craig ,\nThat really what I want ! Thanks a lot! By the way , after I add this paraviews in not only the roughness but also the fractal box, the image is corrected .\nBest wishes\nLuken"
      },
      {
        "author": "他我",
        "date": "Jun 14, 2021, 3:56:11AM",
        "content": "Hello, I have the same confusion, but I found that the link could not be opened（ http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FF4oAzrkz1MI%2FDtmr7iaIAAAJ）. Can you post the link to the content again?\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 14, 2021, 8:43:06AM",
        "content": "Link to post with info about fractal seeding - https://groups.google.com/g/gprmax/c/UvUOJ3_P7CA/m/n5111HXoBAAJ\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/J9krLq9Xfi0",
    "title": "Help with modeling a sloped surface in gprMax",
    "original_post": {
      "author": "farhad physic",
      "date": "Apr 16, 2025, 6:33:44AM",
      "content": "Dear gprMax Team,\nHi, I hope you're doing well.\nI'm trying to build a simple model where the transmitter and receiver move along a sloped surface, similar to collecting GPR data over a hill with an upward slope. There is also a cavity beneath this surface. I have a .dat file with specific properties I’d like to use.\nIs there any tutorial or example that shows how to model a slope like this? Or any similar model I could use as a reference?\nI've attached an image from the dataset for clarification.\nBest regards,\nFarhad"
    },
    "responses": [
      {
        "author": "Daniele Di Giorgio",
        "date": "Apr 16, 2025, 8:52:41AM",
        "content": "Maybe this can work:\n\nDomain Setup\nHorizontal extent: 0 to 35m\nVertical extent: 0 to 20m\nDiscretization (dx dy dz): 0.01m (1cm) — suitable for 250MHz\nTime window: 50ns\nMaterials #material: 1 0.06 1.0 0.0 0.0 # Dry sand (εr ≈ 6) #material: 2 1.0 1.0 0.0 0.0 # Air (εr ≈ 1)\n Geometry\nSlope surface: modeled via #geometry_objects: (will approximate using #box or polygonal mesh).\nCavity: rectangular #box assigned as air (Material 2)\n🛰 Antenna Setup\nWaveform: Ricker wavelet, 250MHz center frequency\nScan type: B-scan with Tx/Rx pairs stepping downhill along the slope surface\ndigitize the slope as a series of points and model it as a polygonal surface.\nThe cavity will be a box (rectangular air-filled void).\ncreate the actual slope_with_cavity.in GPRmax input file with:\nMaterial definitions\nGeometry (slope and cavity)\nRicker waveform source (250MHz)\nB-scan line going downhill\nbuild the full input file.\nDownload the attchment.\nThis file includes:\nA sloped surface approximated with thin air boxes above sand\nA rectangular cavity of air\nA 250MHz Ricker wavelet\nA B-scan line from the top to the bottom of the slope\nYou can run it using gprMax slope_with_cavity.in in your simulation environment.\n\nTell me if it worked!\n\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hNKPdWhmfrw",
    "title": "How to plot C-scan image in python",
    "original_post": {
      "author": "Lavanya akila",
      "date": "Jul 29, 2019, 5:07:01AM",
      "content": "Hi Craig,\n\nI generated multiple B-scan for C-scan using gprMax. I converted each B-scan output into .csv files. I can able to plot each B-scan in python.\n\n\nNow I want to plot 3D plot for C-scan image. Any idea about how to merge all csv and to plot 3D image of C-scan. Thanks in advance!!\n\nWith regards,\nLavanya Govindan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 29, 2019, 5:15:31AM",
        "content": "Hi Lavanya,\n\nCreating a C-scan is not really a modelling question, more a processing one, and therefore not really something gprMax would ever do. That said there maybe someone in this group that has done so from gprMax B-scans and has some suggestions for you.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4E9vp1xLGIg",
    "title": "question about c-scan!!",
    "original_post": {
      "author": "Noha Ismail",
      "date": "May 8, 2016, 9:47:01AM",
      "content": "Hello Dr. Crieg,\n\nPlease, i want to know if could i do C-scan or time slice to the output file? i think that was possible by using the old version!!\n\nMany thanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 9, 2016, 5:20:08AM",
        "content": "Hi Noha,\n\nYou can't do a time slice (C-scan) directly from gprMax in either the current or old versions. However, you can take B-scans from gprMax and do a time slice yourself in MATLAB or using other tools.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hFLgopZSkw8",
    "title": "I have a question",
    "original_post": {
      "author": "Zhang",
      "date": "May 1, 2017, 10:54:30PM",
      "content": "Hi all,\nIf I use the command #soil_peplinski and creat a B-scan, the mixing soil model will be the same? Because the B-scan is composed of A-scans and the mixing soil model was recalculated in each A-scans when I ran the model. How can I avoid the repeated computation? (for saving time)\nThank you very much."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 2, 2017, 4:53:07AM",
        "content": "You should be using a #fractal_box: command. In there you can keep the same seeding in the random generator and your model will be the same. \n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2017, 9:26:34AM",
        "content": "Just to add....\n\n#fractal_box - http://docs.gprmax.com/en/latest/input.html#fractal-box\n\nYou can also save and re-load geometry (which will speed up model building, especially for objects which use fractals) using the #geometry_objects_write and #geometry_objects_read commands. Useful if you are creating a B-scan where only the antenna geometry is moving between A-scans (traces)\n\n#geometry_objects_write - http://docs.gprmax.com/en/latest/input.html#geometry-objects-write\n#geometry_objects_read - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Zhang",
        "date": "May 5, 2017, 3:42:10AM",
        "content": "Hi Craig,\n\nThanks for the quick response."
      },
      {
        "author": "Zhang",
        "date": "May 5, 2017, 3:54:24AM",
        "content": "Hi Craig,\n\nI did that but there was an GeneralError:Non-physical wave propagation:'#add_dispersion_debye:1 0.00832536 9.231e12|0.0020|\n{s_soilmix_w0.1_materials}' requires positive values for the permittivity difference and relaxation times, and relaxation times that are greater than the time step for the model.\n\nHere is my input file:\n\n#title: the modle of 700 MHz ricker\n\n#domain: 2.400 1.200 0.400\n\n#dx_dy_dz: 0.005 0.005 0.005\n\n#time_window: 24e-9\n\n#waveform: ricker 1 700e6 my_ricker\n\n#hertzian_dipole: z 0.140 1.000 0.200 my_ricker\n\n#rx: 0.260 1.000 0.200\n\n#src_steps: 0.010 0 0\n\n#rx_steps: 0.010 0 0\n\n#geometry_objects_read: 0 0 0 ../model/s_soilmix_w0.1.h5 ../model/s_soilmix_w0.1_materials.txt\n\n#cylinder: 1.200 0.750 0 1.200 0.750 0.400 0.0375 free_space\n\nif I use the previous code , I can run the model. \nthe previous code:\n\n#title: the modle of 700 MHz ricker\n\n#domain: 2.400 1.200 0.400\n\n#dx_dy_dz: 0.005 0.005 0.005\n\n#time_window: 24e-9\n\n#waveform: ricker 1 700e6 my_ricker\n\n#hertzian_dipole: z 0.140 1.000 0.200 my_ricker\n\n#rx: 0.260 1.000 0.200\n\n#src_steps: 0.010 0 0\n\n#rx_steps: 0.010 0 0\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.1 my_soil\n\n#fractal_box: 0 0 0 2.4 1.0 0.4 1.5 1 1 1 50 my_soil my_soil_box\n\n#cylinder: 1.200 0.750 0 1.200 0.750 0.400 0.0375 free_space\n\n##geometry_objects_write: 0 0 0 2.1 1.2 0.4 s_soilmix_w0.1\n\nWhat should I do to solve the problem?"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gaWhGf2dJQk",
    "title": "Image preprocessing",
    "original_post": {
      "author": "shupeng li",
      "date": "Feb 28, 2021, 8:47:55PM",
      "content": "Dear people,\nI have created a model by means of gprMax, you will also find attached a picture of the Bscan ,I would like to ask you how to preprocess this kind of image.\nBecause the target hyperbola is not obvious in the image, I just want to make them more obvious. Do you have any good suggestions?\nSincerly, Shupeng"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Feb 28, 2021, 9:43:51PM",
        "content": "Dear Shupen\nThe most simple post processing is to conduct background removal\n\nSince you are dealing with simulation data, processing of A-scan is in the first order is not necessary\nGo directly p17 in the following paper\nhttps://core.ac.uk/download/pdf/46597923.pdf\n\nSecond order improvement might include time varying gain (p14)\nFrom your picture, this does not seems to be necessary\n\nHope this helps\n\nChristian\n\n"
      },
      {
        "author": "shupeng li",
        "date": "Mar 1, 2021, 12:27:44AM",
        "content": "Hi, Christian\nDo you mean I just need to remove the background? If so, am I programming directly on the simulated image? Is there another way? Hope to get your advice.\n\nSincerly Shupeng\n\n"
      },
      {
        "author": "Christian Pigot",
        "date": "Mar 1, 2021, 12:51:38AM",
        "content": "GprMax is a simulation software.\nYou provide it a model and it makes the calculation.\n\nRegarding the analysis, you have to do it on your own.\nThe GprMax developers provide a python macro that is very good starting point. It is located in the following folder\ngprMax\\tools\\plot_Bscan.py\nThis is how you manage to get the Bscan shown earlier. Open this file, it shows you how to read .out files and store the simulation results as python variable.\nYou can now process the results using the power of python.\nThe issue is now in python programming. I am sure someone in your lab is able to give some good advice.\n\nPS: if you, or someone around you, are more familiar with Matlab, have look in the folder\ngprMax\\tools\\MATLAB_scripts\n\nHope this help\n\nChristian\n"
      },
      {
        "author": "naween dissanayake",
        "date": "Mar 19, 2024, 9:35:23AM",
        "content": "Hi Lishupen,\n\n I'm afraid to ask if you could share with me the input file that belongs to the image.\n\nKind regards \nNawen \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/b9812DMScPU",
    "title": "Assistance requried in setting up Bscan.in model",
    "original_post": {
      "author": "Anthony Guerrera",
      "date": "Jun 2, 2017, 10:39:03PM",
      "content": "I require some direction with the work I have been tasked to do.\n\nI have a gpr test rig which is 1.2m long x 0.26m wide x 0.3 deep with a heterogeneous mix of soil (and bark) that I want to model. I will also be only using 0.4m of the box length for scanning. With d\n\nI am using the gpr MALA ProEx with the 2.3GHz module with antenna separation of 0.04m using a short time window of 4.1ns.\n\n\n\nCurrently my code looks like the below insert with just the soil (mostly taken from the example code). If I wanted to add small rocks (stone) or rock shaped aluminium into the model for scanning how would I accomplish this?\n\nAlso is my domain and antenna settings correct for the gpr I am trying to model?\n\n#title: B-scan for Heterogeneous soil in Gpr test rig simulation\n#domain: 0.400 0.200 0.1\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 4.1e-9\n\n#material: 4.5 0.01 1 0 concrete\n#material: 6 0 1 0 half_space\n#material: 3 0.01 1 0 sand\n\n#waveform: ricker 1 2.3e9 my_ricker\n#hertzian_dipole: z 0.040 0.150 0 my_ricker\n#rx: 0.080 0.150 0\n#src_steps: 0.005 0 0\n#rx_steps: 0.005 0 0\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 0.4 0.2 0.1 1.5 1 1 1 50 my_soil my_fractal_box\n#add_surface_roughness: 0 0 0.070 0.4 0.2 0.1 1.5 1 1 0.065 0.080 my_soil_box\n\n#geometry_view: 0 0 0 0.400 0.200 0.1 0.001 0.001 0.001 heterogeneous_soil n\n\nSecondly, when performing signal analysis on the result how would I import this file into matlab to view the raw data?\n\nFor reference, the MALA gpr outputs a .rd3 file 16-bit binary with a .rad header file.\n\nThanks,\nAnthony"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 3, 2017, 10:04:11AM",
        "content": "Hi Anthony,\n\nYour model is not correct. If you are trying to do a 2D model then your invariance direction (assuming z) should be the same size as Dz (i.e. 0.001). If you are doing a 3D model the z direction is only 10 cm which is not necessary that bad but a bit squeezed. \n\nThe other problem is that you have not left any space for air above the interface. Your source has a z coordinate equal to 0 which is only OK when you are doing a 2D model and not for 3D. \n\nThere are many issues here before even you get into the way you can programme gprMax to include the kind of targets and inhomogeneity you want. You need to study the examples carefully and then understand how the modelling method that gprMax uses (FDTD) works and its limitations and requirements in order to produce a correct model. \n\nThere is plenty of such information on the web and obviously our examples give you some indication of how to safely construct GPR models (e.g. including air etc.)\n\nBest\n\nAntonis"
      },
      {
        "author": "Anthony Guerrera",
        "date": "Jun 3, 2017, 11:17:59PM",
        "content": "I have altered the model to fix the things that you have mentioned.\n\nYes a 2D model is all I am looking for.\n\n#title: B-scan for Heterogeneous soil in Gpr test rig simulation\n#domain: 1.200 0.300 0.001\n; 1.269mm trigger interval\n#dx_dy_dz: 0.001 0.001 0.001\n; 4.10932ns (106 samples)\n#time_window: 4.1e-9\n\n#material: 4.5 0.01 1 0 concrete\n#material: 6 0 1 0 half_space\n#material: 3 0.01 1 0 sand\n#material: 7 0.01 1 0 limestone\n#material: 10.8 3766584940 1 0 aluminium\n\n#waveform: ricker 1 2.3e9 my_ricker\n#hertzian_dipole: z 0.400 0.250 0 my_ricker\n#rx: 0.440 0.250 0\n; Make steps 0.005 for quick 0.001 for actual\n#src_steps: 0.005 0 0\n#rx_steps: 0.005 0 0\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 1.2 0.250 0.001 1.5 1 1 1 50 my_soil my_fractal_box\n;#add_surface_roughness: 0 0 0.070 1.2 0.25 0.001 1.5 1 1 0.065 0.080 my_soil_box\n\n; gpr test rig container\n;#box: 0 0 0 1.2 0.250 0.001 sand\n\n; Target stones\n#cylinder: 0.600 0.200 0 0.600 0.200 0.001 0.010 limestone\n;#cylinder: 0.450 0.200 0 0.450 0.200 0.001 0.010 aluminium\n\n#geometry_view: 0 0 0 1.2 0.300 0.001 0.001 0.001 0.001 heterogeneous_soil n\n\nWhy doesn't the fractal_box display properly in paraview?\n\nHow can I generate the output that will allow me to display into say matlab with mesh instead of just a picture? So I can visually see each of the traces.\n\n\nThanks,\nAnthony"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 4, 2017, 6:45:26AM",
        "content": "Hi Anthony,\n\nAll geometry should be visible in Paraview. Are you using the macro - http://docs.gprmax.com/en/latest/output.html#geometry-output - to assist?\n\nSee my post here - https://groups.google.com/d/msg/gprmax/kEdh4omrr-U/EX0oz-PlCAAJ - regarding using #fractal_box's with a B-scan and seeding the random number generator.\n\nOnce you have imported the field output data into MATLAB you are free to plot individual traces (A-scans) or a B-scan image. There are scripts in the gprMax tools folder to help you if you want to import data into MATLAB.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Anthony Guerrera",
        "date": "Jun 6, 2017, 5:51:57AM",
        "content": "Hi Craig,\n\nI am using the macro py file but it only generate the outline of the region for this model. The other model I have works fine though.\n\n\nThanks I didn't know that thing about the seeding, that should prevent me from having issue down the line. The output you are referencing to is the HDF5 file output that can be imported into MATLAB?\n\nThanks,\nAnthony"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 6, 2017, 7:49:40AM",
        "content": "Hi Anthony,\n\nCan you paste the input file you are using.\n\nI am referring to the output file from gprMax containing the electric and magnetic field data at any receivers in the model.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Anthony Guerrera",
        "date": "Jun 6, 2017, 8:09:06AM",
        "content": "#title: B-scan for Heterogeneous soil in Gpr test rig simulation\n#domain: 1.200 0.300 0.001\n; 1.269mm trigger interval\n#dx_dy_dz: 0.001 0.001 0.001\n; 4.10932ns (106 samples)\n#time_window: 4.1e-9\n\n\n#material: 4.5 0.01 1 0 concrete\n#material: 6 0 1 0 half_space\n#material: 3 0.01 1 0 sand\n#material: 7 0.01 1 0 limestone\n#material: 10.8 3766584940 1 0 aluminium\n\n\n#waveform: ricker 1 2.3e9 my_ricker\n#hertzian_dipole: z 0.380 0.250 0 my_ricker\n#rx: 0.420 0.250 0\n\n; Make steps 0.005 for quick 0.001 for actual\n#src_steps: 0.001 0 0\n#rx_steps: 0.001 0 0\n\n\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 1.2 0.250 0.001 1.5 1 1 1 50 my_soil my_fractal_box 4\n;#add_surface_roughness: 0 0 0.070 1.2 0.25 0.001 1.5 1 1 0.065 0.080 my_soil_box 4\n\n\n\n; gpr test rig container\n;#box: 0 0 0 1.2 0.250 0.001 sand\n\n\n; Target stones\n#cylinder: 0.600 0.200 0 0.600 0.200 0.001 0.010 limestone\n;#cylinder: 0.450 0.200 0 0.450 0.200 0.001 0.010 aluminium\n\n\n#geometry_view: 0 0 0 1.2 0.300 0.001 0.001 0.001 0.001 heterogeneous_soil n\n\nHere is my .in file after a few modifications\n\nI am running v3.0.7 of gprMax\n\nThanks,\nAnthony"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 6, 2017, 8:15:09AM",
        "content": "Hi Anthony,\n\nThe geometry looks OK when I run your code (see attached screenshot). I recommend updating to the latest version of gprMax, as v.3.0.7 is quite old now.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6ZPhSfQRQlU",
    "title": "Loading of custom waveform takes long",
    "original_post": {
      "author": "Dominik Rhiem",
      "date": "Apr 2, 2025, 4:05:34AM",
      "content": "I simulate the signal of an FMCW radar with gprMax using a custom waveform. The waveform (as a zipped file) and the input file are attached. The following issues have arisen:\n1. If the waveform's time vector is shorter than the total duration of the simulation, this error occurs:\n\nIsn't gprMax supposed to pad the signal with zeros?\n2. As the time vector thus has to at least match the simulation duration, the file gets bigger. Loading in and interpolating takes ~3-4 minutes (the file size is around 10 MB unzipped!). The waveform time steps equal that of the simulation.\n3. Does my waveform arise smoothly enough from zero? There is some slight high-frequency content at 200-210 GHz in the result.\n4. If the waveform needs to be smoother, the waveform has to be sampled more finely, increasing file size and thus the loading/interpolation time.\n5. There is a jump in the gradient of the waveform at the beginning and end. May this cause the high frequency content?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 2, 2025, 9:37:07AM",
        "content": "I suggest to run gprMax with an impulse source. Use the 'impulse' keyword in the waveform command. This will provide you with the impulse response of the model. This is not correct to be used directly as FDTD does not propagate correctly all frequencies. However, if you convolve this with a valid excitation function you will get the response of the model as if it was excited by that function. A critical part is the duration of the model's  impulse response. Ideally it needs to be the same as the exciting function but you can use a shorter one and zero pad it. But then there will be errors that might or might not be significant depending on the application and on how quickly your model's impulse response goes to zero. \n\nThe convolution can happen in any post processing package you like (Python or MATLAB or R etc.)\n\nI have done this to simulate an SFCW GPR quickly and presented the idea in our workshop videos we have in our YouTube channel and also at the EAGE NSG2023 conference. The paper link is:\n\nhttps://www.research.ed.ac.uk/en/publications/efficient-finite-difference-time-domain-simulation-of-step-freque\n\nHope this helps!\n\nAntonis\n"
      },
      {
        "author": "Dominik Rhiem",
        "date": "Apr 7, 2025, 9:51:37AM",
        "content": "Hi Antonis,\n\nfirst of all, thank you so much for the recommendation. I watched the YouTube video, it was really helpful and I think I managed to wrap my head around your suggestion. I have tried an SFCW implementation for the most basic case of one transmitter and receiver which are just separated by air, and the result seems reasonable to me. However, I also compared this to an analytical calculation, and there are some major discrepancies which I currently cannot get rid of. I have attached both the input file for gprMax and my Matlab script for evaluation, maybe you can have a look?\nShort explanation: the antennas are separated by 0.4 meters. As you suggested, I am calculating the impulse response with gprmax. The simulation duration is roughly twice as long as the duration for the individual pulses - this is probably a bit overkill, but necessary to fully capture the pulse because its is delayed by ~1.3 nanoseconds due to its propagation (so we also have this delay represented for the mixing). I first calculate the transmitted signal for all individual pulses and convolve them with the impulse response. Here is a point where I am unsure: should I then perform the mixing already for all individual pulses, or first \"unwrap\" the pulses into a full signal and then do the mixing? I have implemented both versions, but the results are pretty much the same. Note also that I don't perform the I-Q-decomposition and the 90°-shifted signal, but I rather directly multiply the signals.\n\nI then also calculate an analytical signal, which is calculated based on the travel time. This is then processed in the same way as the gprmax signal. Finally, the two signals (gprmax/analytical) are shown in plots to be compared. The main issue is that the main peak in the mixed signal is shifted between these two versions; for the analytical calculation, it is at zero (which makes me think I did something wrong), for the gprmax version, it is at ~500 kHz. But this would also be equivalent to a distance of 17.5 micro meters, which is not correct, either. Any suggestions?\n\nBest,\nDominik\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 7, 2025, 10:53:20AM",
        "content": "Hi Dominik,\n\nI do not combine the received waveforms but process them one at a time. The sequence I have used is simple:\n\n1. Run gprMax with impulse waveform normalised to 1 (although the amplitude should not be important)\n2. Convolve  the impulse with the cosine function of the relevant frequency for the right duration (try with a ramp or not). This is the formal RX response \n3. Mix the RX response with the cosine function of the relevant frequency for the right duration (multiply the two together) and this is the \"I\" signal\n4. Mix the RX response with the sine function of the relevant frequency for the right duration (multiply the two together) and this is the \"Q\" signal \n5. Filter the \"I\" and \"Q\" with a low pass filter and the result will be an almost constant number which is the \"I\" (real) and \"Q\" (image) values of the complex number needed to populate the frequency vector.\n6. To avoid Gibbs ripples window that vector before iFFT.\n7. iFFT the vector and the real part is the time trace \n\nTo properly compare the analytical solution with this you need the impulse response of an infinite line source. This is available in free space and I think I might have the formula in my thesis. In gprMax you specify the current waveform of your sources and not the fields. The respsone is not complicated but it is not just a simple time delay of the input signal. \n\nHope that helps!\n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/mVi_3V_dtjw",
    "title": "Modelling a hollow circular section",
    "original_post": {
      "author": "Sai Teja Kuchipudi",
      "date": "Aug 12, 2021, 7:45:35AM",
      "content": "Hello\nI have been trying to model a concentric ring circumscribing a circle. All I can do is Putting the circle inside a big circle, so that it appears like I need. Can someone suggest me the way to model a hollow circular section or a ring using script supporting gprMax.\nThanks\nSai Teja"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Aug 13, 2021, 8:36:06AM",
        "content": "just use the material-values of the inner (small) circle of 'empty space'?\n\nor did I get your qustion wrong?\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iJGE5wB6YBU",
    "title": "linux installation",
    "original_post": {
      "author": "Bernd Schafferer",
      "date": "Aug 17, 2017, 10:41:18PM",
      "content": "Hi, \n\nwhen installing on linux  I get the error message below.\nIs there an ease fix ? \n\nThanks,\nBernd\n \n\nbernd@435MT:~/gprMax$ conda env create -f conda_env.yml\nFetching package metadata .........\nSolving package specifications: .\nCollecting mpi4py\n  Using cached mpi4py-2.0.0.tar.gz\nCollecting terminaltables\nCollecting tqdm\n  Using cached tqdm-4.15.0-py2.py3-none-any.whl\nBuilding wheels for collected packages: mpi4py\n  Running setup.py bdist_wheel for mpi4py ... error\n  Complete output from command /home/bernd/miniconda3/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-q_af0eeu/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" bdist_wheel -d /tmp/tmpa1gqb_sfpip-wheel- --python-tag cp35:\n  running bdist_wheel\n  running build\n  running build_src\n  running build_py\n  creating build\n  creating build/lib.linux-x86_64-3.5\n  creating build/lib.linux-x86_64-3.5/mpi4py\n  copying src/__main__.py -> build/lib.linux-x86_64-3.5/mpi4py\n  copying src/__init__.py -> build/lib.linux-x86_64-3.5/mpi4py\n  creating build/lib.linux-x86_64-3.5/mpi4py/include\n  creating build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/mpi4py.MPI.h -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/mpi4py.h -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/mpi4py.MPI_api.h -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/libmpi.pxd -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/MPI.pxd -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/__init__.pxd -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/__init__.pyx -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/mpi.pxi -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/include/mpi4py/mpi4py.i -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n  copying src/MPI.pxd -> build/lib.linux-x86_64-3.5/mpi4py\n  copying src/libmpi.pxd -> build/lib.linux-x86_64-3.5/mpi4py\n  running build_clib\n  MPI configuration: [mpi] from 'mpi.cfg'\n  checking for library 'lmpe' ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n  gcc -pthread _configtest.o -llmpe -o _configtest\n  /usr/bin/ld: cannot find -llmpe\n  collect2: error: ld returned 1 exit status\n  failure.\n  removing: _configtest.c _configtest.o\n  building 'mpe' dylib library\n  creating build/temp.linux-x86_64-3.5\n  creating build/temp.linux-x86_64-3.5/src\n  creating build/temp.linux-x86_64-3.5/src/lib-pmpi\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/mpe.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/mpe.o\n  creating build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi\n  gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/mpe.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libmpe.so\n  checking for library 'vt-mpi' ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n  gcc -pthread _configtest.o -lvt-mpi -o _configtest\n  /usr/bin/ld: cannot find -lvt-mpi\n  collect2: error: ld returned 1 exit status\n  failure.\n  removing: _configtest.c _configtest.o\n  checking for library 'vt.mpi' ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n  gcc -pthread _configtest.o -lvt.mpi -o _configtest\n  /usr/bin/ld: cannot find -lvt.mpi\n  collect2: error: ld returned 1 exit status\n  failure.\n  removing: _configtest.c _configtest.o\n  building 'vt' dylib library\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/vt.o\n  gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/vt.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libvt.so\n  checking for library 'vt-mpi' ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n  gcc -pthread _configtest.o -lvt-mpi -o _configtest\n  /usr/bin/ld: cannot find -lvt-mpi\n  collect2: error: ld returned 1 exit status\n  failure.\n  removing: _configtest.c _configtest.o\n  checking for library 'vt.mpi' ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n  gcc -pthread _configtest.o -lvt.mpi -o _configtest\n  /usr/bin/ld: cannot find -lvt.mpi\n  collect2: error: ld returned 1 exit status\n  failure.\n  removing: _configtest.c _configtest.o\n  building 'vt-mpi' dylib library\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-mpi.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-mpi.o\n  gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-mpi.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libvt-mpi.so\n  checking for library 'vt-hyb' ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n  gcc -pthread _configtest.o -lvt-hyb -o _configtest\n  /usr/bin/ld: cannot find -lvt-hyb\n  collect2: error: ld returned 1 exit status\n  failure.\n  removing: _configtest.c _configtest.o\n  checking for library 'vt.ompi' ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n  gcc -pthread _configtest.o -lvt.ompi -o _configtest\n  /usr/bin/ld: cannot find -lvt.ompi\n  collect2: error: ld returned 1 exit status\n  failure.\n  removing: _configtest.c _configtest.o\n  building 'vt-hyb' dylib library\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-hyb.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-hyb.o\n  gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-hyb.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libvt-hyb.so\n  running build_ext\n  MPI configuration: [mpi] from 'mpi.cfg'\n  checking for MPI compile and link ...\n  gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/bernd/miniconda3/envs/gprMax/include/python3.5m -c _configtest.c -o _configtest.o\n  _configtest.c:2:17: fatal error: mpi.h: No such file or directory\n   #include <mpi.h>\n                   ^\n  compilation terminated.\n  failure.\n  removing: _configtest.c _configtest.o\n  error: Cannot compile MPI programs. Check your configuration!!!\n  \n  ----------------------------------------\n  Failed building wheel for mpi4py\n  Running setup.py clean for mpi4py\nFailed to build mpi4py\nInstalling collected packages: mpi4py, terminaltables, tqdm\n  Running setup.py install for mpi4py ... error\n    Complete output from command /home/bernd/miniconda3/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-q_af0eeu/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-74mqh64r-record/install-record.txt --single-version-externally-managed --compile:\n    running install\n    running build\n    running build_src\n    running build_py\n    creating build\n    creating build/lib.linux-x86_64-3.5\n    creating build/lib.linux-x86_64-3.5/mpi4py\n    copying src/__main__.py -> build/lib.linux-x86_64-3.5/mpi4py\n    copying src/__init__.py -> build/lib.linux-x86_64-3.5/mpi4py\n    creating build/lib.linux-x86_64-3.5/mpi4py/include\n    creating build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/mpi4py.MPI.h -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/mpi4py.h -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/mpi4py.MPI_api.h -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/libmpi.pxd -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/MPI.pxd -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/__init__.pxd -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/__init__.pyx -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/mpi.pxi -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/include/mpi4py/mpi4py.i -> build/lib.linux-x86_64-3.5/mpi4py/include/mpi4py\n    copying src/MPI.pxd -> build/lib.linux-x86_64-3.5/mpi4py\n    copying src/libmpi.pxd -> build/lib.linux-x86_64-3.5/mpi4py\n    running build_clib\n    MPI configuration: [mpi] from 'mpi.cfg'\n    checking for library 'lmpe' ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n    gcc -pthread _configtest.o -llmpe -o _configtest\n    /usr/bin/ld: cannot find -llmpe\n    collect2: error: ld returned 1 exit status\n    failure.\n    removing: _configtest.c _configtest.o\n    building 'mpe' dylib library\n    creating build/temp.linux-x86_64-3.5\n    creating build/temp.linux-x86_64-3.5/src\n    creating build/temp.linux-x86_64-3.5/src/lib-pmpi\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/mpe.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/mpe.o\n    creating build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi\n    gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/mpe.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libmpe.so\n    checking for library 'vt-mpi' ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n    gcc -pthread _configtest.o -lvt-mpi -o _configtest\n    /usr/bin/ld: cannot find -lvt-mpi\n    collect2: error: ld returned 1 exit status\n    failure.\n    removing: _configtest.c _configtest.o\n    checking for library 'vt.mpi' ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n    gcc -pthread _configtest.o -lvt.mpi -o _configtest\n    /usr/bin/ld: cannot find -lvt.mpi\n    collect2: error: ld returned 1 exit status\n    failure.\n    removing: _configtest.c _configtest.o\n    building 'vt' dylib library\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/vt.o\n    gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/vt.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libvt.so\n    checking for library 'vt-mpi' ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n    gcc -pthread _configtest.o -lvt-mpi -o _configtest\n    /usr/bin/ld: cannot find -lvt-mpi\n    collect2: error: ld returned 1 exit status\n    failure.\n    removing: _configtest.c _configtest.o\n    checking for library 'vt.mpi' ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n    gcc -pthread _configtest.o -lvt.mpi -o _configtest\n    /usr/bin/ld: cannot find -lvt.mpi\n    collect2: error: ld returned 1 exit status\n    failure.\n    removing: _configtest.c _configtest.o\n    building 'vt-mpi' dylib library\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-mpi.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-mpi.o\n    gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-mpi.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libvt-mpi.so\n    checking for library 'vt-hyb' ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n    gcc -pthread _configtest.o -lvt-hyb -o _configtest\n    /usr/bin/ld: cannot find -lvt-hyb\n    collect2: error: ld returned 1 exit status\n    failure.\n    removing: _configtest.c _configtest.o\n    checking for library 'vt.ompi' ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c _configtest.c -o _configtest.o\n    gcc -pthread _configtest.o -lvt.ompi -o _configtest\n    /usr/bin/ld: cannot find -lvt.ompi\n    collect2: error: ld returned 1 exit status\n    failure.\n    removing: _configtest.c _configtest.o\n    building 'vt-hyb' dylib library\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -c src/lib-pmpi/vt-hyb.c -o build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-hyb.o\n    gcc -pthread -shared -L/home/bernd/miniconda3/envs/gprMax/lib -Wl,-rpath=/home/bernd/miniconda3/envs/gprMax/lib,--no-as-needed build/temp.linux-x86_64-3.5/src/lib-pmpi/vt-hyb.o -o build/lib.linux-x86_64-3.5/mpi4py/lib-pmpi/libvt-hyb.so\n    running build_ext\n    MPI configuration: [mpi] from 'mpi.cfg'\n    checking for MPI compile and link ...\n    gcc -pthread -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/bernd/miniconda3/envs/gprMax/include/python3.5m -c _configtest.c -o _configtest.o\n    _configtest.c:2:17: fatal error: mpi.h: No such file or directory\n     #include <mpi.h>\n                     ^\n    compilation terminated.\n    failure.\n    removing: _configtest.c _configtest.o\n    error: Cannot compile MPI programs. Check your configuration!!!\n    \n    ----------------------------------------\nCommand \"/home/bernd/miniconda3/envs/gprMax/bin/python -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-q_af0eeu/mpi4py/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /tmp/pip-74mqh64r-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-q_af0eeu/mpi4py/\n\nCondaValueError: pip returned an error"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 4:46:43AM",
        "content": "Hi Bernd,\n\ngprMax uses mpi4py, which is a MPI for Python package. It requires an underlying MPI installation, usually OpenMPI or MPICH. The error you are getting is because when trying to install the mpi4py package it can't find the underlying MPI installation. In gprMax MPI is used to task farm models to machines that have multiple nodes or GPUs. You have a couple of options:\n\nIf you think you'll use the MPI functionality then you need to install MPI and then create the conda environment (of which the mpi4py package is installed) again.\nIf you don't think you'll use the MPI functionality you can edit the 'conda_env.yml' file and comment out (with a hash) the mpi4py line, then create the conda environment again.\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NJFki0jwZy4",
    "title": "multiple sources",
    "original_post": {
      "author": "Brad Artman",
      "date": "Feb 6, 2023, 7:13:26PM",
      "content": "I think I'm right in saying that multiple sources re-make the entire model domain.\nWith complicated domains, this is a time-consuming process, and need not be redone methinks.\nI could be doing something foolish of course, but there is a significant hang after \n\"Building PML boundaries:\" that I believe to be associated with \"Building main grid\" that's quite un-responsive.\n\nIt seems to me that the assumption of the same main grid and PML boundaries for each shot would not be inappropriate.\n\n\n\n\n--- Model 1/2, input file: /u/st/du/bartman/NETLwork/2D/ModelsCO/CO_12_trenchandpipe_Ez_weights50/model.in \nConstants/variables used/available for Python scripting: {c: 299792458.0, current_model_run: 1, e0: 8.8541878128e-12, inputfile: /u/st/du/bartman/NETLwork/2D/ModelsCO/CO_12_trenchandpipe_Ez_weights50/model.in, m0: 1.25663706212e-06, number_model_runs: 2, z0: 376.73031366686166}\n--- Model 2/2, input file: /u/st/du/bartman/NETLwork/2D/ModelsCO/CO_12_trenchandpipe_Ez_weights50/model.in \nConstants/variables used/available for Python scripting: {c: 299792458.0, current_model_run: 2, e0: 8.8541878128e-12, inputfile: /u/st/du/bartman/NETLwork/2D/ModelsCO/CO_12_trenchandpipe_Ez_weights50/model.in, m0: 1.25663706212e-06, number_model_runs: 2, z0: 376.73031366686166}\nPML: formulation: HORIPML, order: 1, thickness: x0: 10, y0: 10, z0: 0, xmax: 10, ymax: 10, zmax: 0 cells\nBuilding PML boundaries: 100%|███████████████████| 4/4 [00:00<00:00, 30.28it/s]"
    },
    "responses": [
      {
        "author": "Brad Artman",
        "date": "Feb 6, 2023, 8:49:52PM",
        "content": "would an sx_array solve this instead of inserting several hertzian_dipoles?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 7, 2023, 10:03:57AM",
        "content": "Hi Brad,\n\nIf you are using theoretical sources then you can use the #src_steps: and #rx_steps: to move them along in a regular pattern after computing the output(s) for a specific Tx setup. You can have a many sources as you want anyway and all they will move with the steps defined. The grid is not recalculated as it does not need to. The field arrays are cleared and the source and receiver points move along. \n\nif you are having different input files for different traces then for everyone the grid parameters will recalculate as they are different models. In order to keep most of the computation of grid parameters reasonable for big models you can save the grid structure using a #geometry_objects_write:  command  once and then a #geometry_objects_read:  command to import directly the parameters in another model without computing them again. This speeds up things. This technique is useful when we model the actual antenna and there are objects that need to be created again from scratch but we want to avoid the creation of the complete grid (layers, targets etc ...)\n\nHope this makes sense!\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/u8mNBwcafaU",
    "title": "executing input file in python code instead of command line",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "May 27, 2020, 3:30:56PM",
      "content": "HI carig,\n\nI changed my code as you see to string but it doesn't work. i I have looked in the source  code and i found that the function needed more parameters(arguments in pic2). pls I need your help urgently\n\nbecause I want to execute 40,000 input file and i could not do it (every inputfile) in command line. \n\nBest regards ,"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 27, 2020, 3:47:21PM",
        "content": "Dear Ahmed,\n\nThere are no more required arguments. All the other arguments you see in the source code are optional. The error you are seeing is either because you have not correctly installed gprMax or not activated the conda environment. \n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/aC7DwVD2ROg",
    "title": "Adjustment or reduction of the direct wave, \"Time Zero,\" or surface wave in the MLF 80 MHz antenna.",
    "original_post": {
      "author": "BIDYUT BARIK",
      "date": "Jan 28, 2025, 10:09:44PM",
      "content": "Hi everyone,\nI am currently working with an MLF 80 MHz antenna. During data collection, the direct wave appears 5 meters below in a normal profile and 15 meters below in a CMP profile. Could you please suggest ways to reduce this surface wave or direct wave during data collection?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zfTRjQUqKs4",
    "title": "Fractal box with normal material",
    "original_post": {
      "author": "Dimitrios Angelis",
      "date": "Sep 17, 2016, 9:29:15PM",
      "content": "Hello!!!\n\nI want to ask a question about the fractal box command.\nInside the guide it says that i can create a fractal box with one material, but every time i am trying to do it\ni get some errors about modifications. Which are the modifications needed?\n\nFurthermore after the last update i cant plot any scans a or b.\nAlso i am attaching for you some pictures of the input file and the errors."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 19, 2016, 7:12:23AM",
        "content": "Hi Dimitrios,\n\nThe primary use of the #fractal_box command is to create a heterogeneous environment when combined with a material mixing model, e.g. the Peplinski soil (#soil_peplinski). The #fractal_box can also have modifications to it, e.g. adding rough surfaces (#add_rough_surface) or even grass/roots. As you have spotted in the docs we also allow a #fractal_box to be used with a single homogeneous material for cases where you just want to add a rough surface. \n\nFrom what I can see of your input file and the error message, you are using a #fractal_box with a single material, but no further modification, e.g. adding a rough surface. Therefore this is the equivalent of just using a simple #box command, which is why you get the error message.\n\nI don't see any problems with plotting on my Windows 7 test machine. From the error message it doesn't look like something to do with gprMax. Can you confirm what OS you are using, and also make sure your conda environment is up-to-date, see http://docs.gprmax.com/en/latest/include_readme.html#updating-conda-and-python-packages\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Sep 19, 2016, 8:15:12AM",
        "content": "Hello Mr Warren,\n\nFirstly, i need to thank you for your answer about the fractal box, it was very helpfull. \nSecondly, i tried to update and everything seems to be up to date, i even reinstalled gprmax and still have the same problem.\n\nMy pc has windows 10.\n\nAny suggestions?"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 19, 2016, 9:49:01AM",
        "content": "Thanks Dimitrios.\n\nThe issue with plotting should be solved now, it appears to be a problem with the tool we use for plotting - matplotlib. A bug report for the problem is at https://github.com/gprMax/gprMax/issues/75\n\nIf you update gprMax again, it should now work. Let me know if not.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3ix-YNghms0",
    "title": "Bscan",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Nov 21, 2024, 4:16:55AM",
      "content": "Bonjour!\nI created my input file with a Python script that interpolates soil conditions for each iteration, allowing for varying scenarios. I would like to know if it is possible to generate a B-scan at the end of processing multiple A-scans, as each iteration results in a different A-scan.\nI have already tried this approach, but the resulting B-scan does not show clear utility patterns.\nCould you provide guidance on how to resolve this issue?\nKind regards,\nNaween"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 2, 2024, 9:24:35AM",
        "content": "Don't really understand your question - please try to be clearer. If you are using fractals and not seeded the random number generated then you maybe generating a different fractal for each A-scan - see our docs, parameter i2 https://docs.gprmax.com/en/latest/input.html#fractal-box\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/RoSj4yj_IbM",
    "title": "Increase precision of #src_steps and #rx_steps commands",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Sep 3, 2021, 5:25:06AM",
      "content": "Dear gprMax developers and users,\n\nHow could I be able to increase the precision of the #src_steps and #rx_steps commands? I'm currently trying to use 0.025m, however gprMax only understands up to 0.02m. I tried to change the precision by changing the constants.py , constants.pxd, receivers.py and sources.py files, and running the lines in the terminal for the code update, but I was unsuccessful.\n\nIf you can help me I would appreciate it a lot.\n\nYours sincerely,\n\nBruno Barauna"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 3, 2021, 6:05:27PM",
        "content": "The src and rx steps commands translate their values into spatial steps that are fixed in size as multiples of the grid step in the specified direction. gprMax rounds spatial values to the nearest integer multiple of grid steps. You cannot have a src or rx steps smaller than dx, dy or dz. So, in essence internally you can move by 0 or 1, or 2 and so on grid steps … it does not make sense to move in any other way as then you are not at a field location …\n\nHope this helps\n\nAntonis\n"
      },
      {
        "author": "Bruno Barauna",
        "date": "Sep 6, 2021, 8:23:36AM",
        "content": "That's exactly it, you're all right.\n\nThank you very much for the response and attention.\n\nBruno\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sOYosO6OjaY",
    "title": "move antennas",
    "original_post": {
      "author": "min min",
      "date": "Jul 29, 2019, 9:48:36PM",
      "content": "Dear everyone,\n  I have a question about the use of the built-in antenna. If I want to do a C-scan simulation and each time the distance that the antenna moves at is not the same. And I have a '.csv' file for the locations of the antenna after each move. How can I use this '.csv' file to determine the locations of the built-in antenna.\nBest wishes,\nMIN"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 30, 2019, 8:13:38AM",
        "content": "The GPR antenna models can be moved to any locations between model runs by specifying the x, y, and z coordinates in a block of Python. See the example in the docs - http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model\n\nYou can parse your CSV file into your Python block and extract the coordinates to use as above example.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4wxDmTuYsWA",
    "title": "A few queries",
    "original_post": {
      "author": "Tim Tilford",
      "date": "Oct 11, 2017, 7:56:23AM",
      "content": "Hi All,\n\nI'm a new user to gprMax and am highly impressed with the code. I do have a few high level queries I hope you could help with?\n\nSubgridding: I have read the papers regarding subgrid implementation in gprMax. I haven't found a way to activate subgrids in the version I have installed. Is this still under development to be released in a future version?\n\nSymmetry: Is there a symmetry / anti-symmetry capability in gprMax?\n\nMaximum model size: Is there an upper limit to the size of the model? I am having issues writing the geometry view file for very large meshes.\n\nMulti-GPU. Is there a multi-GPU capability. I have access to a dual K80 machine. I assume there is limited i/o from any GPU analysis?\n\nFrequency-Modulated Continuous-Wave: I understand I can define my own waveform by defining my own excitation file. This is an amplitude for every half timestep in the analysis? Could I also modify the sources.py file to implement this? I'm not a python coder (I have written a Yee FDTD code in Fortran OpenMP/OpenACC a few years back).\n\nThanks in advance.\n\nTim."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 11, 2017, 10:25:50AM",
        "content": "Hi Tim,\n\nWelcome to the forum!\n\n1. gprMax has no subgridding capability yet. There are papers about it (one from IWAGPR 2017) but we have not implemented the process yet. The truth is that there is a version with subgridding under testing developed by John Hartley in Edinburgh (my PhD student). This is done using gprMax but it will be given out when we know it works and after publishing it as well. It will not be long but not in the next few months ...\n\n2. There is no proper implementation of symmetry. You can trick some cases using PEC plates but for proper symmetry, you need to have PMC plates as well. These are not difficult to introduce but as there are not very useful for GPR we did not bother. However, if you need them and you are happy to get into Python there are options ...\n\n3. The limit is only set by the amount of computing resource available to you. There is no other limit in gprMax. If you have problems with very big files should be resource related or you have found a bug (maybe an integer is somewhere where a long integer should be ...) If this is the case use the github bug reporting process.\n\n4. You cannot use multiple GPUs as in a domain decomposition (MPI type) parallelization. We use multiple GPUs as task farming or job sharing and this is easy to do. An MSc student looked into creating a CPU MPI implementation, this year, but run out of time to get something working. A similar GPU based idea can work but the speed will be determined by the slowest part. Interesting work but no trivial in terms of time ...\n\n5. You can go down the route of the excitation file. You need to be careful with the sampling to avoid some high-frequency noise that can be generated. The half-step sampling is correct for Hertzian dipole sources. Adding your own source definition in the same way as done for the existing ones is a rather simple process for someone like you who has experience in FDTD and programming. I think it might be the better option.\n\nWe are keen to see gprMax used in other areas as well so, don't worry if what you do does not involve GPR modelling. gprMax is just an FDTD solver which we will hope can be used to help people needing EM modelling.\n\nBest\n\nAntonis"
      },
      {
        "author": "Tim Tilford",
        "date": "Oct 11, 2017, 12:14:46PM",
        "content": "Hi Antonis,\n\nMany thanks for your feedback - it is appreciated.\n\nThe problem I am dealing with involves a relatively large domain and high excitation frequency so am looking at ways to reduce the runtime. I will try to implement the FMCW excitation in python. Hopefully I can develop some publications from the work. It's an unfunded \"spare time\" project - us academics have so much spare time - and cite your Computer Physics Communications paper.\n\nThe error I got was:     'Writing geometry view file   / struct.error: 'I' format requires 0 <= number <= 4294967295\n\nWhile a long integer may be needed the the simpler option would be to run problems with fewer than 2^32 cells :-)\n\nTim."
      },
      {
        "author": "Craig Warren",
        "date": "Oct 22, 2017, 5:21:29AM",
        "content": "Hi Tim,\n\nI’d echo everything Antonis has said. The good news is that subgridding and potentially MPI domain decomposition are things that should become part of the code in the future.\n\nI haven’t looked specifically into the error you are getting with the geometry view but it looks like it is to do with the VTK format, which is how the geometry information is stored. I looks like it is trying to overflow the integer. I’m not sure if this can be changed as it might be part of the VTK standard, but I’ll take a look. gprMax will run the model without the geometry view if you have sufficient memory.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fFxuB0FH2VI",
    "title": "2D Ex",
    "original_post": {
      "author": "Meir Gershenson",
      "date": "Sep 30, 2016, 11:47:15AM",
      "content": "I am trying to model two horizontal electrode on top of resistive half space by outing voltage source at a gap in the middle.  3D is too slow so I use 2D (GPU please).  All I get is Ez when I excite it with voltage on the X direction (except on the gap).  Where I am wrong?\n\n#title: Depth response in soil 18m\n#domain: 10.0 20.0 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 1.0e-6\n#num_threads: 4\n---------------------------------------------------\n#material: 6.0 0.015 1 0 my_soil\n#waveform: gaussian 1. 8.0e6 my_gauss\n#voltage_source: x 5.0 19.0 0.0 0.0 my_gauss\n#rx_array: 5.0 1.0 0.0 5.0 19.0 0.0 0.0 1.0 0.0\n\n-----------------------------------------------------\n\n#box: 0.0 19.0 0.0 10.0 20.0 0.015 free_space\n#box: 0.0 0.0 0.0 10.0 19.0 0.015 my_soil\n#edge: 2.0 19.0 0.0 8.0 19.0 0.0 pec\n#edge: 5.0 19.0 0.0 5.01 19.0 0.0 free_space\n\n\n#geometry_view: 0 0 0 10.0 20.0 0.01 0.01 0.01 0.01 Depth_response_my_soil n half space"
    },
    "responses": [
      {
        "author": "Meir Gershenson",
        "date": "Sep 30, 2016, 7:43:09PM",
        "content": "When I run it 3D ie extra width with pml on z, it is OK but real run is estimated 42 hours - (no B scan)."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 1, 2016, 5:17:49AM",
        "content": "Hi Meir,\n\nThe good news is that we are starting working on a GPU version very soon! The bad news is that it is not going to be ready for a few good months; most likely next year.\n\nYou are running a 2D simulation - out of necessity - and your invariance direction is in \"z\". That means you only get a non-zero E field in the z direction. In essence, the mode is TMz so you cannot have an x-directed dipole. The reason you see your voltage pulse at the source point is because it is a hard voltage source that you prescribe. It has no real effect as all that xy plane at 0.0 z is a pec boundary. The concepts we use to create a 2D slice of the 3D model to work as proper TMz 2D mode are not that difficult to extend in doing TE modes but as they are not used to much in GPR modelling we have not done this yet. So, you can only have an Ez component and an Hx and Hy in a TMz mode.\n\nYou cannot really do any real antenna structures in 2D. Anything you build is infinite long in the invariance direction and the theoretical Hertzian dipole is actually a line source (we still called a Hertzian dipole for convenience ...)\n\nHope this helps!\n\nAntonis"
      },
      {
        "author": "Meir Gershenson",
        "date": "Oct 2, 2016, 10:30:05AM",
        "content": "I bite the bullet and run skinny 3D. First run very rough 9 hours, second run is estimated 24 hours."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 4, 2016, 5:33:42AM",
        "content": "Hi Meir,\n\nIt is obviously good to experiment but you should be careful with a \"skinny\" 3D model. The distance to the PMLs will be small and standard PMLs do not like very much long elongated domains. gprMax employs a very powerful underlying formulation for PMLs that can be used to tweak them and adjust them to perform better under difficult conditions. This, however, is a research topic and there are no fast and easy rules to do it. In some cases, there might not even be a proper setting to make them perform very well in such demanding situations. So, you need to tread carefully and always remember that the numerical answer is not necessarily always right especially if the model and the underlying method is pushed to its limits.\n\nBest\n\nAntonis"
      },
      {
        "author": "Meir Gershenson",
        "date": "Oct 4, 2016, 8:24:33AM",
        "content": "This is how I run it:\n#title: Tunnel response in soil 13m\n#domain: 6.0 15.0 1.0\n#dx_dy_dz: 0.0125 0.0125 0.0125\n#time_window: 2.0e-6\n#num_threads: 4\n#pml_cells: 20 \n---------------------------------------------------\n#material: 6.0 0.01 1 0 my_soil\n#waveform: gaussian 1. 3.0e6 my_gauss\n#voltage_source: x 3.0 14.5 0.5 0.0 my_gauss\n#rx: 3.0 14.0 0.5\n-----------------------------------------------------\n#box: 0.0 14.0 0.0 6.0 15.0 1.0 free_space\n\n#box: 0.0 0.0 0.0 6.0 14.0 1.0 my_soil\n\n#cylinder: 3.0 3.0 0.0 3.0 3.0 1.0 1.0 free_space\n\n\n#box: 0.5 14.0 0.4 5.5 14.5 0.6 pec\n#box: 2.0 14.0 0.4 4.0 14.5 0.6 free_space\n\n#plate: 0.5 14.5 0.4 5.5 14.5 0.6 pec\n#edge: 3.0 14.5 0.4 3.0 14.5 0.6 free_space\n\n\n#geometry_view: 0.0 0.0 0.0 6.0 15.0 1.0 0.05 0.05 0.05 tunnel_response_my_soil n\n\nI double the pml and made it wide enough 1m.  It run for 23 hours, Ex is slightly rough, but the results fit my expectation.  The inversion technique I am working on gave exactly what I expected, good for IWGPR.  \nThanks. Meir"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NIOxtiu1FG4",
    "title": "Question about frequency and dispersion",
    "original_post": {
      "author": "Espen Svendsen",
      "date": "Mar 17, 2020, 11:59:00AM",
      "content": "Hi,\nI am trying to reproduce a field data set collected in a clayey till environment. For this I use gprMAX to forward model the propagation of the EM wave through different synthetic subsurfaces.\n  Until now, I have looked into which source wavelet I should use and how the propagation affects the frequency content. Regardless of the wavelet I use, I am not able to correctly mimic the decrease in center frequency of the propagated wave through the clayey till section.  \n  I suspect the reason for this is that I am not including a dispersion model. I have read the gprMAX manual and have found that there are three different dispersion models to choose from (Debye, Drue, and Lorentz). I am not sure which is the best for my case: I suspect that both the EM properties of the clay and relaxation of water could lead to dispersion.\n  My current model have consists of two materials: Sand and clayey till, with the following parameters:\n#material: 12.6 0.04 1 0 clay\n#material: 5 0.01 1 0 sand_dry\n  The materials forms three homogenous objects (Two sandlayers and the background clayey till) but I wish to use more complex geostatistical models at a later stage.\n\nI have attached a figure of the model geometry and depth-frequency plots for both observed and modelled data. \n\nI hope you can help me\nBest wishes\nEspen"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 17, 2020, 12:44:12PM",
        "content": "Hi Espen,\n\ngprMax has a good range of models to describe dispersion. In your case the Debye model or a multipole Debye model will be best. There is already a sophisticated soil model available in gprMax; see the papers published by our team listed on the website and details of the implementation in the docs. In the literature you can find few clay soil models that can be approximated with Debye poles.\n\nGood luck\n\nAntonis"
      },
      {
        "author": "Espen Svendsen",
        "date": "Mar 18, 2020, 8:15:12AM",
        "content": "Hi Antonis,\n\nThanks for the quick reply! I'll check out the Debye model(s) and the litterature.\n\nI have one follow-up question though: \n\nHow strictly/formally do you mean soil, when you say soil model? Although clayey tills consist of unconsolidated sediments, only a subpart of my area of interest would qualify as \"proper soil\", as soil formation processes aren't dominating yet.\nShould I be aware of any soil specific EM properties that aren't present in my unconsolidated tills?\n\nBest wishes\nEspen"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 18, 2020, 11:00:45AM",
        "content": "Hi Espen,\n\nThere are papers that are concentrating mostly on soils in the geological meaning of the term so, tills will not be covered as such. From an electromagnetic perspective what it counts is the variation of the electrical properties that are made up by the mixture of the constituents. It is not easy especially if there is no prior information on tills but anything more sophisticated than a homogeneous blob will be a step up. gprMax embeds the mathematical models you need but the problem is always where and how to use them appropriately. I do not really have any expertise with tills although my first degree is in Geology ;-)\n\nBest\n\nAntonis"
      },
      {
        "author": "Espen Svendsen",
        "date": "Mar 19, 2020, 6:45:32AM",
        "content": "Hi Antonis,\n\nThanks for the reply and help - I'll try to adapt the method as best as possible then :) \n\nCheers\nEspen"
      },
      {
        "author": "Espen Svendsen",
        "date": "Apr 1, 2020, 10:41:52AM",
        "content": "Hi again Antonis,\n  Once again thanks for the replies - they helped, and I am a step closer with the modelling after consulting the literature.\n  However, I would like to study the effect of sand/sill heterogeneity in clay tills, and I wonder if my modelling approach is correct:\n-        Unfortunately, I cannot use the soil model by Peplinski as I work in the frequency range below 0.3 GHz.\n-        However, I have found a lot complex permittivity descriptions for comparable materials (Sand, silt, mixtures) for my frequency range (1-300 MHz.  50, 100 and 200 MHz antennae) in the literature. You pointed me in the right direction on how to implement Derbye multipole models to describe the materials.\n   The question is regarding mixing-models/homogenization:\n  -        Is it correct, FDTD-wise, to implement different dispersion parameters at every cell corresponding to the cell material in that given cell and let gprMax do the “mixing” for that given geometry, by either:\no   Assign Debye models to all the materials that I have in my model. Which could 10000+ for Gaussian fields? I guess that would influence computational cost?\no   Use one Debye model for all the “sand materials” and one Debye model for all the “clay materials” – though I’m not sure if that makes sense input wise for the #add_dispersion: function and #material command.\n-        Or should I follow some mixing-models and make “homogenous materials” representing different heterogeneous combinations, e.g. clay with a little sand, or clay with a lot of sand?\n  I hope my question(s) are understandable, I and gladly rephrase them if they are not :) I hope you can help me, and understand if not – at least I found it difficult to find an answer in the literature.\nBest wishes\nEspen"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 1, 2020, 11:35:38AM",
        "content": "Hi Espen,\n\nAssigning a different Debye material at every FDTD cell is possible but computationally prohibitive. I do not recommend trying it. The way that makes more sense for geological and natural materials is to create a material that describes the formation (e.g. sand) and then stochastically vary some of its parameters as we mostly encounter in real practice. Only man made artificial materials will have a specific value of electrical properties (e.g. plastic) mixtures do have a bulk representation when the wavelength is large in relation to the size of their constituents. However, this bulk property homogenises the formation and this might not be what you want. Using some variation around this property will create a more realistic representation.\n\nYou should consider \"bining\" the materials as well. There is no reason for a different material when the difference in their permittivities is very small. So, 3 and 3.01 should be the same material. Actually variation past the first decimal are too small to be very important at such frequencies. This will limit the number of materials you need and it will be a lot faster to run.\n\nThe attached paper is a rather old approach that illustrates some of the ideas. It was really only 2D and used a conversion from hydraulic permeability. This one \n\nhttps://www.sciencedirect.com/science/article/pii/S0098300419305540?via%3Dihub\n\nis a lot more recent and sophisticated ...\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "Espen Svendsen",
        "date": "Apr 2, 2020, 11:35:10AM",
        "content": "Hi Antonis,\n\nOnce again thanks for the quick reply! I read the two papers and combining it with your answer it helped :) \n\nBest regards\nEspen"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/PKHcBKaRyoY",
    "title": "A_scan generated pulse",
    "original_post": {
      "author": "Tolunay Aydın",
      "date": "Jul 26, 2016, 9:20:12AM",
      "content": "Hello when i try to plot A_scan for a simple structure i observe the produced pulse itself from the receiver. How can i prevent observing it .Instead i want to observe the first reflection from the surface .Below is the code:\n\n#material: 2.1 0.00000000000001 1.0 0.0 dry_wood\n\n#waveform: gaussian 1 2.5e9 my_wave_form\n\n#hertzian_dipole: y 0.23 0.25 0.25 my_wave_form\n\n#rx: 0.27 0.25 0.25\n\n#src_steps: 0.0 0.01 0.0\n\n#rx_steps: 0.0 0.01 0.0\n\n#domain: 0.50 0.50 0.30\n\n#dx_dy_dz: 0.002 0.002 0.002\n\n#time_window: 1e-8\n\n#box: 0.0 0.0 0.0 0.5 0.5 0.15 dry_wood\n\n#title: Model of a Box Inside the Wall\n\n#messages: y\n\n#num_threads: 8\n\nAnd A-scan is given in attachment.\n\nAs seen from the code we expect the first reflection to occur at 6.6*10^(-10) s .However Ascan shows that it occurs at 2.5*10^(-10) s.\nHow can i solve the problem. Thanks in advance."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 26, 2016, 9:53:27AM",
        "content": "Hi Tolunay,\n\nA couple of questions/observations:\n\n- Why are you using a Gaussian shaped waveform with a Hertzian dipole? An actual antenna will radiate a waveform similar to a Ricker, therefore if you use a Hertzian dipole to represent the antenna, I would advise using a Ricker waveform.\n- The direct wave (from source to receiver) is always going to overlap with the reflected wave from the surface of the dry wood, because of the distances between source and receiver, and distance between source, surface of the dry wood and receiver. If you are specifically interested in only the reflected wave from the surface of the dry wood then you can run another model without the dry wood and take the difference of the 2 responses (essentially like a background removal).\n\nHope this helps.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/efH01jtINY0",
    "title": "How to establish a non-uniform target other than soil",
    "original_post": {
      "author": "yang kun",
      "date": "Sep 20, 2020, 8:09:20AM",
      "content": "Dear researchers:\n         I would like to build a fractal structure similar to the soil model to realize the non-uniform distribution of dielectric constant, but GPRMAX only provides a special case of soil, so I would like to ask for your help and I would be very grateful. For example, create an uneven target like a rock."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 9, 2020, 10:50:22AM",
        "content": "Dear Yang Kun,\n\nYou can import geometry/materials that you have generated yourself, i.e. create your own distribution using your own algorithms, using the #geometry_objects_read command, see the docs for more info on how to use it - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nKind regards,\n\nCraig"
      },
      {
        "author": "yang kun",
        "date": "Oct 12, 2020, 9:58:35AM",
        "content": "Dear Craig Warren,\n\n          Thank you very much for your reply. I've seen the example you gave and see that it seems feasible to do that. However, I prefer to use Python scripts to apply fractals to internally defined geometry, \nsuch as # Sphere, so that a fractal dielectric constant similar to that of soil can be implemented inside the sphere. This is closer to the truth. Or can I modify part of the GPRMax code to implement such an\n object dielectric constant setting? By the way, can you tell me what part of the GPRMAX is your code for creating a geometric object and setting material properties on the object? Forgive me for not being\n able to understand the core code of GPRMAX because it is too complicated.（ps~The code structure in your documentation that I've seen seems too general） I hope I can get your advice. thank you"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 15, 2020, 11:29:17AM",
        "content": "Dear Yang Kun,\n\nI wouldn't advise modifying the gprMax code unless you have a clear understanding of what you are doing. At the moment you can apply a fractal distribution of soil properties (the Peplinski model) to a box object, i.e. using the #fractal_box command. You can't currently apply the fractal distribution to other object primitives such as a sphere (I am interested to learn why you want to apply it to a sphere). The only option you could try which might help to this is to apply rough surfaces to each face of the fractal (cubic) box. Otherwise you will need to generate your geometry and materials externally to gprMax and then import them with the #geometry_objects_read command.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/abz55IGZajg",
    "title": "How can we use Matlab to execute gprMax3.0",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Oct 8, 2017, 9:30:19PM",
      "content": "When I worked with the old version of GprMax 2.0, I used  eval(['system(''' './GprMax3D ',file,'' ''')'])  in Matlab to execute GprMax without opearting it by hand.  For gprMax3.0, I hope I can use Matlab to activate the python package of gprMax and automatically run the software without typing command in the command promt every time. Has anybody done this?"
    },
    "responses": [
      {
        "author": "hongjv zhou",
        "date": "Oct 8, 2017, 9:55:41PM",
        "content": "Hi\nFrom your name, we should be from the same country.\nCan you send a e-mail to me for the communication to the gprMax?\nHere is my e-mail address: zhouh...@163.com\nLate blessing for the Mid-Autumn Festival"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/mMJA1moyFaY",
    "title": "Happy New Year 2017 -GprMax- :)",
    "original_post": {
      "author": "Rym Ghozzi",
      "date": "Dec 31, 2016, 2:53:31PM",
      "content": "Happy New Year to All of you, I wish that 2017 will be better than the last year, We need More Peace, More Love and More Happiness"
    },
    "responses": [
      {
        "author": "Sony Achmad Louis",
        "date": "Jan 9, 2017, 4:12:32AM",
        "content": "Aaamiin... :)\n\n#latepost"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 9, 2017, 5:56:21AM",
        "content": "Happy New Year!\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pUDnNNShKyY",
    "title": "Run gprMax on multi-GPU",
    "original_post": {
      "author": "time Off",
      "date": "Nov 17, 2021, 8:19:33PM",
      "content": "Hello everyone,\n      I'm wondering whether gprMax can integrate the memory of multiple GPUs. For example, if there is a model that requires 47GB memory, can it be simulated with two RTX3090s of 24GB memory?  Or is the maximum size of the model limited by the memory of a single GPU (the  maximum size of the  model cannot exceed 24GB, even if you have two RTX3090 with 24GB memory), multiple GPUs just accelerate the calculation."
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Nov 21, 2021, 7:42:53AM",
        "content": "Yes, you are right.the memory is not integrable.\n\nsince the whole model has to be in the memory to do the calculations, every model has to be complete at each computing device.\n\nevery GPU computes one A-scan, so every GPU has to dispose over the whole model.\n\n\nif your model is too big, you'll have to do decreze the spatial resolution or cut-off unnessesary parts of your model.\n\n\ncheers, Micha\n"
      },
      {
        "author": "time Off",
        "date": "Nov 21, 2021, 8:38:07PM",
        "content": "Thanks for the reply.  I find that decrezing the spatial resolution is a good way to save GPU memory :).\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JX0rTWd6NFY",
    "title": "How to use the Snapshot conmand to produce VTI image.",
    "original_post": {
      "author": "Kun Zeng",
      "date": "Mar 27, 2016, 11:11:28PM",
      "content": "Dear Master,\n\nI want to use snapshot to create the geomtry but I have no way to use it. Can you give me a example in a input file?\n\nThank you very much\n\nKun"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 28, 2016, 10:44:35AM",
        "content": "Kun,\n\nThe snapshot command is not for viewing geometry, it is designed to take a snapshot of the EM fields at a time instant during the simulation - http://docs.gprmax.com/en/latest/input.html#snapshot\n\nRegards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MC1uwHNH5TA",
    "title": "no reflected waves from targets",
    "original_post": {
      "author": "呉尽",
      "date": "Jul 21, 2020, 12:17:19AM",
      "content": "Hi!\nRecently, I have been using gprMax to make a forward modeling of electromagnetic wave propagation in a fractured rock.\nAs the model.png shows, there are several fractures, 5 m in front of a source and receiver.\nThe domain is 100 * 0.002 * 100 m. The source is a Ricker wavelet with a center frequency of 100 MHz. \nThe distance between source and receiver is around 5 m.\nThe fractures are represented by 'staircased edges with a higher relative permeability. \nIn the rx1.png, it seems that there are no reflected waves from fractures.\nThe result is the same with that of a model without any fracture.\nI also changed time_window to a larger value. There are still no much difference. \n\nI tried many ways to change the model. \nNo obvious difference was found. I don't know where is wrong.\nAny advice and comment is welcome.\n\n\nThanks!\nBest regards,\nJin"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 21, 2020, 5:57:41AM",
        "content": "Dear Jin,\n\nHere are a few observation and questions that might help:\n\n1. Do you expect to detect fractures with widths ~2mm and relative permittivity of 60 (and conductivity of 100mS/m) with a source of centre frequency 100MHz?\n2. Run the model with and without the fractures and subtract the outputs to see only the response from the fractures. If there is a response and it is small then this is likely the only way you will clearly see it.\n3. Have you carefully checked the geometry of your model? You are using edges which won't appear in a 'normal' geometry view which just shows geometry at a cell level. You will need to use the 'fine' geometry view option. See http://docs.gprmax.com/en/latest/input.html#geometry-view\n4. Your model is 2D and uses a 2mm spatial resolution yet you are placing sources and geometry at positions that are not a multiple of 2mm. This is OK but you have to be aware that internally your source and geometry positions are being rounded to a multiple of 2mm. So see point 3 on checking geometry to make sure this is what you intend.\n5. Does your domain need to be so large? Especially for initial testing. Make something smaller to run faster to confirm or not your assumptions.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/X5ywA3tEGKE",
    "title": "simulation of pipe in ground-weird results: I would expect hyperbola signal but it simulates cross-shape",
    "original_post": {
      "author": "filippo bandini",
      "date": "Jan 14, 2019, 4:58:06PM",
      "content": "Hello, \nI am simulating a b-scan of a PVC pipe in a clay medium (attached).  I performed  110 runs. \nI attach results in terms of Ez.  I obtain 3 visible signals: the first signal should be the radiation directly going from transmitter to receiver, then I obtain the air-clay reflection and finally this weird X-shape signal.\nI would expect the typical hyperbola signal in the electric field. However, I obtain this low-intensity \"cross\" shape signal, below the reflection from the air-clay interface that I cannot explain. \nI would deeply appreciate if anyone could explain results or eventual structural errors in my model.\nThanks so much!"
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Jan 15, 2019, 5:00:54AM",
        "content": "Hello Fillippo,\n\nI think that you are getting this signal because your Tx Rx are placed too far from the medium.\n\nMove your source and receiver closer to medium and you should get the desired result.\n#hertzian_dipole: z 0.1 4.51 0 my_ricker\n#rx: 0.6 4.51 0\n\nKind regards,\nDimitris"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 16, 2019, 4:54:12AM",
        "content": "Hi Fillippo,\n\nThe reflection from the PVC pipe in your simulation will be weak due to the conductivity of the clay. It is however present in your image, you just need to increase the gain to visualise it (see attached image 1). The cross-shaped signal that you see is formed from artefacts of the Perfectly Matched Layer (PML) absorbing boundary conditions (ABC), i.e. the PML is not working as efficiently as it could in this case. Specifically the artefacts are most likely coming from the boundaries of the simulation at the air/clay interface. If you are particularly interested you can look at some snapshots of the fields to see exactly where. Anyway, to reduce these PML effects you can adjust the properties of the PML (an advanced topic see http://docs.gprmax.com/en/latest/input.html#pml-cfs) and/or increase the thickness of the PML. The default thickness of the PML is 10 cells. You can see (in attached image 2) that when the PML thickness is increased to 20 cells (with the command #pml_cells: 20 20 0 20 20 0) the cross-shaped signal is reduced in intensity.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "filippo bandini",
        "date": "Jan 16, 2019, 5:18:47AM",
        "content": "Thanks a lot Dr. Dimitrios Angelis. I was planning to simulate air-launced antennas indeed (potentially I would like to simulate antennas also further away from the medium). Why should antenna far away from medium be an issue for my model?\n\nThanks a lot for your availability!"
      },
      {
        "author": "filippo bandini",
        "date": "Jan 16, 2019, 5:21:48AM",
        "content": "Thanks a lot Dr Craig Warren. Looking forward to receiving the images."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Y_tyfGWA2ic",
    "title": "AttributeError: 'FDTDGrid' object has no attribute 'updatecoeffsE'",
    "original_post": {
      "author": "王辰宇",
      "date": "Mar 3, 2025, 3:57:54AM",
      "content": "I got problems when running puthon code on jupyter notebook of colab. Error reports said: \"AttributeError: 'FDTDGrid' object has no attribute 'updatecoeffsE'\".\nI encountered this problem when running :\n  import run as r;\n  r.process_folder(\"./output\")\nI noticed that errors occurred when it comes to the code line:\"api(filename, n=num_scan, gpu={0})\",but then I tried running \"!python -m gprMax \"/content/drive/MyDrive/output/1.in\" -n 10 -gpu\" directly on jupyter notebook and it worked successfully. Could anyone tell where the problems might be?\nHere is the error report by colab:\n/content/drive/MyDrive/run.py in process_file(file_path) 59 filename = file_path 60 fi = filename[:-3] ---> 61 api(filename, n=num_scan, gpu={0}) 62 merge_files(fi, removefiles=True) 63 /content/gprMax/gprMax/gprMax.py in api(inputfile, n, task, restart, mpi, mpi_no_spawn, mpicomm, gpu, benchmark, geometry_only, geometry_fixed, write_processed, opt_taguchi) 106 args.opt_taguchi = opt_taguchi 107 --> 108 run_main(args) 109 110 /content/gprMax/gprMax/gprMax.py in run_main(args) 189 if args.task and args.restart: 190 raise GeneralError('Job array and restart modes cannot be used together') --> 191 run_std_sim(args, inputfile, usernamespace) 192 193 /content/gprMax/gprMax/gprMax.py in run_std_sim(args, inputfile, usernamespace, optparams) 230 else: 231 modelusernamespace = usernamespace --> 232 run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace) 233 gc.collect() 234 tsimend = timer() /content/gprMax/gprMax/model_build_run.py in run_model(args, currentmodelrun, modelend, numbermodelruns, inputfile, usernamespace) 371 tsolve = solve_cpu(currentmodelrun, modelend, G) 372 else: --> 373 tsolve, memsolve = solve_gpu(currentmodelrun, modelend, G) 374 375 # Write an output file in HDF5 format /content/gprMax/gprMax/model_build_run.py in solve_gpu(currentmodelrun, modelend, G) 506 kernels_fields = SourceModule(kernels_template_fields.substitute(REAL=cudafloattype, COMPLEX=cudacomplextype, N_updatecoeffsE=G.updatecoeffsE.size, N_updatecoeffsH=G.updatecoeffsH.size, NY_MATCOEFFS=G.updatecoeffsE.shape[1], NY_MATDISPCOEFFS=G.updatecoeffsdispersive.shape[1], NX_FIELDS=G.nx + 1, NY_FIELDS=G.ny + 1, NZ_FIELDS=G.nz + 1, NX_ID=G.ID.shape[1], NY_ID=G.ID.shape[2], NZ_ID=G.ID.shape[3] ... 507 else: # Set to one any substitutions for dispersive materials --> 508 kernels_fields = SourceModule(kernels_template_fields.substitute(REAL=cudafloattype, COMPLEX=cudacomplextype, N_updatecoeffsE=G.updatecoeffsE.size, N_updatecoeffsH=G.updatecoeffsH.size, NY_MATCOEFFS=G.updatecoeffsE.shape[1], NY_MATDISPCOEFFS=1, NX_FIELDS=G.nx + 1, NY_FIELDS=G.ny + 1, NZ_FIELDS=G.nz + 1, NX_ID=G.ID.shape[1], NY_ID=G.ID.shape[2], NZ_ID=G.ID.shape[3], NX_T=1, NY_T=1... 509 update_e_gpu = kernels_fields.get_function(\"update_e\") 510 update_h_gpu = kernels_fields.get_function(\"update_h\") AttributeError: 'FDTDGrid' object has no attribute 'updatecoeffsE'"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nBoUsdGEHlM",
    "title": "increase the resistance of transmission line -- cause a problem",
    "original_post": {
      "author": "xianyang gao",
      "date": "Jan 11, 2017, 10:14:34AM",
      "content": "Hi everyone,\n\nI am doing an experiment on a basic bowtie antenna. When I increased the resistance of the transmission line to 250 Ohms, a problem showed as attached picture.\nWhy is that? I read the user - guide of gprMax, It says the resistance can be any value greater than zero and less than the impedance of free space (376.73 Ohms).\n\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 11, 2017, 1:00:58PM",
        "content": "Hi Xianyang,\n\nQuick answer is that the error looks like it is related to plotting, rather than necessarily the simulation. Does it occur when you try to plot the s11? If so, try editing the plotting script to manually adjust the ranges for plotting and see if you can get a plot.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Jan 12, 2017, 5:58:39AM",
        "content": "Dear Craig,\n\nI looked deeper inside the output HDF5 file and found that this is not a problem of plotting. Please find the attached picture of vtotal and Itotal. The results are very strange after I increase the resistance of transmission line.\n\nWhat caused this problem?\n\nBest regards\nXianyang"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 12, 2017, 6:07:58AM",
        "content": "Hi Xianyang,\n\nWhat you get is an unstable solution. For some reason the 1D formulation for the transmission line becomes unstable for that value of impedance. We need to check this or restrict the applicable values taking into account parameters in the main FDTD solver. At the moment you can get good results by trying the Resistive voltage excitation mechanism that should not have such problems.\n\nRegards\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 12, 2017, 6:09:43AM",
        "content": "Hi Xianyang,\n\nCan you paste/attach the input file you are running, so we can see the context and diagnose.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "xianyang gao",
        "date": "Jan 12, 2017, 7:53:25AM",
        "content": "Dear all,\n\nHere I attached the input file.\n\nBest regards\nXianyang"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 12, 2017, 3:09:35PM",
        "content": "Thanks Xianyang. Can you file a bug report using our Issue tracker - https://github.com/gprmax/gprMax/issues \n\nWhat would be helpful for us to investigate the issue is if in the bug report you can: \n\n- explain the problem\n- attach or copy/paste the input file\n- if possible find the value of resistance that causes the transmission line to become unstable\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ns_1a71_eEg",
    "title": "merged.out is empty",
    "original_post": {
      "author": "Ishtar 23-20",
      "date": "Apr 16, 2024, 3:06:25PM",
      "content": "Hi, thank you in advance for your reply.\n\nMy merged.out file comes up empty. I have attached screenshots of the command line input and file output. Also, i have worked extensively with the A_scan.out file with some Intensity scripts, so I am very confident that it has all the data in it. \n\nSincerely\nMK"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 17, 2024, 4:10:46AM",
        "content": "Can you show the full directory listing off all the output files you are trying to merge?\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/SeJ8tEysIrc",
    "title": "Tx and Rx Bowties antenna GSSI",
    "original_post": {
      "author": "Carlos Díaz",
      "date": "Jun 28, 2017, 1:16:56PM",
      "content": "Hi,\n\nI hope you are fine, I am using the antenna GSSI, I run the script antenna_like_GSSI_1500_fs.in, after that I visualize the .vti with Paramount but I can not find the Tx and Rx Bowties, image attached, I tried with 0.001 resolution and with 0.002 resolution, but I can not see those bowties, could you help me please.\n\nI will appreciate it so much.\n\nSincerely,\n\nCarlos Díaz\nBogotá, Colombia"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 3, 2017, 5:50:51AM",
        "content": "Hi Carlos,\n\nThe bowties are constructed using the #plate command. The #geometry_view command with the 'n' flag produces geometry information on a per-cell basis, so you won't see any #plate objects as these set cell edges. If you change the flag to 'f' you'll get geometry information on a per-cell-edge basis, and you'll see the bowties. However, I recommend only taking a slice of geometry around the bowties/PCB when using the 'f' flag, otherwise you will get an extremely large geometry file.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Ve8Amyna8ZM",
    "title": "Time-depth conversion issue",
    "original_post": {
      "author": "Kurt Soncco",
      "date": "Jul 21, 2022, 4:45:21PM",
      "content": "Hello everyone, \n\nFirst, thanks to all the support about this amazing package for GPR modelling. \n\nI'm having issues with the time-depth conversion. I'm performing A-scans of different frequencies of the same model: A wood member of 0.50 m of depth and a steel plate at the bottom. Check geometry in the attached file, as well as the input file I used (I only change the frequency of the wave).\n\nThe problem is that, calculating the velocity of the wave in the medium, I figured that the velocity does not change as the frequency increases. So, my question and problem are: why A scans changes as the frequency increases? And why after I calculate the depth using this formula the peaks of the wave do not appear to be in the position of the plate?\nv=\\frac{c}{\\sqrt{\\varepsilon}}; z=\\frac{v\\times t}{2}\n\nIn my research group, we expect that the peaks will appear in the same depth positions, as the geometry and velocity does not change. \nI'm attaching some plots I have for several frequencies and how my time-depth conversion looks like. \n\nThank you for the time of reading the questions,\nKurt Soncco\nResearch Assistant IDEA LAB\nUniversity of Illinois at Urbana Champaign"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 15, 2022, 11:29:49AM",
        "content": "Dear Kurt,\n\nChanging the centre frequency of the waveform will change the frequency content, but importantly will also effect the onset of the waveform - see, for example, the definition at http://docs.gprmax.com/en/latest/plotting.html#gaussiandot\n\nIf you perform time-zero corrections on your A-scan you should find that the reflections 'line up'.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/u2PTSPnQUgI",
    "title": "Python script for cylinder_Ascan_2D.py",
    "original_post": {
      "author": "Hussain Mumtaiz",
      "date": "Feb 6, 2021, 5:02:01PM",
      "content": "Hi:\nI am using gprMax on my research  and I am looking for a copy or location of the python script ( API_  example of the cylinder_Ascan_2D.py.\nI keep looking with no luck.\nReg;\nHussain"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Feb 7, 2021, 5:04:30PM",
        "content": "Hussian\n\nNot sure what you are looking for\nGprMax requires .in file to work\nThe one for the A scan cylinder is to be found in the documentation\nhttp://docs.gprmax.com/en/latest/examples_simple_2D.html\n\nChristian\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hZQrvyrMzh8",
    "title": "Question about using the \"impulse\" waveform option for FMCW excitation",
    "original_post": {
      "author": "Khurram",
      "date": "Oct 30, 2023, 6:39:51PM",
      "content": "Hello! I recently started looking at gprMax for my work and have a few questions / observations about using the impulse waveform option. Let me put down my thoughts as bullet points. Here goes:\n\nI have seen the youtube video explaining the impulse option and how it was used for SFCW excitation. I want to do the same but for FMCW. I have also looked at all the conversations in this group that had anything to do with either of those two waveforms to avoid asking duplicate questions.\nMy first observation is that when Antonis did the youtube video, I noticed that he set the pulse duration equal to 0.5e-6 which is the same time as the time window given to gprMax. Is this just a coincidence or is there a deeper meaning here?\nUnless I am missing something, I would expect that those two time periods can be different. I am looking at this from an LTI perspective. gprMax gives me the impulse response. The critical thing probably is to ensure that the impulse response has \"died down sufficiently\" in the time window we gave as input. I am not sure about this since I am not a gprMax expert. But assuming that what we get from gprMax is the impulse response, we should be able to convolve that with any signal (of course respecting the frequency limits of the FDTD) of any length and we should be good. Is that correct?\nI generated the impulse response using the same input file that Antonis used in the video. Then I basically generated a chirp from 0.8 to 1.2 GHz but of a longer duration (10e-6) than the time window given to gprMax. I then convolved this chirp with the impulse response and did all of the subsequent FMCW signal processing. But I can't seem to be able to explain things. I can add more details about this point but I first want to ensure that the observations / questions I had above are dealt with. I did ramp up the chirp slowly as has been suggested in a lot of places.\nLastly, is it worthwhile to sort of follow the approach that Antonis did in the video but for FMCW? Basically break down the FMCW chirp into lets say 100 parts. Give each one of them as a separate input. Its not clear in my head how this would help if at all.\nI appreciate all the help I can get on this. Cheers!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 31, 2023, 6:22:44AM",
        "content": "Hi Khurram,\n\nYou are making some very good points and questions and show to many other people that once you have done your research what you ask is better formed and specific so it can be answered more directly. Thank you for that.\n\nYour 3rd point is the key to accuracy here. If you run the FDTD (gprMax) for the time duration of the original response then your process of convolution of the forcing function (pulse) with it should produce an answer within numerical precision. There is an added trick here that the sampling of the fields are not at the same time as the specification of the actual source for a transparent dipole or line source (i.e. a current density term). This contribution might result to a slightly higher error and prevent you from going down to rounding error precision which can be achieved. However, the assumption that the impulse response can be effectively zero padded to the end is a key one. In 2D the impulse response of a line source will never go down to zero (it is an invite source ...) In 3D things can be a bit better but this truncation introduces error that needs to be checked to see how acceptable it is or not. It can be fine to have this error if you can keep it under control and save on computation. Alternatively, you can be more sophisticated and use extrapolation methods (e.g. Prony's method) to extrapolate the impulse response after it has sufficiently reduced instead of zero padding. This has been done before for improving the computation of resonant frequencies from high-Q structures that otherwise will need millions of iterations. There are methods available and well tested.\n\nI personally have not done the FMCW process as most people use the computationally simpler SFCW which is commercially available and I did this to respond to that demand. I have presented in a more detail the SFCW process at the recent Near Surface Geoscience conference in Edinburgh but it is essentially the same as in the YouTube video. \n\nThis paper (https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=9749913) from the RIMFAX (the GPR onboard the NASA Mars Rover \"Perseverance\") team details a process to model FMCW using gprMax, as RIMFAX is an FMCW GPR, without doing the complete (naive) implementation and it might help you. If you cannot get the paper email me privately and can give you a copy. \n\nHope this helps and good luck. If you find an efficient accurate way to do this it would be nice to do an example and a notebook so other people can benefit. This is my plan for the SFCW case but this is much easier.\n\nBest wishes\n\nAntonis\n"
      },
      {
        "author": "Khurram",
        "date": "Oct 31, 2023, 7:16:13PM",
        "content": "Hello Antonis,\n\nThank you for responding to my post! Also, thank you for the paper. I just finished reading it. I don't think they are doing quite what I want. Unless I missed something, they basically model the whole FMCW waveform and its RX processing finally ending up with a reflection series of the sub-surface model. After that they basically use gprMax with a gaussian waveform and show how to get from what gprMax gives you to the reflection series. That involves background subtraction and deconvolution of the gaussian pulse used by gprMax. Once they show this analytically, they don't actually go through the process of getting the impulse response from gprMax using the impulse option and convolving it with the FMCW waveform. In other words, they don't quite do what you did in the youtube video. They establish equivalence analytically and then simply use gpMax with the Gaussian pulse.\n\nI have a few follow-up clarifications / questions from your response. I hope you and possibly other people can join in on these.\n\n-- You said that if I run gprMax for the duration of my original response (I am guessing you mean the duration of my FMCW pulse) and then convolve it with my FMCW pulse, that should produce an answer that's within the numerical precision. I think I agree with that. The problem, however, is that would results in 10-50 million iterations of gprMax because my FMCW pulse is so long, about 50 micr0 seconds or so. My question is: Why can not I run gprMax for a smaller time period (let's say 1 us) and then convolve the resulting impulse response of 1 us with my FMCW pulse of duration 50 us? What's wrong in doing that?\n\n-- I did not quite understand your point about the sampling of the fields but I do not think that's my main problem right now. I could live with a simulation that has some higher error as long as it makes sense.\n\n-- I also do not quite understand your point about the difference between the 2D and 3D simulations. Once again, I am a beginner when it comes to gprMax and might not know some of the nitty gritties. What I understood was that the impulse response might not actually be going down to 0 and should be either zero padded or extrapolated, preferably the second option. And that it might be better to do this in 3D instead of 2D. What I don't get here (based on what I understood from your response) is that how were then you able to simulate the FMCW with 0.05 us duration? You only ran gprMax with time window of 0.05 us but the impulse response might actually be non-zero for longer.\n\nI am sorry if i sound confused and come across as not having done my homework but this is what I understand right now. I appreciate your help with this and if you can think of a way to simulate FMCW in a somewhat similar way that you did SFCW, please shoot suggestions my way. Thank you!\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 1, 2023, 8:02:39AM",
        "content": "Hi Khurram,\n\nThere is a big difference between 2D and 3D simulations apart from the obvious assumption of the invariance of the targets in one direction. This is often the easiest assumption to fulfil especially if you work with pipe like targets. The biggest assumption is that the fields are also 2D. Your source is not an theoretical hertzian dipole but an infinite long line source. The spreading loss is not in a volume but on a surface and 2D results will be of higher amplitudes than 3D. Again the usability of a model depends on what is intended to do and the limitations we have with computing resources. If you try to compare real A-scans with 2D simulations this will not be easy or meaningful for realistic situations (people have done some work on converting 2D results to 3D for amplitude variations but this is limited and breaks down when you move from homogenous backgrounds).\n\nThe difference with the time sampling of fields is minor but noticeable if you are trying to compare the two different ways of obtaining a response. Electric and magnetic fields in FDTD are staggered in time and they are 0.5 DT apart. A current source is specified 0.5 DT apart from the electric field that it produces. Hence if you convolve your source function sampled at the same time instance as the electric field there will be a small difference when compared with the actual gprMax result. This is OK but it is good to expect it and understand why you see it. \n\nThe big question is why you cannot sample for only 1us the FDTD and then convolve with a 50us forcing function. The answer to this is that it depends on what you are simulating. If you have captured the impulse response properly with the 1us simulation it can work although there will be some error if you compare the results obtained by running the simulation for 50us. The error can be acceptable and so what you do is OK. However, if you do not capture everything properly then the error will be more significant.You can actually test this by doing simple models with a gaussian source and an impulse source and then convolution and quantify the errors. \n\nThe paper creates a process to model the FMCW response in an equivalent way using a gaussian pulse that produces similar results but it does not reproduce the actual FMCW process as can be seen from a system perspective. At the end it all depends on what you need. \n\nMy advice is to try and quantify the errors by not creating an impulse response as long as the actual FMCW chirp. If these are acceptable for shorter impulses then you have a good process. If not, then you need to try and see if you can account for these in different ways than brute force modelling that is obviously unrealistic in the demands of computational resources. To quantify the errors and the differences you can test with much shorter functions than the actually FMCW chirp that needs millions of time-steps. \n\nBest\n\nAntonis\n"
      },
      {
        "author": "Khurram",
        "date": "Nov 1, 2023, 8:44:45AM",
        "content": "Thank you for all that information Antonis! I will have to spend some more time to really understand it. I also agree with your comment about the paper that they established equivalence and did not actually reproduce the FMCW process using gprMax.\n\nJust a couple of quick follow-up questions to help me work through your above response. When you say \"if you captured the impulse response properly\",  what does that mean exactly? How is properly defined in your / gprMax dictionary? Secondly when you say \"try and quantify the errors by not creating an impulse response as long as the actual FMCW chirp\", what am i comparing my output against? Should i compare it with let's say the response I get from gprMax when I use a Gaussian pulse? The two responses should be highly correlated with maybe some more ringing in the FMCW response. Is that what you meant?\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 1, 2023, 12:11:35PM",
        "content": "Hi Khurram,\n\nWhat I mean by \"captured properly\" is that the impulse response has sufficiently captured the phenomena that you are trying to model. If it is a resonant problem that might lead to a lot more iterations than a transient one. So, basically have a proper time window to capture the variation of the fields according to your problem. To see how truncating or resampling the impulse response and how well the convolution with a forcing function works in comparison with a \"standard gprMax model\" you can use a simple gaussian or other similar tests. The \"effects\" will be similar and you save time in understanding the limitations. \n\nHope this helps to clarify things.\n\nBest\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/N6OiyugKVoI",
    "title": "How to calculate the voltage through the output electromagnetic wave",
    "original_post": {
      "author": "C Master",
      "date": "Sep 30, 2020, 7:37:57AM",
      "content": "Hi\n\nI got the waveform I wanted through A scan. Now I want to calculate the voltage value corresponding to the electromagnetic wave intensity received by the receiver.\n\nI looked at the previous forums and the developer said U= -ed and described d, but I didn't quite understand what he meant.\n\nThis is my.in file, and the corresponding output waveform. My receiver is 0.18m above the transmitter, and dx, dy and dz are all 0.002m.\n\n1. So what is the value of d, and how can I get it?\n2. Which of the values of E should I choose, the crest or the trough?\n\nAnd any help would be appreciated!\n\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.2 0.2\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 5e-9\n\n#material: 6 0 1 0 half_space\n\n#voltage_source: y 0.12 0.1 0.18 50 my_wave\n#waveform: gaussian 1 10e8 my_wave\n#rx: 0.12 0.1 0.198\n\n#box: 0 0 0 0.240 0.1 0.18 half_space\n#box: 0 0 0.004 0.24 0.2  0.006 pec\n\n#geometry_view: 0 0 0 0.240 0.2 0.2 0.002 0.002 0.002 test_01_Ascan n"
    },
    "responses": [
      {
        "author": "Andres Altieri",
        "date": "Sep 30, 2020, 12:59:09PM",
        "content": "Hi,\n\nI am sure that Craig and Antonis will provide a better answer, but the voltage difference between to points is the line integral of the electric field along any path that joins this two points.\n\n\n\nIn this case the volume is discretized in Yee Cells, so, you discretize this integral moving through the Yee cells.  For example, imagine the cell at coordinate (is, js, ks). This coordinates are normalized, that is, they are the points in space normalized by the discretization (is, js, ks are natural numbers). You want to calculate the voltage diference between this coordinate and (is, js+1, ks), that is, moving one cell in the y direction (if Deltay is the discretization in the y direction this would be the voltage difference by moving Deltay in space. The following drawing shows how to do this:\n\n\n\nIn the cell (is, js, ks) you have the field Ey which lies on the vertex between (is, js, ks) and (is, js+1, ks). So the line integral becomes simply the product of the field Ey at coordinate (is, js, ks) and the spatial discretization Deltay.\n\nIf your voltage calculation is over a more complicated path, you should repeat this procedure over the whole path.\n\nBest regards,\nAndres"
      },
      {
        "author": "Andres Altieri",
        "date": "Sep 30, 2020, 1:01:21PM",
        "content": "When I said \"on the vertex\" I mean \"between the two vertices\"...."
      },
      {
        "author": "C Master",
        "date": "Oct 1, 2020, 8:54:00AM",
        "content": "Dear  Andres Altieri ,\n\nThank you very much for the explanation .\n\nI'm sorry I'm not very familiar with electromagnetic field and electromagnetic wave.\n\nIf the position of my receiver is A, and the cell position before the receiver is B, Δ V= VA-VB = - E Δ y,I can calculate Δ v, then what method can be used to calculate the voltage value of point A. Just like in my .in file, the transmitter is a 1V voltage source. I want to know the voltage value at this point of the receiver.\n\n\nThank you again for your help.\nC Master\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 1, 2020, 11:02:15AM",
        "content": "Hi \n\nThanks Andres for your very nice explanation of how to relate to a voltage via its definition from electromagnetic principles which is correct. In FDTD, as in all numerical methods, outputs are not continuous in space. The fields are known at specific locations and actually at these points are assumed constant. So, along a Yee cell edge the E field has a fixed value. There is no value at the nodes. However, if the fields vary smoothly then one can take averages to estimate such field values at nodes. The key here is the word \"smoothly\" which implies no discontinuities in media properties and not rapid variation of fields. \n\nSo, as Andres have shown, If you want to find an equivalent voltage from say an Ey component then Vy = - Ey * Dy. Similarly you can find other components as needed.\n\nIf you want to delve more into circuit analogies then you either need to be modelling the circuit paths correctly (this can be tricky but doable) or interfacing a circuit simulator with the FDTD solver (this has been done for FDTD but gprMax does not do it) \n\nIn essence this conversion in FDTD is just a scaling process and if you are trying to get experimental amplitudes to match with simulated ones there are many things that are not often included in the FDTD model that might affect the actual numbers. It can be done but you need to understand the theory and the way the linkage between field theory and simplified circuit concepts works.\n\nHope this helps\n\nAntonis\n"
      },
      {
        "author": "Andres Altieri",
        "date": "Oct 2, 2020, 11:51:16AM",
        "content": "Hi,\nThank you for your comment, Antonis!\n\nC Master, voltage is defined between to points.\n\nFor example, the voltage source that you define generates a voltage difference  of an edge of the Yee Cell where you placed it. If you generate a fine geometry view you will see this edge in the cell.\nAt the receiver position you will have an electric field in the Y direction by Delta Y you will get the voltage difference across the edge of the cell like in the drawing I posted in the previous post.\n\nIf you say \"I want the voltage at point B\" you should try to be more specific. If you imagine that you place a voltage sensor between the vertices of the Yee Cell, this sensor will measure the\nV = -Ey *  Delta Y\nthat is, this voltage will be simply the electric field at the point times the discretization. In this case, in most cases it would be the same to work with the field at the cell.\n\nIf you want the estimate the voltage B relative to another point in space, you should approximate the line integral of the previous post, by summing the field in every cell in the direction where you move and and multiplying by the discretization in that direction. I don't know how exact this would be.\n\nBest regards,\nAndrés\n\nPD: in your script both the source and receiver are inside the PML.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/k8E8zMt-UTc",
    "title": "Issues running mulitple GPU's in HPC environment",
    "original_post": {
      "author": "Matthijs van Delft",
      "date": "Mar 29, 2019, 10:11:54AM",
      "content": "Dear readers,\n\nI've been trying to run some simulations on a HCP environment with two GPU's. I get the following response:\n\nHost: ctit082 | Dell Inc. PowerEdge T630 | 2 x Intel(R) Xeon(R) CPU E5-2683 v4 @ 2.10GHz (32 cores, 64 cores with Hyper-Threading) | 252GiB RAM | Linux (4.4.0-138-generic, debian)\nGPU(s) detected: 0 - TITAN X (Pascal), 11.9GiB | 1 - TITAN X (Pascal), 11.9GiB\n=== MPI master (MPI_COMM_WORLD, rank: 0) on ctit082 spawning 2 workers... ======\n\n--------------------------------------------------------------------------\nThere are not enough slots available in the system to satisfy the 2 slots \nthat were requested by the application:\n  /home/s1855905/miniconda/envs/gprMax/bin/python\n\nEither request fewer slots for your application, or make more slots available\nfor use.\n--------------------------------------------------------------------------\n\nI reserved one CPU and two GPU's on the node, which should give me -mpi 3 -gpu right? This is how my batch file looks like:\n\n\n#!/bin/bash\n#\n#SBATCH --job-name=GprMax-simulation\n#SBATCH --ntasks=1\n#SBATCH --cpus-per-task=1\n#SBATCH --ntasks-per-node=1\n#SBATCH --time=0:00:00\n#SBATCH --partition=gpu_titan-x\n#SBATCH --gres=gpu:2\n#\n\n### Run gprMax with input file\ncd $HOME/simulation\nsrun python -m gprMax ./input/test_setup.in -n 96 -mpi 3 -gpu\n\nIs there somebody that could help me out a little bit with this issue? \nThanks in advance! Kind regards,\n\nMatthijs"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 29, 2019, 10:54:38AM",
        "content": "Hi Matthijs,\n\nI have seen this error message on different servers/HPCs. It is a MPI error and usually relates to how MPI is configured on your system. Unfortunately, I don't have a solution for you as I am never the one who is able to change configuration settings! I do have a couple of suggestions you might try:\n\n1. Do you get the same error message when using CPUs only?\n2. Try setting the number of threads for the 1 CPU task that is used by setting the OpenMP environment variable in your batch script: export OMP_NUM_THREADS=1\n3. Try using our alternate MPI implementation that does not require MPI spawn - http://docs.gprmax.com/en/latest/openmp_mpi.html#openmp-mpi-example-no-spawn\n\nLet me know how it goes.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 29, 2019, 11:13:40AM",
        "content": "I should also add that I recently updated the way GPU device are specified when multiple GPUs are used. You now must specify a list of device IDs with the GPU argument, e.g. in your case '-gpu 0 1'.\n\nIt is now reflected in the docs - http://docs.gprmax.com/en/latest/gpu.html#combining-mpi-and-gpu-usage\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Matthijs van Delft",
        "date": "Mar 30, 2019, 4:54:18AM",
        "content": "Hi Craig,\n\nThanks for the quick response. I've tried your feedback and added the GPUs in the list but it doesn't seem to work.\nI've run it on multiple CPU's with MPI before so I guess it should work.\nI think it has to do with the fact that -mpi 3 argument requires multiple numbers of tasks or cpu's per task to match the number of slots.\nWhenever I try this through, the program starts running multiple times but doesn't give this error, but I only want to run it once with multiple GPU's.\nFor now, I will run it on one GPU.\n\nKind regards,\n\nMatthijs"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 1, 2019, 4:11:29AM",
        "content": "Hi Matthijs,\n\nI'm not sure if you are understanding correctly, or I may have misinterpreted what you said......but with MPI you will run multiple copies of gprMax, the -mpi arguments specifies how many copies (or tasks) to run. MPI in this case is being used as a task farm to distribute tasks amongst CPUs or GPUs, where each task is a separate model. So -mpi 3 will run 3 copies of gprMax, one will be the 'master' and will not run any models but will manage operations; the other two tasks will run models (the 'workers') on either CPU threads or GPUs (if the -gpu argument is given with a list of 2 GPU IDs). So the -mpi argument in your case should specify the number of GPUs you have available plus 1 for the master. Did you try the alternate MPI implementation with GPU? e.g\n\nmpirun -n 3 python -m gprMax testsetup.in -n 96 --mpi-no-spawn -gpu 0 1\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_kkq8PI5O7A",
    "title": "Lightweight GPR recommendations?",
    "original_post": {
      "author": "Stephen Mattison",
      "date": "Feb 19, 2021, 11:29:30AM",
      "content": "I am attempting to mount a GPR on the bottom of an industrial drone. I'm wondering if anybody has recommendations for hardware that would be light enough for this purpose? Max payload is ~15 lbs."
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Feb 22, 2021, 1:12:16AM",
        "content": "d\non't know if i is allowed to have a discussion about not-gprMax.\n\nbut as far as I have heard the most lightweight GPR-Control unit the Zond-12e. It is old and slow. but lightweitgt and energy-saving\n\nI guess you'll need an airlaunched antenna. As far as I know the subecho-units of radarteam (www.radarteam.se) are lightweightbut unfortunatelly they are not capable of good dataquality (I'm talking about utility mapping).\n\nhave much success with your intention, let me know if you'll get managed to get 350-500 MHz meassurements aircoupled or on really low heights (< 30cm) at good quality.\n\n\ncheers, Micha\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/S_fw4N6zxI4",
    "title": "about how to remove dc wave",
    "original_post": {
      "author": "yang kun",
      "date": "Jul 10, 2020, 9:46:27PM",
      "content": "I am trying to use the Ascan data with targets minus the Ascan data without targets to achieve the gain of the echo signal, but I do not know how to implement it in detail. I am a rookie in GPRMAX, so I hope you can give me some guidance. It would be better to give me a program example so that I can understand it more easily.thanks!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 13, 2020, 8:56:30AM",
        "content": "Dear Yang Kun,\n\nRun one simulation that includes your targets and one without them, then subtract the responses to leave only the scattered field from the targets.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/REB9IbkjesM",
    "title": "Field asymmetry in inhomogeneous object",
    "original_post": {
      "author": "Brendon",
      "date": "Mar 15, 2021, 6:47:36PM",
      "content": "Hi everyone,\n\nI am using field snapshots within an inhomogeneous 2D object in a reconstruction algorithm.  However, I have noticed that the fields are not symmetric (>5% difference in places) around the transmitter even though the object is symmetric. If I use a homogeneous object (er = 2) of the same size the fields are very symmetric (<0.1% difference everywhere). \n\nI've attached the the .vti geometry of the inhomogeneous object and a .vti snapshot for the Tx located to the right of the object.\n\nAm I missing something in my setup? Is my discretization off? Is this just the normal accuracy to be expected with inhomogeneous objects in FDTD?\n\nAny suggestions or comments would be appreciated.\n\nBrendon"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 17, 2021, 9:54:22AM",
        "content": "Hi Brendon,\n\nCan you post the input file you are using to generate this? Or a simplified version that shows the same behaviour.\n\nThanks,\n\nCraig\n\n"
      },
      {
        "author": "Brendon",
        "date": "Mar 17, 2021, 5:39:07PM",
        "content": "Hi Craig,\n\nI generate the simulation using a script but attached are the input files (.in, .txt, and .h5) for a simpler model. I've included an updated snapshot and output geometry.\n\nI have also attached the comparable homogeneous geometry and a snapshot so you can see what the difference in symmetry around the transmitter looks like.\n\nThank you,\nBrendon"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 18, 2021, 7:25:03AM",
        "content": "Hi Brendan,\n\nI'm not sure I fully understand your question, but let me try to respond with a few points:\n\n1. I think you are looking for symmetry in the fields about the y-axis which passes through the y-coordinate (0.4m) of the Hertzian dipole (actually a line source in 2D).\n2. Your model discretisation for the inhomogeneous target is on the edge in terms of potential numerical dispersion. To rule out any effect, I'd recommend you use a smaller spatial step.\n3. The the Hertzian dipole (or line source in 2D) source model is less accurate (in terms of performance compared to the analytical solution) when you are within 10 cells of its location (see attached comparisons as evidence). \n4. I'm not sure you can really confirm any asymmetry in field values through looking at the snapshots. I would place receivers either side of the line of symmetry and compare their outputs - perhaps this is something you have already done.\n5. I can't think of any reason why there should be any asymmetry in field values for the same model with homogeneous and inhomogeneous (but symmetric) targets.\n\nHope these thoughts help.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Brendon",
        "date": "Mar 29, 2021, 1:08:13PM",
        "content": "Hi Craig,\n\nThank you for your thoughts.\n\nI am interested in the symmetry about the x-axis at y = 0.4 m (i.e. axis from the transmitter on the right to receiver on the left). You can see this asymmetry by comparing any point the top half of the attached snapshots with the corresponding point in the bottom half. I've attached snapshots of the full simulation domain to provide better context.\n\nIf I increase the discretization by 5, it improves the asymmetry but it is still orders of magnitude larger than with the homogeneous target.\n\nIf I place the target further away from the transmitter similar errors persist.\n\nThere is similar asymmetry when I look at the receiver fields.\n\nThank you,\nBrendon\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 1, 2021, 3:52:43PM",
        "content": "Brendon,\n\nJust a quick reply to say I have not forgotten this question, but not had time to look further into it yet.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/acFclz3LPbY",
    "title": "Bscan merge error",
    "original_post": {
      "author": "Nicola G",
      "date": "May 1, 2018, 3:16:50PM",
      "content": "Good evening,\n\nI am trying to run the cylinder Bscan test file but I keep coming across an error when I try and merge the outputs:\n\nI start by running: python -m gprMax user_models/cylinder_Bscan_2D.in -n 62\n\nthen I use: python -m tools.outputfiles_merge user_models/cylinder_Bscan_2D\n\n(gprMax) Nicolas-MacBook-Air:gprMax nicola$ python -m tools.outputfiles_merge user_models/cylinder_Bscan_2D\nTraceback (most recent call last):\n  File \"/Users/nicola/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/Users/nicola/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/Users/nicola/gprMax/tools/outputfiles_merge.py\", line 127, in <module>\n    merge_files(args.basefilename, removefiles=args.remove_files)\n  File \"/Users/nicola/gprMax/tools/outputfiles_merge.py\", line 85, in merge_files\n    fin = h5py.File(basefilename + str(model + 1) + '.out', 'r')\n  File \"/Users/nicola/miniconda3/envs/gprMax/lib/python3.6/site-packages/h5py/_hl/files.py\", line 269, in __init__\n    fid = make_fid(name, mode, userblock_size, fapl, swmr=swmr)\n  File \"/Users/nicola/miniconda3/envs/gprMax/lib/python3.6/site-packages/h5py/_hl/files.py\", line 99, in make_fid\n    fid = h5f.open(name, flags, fapl=fapl)\n  File \"h5py/_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py/_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"h5py/h5f.pyx\", line 78, in h5py.h5f.open\nOSError: Unable to open file (unable to open file: name = 'user_models/cylinder_Bscan_2D63.out', errno = 2, error message = 'No such file or directory', flags = 0, o_flags = 0)\n\nI read in another post that the merge command had the number of iterations added to the end of the merge line as below:\npython -m tools.outputfiles_merge user_models/cylinder_Bscan_2D 62\n\nHowever when I try that I get the following:\nusage: cd gprMax; python -m tools.outputfiles_merge basefilename\noutputfiles_merge.py: error: unrecognized arguments: 62\n\nI am very new to python but I feel like it isn't terminating when it gets to output file 62 and is looking for a file 63 which doesn't exist.\n\nI haven't changed any of the codes I was just trying them out to see what I they did before starting to alter anything.\n\nI am sure it is something simple, any help anyone can give would be greatly appreciated.\n\nThanks,\n\nNicola"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 1, 2018, 6:34:21PM",
        "content": "Hi Nicola,\n\nWelcome to the forum!\n\nCheck that in the directory you are merging there are no other models with the same \"base name\" as their output filename. It looks that the Python script finds out how many files have the given base name and then tries to merge them in sequence. It seems that it thinks there are more than 62 which is the number you have generated. \n\nBest\n\nAntonis"
      },
      {
        "author": "Nicola G",
        "date": "May 2, 2018, 4:45:55AM",
        "content": "Hi Antonis,\n\nThanks for your response, there were no other files with that base name in the folder but I moved the 62 created files to a new folder and referenced that and it seems to have worked.\n\nThe issue I seem to have now is that my response looks different to the one shown in the example at http://docs.gprmax.com/en/latest/examples_simple_2D.html\n\nI have added a screenshot of the result I generated on the right vs the example on the left."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 2, 2018, 5:29:12AM",
        "content": "Are you plotting the correct component? Have you changed the example? \n\nAntonis"
      },
      {
        "author": "Nicola G",
        "date": "May 2, 2018, 5:51:28AM",
        "content": "I haven't changed the files in anyway and I am using the Ez component as per the example..."
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2018, 9:23:05AM",
        "content": "Hi Nicola,\n\nThat is odd, I have just tested the example and it works as expected on my machine. Can you tell us what machine and operating system you are using, as well the version of gprMax. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Nicola G",
        "date": "May 2, 2018, 10:15:18AM",
        "content": "Hi Craig,\n\nYeah I though it was odd as well, I am on a MacBook Air running ios 10.13.4 High Sierra, I have installed Miniconda running python 3.6 and gcc -- without-multilib.\n\nI am also running the latest version of gprMax and have confirmed by trying to conduct an update.\n\nRegards,\n\nNicola"
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2018, 10:18:06AM",
        "content": "Can you confirm that the single A-scan example model (http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder) gives the correct result?\n\nCraig"
      },
      {
        "author": "Nicola G",
        "date": "May 2, 2018, 10:55:08AM",
        "content": "I get the same figure however it is missing the current outputs, I have attached a screenshot.\n\nNicola"
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2018, 11:18:47AM",
        "content": "That looks OK. So indicates gprMax is probably running fine on your system. So the issue probably lies with the merging of the multiple A-scans to build the B-scan, or a plotting problem. Can you plot the attached output file using:\n\npython -m tools.plot_Bscan user_models/cylinder_Bscan_2D_merged.out Ez\n\nand post the results.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Nicola G",
        "date": "May 2, 2018, 11:24:03AM",
        "content": "I get exactly the same strange response as I was getting earlier for the merged.out file I created.\n\nNicola"
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2018, 11:27:21AM",
        "content": "Something is up with your plotting environment. Can you run the following command and attach the generated file:\n\nconda list > myenv.txt\n\nCraig"
      },
      {
        "author": "Nicola G",
        "date": "May 2, 2018, 11:30:46AM",
        "content": "File attached.\n\nThanks for all your help.\n\nNicola"
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2018, 11:56:25AM",
        "content": "Hi Nicola,\n\nThere is a problem with a package that gprMax depends (indirectly) upon called `mkl`. It seems when versions of `mkl` newer than 2018.0.0 are used, it causes the issues you are seeing with the B-scan plotting (reported - https://github.com/gprMax/gprMax/issues/157). I've fixed this temporarily by pinning the version of `mkl` to 2018.0.0. So if you deactivate your conda environment, update gprMax, then update your conda environment you should be able to plot the B-scan correctly:\n\nsource deactivate\ngit pull\nconda env update -f conda_env.yml\nsource activate gprMax\npython -m tools.plot_Bscan user_models/cylinder_Bscan_2D_merged.out Ez\n\n\nLet me know that this works.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Nicola G",
        "date": "May 2, 2018, 1:04:48PM",
        "content": "Hi Craig,\n\nIt now works perfectly! \n\nThanks again for all your help. \n\nNicola"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iOmj0eu_jPM",
    "title": "Frequency range of a waveform",
    "original_post": {
      "author": "alpergenc",
      "date": "Jun 8, 2018, 8:34:31AM",
      "content": "Hello,\n\nMy question is about the \"waveform\" command of GPRmax. By this command, I can specify type of the waveform, scaling of the maximum amplitude of the waveform and centre frequency of the waveform. However, I wonder about the frequency range of my signal. For example, if I write a command like: \"#waveform ricker 1 1.5e9 my_ricker\", then the centre frequency of my waveform is 1.5 GHz. But, what is the max. and min. frequency in my waveform? I mean, how can I determine the frequency range?\n\nRegards,\nAlper"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 8, 2018, 9:21:39AM",
        "content": "Hi Alper,\n\nThe answer is in the manual \n\nhttp://docs.gprmax.com/en/latest/plotting.html\n\nIf you look to the utility that plots the waveform you can use a flag to plot the frequency spectrum. Obviously, you can generate the waveforms in MATLAB or Python and do your own frequency analysis that is a trivial task.\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vga2g99k4R8",
    "title": "Question for Snapshot",
    "original_post": {
      "author": "Siyuan CHEN",
      "date": "Apr 20, 2020, 5:57:41AM",
      "content": "To get the images of snapshot, we can get many files of form .vti, and we can see thess images in the paraview. \n\nBut I want to use the data in every files of vti in matlab, so how can I read the files of vti or if we can export the data in every file of snaoshot ?\n\nBest wishes."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 20, 2020, 11:01:33AM",
        "content": "Dear Siyuan,\n\nWelcome to the forum! The snapshot facility was designed to enable wave propagation to be visualised. As you say the snapshot files use the Visualisation Toolkit (VTK) .vti format, which can be viewed in Paraview. I recommend looking at the ability to save and export data from Paraview into other formats, e.g. you could save as a CSV and import elsewhere. Another (more involved) option is to contribute another file writer to the snapshot module.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MNadL1IdKxY",
    "title": "Input admittance and impedance (resistance and reactance) and s11 and s21 parameters values of the GSSI antenna",
    "original_post": {
      "author": "Carlos Díaz",
      "date": "Sep 22, 2017, 4:04:38PM",
      "content": "Hello,\n\nI was lookig for Input admittance and impedance (resistance and reactance) and s11 and s21 parameters values of the GSSI antenna but I did not find it, I read the documentation and Warren Thesis (Warren2009 - Numerical modelling of high-frequency ground-penetrating radar antennas) but do not appear these parameters for GSSI antenna.\n\nI plot those parameters (Attached Images) but I would like to know if these results are correct. \n\nThanks for your helping.\n\nCarlos Díaz\nBogotá, Colombia"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 27, 2017, 6:45:12AM",
        "content": "Hi Carlos,\n\nWe haven't studied these specifically for the GSSI 1.5GHz antenna model, most of our work has focussed on looking at the response from the receiver. Having said that you will find the resistive and reactive parts of the self-impedance of the GSSI 1.5GHz antenna model in my thesis (http://hdl.handle.net/1842/4074, page 106), which help you.\n\nDid you use a transmission line on the receiver to calculate the s21?\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/H4J9ZM8_sys",
    "title": "How to add more EM properties into gprMax material properties?",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Dec 21, 2018, 12:53:38PM",
      "content": "In gprMax，the EM properties of the materials have permittivity, conductivity, magnetic permeability, and magnetic loss. I would wonder how to include image parts of the dielectric permeability and the magnetic permeability into the material EM properties?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 2, 2019, 3:58:32AM",
        "content": "Hi Feng,\nAre you referring to the imaginary part of the permittivity or permeability? You can use the Debye model to simulate frequency dependent permittivity and conductivity loss - http://docs.gprmax.com/en/latest/input.html#add-dispersion-debye\nKind regards,\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2cDnh3o5W_Y",
    "title": "Fractal Box and roughness",
    "original_post": {
      "author": "Leonardo C",
      "date": "Jan 9, 2017, 3:29:24AM",
      "content": "First I would like to congratulate the authors of gprmax for the excellent job!\n\nI have a question regarding fractal_box command.\n\nIf I insert the following commands:\n\n#fractal_box: 0 0 0 240 80 0.5 1.5 1.5 1.5 1.5 1 material_half_space my_fractal_box \n\n#add_surface_roughness: 0 80 0 240 80 0.5 2 2 2 80 180 my_fractal_box\n\nIs it possible to keep the same statistics of the surface for each position of Rx and Tx throughout the simulation? In other words, when I run a simulation to produce a B-scan, for each position of the sensors the code will produce \"a new surface\". How can I keep the same random generated one for each step of the simulation?\n\nCheers\nLeonardo Carrer"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 9, 2017, 5:55:59AM",
        "content": "Hi Leonardo,\n\nWelcome to the forum!\n\nYou can get the same set of random numbers by using the same seed for the random number generator for each Tx/Rx position. You do this by specifying an optional integer parameter for the #fractal_box command (http://docs.gprmax.com/en/latest/input.html#fractal-box) - 'i2' in the User Guide; or the #add_surface_roughness command (http://docs.gprmax.com/en/latest/input.html#add-surface-roughness) - 'i1' in the User Guide.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Leonardo C",
        "date": "Jan 9, 2017, 6:00:58AM",
        "content": "Thanks very much!\n\nCheers\nLeonardo"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/l2n7DPqs-6Q",
    "title": "Converting output (HDF5) in larger size to common GPR formats.",
    "original_post": {
      "author": "Beth",
      "date": "Jul 19, 2018, 4:47:09AM",
      "content": "Dear all,\n\nI have tried to convert outputs into DZT files and they worked successfully using the outputfile_converter_m. Hoverever, when I converted the output files with file size of 49.8MB, MATLAB gave me a warning saying that \"The file size exceeds the limit allowed and canot be saved\"\n\nIs there a llimit on the file size? If yes, what can I do with output files larger than the limit?\n\nBest Regards,\nBeth"
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Jul 19, 2018, 11:54:20AM",
        "content": "Hi Beth,\n\nAs far as I know the file size shouldnt be a problem. I have just tested a file that it is 67.2 MB and I didnt experience any problems.\n\nCan you attach the file you experiencing problems with? Also, please copy paste the error message, because I suspect that this is a matlab version (mine is 2017b) problem once more. :)\n\nKind regards,\nDimitris"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jBpIhMAo5Ww",
    "title": "Why is the electric field intensity in 2D and 3D detection results so different? Why does the electric field intensity of 2D detection not decay",
    "original_post": {
      "author": "C Master",
      "date": "Sep 11, 2020, 3:48:40AM",
      "content": "Hello, I would like to ask why the electric field intensity in 2D scanning results is so large, why it does not decay.\nI used the same media properties and targets to detect in 2D and 3D. A 50V voltage source is used.\nIn 2D scanning results, the electric field intensity is very large, which can reach hundreds of V / m, and the reflection intensity of the target I need to detect can also reach dozens of V / m. Why is the electric field so high that there is no attenuation after passing through the medium. The electric field intensity obtained with 3D scanning is very small."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 9, 2020, 7:26:51AM",
        "content": "The geometric spreading is different between 2D and 3D which affects the attenuation.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/STYrK_J45Ew",
    "title": "No change in A_scans for clay vs sand",
    "original_post": {
      "author": "Somaria Sammy",
      "date": "Jan 21, 2017, 10:14:19PM",
      "content": "Hello,\n\nI am attempting to model a cross-hole survey with stratified layers of clay and sand between the boreholes.\n\nI set up the geometry for the two boreholes: A tall rectangle for the domain and a smaller rectangular box inside of it with gaps on the sides and top.\nThe gaps on the sides represent the boreholes and the gap on top represents the air. I positioned the transmit antenna on one side of the box and the receive antenna on the other side of the box to represent the antennas down the boreholes. To keep the test run simple I started with the box being all one homogeneous medium.\n\nI ran the model with sand as the medium and then with clay as the medium (situations A and B in the diagram).\nI ran the model 3 times: 1) sand medium and the antennas at the bottom of the boreholes, 2) sand medium and the antennas halfway down the boreholes, 3) clay medium with the antennas halfway down the boreholes.\n\nI was expecting that the two A_scan outputs would be different for the sand and clay halfway down the borehole but they appear to be identical.\nI am not sure what I am doing wrong.\n\nHere are the models for the antennas halfway down the boreholes.\n\nSAND:\n#title: A-scan test\n#domain: 30 130 0.200\n#dx_dy_dz: 0.200 0.200 0.200\n#time_window: 3e-6\n\n#material: 3 0.1 1 0 half_space\n\n#waveform: ricker 1 1.2e8 my_ricker\n#hertzian_dipole: z 5.000 60 0 my_ricker\n#rx: 23.288 60 0\n\n#box: 5 0 0 23.288 121.920 0.200 half_space\n\ncylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 30 130 0.200 0.200 0.200 0.200 Ascan_test7 n\n\n\nCLAY:\n#title: A-scan test\n#domain: 30 130 0.200\n#dx_dy_dz: 0.200 0.200 0.200\n#time_window: 3e-6\n\n#material: 25 0.1 1 0 half_space\n\n#waveform: ricker 1 1.2e8 my_ricker\n#hertzian_dipole: z 5.000 60.000 0 my_ricker\n#rx: 23.288 60.000 0\n\n#box: 5 0 0 23.288 121.920 0.200 half_space\n\ncylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 30 130 0.200 0.200 0.200 0.200 Ascan_test8 n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 22, 2017, 1:31:32PM",
        "content": "Hi Somaria,\n\nFrom looking at your input files, your simulations will suffer from numerical dispersion, despite the fact that the numerical analysis warning (which is supposed to help users spot this) did not flag it up. I'll look into this.\n\nTo mitigate numerical dispersion, you should aim to resolve the wavelength of the highest frequency of interest in your model by ~10 cells - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretisation\n\nYou can do a check using one of the Python notebooks  - https://github.com/gprMax/gprMax/blob/master/tools/Jupyter%20notebooks/example_Ascan_2D.ipynb\n\nAs quick check:\n\n- With a centre frequency of 120MHz, lets be conservative and say the highest frequency is 4x120MHz=480MHz. You can check this by plotting the FFT of the pulse.\n- The smallest wavelength will occur in the highest permittivity, which is the clay (Er=25), so if v = c/sqrt(25) = 6e7m/s, lambda = v/f = 6e7/480e6 = 0.125m\n- To resolve this wavelength with 10 cells you need a spatial discretisation of 0.0125m, i.e. ~1.25cm\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/u06BuntOqS0",
    "title": "400MHz bscan error",
    "original_post": {
      "author": "Haoyuan Cheng",
      "date": "Mar 6, 2022, 9:59:40PM",
      "content": "when i run the 400mhz antenna model,there is always a problem with the bscan image.i can't solve it even if i change the size of the model.i dont know what went wrong\nin file:\n\n#material: 5 0.005 1.0 0.0 ac\n#material: 9.0 0 1.0 0.0  SB\n#material: 1.0 0 1.0 0.0 air\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 soil\n\n#domain: 1.2 1 0.8\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 20e-9\n\n#fractal_box: 0.000 0.000 0.000 1.2 1 0.3 2.5 1 1 1 50  soil my_fractal_box\n#add_surface_roughness: 0.000 0.000 0.3 1.2 1 0.3 1.000 1.000 1.000 0.25 0.35 my_fractal_box\n#box: 0.000 0.000 0.3 1.2 1 0.48 SB\n#box: 0.55 0.42 0.27 0.70 0.57 0.3 air\n#box: 0.000 0.000 0.48 1.2 1 0.58 ac\n\n#pml_cells: 20 20 20 20 20 20\n\n#python:\nfrom user_libs.antennas.GSSI import antenna_like_GSSI_400\nantenna_like_GSSI_400(0.2+ current_model_run * 0.01 , 0.5, 0.58, 0.002)\n#end_python:\n\n#geometry_view: 0.000 0.000 0.000 1.2 1 0.8 0.002 0.002 0.002 dongtuTK n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 7, 2022, 7:02:13AM",
        "content": "There is nothing wrong with the antenna model. The problem is that you are using a different fractal soil distribution and different fractal rough surface with every A-scan in your B-scan. Please read the docs for the fractal box (http://docs.gprmax.com/en/latest/input.html#fractal-box) and rough surface (http://docs.gprmax.com/en/latest/input.html#add-surface-roughness) commands with particular reference to the seeding of the random number generator. By setting this parameter you ensure you get the same (but randomly generated) distribution for all A-scans in your B-scan.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Haoyuan Cheng",
        "date": "Mar 8, 2022, 9:39:59PM",
        "content": "Thank you very much for your reply and advice in your busy schedule!I'll try to solve this problem.\n\nKind regards,\nHaoyuan\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2TQglTbHq5U",
    "title": "Time zero correction and other data processing",
    "original_post": {
      "author": "AISWARYA K P",
      "date": "Mar 17, 2025, 8:51:52PM",
      "content": "Hello everyone,\nI have a question regarding gprMax simulated GPR data. Is time-zero correction and other data processing steps essential for accurate analysis? If so, could you share insights on what specific processing steps are necessary and how they can be effectively implemented?\nAny advice, resources, or examples would be greatly appreciated. Thanks in advance for your help!\nRegards\nAiswarya"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2025, 11:58:23AM",
        "content": "Processing your simulated data should most likely be done using a similar workflow as you would for real/measured GPR data. There are lots of the different software and tools available to do that. Our current preferred option is Geolitix (https://www.geolitix.com/) which is cloud-based, intuitive, and can create some powerful visualisations. Geolitix has all the standard processing filters you'd expect, e.g. time zero correction, gain profiles, frequency filters, background removal etc.... It can also load B-scans from gprMax.\n\nCraig\n\n"
      },
      {
        "author": "AISWARYA K P",
        "date": "Mar 20, 2025, 1:33:22AM",
        "content": "Thank you for the reply.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Wwpi8Ok_L2M",
    "title": "Error running simulation with two GPU's",
    "original_post": {
      "author": "Luis Eduardo Quibano Alarcon",
      "date": "Apr 4, 2018, 10:41:23PM",
      "content": "Hello everybody,  i'm having some troubles working with two Tesla k80 GPU's\n\ni want to run two models at the same time, when i start my first model i get this from GPU tasks\n\ngprmaxtest@instance-1:~/gprMax$ nvidia-smi\nThu Apr  5 02:21:39 2018       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 384.111                Driver Version: 384.111                   |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Tesla K80           On   | 00000000:00:04.0 Off |                    0 |\n| N/A   47C    P0   142W / 149W |   5985MiB / 11439MiB |    100%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  Tesla K80           On   | 00000000:00:05.0 Off |                    0 |\n| N/A   28C    P8    27W / 149W |     11MiB / 11439MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0     20754      C   python                                      5974MiB |\n+-----------------------------------------------------------------------------+\n\n\nwhen i start to simulate my second model i get this error from gprmax\n\n\nand the GPU tasks shows\n\ngprmaxtest@instance-1:~/gprMax$ nvidia-smi\nThu Apr  5 02:21:43 2018       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 384.111                Driver Version: 384.111                   |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Tesla K80           On   | 00000000:00:04.0 Off |                    0 |\n| N/A   47C    P0   143W / 149W |  10666MiB / 11439MiB |    100%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  Tesla K80           On   | 00000000:00:05.0 Off |                    0 |\n| N/A   28C    P8    28W / 149W |     11MiB / 11439MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0     20754      C   python                                      5974MiB |\n|    0     21199      C   python                                      4679MiB |\n+-----------------------------------------------------------------------------+\n\n\n I see that my two simulations are running with my first GPU\n\nwhen y try to run the command  python -m gprMax   ....... model.in -n 10 -mpi 3 -gpu ,  gprMax shows this message\n\n\n=== Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method ================================\n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.3 (Big Smoke)\n\n Copyright (C) 2015-2018: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as\n  published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with gprMax.  If not, see www.gnu.org/licenses.\n\nHost: instance-1 | Google Google Compute Engine | 1 x Intel(R) Xeon(R) CPU @ 2.30GHz (2 cores, 4 cores with Hyper-Threading) | 14.7GiB RAM | Linux (4.4.0-116-generic, debian)\nGPU(s) detected: 0 - Tesla K80, 11.2GiB | 1 - Tesla K80, 11.2GiB\nTraceback (most recent call last):\n  File \"/home/gprmaxtest/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/gprmaxtest/miniconda3/envs/gprMax/lib/python3.6/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/gprmaxtest/gprMax/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/home/gprmaxtest/gprMax/gprMax/gprMax.py\", line 70, in main\n    run_main(args)\n  File \"/home/gprmaxtest/gprMax/gprMax/gprMax.py\", line 193, in run_main\n    run_mpi_sim(args, inputfile, usernamespace)\n  File \"/home/gprmaxtest/gprMax/gprMax/gprMax.py\", line 380, in run_mpi_sim\n    if args.mpicomm:\nAttributeError: 'Namespace' object has no attribute 'mpicomm'\n\n\n\nI dont know if i could choose which GPU can run the simulation.\n\nThank You All"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 5, 2018, 5:03:26AM",
        "content": "Hi Luis,\n\nYou have multiple GPUs, thats great! However, to run gprMax models on multiple GPUs in parallel you must use MPI. The MPI acts as a task farm to deliver the correct model to the different GPUs. If you don't use MPI there is a chance that more than one model will try to access the same GPU. This will likely cause an out of resources (memory) error from the pycuda package, which is what you are seeing. There was a small bug with the MPI code, introduced when I recently overhauled it for another project. I have now fixed this, so if you update your copy of gprMax.\n\npython -m gprMax model.in -n 10 -mpi 3 -gpu\n\nThis should now run your 10 models using your 2 GPUs.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Luis Eduardo Quibano Alarcon",
        "date": "Apr 12, 2018, 11:37:52AM",
        "content": "Hello dr Craig, thank you so much!.\nThat resolved the issue.\nBest Regards."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EfUJxjFHqPc",
    "title": "Reading output dataset",
    "original_post": {
      "author": "Siqi Wang",
      "date": "Nov 1, 2017, 11:10:03PM",
      "content": "Hi there,\n\nI contacted Craig earlier and I still have some problems in reading the data from a '.out' file. For example, after running the simulation I'll have a file named 'pavement_Bscan_2D_merged.out', and I put into Matlab. I can see the basic structure of the '.out' file like the following:\n\nh5disp('pavement_Bscan_2D_merged.out')\nHDF5 pavement_Bscan_2D_merged.out \nGroup '/' \n    Attributes:\n        'Title':  'B-scan from a dielectric asphalt'\n        'gprMax':  '3.1.1'\n        'Iterations':  637\n        'dt':  0.000000\n        'nrx':  1\n    Group '/rxs' \n        Group '/rxs/rx1' \n            Dataset 'Ex' \n                Size:  60x637\n                MaxSize:  60x637\n                Datatype:   H5T_IEEE_F32LE (single)\n                ChunkSize:  []\n                Filters:  none\n                FillValue:  0.000000\n            Dataset 'Ey' \n                Size:  60x637\n                MaxSize:  60x637\n                Datatype:   H5T_IEEE_F32LE (single)\n                ChunkSize:  []\n                Filters:  none\n                FillValue:  0.000000\n            Dataset 'Ez' \n                Size:  60x637\n                MaxSize:  60x637\n                Datatype:   H5T_IEEE_F32LE (single)\n                ChunkSize:  []\n                Filters:  none\n                FillValue:  0.000000\n            Dataset 'Hx' \n                Size:  60x637\n                MaxSize:  60x637\n                Datatype:   H5T_IEEE_F32LE (single)\n                ChunkSize:  []\n                Filters:  none\n                FillValue:  0.000000\n            Dataset 'Hy' \n                Size:  60x637\n                MaxSize:  60x637\n                Datatype:   H5T_IEEE_F32LE (single)\n                ChunkSize:  []\n                Filters:  none\n                FillValue:  0.000000\n            Dataset 'Hz' \n                Size:  60x637\n                MaxSize:  60x637\n                Datatype:   H5T_IEEE_F32LE (single)\n                ChunkSize:  []\n                Filters:  none\n                FillValue:  0.000000\n>> \n\nNow I need to get the data from Dataset'Ez' to do further calculations. I tried the 'h5read' function in Matlab but it didn't work. So can anyone tell me how to fix this?\n\nThank you for your time.\n\nSiqi"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 2, 2017, 9:14:55AM",
        "content": "Look at the MATLAB script examples in the 'tools/MATLAB scripts' directory. They provide code to load specific fields.\n\nCraig"
      },
      {
        "author": "Siqi Wang",
        "date": "Nov 2, 2017, 1:18:33PM",
        "content": "It works. Thanks for the reply.\n\nSiqi"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1oWdt3ausNE",
    "title": "Bus error (core dumped)",
    "original_post": {
      "author": "Tamara Gerber",
      "date": "Mar 17, 2020, 10:17:24AM",
      "content": "Hi,\n\nI keep on getting the following error after my scripts have been running for a while:\n\nBus error (core dumped)\n\nDoes anyone here experience something similar with gprMax?\n\nKind regards and thanks for helping,\n\nTamara"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 17, 2020, 1:25:54PM",
        "content": "Hi Tamara,\n\nCan you provide a screenshot showing the traceback please.\n\nThanks,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/E4qQc39UEfM",
    "title": "Hello",
    "original_post": {
      "author": "savita K.B",
      "date": "Jun 22, 2021, 12:42:19PM",
      "content": "Please find the attached document.In this object is not clearly visible is not clear.anyone help me what to change in the code.\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n\n#python:\n\nfrom random import random as rd\n\nr=0.005+0.015*rd()\n\nprint(\"#cylinder: 0.120 0.080 0 0.120 0.080 0.002 {} pec \\n\".format(r))             \n\n\n\n#end_python:\n\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 1, 2021, 3:14:26PM",
        "content": "You need to look at how you seed the random number generator you are using (https://docs.python.org/3/library/random.html#random.seed). For each A-scan in your B-scan you need the same random sample to be used.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VD4YrdjpOLo",
    "title": "Query Regarding the GSSI like antenna",
    "original_post": {
      "author": "Soumyakanti Maiti",
      "date": "Jun 30, 2017, 1:15:24PM",
      "content": "Hi,\n\n I have a query regarding the GSSI antenna, built in with the gprMax resources. Can we use it for a frequency other than 1.5 GHz? If yes, how to specify the frequency of operation.\n\nThanking you.\nRegards,\nSoumyakanti Maiti"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 3, 2017, 3:43:49AM",
        "content": "Hi \n\nThis is a model following the design of the GSSI 1500 in an attempt to model it. The pulse is optimised to do this. If you run this antenna model with a different pulse the performance will be different and possibly not optimum. I would not recommend change anything in this model unless you are very familiar with antennas and you really understand the concepts involved.\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hLUnJHepdxY",
    "title": "Inquiry Regarding B-scan Hyperbola Vertex Positions in Different Soil Layers",
    "original_post": {
      "author": "Y D",
      "date": "Feb 22, 2025, 6:59:34AM",
      "content": "Dear All,\n\nI hope this message finds you well. I’ve encountered a discrepancy in my simulations. I expected the B-scan hyperbola vertex for a target in soil layer 2 (dielectric constant 16) to appear at twice the depth of the target in soil layer 1 (dielectric constant 4), but the results deviate.\n\nSimulation 1 (385 MHz Ricker Wavelet): Top target: soil layer 1 (dielectric constant 4)\nBottom target: soil layer 2 (dielectric constant 16)\nCoordinates: top = 1229, bottom = 658 (ratio ≈ 0.53)\nSimulation 2 (85 MHz Ricker Wavelet):\n\nTop target: soil layer 1 (dielectric constant 4)\nBottom target: soil layer 2 (dielectric constant 16)\nCoordinates: top = 1094, bottom = 1639 (ratio ≈ 0.6674)\nFigures 1, 2, and 3 (attached) show the models and B-scan results (background-subtracted), along with the .in files and original data in TXT format.\n\nYour insights would be greatly appreciated.\n\nBest regards,\nDing Yang"
    },
    "responses": [
      {
        "author": "Y D",
        "date": "Feb 22, 2025, 7:00:49AM",
        "content": ""
      },
      {
        "author": "Y D",
        "date": "Feb 22, 2025, 7:01:52AM",
        "content": ""
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FN8LbyBQgGg",
    "title": "MATLAB script to convert output (HDF5) to common GPR formats",
    "original_post": {
      "author": "Craig Warren",
      "date": "Apr 4, 2018, 11:43:26AM",
      "content": "We have added a MATLAB script to the tools package (tools->MATLAB_scripts->outputfile_converter.m) that allows gprMax output files (HDF5 format) to be converted to common GPR formats. Thanks to Dimitris Angelis for writing and contributing the script. It allows output to be converted to DZT (Geophysical Survey Systems, Inc. (GSSI)), RD3 (ABEM Mala), and RD1 (Sensors and Software). The script is a first attempt and has not yet been extensively tested. So we would appreciate feedback, and/or suggested modifications.\n\nKind regards,\n\nCraig"
    },
    "responses": [
      {
        "author": "Michael Fehér",
        "date": "Mar 15, 2019, 8:18:47AM",
        "content": "Hi Craig,\n\nthanks for this info.\n\nas I am not having a Matlab-Lisence, Is there an option to call the convert-script from the gprMax envoiroonment?"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 15, 2019, 9:33:13AM",
        "content": "Hi Michael,\n\nMaybe OCTAVE will work? I have not tried it but it often does for a number of MATLAB scripts.\n\nAntonis"
      },
      {
        "author": "Michael Fehér",
        "date": "Apr 8, 2019, 2:21:15AM",
        "content": "Dear Antonis,\n\nunfortunately this script refuses to work in Oktave.\nwarning: the 'h5read' function is not yet implemented in Octave\n\nPlease read <https://www.octave.org/missing.html> to learn how you can\ncontribute missing functionality.\nerror: 'h5read' undefined near line 30 column 10\nerror: called from\n    outputfile_converter at line 30 column 8\n>>\nthere are some hints at the internet, but I dont't have any link to MatLAB.\n\nIs there an option that anyone here could guide me to get dzt's out of the output-files? if not dzt, any pixel-graphic with 1 px per trace and sample (at 512 smp/trace) would do aswel.\n\n\nHopefully,\n\nMicha"
      },
      {
        "author": "Kerem Ozkap",
        "date": "May 15, 2020, 12:38:12PM",
        "content": "Hello Craig and Dimitris,\n\nThanks for this useful code! It provides an effortless option to upload synthetic data directly into packaged software for data processing and interpretation.\n\nHowever, according to my trials, the code is not suitable for converting the output files produced by commercial antenna models like GSSI 1.5 GHz, 400 MHz, or MALA 1.2 GHz.  Do you plan to add any feature to the code for this purpose?\n\nBest regards,\n\nKerem"
      },
      {
        "author": "moises stevend meza rodriguez",
        "date": "May 24, 2022, 3:46:26PM",
        "content": "Dear gprMax developers, I am using gprMAX (I'm a new user). I was wondering where I can find that script that you mention, It will definitely help me a lot in my project. This is my email to get in touch: moises....@gmail.com\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/o_cYPh2sk40",
    "title": "AustinMan example",
    "original_post": {
      "author": "Sernita",
      "date": "Apr 27, 2017, 1:57:09PM",
      "content": "Hi all,\n\nWhen trying to run AustinMan in GPRmax using this simple input file :\n \n#title: AustinMan visualization\n#domain: 0.5 0.5 0.5\n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 1e-9\n \n#geometry_objects_read: 0.04 0.04 0.04 AustinMan-v2_4-4x4x4.h5 AustinManWoman_materials_dispersive.txt\n \nI get the following error:\n \ngprMax.exceptions.CmdInputError: '#add_dispersion_debye: 3 40.84 0.15293e-8 27.951 0.014519e-9 34.334 0.50631e-11 CerebroSpinalFluid{AustinManWoman_materials_dispersive}' requires positive values for the permittivity difference and relaxation times, and relaxation times that are greater than the time step for the model.\n\nAny idea what the problem could be?\n\nBest"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 27, 2017, 2:32:49PM",
        "content": "Hi Sernita,\n\nWelcome to the forum!\n\nThe error message occurs because their is a relaxation time for one of the poles of the Debye model (0.50631e-11 secs) for the Cerebro Spinal Fluid is less then the time step for the model (which is 7.7033e-12 secs).\n\nSo you will need to use either the 2mm or 1mm AustinMan/Woman models, so that the time step is small enough to be able to use the dispersive material properties.\n\nThanks for spotting this. I will add a note to the AustinMan/Woman section of the User Guide for future users.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 27, 2017, 3:08:33PM",
        "content": "Hi Sernita,\n\nHope you find gprMax useful! We would like any feedback you might have at any point as bioelecrtomagnetic applications are  not our main field but there are very similar problems and equally interesting. \n\nYou can lower your tilmestep as an alternative to change the spatial resolution. Use the command #time_step_stability_factor:  which will allow you to specify a fraction of the automatically calculated time step. FDTD has optimum dispersion characteristics when the solver runs at the maximum time step. However, lowering the time step a little is not usually a big problem especially if this makes your model smaller and easily fitting in a limited memory environment. \n\nTry this and she how it goes. The solution proposed by Craig would be more accurate as your model is going to be more refined.\n\nHope  this helps!\n\nAntonis"
      },
      {
        "author": "Sernita",
        "date": "Apr 28, 2017, 9:25:23AM",
        "content": "Many thanks Craig and Antonis, both solutions were useful. Now I'm using Antonis' one because even using --geometry-only my pc is getting frozen (paraview also needs a lot of memory to open the .vti output). Did you run and open the FTDT geometry mesh of the AustinMan in a standard PC?\n\nI also noticed that the parameters for the command #dx_dy_dz need to be set lower than the resolution of the model, i.e #dx_dy_dz: 0.0019 0.0019 0.0019 for the 2x2x2 mm^3 AustinMan body model. Also the sixth parameter of the command #geometry_objects_read (as appears in the example) is not allowed.\ngprMax.exceptions.\nCmdInputError: '#geometry_objects_read: 0.04 0.04 0.04 ./AustinMan-v2_4-2x2x2.h5 ../../../gprMax/user_libs/AustinManWoman/AustinManWoman_materials_dispersive.txt n' requires exactly five parameters\n\nI'll be playing with gprMax during the next week to try out if it is useful for my application and I'll let you know about it. Thanks again for the great work you guys are doing with this open-source software.\n\nBest"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 28, 2017, 1:10:58PM",
        "content": "Hi Sernita,\n\nThanks for spotting the mistake in the example (now fixed!). I think that got left in from an early incarnation of the #geometry_objects_read command.\n\nAs Antonis said we haven't (to our knowledge) had many people using the AustinMan/Woman models in gprMax yet, so it would be good if you can continue to keep us posted with how you get on. Its a while since I ran the AustinMan models - certainly rendering the geometry in Paraview will be pretty intensive on a desktop machine. I use an iMac with a 4 GHz Intel Core i7 CPU and 32GB RAM, and I think rendering the 2x2x2mm^3 model took a while!\n\nI don't understand your comment about setting the spatial resolution for the simulation. It should be fine to use #dx_dy_dz: 0.002 0.002 0.002 with the 2x2x2mm^3 AustinMan model. What error are you getting?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sernita",
        "date": "Apr 29, 2017, 12:24:23PM",
        "content": "Hi Craig,\n\nThe error I get with #dx_dy_dz: 0.002 0.002 0.002 is\ngprMax.exceptions.CmdInputError: '#geometry_objects_read: 0.04 0.04 0.04 ./AustinMan-v2_4-2x2x2.h5 ../../../gprMax/user_libs/AustinManWoman/AustinManWoman_materials_dispersive.txt' requires the spatial resolution of the geometry objects file to match the spatial resolution of the model\n\nHowever it works with #dx_dy_dz: 0.0019 0.0019 0.0019\n\nBest"
      },
      {
        "author": "Craig Warren",
        "date": "May 1, 2017, 7:30:13AM",
        "content": "Hi Sernita,\n\nThats strange, it suggests that the 'dx, dy, dz' attribute that is in the AustinMan HDF5 is not set correctly. Could you check the 'dx, dy, dz' attribute in the HDF5 you have? If you have HDF5 libraries installed on your machine you should be able to run:\n\nh5dump -a \"/dx, dy, dz\" AustinMan-v2_4-2x2x2.h5\n\nIf the attribute is set correctly you should get the result:\n\nHDF5 \"AustinMan-v2_4-2x2x2.h5\" {\nATTRIBUTE \"dx, dy, dz\" {\n   DATATYPE  H5T_IEEE_F64LE\n   DATASPACE  SIMPLE { ( 3 ) / ( 3 ) }\n   DATA {\n   (0): 0.002, 0.002, 0.002\n   }\n}\n}\n\nThis is result I can from my AustinMan HDF5 file, but I have an older v2.3 version, I see yours is v2.4.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Sernita",
        "date": "May 2, 2017, 5:50:16AM",
        "content": "Hi Craig,\n\nI get the same result than you for v2.4 version.\n\n\nHDF5 \"AustinMan-v2_4-2x2x2.h5\" {                                                                                                                                                  \nATTRIBUTE \"dx, dy, dz\" {                                                                                                                                                          \n   DATATYPE  H5T_IEEE_F64LE                                                                                                                                                       \n   DATASPACE  SIMPLE { ( 3 ) / ( 3 ) }                                                                                                                                            \n   DATA {                                                                                                                                                                         \n   (0): 0.002, 0.002, 0.002                                                                                                                                                       \n   }                                                                                                                                                                              \n}\n}\n\n\nBest,\nIgnacio"
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2017, 9:22:06AM",
        "content": "Hi Ignacio,\n\nThat is strange that you are seeing the error about mismatched spatial resolutions then. I have made a small change to the code to use a more robust rounding method. I don't think it will make a difference, but if you could update and try the model again that would be useful. Also, if you don't mind posting your input file just so I can rule out anything strange in that.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Sernita",
        "date": "May 2, 2017, 11:51:23AM",
        "content": "Hi Craig,\nIt works with the updated GPRMax and #dx_dy_dz: 0.002 0.002 0.002. Thanks!\n\nThe input file is as simple as this:\n#title: AustinMan visualization\n#domain: 0.4 0.4 0.4\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 1e-9\n#geometry_objects_read: 0.04 0.04 0.04 ./AustinMan-v2_4-2x2x2.h5 ../../../gprMax/user_libs/AustinManWoman/AustinManWoman_materials_dispersive.txt\n#geometry_view: 0 0 0 0.4 0.4 0.4 0.002 0.002 0.002 visualization2 n\n\nBest"
      },
      {
        "author": "Craig Warren",
        "date": "May 2, 2017, 12:00:01PM",
        "content": "Great. I think it was just a rounding error.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VRvWEKjcJL4",
    "title": "Snowpack 3D modeling for estimating effective permittivity.",
    "original_post": {
      "author": "Zohaib Akbar Khan",
      "date": "Mar 28, 2024, 4:20:04PM",
      "content": "Hi team gprmax, \nI am working on simulation of snowpack, as snow is heterogeneous mixture of air-voids, moisture content and ice, moisture content is only dispersive material. As per my basic theoratical knowledge, I can use #add_dispersion_debye commond for effective permitivty of water and futher want to use it in Complex refrective index model  (CRIM etc), my questions are:\n1: Is there any pre defined/built in formual code for CRIM like soil_peplinski etc?\n2: Do we need to define the theoratical excitation source or only center frequency in #hertizian_dipole commond is enough? i am using CO4080 impulsive radar with 800Mhz GPR common offset profiling for the field survey, so that, later i can validate the results with real data. Your guidance will be really appriciated in this.\nThanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:42:44AM",
        "content": "1: Is there any pre defined/built in formual code for CRIM like soil_peplinski etc?\n\nNot at present, but the framework used to create the Peplinski soil could be duplicated and adapted for other mixing models such as CRIM. You can also use the DebyeFit toolbox in the devel branch of gprMax to fit a multi-pole Debye model to existing CRIM data if you have that, see https://docs.gprmax.com/en/devel/inc_DebyeFit.html#complex-refractive-index-mixing-crim-function\n\n2: Do we need to define the theoratical excitation source or only center frequency in #hertizian_dipole commond is enough? i am using CO4080 impulsive radar with 800Mhz GPR common offset profiling for the field survey, so that, later i can validate the results with real data. Your guidance will be really appriciated in this.\n\nIt depends what you mean by 'validate the results with real data'? If you are looking for model that will give you indicative output that you can compare to real measurements then you can start with a Hertzian dipole source and a waveform with centre frequency the same as your real GPR antenna. However, if you are looking to compare amplitudes with real data then you would need to consider a 'better' source model, e.g. a model of the actual GPR antenna you are using. See our work on GPR antenna modelling (https://www.gprmax.com/publications.shtml) for more information on this.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/wZ3GzbtoWsE",
    "title": "Define 2D models using numpy array and saving the final output B-scan as numpy array",
    "original_post": {
      "author": "Tushar Gautam",
      "date": "Jun 17, 2020, 1:54:59AM",
      "content": "Hi, I am trying to run forward modeling on some synthetic models. I've stored the model structures in 2D numpy arrays (plots are attached). I want to get B-scans on these models and store them in numpy arrays. I have been reading the documentation but I can't understand how to implement this. Thanks"
    },
    "responses": [
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 17, 2020, 7:30:02AM",
        "content": "There is a python file called \"convert_png2h5.py\" in the tools module.\n\nI think working through it you could derive the same for np.arrays"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 17, 2020, 7:35:49AM",
        "content": "Iterating on it, this should indeed work:\nhttp://docs.gprmax.com/en/latest/utils.html?highlight=%23geometry_objects_read#convert-png2h5-py"
      },
      {
        "author": "Tushar Gautam",
        "date": "Jun 19, 2020, 7:10:51AM",
        "content": "Thanks, I was able to generate .h5 file. Next, do I have to use some python code to read this file? \nI'm sorry, I'm just starting out with gprMax and don't know much."
      },
      {
        "author": "Craig Warren",
        "date": "Jun 20, 2020, 2:55:10PM",
        "content": "Dear Tushar,\n\nI am assuming you have used the 'convert_png2h5' tool to convert your images into HDF5 files and corresponding materials (txt) files. Once you have these you can use the #geometry_objects_read command to insert that geometry into your gprMax model(s) - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Tushar Gautam",
        "date": "Jun 20, 2020, 11:53:00PM",
        "content": "Hi Craig\n\nThe models that I displayed earlier are actually interpreted from seismic data hence the values are velocities. I converted the images (plots for numpy array) to .h5 format using 'convert_png2h5' and didn't change any values inside the numpy array (I felt it might not matter as the command is using pixel values to identify geometry). I hope I'm right till here. \n\nI don't have any materials (txt) files and I can't understand how to get them from the images.\n\nRegards"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 21, 2020, 3:19:27AM",
        "content": "Hi Tushar,\n\nMy mistake, it is a while since I wrote the 'convert_png2h5' tool, and I forgot that it doesn't and in fact can't produce the materials file for you. Once you have the HDF5 file you need to create a materials file yourself that will then be used together with the HDF5 file to import the geometry using the #geometry_objecrts_read command. The materials file is simply a list of #material commands. The order of the list is important as it corresponds to the integer numbers in the HDF5 you created. So for example whatever part of the image you clicked first will have been assigned an integer value of zero which will correspond to whatever material command is listed first in your materials file, and so on....\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Tushar Gautam",
        "date": "Jun 22, 2020, 8:41:37AM",
        "content": "Hi Craig\n\nI wrote the materials_file.txt file with some test values and ran the script (testrun.in). There was some warning regarding some value in the material command but still I was able to get outputs. When I tried to get B scans, it didn't work. I am not sure if there's some error in script or is it due to the warning?\n\nAttaching all the relevant files."
      },
      {
        "author": "Craig Warren",
        "date": "Jun 23, 2020, 10:54:10AM",
        "content": "Dear Tushar,\n\nThe warning messages are very important especially when in red text. Please read them carefully! In this case you potentially have numerical dispersion in your model. Read our guidance on selecting spatial discretisation - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nAlso it it very important to check your geometry (using the #geometry_view command). If you do so, you'll see the attached image, which is clearly not what you intend to model, so you HDF5 file is not correct.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 23, 2020, 1:54:05PM",
        "content": "Your dimensions do not seem to match. Your diomain is 0.24 in x with dx 0.002, yet your PNG has a resolution of 255x255\n\n\nThis is initially not a problem but from your materials fil it's evident that the sensors are not running in free space\n\nFurthermore your .in file misses some parameters for the B-scan"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 24, 2020, 10:03:24AM",
        "content": "I whiped up an \"easy to use\" function that is based on the provided stuff in the GPRmax tools folder, what i do is to autodetect the colour paks in its histogram, more explaination in the jupyter notebook\n\n\n\nhttps://github.com/GGDRriedel/nptohdf"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jun 24, 2020, 10:04:14AM",
        "content": "No checks and balances, so it's up to you to feed it the correct data ;)"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Dec 10, 2020, 5:35:15AM",
        "content": "I guess everyone has already covered most of the points. But I would like to add one more important issue here. In your materials_file.txt file, it is necessary to replace the material names (i.e., my_mat1, my_mat2 etc.) by integer values that you get when you select each layer while creating your h5 file. \n\nThis, I guess, will completely resolve your issue.\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Dec 14, 2020, 10:29:44AM",
        "content": "@Shreedhar, no this is not correct. You do not have to name your materials as the integer values in your data matrix. See the notes in the docs for the #geometry_objects_read command, i.e.\n\n\"The integer numbers in the HDF5 file correspond to the order of material commands in the materials text file, i.e. if #material: 3 0 1 0 sand is the first material in the materials file, it will be associated with any integers that are zero in the HDF5 file.\"\n\nYou can call your materials anything you like, but the order they are placed in the materials file should correspond to the integers used to represent the material in your HDF5 data file, e.g.\n#material: 3 0 1 0 my_sand -> points to the integer zero (0) in your HDF5 data file\n#material: 2.5 0 1 0 my_plastic -> points to the integer one (1) in your HDF5 data file\n#material: 30 0.01 1 0 soil -> points to the integer two (2) in your HDF5 data file\netc...\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QwpsFW8Ma54",
    "title": "moving multiple receivees",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Apr 21, 2019, 5:14:29PM",
      "content": "Normally, we can use \"#src_steps: \" and \"#rx_steps: \" commands to run a B scan simulation. My question is: is it possible to simultaneously move more than one receivers using the '#rx_steps' command?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 23, 2019, 4:07:48AM",
        "content": "Hi Feng,\n\nThe #src_steps command will move all simple sources in a model. Likewise, the #rx_steps command will move all receivers in a model. If you need more fine-grained or advanced movement of sources and receivers, I suggest you use a #python block and the variable current_model_run (http://docs.gprmax.com/en/latest/python_scripting.html#constants-variables) which will allow you to move objects wherever you like for each model run.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZXMbz43aUBo",
    "title": "possibly false memory estimation before run",
    "original_post": {
      "author": "Sam Stadler",
      "date": "Sep 26, 2018, 4:48:56AM",
      "content": "Hi everyone,\n\nI'm having a weird issure where when running a model with a 1.2m x 0.6m x 1.1m domain size (trivial but that the size I'm using at the moment) and a 2mm discretization, the estimated memory required (which is shown before the model is run) is at 11.8Gb, but when after having run the model it says that it only took 4.83Gb of memory. Also, I'm running this on a gpu. This has only been occuring since 1, 2 months or so, after an update of gprMax. I remember that this discrepency wasn't there before my update.\n\nHave any changes been made to the process that checks the memory usage or so? Maybe someone could confirm the memory usage of a model with the same domain size as mine? The main problem I'm having is that I wish to run slightly larger models in the future, but obviously gprMax won't let me if it thinks that it needs more memory than it should and if that number is greater than the memory on my gpu.\n\nCheers,\nSam"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 27, 2018, 9:58:31AM",
        "content": "Hi Sam,\n\nFirstly, the memory estimate is just that, i.e. an estimate. It seems quite tricky to estimate the memory footprint accurately in Python. At the moment we use the psutil module with the memory info function (https://psutil.readthedocs.io/en/latest/#psutil.Process.memory_info). If anyone can recommend a better method please let me know.\n\nThat said the discrepancy between estimated and actual usage you are seeing is large! However, I think this is an error with how the memory usage is being reported when run with the solver on GPU, i.e. it is not the estimated memory that is wrong, rather the reported actual usage. I'm not sure at the moment how this might be fixed. As a quick test can you run the same model on CPU and report the estimated and actual memory usage.\n\nThanks,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kEdh4omrr-U",
    "title": "is it possible to create 2D model using the mixing soil model from Peplinski?",
    "original_post": {
      "author": "Chenxi",
      "date": "May 31, 2017, 9:16:53AM",
      "content": "Hi Craig,\n\nis it possible to create 2D model using the mixing soil model from Peplinski? i.e., to set the thickness of model as 0.001? Thanks!\n\nBest regards,\nChenxi"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 31, 2017, 9:02:32PM",
        "content": "Hi Chenxi,\n\nThe answer is Yes! In future try to see if it works first ;-)\n\nBest\n\nAntonis"
      },
      {
        "author": "Chenxi",
        "date": "Jun 1, 2017, 11:43:06AM",
        "content": "Thanks, Antonis!\nWe tried the 2D case, and the vti model looks fine. But after simulation, the resolution is quite low. \nWe have set the antenna's moving step to the minimum distance that is equal to the resolution of the model, i.e., 0.001.\nCan you give some suggestion if we have other approaches to improve the resolution? \nThanks again!"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2017, 12:09:30PM",
        "content": "Hi Chenxi,\n\nCan you copy or attach the input file you are using so we can have a look.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Chenxi",
        "date": "Jun 1, 2017, 1:35:51PM",
        "content": "This is the input file:\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.55 0.30 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n\n#material: 6 0 1 0 half_space\n#material: 12 0 1 0 clay\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.260 0 my_ricker\n#rx: 0.080 0.260 0\n#src_steps: 0.001 0 0\n#rx_steps: 0.001 0 0\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#fractal_box: 0 0 0 0.55 0.250 0.001 1.5 1 1 1 50 my_soil my_soil_box\n#add_surface_roughness: 0 0.250 0 0.55 0.250 0.001 1.5 1 1 0.235 0.260 my_soil_box"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 2, 2017, 9:26:07AM",
        "content": "Hi Chenxi,\n\nThe #fractal_box command uses a random number generator as part of generating the fractals. Every time you run the model (to create a B-scan) you will get a different random number and hence different fractal distribution of the soil properties. You'll see this if you look at a geometry view for 2 different model runs. So what you need to do is use the optional i2 parameter (see http://docs.gprmax.com/en/latest/input.html#fractal-box) to seed the random number generator. This will give you a fractal distribution that is the same for each A-scan in your B-scans. This also applies to the surface roughness (as it also uses fractals). For example,\n\n#fractal_box: 0 0 0 0.55 0.250 0.001 1.5 1 1 1 50 my_soil my_soil_box 5\n#add_surface_roughness: 0 0.250 0 0.55 0.250 0.001 1.5 1 1 0.235 0.260 my_soil_box 5\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Jiannan Cai",
        "date": "Jun 2, 2017, 2:01:19PM",
        "content": "Hi Craig,\n\nThank you very much! Your suggestion is very helpful. We tried again and the result is much better, as shown below. \nThanks again!\n\nBest,\n\nJiannan"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BCn9H55JcwM",
    "title": "How to model box that is not parallel to x, y, z axes?",
    "original_post": {
      "author": "Jiannan Cai",
      "date": "Sep 27, 2017, 11:06:10AM",
      "content": "Hello everyone,\n\nI got a problem to create boxes (actually slabs) with different orientations not parallel to the axes. I didn't see how to do this in user's guide, does anyone know how to model this?\n\nThank you very much,\n\nJiannan"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 27, 2017, 12:39:04PM",
        "content": "I suspect using the #triangle: command in a clever way could allow you to do some of the boxes you want. An alternative could be to create a python function that builds the box you need by using simple primitives.\n\nBest\n\nAntonis"
      },
      {
        "author": "Jiannan Cai",
        "date": "Sep 28, 2017, 12:36:11AM",
        "content": "Hi Antonis,\n\nThank you for your help. I tried the #triangle command but always got some errors, saying the triangle is not specified correctly. Is there any constraint using this command? And the following is my code. \n\nThank you very much,\n\nJiannan\n\n#domain: 0.50 0.50 0.50\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-9\n\n#material: 6 0 1 0 half_space\n#material: 12 0 1 0 clay\n#material: 6 0 1 0 concrete\n#material: 12 0.13 1 0 bone\n#material: 3 0 1 0 dry_sand\n\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: y 0.040 0.250 0.450 my_ricker\n#rx: 0.080 0.250 0.450\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.5 0.5 0.05 dry_sand\n#triangle: 0.026 0.05 0.05 0.372 0.05 0.25 0.372 0.45 0.25 0.026 concrete\n#triangle: 0.026 0.05 0.05 0.026 0.45 0.05 0.372 0.45 0.25 0.026 concrete\n#triangle: 0.476 0.05 0.05 0.316 0.05 0.21 0.316 0.45 0.21 0.026 concrete\n#triangle: 0.476 0.05 0.05 0.476 0.45 0.05 0.316 0.45 0.21 0.026 concrete\n#cylinder: 0.3 0.05 0.626 0.3 0.45 0.626 0.014 bone\n\n\n#geometry_view: 0 0 0 0.5 0.5 0.5 0.002 0.002 0.002 buried_body_3D n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 28, 2017, 5:30:54AM",
        "content": "Hi Jiannan,\n\nThe #triangle command has some limitations. Its definition is:\n\n#triangle:\nAllows you to introduce a triangular patch or a triangular prism with specific properties into the model. The patch is just a triangular surface made as a collection of staircased Yee cells, and the triangular prism extends the triangular patch in the direction perpendicular to the plane. The syntax of the command is:\n\nThis means that it creates ONLY 2D triangle patches that you can extend as \"wedges\" by giving them a thickness. Therefore, one of the coordinates in specifying a triangle patch must be the same for all apex definitions. In your case this is not happening.\n\nAntonis"
      },
      {
        "author": "Jiannan Cai",
        "date": "Sep 28, 2017, 11:20:46AM",
        "content": "Hi Antonis,\n\nThank you for your explanation, then I will try to create python function in the input file to create boxes. \n\nThanks again,\n\nJiannan"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7y2AC9j83AE",
    "title": "set up receiving antenna",
    "original_post": {
      "author": "城阳",
      "date": "Apr 30, 2024, 9:04:49AM",
      "content": "Hello,\nI noticed the ‘--tlrx-num’ option in ‘plot_antenna_params.py’. \nHow can I set up a dipole in modeling as a receiving antenna that can be viewed using ‘--tlrx-num’?\n\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 8, 2024, 9:08:24AM",
        "content": "You can use a transmission line (with zero amplitude waveform) or receiver (#rx) on the receiving antenna structure and the 'plot_antenna_params.py' tool will then plot s21 parameters.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "城阳",
        "date": "May 8, 2024, 9:20:04AM",
        "content": "Thanks to you, now i know how to set up the receiving antenna.\nAs I mentioned in the April 28th question: When I look at the voltage history of the receiving antenna, I see that this is always twice less than the theoretical Voc = Leff * E. Do you know why?\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hYqr4WRvJG4",
    "title": "scaleplate in Paraview",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Jan 17, 2019, 7:54:40AM",
      "content": "Is it possible to mark the scales in the 3D geometric model for Paraview?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 19, 2019, 12:25:28PM",
        "content": "Hi Feng,\n\nThe colorscale in Paraview when viewing geometry will display the numeric ID of the material - you can see the ID from the materials table printed when gprMax runs. By using the 'Color Map Editor' in Paraview you can edit and annotate the Color Bar in many different ways, this includes adding labels to the numeric values.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Te8yD93FNew",
    "title": "target size effect on a line source",
    "original_post": {
      "author": "Kenneth Obrien M",
      "date": "Sep 21, 2017, 2:22:53PM",
      "content": "I carefully reviewed the gprMax user guide to figure out how using the line source on a 2D model distinguishes the target sizes. From simulation results there is a difference in responses between large and small target. How that comes is still a not clear, any explainationplease. The user guide does not explicitly explain that.\n\nthank you."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 22, 2017, 10:53:55AM",
        "content": "Hi Kenneth,\n\nI do not understand your question. Models with different targets that have the same source and cell size should produce different responses. What you want to be explained?\n\nAntonis"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Sep 22, 2017, 7:51:51PM",
        "content": "How does the 2D model distinguishes targets of different sizes. For example a sphere of radius 0.1 m and 0.5 m, how does a line source recognize that the size has changed?\nI got two different responses from these two targets."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 24, 2017, 10:23:25AM",
        "content": "Hi Kenneth,\n\nA line source does not distinguish anything. gprMax is an FDTD solver for Maxwell's equations which are the governing equations for the GPR forward problem and other electromagnetic problems. These have solutions that are defined by their boundary conditions and by the initial conditions relating to sources and their distributions. The distribution of the fields and their interaction in such a model depends on the objects and on their electrical properties and is defined by obeying specific electromagnetic relations (e.g. boundary conditions at interfaces). The solution will depend on the type of targets and objects you have interacting with the fields.\n\nYou obviously can use gprMax to obtain approximate solutions to these equations according to the parameters you specify. They do have limitations which come from the design of the method and you must be aware of them to use this modelling tool properly. Further, understanding the responses requires you to having an understanding of the underlying electromagnetic problem you are trying to solve and the fundamentals of the electromagnetic theory. \n\nIf you want to get to understand the reasons the responses differ and by how much etc. you need to understand the electromagnetic problem you are trying to solve and study some electromagnetics at least to a working basic level. Part of this can be the study of the way we solve these problems using FDTD. You do not have to do this to use a tool although, I do strongly recommend it especially if you trying to do any kind of research work relating to GPR.\n\nLet me say that the posing of this kind of question shows that you have not done that because if you had you would not have asked. A manual is designed to explain the way a particular software code (gprMax in this instance) works and applies the FDTD method to solve an electromagnetic problem. It is not designed to be a book about electromagnetics and explain why a solution looks the way it does. There are many such books available. \n\nFinally, let me say again that it is correct that you should get different responses from different targets. \n\nBest\n\nAntonis"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Sep 24, 2017, 4:10:19PM",
        "content": "Thank you."
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Sep 26, 2017, 8:08:38AM",
        "content": "My question is simple and I do have background on FDTD, maybe I'm not phrasing right.\nOnce again, two spherical targets with same dielectric properties but different target sizes i.e. radius 1m and 2m, respectively, why are they giving two different responses from similar dielectric properties from a 2D model with a line source??\nAnd how does the size effect influence the response, a solution I have been looking for and could not find it, hence asking this.\nHope it's clear.\nRegards,"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 26, 2017, 9:30:13AM",
        "content": "Maybe you can post two pictures of your geometry to have a look. However, if the line source position is fixed in space and the centre of the cylinders are fixed as well then the 2m Radius one is much closer to the source. If the distance to the top of the cylinders is fixed (i.e. variable centres) then the wave interacts differently from the 2m radius compared to the 1m one. If you are simulating enough time to get internal reflections and not just the first reflection the cylinders will have different resonances.\n\nDepending on your arrangement there are many reasons for the responses to be different. If you want to find a formula relating size with the response this cannot be done for any case but there are simplifications that can help. For example, the RCS of a cylinder relates the far field radar response to its diameter.\n\nBest\n\nAntonis"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Sep 26, 2017, 7:02:32PM",
        "content": "Attached a pdf file with two geometries with corresponding A-scans. Both small (r = 0.006 m) and large (r = 0.024 m) have different responses even though the dielectric properties are similar with dielectric constant = 3.9, magnetic = 1 and conductivity = 0. Both seeds are placed 0.07 m  from the antenna\n\nThe soil has dielectric  constant = 8, magnetic = 1 and conductivity = 0.035."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 26, 2017, 7:38:53PM",
        "content": "The responses look very reasonable and pretty much as expected. In the second one, you get a second reflection from the bottom of the big cylinder. In the first one you will not as the target is too small. The level of the response is reasonable as well. The fields interact with a lot more of your big cylinder whereas the response of the small sphere is getting closer to the Raleigh scattering as the cylinder is getting to be small in comparison to your dominant pulse length.\n\nI cannot see any problems and cannot still understand your question. Assuming for a second that these responses were supposed to be the same then with the same argument the radar response at the same distance from a toy model aeroplane and from the proper size one should be identical!!! This is clearly not the case and makes no sense. If you think that the radar waves are behaving like a laser pointer and only interact with the most top part of the target as a point and come back to the receiver this is really not the case and you need to look into how EM waves are generated and are shaped close to sources.\n\nIf you want to understand better how the responses are generated then you need to do some movies by saving snapshots of your models (I think they are examples in the docs). These will show you the field propagation and make this more clear.\n\nBest\n\nAntonis"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Sep 27, 2017, 5:13:51PM",
        "content": "Giannopouols,\n\nYour explaination was most helpful and i created a matlab 1D FDTD model to see how the wave travels through a target of any material, it made sense, thank you so much.\n\nKenneth."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fKoHnbtGEIo",
    "title": "Action COST TU1208",
    "original_post": {
      "author": "Diego Osorio",
      "date": "Nov 29, 2021, 11:12:35AM",
      "content": "Hello dear community!\nI am working with 3D modeling from open source CAD to gprMax for different GPR antennas. I was wondering whethear I could download or get more info on the COST TU1208 project linked to gprMax, to sort out several ideas regarding CAD modeling.\nThanks for the help!\nDiego"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nnZYTM1xc04",
    "title": "Plotting source wave and reflected signals on the same chart.",
    "original_post": {
      "author": "Shreedhar Todkar",
      "date": "Nov 27, 2018, 8:28:08AM",
      "content": "Hello again Craig, Antoinis,\n\nFirstly, I thank you for the continued support you guys provide on this forum.\n\nI have a query. I'm modeling a two-layered structure. I use a #voltage_source with gaussiandotnorm waveform centered at fc = 2.6GHz.\nI would like to trace the input pulse to the antenna and the received signals from the layers on the same axis. I have attached a rough sketch as to what I am attempting to do. \n\nI found out in the manual that it is possible to trace the waveform using the plot_source_wave command and using plot_Ascan, I can easily trace the reflected signals. \nHowever, is it possible to combine both these traces into one (as in the attachment)?\n\nThanks again for your help.\n---\nShreedhar."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 27, 2018, 9:37:01AM",
        "content": "Hi Shreedhar,\n\nThis requires some Python knowledge combine the tools we have provided or export the data from them into mat files you can work with in MATLAB. I don't have time to provide details on this, maybe someone else on the forum will.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/SpyQzJhQbTk",
    "title": "How to make diagonal shape?",
    "original_post": {
      "author": "Man-Sung Kang",
      "date": "Oct 30, 2017, 8:22:14PM",
      "content": "Hi master!\n\nI have a question. I have tried many cases of underground object using gprMax.\nI want to simulate underground object diagonally. but I couldn't find anything about diagonal shape in gprMax user guide.\nCan I simulate a diagonal object like the one shown in the attached figure?\n\nThanks in advance.\n\nKind regards,\nMS"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 31, 2017, 2:17:26PM",
        "content": "Hi Man-Sung,\n\nThere is no specific command for creating a diagonal layer, such as you show. You could use Python scripting in the input file to create it with boxes or, if the geometry is basically 2D consider creating it as a PNG image and then using the conversion script - http://www.gprmax.com/forum.shtml?place=topic%2Fgprmax%2F2Sl6RjP7uJI%2Fdiscussion\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Nov 1, 2017, 1:48:30AM",
        "content": "Hi Man - Sung,\n\nFor this simple geometry you can play a little with the commands #box and #triangle.\nTry this with the exact same order :)\n\n#box: 0 0 0 2.5 0.005 1.5 mat1\n#triangle: 0 0 1.5 0 0 0.5 2.2 0 1.5 0.005 mat2\n#triangle: 0 0 1.5 0 0 0.6 2.0 0 1.5 0.005 mat1\n\nKind regards,\nDimitris"
      },
      {
        "author": "Man-Sung Kang",
        "date": "Nov 5, 2017, 8:39:07PM",
        "content": "Hi Craig,\n\nThank you for your fast reply.\nI will try to apply your answer.\n\nBest regards,\n\nMS"
      },
      {
        "author": "Man-Sung Kang",
        "date": "Nov 5, 2017, 8:43:04PM",
        "content": "Hi Dimitrios,\n\nThank you for letting me know how it works.\nI will follow your answer.\n\nKind regards,\nMS"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JK-u3epNGUA",
    "title": "Issue about the zero-offset BHR model",
    "original_post": {
      "author": "HJJ HJJ",
      "date": "Feb 14, 2019, 8:28:05PM",
      "content": "Hi friends,\n    I’m trying to simulate a 3-D borehole radar model. There are one transmitter and six receivers with different offsets located at the borehole axis (y-direction). The source waveform is “gaussiandot”. Other detail can be seen in the attached input file. \nThe problem: When transmitting antenna and the first receiving antenna are at the same location (simulate the zero-offset case), I found the receiving signal is not correct (see figure). Theoretically, it should be a two-order Gaussian envelope, but not a zero-order pulse. I don’t know if it is related to the y-polarization direction of the antenna, or the zero-offset model shouldn't be built like this. Thanks for your help.\n\nBest regards,\n\nHJ"
    },
    "responses": [
      {
        "author": "Feng Zhou",
        "date": "Feb 18, 2019, 11:08:06AM",
        "content": "I am also doing borehole radar simulations with the similar case to you. Could you please show the geometry of your model?"
      },
      {
        "author": "HJJ HJJ",
        "date": "Feb 20, 2019, 2:17:36AM",
        "content": "Hi Feng,\n\nIt is very nice to know you are doing borehole radar. I was trying to upload the geometry of my BHR model, but the server always refused me. So, you can run the attached file uploaded before and get the model easily. It is just a simple testing model."
      },
      {
        "author": "Feng Zhou",
        "date": "Feb 21, 2019, 5:00:13AM",
        "content": "I also have the same question. In 2D simulation, the result looks good, but in 3D, it is strange."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 21, 2019, 7:07:29AM",
        "content": "There is nothing really strange about this response.\n\nDo you have an analytical solution for a Hertzian dipole at zero offset? I don' think so. You are using a Hertzian dipole source which is not a real antenna. This does not happen in reality and the Hertzian dipole source is only an approximation in the numerical world and actually does not even exist in the real world ... The approximation is good few cells away from the source as comparisons with the analytical solutions can easily demonstrate. In the real world a Hertzian dipole (i.e. very small antenna) is not used as the efficiency would be terrible.\n\nNeed to understand the limitations of the numerical modelling as well as the significance of approximations. Finally, in all available GPR's you do not have real zero offset as you do not have monostatic GPRs (same antenna for transmitting and receiving). However, this can be done in a model if you simulate the antenna structure and don't use theoretical sources that do not exist in reality and they are only valid as approximations in a numerical model.\n\nHope this helps.\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/iW3PRkZZr4g",
    "title": "Regarding gprMax version",
    "original_post": {
      "author": "kashirajvk kalshetti",
      "date": "Mar 19, 2024, 9:49:34AM",
      "content": "Dear sir,\n\n\nwhich is latest version of gprMax ? and how to check gprMax version on command prompt for windows system"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yxO74Zgp7l4",
    "title": "Cross Polarisation in gprMax",
    "original_post": {
      "author": "Del Buan",
      "date": "Oct 19, 2024, 5:06:04AM",
      "content": "Hi gprMax members, I'm currently looking into how to go about doing a cross polarisation in gprMax. By referring to the below screenshot:\n\n\n\nThe above screenshot is a radar consists of a transmitter (Tx) and a receiver (Rx) that is scanning the \"Object\" towards the \"Moving Direction\". I'm trying to make the orientation of the Tx and Rx in such a way that they are in cross-polarisation in gprMax but I'm not sure how to go about it.\n\nIs there a method to rotate the Tx and Rx so that they are in cross-polarisation in gprMax?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 20, 2024, 11:01:52AM",
        "content": "If you are using a simple source, e.g Hertzian dipole, and receiver, then you can set the source polarisation and look at the different field components (Ex, Ey, or Ez) on the receiver (#rx) point to examine polarisation effects. If you are using a full antenna model then you would need to rotate the receiving antenna to match the polarisation you are interested in.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Z4KJXPS4i2I",
    "title": "Directional reflection modeling on cylindrical domain",
    "original_post": {
      "author": "Alexis Shakas",
      "date": "Nov 11, 2021, 8:49:19AM",
      "content": "Hello, I am wondering if anyone has worked in creating a model (either 2D or 3D) using a directional antenna (so using for example the GSSI_1500 antenna)  and measuring in a cylindrical geometry. So this would be simulating a GPR measurement along a tree trunk and having the antenna tangential to the trunk each time. I could not find an easy way of scripting this. Thanks for the help!"
    },
    "responses": [
      {
        "author": "Christian Pigot",
        "date": "Nov 14, 2021, 4:01:33PM",
        "content": "Hello Alexis\n\nNice project.\nI do not see exactly where your issue is, I am thus launching the first step.\n\nThe orientation of the antenna is fixed and it only emits emits toward the bottom.\nI had a similar issue and circumvent that by rotating the model around the antenna.\nYou will have to model your tree horizontally and rotate it so that it keep contact with the antenna.\n\nIf your issue is creating a parametric model of the tree, then we need more information.\n\nBest regards\n\nChristian Pigot \n ---------------------------------\nGeo Search Co., Ltd. \nTechnology Development Center \n Url: https://www.geosearch.co.jp\n--------------------------------- \n"
      },
      {
        "author": "Alexis Shakas",
        "date": "Nov 15, 2021, 1:54:09PM",
        "content": "Hello Christian,\n\nThank you for the reply! Indeed, my problem is that I can not orient the antenna, and that the boundaries of \"my tree\" are defined with exact (x,y) pairs. I therefore want to trace a smooth surface around a \"distorted\" circle. Of course this will not be ideal with a rectangular grid, but that's fine.\n\nRotating the model is a good idea but I suppose then you also run into numerical dispersion problems. But it seems to be the only solution. Do you have an example script of how you did this?\n\nBest,\nAlexis\n"
      },
      {
        "author": "Christian Pigot",
        "date": "Nov 16, 2021, 4:19:49PM",
        "content": "Dear Alexis\n\n\" I therefore want to trace a smooth surface around a \"distorted\" circle. Of course this will not be ideal with a rectangular grid, but that's fine.\"\nthis depends on the ratio of the antenna wavelength with the discretization. As a rule of thumb I tend to think that 1/10 is OK\n\nRegarding the model. Yes I have one that I can share. \nBut it is way simpler than the problem you are exposing here. \nI have just a plate traveling around the antenna.\n\nOne more suggestion\nBefore using an antenna model, I would confirm that a simple Hertzian dipole with an excitation defined by '#excitation_file:' is not satisfactory.\nThe model is much more simple and fast to set up. \nI guess you have the experimental data of your tree. See how far apart experimental data and simulation are. Conclude on the relevance of having a more complex model.\nThe main cost of using this approach is directivity. Antenna emission is roughly a cone shape. You would be surprised by how large this cone is. This makes the Hertzian dipole quite a good approximation in most of the cases\n\nCordially, \n\nChristian\n---------------------------------\nGeo Search Co., Ltd. \nTechnology Development Center \n Url: https://www.geosearch.co.jp\n--------------------------------- \n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7XWRr40RGxg",
    "title": "I have some questions",
    "original_post": {
      "author": "jie wang",
      "date": "Apr 26, 2017, 9:33:11PM",
      "content": "I have the following questions: the application of paraview after the map, the color of each layer can be changed? How should it be changed? Gprmax wave after the specific data should be how to view it?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 27, 2017, 4:07:37AM",
        "content": "Hi Jie,\n\nSounds like your question relates to using Paraview. We can help somewhat, but there is plenty of material available about using Paraview elsewhere, i.e. http://www.paraview.org/Wiki/The_ParaView_Tutorial\n\nIf you are referring to viewing geometry (#geometry_view) in Paraview, you can change the colours of each object from the Properties panel, see the User Guide - http://docs.gprmax.com/en/latest/output.html#geometry-output\n\nIf you are referring to viewing the electromagnetic fields over time (#snapshot) in Paraview, then you have to choose a Color Map and scale it appropriately for your specific model.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CRXcLvsCVDY",
    "title": "How to iteratively process multiple input files",
    "original_post": {
      "author": "Matthijs van Delft",
      "date": "Mar 12, 2019, 8:23:17AM",
      "content": "Dear people,\n\nCurrently, I'm working on a Jupyter notebook to iteratively process multiple input files. The input files are named test#_setup.in where the # stands for an integer that increments, see the example underneath.\n\nif i == 1: \n   %run -m tools.outputfiles_merge ./input/test1_setup --remove-files\nelif i == 2: \n   %run -m tools.outputfiles_merge ./input/test2_setup --remove-files\n\nFor now, I just hardcoded the command based on the specific iteration, but obviously, this is not the nicest way.\nIs there any functionality to easily process a batch of files or to integrate the variable # within the command? Thanks for your help!\n\nKind regards,\n\nMatthijs"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2019, 4:58:20AM",
        "content": "Hi Matthijs,\n\nFrom the example, I assume you are talking about processing output files, rather than input files?\n\nAnyway for a cleaner solution you could create a Python script that imports the ``merge_files`` function from the ``output files_merge`` module.\n\ndef merge_files(basefilename, removefiles=False):\n    \"\"\"Merges traces (A-scans) from multiple output files into one new file,\n        then optionally removes the series of output files.\n\n    Args:\n        basefilename (string): Base name of output file series including path.\n        outputs (boolean): Flag to remove individual output files after merge.\n    \"\"\"\n\nYou can then pass the ``basefilename`` argument in.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VIEouspwa5A",
    "title": "figure out the executed file",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Jan 31, 2020, 3:48:12AM",
      "content": "Hallo every Body,\n\ni tried to reinstall the GprMax again on my new Labtop. i face this proble to figure out the executed file\n\nAlthough the executing works well but the instruction\n\n python -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\n\ni take this error\n\nRuntimeError: the sip module implements API v12.0 to v12.4 but the PyQt5.QtCore module requires API v12.5"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 7, 2020, 7:01:28AM",
        "content": "Hi Ahmed,\n\nIt looks like a compatibility problem with matplotlib, qt, and the sip package. Not really something gprMax is in control of. What I would suggest is running: \n\nconda upgrade sip\n\nIf you could also post the results of:\nconda list\nhere that might help us diagnose the problem.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/uLjL9_Q6F7Y",
    "title": "How to queue multiple models one after another?",
    "original_post": {
      "author": "gprMax-users",
      "date": "Sep 19, 2023, 12:53:23PM",
      "content": "Hello gprMax community,\n\nI would like to know if there is a way to queue multiple models so I can generate multiple models overnight, so I do not have to wait for each to be individually generated. Is there a python script for this?\n\nThanks,\nAlejandro"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/T8N-25uu-xg",
    "title": "input file: can I give material distribution in the form of a matrix",
    "original_post": {
      "author": "Jun Wang",
      "date": "Aug 17, 2023, 2:45:34AM",
      "content": "Hello all,\n\nI have just started using gprMax. Thank you for making this great software.\n\nI am using it now to do FWI(full waveform inversion)  in a complex model. (The problem will be 2D)\n\nI found that I have to name different material and make different objects like box and cylinder in the input file. Since I want to get the detailed and exact knowledge of the unknown geometry model, I wonder if I could get a dielectric distribution of the model, in terms of the grids/cells that gprMax is using to solve the problem.\n\nIn other words, is there any way to give the distribution in the form of a matrix or maybe a text file to create the model in the input file,  so that I can update it in each inversion iteration? \n\nI would really appreciate it if you could give me some advice on solving this problem.\n\nThanks\nCathy"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 11:27:55AM",
        "content": "Hi Cathy,\n\nYou can use the #geometry_objects_read command to import a distribution of materials externally, e.g. from your FWI algorithm , see our docs - https://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yVOk-IDX3Qg",
    "title": "Constructing antenna",
    "original_post": {
      "author": "Atle Eskeland Rimehaug",
      "date": "Jun 29, 2017, 9:48:48AM",
      "content": "Hi!\n\nI'm trying to simulate a so called X4M03 radar from Novelda in gprMax, but I'm not sure how to construct the antenna in the model. Do you have any suggestions for how I might do this? Are the built-in antennas similar enough, or do I have to build it from simpler sources? I've attached the data sheet for the antenna.\n\nBest regards\nAtle Eskeland Rimehaug"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 3, 2017, 6:02:25AM",
        "content": "Hi Atle,\n\nWelcome to the forum!\n\nThe built-in antennas are constructed using the basic object-building commands such as #plate, #box, #edge etc.... So you need to know the physical dimension of your antenna, material properties, and how it is excited (pulse shape, frequencies etc...). With this information you should be able to get an initial model. However, there are going to be details, such as the feeding of the antenna, that are not straightforward to simulate. The process of developing the built-in models is documented in http://dx.doi.org/10.1190/1.3548506 and required an optimisation technique to determine unknown parameters, along with measured data from the real antenna.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Atle Eskeland Rimehaug",
        "date": "Jul 3, 2017, 7:37:51AM",
        "content": "Okay, this seems a bit advanced. I read (on wikipedia) that a directional patch antenna is similar to a dipole antenna with gain 6-9 dBi. Does that mean that I can use the hertzian og magnetic dipole with some adjustments as an approximation?\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_ISHuZhWalo",
    "title": "regarding H5 read",
    "original_post": {
      "author": "savita s",
      "date": "Jan 30, 2022, 12:33:37PM",
      "content": "Hi all\n\nHow to import .out  file in matlab by using h5read function.Clearly explain me each step. Thankyou in advance."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 1, 2022, 11:06:18AM",
        "content": "Just look in the included MATLAB scripts, e.g. https://github.com/gprMax/gprMax/blob/master/tools/MATLAB_scripts/plot_Ascan.m\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7cuzh-8YU40",
    "title": "Central frequency different from the input frequency",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Sep 8, 2020, 9:29:39AM",
      "content": "Dear gprMax developers and users,\n\nI have a model in a homogeneous medium (sand dry). I am using a 200 MHz antenna with a gaussiandot. But, my central frequency that should be 200 MHz is currently 250 MHz. If anyone can help me I appreciate.\n\nI'm attaching the input file, the trace and the frequency sprectum.\n\n\n#title: Sand Dry\n#domain: 10 6.5 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 80e-9\n-------------------------------------------------------------------\n#waveform: gaussiandot 1 2e8 my_gaussiandot\n\n#hertzian_dipole: z 5.0 6.0 0 my_gaussiandot\n\n#rx: 5.0 5.668 0\n\n#src_steps: 0.05 0 0\n\n#rx_steps: 0.05 0 0\n\n-------------------------------------------------------------------\n#material: 2.4725 0.00001 1 0 sand_dry\n-------------------------------------------------------------------\n#add_dispersion_debye: 1 0.0495 21.5e-12 sand_dry\n-------------------------------------------------------------------\n#box: 0 0 0 10 6.5 0.01 sand_dry\n\n\n\nThanks for your attention,\n\nBruno Barauna"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 10, 2020, 10:44:07AM",
        "content": "Dear Bruno,\n\nThe quick answer is that the wave that propagates from the Hertzian dipole will be the derivative of the waveform specified in the waveform command, that is why the frequency content increases.\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "Sep 10, 2020, 10:56:08AM",
        "content": "Dear Craig,\n\nThank you very much for the explanation. I will try to mitigate this problem.\n\nBruno"
      },
      {
        "author": "Bruno Barauna",
        "date": "Sep 15, 2020, 8:45:12AM",
        "content": "Dear Craig,\n\nIf the frequency content increase with derivation, is it possible for me to know exactly how the peak frequency increases with the derivative, so that I can make a frequency compensation?\n\nBruno"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 9, 2020, 7:29:40AM",
        "content": "Dear Bruno,\n\nHave a look at the functions for the waveforms - https://github.com/gprMax/gprMax/blob/master/gprMax/waveforms.py - and you should be able to figure it out analytically. Otherwise you can use the Python plot tools with FFT turned on.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kv4B3fwxhGU",
    "title": "Using variables in a script",
    "original_post": {
      "author": "Anadyr",
      "date": "Dec 9, 2019, 4:29:11AM",
      "content": "Hi guys,\n\nI have problem trying to run a script where I put some dimensions in form of variables.\nHere a minimal example:\n\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n\n#pyhton:\n\nvar_A = 0.240\n\n#domain: var_A 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 12e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#end_python:\n\nAs you can see I create a variable:\n\nvar_A = 0.240\n\nand then used it in the following line:\n\n#domain: var_A 0.210 0.002\n\nBut if I try to run this example I get the following error:\n\nTraceback (most recent call last):\n  File \"/home/xxxx/miniconda3/envs/gprMax/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/xxxx/miniconda3/envs/gprMax/lib/python3.7/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/xxxx/gprMAX/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/home/xxxx/gprMAX/gprMax/gprMax.py\", line 66, in main\n    run_main(args)\n  File \"/home/xxxx/gprMAX/gprMax/gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/home/xxxx/gprMAX/gprMax/gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/home/xxxx/gprMAX/gprMax/model_build_run.py\", line 149, in run_model\n    singlecmds, multicmds, geometry = check_cmd_names(processedlines)\n  File \"/home/xxxx/gprMAX/gprMax/input_cmds_file.py\", line 223, in check_cmd_names\n    raise CmdInputError('Your input file contains an invalid command: ' + cmdname)\ngprMax.exceptions.CmdInputError: Your input file contains an invalid command: #pyhton\n\n\n\nHow can I declare and use variable in a script?\n\nMany thanks in advance"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 9, 2019, 5:58:44AM",
        "content": "Dear Anadyr,\n\nWelcome to the forum!\n\nYou are spelling Python wrongly in your command '#python' not #pyhton' as the error message suggests.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Anadyr",
        "date": "Dec 9, 2019, 7:54:59AM",
        "content": "Hi Craig,\n\nthank you very much for your reply.\n\nI did a very stupid typing error.\n\nBut even fixing the problem I get another error message:\n\nTraceback (most recent call last):\n  File \"/home/xxxx/miniconda3/envs/gprMax/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/xxxx/miniconda3/envs/gprMax/lib/python3.7/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/xxxx/gprMAX/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/home/xxxx/gprMAX/gprMax/gprMax.py\", line 66, in main\n    run_main(args)\n  File \"/home/xxxx/gprMAX/gprMax/gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/home/xxxx/gprMAX/gprMax/gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/home/xxxx/gprMAX/gprMax/model_build_run.py\", line 149, in run_model\n    singlecmds, multicmds, geometry = check_cmd_names(processedlines)\n\n  File \"/home/xxxx/gprMAX/gprMax/input_cmds_file.py\", line 246, in check_cmd_names\n    raise CmdInputError('Your input file is missing essential commands required to run a model. Essential commands are: ' + ', '.join(essentialcmds))\ngprMax.exceptions.CmdInputError: Your input file is missing essential commands required to run a model. Essential commands are: #domain, #dx_dy_dz, #time_window\n\nit complains that some essential commands are missing. But it seems that it is not reconizing the variable Var_A as a variable.\n\nHere the input script:\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n\n#python:\n\n\nvar_A = 0.240\n\n#domain: var_A 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 12e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#end_python:\n\nRegards"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Dec 13, 2019, 10:28:44AM",
        "content": "Hi Anadyr,\n\nThe problem with your code is that you are using \"#python: ...... #end_python:\", but the code inside it is the gprMax format. You need to change the code. This can help you: http://docs.gprmax.com/en/v.3.0.0b20/python_scripting.html\nHere is the modified code that will work for you. The code in blue is the python block, and the one in green is gprMax block.\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n Python code: \n#python:\nvar_A = 0.240\nfrom gprMax.input_cmd_funcs import *\ndomain = domain(0.2 0.2 0.2)\n#end_python:\n Regular gprmax code:\n"
      },
      {
        "author": "Anadyr",
        "date": "Dec 16, 2019, 3:32:26AM",
        "content": "Ok,\n\nthanks for the help. Now I understood, how it works.\n\nWhere do I find, which gprMax commands have an equivalent python command? I found only domain and cylinder"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Dec 16, 2019, 3:35:50AM",
        "content": "check the link in my answer above. the equivalent python commands are available there, not all of them however. but i guess you will have all the ones you need"
      },
      {
        "author": "Anadyr",
        "date": "Jan 13, 2020, 8:04:06AM",
        "content": "Hi guys,\n\nthanks for the help.\n\nAnyway I found out, that using python script one cannot create more than one object in the same script file.\n\nI mean, writing:\n\n...\nbox = box( 0, 0, 0, 0.240, 0.170, 0.002, \"half_space\", \"n\" )\nbox = box( 0.240, 0, 0, 0.12, 0.40, 0.170, 0.002, \"half_space\", \"n\" )\n\n...\n\ndoesn't work. The python gives and error: \"tuple are not possible\"\nAfter trying a little bit I discovered that you have to remove one of the boxes. Only one box is allowed.\n\nAre you aware about it?\n\nRegards"
      },
      {
        "author": "Anadyr",
        "date": "Jan 13, 2020, 8:04:28AM",
        "content": ""
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 13, 2020, 11:45:15AM",
        "content": "Maybe the fact that the second box command has seven coordinate parameters instead of six gives you an error?\n\nAntonis"
      },
      {
        "author": "Anadyr",
        "date": "Jan 14, 2020, 4:51:54AM",
        "content": "No,\n\nthat not the reason. Despite of my tipping mistake trying to copy the programm from one PC to another, the problem persists in any case.\n\nHier a minimal example to see what happens:\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n\n#material: 6 0 1 0 half_space\n\n#python:\nfrom gprMax.input_cmd_funcs import *\n\ndomain = domain( 0.2, 0.2, 0.2 )\n\nbox = box( 0.0, 0.0, 0.0, 0.1, 0.1, 0.1, \"half_space\", \"n\" )\nbox = box( 0.1, 0.0, 0.1, 0.15, 0.1, 0.15, \"half_space\", \"n\" )\n\nfor x in range(0, 8):\n    cylinder(0.02 + x * 0.02, 0.05, 0, 0.020 + x * 0.02, 0.05, domain[2], 0.005, \"pec\" )\n\n#end_python:\n\nremoving one of the boxes it runs good.\nWith both boxes python claims saying:\n\n\n    exec(pythoncompiledcode, usernamespace)\n  File \"<string>\", line 4, in <module>\nTypeError: 'tuple' object is not callable"
      },
      {
        "author": "Shreedhar Todkar",
        "date": "Jan 14, 2020, 7:30:46AM",
        "content": "Hi Anadyr,\n\nThe reason is simple, you have two boxes with the same variable name which is syntactically wrong in any programming language.\nI reused your code as:\n\nbox1 = box( 0.0, 0.0, 0.0, 0.1, 0.1, 0.1, \"half_space\", \"n\" )\nbox2 = box( 0.1, 0.0, 0.1, 0.15, 0.1, 0.15, \"half_space\", \"n\" )\n\nAnd by just replacing the variable name, i got the code running.\n\nPS: Just to be sure, i executed this code: \nbox1 = box( 0.0, 0.0, 0.0, 0.1, 0.1, 0.1, \"half_space\", \"n\" )\nbox2 = box( 0.1, 0.1, 0.0, 0.15, 0.15, 0.1, \"half_space\", \"n\" )\nbox3 = box( 0.15, 0.0, 0.0, 0.2, 0.2, 0.1, \"half_space\", \"n\" )\n\n\nbox4 = box( 0.2, 0.2, 0.0, 0.25, 0.25, 0.2, \"half_space\", \"n\" )\nbox5 = box( 0.25, 0.25, 0.0, 0.3, 0.3, 0.1, \"half_space\", \"n\" )\n\n\nbox6 = box( 0.3, 0.3, 0.0, 0.35, 0.35, 0.1, \"half_space\", \"n\" )\nbox7 = box( 0.35, 0.35, 0.0, 0.4, 0.4, 0.1, \"half_space\", \"n\" )\n\nAnd it works like a charm!"
      },
      {
        "author": "Anadyr",
        "date": "Jan 14, 2020, 7:36:37AM",
        "content": "Hi Shreedhar,\n\nmany thanks for your reply.\n\nBut in any programming language you should be able to do something like:\n\na = 5\n...\na = 7\n...\n\nAnyway thank you.\n\nBye"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 14, 2020, 10:46:12AM",
        "content": "Dear Anadyr,\n\nThe functions that replicate the gprMax hash commands return a tuple in Python - https://www.w3schools.com/python/python_tuples.asp\n\nAs Shreedhar said you must use a different tuple for each command as tuples are '...a collection which is ordered and unchangeable.' This is standard behaviour in Python.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jUVMfrlLfBc",
    "title": "Multiple reflected of GPR signal",
    "original_post": {
      "author": "Da Hu",
      "date": "Nov 14, 2018, 9:48:38AM",
      "content": "Hello, everyone,\n\nI have a question regarding the multiple reflection. When the signal is received by receiver, the signal will go down again and then return back to receiver. This process will continue until the signal is very weak . Is there any options to overcome this? In reality, the signal detect the target and return signal and will not go down again.\n\nThanks,\nDa Hu"
    },
    "responses": [
      {
        "author": "Adam Mangel",
        "date": "Nov 14, 2018, 9:54:47AM",
        "content": "If what you're saying is that in your data you are not observing a multiple, but in your model you are observing a multiple, then this means that your model is not representative. Either you need to increase the electrical conductivity in your model to increase attenuation of the waves. If you're certain that the electrical conductivity is correct, you may need to re-evaluate the dielectric permittivity distribution of your model as only certain conditions can create multiples."
      },
      {
        "author": "Da Hu",
        "date": "Nov 14, 2018, 10:09:26AM",
        "content": "I appreciate your help. Below, I use user_models from GprMax to classify my question. The blue box identifies the signal which is the second reflection from the target. I know I can overcome this by set the #time_window. But my case is to detect the void between the concrete slab. The slab is very thin which can lead to multiple reflections even the time_window is small. \n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 6e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 14, 2018, 10:23:53AM",
        "content": "You question is not clear from your previous post.\n\nWhy do you need to get rid of the multiple?"
      },
      {
        "author": "Da Hu",
        "date": "Nov 14, 2018, 10:34:24AM",
        "content": "Thank you, Adam. For example, when I want to detect the void between the concrete slab. I know the upper boundary, but I cannot identify the lower boundary due to the multiple reflection noise in the upper slab. This is why I want to get rid of the multiple. From the experiment, we don't have this multiple reflection."
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 14, 2018, 10:43:09AM",
        "content": "So you can see a reflection from the concrete/void interface, and you're getting a multiple because this reflection is coming to the surface, reflecting, and then reflecting again at the concrete void interface. \n\nWhat is the size of the void relative to your wavelength?"
      },
      {
        "author": "Da Hu",
        "date": "Nov 14, 2018, 10:48:08AM",
        "content": "Yes, That's correct. I use the default Antenna 1.5 GHz model in gprMax, the resolution is 0.002,  and the void size is not constant it is from 0.1 m to 0.8m. The thickness of concrete slab is 6cm."
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 14, 2018, 10:51:48AM",
        "content": "Okay, so 6 cm of concrete, then a 10-80 cm void, and then concrete again.\n\nIf this geometry is correct with reality, and the dielectric permittivity of the materials is correct, then you need to look into electrical conductivity.\n\nIf you're observing the multiple in the model, but not in your data, it is possible that the electrical conductivity of the reality is higher than that in your model.\n\nIf you increase the electrical conductivity of the concrete it will attenuate the waves further and you may not observe the multiple."
      },
      {
        "author": "Da Hu",
        "date": "Nov 14, 2018, 10:56:05AM",
        "content": "Thank you very much, Adam. I will test the model by changing the material properties. I am just wondering whether we have this type of multiple in reality, if the material properties are the same in the gprMax."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jzhsuHvCWFc",
    "title": "Questions on converting output (HDF5) to common GPR formats",
    "original_post": {
      "author": "Beth",
      "date": "Jul 11, 2018, 8:12:29AM",
      "content": "Dear all,\n\nI used the Matlab script outputfile_converter.m to convert output into DZT format, but when I selected the outputfile, an error popped up:\n\nError using h5readc\nUnable to open file. Filename may be corrupt or have unsupported characters.\n\nError in h5read (line 58)\n[data, var_class] = h5readc(Filename,Dataset,start,count,stride);\n\nAnyone encounter the same issue like me? My file name is 'trial.out' so I think it is supposed to be fine. Thankyou."
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Jul 11, 2018, 8:50:52AM",
        "content": "Hello Beth,\n\nJust put your gprMax .out file in the same folder with the script.\n\nKind regards,\nDimitris"
      },
      {
        "author": "Beth",
        "date": "Jul 11, 2018, 9:31:32AM",
        "content": "Dear Dimitris,\n\nAfter I choose the type of file to be converted, an error poped up:\n\nError in outputfile_converter (line348)\nHDR.antenna = pad (HDR.antenna, 14, 'right');\n\nAlthough there is a window pop up showing the file is exporting, it seems to be frozen. what should I do?\n\nBest Regards,\nBeth"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Jul 11, 2018, 9:52:38AM",
        "content": "Dear Beth,\n\nI dont have any issues with the script. The error is probably due to a different Matlab version.\n\nCan you provide me some info about your Matlab version?"
      },
      {
        "author": "Beth",
        "date": "Jul 12, 2018, 3:09:44AM",
        "content": "Dear Dinitrios,\n\nMy Matlab is R2016a version"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 12, 2018, 4:09:27AM",
        "content": "Hi Beth,\n\nCan you attach the output file you experiencing problems with.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Beth",
        "date": "Jul 12, 2018, 4:40:52AM",
        "content": "Dear Craig\n\nHere are the outputs I am working on.\n\nBest Regards,\nBeth"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 12, 2018, 5:10:24AM",
        "content": "Hi Beth,\n\nI tested both your output files with the converter script, and both worked OK for me (MATLAB R2018a). I suspect, as Dimitris indicated, it is something subtle with the version of MATLAB you are using. Can you copy/paste the exact error message you are getting.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Beth",
        "date": "Jul 12, 2018, 5:18:41AM",
        "content": "Dear Craig,\n\nI really appreciate your help. Here are the error I have:\n\nWarning: Default string does not match any button string name. \nUndefined function or variable 'pad'.\n\nError in outputfile_converter (line 348)\n        HDR.antenna           = pad(HDR.antenna, 14, 'right');\n\nBest Regards,\nBeth"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 12, 2018, 6:06:49AM",
        "content": "Hi Beth,\n\nSo your version of MATLAB (R2016a), does not have support for a lot of string functions. One of those is the pad function which the script uses. I have made a quick modification to the script which should workaround the problem for you. If you pull the latest version of gprMax from GitHub you'll get the updated script. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Beth",
        "date": "Jul 12, 2018, 8:14:59AM",
        "content": "Dear Craig & Dimitrio,\n\nThankyou for your help! It works! I really appreciate your help.\n\nBest Regards,\nBeth"
      },
      {
        "author": "moises stevend meza rodriguez",
        "date": "May 24, 2022, 3:46:59PM",
        "content": "Dear gprMax developers, I am using gprMAX (I'm a new user). I was wondering where I can find that script that you mention, It will definitely help me a lot in my project. This is my email to get in touch: moises....@gmail.com\n"
      },
      {
        "author": "Craig Warren",
        "date": "May 25, 2022, 10:29:33AM",
        "content": "You will find the 'outputfile_converter.m' script in the tools->MATLAB_scripts folder of the gprMax package.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/pKITE3b38Wc",
    "title": "Reflections don´t appear",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Nov 5, 2019, 9:52:19AM",
      "content": "Hello, first thank you very much for this support.\n\nI can't get strong reflections between layers, even when I define abrupt differences between my dielectric constants.\n\nCan anybody help me ?\n\n\n\n#title: Plan-Parallel Layers Model\n#domain: 50 8.5 0.01\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 150e-9\n#num_threads: 16\n\n#material: 4 0 1 0 incosolidated\n#material: 6 0 1 0 sandstone\n#material: 8 0 1 0 limestone\n\n#waveform: ricker 1 2e8 my_ricker\n\n#hertzian_dipole: z 0.1 7.8 0 my_ricker\n\n#rx: 0.432 7.8 0\n# src_steps: 0.15 0 0\n# rx_steps: 0.15 0 0\n\n\n\n\n#box: 0 6 0 50 8 0.01 incosolidated\n#box: 0 3.5 0 50 6 0.01 limestone\n#box: 0 0 0 50 3.5 0.01 sandstone\n\n\n#geometry_view: 0 0 0 50 8.5 0.01 0.01 0.01 0.01 0.01 horizontal_layer_model n\n\nGraciously,\n\nBarauna"
    },
    "responses": [
      {
        "author": "Roshan",
        "date": "Nov 5, 2019, 11:44:14PM",
        "content": "Hi,\nYou can apply some linear or exponential gain to you output file in order to see  the strong reflection."
      },
      {
        "author": "Bruno Barauna",
        "date": "Nov 6, 2019, 6:19:35AM",
        "content": "Thank you Roshan, your idea is really efficient."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 5:56:12AM",
        "content": "Hi Bruno,\n\nAs Roshan indicated you may need to apply a gain function in order to show your targets more clearly. Remember real GPR systems usually apply some sort of gain function when you view the data, and it is also a typical step when processing the data. gprMax just outputs raw electromagnetic field values. The user can then decide to convert to a voltage and apply gain as he/she wishes depending on the modelling scenario/environment.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "Nov 7, 2019, 6:07:25AM",
        "content": "Thank you very much, Craig. I will perform this step in the ReFlex software.\n\nBy the way, I would like to ask you about the Hertzian dipole, is it a 3-D source?\n\nGrateful,\n\nBarauna"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 7, 2019, 6:09:24AM",
        "content": "If the model is 2D then the Hertzian dipole is a line source (you will see that in the messages printed). If the model is 3D then the Hertzian dipole is an infinitesimal dipole or effectively a point source.\n\nCraig"
      },
      {
        "author": "Bruno Barauna",
        "date": "Nov 7, 2019, 6:15:26AM",
        "content": "Thank you, Craig.\n\nBarauna"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/IQdy61jxpX0",
    "title": "Running always stayed in the phase of 'Building main grid:....'",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Mar 20, 2019, 5:26:21PM",
      "content": "My model usually spends 20 mins to run in my computer. However, this time, I only increased the conductivity of the background materials, and did not change anything else. The running stayed at the stage of 'Building main grid: '  for a few hours. It seems running but no any progress, like an endless loop somehow."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 22, 2019, 7:55:11AM",
        "content": "Hi Feng,\n\nChanging the conductivity of materials should not really affect the time to build the model, as the total number of materials should be the same. Can you post your input file so I can look at it?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Feng Zhou",
        "date": "Mar 22, 2019, 12:45:04PM",
        "content": "Dear Craig, \n\nI have found out the reason. When I increased the conductivity, I actually unconsciously improve the number of the materials into a great number, which lets the grid building time so long. I will change the code and see if I can solve the problems.   \n\nThanks\n\nFeng"
      },
      {
        "author": "Feng Zhou",
        "date": "Mar 22, 2019, 3:26:44PM",
        "content": "Hi, Craig, I have fixed the problem. In order to present the gradually changing color in a smooth way (for my fluid transition zone), I add some useless materials between two material. In this way, when you view the geometry with Paraview, you will not see a layered color distribution but a gradual color distribution, which is more realistic and looks more like a fluid transition zone. I understand that the serial numbers of the defined material will decide how their colors are allocated, so I use this skill in my code. However, when I increased the background conductivity, there are a large number of useless materials are defined and this lets the 'gridding building' time so long. I suspect the code spends a lot of time to search the material of each grid among the defined materials, which is the reason of time-assuming. \n\nI decrease the numbers of the useless materials between two used materials. In this case, my simulation is OK. Hope I make it clear."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/daNAJq3FHBw",
    "title": "plot_source_wave",
    "original_post": {
      "author": "Heloisa Moraes",
      "date": "Aug 17, 2018, 12:23:42PM",
      "content": "Hi,\n\nI am using the ricker waveform in my model and I am trying to reproduce the \"Figure 12 Example of the ricker waveform - time domain and power spectrum\" using the \"plot_source_wave\" module. The reason I am trying to do it is that I need to find the highest frequency for different centre frequencies. \n\nI started with the time domain and this was the input:\n\npython -m tools.plot_source_wave ricker -1 1500000000 6 1\n\nThis is what I got:\n\n\nHave I done something wrong, or this is how it's supposed to look?\n\nThank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2018, 12:46:33PM",
        "content": "Hi Heloisa,\n\nThe parameters for the ricker waveform used in Figure 12 are: amplitude of one, centre frequency of 1GHz, time window of 6ns, and a time step of 1.926ps. Therefore the command would be:\n\npython -m tools.plot_source_wave ricker 1 1e9 6e-9 1.926e-12 -fft\n\nNote the -fft flag to get the power spectra.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Heloisa Moraes",
        "date": "Aug 17, 2018, 1:04:01PM",
        "content": "Craig,\n\nThank you so much. Now I got it: \n\n\nI apologize for the mistakes."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FA_OsJBmbAg",
    "title": "No reflection from buried void",
    "original_post": {
      "author": "Stephanie",
      "date": "Nov 6, 2020, 11:03:53PM",
      "content": "Hello!\n\nI've been struggling with a model of a buried void (cylinder), and am not receiving any signal aside from the surface reflection. All my calculations/understanding of the software lead me to believe this should show some kind of reflection, but there is no change in numerical values in the field data across the entire profile.\n\nHoping & wondering if anyone has any insight as to why I'm not seeing any reflection!\n\n#domain: 8.0000 8.0000 8.0000 \n#dx_dy_dz: 0.0600 0.0600 0.0600 \n#material: 4.000 0.000000100 1.000 0.000 lunarbasalt \n#material: 1.000 0.000000000 1.000 0.000 emptyspace \n#waveform: ricker 1.000000 80000000.000000 source_wave \n#hertzian_dipole: z 0.900000 8.000000 4.000000 source_wave \n#rx: 0.9000 8.0000 4.0000\n#rx_steps: 0.1200 0.0000 0.0000\n#src_steps: 0.1200 0.0000 0.0000\n#box: 0.0000 0.0000 0.0000 8.0000 8.0000 8.0000 lunarbasalt\n#cylinder: 4.0000 3.0000 0.0000 4.0000 3.0000 8.0000 1.0000 emptyspace\n#time_window: 0.00000010000000\n\nThank you,\nStephanie"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 9, 2020, 6:51:13AM",
        "content": "Dear Stephanie,\n\nI haven't looked at your input file yet, but if you can attach a screenshot or your geometry and a plot of your output that always helps diagnose any problems.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Stephanie",
        "date": "Nov 9, 2020, 1:05:40PM",
        "content": "Hi Craig!\n\nThanks for your reply, I actually figured out the problem. The wavelength was too long to resolve the cylinder I had defined, and increasing the radius size fixed my problem!\n\nCheers,\nStephanie\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/c0Y_aR27Vls",
    "title": "Scriptig in Python",
    "original_post": {
      "author": "Eddy Revelo Obando",
      "date": "Feb 21, 2018, 10:26:43AM",
      "content": "Hello, I'm new in this forum so I hope to learn much more about gprMax.\nMy question is if there is a way in which I can import the #fractalBox and #soilPeplinski command into the python part of my script in order to changes the values inside a for loop.\n\nBest Regards,\n\nEddy Darío Revelo - Electronic Engineer Universidad de los Andes"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 21, 2018, 12:26:08PM",
        "content": "Hi Eddy,\n\nWelcome to the forum!\n\nTake a look at the example in the docs - http://docs.gprmax.com/en/latest/input.html#snapshot - which demonstrates how to use Python in the input file to script the #snapshot command. You can apply a similar method to use variables to script other commands.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-kflsPWXDAQ",
    "title": "Scale on A-scan View",
    "original_post": {
      "author": "Lucy Buck",
      "date": "Nov 23, 2021, 11:06:22AM",
      "content": "Hello All!\n\nThis is probably a super basic question but I'm getting confused.\n\nWhat are the units along the y axis? I've assumed it was in seconds (so the values shown are nan seconds) but that doesn't make sense when I compare it to GPR data collected in the field.\n\nThank you in advance!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 23, 2021, 12:54:24PM",
        "content": "Hi Lucy,\n\nThe y axis in these plot are field intensities given in V/m for the electric field and A/m for the magnetic field. You will not get any units in your GPR amplitude data unless you are using a pulseEKKO where you do get units in Volts which actually correspond to what the receiving antenna measure at the feed point (i.e. the gap using to sample the electric field). The x axis here is time in seconds. Your GPR data often are plotted as a depth section or radargram or line scan (B-scan) where the vertical axis is in that case time and the colour coding signifies strength.\n\nHope this helps!\n\nAntonis\n\nPS There are no stupid questions.\n\n"
      },
      {
        "author": "Lucy Buck",
        "date": "Nov 26, 2021, 5:05:56AM",
        "content": "Thank you Antonis!\n\nThat's really helped, needed a bit of a sanity check1\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Kjp2qqcY2wU",
    "title": "Does gprMax use second-order or fourth-order accurate derivatives in space and time?",
    "original_post": {
      "author": "Yu LIU",
      "date": "May 17, 2019, 3:29:30AM",
      "content": "I read (Warren et al, 2016) and it said gprMax used second-order. Now three years passed and I'm not sure whether it has changed. The doc also dosen't mentioned this.\nThanks a lot!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "May 17, 2019, 4:40:37AM",
        "content": "No it does not for some good reasons when you consider what happens at material interfaces. If you want to contribute and develop fourth order in space formulation that handles material interfaces properly and efficiently you are very welcomed\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "May 17, 2019, 4:57:27AM",
        "content": "See http://www.gprmax.com/about.shtml - \"The finite difference expressions for the spatial and temporal derivatives are central-difference in nature and second-order accurate.\"\n\nCraig"
      },
      {
        "author": "Yu LIU",
        "date": "May 17, 2019, 5:02:16AM",
        "content": "Thanks a lot for your quick reply! I need to consider more to understand your words and I really appreciate your work!"
      },
      {
        "author": "Yu LIU",
        "date": "May 17, 2019, 5:02:51AM",
        "content": "Many thanks!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1a67aVqHXGg",
    "title": "Source didn't showed in Paraview",
    "original_post": {
      "author": "Rizka Maulina Fitri",
      "date": "Aug 8, 2024, 3:01:42AM",
      "content": "Hi!\n\nCan anyone give me advice why my simulation in Paraview didn't show any source but only receiver in 3D, i attached the image below.\n\nwhilst, the example in youtube from Gprmax account shows both source and receiver showed in 3D form.\n\nit also that doubts me that I can't doing an animation because the source didn't showed up...\n\nplease helpm me"
    },
    "responses": [
      {
        "author": "Rizka Maulina Fitri",
        "date": "Aug 9, 2024, 8:20:53AM",
        "content": "Here I attached the input if someone can help me\n\n#title: Sample 24 - Bscan TWR wood and sphere with z pol\n#domain: 1.0 1.0 1.0\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 12e-9\n\n#material: 3 1e-11 1 0 wood\n\n#waveform: ricker 1 800e6 my_ricker\n#hertzian_dipole: z 0.4 0.1 0.5 my_ricker\n#rx: 0.4 0.2 0.5\n#src_steps: 0 0.01 0\n#rx_steps: 0 0.01 0\n\n#box: 0.4 0 0 0.6 1.0 1.0 wood\n#sphere: 0.8 0.5 0.5 0.1 pec\n#geometry_view: 0 0 0 1.0 1.0 1.0 0.01 0.01 0.01 sample24 n\n#pml_cells: 10\n\n"
      },
      {
        "author": "Jorge Luis Alva Alarcon",
        "date": "Aug 9, 2024, 11:01:43AM",
        "content": "Hello,\nI also was working with source and receivers, but I coun't see them in the Paraview file. I had to add a small sphere just for the Paraview image.\nRegards.\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 9, 2024, 2:13:30PM",
        "content": "Can you try setting the sampling of your geometry view to the same as the model and see if the source then appears in Paraview.\n\nCraig\n\n"
      },
      {
        "author": "Rizka Maulina Fitri",
        "date": "Aug 13, 2024, 12:19:52AM",
        "content": "Hi Craig,\n\nI already change my geometry view parameter same as the model, but it still the same, the source didn't showed in 3D, when i try to hide the pipeline source then showed it again, this message came up in Paraview, I attached the image below.\n\nCan you please help me?\n\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gSyxsK3PH7k",
    "title": "non-regular mesh",
    "original_post": {
      "author": "Nadjib Kemache",
      "date": "Mar 7, 2023, 4:44:41AM",
      "content": "is it possible to create a non-regular mesh in gprMax ?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 7, 2023, 1:43:23PM",
        "content": "gprMax uses the Finite-Difference Time-Domain (FDTD) method and Yee cells. Therefore you have to use a rectangular mesh. A future update will enable sub-gridding of the mesh which will allow you to have specific parts of the mesh at a different spatial resolution from others, for example to have a finer mesh for detailed structures like antennas or where you have areas of high permittivity that require a finer mesh.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/l6CH0e5Nvq0",
    "title": "Quick question gprMax coordinate conventions",
    "original_post": {
      "author": "Shikhar Sharma",
      "date": "Jul 7, 2023, 11:13:18AM",
      "content": "Hi everyone,\n\nSometimes i get confused with the coordinate conventions given in gprMax docs seems to have z axis as depth , but as per the  code and scripts it seems like y axis is depth.\n \nThanks \nShikhar"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 9, 2023, 5:47:34PM",
        "content": "There is no \"depth\" coordinate in gprMax. It uses a right hand cartesian coordinate system. Any axis can be your \"depth\" axis if you need to have one that helps conceptually in your modelling.\n\nHope this helps.\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Uw-gioM7Bjc",
    "title": "oscillating object",
    "original_post": {
      "author": "Roshan",
      "date": "May 29, 2019, 9:06:25PM",
      "content": "Dear friends,\nI want to create an oscillating object which is buried under some dielectric media at a depth of around 1m. I want to perform the A-Scan on this with different central frequency antenna. Can someone please help me on this.\nThanks a lot in advance.\nRoshan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 30, 2019, 4:09:08AM",
        "content": "Roshan,\n\nWe are going to need more detail on this problem to help, e.g. explain what you mean by an oscillating object? Information on obtaining A-scans for dielectric half-spaces are shown in an example - http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder Also read the guidance on GPR modelling - http://docs.gprmax.com/en/latest/gprmodelling.html You should then understand how to simulate sources with different centre frequencies, and half-spaces with different relative permittivities.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KeRUu6tkOJo",
    "title": "water leak",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Mar 26, 2024, 4:02:49AM",
      "content": "Dear All,\n\nI'm trying to model water leak in PE and metalic pipes. \n\nWould you like to give some tips? \n\nKind regards\nNaween"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:44:53AM",
        "content": "Reply in your other thread - https://groups.google.com/g/gprmax/c/5Q8h9VC70yg/m/pTv5vL96AAAJ\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ActTaUTnzYk",
    "title": "How to type complex numbers in gprMax?",
    "original_post": {
      "author": "yan zhang",
      "date": "Feb 25, 2021, 2:50:50PM",
      "content": "Hi, there,\n\nDoes anyone know how to type complex numbers in gprMax?\n\nI have a project of simulating ice/snow penetrating radar and the relative permittivity to be used is a complex number, so how can I type complex number within the command:\n\"#material f1, f2, f3, f4, str\" with f1 being a complex number like 3 - j0.8.\n\nThanks,\nYan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2021, 9:24:33AM",
        "content": "Hi Yan,\n\nProbably a Debye model for complex permittivity will be most suited. You can see how to this dispersive behaviour in the docs at: http://docs.gprmax.com/en/latest/input.html#add-dispersion-debye\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 28, 2021, 11:31:01AM",
        "content": "Hi Yan,\n\nYou cannot. gprMax is an FDTD model and works in time domain directly. Your effective relative permittivity Epsilon_r = 3 - j0.8 is an expression valid for a specific frequency only. If this is the only thing you have then you can convert it to an effective conductivity that you can use as sigma_effective = 0.8 * Epsilon_0 * omega, where Espilon_0 is the permittivity of vacuum and omega = 2*pi*f the angular frequency (f is your frequency) You can use this in gprMax for sigma. But, this is strictly valid of the specific frequency that the original number has been quoted for. If the frequency is not given then that is a mistake of the source of information as this complex representation is only valid for a specific frequency.\n\nAlternatively, if you have a variation of the material property with frequency in the frequency domain you can approximate it with a Debye model (as Craig correctly suggested) or a collection of Debye poles that can then be used in gprMax to model the material behaviour properly in the time domain and for all frequencies of interest. A Debye model has a closed form Fourier pair so, from its parameters in the frequency domain we can get the model in the time domain and vice versa.\n\nHope this helps you and others wondering about the same question.\n\nBest\n\nAntonis\n\n"
      },
      {
        "author": "yan zhang",
        "date": "Mar 15, 2021, 4:40:31PM",
        "content": "Thanks Antonis and Craig!\nThis helps a lot. I think I will use the Debye model for my simulations.\n\nBest regards,\nYan\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-OcHOrFD_OI",
    "title": "How to configure the distance between the transmitting and receiving antennas when using GSSI 1.5GHz model",
    "original_post": {
      "author": "Lun MA",
      "date": "Aug 30, 2018, 1:15:06PM",
      "content": "Hi,\n\nI wonder if I can change the distance between the transmitting and receiving antennas or configure the initial position of the TX and RX separately when using GSSI 1.5GHz model, which can be easily configured when using hertzian_dipole.\nLooking forward to your early reply :)\n\nCheers,#\n\nLun"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 31, 2018, 6:20:35AM",
        "content": "Hi Lun,\n\nYou have access to all the parameters of the antenna model and you can adjust them if you want in the library that build the model. However, in an proper antenna there is structure and the distance is fixed and determined by the actual structure of the antenna. You can view this in Paraview by inspecting the geometry. Moving the source point will produce results that will be wrong for that antenna. If you want to change the separation of the complete Tx and Rx modules then this will result to a new antenna model and needs to be done with consideration of the geometry of the actual antenna elements. Unless you understand how antennas work then this is not an easy task.\n\nAntonis"
      },
      {
        "author": "Lun MA",
        "date": "Aug 31, 2018, 6:48:19AM",
        "content": "Hi Antonis,\n\nMany thanks for your reply. Indeed understanding how antennas work is a difficult task for me because I am not an antenna designer. Actually, I am working on simulating some data with different separation. Previously, I used \"hertzian_dipole\" as the illuminator, and I found when I separate the \"hertzian_dipole\" and \"rx\" too much, even far beyond Fresnel zone, rx can still receive the echoes from the target. Therefore, I suppose I should try a relatively more realistic antenna model to see whether it works. So if you can let me know which part should be reconfigured in the lib file only to change the separation, that would be very helpful.\n\nCheers,\n\nLun"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 31, 2018, 7:28:28AM",
        "content": "Hi Lun,\n\nThe point Antonis makes, is that you cannot simply change the separation between Tx and Rx elements of the antenna, without changing the entire structure.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Lun MA",
        "date": "Aug 31, 2018, 1:32:33PM",
        "content": "Hi Graig,\n\nO, I see. \nCould you please explain that even if I apply the separation as large as several times of Fresenel zone when operating at B-scan model, such as 1.5 meters away, rx can still receive the echoes from the target which is buried below the surface with 0.4-meter depth. BTW, the operating frequency is 1.5GHz, #material: 4.45 0.01 1 0 mll_concerete. Is it because hertzian_dipole doesn't have any antenna pattern but is an all-direction illuminator?\nThanks for your time and help.\n\nCheers,\nLun"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zaNlFiv1_7M",
    "title": "--geometry-fixed vs #geometry_objects_write/read",
    "original_post": {
      "author": "Amin",
      "date": "Jul 22, 2021, 11:45:08AM",
      "content": "Hi Craig,\n\nI now have access to a few NVIDIA A100 Tensor Core GPU 80GB. However, given how pricey these are the computer scientists are recommending optimizing my models such that GPUs are not waiting as much for the CPUs to create the geometry for each trace in my model. My .in files are exactly identical except for the location of the transmitter and receiver (Hertzian dipole). is there a noticeable performance /advantage to --geometry-fixed vs #geometry_objects_write/read?\nIn my tests using the Ascan_2D models, I didn't notice much of a difference.\n\nOnce again thank you for your time and amazing support."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 26, 2021, 7:38:15AM",
        "content": "We have not run detailed benchmarks on this, but my thoughts are the same as yours, that these approaches will be similar in speed - perhaps `--geometry-fixed` maybe slightly faster since it is reading from memory rather than file.\n\nYour point about getting the CPU to build models at the same time they are running on GPU is interesting, and one we need to look at for the future - https://github.com/gprMax/gprMax/issues/280\n\nCraig\n\n"
      },
      {
        "author": "Amin",
        "date": "Jul 26, 2021, 11:05:48AM",
        "content": "Thanks for the response. It seems that our HPC scientist (Bob) is more thinking on the line of fully decoupling the CPU-intensive part and the GPU part. He is now following the GH issue.\n\nCheers,\n\nAmin\n"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Aug 5, 2021, 7:53:47AM",
        "content": "I would like to parttake in this discussion.\nI am currently runnung on GPUs and using the library by calling its API within python, which in return reads the .in file with --geometry_fixed AS WELL as #geometry_objects_read\nThis is needed because I am using a self-generated road model that I wrote through python .\n\nThis causes the system to keep geometry fixed(materials and so on).\nHowever, time inbetween the A-scans is still quite significant.\n\nWould love to see more about this solution\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2021, 10:07:25AM",
        "content": "I'm going to lock this thread and we can keep discussion going on the GitHub issue tracker - https://github.com/gprMax/gprMax/issues/280\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/tP6dg11S5N0",
    "title": "How to add sand and soil in background(for gprMax B-Scan)",
    "original_post": {
      "author": "Faisal Gerdazi",
      "date": "Mar 13, 2019, 9:04:54AM",
      "content": "Hi\n\n can anyone please guide me, how can i add sand and soil in background in my model. Thanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2019, 11:45:56AM",
        "content": "Dear Faisal,\n\nWe will need some more detail on the environment you are trying to simulate in order to help you. Are you considering homogeneous materials? Materials with dispersive properties? What type of soil? What are the properties of the sand? etc...\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Faisal Gerdazi",
        "date": "Mar 14, 2019, 8:16:44AM",
        "content": "Dear Sir,\n Thanks for your reply. I am using following commands to simulate B-Scan. thanks\n\n\n#title: B-scan \n#domain: 0.300 0.260 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3.5e-9\n\n#material: 1 0.01 1 0 half_space\n#material: 6 0.01 1 0 Concrete\n#material: 3 0.01 1 0 my_sand \n#material: 5.8 0 1 0 pvc\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.02 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.300 0.175 0.002 Concrete\n#cylinder: 0.075 0.145 0 0.075 0.145 0.002 0.01 pec"
      },
      {
        "author": "Faisal Gerdazi",
        "date": "Mar 18, 2019, 5:16:57AM",
        "content": "Can anyone please guide me.?"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2019, 5:09:55AM",
        "content": "Faisal,\n\nProviding your input file is useful, but as I said before we need some more info on what you are trying to simulate. I can see you have defined materials for sand and pvc, but you don't use them to build use objects in your model. Have you read the docs on object building, and use of more advanced feature on soil modelling and fractals etc...? There is an example (heterogeneous_soil.in) showing how to use these features. However, I recommend starting with a simpler model first. \n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Mar 19, 2019, 4:22:57PM",
        "content": "It's as easy as writing another box into the model\n\nJust add (with the propper coordinates)\n#box: 0 0 0 0.300 0.175 0.002 my_sand"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/G6wedyrRno8",
    "title": "Question about the direct wave",
    "original_post": {
      "author": "Zoey",
      "date": "Nov 17, 2020, 3:34:00AM",
      "content": "Hello!\n\nI find the direct wave A-scan data is negative value and the waveform has two peaks. But my source is ricker, which just has only one peak. The simulation is as follows. Anyone could solve the two problems? Thank you for your reply!\n\n\n\n\nZoey"
    },
    "responses": [
      {
        "author": "Zoey",
        "date": "Nov 17, 2020, 3:35:58AM",
        "content": "One correct: the source is Gaussian, not ricker. \n"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 17, 2020, 4:57:17AM",
        "content": "Dear Zoey,\n\nWhat propagates from your source is the derivative of the waveform. Therefore if your source waveform is a Gaussian what propagates is the first derivative of the Gaussian which is what you are seeing. Incidentally I would question why you are using a Gaussian waveform unless your have an antenna model with a voltage source.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Zoey",
        "date": "Nov 17, 2020, 7:28:15AM",
        "content": "Dear Craig，\n\nThanks for your answer again. I thought the Gaussian had only one peak that would be easily located. I did not consider the relationship between the waveform and antennas. \n\nBest wishes,\n\nZoey\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/l-eZCC9fFsA",
    "title": "How to set up animation in Paraview?",
    "original_post": {
      "author": "Sony Achmad Louis",
      "date": "Aug 30, 2016, 11:21:58PM",
      "content": "Hello gprMax,\n\nThanks for guiding me recently,\n\nI want to ask a question.\n\nHow to set up paraview to display #snapshot animation seems like example video on youtube?\n\nI couldn't display EM wave propagation in animation (see picture).\n\nI will be grateful if you give me guidance to solve it\n\nSony"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 31, 2016, 3:22:11AM",
        "content": "Hi Sony,\n\nHave you followed the guidance in the documentation - http://docs.gprmax.com/en/latest/output.html#snapshots ?\n\nFrom your screenshot you seem to be trying to visualise the receivers (shows the location of receivers) from your geometry file. You need to select the snapshots in the Pipeline Browser and them choose the field you want to visualise.\n\nCraig"
      },
      {
        "author": "Sony Achmad Louis",
        "date": "Aug 31, 2016, 5:18:14AM",
        "content": "Thank you for replying my message, Mr. Craig.\nIt's really helpful.\n\nI tried to follow the guidance in the documentation.\nI selected the snapshot as shown in picture 1, and choosed E-field -> Z -> Surface.\nAnd I run the animation, but the geometry of object no displayed.\n\n\n\nThen, I opened geometry file (.vti) of snapshot as shown in picture 2.\nThe visualization of #snapshot looks correct, but the scale of color legend is false when I compared to Ez data from matlab.\n\n\n\nAny suggestion what supposed I do to solve it?\nBecause I have no much experience of using Paraview.\n\nSony"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 31, 2016, 10:17:12AM",
        "content": "As you have realised the geometry file and the snapshots of the EM fields are separate. You can overlay them in Paraview as you have done in the 2nd image. You'll need to open the Color Map Editor (View menu) and experiment with the colour scaling to suit what you want to visualise in the snapshots. Have a look at the tips in the docs link from my previous message.\n\nParaview is a powerful visualiser for scientific data and there is lots of info on using it on the web.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qtmbCc9X3u8",
    "title": "Why the same input file with different discretizations gives different outputs?",
    "original_post": {
      "author": "Emiliano",
      "date": "Sep 14, 2017, 11:25:37AM",
      "content": "Hi everyone,\nI have two questions about that results.\nThey are the output files of the same input file, where the only difference is the dimensions of the cells (in one case 0.002, in the other 0.005).\n\n1) The input file with cells of 0.005 gives a maximum of about 190 V/m, while the file with cells of 0.002 gives a maximum of about 78 V/m. 190/78=2.44 is approximately the scale factor of the two dimensions's cells. Why?\n\n2)The two responses seem to be the same, but not exactly: in the end you can see the differences. Why?\n\nThank you for your attention.\n\nBest regards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 14, 2017, 11:59:29AM",
        "content": "Hi Emiliano,\n\nWelcome to the forum! Good question! \n\nIt would be useful to see your actual input file. However, I can make a couple of comments regarding comparing models with different spatial discretisations. \n\nFirstly, you need to ensure the geometry of the two models is the same. Remember your geometry coordinates (in metres) are converted internally to a number of cells (using the spatial discretisation). So the rounding is important to make sure the geometry is the same. \nSecondly, you need to adjust the amplitude of whatever source you are using, so that they are equivalent for each discretisation. For example, if you are using the Hertzian dipole source (see http://docs.gprmax.com/en/latest/input.html#hertzian-dipole) you must adjust the amplitude of the waveform so that the same current density is specified in each model, i.e. if you look at the equation in the Hertzian dipole section of the docs, you should adjust I to give the same J_s in each model.\n\nHope this makes sense. Please ask further if not.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Emiliano",
        "date": "Sep 15, 2017, 5:19:29AM",
        "content": "Thank you for the quick reply.\nIt has been very helpfull to find a solution. Actually I didn't pay attention to the adjustment of the source's amplitude.\n\nRegards\n\nEmiliano"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fzo1Nd234Ec",
    "title": "Velocity dispersion in normal media",
    "original_post": {
      "author": "Yu LIU",
      "date": "Jun 26, 2019, 1:31:39AM",
      "content": "Hi experts,\n\nHope you have a nice week. Recently, one of my young labmate asked me a question which seems to be easy but actually beats me...\n\nWhen he tested two frequency in the same model for simulation, the velocity seems to be different (high velocity is obviously faster). Yet he didn't set any dispersive material. And the two frequency (500 MHz and 1 GHz) are all in the secure platform for GPR modeling.\nThe script is as below:\n------------------------------------------------------------\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 3 1.2 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 2e-8\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 5.0e8 my_ricker\n#hertzian_dipole: z 0.100 1.005 0 my_ricker\n#rx: 0.140 1.005 0                                 \n#src_steps: 0.01 0 0\n#rx_steps: 0.01 0 0\n\n#box: 0 0 0 3.00 1.000 0.002 half_space\n#cylinder: 1.00 0.60 0 1.00 0.60 0.002 0.010 pec\n#cylinder: 2.00 0.40 0 2.00 0.40 0.002 0.010 pec\n------------------------------------------------------------\nThen the figure of results are attached. The first one is result of 1 GHz and the second one is that of 500 MHz.\n\n------------------------------------------------------------\nCould you explain why this would happen? I guess it's an important question but many people don't value.\nThanks in advance for your work and help!\n\nRegards,\nYu"
    },
    "responses": [
      {
        "author": "Yu LIU",
        "date": "Jun 26, 2019, 1:32:41AM",
        "content": "Sorry, the first figure is for 500M and the second is 1G. I put them wrong."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 26, 2019, 9:04:06AM",
        "content": "The velocity is the same. Different central frequency pulses have different time and spatial extent and time delay in being launched in the model, that is obvious from the difference in your direct response. In essence, you need to carefully consider how you measure time and at what  point on your wavelet. You need a time zero adjustment to be able to pick up picks etc. The fact that the velocity is the same is evident by the relative difference in the arrival of the two responses from the cylinders that is pretty much the same in the two scans.\n\nAnotnis"
      },
      {
        "author": "Yu LIU",
        "date": "Jun 27, 2019, 3:29:35AM",
        "content": "Hi Antonis,\n\nGreat thanks to your answer. The 'dt' would be the same value for simulations of two frequencies (dx/dy/dz is the same and only central frequency of the wavelet change). And yes, as you said, the relative difference in the arrival of the two responses, suggests that the velocity would not change. Thanks for this answer!\n\nBut as for the time-zero, I usually assume that the 'time-zero' would also not change with regard to the frequency of wavelet, when I used gprMax. In my understanding, it is the absolute time-zero, which means the time when pulse wavelet was activated. Convetional time-zero correction is for the real data, and is for picking the relative time-zero.\n\nSo now I'm a little confused how gprMax define its time-zero... Sorry for my stupid question...\n\nRegards,\nYu"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 27, 2019, 6:04:44AM",
        "content": "Hi Yu,\n\nIndeed gprMax has an absolute zero clock. However, waveforms start smoothly from zero and attain their maximum with different time delays (you can see this in the implementation and formulas). This is to prevent high frequencies creeping up in the simulation. So, a 500MHz will pick at a different time than a 1GHz pulse. You can use the absolute zero but then you need to be able to accurately pick the onset of reflected energy and not one of the peaks of the reflected wavelet as you normally do. This is not as easy to do as it is not easy to do for real data as well. One of the reasons we do time-zero correction to real data is this one as well. We are picking parts of the wavelet which are easy to distinguish but not at the very start of the reflection. The very start of the reflection for accurate time picking is not necessarily the obvious visible start of the wavelet and it can be a bit earlier. I hope this makes sense and explains the situation better.\n\nBest\n\nAntonis"
      },
      {
        "author": "Yu LIU",
        "date": "Jun 27, 2019, 7:50:54AM",
        "content": "Hi Antonis,\n\nThanks a lot for your wonderful answer!\nIt is good to know and I feel many of the processors didn't pay enough attention to this.\nHope my question and your anwser could help more people!\n\nRegards\nYu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MiBi4dL1q9U",
    "title": "Received power",
    "original_post": {
      "author": "Noushin Khosravi Largani",
      "date": "Nov 14, 2023, 11:20:17AM",
      "content": "Hello gprMax users\nHope you are well. I have a question about calculating the received power. Do you know how can I obtain the received power? Having either electric field or current?\nI would appreciate it if you could answer my question\nThank you\nNoushin"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dvW1WSaynjs",
    "title": "Time step in lossy medium",
    "original_post": {
      "author": "zhang",
      "date": "May 27, 2022, 3:15:20AM",
      "content": "Dear Dr. Craig,\nThe time step in gprMax is related to the vacuum EM wave velocity c, which is a constant. But if we consider the lossy medium and low-frequency cases, the EM wave speed Vem can be calculated with the formula in the following figure. Is it a correct way to use the calculated Vem instead of constant c to increase the time step size and reduce the computation time under the CFL condition?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 28, 2022, 4:39:34PM",
        "content": "Dear Zhang,\n\nAs you say the time step is set using the Courant Friedrichs Lewy (CFL) condition, which is a function of speed of light in vacuum and the spatial resolution of your model. In turn you must select a spatial resolution that adequately resolves targets/features in your model and also mitigates numerical dispersion. It is this latter requirement where we usually try and resolve the smallest wavelength present (highest dielectric) at the highest frequency (not the centre frequency) by about 10 wavelengths - http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretization\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/a96Mf4dBxpc",
    "title": "Background noise (DC-level?) in simulation",
    "original_post": {
      "author": "Sigurd Eide",
      "date": "Jun 5, 2020, 10:53:15AM",
      "content": "Hi everyone, \n  I'm reaching out to see if others also have encountered background noise in simulations. Any experience with workarounds or maybe tips for correcting what i'm doing wrong?\nI'm running gprMax with double precision, but still i encounter a background noise level within the dynamic range I'm interested in.\nAttached is an image of the returned signal levels from a reflector where the noise level is encountered at -97.5dB.\nDepending on the source strength, the noise level changes, but is usually found in-between -80 and -100 dB.\n  The source is an hertzian dipole and simulations is over lossy media, with excitation like:\n#waveform: ricker 1 0.400e9 waveform1\n#hertzian_dipole: y 1 2 3 waveform1 0 1.5e-08 \nreceiver is at same location (and records reasonable values after the source has been shut off).\nHowever, at low signal returns, noise/DC-level dominates the recording. \n  My solution was to apply a dewow to the simulation, removing the constant background value at -97.5dB and giving results comparable to theoretical plane-wave estimates.\n  Any idea if this is a valid work around ?\nOther things I can do to avoid this problem?\n Looking forward to hearing from you!\n\n  Best regards, Sigurd"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 5, 2020, 11:54:22AM",
        "content": "Double precision can be important when signal levels are expected to be very low and much more dynamic range is needed. However, there are other issues that can cause noise. The waveform should be smooth enough and not excite frequencies that are not properly resolved in the model. Even if their amplitude is small it might be important for low level returns. Why, do you need to shut down the source? Have you tried to run the model without stopping the source?\n\nWithout knowing the details is not easy to troubleshoot this. If you have properly changed the precision of the solver to be double and you don't see any different at all then it might be the source or it might mean you have not done this properly (you need to re build gprMax after changing to double precision)\n\nAntonis"
      },
      {
        "author": "Sigurd Eide",
        "date": "Jun 6, 2020, 5:54:29AM",
        "content": "Hi Antonis, thank you for the quick reply!\n\nFrom your answer I understood this was not a common problem, so i did some tests. \n\nNow i realize my problem was the placement of the receiver at the same place as the soft source hertzian dipole. \nMy bad, I thought shutting off the soft source would make it \"transparent\".  \nSo placing them e.g. 10 cells apart gives a dynamic range of -177dB with and without shutting off the source.\n\nThis should give acceptable acquisition geometry when modeling a monostatic antenna, so problem solved. \n\nThanks, Sigurd"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bS5dg4eOuWY",
    "title": "The real measurements and the simulations",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Oct 2, 2019, 8:08:44AM",
      "content": "Hallo everybody,\n\nin want to make the matlabscript for showing the real measurments and the simulations from gprmax in one plott to compare with it.\n\n i need the dataset that we use to plot out the figures with command ((python -m tools.plot_Ascan outputfile )) in command line. \n\ni need the dataset to read it in matlab and then plotting it on my matlab file. i need your help . thank u very much"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 3, 2019, 6:10:13AM",
        "content": "Ahmed,\n\nMATLAB scripts to read and plot from the output files are provided in the gprMax package in the tools->MATLAB_scripts folder.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/opFy6jppbjU",
    "title": "Error: FileNotFoundError: [Errno 2] No such file or directory: 'antenna_like_GSSI_1500_ patterns_E_rxsorigin.txt'",
    "original_post": {
      "author": "Carlos Díaz",
      "date": "Mar 27, 2017, 2:49:44AM",
      "content": "Hi everybody,\n\nI had been simulating the example of antenna patterns, but when I run the command:\n\npython -m user_libs.antenna_patterns.initial_save antenna_like_GSSI_1500_patterns_E.out\n\nIt shows this error messague:\n\nFileNotFoundError: [Errno 2] No such file or directory: 'antenna_like_GSSI_1500_ patterns_E_rxsorigin.txt'\n\nThe file 'antenna_like_GSSI_1500_ patterns_E_rxsorigin.txt' is in the user_models directory\n\nHow can I fixed it?\n\nThanks a lot for your help"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 27, 2017, 6:12:06AM",
        "content": "Hi Carlos,\n\nI think the error is because of a mismatch of filenames between what was written from the input file and what is expected to be read by the 'initial_save' script. If you ran the example then you should have ended up with the following files in the user_models directory:\n\nantenna_like_GSSI_1500_ patterns_E_Er5.out\nantenna_like_GSSI_1500_ patterns_E_rxsorigin.txt\nIf you update the name of the file 'antenna_like_GSSI_1500_ patterns_E_rxsorigin.txt' to 'antenna_like_GSSI_1500_ patterns_E_Er5_rxsorigin.txt' the script should work. I'm going to update the input files and docs so this mismatch shouldn't occur in the future.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Bs-Ptn84iTM",
    "title": "SFCW Bscan simulation on gprmax",
    "original_post": {
      "author": "young he",
      "date": "Feb 22, 2022, 1:58:20AM",
      "content": "Hi all,i'm currently trying to simulate SFCW wave on gprmax and after watching the youtube video on impulse response and introduction to sfcw simulation,I have simulated the Ascan in matlab,but when I simulating the Bscan,I can't get the right result.Figure 1shows the Bscan of ricker signal,figure 2 is the result of SFCW.Can anyone help me?\nThanks in advance,\nBest"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 22, 2022, 7:13:25AM",
        "content": "Your figures use different y-axis and colour scales which is not helpful. I would ask yourself how your SFCW excitation compares to the ricker excitation?\n\nKind regards,\nCraig \n\n"
      },
      {
        "author": "young he",
        "date": "Feb 22, 2022, 8:52:26PM",
        "content": "In rickertestB.txt,i use the ricker signal.When i simulating the SFCW excitations,i just change the ricker to impulse,then to convolution SFCW in matlab，just like do in youtube.I don't know what went wrong.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kFwwC3-6OXw",
    "title": "Forward modeling with external data",
    "original_post": {
      "author": "gsl346...@gmail.com",
      "date": "Dec 16, 2024, 1:49:45AM",
      "content": "Dear gprMax team，\n\nI am currently working on forward modeling of three-dimensional random medium models for GPR based on soil fractals. And I have a question that I hope you can help clarify :\n\nNow , I have a matrix dataset, A.mat, which describes a two-dimensional profile with the dielectric constant of the medium. Additionally, I can derive a corresponding two-dimensional profile of conductivity, stored in B.mat. I would like to know if there is a way to directly apply this data in gprMax for forward modeling simulations ?\n\nI would greatly appreciate any detailed insights or explanations you could provide .\nThank you for your time and support!\n\nBest \n\nShilong"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/bavhcct3ziw",
    "title": "Question about pycuda",
    "original_post": {
      "author": "fegy .q",
      "date": "Feb 19, 2024, 7:49:21AM",
      "content": "Dear gprMax developers,\n\nHello, I have built a 3D model and let it run on a HPC as follows\n       Host: c0ce5c8fc0a7 | RDO KVM | 2 x Intel Xeon Processor (Skylake, IBRS) (40 cores, 80 cores with           Hyper-Threading) | 630GiB RAM | Linux-3.10.0-1160.99.1.el7.x86_64-x86_64-with-glibc2.27\n       GPU(s) detected: 0 - NVIDIA A100-PCIE-40GB, 39.4GiB.\n\nThe 3D model only used about 30GB as\n          Memory (RAM) required: ~27.3GB host + ~27.3GB GPU.\n\nHowever, once the model started running it reported an error\n\nOutput file: /root/Simu/corner1.out\n\nRunning simulation, model 1/74:   1%|█▊                                                                                                                                                  | 64/5398 [00:00<00:31, 171.28it/s]\nTraceback (most recent call last):\n  File \"/root/Simu/BScan.py\", line 16, in <module>\n    api(filename, n=n_times, geometry_only=False,gpu={0})  #geometry_only：仅几何图形\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.7-py3.11-linux-x86_64.egg/gprMax/gprMax.py\", line 108, in api\n    run_main(args)\n  File \"/root/miniconda3/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.7-py3.11-linux-x86_64.egg/gprMax/gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/root/miniconda3/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.7-py3.11-linux-x86_64.egg/gprMax/gprMax.py\", line 232, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/root/miniconda3/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.7-py3.11-linux-x86_64.egg/gprMax/model_build_run.py\", line 373, in run_model\n    tsolve, memsolve = solve_gpu(currentmodelrun, modelend, G)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/miniconda3/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.7-py3.11-linux-x86_64.egg/gprMax/model_build_run.py\", line 640, in solve_gpu\n    pml.gpu_update_magnetic(G)\n  File \"/root/miniconda3/envs/gprMax/lib/python3.11/site-packages/gprMax-3.1.7-py3.11-linux-x86_64.egg/gprMax/pml.py\", line 364, in gpu_update_magnetic\n    self.update_magnetic_gpu(np.int32(self.xs), np.int32(self.xf), np.int32(self.ys), np.int32(self.yf), np.int32(self.zs), np.int32(self.zf), np.int32(self.HPhi1_gpu.shape[1]), np.int32(self.HPhi1_gpu.shape[2]), np.int32(self.HPhi1_gpu.shape[3]), np.int32(self.HPhi2_gpu.shape[1]), np.int32(self.HPhi2_gpu.shape[2]), np.int32(self.HPhi2_gpu.shape[3]), np.int32(self.thickness), G.ID_gpu.gpudata, G.Ex_gpu.gpudata, G.Ey_gpu.gpudata, G.Ez_gpu.gpudata, G.Hx_gpu.gpudata, G.Hy_gpu.gpudata, G.Hz_gpu.gpudata, self.HPhi1_gpu.gpudata, self.HPhi2_gpu.gpudata, self.HRA_gpu.gpudata, self.HRB_gpu.gpudata, self.HRE_gpu.gpudata, self.HRF_gpu.gpudata, floattype(self.d), block=G.tpb, grid=self.bpg)\n  File \"/root/miniconda3/envs/gprMax/lib/python3.11/site-packages/pycuda/driver.py\", line 481, in function_call\n    func._set_block_shape(*block)\npycuda._driver.LogicError: cuFuncSetBlockShape failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuModuleUnload failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuModuleUnload failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuModuleUnload failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuEventDestroy failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuEventDestroy failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuModuleUnload failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuModuleUnload failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n-------------------------------------------------------------------\nAborted (core dumped)\n\nAs a comparison, in the same environment, where I only enlarged the grid to reduce the memory, the model was able to run correctly\n\n    Memory (RAM) required: ~6.9GB host + ~6.9GB GPU\n\nRunning simulation, model 1/74: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 3117/3117 [00:25<00:00, 123.92it/s]\nMemory (RAM) used: ~4.51GB host + ~5.38GB GPU\nSolving time [HH:MM:SS]: 0:00:25.675926\n\nIs it possible that the relevant settings in pycuda are limiting the maximum memory that the model can be run with?\n\nCould you please help me to run larger models using gprMax？\n\nI appreciate all the help I can get on this. Cheers!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 21, 2024, 5:35:14AM",
        "content": "The memory estimate is pretty crude, so it maybe that it is not accurate for your model. Can you share your full input file please? \n\nCraig\n\n"
      },
      {
        "author": "fegy .q",
        "date": "Feb 26, 2024, 9:02:19AM",
        "content": "I am sorry that i have sent too many replies, as this is the first time I use the Google Groups.\n\nThe input file is as follows. Thank you very much for your reply!\n\n#title: pulse B-scan\n#domain: 4.6 3 7\n#dx_dy_dz: 0.005 0.01 0.005\n#time_window: 60e-9\n\n#waveform: impulse 1 1e9 my_wave\n\n#python:\nfrom gprMax.input_cmd_funcs import *\n\nhertzian_dipole('y',0.44+(current_model_run-1)*0.05, 1.1, 0.2,'my_wave')\nrx(0.44+(current_model_run-1)*0.05, 1.3, 0.2)\n\n#end_python:\n\n#material: 6 0.001 1 0 my_wall\n#material: 81 0.001 1 0 human\n#material: 4 0.001 1 0 wood\n\n#python:\nfrom gprMax.input_cmd_funcs import *\n\nbox(0.2, 0, 0.5, 0.44, 3, 6.56, 'my_wall')\nbox(0.44, 0, 1.5, 4.1, 3, 1.7, 'my_wall')\nbox(4.1, 0, 0.5, 4.34, 3, 6.56, 'my_wall')\nbox(1.41, 0, 3.26, 4.1, 3, 3.38, 'my_wall')\nbox(1.52, 0, 6.36, 4.34, 3, 6.56, 'my_wall')\nbox(0.44, 0, 6.36, 0.54, 3, 6.56, 'my_wall')\n\nbox(0, 0, 0, 4.6, 0.1, 7, 'my_wall')\nbox(0, 2.9, 0, 4.6, 3, 7, 'my_wall')\n\n#end_python:\n\n##geometry_view: 0 0 0 4.6 3 7 0.01 0.01 0.01 corner n\n## n_times = 74\n\n"
      },
      {
        "author": "Jakub Vaverka",
        "date": "Jan 31, 2025, 8:41:29AM",
        "content": "Dear gprMax developers and community,\n\nfirst, let me thank you for amazing software, yours big afford and growing community.\n\nI would like to ask about the similar question and if you figured out where was the problem. I obtained identical error message on HPC GPU (linux) when I increase the duration (time window) of the simulation. Our simulation is very robust (we have more than 15 millions iterations but \"only\" 2.52 millions cells). On the other hand, it should be no problem of the insufficient memory. \nSlightly shorter (about 30 %) simulation runs well on NVIDIA Tesla V100 (it takes only 42 % of GPU memory). This slightly longer simulation crashed even on NVIDIA A100. It seems to me that the problem is with the size of the simulation but not in GPU memory.\n\nThe simulation works well on CPU but it is significantly slower.\n\nI have seen several similar questions in this forum but I am not able to figure out any conclusion from the discussions.   \n\nI will be very happy for any suggestion or recommendation.\n\nThank you very much for your time.\n\nBest regards,\n\nJakub Vaverka\nDne pondělí 26. února 2024 v 15:02:19 UTC+1 uživatel fegy...@gmail.com napsal:\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 31, 2025, 8:54:03AM",
        "content": "Hi Jakub,\n\nI must say that I am not the computing expert on the GPU CUDA kernels but I know that for the GPU solver we store the output points in vectors in memory and we do not export them to disk every time step. This obviously increases speed but if the outputs needed are substantial then that might lead to a problem with available memory that we might be missing. If you have 15 million iterations and a lot of output points this might explain running out of memory. \nIf however, the model does not run even for few iterations this points to something else that needs investigation. Sadly, we do not have these GPUs (A100, etc.) to replicate problems with very high needs. I believe it will be something really simple as some variable getting the wrong type that limits the size of a memory allocation but also if your size of output is really big this can cause a problem. \n\nIf Craig gets some time I am sure he will look into this.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "Jakub Vaverka",
        "date": "Jan 31, 2025, 11:20:20AM",
        "content": "Hi Antonis,\n\nThank you for a very fast response.\n\nThe simulation crashes immediately after it starts on GPU. I saw exactly the same report in a different discussion here.\nI include the part of the report where the problem starts. The output file (.out) should be less than 1 MB. We mainly save data in snapshots (cca 100) but their size is independent of the simulation duration (we keep the same number of them with bigger time distance).   \nI have been wondering if there can be a problem with communication between GPU and prepared input data on CPU. We use 180 Hertzian dipoles and each of them have more than 15 millions time points (I think that they are calculated/stored independently even if the waveform is identical).\nThe preparation of the simulation on a single CPU takes thus a long time (few hours). There is above 20 GB of data in CPU memory at the moment when the simulation starts on GPU. I will try some tests to figure out more.\n\nBest regards and happy weekend,\n\nJakub Vaverka\n\n\nDne pátek 31. ledna 2025 v 14:54:03 UTC+1 uživatel Antonis Giannopoulos napsal:\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 31, 2025, 12:47:38PM",
        "content": "Hi Jakub,\n\nDoes the simulation with 180 dipoles and 15 million time points run on GPU for smaller models? gprMax will build the model in the CPU and then transfer arrays that are needed in the GPU. We try not to move stuff whilst the execution of the solving takes place. So, the source waveforms are precomputed and stored in an array. Normally this is not a problem but in your case this can be up to 10.8 gigabytes if you are using 15E6 time points in your waveform. I am not sure why this is the case. If you have so many time steps. If you are using the same  waveform for all sources then we should only store one copy but need to double check. \n\nWe will get to the bottom of this again it will be something simple that we never tested for as we do not have the capacity to do very big models beyond our 24GB capacity of our own GPUs.\n\nBest\n\nAntonis\n"
      },
      {
        "author": "Jakub Vaverka",
        "date": "Feb 3, 2025, 4:24:00AM",
        "content": "Hi Antonis,\n\nYes, it looks that the problem is in the data transfer from CPU to GPU.\nI use the same geometry for all simulations and change the time window (number of iterations). It worked with 9.3 millions time points on NVIDIA Tesla V100. Even when slightly more (23 GB) memory on CPU were used (there were more 3D snapshots).\nIt worked also with only one dipole (9 GB) for 15 million time points. Used CPU memory decreased from 21 GB to 9 GB when only one dipole have been used. I assume that the output vti files are also prepared at the beginning of the simulation on CPU but not transferred to GPU.  \nSo the memory usage on CPU doesn't correspond to data transferred to GPU. I will run some test without snapshots to get better estimation for the critical data volume. I will let you know when the results come.\n\n20 GB is far bellow HPC CPU ans GPU (A100) memory, so it should be no issue of hardware. On the other hand, the similar error on GPU have been mentioned several times in this forum and I suppose that others models have been smaller.\nThis is a little bit confusing.    \n\nBest regards,\n\nJakub\n\n\nDne pátek 31. ledna 2025 v 18:47:38 UTC+1 uživatel Antonis Giannopoulos napsal:\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 4, 2025, 12:03:17PM",
        "content": "Dear Jakub,\n\nCan you pull the latest code from our 'devel' branch and try your examples again. I have made some changes to the way the source waveforms are pre-calculated which may help.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Jakub Vaverka",
        "date": "Feb 10, 2025, 4:19:08AM",
        "content": "Dear Craig,\n\nI am very sorry for my slow response. I have been sick last week.\nI run the GPU simulations on HPC. I will ask them if it is possible to update the code and I will try it.\n\nI have tried some simulations without snapshots (15 million time points). The simulation with one dipole takes cca 0.5 GB of CPU memory, 90 dipoles 10.7 GB, and 180 dipoles 21.3 GB. The last one crashed.\nThe preparation time on CPU before simulation started on GPU takes cca 1 minute for 1 dipole, 1.5 hours for 90 dipoles, and more than 3 hours for 180 dipoles. All dipoles have identical waveform (Gaussian). \nThe simulation with one dipole runs well also for 30 million time points (the problem is not in the number of time steps).\n\nBest regards,\n\nJakub\n\n\n\nDne úterý 4. února 2025 v 18:03:17 UTC+1 uživatel Craig Warren napsal:\n"
      },
      {
        "author": "Jakub Vaverka",
        "date": "Feb 17, 2025, 9:35:12AM",
        "content": "Dear Craig and Antonis,\n\nI have tried the gprMax from 'devel' branch (548a0a5) on HPC (H100 and A100). The preparation took some time. \nThe initial CPU preparation phase is now much shorter (less than 1 minute instead of cca 80 minutes). The problems with the \"bigger\" simulations is still the same. \nThe \"shorter\" simulations runs well as before (only the data in the output vti files are now suspicious).\nI am not sure if the output report can help you. Here are two of them for 3.1.7 and the \"devel\" versions.\nLet me know if there is something I can try for the problem identification.\n\nBest regards,\n\nJakub Vaverka\n\n\n*************************************************gprMax3.1.7.************************************\n\nRunning simulation, model 1/1:   0%|                                            | 0/15577675 [00:00<?, ?it/s]\nRunning simulation, model 1/1:   0%|                                | 69/15577675 [00:00<5:23:19, 803.00it/s]Traceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/hpc2n/eb/software/gprMax/3.1.7-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/hpc2n/eb/software/gprMax/3.1.7-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/gprMax.py\", line 69, in main\n    run_main(args)\n  File \"/hpc2n/eb/software/gprMax/3.1.7-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/gprMax.py\", line 191, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/hpc2n/eb/software/gprMax/3.1.7-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/gprMax.py\", line 232, in run_std_sim\n\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/hpc2n/eb/software/gprMax/3.1.7-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/model_build_run.py\", line 373, in run_model\n\n    tsolve, memsolve = solve_gpu(currentmodelrun, modelend, G)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/hpc2n/eb/software/gprMax/3.1.7-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/model_build_run.py\", line 640, in solve_gpu\n    pml.gpu_update_magnetic(G)\n  File \"/hpc2n/eb/software/gprMax/3.1.7-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/pml.py\", line 364, in gpu_update_magnetic\n\n    self.update_magnetic_gpu(np.int32(self.xs), np.int32(self.xf), np.int32(self.ys), np.int32(self.yf), np.int32(self.zs), np.int32(self.zf), np.int32(self.HPhi1_gpu.shape[1]), np.int32(self.HPhi1_gpu.shape[2]), np.int32(self.HPhi1_gpu.shape[3]), np.int32(self.HPhi2_gpu.shape[1]), np.int32(self.HPhi2_gpu.shape[2]), np.int32(self.HPhi2_gpu.shape[3]), np.int32(self.thickness), G.ID_gpu.gpudata, G.Ex_gpu.gpudata, G.Ey_gpu.gpudata, G.Ez_gpu.gpudata, G.Hx_gpu.gpudata, G.Hy_gpu.gpudata, G.Hz_gpu.gpudata, self.HPhi1_gpu.gpudata, self.HPhi2_gpu.gpudata, self.HRA_gpu.gpudata, self.HRB_gpu.gpudata, self.HRE_gpu.gpudata, self.HRF_gpu.gpudata, floattype(self.d), block=G.tpb, grid=self.bpg)\n  File \"/hpc2n/eb/software/PyCUDA/2024.1.2-gfbf-2023b-CUDA-12.4.0/lib/python3.11/site-packages/pycuda/driver.py\", line 481, in function_call\n\n    func._set_block_shape(*block)\npycuda._driver.LogicError: cuFuncSetBlockShape failed: an illegal memory access was encountered\n\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuModuleUnload failed: an illegal memory access was encountered\n...\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n\n\n*************************************************gprMax_devel-548a0a5************************************\nModel 1/1 solving on b-cn1610.hpc2n.umu.se with CUDA backend using Device 0: NVIDIA A100 80GB PCIe\n\n|--->:   0%|                                      | 0/15577675 [00:00<?, ?it/s]\n|--->:   0%|                         | 69/15577675 [00:00<40:46:10, 106.14it/s]Traceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.cli()\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/gprMax.py\", line 218, in cli\n    results = run_main(args)\n              ^^^^^^^^^^^^^^\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/gprMax.py\", line 245, in run_main\n    results = context.run()\n              ^^^^^^^^^^^^^\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/contexts.py\", line 89, in run\n    model.solve(solver)\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/model_build_run.py\", line 392, in solve\n    solver.solve(iterator)\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/solvers.py\", line 113, in solve\n    self.updates.update_magnetic_pml()\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/updates.py\", line 673, in update_magnetic_pml\n    pml.update_magnetic()\n  File \"/proj/nobackup/hpc2n2024-132/easybuild/software/gprMax/devel-548a0a5-foss-2023b-CUDA-12.4.0/lib/python3.11/site-packages/gprMax/pml.py\", line 566, in update_magnetic\n    self.update_magnetic_dev(\n  File \"/hpc2n/eb/software/PyCUDA/2024.1.2-gfbf-2023b-CUDA-12.4.0/lib/python3.11/site-packages/pycuda/driver.py\", line 481, in function_call\n\n    func._set_block_shape(*block)\npycuda._driver.LogicError: cuFuncSetBlockShape failed: an illegal memory access was encountered\n\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuModuleUnload failed: an illegal memory access was encountered\n...\nPyCUDA WARNING: a clean-up operation failed (dead context maybe?)\ncuMemFree failed: an illegal memory access was encountered\n-------------------------------------------------------------------\nPyCUDA ERROR: The context stack was not empty upon module cleanup.\n-------------------------------------------------------------------\nA context was still active when the context stack was being\ncleaned up. At this point in our execution, CUDA may already\nhave been deinitialized, so there is no way we can finish\ncleanly. The program will be aborted now.\nUse Context.pop() to avoid this problem.\n\n\nDne pondělí 10. února 2025 v 10:19:08 UTC+1 uživatel Jakub Vaverka napsal:\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 17, 2025, 11:27:09AM",
        "content": "Dear Jakub,\n\nSee this recently resolved issue on our GitHub issue tracker - https://github.com/gprMax/gprMax/issues/469\n\nFor very big models it looks like we are overflowing the index variable used to index our arrays in CUDA. They are currently cast as 'int's so may need to be re-case as 'long'.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "Jakub Vaverka",
        "date": "Feb 19, 2025, 4:09:07AM",
        "content": "Dear Craig,\n\nyes, this could be it. Thank you.\nIt's great that you've identified the problem.\n\nBest regards,\n\nJakub\n\nDne pondělí 17. února 2025 v 17:27:09 UTC+1 uživatel Craig Warren napsal:\n"
      },
      {
        "author": "Jakub Vaverka",
        "date": "Feb 24, 2025, 9:36:24AM",
        "content": "Dear Craig,\n\nI can confirm that modifying of knl_common_base.tmpl worked!\n\nI have one more question related to snapshots. Is it possible that there is a similar problem? There is no error message and vti files are successfully created but they seems to be empty. Data in the output file (rx) seams to be ok.\n\nBest regards,\n\nJakub Vaverka\n\nDne středa 19. února 2025 v 10:09:07 UTC+1 uživatel Jakub Vaverka napsal:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nQswkyZLLaE",
    "title": "Fractal Dimension Impact",
    "original_post": {
      "author": "Diksha Sharma",
      "date": "Jul 22, 2024, 8:01:53AM",
      "content": "Dear Members,\n\nWhen we use fractals in gprmax , how the fractal dimension impact the surface roughness?\n\nI ran the simulation for two dimension one for D=0.5 and other for D=2.5 and it shows that as dimension increases the surface become smooth !!\n\nis this the correct impact of dimension on our surface boundary ?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/R5ZfQclgFQM",
    "title": "Calling Python from an .in file written and called by... python",
    "original_post": {
      "author": "Paul-Benjamin Riedel",
      "date": "Aug 5, 2021, 9:35:59AM",
      "content": "I am using the library from python to generate B-Scans\n\nI do this because I need to generate random model structures as well as materials through python libraries and I am doing so by saving them as hdf5 and importing them.\n\nhere is an example: (this is all in a python script):\n\ninfile='myinfile.in'\nwith open(infile, 'w') as the_file:\n    the_file.write('#title: randomly generated model \\n')\n    the_file.write('#domain: {} {} {}\\n'.format(dimX,dimY,dz))\n    the_file.write('#dx_dy_dz: {} {} {}\\n'.format(dx,dy,dz))\n    the_file.write('#time_window: {}\\n'.format(t))\n    the_file.write('#waveform: ricker 1 1.5e9 my_ricker\\n')\n    the_file.write('#hertzian_dipole: z {} 2.5 0 my_ricker\\n'.format(start_tx))\n    the_file.write('#rx: {} {} 0\\n'.format(start_rx,antenna_y))\n    the_file.write('#src_steps: {} 0 0\\n'.format(antenna_step))\n    the_file.write('#rx_steps: {} 0 0\\n'.format(antenna_step))\n    the_file.write('#geometry_objects_read: 0 0 0 {} {}\\n'.format(modelfile,materialfile))\nmodel_runs=int((dimX-start_rx)/antenna_step)-8\ngprMax(infile,n=model_runs,gpu=[1],geometry_fixed=True)\nfrom tools.outputfiles_merge import get_output_data\ndata,dt=get_output_data(infile.split('.in')[0]+'_merged.out',rxnumber=1,rxcomponent='Ez')\n\n\n\nThings like antenna_step, t and so on are variables within my script.\n\nit works fairly well, even though not quite fast as it spends like 4 to 10 seconds inbetween model runs doing... I don't know what.\nWith 20 ns running time per A-Scan a full run of 512 steps takes about an hour on a Gforce 2080RTX ti with 12 GB of Ram\n\nNow.\n\nI need to change antenna positions ina  non-linear fashion in the 2d-spaces y-Direction(up and down)\n\nI can't for the life of me figure this out.\n\nI tried it like so:\n\nwith open(infile, 'w') as the_file:\n    the_file.write('#title: B100 like randomly generated road \\n')\n    the_file.write('#domain: {} {} {}\\n'.format(dimX,dimY,dz))\n    the_file.write('#dx_dy_dz: {} {} {}\\n'.format(dx,dy,dz))\n    the_file.write('#time_window: {}\\n'.format(t))\n    the_file.write('#waveform: ricker 1 1.5e9 my_ricker\\n'.format(t))\n   # the_file.write('#hertzian_dipole: z {} 2.5 0 my_ricker\\n'.format(start_tx))\n   # the_file.write('#rx: {} {} 0\\n'.format(start_rx,antenna_y))\n    the_file.write('#src_steps: {} 0 0\\n'.format(antenna_step))\n    the_file.write('#rx_steps: {} 0 0\\n'.format(antenna_step))\n    the_file.write('#python:\\n')\n    the_file.write('from gprMax.sources import HertzianDipole as HDP\\n')\n    the_file.write('from gprMax.receivers import Rx as rx\\n')\n    the_file.write('import math\\n')\n    the_file.write('r=0.25\\n')\n    the_file.write('theta=(2*math.pi)/number_model_runs*current_model_run\\n')\n    the_file.write('x = {}+current_model_run*{}\\n'.format(start_tx,antenna_step))\n    the_file.write('y = r*math.sin(theta)+0.5\\n')\n    the_file.write(\"HDP( 'z', x, 2.5+y, 0, 'my_ricker')\\n\")\n    the_file.write(\"rx( {}, {}+y, 0)\\n\".format(start_rx+antenna_step,2.5))\n    the_file.write('#end_python:\\n')\n\n\n\n\nthe error I get is\n\nTraceback (most recent call last):\n  File \"generate_random_road_2ndgpu_sinus_move.py\", line 337, in <module>\n    gprMax(infile,n=model_runs,gpu=[1],geometry_fixed=True)\n  File \"/home/riedel/Projects/gprMax/gprMax/gprMax.py\", line 105, in api\n    run_main(args)\n  File \"/home/riedel/Projects/gprMax/gprMax/gprMax.py\", line 188, in run_main\n    run_std_sim(args, inputfile, usernamespace)\n  File \"/home/riedel/Projects/gprMax/gprMax/gprMax.py\", line 229, in run_std_sim\n    run_model(args, currentmodelrun, modelend - 1, numbermodelruns, inputfile, modelusernamespace)\n  File \"/home/riedel/Projects/gprMax/gprMax/model_build_run.py\", line 134, in run_model\n    processedlines = process_python_include_code(inputfile, usernamespace)\n  File \"/home/riedel/Projects/gprMax/gprMax/input_cmds_file.py\", line 72, in process_python_include_code\n    exec(pythoncompiledcode, usernamespace)\n  File \"<string>\", line 8, in <module>\nTypeError: __init__() takes 1 positional argument but 6 were given\n\n\nThe generated .in file is this:\n#title: B100 like randomly generated road\n#domain: 51.4 3 0.005\n#dx_dy_dz: 0.005 0.005 0.005\n#time_window: 2e-08\n#waveform: ricker 1 1.5e9 my_ricker\n#src_steps: 0.1 0 0\n#rx_steps: 0.1 0 0\n#python:\nfrom gprMax.sources import HertzianDipole as HDP\nfrom gprMax.receivers import Rx as rx\nimport math\nr=0.25\ntheta=(2*math.pi)/number_model_runs*current_model_run\nx = 0.5+current_model_run*0.1\ny = r*math.sin(theta)+0.5\nHDP( 'z', x, 2.5+y, 0, 'my_ricker')\nrx( 0.65, 2.5+y, 0)\n#end_python:\n#geometry_objects_read: 0 0 0 /home/riedel/Projects/gprMax/user_models/test/random_road_0.1m0.005v499/random_road_long499.h5 /home/riedel/Projects/gprMax/user_models/test/random_road_0.1m0.005v499/materials_499.txt"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 6, 2021, 9:55:35AM",
        "content": "A couple of quick points that may help:\n\nSince you are controling the coordinates of the source and receiver yourself in your Python script you don't need the #src_steps and #rx_steps commands.\nYou should use the 'current_model_run' variable in your Python script to assist with moving the source/receiver. See the example in the docs - http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model\nYou can skip the step of writing a .in file and just pass a file stream object () directly as an argument to the gprMax run API in your Python script, e.g.\nfrom io import StringIO as _StringIO\n\nclass StringIO(_StringIO): \n    name = ''\n\ncmds = [f'#title: {model}', '#messages: y', '#domain: 0.600 0.600 0.005', '#dx_dy_dz: 0.005 0.005 0.005', '#time_window: 8e-9', '#waveform: gaussiandotnorm 1 1e9 mypulse', '#hertzian_dipole: z 0.100 0.500 0 mypulse']\n\nfilename = 'test.in' \nfileobject = StringIO('\\n'.join(cmds)) \nfileobject.name = filename\ngprMax(fileobject, n=10)\n\nKind regards,\nCraig\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/0Lgs6kbQ7So",
    "title": "Changing antenna direction",
    "original_post": {
      "author": "Hengameh Noshahri",
      "date": "Apr 6, 2021, 8:59:24AM",
      "content": "Hello everyone,\n\n I want to simulate a source which moves in a changing direction; for example, for a circle, I have the following code:\n\n#python:\nfrom gprMax.input_cmd_funcs import *\nimport math\nr = 0.130\ntheta = (2*math.pi)/number_model_runs*current_model_run\nxTx = r*math.cos(theta)+0.5\nyTx = r*math.sin(theta)+ 0.5\nzTx = 0.1\nxRx = r*math.cos(theta)+ 0.5\nyRx = r*math.sin(theta)+ 0.5\nzRx = 0.1\nhertzian_dipole(\"z\", xTx, yTx, zTx, \"my_ricker\")\nrx(xRx, yRx, zRx)\n#end_python:\n\nIs this form of using hertzian_dipole correct? and do you have an advice on how to difine the polarization in more complex paths like an oval?\n\nI appreciate your help.\nbests,\nHengameh"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 6, 2021, 10:29:44AM",
        "content": "Dear Hengamesh,\n\nYes, in principal, your approach looks fine. I would be a little careful with terminology - source polarisation in gprMax is defined relative to the grid direction, e.g. can only be x, y, or z. What you are doing is moving the source along a defined path where its polarisation remains the same (z in this case), but how it is oriented relative to your target object may of course change according to the path. You can implement as complex as a path as you can define in your Python block in your input file.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/DXf2-KTD1C4",
    "title": "difficulty in installing gprMax",
    "original_post": {
      "author": "Mohammed Mustapha",
      "date": "Jun 4, 2017, 2:20:12PM",
      "content": "I am trying to install gprMax. I have reached the stage of installing Microsoft Visual C++ Build Tools, but keep on receiving the message that \"A SETUP PACKAGE IS EITHER MISSING OR DAMAGE\" . Please help"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 5, 2017, 8:28:38AM",
        "content": "Hi Mohammed,\n\nDid you not resolve this problem from before? - https://groups.google.com/d/msg/gprmax/fGyz29OtYBE/DsrUM70aCQAJ\n\nI'm afraid we don't have the resource to support troubleshooting issues surrounding installing the tools required with gprMax. I suggest you do a bit of searching yourself, if you haven't already done so. Or perhaps someone on the forum will help if they have seen this problem before.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7XTAw8cI7Fw",
    "title": "Mysteries of HDF files",
    "original_post": {
      "author": "Brad Artman",
      "date": "Sep 6, 2022, 2:30:08PM",
      "content": "New to HDF and this package, I really wanted to know just what was in the .out file.\nIf you know the attr you want, it's easy to get, but finding what's available was nicely solved at :   \nhttps://stackoverflow.com/questions/61133916/is-there-in-python-a-single-function-that-shows-the-full-structure-of-a-hdf5-fi\n\nor:\nTry using nexuformat package to list the structure of the hdf5 file.\nInstall by pip install nexusformat\nimport nexusformat.nexus as nx \nf = nx.nxload(‘myhdf5file.hdf5’) \nprint(f.tree)"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 8, 2022, 3:52:35AM",
        "content": "You'll also find the structure of the HDF5-based gprMax output file in our docs - https://docs.gprmax.com/en/latest/output.html#file-structure\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/T8E9fnxKBEY",
    "title": "interface .in file with python optimisation results",
    "original_post": {
      "author": "Rakeeb Jaufer",
      "date": "Sep 25, 2019, 10:13:39AM",
      "content": "Hi all \n\nI would like to interface the GPRMax with another python codes which reads the simulation results [output file] and  perform some estimation to invert dielectric parameters.  \n\nAfter each estimation, i want to update and iterate the dielectric parameter values in the GPRMax input file automatically until i obtain the global minima  in my optimisation algorithm.  \n\nI m wondering how  could i modify the .in script automatically in the loop for this purpose. \nplease can some one give me an idea, if you have done the same before. \n\nBest regards\nRakeeb \n\n#gprmax"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 3, 2019, 6:09:04AM",
        "content": "Dear Rakeeb,\n\ngprMax can be called in a loop within a Python script. All the tools are part of the package, you just have to look at the code. You could write a script that generates input files (or even streamed file object if you don't want to write a new input file every time), calls gprMax, then processes the output files. Obviously you will need some knowledge of Python to do this. For example, gprMax can be called in a Python script using:\n\nfrom gprMax.gprMax import api as gprMax\nfrom tools.outputfiles_merge import get_output_data\n\n# for some loop\n# Create/update input file (or file object) with dielectric parameters\n# Run gprMax\ngprMax(filename, n=traces)\n# Read output file and use in whatever way to calculate updated dielectric parameters\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FGS5ieOQqLc",
    "title": "How to use #soil_peplinski without #fractal_box",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Jul 15, 2017, 12:06:20PM",
      "content": "Hi all,\n\nCan I use the #soil_peplinski mixture model for a normal geometry object e.g. #box, #cylinder etc? If not, how can I model a mixture of sand and clay with 5% water content in a box?\n\nThanks\nIkechukwu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 17, 2017, 11:43:49AM",
        "content": "Hi Ikechukwu,\n\nThe #soil_peplinski mixture model command should be used with the #fractal_box command. This will create the desired volume (box) with fractal distributed properties according the Peplinski mixture you have specified.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Ikechukwu",
        "date": "Jul 18, 2017, 5:19:25AM",
        "content": "Thanks Craig !"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZkIdwKe3CZg",
    "title": "HDF5 to gprMax",
    "original_post": {
      "author": "Sepideh Harajchi",
      "date": "May 4, 2024, 2:07:01AM",
      "content": "Hi everyone,\nI want to GIVE my own geometry as a HDF5 to gprMax. I got the output of the simple cylinder model and opened the file in HDFView. Is there any document about knowing this structure? I prefer to prepare my geometry file without python or matlab codes and rather with HDFView. Is it possible?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 8, 2024, 9:26:09AM",
        "content": "There are details on how to import your own geometry into gprMax in the docs - https://docs.gprmax.com/en/latest/input.html#geometry-objects-read You have exported geometry from gprMax which is why you see the extra arrays. This can be imported back into gprMax but we do not recommend modifying these arrays outside of gprMax as they are created and used internally. You can look into the source code if you want to see what they do.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7b9PFNFmuyA",
    "title": "Regarding output",
    "original_post": {
      "author": "savita K.B",
      "date": "May 10, 2021, 12:58:27PM",
      "content": "Hi\n I am not able to get the output for this code.It showing errors.\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\nOUTPUT"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 4:16:11PM",
        "content": "Most likely you have not created enough A-scans to generate a B-scans or have not merged the A-scans together properly into a B-scan. Please follow the examples in the docs carefully!\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CUNdmfyO2iI",
    "title": "Installation Problem (Solving Environment Failed)",
    "original_post": {
      "author": "Doreen",
      "date": "Mar 8, 2019, 1:55:39AM",
      "content": "Hello! I have a problem regarding the command: conda env create -f conda_env.yml\n\nI get this error:\n\nCan you tell me how to solve it? Thank you!"
    },
    "responses": [
      {
        "author": "Naman Singh Chikara",
        "date": "Mar 8, 2019, 4:06:21AM",
        "content": "Hello Doreen,\nBlas[openBlas] is a gprMax dependency, and for some reason your system isn't able to download and install it automatically, here's what I suggest you: Install it manually, that being said, goto  sourceforge.net/projects/openblas/files/  download it and then install it manually after that, try to run `conda env create -f conda_env.yml` in the same directory. Do let me know if you're still unable to pull this through.\n\nRegards,\nNaman Chikara"
      },
      {
        "author": "Doreen",
        "date": "Mar 10, 2019, 11:49:24PM",
        "content": "Hello Naman!\n\nDo I install it through the command prompt also? Sorry, I really have no idea."
      },
      {
        "author": "Craig Warren",
        "date": "Mar 11, 2019, 11:33:41AM",
        "content": "There is currently an issue because the OpenBlas dependency is not easily available for Windows. We are looking to see if there is an alternative to keep things easily installable via conda.\n\nCraig"
      },
      {
        "author": "Doreen",
        "date": "Mar 11, 2019, 9:19:35PM",
        "content": "Thank you, Craig!\n\nI hope this can be resolved soon."
      },
      {
        "author": "Naman Singh Chikara",
        "date": "Mar 12, 2019, 5:47:43AM",
        "content": "Hello Doreen,\n\nTry this, \n\nUninstall Miniconda3 from your system\nInstall Miniconda3-latest-Windows-x86 (from the hyper-link I provided here, Important) \nOpen Command prompt and change directory to gprMax folder you pulled earlier.\nDownload conda_env.yml (again from the hyper-link I provided here, Important)\nMove conda_env.yml you just downloaded to gprMax's folder, i.e replace conda_env.yml file\nRun \nconda update conda\nconda env create -f conda_env.yml\nconda config --append channels conda-forge\nconda install https://conda.anaconda.org/conda-forge/win-32/blas-1.0-openblas.tar.bz2\npip install terminaltables\npip install tqdm\nconda activate gprMax\npython setup.py build\npython setup.py install \n\n\nNow to test if software has been successfully installed try running the example program by running commands:\npython -m gprMax user_models/cylinder_Ascan_2D.in\npython -m tools.plot_Ascan user_models/cylinder_Ascan_2D.out\n\nKeep me posted,\nNaman Chikara"
      },
      {
        "author": "Doreen",
        "date": "Mar 12, 2019, 9:50:10PM",
        "content": "Hello!\n\nI tried it but gprmax is not working.. :("
      },
      {
        "author": "Naman Singh Chikara",
        "date": "Mar 13, 2019, 4:45:11AM",
        "content": "Try first activating the virtual env using command:\nactivate gprMax\n\nAnd then running command:\n\npip install terminaltables"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2019, 4:53:35AM",
        "content": "I am not at my Windows test machine today, so can't look at this directly. However, I suspect your environment has not installed the 2 packages that are required via pip. So as @Naman suggests, with the environment activated run:\npip install terminaltables\npip install tqdm\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Doreen",
        "date": "Mar 13, 2019, 5:15:12AM",
        "content": "Hello Craig and Naman!\n\nI forgot to activate gprMax. I am sorry for the confusion. \n\nNaman's suggestion on how to install gprMax for Windows works for me. I will be trying the other examples included in the package as well. \nThank you very much for your help."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/cDODqlyd3jE",
    "title": "Re: Phase of the reflected wave, multiple waves of the reflected wave at the bottom of the cavity",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Ángel Rodríguez",
        "date": "Dec 4, 2020, 2:24:26PM",
        "content": "I find this comment/question quite interesting, and I anticipate that I've not the answer to it, however, I would like to add furhter comments which might help others to find out the correct explanation.\n\nA) According to the answer of Craig to Zoey it is the derivative of the pulse what propagates\n\n\nIt seems that by integration the Richer pulse appears again. It is negative though as the input, therefore the reflection coefficient of the top of the cavity is positive. We see negative though.\n\nB) gprMax manual reads that shapes are approximated to dx, dy and dz\n\n\n\nI think that curved shapes should be handled with care within gprMax\n\nC) I can not identify clearly the bottom of the cavity either. It seems as if there are two events there plus the multiple of the top. It seems that all the events have to be shifted 0.732 ns up so that the top of the cavity is where expected (about 4.622 ns)\n\nIhave tried to follow the propagation of the Ez field with snapshots, but I've failed. It runs  but I do not see anything.\n\nPerhaps we might have to run the script by replacing the sphere by a box of the same heigth dimensions and check there if the top, bottom and multiples are clearly identified. I'll get back to it when I have some time available.\n\nBest regards\n\nAngel"
      },
      {
        "author": "Christian Pigot",
        "date": "Dec 13, 2020, 8:19:58PM",
        "content": "Hello\n\nPersonally I would suggest starting by making sure you simulate properly and understand the system in more simple conditions: \n- Simplify the structure by going to a rectangular cavity of wide horizontal extension (3 time the size of the wavelength of the central frequency)\n- Increasing the size of the cavity, to make sure the upper and bottom reflection are clearly separated. \n- Increase the ground/target distance to avoid mixing ground and target reflection\nOnce sure of your knowhow and knowledge, step by step move toward a more realistic structure\n\nGood luck, keep us updated\n\nChristian\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/CqP-fYV2aHw",
    "title": "Finding the surface of a buried object given the reflection wave",
    "original_post": {
      "author": "Anadyr",
      "date": "Apr 1, 2020, 10:51:14AM",
      "content": "Hi guys,\n\nI have a basic question, that struggles me since I'm using gprMax.\n\nI would like to know, which is the point on a A scan, where I can identify a surface of a buried object.\nTo keep it as simple as possible I took the same example you can find on the documentation here. A-scan from a metal cylinder.\n\nOn the picture above I have put a red line to visual identify the upper surface of the buried cylinder, which I want to identify on the following A scan:\n\n\nAfter reading the documentation I understood that the first part of the signal is coming directly from the transmitter to the receiver (d on the picture) and it is about 0.5 - 1.5 ns\nBut now I have the buried cylinder somewhere in my box. and, since I want to measure the depth of the cylinder, I need to know, where the surface of the cylinder is reflecting the electromagnetic wave back (c on the picture). But I have three possibile candidates: 1, 2 or 3, where the Ez field gets a maximum (minimum) and changes its versus.\n\nHow do I know, which is the \"right\" point to pick up the right time in order to calculate the depth of the object?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 6, 2020, 4:27:52AM",
        "content": "Hi Anadyr,\n\nI suggest you have a read around 'time zero' for GPR data - both simulated and measured. It should help you answer your question. A good starting point is the work done by Richard Yelf:\n\nYelf, R. (2004, June). Where is true time zero?. In Proceedings of the Tenth International Conference on Grounds Penetrating Radar, 2004. GPR 2004. (Vol. 1, pp. 279-282). IEEE.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ykcerUfAGnQ",
    "title": "Numerical precision",
    "original_post": {
      "author": "Hugo Day",
      "date": "Feb 23, 2017, 7:05:02AM",
      "content": "Dear all,\n\nI'm in the process of looking at some radar cross sections for gprMax, and for some situations hit a problem of numerical noise dominating the results (which require subtracting results from one another). Does gprMax natively use single or double precision floats? If the former is there a way to activate double precision? I've searched through the config and setup files but no luck so far.\n\nThanks,\nHugo"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 23, 2017, 7:51:18AM",
        "content": "Hi Hugo,\n\nYou can activate double precision by editing the `constants.py` and `constants.pxd` modules. Inside each module you will see sections for double precision that are commented out. Uncomment those and comment the single precision sections. You will have to then rebuild, i.e.\n\n`python setup.py cleanall`\n`python setup.py build`\n`python setup.py install`\nYou should then have a working double precision version. Obviously the memory requirements will increase. Let me know how it goes.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Hugo Day",
        "date": "Feb 23, 2017, 11:42:48AM",
        "content": "Cool, worked a treat! As per usual, thanks for the quick response!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/hmSVeTTgLAQ",
    "title": "Issues with my input file",
    "original_post": {
      "author": "Kenneth Obrien M",
      "date": "Aug 16, 2017, 12:30:13AM",
      "content": "I have the following issues with my input file:\n\nThe code takes to long to simulate how can I speed simulation.\nThe stone is buried 0.0762 in the soil and the code does not generate the geometry view.\nComputing the number of scans to get a B-scan file, its not clear. I did it by taking the size of the x-domain dividing by spatial step but it has not worked, I get errors.\nhow can one create a B-scan.\nbelow is my input file:\n\n#title: B-scan from a stone buried in a heterogenous soil\n#domain: 0.5 0.40 0.2\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n\n#material: 3.5 0 1 0 my_stone\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.260 0 my_ricker\n#rx: 0.080 0.260 0\n#src_steps: 0.001 0 0\n#rx_steps: 0.001 0 0\n\n##sphere: 0.25 0.3238 0.0 0.01 my_stone\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.1 my_soil\n#fractal_box: 0 0 0 0.5 0.40 0.2 1.5 1 1 1 20 my_soil my_soil_box\n\n#geometry_view: 0 0 0 0.5 0.40 0.2 0.001 0.001 0.001 soil_stone n\n\nWarning Errors I'm getting:\nWARNING: '#hertzian_dipole: z 0.040 0.260 0 my_ricker' sources and receivers should not normally be positioned within the PML.\nWARNING: '#rx: 0.080 0.260 0' sources and receivers should not normally be positioned within the PML."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 16, 2017, 4:48:04AM",
        "content": "Hi Kenneth,\n\nFirstly, the warning messages are designed to be informative and help you understand what the problem is with your model so you can solve it. Both warning messages are to inform you that you have placed your source (Hertzian dipole) and receiver in the Perfectly Matched Layer (PML) boundaries of the model. You need to have a basic understanding of the FDTD method and the example models in the User Guide. The PMLs are there to truncate the model domain and the electromagnetic fields inside the PML are usually not of interest.\n\nTo answer your questions:\n\nThe code takes to long to simulate how can I speed simulation. FDTD is a volumetric method, thus computational demands are largely governed by the size of the model. This is true for any FDTD code. Running big 3D models (your model is 500x400x200 = 40 million cells) on laptops or modest desktop machines is demanding. However, gprMax has been parallelised to take advantage of multi-core CPUs, and more recently can run on NVIDIA GPUs.\nThe stone is buried 0.0762 in the soil and the code does not generate the geometry view. Your 'my_stone' sphere is placed before the soil in your input file and therefore will be overwritten by the soil, which is why it doesn't appear in the geometry. Remember gprMax builds the geometry based on a layered canvas approach, so the order of the objects matters.\nComputing the number of scans to get a B-scan file, its not clear. I did it by taking the size of the x-domain dividing by spatial step but it has not worked, I get errors. Decide what length of B-scan you need. This will help guide the size of your model in that direction. Decide on the inline spacing. This will set the source and receiver steps. Then run gprMax using the '-n' option. The number of A-scans ('-n') will be the length of the B-scan divided by the inline spacing. See the example in the User Guide - http://docs.gprmax.com/en/latest/examples_simple_2D.html#b-scan-from-a-metal-cylinder\nKind regards,\n\nCraig"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Aug 17, 2017, 4:52:04PM",
        "content": "Hi Craig,\n\nI kindly appreciate you support.\n\nDue to the high demand of computational space need to simulate the heterogeneous model (sent earlier), my computer cannot handle the task. So decided to use a less demanding lossy soil model. The model below was adopted and modified according to specification I want to evaluate antenna frequency and target size. hope its fine to use it.\n\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3.5e-9\n\n#material: 10 0.01 1 0 half_space\n#material: 3 0 1 0 MyStone\n\n#waveform: gaussian 1 1.5e9 my_gaussian\n#hertzian_dipole: z 0.100 0.170 0 my_gaussian\n#rx: 0.140 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#sphere: 0.120 0.08 0.002 0.010 MyStone\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 buried_stone n\n\nonce again thank you."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 5:24:22AM",
        "content": "Hi Kenneth,\n\nUsing the Peplinski soil model and the fractal distribution to create a heterogeneous soil, should not really increase the computational requirements - this is mainly the number of cells in the model, i.e. domain size, and spatial discretisation.\n\nThe model you are now using is 2D (a single cell slice of 3D), so your Hertzian dipole is effectively a line source. Your source and receiver are position over your sphere (which is now a cylinder in 2D), so you'll have to be careful if you are planning on stepping the source and receiver to create a B-scan. Otherwise, the model looks reasonable.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Aug 19, 2017, 1:04:34AM",
        "content": "Hi Craig,\n\nPeplinski soil model and the fractal distribution I'm still working on them.\n\nQuestion: For a 2D line source (Hertzian dipole), can it be used effectively to evaluate target size or do I have to use a different source.\n\nKenneth,"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Aug 19, 2017, 7:41:34PM",
        "content": "Hi Craig,\n\nPeplinski soil model and the fractal distribution I'm still working on them.\n\nQuestion: For a 2D line source (Hertzian dipole), can it be used effectively to evaluate target size or do I have to use a different source. Does it mean everytime I need to produce a B-scan to see the size effect.\n\nKenneth,"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 20, 2017, 4:59:42PM",
        "content": "Kenneth,\n\nIt depends what you mean by size effect. You can easily create a series of 2D models with different size targets and use the Hertzian dipole (line source in 2D) above the target. You could run a single A-scan for each of the different targets and compare the results.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/F4oAzrkz1MI",
    "title": "Surface Roughness To a 'normal' box",
    "original_post": {
      "author": "Matthew Couchman",
      "date": "Jul 1, 2020, 7:53:30AM",
      "content": "Hi,\n\nI am looking to include a subsurface layer with surface roughness. I have no particular need for the fractal box element, but require it to add surface roughness and am hence using it for this purpose. Ideally I would like to create a fractal box which is identical to a normal box with surface roughness applied if it is possible.\n\nIm currently using the following lines for the creation of the surface roughness\n\nfractal_box: 0 0 0 1 0.001 0.6 0 0 0 0 1 material1 fractal\nadd_surface_roughness: 0 0 0.6 1 0.001 0.6 0 1 0 0.5 0.7 fractal\n\nwhere material1 has previously been defined. I have also attempted to vary the parameters for both the fractal box and surface roughness but I have not found a set of parameters which gave me the expected outcome.\n\n\nI am having a problem with the reflection corresponding to the rough surface boundary.  Below I show the geometry for a rough layer and its corresponding radargram. Beneath this I show the geometry and radargram for a standard box composed of the same material. The reflection of the layer boundary appears quite distorted (more so than I expected).  Any advice is greatly appreciated\n\nMatthew\n\nWith Surface Roughness\n\n\n\n\nNo Surface Roughness"
    },
    "responses": [
      {
        "author": "Matthew Couchman",
        "date": "Jul 1, 2020, 8:11:52AM",
        "content": "Ive attached the images as they dont appear to be displaying properly.\n\nMatthew\n\n"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Jul 1, 2020, 9:28:30AM",
        "content": "What's your B-Scan steps?"
      },
      {
        "author": "Matthew Couchman",
        "date": "Jul 1, 2020, 9:39:53AM",
        "content": "0.05m\n\nThis is a shorter example (1m section), I see a large amount of distortion over larger ranges as well, although the step size is constant at 0.05m\n"
      },
      {
        "author": "Matthew Couchman",
        "date": "Jul 2, 2020, 8:30:53AM",
        "content": "I tried this again with a spacing of 0.01m and got the attached radargram.  This appears to show 2 very fragmented boundaries (or at least thats how Im interpreting this) rather than one smooth boundary which I was expecting.\n\nAny help is greatly appreciated\n\nMatthew\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 2, 2020, 8:36:19AM",
        "content": "Hi Matthew,\n\nSuper quick response: \n\nAre you seeding the fractal that generates the rough surface? If not, you will get a different rough surface for every A-scan in your B-scan. If your were to produce a geometry file for each A-scan you would probably see this. So you need to seed the random number generating that feeds the fractal to ensure you get the same rough surface for all A-scans, see the docs - http://docs.gprmax.com/en/latest/input.html#add-surface-roughness parameter 'i1'.\n\nHope this solves the puzzle.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Matthew Couchman",
        "date": "Jul 2, 2020, 8:43:12AM",
        "content": "Hi Craig,\n\nThis makes complete sense now. I havent been seeding the fractal and I am producing a new geometry file for each A scan. Ill try the seeding this afternoon and hopefully this works.\n\nThank you for your help\n\nMatthew\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/b29y67mEaCU",
    "title": "Could you tell me how to correct single-precision to double-precision?",
    "original_post": {
      "author": "HJJ HJJ",
      "date": "Feb 8, 2019, 2:52:22AM",
      "content": "Hi, friends,\n\nCould you tell me how to correct single-precision to double-precision? Because the method used for the old version does not work now. Maybe something has been changed in the latest gprMax.  Thank you very much.\n\nRegards,\n\nJJH"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 8, 2019, 4:18:37AM",
        "content": "HJJ,\n\nAre you talking about calculating field values (output) from gprMax using double rather than single precision? If so, you should edit the files 'constants.py' and 'constants.pxd'. Comment out the single precision sections, and uncomment the double precision sections. The clean and rebuild gprMax - see updating gprMax in the README if you don't know how to do this step.\n\nN.B. Using double precision will double the memory requirement for your model.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "HJJ HJJ",
        "date": "Feb 11, 2019, 2:33:02AM",
        "content": "It works now. Thanks very much!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EvCZ2UhjAuI",
    "title": "Geometry view output error of \"cylinder_Bscan_GSSI_1500.in \"",
    "original_post": {
      "author": "Orhan Apaydın",
      "date": "Jun 9, 2021, 2:46:31PM",
      "content": "Hello dear gprMax family,\n\nWhen I try to get geometry  output file of the \"user_models/cylinder_Bscan_GSSI_1500.in\" (which comes from gprMax setup), I get this error; \n\n\n\nWhat is my mistake?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 9, 2021, 5:08:15PM",
        "content": "As the message says, you haven't specified any geometry views in your model. Add that command to your input file, or uncomment the specific antenna geometry views in the antenna module.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Orhan Apaydın",
        "date": "Jun 10, 2021, 7:09:51AM",
        "content": "There is already geometry view command in the input file.\n\n\n\n10 Haziran 2021 Perşembe tarihinde saat 00:08:15 UTC+3 itibarıyla Craig Warren şunları yazdı:\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 10, 2021, 3:54:41PM",
        "content": "There is no hash (#) in front of the geometry_view so it won't be treated as a command, i.e. just a comment in the file.\n\nCraig\n\n"
      },
      {
        "author": "Orhan Apaydın",
        "date": "Jun 11, 2021, 12:49:09PM",
        "content": "Thanks a lot Prof. Craig\n\n10 Haziran 2021 Perşembe tarihinde saat 22:54:41 UTC+3 itibarıyla Craig Warren şunları yazdı:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/fhcva1J6x_c",
    "title": "Landmine models",
    "original_post": {
      "author": "Neeraj Kumar",
      "date": "Sep 22, 2020, 7:17:10AM",
      "content": "Hi! \nAre the landmine models available to the users?"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 22, 2020, 7:23:48AM",
        "content": "Dear Neeraj,\n\nThe landmine models will be released with the new version of gprMax which is planned towards the end of this year.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/w9sCkVN877Q",
    "title": "problem in how to seed random number",
    "original_post": {
      "author": "Avinash Kumar",
      "date": "Dec 8, 2021, 10:21:19PM",
      "content": "Dear gprMax community ,\nWhile i was trying to implement metal cylinder buried in soil with some surface roughness i am not getting any hyperbola as reflection from the metal cylinder . I tried to seed random number but the [i2] parameter in #fractal_box and [i1] parameter in #add_surface_roughness takes only integer value so please help me how to seed random numbers in this parameter. thanks in advance\n  #domain: 0.15 0.15 0.1\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 6e-9\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: y 0.045 0.075 0.085 my_ricker\n#rx: 0.105 0.075 0.085\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n#python:\nimport random\nl=[]\nn=77\nfor i in range(n):\n    random.seed(i)\n    l += [random.random()]\n#end_python:\n#fractal_box: 0 0 0 0.15 0.15 0.070 1.5 1 1 1 50 my_soil my_soil_box 77\n#add_surface_roughness: 0 0 0.070 0.15 0.15 0.070 1.5 1 1 0.065 0.080 my_soil_box 77\n\n#geometry_view: 0 0 0 0.15 0.15 0.1 0.001 0.001 0.001 heterogeneous_soil n\n#cylinder: 0.075 0.060 0 0.075 0.060 0.1 0.020 pec"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 15, 2021, 8:42:08AM",
        "content": "You just use an integer to seed the random number generator no need to use a Python block with random numbers, e.g. #fractal_box: 0 0 0 0.15 0.15 0.070 1.5 1 1 1 50 my_soil my_soil_box 77\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/LEfzvvDCvm8",
    "title": "GPU memory required/used",
    "original_post": {
      "author": "Alan Wilson-Langman",
      "date": "Oct 4, 2018, 4:10:25PM",
      "content": "Hi,\n\nI have been benchmarking gprmax on a few GPU platforms.\n\nI noticed that the GPU memory required estimate is at least twice the GPU memory used for the benchmark simulations.  Is there a reason for this? \n\nBest regards,\n\nAlan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 7, 2018, 3:58:09PM",
        "content": "Hi Alan,\n\nThanks for reporting this. See my response to another user who recently spotted this - http://www.gprmax.com/forum.shtml?place=msg%2Fgprmax%2FZXMbz43aUBo%2Fl3qqx7nfGQAJ\n\nI have created a bug report on our GitHub Issue tracker - https://github.com/gprMax/gprMax/issues/173\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-hw6S9skp9s",
    "title": "how to write plane wave command in gprMax",
    "original_post": {
      "author": "kashirajvk kalshetti",
      "date": "Mar 17, 2025, 11:53:00AM",
      "content": "#domain: 10.0 2.0 2.0\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 40e-9\n#pml_cells: 10 10 10 10 10 10\n\n#material: 4 0.01 1 0 soil  \n#material: 2.0 0 1 0 pvc    \n#material: 10 0 1 0 rubber  \n\n\n#waveform: planewave 500e6 0 0 1\n \n#rx: 0.2 1.0 1.8                 this code showing error in plane wave command\n\n#box: 0 0 0 10.0 2.0 2.0 soil\n\n#sphere: 0.5 1.0 1.95 0.1 pvc\n#sphere: 1.5 1.0 1.95 0.1 rubber\n\n#geometry_view: 0 0 0 10.0 2.0 2.0 0.01 0.01 0.01 buried_spheres n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 17, 2025, 12:01:41PM",
        "content": "There is no plane wave command in your input file. Also your waveform command is not correct, and you have no source - please check the docs.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EX-hQXWY4Xs",
    "title": "The simulation of human body stimulation",
    "original_post": {
      "author": "Manami",
      "date": "Jun 28, 2019, 1:21:59PM",
      "content": "Hello everyone, I am Manami, PhD student.\nToday I'd like to ask you how to use the source command.\nIn my study, I put two electrodes on human skin and stimulate by alternating current.\nAnd in the simulation, I am planning to clarify that how the electric field decay depending on the distance from the electrodes. \nThe stimulus is given around human eyeball and those tissues are really complicated. So I am going to use AustinMan model and gprMax for the simulation.\nThe experimental situation is like the picture attaching to this post.\n\nHowever, gprMax has only like those source command, that #hertzian_dipole, #magnetic_dipole, and #voltage_source.\nIt seems that I cannot use them like my experimental situation because the electrodes are not dipole. And then, in my experimental situation, the human tissues are stimulated by two electrodes.\nIn that situation, Can I use the command  #voltage_source? Or should I modify the gprMax itself?\n\nI appreciate if you could give me any comment or suggestion.\n\nBest regards,\nManami"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 1, 2019, 5:30:32AM",
        "content": "Hi Manami,\n\nYou need to clearly understand the physics of your problem. gprMax and any FDTD solver will be a good choice when you are dealing primarily with wave propagation problems. Your problem is closer to electrostatics and different solvers should be applicable.\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/nVzKL6iypxc",
    "title": "1.5 GHz antenna module",
    "original_post": {
      "author": "Isabel Rabad",
      "date": "Dec 4, 2017, 2:18:01PM",
      "content": "Hello,\n\nI am trying to use the 1.5 GHz module you created. But the image I get is just the opposite, instead of the one you published. Maybe, there is something I am missing about coordinates.\n\nPlease, find attached the code and the resulting image.\n\nThank you very much in advance\n\nIsabel"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 4, 2017, 2:57:23PM",
        "content": "Hi Isabel,\n\nTo which published image do you refer? The default output from gprMax is electric (and magnetic) field values. You may have seen a plot of voltage which will have a sign reversal and scaling.\n\nAre you trying to get the free space (crosstalk) response from the antenna? Your model has a PEC box in it, and the antenna itself is partly in the PML. Check your geometry file in Paraview and you will see this.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Kenneth Obrien M",
        "date": "Dec 9, 2017, 2:52:13PM",
        "content": "Hi,\nJust need clarification;\n\nIn the 2D cylinder model examples, the coordinates are defined to be 3D (x,y,z)  as soon as you set the coordinates to only have x,y (which is 2D) you get an error. Why is it not feasible to define just two coordinates (x,y) in the 2D model?"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/1nfGrSKN-_I",
    "title": "Parallel Processing",
    "original_post": {
      "author": "Amin",
      "date": "Jul 12, 2021, 2:55:38PM",
      "content": "Hello,\n\nIn my quest to finally get my full model going. I have come across an issue with Parallel Processing. I have roughly 30,000 A-Scan files representing my 3D block. Each \".in\" file was created separately by changing the location of the transmitter and receiver in a loop.\ncurrently, I am reading in each \".in\" file as \"f\"  in a loop and use \"gprMax.run(f, gpu())\" in my python script to get \".out\" files. From what I understand, it seems that I am actually using my GPU to do one A-scan at a time instead of parallel processing. I could be totally wrong but I think it is because I have A-scans and not Bscans? do you have any suggestions?\nI appreciate any suggestions you might have and thank you for such a great program."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 12, 2021, 3:44:00PM",
        "content": "You are using gprMax with your GPU correctly as currently intended. If you have multiple GPUs then you could run multiple A-scans in parallel at once. At the moment there is not an easy way to run multiple models on a single GPU (if they fitted on the RAM).\n\nThere is no 'B-scan' in gprMax - a B-scan is formed by running a collection of models (A-scans) and then merging the results (output files) together at the end. \n\nYou maybe slightly faster writing a single input file and generating the different A-scans by scripting your loop in a Python block, rather than having 30,000 separate input files - but the difference in speed is probably neglidible. \n\nCraig\n"
      },
      {
        "author": "Amin",
        "date": "Jul 12, 2021, 4:00:13PM",
        "content": "Thank you for taking the time.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4AHSPoppptM",
    "title": "How to get Current as output and another query regarding antenna9Hertzian Dipole)",
    "original_post": {
      "author": "ee20d058 Masoom Verma",
      "date": "Sep 1, 2023, 10:46:56PM",
      "content": "Dear all,\n                I have taken one scenario where only two antennas are kept, one as transmitter and another at 0.2m as receiver. Both are hertzian dipole. The domain is 0.6m, 0.6m, 0.6m.\nI have considered three waveforms. Single sine cycle(1GHz), continuous sine cycle(1GHz) and stepped waveform (8 steps from 2GHz- 5GHz).\nMy antenna is Z-polarised, so I am looking at the Ez component, which is dominant.\nI have a few questions about understanding it.\n\n1. Single and continuous sine is understandable because of the 0.2m gap between antennas, I am getting 0 V/m till 0.6nsec, and due to the wave travel phase having changed on the receiver, and the same in the stepped freq receiver on the first step(1GHz), but after it multiple ripples are coming. I don't know why.\n\n2. I have added a picture of the command prompt, where it is showing I am getting on Ex, Ey, ....Hz. How do I get the current I?\n\n3. Are these waveforms exciting the antenna to radiate? If yes, then will the antenna parameter(Gain, Impedance etc) change with respect to waveform frequency? How do I know it?\n\nPlease give any idea regarding this. It would be very kind.\n\nThank You\n\nRegards\nMasoom Verma"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6-wT4Bo6F9k",
    "title": "Complex shape object construction",
    "original_post": {
      "author": "Taseer Ali",
      "date": "Jan 3, 2023, 1:29:39AM",
      "content": "Hello everyone,\n\nI am new to this group. I am doing a simulation of \"C\" and \"U\" steel shapes in gprMax. \n\nMy question how to model these shapes in the input file? The gprMax document only talks about the commands to model edge, triangle, sphere, plate, box and cylinder.\n\nAny help is appreciated. Thank you in advance."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/KdPgRXG1zBM",
    "title": "soil outputs with geometry view",
    "original_post": {
      "author": "Brad Artman",
      "date": "Nov 21, 2022, 12:04:11PM",
      "content": "It seems to me that that the vti/vtp outputs are scaled integers without the physical units. \nThe 'Material' content in the class.\n\nIs there a way to output the model properties in physical units?\nB"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 21, 2022, 10:53:49PM",
        "content": "No without altering the file format and this is not something that should be done lightly. However,  you can customise it if you want for your own purposes and let it output the information you might need. gprMax uses a lookup table for properties and every cell and edge has an integer ID that points into the table of real properties. These properties can be very complex (multi-Debye etc.) hence storing just the permittivity or DC conductivity is not inclusive enough for such a format. The integers point to the materials list that is then used by the supplied gprMax macro to define the materials in Paraview with proper descriptors. \n\nBest\n\nAntonis\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5cHSZNr8HSs",
    "title": "Common Mid Point with realistic antenna",
    "original_post": {
      "author": "Christian Pigot",
      "date": "Feb 1, 2021, 12:15:45AM",
      "content": "Dear all, \n\nI would like to simulate a CMP (Common Mid Point) experiment with realistic antenna, either GSSI or Mala 1200.\nLooking at previous post in this forum, it seems to be lot of effort\nhttps://groups.google.com/g/gprmax/c/-OcHOrFD_OI/m/G9KWr4DoEQAJ\n\nIs there a more simple solution than recreating the model of Receiver and Transmitter for each distance?\n\nThank you for your support\n\nChristian"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 1, 2021, 5:48:00AM",
        "content": "Dear Christian,\n\nThe GSSI and MALA antennas that we have created models in gprMax have a fixed offset between transmitter (Tx) and receiver (Rx), i.e. Tx and Rx are not separable. These antennas were not designed/intended for CMP measurements. However, you could somewhat replicate a CMP profile by inserting two of these antenna models into your simulation. You would have to disable the Tx on the antenna that was going to act purely as the Rx. The antenna geometries would be moved using the 'current_model_run' in a similar way as you would for creating a normal common offset B-scan with an antenna model.\n\nYou can do all this much more easily using a Hertzian dipole and #rx command, but I assume since you are asking about antennas you want to include a full antenna model in your simulations.\n\nKind regards,\n\nCraig\n\n"
      },
      {
        "author": "Christian Pigot",
        "date": "Feb 1, 2021, 10:25:55PM",
        "content": "Craig\n\nThank you for the tip. I will give it a shot like this\n\nBest regards\nChristian\n\nPS: I happen to have MALA 1200 antennas in the back of the lab. \nI though it could be interesting to see how far I can match XP and simulation.\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/563qJTcFC_4",
    "title": "How can I use complex value(amplitude with phase) in a source waveform?",
    "original_post": {
      "author": "Sumona Chatterjee",
      "date": "Jan 16, 2018, 4:36:45AM",
      "content": "Hello,\n\nMy query is: How can I use any complex value in a ricker waveform?\n\n\nI want to use a hertz dipole with ricker waveform having frequency 1GHz and complex amplitude(amplitude with phase) 1+2j.\n\npreviously I am taking the absolute value i.e. (1*1+2*2)^0.5=5^0.5 for the mentioned complex value\nand using the commands like:\n#waveform: ricker 2.236 1000e6 my_ricker1\n#hertzian_dipole: x 0.15 0.13 0.5 my_ricker1\n\nNow I want to include the phase part  to the source wave and want to check response for that in a modeled GPR environment.Is it possible?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 16, 2018, 4:50:28AM",
        "content": "Hi Sumona,\n\nYou cannot do that. gprMax is a time domain solver (FDTD). Excitation is by using only a time dependent waveform. A phase difference in frequency domain corresponds to a time delay in the time domain and as a result to a variation of the shape of the wavelet. You need to calculate that and then feed the resulting time domain pulse to gprMax.\n\nBest\n\nAntonis"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jan 16, 2018, 7:24:35AM",
        "content": "Thanks,\n\nCan you please guide how to calculate the time delay and how to feed the pulse including the delay(due to phase variation) to my GPR model.\n\nComplex amplitude of waveform is =1+2j=2.236<1.107 degree. \n\nWhether the inclusion of phase affect the 1st reflection time from ground or object?"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 16, 2018, 11:49:46AM",
        "content": "Sumona,\n\nYou can feed whatever wavelet shape you need (time domain representation) by specifying it in an external file and using the #excitation_file command. See the documentation for usage - http://docs.gprmax.com/en/latest/input.html#excitation-file\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Sumona Chatterjee",
        "date": "Jan 17, 2018, 1:06:00AM",
        "content": "Thanks,\n\nI have tried with excitation file command with two different wave forms from different hertz dipole positions. But during simulation I got warning message.Can you please tell me what is the problem.\nThe excitation file, input file and screenshot of warning are attached."
      },
      {
        "author": "Craig Warren",
        "date": "Jan 17, 2018, 4:32:27AM",
        "content": "Hi Sumona,\n\nThe custom source waveforms you are using start and end abruptly (see attached plot). That is why you received a warning that the numerical dispersion analysis could not be carried out. This will also likely introduce unwanted high frequencies into the simulation. Take a look at the builtin continuous sine wave excitation which is ramped to avoid these issues - http://docs.gprmax.com/en/latest/plotting.html#contsine\n\nWhat problem are you trying to investigate here? Perhaps if you could explain then we might be better able to assist.\n\nCraig\n\nPS You might want to update to the latest version of gprMax as we recently added some interpolation functionality for custom source waveforms, which may assist you."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/613GD9FhJ-8",
    "title": "2D and 3D direct-arrive wave Ascan difference",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Apr 27, 2021, 11:35:48PM",
      "content": "Hi everyone!\n\nIn order to compare the Ascan simulation result of 2D model and 3D model ,I created two free_space model: one is 2D and the other is 3D, I use the same source hertzain_dipole (ricker) and the tx and rx distance are the same, too. I run the two model to get two Ascan by extracting Ez component,  but the 3D Ascan differs greatly from 2D.  \nIs there a way to analyze the error of them?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 28, 2021, 6:15:44AM",
        "content": "There is no error. The \"hertzian dipole\" in a 2D is actually a model of a line source as it is clarified in the manual. The respective representations are correct and have been compared to their respective analytical solutions with good agreement depending on the resolution of a specific model etc. What is wrong is trying to compare the A-scan responses  from a 2D model to the ones from a  3D model and expecting them to be the same. \n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/kI-uIQLMBUU",
    "title": "Accuracy of gprMax",
    "original_post": {
      "author": "Shuvodip Majumdar",
      "date": "Apr 19, 2020, 10:08:30AM",
      "content": "Dear Sir,\n\nFirst of all, thank you very much for developing such a nice simulator and keeping it free. I found it very useful for my research.\n\nRecently I used gprMax for simulating a situation related to wedge diffraction and presented the results in a paper. Now one of the reviewers have given a comment as given below:\n\n\"New in the paper is results from a numerical program called gprMax for ground penetrating radar. This program seems possible to use for the wave propagation scenario of the present paper. However, since it is a numerical program, its results will not be 100 % correct. If it exists an evaluation of its expected errors in different scenarios, it should be\nexplained/elaborated in the paper.\"\n\nHow may I respond to the reviewer regarding this comment? Kindly help.\n\nWith regards,\nShuvodip Majumdar,\nResearch Scholar, Department of E&ECE,\nIndian Institute of Technology Kharagpur, India"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 19, 2020, 4:36:47PM",
        "content": "Dear Shuvodip,\n\nNo numerical simulation can be 100% accurate. It does not matter if it is free and open source or commercial. If it is used properly it can provide very accurate and useful answers and insights. So, it depends on how you have used gprMax and so much on its inherent accuracy. gprMax is an FDTD solver that its accuracy has been verified against analytical solutions (some are in the website) as well as against experimental data as well and in comparison to simulations with other solvers as well. So, in terms of performing accurately an FDTD based simulation that has been verified by many authors and testament is the number of journal papers published that use gprMax and not only on GPR.\n\nNow, that does not mean that ay solution you get is right and accurate because that depends on how it has been used. \n\nHope that helps\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/R7VMsEdxqHM",
    "title": "How do I output a waveform?",
    "original_post": {
      "author": "jie wang",
      "date": "May 20, 2017, 3:53:01AM",
      "content": "I would like to study the relationship between the dielectric constant and the amplitude of the ground penetrating radar wave, and the model has been built, but I do not know how to use gprmax to output the amplitude-dependent waveform？"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 22, 2017, 9:30:45AM",
        "content": "Does this answer your question - https://groups.google.com/d/msg/gprmax/0mEpKiFMIDg/suZFCwNdAwAJ\n\nKind regards,\n\nCraig"
      },
      {
        "author": "jie wang",
        "date": "May 22, 2017, 8:51:46PM",
        "content": "Thank you for your answer, but I do not want that kind of waveform,I want the amplitude-related waveforms, I wonder if you can solve my problem?"
      },
      {
        "author": "Craig Warren",
        "date": "May 23, 2017, 7:13:23AM",
        "content": "Hi Jie,\n\nCan you explain what you mean by amplitude-related waveforms? Amplitude of what?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "jie wang",
        "date": "May 24, 2017, 1:19:21AM",
        "content": "What you say is the output of six waveforms of the electric field and the magnetic field.     But what I want is to output a whole waveform, which is related to the magnitude of the amplitude of the electromagnetic wave."
      },
      {
        "author": "jie wang",
        "date": "May 24, 2017, 1:21:05AM",
        "content": "The magnitude of the vibration."
      },
      {
        "author": "jie wang",
        "date": "May 24, 2017, 2:05:03AM",
        "content": "I would like to carry out a different dielectric constant of the forward modeling of Ground penetrating radar .   Find the relationship between the waveform and the different dielectric constants.    But the output of the six electric fields and the magnetic field of the waveform can not be a good display of the relationship between them.   So, I would like to be able to output a complete waveform,  and  the output waveform is related to the amplitude of the electromagnetic wave.                   My English is not high, I do not know if you can understand what I said, but I really need your help."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "May 24, 2017, 5:24:50AM",
        "content": "Dear Jie,\n\nIf I understand correctly you would like to obtain the amplitude of the Electric field vector. For this vector you have all three cartesian components of it available to you so, obtaining the amplitude is a simple calculation. I think Paraview can do this for surface plots but it is easily done using some simple Python or in MATLAB. gprMax would not do this because it is superfluous information that would have taken unnecessary storage and computation time as it could easily be available from the existing information of the field components in a post-processing step.\n\n Regards\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/lAxO3f67tBY",
    "title": "non-diagonal anistopy",
    "original_post": {
      "author": "Hamed Qorbani",
      "date": "Dec 2, 2022, 5:15:17AM",
      "content": "Dear gprmax team.\n Thanks for creating this usefull software.\nThere are some simulations in researches that needs to introduce  tensors of objects proprties cause of the anistropy in our models. Is there any way or tricks to do simulations by non-digonal anisotropy proprties?\nPlease let me know if you can help me with this.\nThank you for your cooperation.\nSincerely... ."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/v0r7DxiaZh4",
    "title": "run error:gprMax.exceptions.GeneralError: Non-physical wave propagation:",
    "original_post": {
      "author": "刘梦娜",
      "date": "Nov 2, 2017, 3:16:41AM",
      "content": "I try to simulate out the .vti file，and come across a error as follow. \nMaterials:\n    |            |         |         | sigma     | Delta     | tau       | omega | delta | gamma |      | sigma*  | Dielectric\n ID | Name       | Type    | eps_r   | [S/m]     | eps_r     | [s]       | [Hz]  | [Hz]  | [Hz]  | mu_r | [Ohm/m] | smoothable\n----+------------+---------+---------+-----------+-----------+-----------+-------+-------+-------+------+---------+------------\n  0 | pec        | builtin | 1       | inf       |           |           |       |       |       | 1    | 0       | False\n  1 | free_space | builtin | 1       | 0         |           |           |       |       |       | 1    | 0       | True\n  2 | |0.0036|   | debye   | 3.68105 | 0.0109813 | 0.0195212 | 9.231e-12 |       |       |       | 1    | 0       | False\n  3 | |0.0088|   | debye   | 3.94062 | 0.016665  | 0.0723883 | 9.231e-12 |       |       |       | 1    | 0       | False\n  4 | |0.0140|   | debye   | 4.17712 | 0.0206979 | 0.143019  | 9.231e-12 |       |       |       | 1    | 0       | False\n  5 | |0.0192|   | debye   | 4.39913 | 0.0239862 | 0.227289  | 9.231e-12 |       |       |       | 1    | 0       | False\n  6 | |0.0243|   | debye   | 4.61051 | 0.0268257 | 0.323033  | 9.231e-12 |       |       |       | 1    | 0       | False\n......\n 48 | |0.2422|   | debye   | 10.9093 | 0.0784171 | 9.39564   | 9.231e-12 |       |       |       | 1    | 0       | False\n 49 | |0.2474|   | debye   | 11.0354 | 0.0791968 | 9.69228   | 9.231e-12 |       |       |       | 1    | 0       | False\n 50 | |0.2526|   | debye   | 11.1609 | 0.0799678 | 9.99184   | 9.231e-12 |       |       |       | 1    | 0       | False\n\ngprMax.exceptions.GeneralError: Non-physical wave propagation: Material '|0.2526|' has wavelength sampled by 1 cells, less than required minimum for physical wave propagation. Maximum significant frequency estimated as 6.4955e+09Hz\n\nThanks in advance ! \n\nKind regards,\n\nnana"
    },
    "responses": [
      {
        "author": "刘梦娜",
        "date": "Nov 2, 2017, 8:37:36AM",
        "content": "I have took a look in the User Guide (http://docs.gprmax.com/en/latest/gprmodelling.html#spatial-discretisation) ,but, just can't get the point. \nPlease help\nThanks"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 2, 2017, 9:13:44AM",
        "content": "Choosing sensible spatial resolution for your model that adequately models the geometry you have and avoids numerical dispersion is a fundamental aspect of using the FDTD method - http://docs.gprmax.com/en/latest/examples_simple_2D.html#calculate-a-spatial-resolution-and-domain-size This is something you need to understand before you can use gprMax. There are plenty of texts available on the FDTD method, e.g. Computational Electrodynamics: The Finite-Difference Time-Domain Method (Artech House, Boston, 2000) by A Taflove and SC Hagness\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7v5cNl9E64o",
    "title": "PML's incomplete absorption of radar wave: lead to echo interference to the B-scan images which removed direct waves",
    "original_post": {
      "author": "王辰宇",
      "date": "Jan 19, 2025, 9:34:57AM",
      "content": "Hello, I am learning to use gprMax to do a simulation of different layers of soils with different permittivity each. Til now I only wrote a few simple input files to create multi-layered homogeneous soils. Then I found that the B-scan images drawn from .out files(with direct wave removed) seemed to have interference from other waves(by the way I used mean value method to remove direct wave). Through several tests I think maybe it's because the PML of the left and right sides didn't absorb the radar waves completely. What am I supposed to do to avoid this situation, please? Is there anything that I should change or improve? And I will be more than grateful if you can tell me what place I did wrong ,please.\nFor example, this is one of my input files to create B-scan:\n'''\n#domain: 6 1 0.02\n#dx_dy_dz: 0.02 0.02 0.02\n#time_window: 3e-08\n#waveform: ricker 1 100e6 my_ricker\n#hertzian_dipole: z 0.3 0.7 0 my_ricker\n#rx: 0.32 0.7 0\n#src_steps: 0.02 0 0\n#rx_steps: 0.02 0 0\n#material: 16 5 1 0 normal_soil\n#material: 10 10 1 0 wet_fertile\n#material: 6 1 1 0 dry_fertile\n#box: 0 0.5 0 6 0.7 0.02 normal_soil\n#box: 0 0.3 0 6 0.5 0.02 wet_fertile\n#box: 0 0 0 6 0.3 0.02 dry_fertile\n'''\nAnd this is the corresponding B-scan image(n=270):\nB-scan image that removes the direct wave:\nAnd I also tested file given by official tutorial, i.e \"cylinder_Bscan_2D.in\", but I removed the cylinder part . I posted the corresponding input file below:\n'''\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n#material: 6 0 1 0 half_space\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.080 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n#box: 0 0 0 0.240 0.170 0.002 half_space\n'''\nAnd this is the result B-scan image with direct wave removed:\nAnd I wonder if this will happen when echoes from adjacent layers aren't strong enough? Or put it another way: the permittivity difference of adjacent layers aren't large enough."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jan 19, 2025, 9:53:56AM",
        "content": "There is no way that the errors from PMLs could be completely eliminated. They can be reduced and improved but could  never be completely removed. The method you use to remove the direct response and as a result the response from all your layers makes this worst. The important consideration is how strong are these reflections in relation to the reflections from your targets? Now that the target responses have been mostly eliminated the weak errors from the PML are very clear to see. \n\nAlso, your model does not leave many cells above the source for the PML. Your source is about 5 cells away from the start of the PML which has a default thickness of 10 cells in the vertical direction. Results should improve if you move your active scanning region further from the PML.\n\nThe ways to improve the performance are:\n\n1. Try thicker PML and the error will be reduced.\n2. There are more advanced PML settings that can calibrate the PML to perform much better and gprMax allows you to do that but there are no universal guidelines on this and it is a matter of trial and research to find out the best parameters. \n3. If you want  background removal in a model you can run it without the targets and subtract it from the model run with all the targets. The average background removal is not a good way to do this and actually in real GPR data can also create non existent targets when applied to some GPR data. It should be used with caution and always understanding its limitations. \n4. If you are going to simulate only layers that are 1D flat and homogeneous then one trace in there middle is enough. I suppose you want to include more 2D targets in future and hence you are stating with simulating B-Scans for 1D scenarios. \n\nSo, PMLs are not perfect and will never be but their error can be reduced with increasing the distance from them, their thickness or by using more advanced formulations and parameters. \n\nHope this helps!\n\nAntonis\n\n"
      },
      {
        "author": "王辰宇",
        "date": "Feb 8, 2025, 9:03:41AM",
        "content": "Dear Mr. Giannopoulos,\n    Thank you so much for your answer, which does me a great favour! I am now improving my methods of creating more useful input files and deploying a new way to remove direct wave as you instructed:\n1. Since the PML layers get 10 cells by default and it is recommended that you put radar and rx 10-15 cells away from PML. So I reckon that I let them be 25 cells away from the borders. Do I get it right?\n2. In your reply it mentioned \"you can run it without the targets\". So I removed all the definitions of items(box, fractal box...) except radar and receiver. Then it subtracted from the original model. Is that correct?\n    In the end, wish you all the best for the new snake year!\nSincerely,\nChenyu,Wang\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 8, 2025, 2:04:55PM",
        "content": "Hi Chenyu,\n\nThis will work for your PML but often the PML performance  is problem depended. If you see that the errors are not reduced enough you can leave more space or use a thicker PML.\nWhat is background and what are targets is up to use to decide. In a simple model of a half-space with a simple target if you want to remove the background then you run the model of a half-space without the target and subtract it from the full model. This way you only get the response of the target without the direct response. \n\nHope this helps!\n\nAntonis\n"
      },
      {
        "author": "王辰宇",
        "date": "Feb 11, 2025, 3:22:13AM",
        "content": "Dear Mr. Giannopoulos,\n    I followed your advice to run it again with other targets removed and got it subtracted from the original model. Here comes a new problem: I can't see any other layers from B-scan image.\n    I also tried on the cylinder_Bscan_2D.in from the official tutorial by removing the cylinder. It worked well. The response seems more clear. But this didn't happen on my model(orz). So I guess there must be something wrong with my parameters. And here I uploaded all input files and results hoping those will be of any help. I will appreciate it if anyone talented could give me an answer!\n    PS: paper.in is the original file, empty.in is the file with other layers removed except the first layer. The ground_truth.png shows the layers' distribution of paper.in. The removed.png is the result of Bscan \"paper_merged.out minus empty_merged.out\".\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 11, 2025, 12:50:33PM",
        "content": "When you are using commands like #fractal_box: and #add_surface_roughness: that are using stochastic distributions every time you use them a new random background is generated. So, in every A-Scan your background is different and that is why you see what is in the \"removed.png\" image. You need to keep the same fractal geometry model between A-scans as the earth does not change every time you move the source. So, you need to seed the random number generator with an integer to reproduce the same model between A-scans. This number can change between different B-scan models but not between model runs for the same A-scan. So, use the seeding parameter in these commands. The details are in the documentation \nhttp://docs.gprmax.com/en/latest/input.html#fractal-box\n\nbest\n\nAntonis\n"
      },
      {
        "author": "王辰宇",
        "date": "Feb 26, 2025, 5:41:13AM",
        "content": "Dear  Mr. Giannopoulos,\n    I took your suggestion to add random seed to control the model the same on every run of Ascan. And it surely worked on some circumstances. But sometimes I still got some problems. When I finish a Bscan, the result image seems to have only the direct wave. There is no sign of other responces from other soil layers. Then I run the model with other layers removed and let it subtracted from original model. The result still can't see any other responces. Is it because the wave died down quickly during transportaion? Or is it due to the errors of the model itself? I can't figure out what best parameters are for the radar.\n    Here I post my model file \"1.in\", model without other layers \"2.in\", ground truth of model 1 \"gt1.png\" , Bscan of model 1 \"1.png\" and the result removing direct wave \"removed.png\". I will  be grateful if anyone can help me(orz)...\n"
      },
      {
        "author": "王辰宇",
        "date": "Feb 28, 2025, 1:57:19AM",
        "content": "Hi, everyone!\n    It's me again. I probably found out why little responces were received: I set the conductivity of the defined materials so hign that most of the waves died down quickly. Now I re-adjust the value lower and clear responce results were seen again! It's quite important to be cautious when you set parameters before the experiment, right? Ha ha, anyway don't let me bother your valuable time. Wish you guys a good weekend. :D\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GynymxOPcr0",
    "title": "Converting B-scan to array",
    "original_post": {
      "author": "LOHIT SUBODH",
      "date": "Oct 16, 2020, 1:27:12AM",
      "content": "I am facing difficulty in converting the B-scan output file to an array of numbers. Can anyone suggest a method for doing it? I want to use my B-scan output file as a numpy array in python. Do I have to install any software for doing it or it can be achieved through gprmax?\nRegards\nLohit"
    },
    "responses": [
      {
        "author": "Anadyr",
        "date": "Oct 23, 2020, 2:58:46PM",
        "content": "Before using numpy you need to install the h5py package.\nThen you are able to read the .out files from grpmax.\n\nFor example:\n\nimport h5py\n\nfile = h5py.File(\"script.out\", 'r')\n\ngroup_key  = list(file.keys())[0]\n\ntitle_1    = file.attrs.get('Title')\nprogram_1  = file.attrs.get('gprMax')\niterations = file.attrs.get('Iterations')\ndt         = file.attrs.get('dt')\nnrx        = file.attrs.get('nrx')\n\n# Here your matrix\nEx_1 = np.array(file.get('rxs/rx1/Ex'))\nEy_1 = np.array(file.get('rxs/rx1/Ey'))\nEz_1 = np.array(file.get('rxs/rx1/Ez'))\n\nI hope, I could help\n"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 27, 2020, 12:07:25PM",
        "content": "You can also use the code in the get_output_data function - https://github.com/gprMax/gprMax/blob/d34edb6dc70ac6d0e3ea307412a2d3417c95389d/tools/outputfiles_merge.py#L29\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/sMOAdLte1XU",
    "title": "Looking for a API to merge and move data to directory",
    "original_post": {
      "author": "Anadyr",
      "date": "Sep 25, 2020, 4:47:37PM",
      "content": "Hi guys,\n\nI have the following problem like many others: I'd like to automate the process of running simulations.\nSo ideally I would write a .in file using the #python: directive, importing tools like pandas and then I would start more simulations from the same file.\nI mean something like:\n\n#python:\n\nfrom gprMax.input_cmd_funcs import *\nimport pandas as pd\n\ndf = pd.read_csv(\"list_parameters.csv\")    # parameter for the simulation\n\n\nfor i in range(6):\n\n     dx = dy = dz = df.iloc[0,1]\n     time_window_var = df.iloc[0, 2]\n     domain = domain(df.iloc[0, 3:5])\n\n     dx_dy_dz = dx_dy_dz(dx, dy, dz)\n     time_window = time_window(time_window_var)\n\n      material(df.iloc[i, 6], 0, df.iloc[i, 7], 0, \"half_space\")\n\n      box1     = box(0, 0,  0, 0.480, 0.148, 0.170, \"half_space\", \"n\")\n\n      from user_libs.antennas.GSSI import antenna_like_GSSI_1500\n\n      antenna_like_GSSI_1500( 0.105 + current_model_run * 0.005, 0.074, 0.170, 0.001 )\n\n#end_python:\n\nBut in this case i miss an output function, which let me to move the results to another directory at the end of every for loop.\nI mean a function like:\n\n#python:\ndir_a = 'results/test_a'\n...\noutput_dir(dir_a)            # This should be the equivalent of \"#output_dir:\"\n#end_python:\n\nbut looking to this list of function I couldn't find any suitable function to do that.\n\n\nOn the other side I found this post from Craig which suggests to use those APIs:\n\nfrom gprMax.gprMax import api as gprMax\nfrom tools.outputfiles_merge import merge_files\n\ngprMax can then be run by calling:\n\ngprMax(box_Bscan_2d.in, n=228)\nmerge_files(box_Bscan_2d, removefiles=True)\n\nThis is a good idea but in this case I cannot load the variables from a list like above and passing them as argument to any of the functions\n\ngprMax(<file>, n)\nmerge_files(<file_name>, removefiles)\n\nCan you suggest me a better way to solve this problem?\nThanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 9, 2020, 10:55:18AM",
        "content": "Dear Anadyr,\n\nI'd suggest you write a top level pure Python scripts that imports gprMax as I described previously. This can then be used to run your input file which itself can contain a #python #end_python block with your input parameters. The control of the input and output file names etc... can happen in the top level script.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JNWN54MA-ys",
    "title": "polarization",
    "original_post": {
      "author": "xusheng wang",
      "date": "Sep 9, 2024, 10:35:07PM",
      "content": "Dear GPRMAX team, I am a master's student. When GPRMAX is conducting 3D simulations, may I ask how to achieve the three polarization modes of radar antennas? Thank you very much."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Sep 10, 2024, 7:58:03AM",
        "content": "You can set the polarisation of simple sources, e.g. a Hertzian dipole, to either x, y, or z aligned to the FDTD grid. You can also sample the electric and magnetic fields in the x, y, z directions by specifying a receiver (rx). You can also apply these concepts to an antenna model by specifying the structure/geometry of the antenna and its materials.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/FjXFVmJ6CmQ",
    "title": "CMP measurements with a spatially heterogeneous permittivity/conductivity distribution",
    "original_post": {
      "author": "Stefan Jaumann",
      "date": "Mar 23, 2018, 10:04:35AM",
      "content": "Dear gprMax users, \n\nI'd like to ask for a best procedure to use gprMax to model a common mid-point (CMP) radargram based on a spatially varying permittivity and conductivity field in 2D.\nConcerning the spatially varying permittivity and conductivity field, do I have to assign a material for each permittivity/conducivity value or is there a way to read this data from a file?\nReading the docs (http://docs.gprmax.com/en/latest/index.html), I'm not sure how to model typical GPR measurement procedures with moving transmitter and receiver positions. \nIs there a way to model time-lapse measurements that use a spatially stationary antenna configuration with a temporally (t >> 1 s) varying permittivity and conductivity field?\n\nThank you very much for your help!\n\nKind regards, \nStefan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 23, 2018, 12:39:54PM",
        "content": "Hi Stefan,\n\nThere is no direct method to create a continuously varying spatial distribution of the permittivity and conductivity other than using our fractal distribution. However, you can easily import (via the #geometry_objects_read command) your own distribution from a matrix in a HDF5 file. See the docs - http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n\nYou can automate/script the movement of transmitter and receivers using a block of Python in your input file, or if the positions are straightforward you can use the #src_steps and #rx_steps commands.\n\nFinally, I would treat each time lapse measurement as a separate model. You could still script the entire thing from a single input file though by using some Python, i.e. you could load in a different permittivity and conductivity distribution from HDF5 file for each run of the input model by utilising the 'current_model_run' variable, see the docs - http://docs.gprmax.com/en/latest/python_scripting.html#constants-variables\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Stefan Jaumann",
        "date": "Mar 23, 2018, 7:28:00PM",
        "content": "Hi Craig, \n\nThank you very much for the effort to provide the software and to answer the questions! \n\nAll the best, \nStefan"
      },
      {
        "author": "Stefan Jaumann",
        "date": "Mar 30, 2018, 8:15:07AM",
        "content": "Hi Craig, \n\nI'm having a rather hard time generating a HDF5 file of the desired format. \nIn the meantime, I found out the ordering of the 3D array (z, y, x), however, it is still a mystery to me, how to create h5 attributes that contain commata and empty spaces (\"dx, dy, dz\"). I think, it would be so much easier to use \"dx_dy_dz\" :-). However, I might be missing something and this can actually be accomplished easily. Do you have a code snipplet available that can create a file of the desired format? That would be really great!\n\nBy the way, I'm also not sure how to prescribe the desired number of outputs (samples) for one trace (Ascan).\n\nKind regards, \nStefan"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 3, 2018, 7:27:01AM",
        "content": "Hi Stefan,\n\nIf I were doing it, I would use MATLAB to create a HDF5 file as it has some high-level functions for adding datasets and attributes. A very simple example to give you an idea, would be:\n\ndata=[1 1 1];\n>> h5create('myfile.h5','/data',data,'DataType','int16');\n>> h5writeatt('myfile.h5','/','dx, dy, dz',[0.001 0.001 0.001]);\n>> h5disp('myfile.h5')\nHDF5 myfile.h5 \nGroup '/' \n    Attributes:\n        'dx, dy, dz':  0.001000 0.001000 0.001000 \n    Dataset 'data' \n        Size:  1x1x1\n        MaxSize:  1x1x1\n        Datatype:   H5T_STD_I16LE (int16)\n        ChunkSize:  []\n        Filters:  none\n        FillValue:  0\n\nThe number of samples in a A-scan is governed by the number of timesteps in the model, which itself depends on the temporal resolution (from the CFL condition) and the specified time window.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Stefan Jaumann",
        "date": "May 14, 2018, 5:07:20AM",
        "content": "Hi Craig, \n\nThank you very much for the reply!\n\nCurrently, I can't use matlab, I just have octave and python at my disposal and I have to create the hdf5 file with octave. As far as I know, octave doesn't have an elaborated hdf5 functionality and only supports variable names as attributes, which naturally cannot have spaces. As a workaround, I implemented a clumpsy python function that creates a new file with the desired attributes. Since I only have to deal with a small number of comparatively small files, it is ok for me to copy the file. I post the fuction below, since it took me a while to figure it out and it might be of some help for other users of this forum.\n\nimport h5py\nimport sys\nimport os\nimport numpy as np\n\ndo_test = False\n\nfilename_in  = 'data_eval_test.h5'\nfilename_out = 'data_eval_test_tmp.h5'\n\n  # read the original file\nf_in = h5py.File(filename_in,\"r\");\n\ndset_in_1_value = f_in['data/value']\ndset_in_1_type  = f_in['data/type']\n\ndset_in_2_value = f_in['dx_dy_dz/value']\ndset_in_2_type  = f_in['dx_dy_dz/type']\n\ndata_array_1 = np.array(dset_in_1_value.value)\ndata_array_2 = np.array(dset_in_2_value.value)\n\nf_out                      = h5py.File(filename_out,\"w\");\ndset_out_1                 = f_out.create_dataset(\"data\", data=data_array_1)\nf_out.attrs[u'dx, dy, dz'] = data_array_2[0][0], data_array_2[1][0], data_array_2[2][0]\n\nf_out.close()\nf_in.close()\n\n# move the generated file to the original file\nos.rename(filename_out, filename_in);\n\n\nif do_test == True:\n    # test the reading method implemented in gprMax\n  f = h5py.File(filename_in,\"r\");\n  dx_dy_dz = f.attrs['dx, dy, dz']\n\n  print('Check output')\n  print(dx_dy_dz)\n  print(dx_dy_dz[0])\n  print(dx_dy_dz[1])\n  print(dx_dy_dz[2])\n\n  data = f['/data'][:]\n  #print(data)\n\n  if data.dtype != 'int16':\n    data = data.astype('int16')\n\nWith that one, I can use gprMax as desired. However, if I may suggest an improvement of the gprMax code for a future version: Maybe you can catch the error that the attribute 'dx, dy, dz' is not found and then search for the 'dx_dy_dz' attribute instead. \n\nThank you very much for your help and assistance!\n\nKind regards, \nStefan"
      },
      {
        "author": "Craig Warren",
        "date": "May 23, 2018, 12:50:02PM",
        "content": "Hi Stefan,\n\nThis maybe not what you want to hear, given the script you have written.....but I have had time to take your suggestion on board and have changed the name of the attribute from 'dx, dy, dz' to 'dx_dy_dz' as you suggested.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Stefan Jaumann",
        "date": "May 24, 2018, 1:48:40AM",
        "content": "Hi Craig, \n\nThank you very much for taking the time and caring about the suggestions from the users!\n\nHopefully, you did not just change the name of the attribute, but caught the error \"attribute 'dx, dy, dz' is not found\", in order to ensure backward compatibility 😋. Alternatively, one could check which of the attributes ('dx, dy, dz' or 'dx_dy_dz') is available and use that one. Naturally, this will make the code a little bit more complicated, but otherwise, users who utilizied this interface sofar might face problems with the current version of your code. However, I also think, that it is a design decision, whether you want to ensure backward compatibility or not.\n\nKind regards, \nStefan"
      },
      {
        "author": "Craig Warren",
        "date": "May 29, 2018, 10:04:44AM",
        "content": "Hi Stefan,\n\nNo problem.\n\nYou are correct, backwards compatibility is a design decision. We keep major features as backwards compatible as possible, but for something fairly minor like this we prefer to not clutter the code ;-)\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 2, 2018, 2:52:51PM",
        "content": "Craig and Stefan,\n\nI've been perusing this thread along with others and I'm still unsure how this works exactly. I wrote out a geometry file using #geometry_objects_write using a 2D model that is 12 m by 6 m by 0.034 m with dx=dy=dy 0.034 m.\n\nThe model is homogeneous relative permittivity of 2 with a small inclusion near the middle of the domain with relative permittivity = 4. Conductivity is 0, and magnetic permeability is that of free space.\n\nWhen I write out the geometry, I get a an .h5 file with attributes of gprMax, Title, and dx_dy_dz.\n\nThere are datasets of ID, data, rigidE, and rigidH.\n\nCould you describe each of these data sets in more detail? It looks like the 'data' dataset corresponds to my relative permittivity.\n\nThanks!\n\nAdam R. Mangel"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 5, 2018, 3:51:35AM",
        "content": "Hi Adam,\n\nYou are mostly correct in your thinking, however let me explain what the different datasets are:\n\n'data' - this is the most important dataset. It is not the relative permittivity of materials, but contains integer IDs that are linked to the list of materials given in the corresponding materials text file that goes along with the .h5 file. So whatever material is first in the list will correspond to ID=0, second ID=1 etc... If you are creating your own .h5 file (rather than using #geometry_file_write) then this is the only dataset you should specify, see http://docs.gprmax.com/en/latest/input.html#geometry-objects-read\n'ID', 'rigidE', 'rigidH' - are datasets generated and used internally by gprMax - you should not set or change any of these datasets yourself. The ID dataset sets a numeric ID for a material for every Yee cell edge. So it is similar to the 'data' dataset which works on a per-cell basis, but instead works on a per-edge basis. The 'rigidE' and 'rigidH' datasets are used to determine which materials should undergo dielectric smoothing. \nHope this helps.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 5, 2018, 9:29:47AM",
        "content": "Hey Craig,\n\nThanks! It's been some time since I used GPRMax and I'm relearning it as I type this. It looks like the software is far more functional than when I used it 10 years ago. I seem to remember there being a limit on the number of materials that you could assign. Is this still the case?\n\nAdam"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 5, 2018, 9:40:28AM",
        "content": "Hi Adam,\n\nNo worries. There are quite a few new features and functions with the new code that we hope you'll find useful. I don't think the old code had a limit of the number of materials but you did have to specify a number so memory could be allocated. In the new code there is no limit on the number of materials you can use - the building time of the model may be affected, but not much if you are loading a pre-built dataset in from .h5 file. \n\nIf you are able to say how you are using of plan to use gprMax it is always of interest to us to know.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 5, 2018, 12:21:36PM",
        "content": "I'm hoping to use GPR max for some coupled modeling with a hydrologic model, so I need to specify properties for each cell. I think the old GPRmax code had the number of elements coded as an int8 which meant that I could only have 128 materials. I did some binning of the data to get closer to this, but it wasn't good enough.\n\nAdam"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 5, 2018, 1:04:56PM",
        "content": "Hi Adam,\n\nThe new code has no very stringent memory limitations of that kind (but there are always some limits ;-)) but in the old code (that I can comment on ;-)) originally the number of materials was controlled by a short int which meant you had about 32768 possible materials. I should have used an unsigned one to double this but these days these were a lot of materials .... Binning properties makes sense even now as processing and cell averaging will create a lot of materials that are practically the same but they will waste resources and take much more time to setup in building a complex model. \n\nHope the new version, that is a lot more powerful, will be of help!\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5EgMGIYc7ow",
    "title": "Set pec in the material.txt file",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Dec 15, 2020, 6:17:59PM",
      "content": "Dear gprMax users and developers,\n\nCould you tell me how I can define the pec material in the material.txt file?\n\nI'm importing my geometry by arquivo.h5 and need to set some metallic pipes\n\nRegards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 19, 2021, 4:52:51AM",
        "content": "Dear Bruno,\n\nThe following will tell gprMax to use the update equations for pec:\n\n#material: 1 inf 1 0 mypec\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ho7VQwDwtac",
    "title": "Why the gprMax code always made my computer restart?",
    "original_post": {
      "author": "HJJ HJJ",
      "date": "Dec 16, 2018, 8:22:55PM",
      "content": "Hi friend,\n\nSorry for a new and strange problems, to ask you again.\nI have used gprMax for a long time and it i is very good. But a new gprMax code always made my computer restart. It really confused me. Both prompt information and codes are attached.\nMaybe you can help me. Thanks very much!\n HJJ"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 17, 2018, 6:11:17AM",
        "content": "Hi HJJ,\n\nCan you post this on our issue tracker on GitHub please - https://github.com/gprMax/gprMax/issues Please add some more information about the machine you are using and the error reported in gprMax or a screenshot of the command prompt when the problem occurs. \n\nI tested your input file on my machine, and it started to run OK.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/efmcWtgh6E8",
    "title": "Modeling saline tracer in fractures",
    "original_post": {
      "author": "Alexis Shakas",
      "date": "Feb 22, 2016, 6:40:36AM",
      "content": "Hello,\n\nI have been a gprMax user for about a year now and its great to see the new python version! I especially appreciate the manual scripting option that you have added, and thats where the question comes in.\n\nI am trying to model gpr reflection imaging from thin fractures (in the cm scale). My domain is rather large for this discretization (at lest 10 cubic meters). I have already succeded in modeling the reflection from water filled fractures in granite using the following script:\n\n#title: propagation and reflection from water filled fractures\n#domain: 10.0 10.0 10.0\n#dx_dy_dz: 0.01 0.01 0.01\n#time_window: 120e-9\n#num_of_procs: 20\n#medium: 5.0 5.0 0.0 0.001 1.0 0.0 granite\n#medium: 81.0 81.0 0.0 0.1 1.0 0.0 fracture\n#box: 0.0 0.0 0.0 10.0 10.0 10.0 granite\n#box: 7.0 3.0 3.0 7.10 7.0 7.0 reflector\n#hertzian_dipole: 1.0 100e6 ricker rick\n#analysis: 1 10cm_fracture.out b\n#tx: z 2.0 5.0 5.0 rick 0.0 50e-9\n#rx: 4.0 5.0 5.0\n#rx: 5.0 5.0 5.0\n#rx: 6.0 5.0 5.0\n#end_analysis:\n\n\nWhat I would like to do now is to change the conductivity of the cells in the fracture medium so that I can simulate GPR reflections from a conductive (saline) tracer flowing in this fracture. I would like to input these conductivity values myself, which will be a results of a flow and transport simulation. So essentially I need to access the cells of the fracture and change their electrical conductivity.\n\nIs there an easy way to do this? (i.e., to iterate over the fracture cells and change their electrical conductivity values?)\n\nThanks a lot in advance and thank you for making this code open source!\n\nAlexis"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 22, 2016, 7:05:07AM",
        "content": "Hi Alexis,\n\nThis is a rather large simulation your are running! you should be using a big computer ;-)\n\nWe have done something similar in a 2D simulation of DNAPL remediation. In order to link the results of a fluid flow model we had to create a script that determined the electrical parameters  of a small box according to the required mixing model. \n\nThe only way to do this for your variable conductivity in the fracture is to script the input file. In the new code you can do this directly in python. The alternative is to create scripts in MATLAB that create your input file. This is what we did in the old code and can be done for the new ones as well if you are more familiar with MATLAB. \n\nThe best way to do this is to decide on a number of different media that will represent your conductivity variation and then each little FDTD box in your fracture will take the appropriate medium parameter according to each position. It is important to \"bin\" the variation of conductivity as otherwise you can end up with too many different media.\n\nWe are looking to test the new code for speed as there are some issues that we have discovered so, if you have time and can do some tests in your system comparing it with the old code will be great!\n\nBest wishes\n\nAntonis"
      },
      {
        "author": "Alexis Shakas",
        "date": "Feb 22, 2016, 9:50:42AM",
        "content": "Hello Antonis and thanks for the very fast reply! \n\nIt is indeed a large simulation and I am running it on a cluster of processors with a lot of memory. The reason the discretisation is so small is to capture the physics of the propagating wave in the fracture (10 cm fracture so 10 nodes should be sufficient, hence 1 cm discretization!).\n\nAs for the input file, if I understand correctly the approach you propose, I would need to:\n1) create many separate materials representing the conductivity variation in the fracture\n2) write a script that assigns a material (conductivity variation) to a box using the #box command to create the conductivity map in the fracture\n\nIs this correct? If so, I have two follow up questions :-)\na) is there a limit on the number of boxes I can defin using the #box command?\nb) is there a more direct way to do this by assigning directly the conductivity value to the corresponding yee cell (using the python scripting option)\n\nAs for the speed test, this problem takes me about 7h to run (without conductivity variations but i guess it shouldn't make a difference). This runtime is with 20 processors.\nIf it helps, I can run the same problem with the old code for comparison as I dont recall exactly how long it took and if it was exactly the same problem. Are you looking for just a rough comparison or something more specific?\n\n\nThank you again for your time!\n\nBest regards,\nAlexis"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 23, 2016, 9:36:51AM",
        "content": "Hi Alexis,\n\na) There is no limit on the number of boxes you can have. Obviously, processing them might take some time but the fracture is not really very big in terms of the overall size of the model so it should be OK. We have done similar models in such a way but not as big (big enough ...)\nb) There is no direct way to just add conductivity to a Yee cell. The reason is mostly a code design one. If every Yee cell component had its own material variables the overall memory requirements will be too big. So, we use a hash lookup table for the variables used in the FDTD update equations. This works well even for 1000s of different materials. If you think about  capturing the variation of conductivity using a 1000 media descriptions should be enough (even less is OK). Going into the 10,000s should work as well and it is still more memory efficient than specifying parameters for every yes cell (you have almost a billion of them?) \n\n With the new python based code there is scope to develop models and bespoke commands to introduce interesting features in the model. For example we have the Peplinski soil model and the possibility for fractal and rough surface boxes. If you want to develop something to model fractures automatically we will be more that happy to include it in the code.\n\nMoving to a Python/Cython codebase means that some performance is sacrified for ease of implementation and increased capacity for new features. We are looking into issues of performance and actually if you follow the updates there might be something soon that might improve the current performance. Any comparison of speedup in your architecture will be very welcome as we cannot test for more than 8 cores easily. Comparisons with the old code are helpful as well. However, these should not get in the way of your work ;-)\n\n\nBest\n\nAntonis"
      },
      {
        "author": "Alexis Shakas",
        "date": "Mar 15, 2016, 12:25:33PM",
        "content": "Hello Antonis,\n\njust a small update on the problem I am tackling. Firstly, it turns out that I can not use the newly developed python version of gprMAX on our cluster because it uses the older version of python and it seems quite difficult to change that (since many other applications depend on it). Therefore, I run all the simulations with the older version of gprMAX and cannot use the python loop to create the conductivity variation. Also, this means that I will not be really helpful for comparing performance since I can not run this problem on my personal computer (where the python version of gprMAX works perfectly fine!).\n\nNevertheless, as you suggested above I now create a long list of materials and then assign another long (same length) list of boxes with the material properties. These changes reflect electrical conductivity variations in a fracture that has constant aperture (10 cm in this case). This aperture may be quite big but the discretization does not allow for smaller apertures since with 1 cm discretization there need to be sufficient nodes (10 in this case) within the fracture to capture the physics. I create the conductivity variations with a multi-gaussian random field generator and assign a correlation length of 1m. The run-time for this problem is ~9h30min on the cluster, using 20 processors and several GBit of memory (about 40 if im not mistaken).\n\nAs far as gpr max is concerned, the essential commands to assign a large number of materials seem to be: \n#number_of_media: 579\nand\n#nips_number: 4632 \n\nThe first input is the actual number of media being defined (+2) and the second input is a number that was requested by the code itself, when I first tried to run the problem.\n\nOtherwise, it all works fine! I attach a file showing the geometry of the problem (geometry.png) if anyone is interetsed.\n\nThanks for the help and for providing the code as freeware to the community!\n\nBest regards,\nAlexis"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 15, 2016, 5:10:13PM",
        "content": "Hi Alexis,\n\nThanks for the description of the work and for sharing what you do. It sounds very interesting! Do not worry about performance comparisons. The important thing is to do the research that needs done. An option to run the new code on the cluster might be to install the new python in your own user space and run it as a user process. This should be possible with the miniconda installation process and it should work and will not affect the general system installation.\n\nSub-griding will have been ideal for your problem but it is not available in gprMax yet (although we have tried in the past with some success ...) \n\nLet me know if we can help with your modelling if needed. It sounds an interesting problem!\n\nGood luck\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NywLlSfQU5w",
    "title": "3D modeling using GPR-MAX",
    "original_post": {
      "author": "navid seifosadat",
      "date": "Jun 14, 2023, 3:07:41PM",
      "content": "Hi,\nThank you for making great software like gprmax.\nMy problem is : I do not how to create an input file for 3D modelling and also i want to know if we simulate a layered medium , how can i define a pml condition for each of them.\n\nthank you,\nNavid"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 16, 2023, 6:04:38AM",
        "content": "You do no need to specify different PML for each layer. It works for a layer problem. If you have small reflections you can increase the size of it or optimise the parameters but this requires knowledge and understanding of the theory behind the PML formulation.\n\nBest\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BuJOFIpkxEo",
    "title": "Rough Surface using Fractals",
    "original_post": {
      "author": "Diksha Sharma",
      "date": "Jul 3, 2024, 5:40:58AM",
      "content": "Hello all forum members,  I'm new to gprMax and using the documentation & online lectures by gprMax designer team i was able to simulate the multi layer wave propagation & target detection considering flat surfaces at interface.\n\nmy Next step is to add the roughness at the interface between two layers for which i used #add_fractal_box and later #add_surface_roughness but using it the distribution is not even throughout the layer !! \n\nCan anyone guide me through how to generate roughness in python and also how to put a window size in fractals (for roughness) which i can slide periodically over the entire surface ?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9gQ16fBDAUI",
    "title": "gprMax out put in Matlab",
    "original_post": {
      "author": "Noushin Khosravi Largani",
      "date": "Nov 8, 2023, 9:51:42AM",
      "content": "Hello\nHope you are well. I am trying to read the output of gprMax in Matlab using Matlab command for reding HDF5 files. The Dataset that is read by Matlab is empty, but it in fact, is not empty as I have A_scan plot of it. I would appreciate it if you could guide me on this issue and plotting the output of gprMax in Matlab.\nSincerely\nNoushin"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_HLcapaeqLU",
    "title": "Azure virtual machine performance",
    "original_post": {
      "author": "Gary Bennett",
      "date": "Aug 14, 2019, 4:23:04PM",
      "content": "Hello Group,\n\nI’ve created an Azure Virtual Machine (VM), (NC24s_v3 configuration with four Tesla V100's and 448GiB memory). My VM uses Ubuntu 18.04, Python 3.7.3, Cuda 10.1 v10.1.168, Openmpi 2.1.1, gprMax v3.1.5 for the main features. I’m planning on running many (~10k) simulations, so I want to make sure that my system(s) are running at peak performance.\n\nI ran my simulation files on the VM, and it was faster than my local desktop(Intel® Xeon(R) W-2123 CPU @ 3.60GHz × 8, 31.1 GiB), but it was only about twice as fast. It went from 2-minute per simulation to just under 1-minute/simulation. I was thinking that it should have been quite a bit faster. I’m not sure if this is a gprMax issue, or a Azure VM issue, if any at all. I am using a number of data output features from gprMax, and I could optimize those a bit, but the ‘running simulation’ time is taking the most time.\n\nIt appears that gprMax is acknowledging the additional resources available, but again the speed of processing doesn’t seem to be there. When running my simulations, I see the following displayed.\n\nHost: gprSim | Microsoft Corporation Virtual Machine | 2 x Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz (12 cores) | 441GiB RAM | Linux (4.18.0-1025-azure, debian)\nHost: gprSim | Microsoft Corporation Virtual Machine | 2 x Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz (12 cores) | 441GiB RAM | Linux (4.18.0-1025-azure, debian)\nHost: gprSim | Microsoft Corporation Virtual Machine | 2 x Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz (12 cores) | 441GiB RAM | Linux (4.18.0-1025-azure, debian)\nHost: gprSim | Microsoft Corporation Virtual Machine | 2 x Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz (12 cores) | 441GiB RAM | Linux (4.18.0-1025-azure, debian)\nGPU(s) detected: 0 - Tesla V100-PCIE-16GB, 15.8GiB | 1 - Tesla V100-PCIE-16GB, 15.8GiB | 2 - Tesla V100-PCIE-16GB, 15.8GiB | 3 - Tesla V100-PCIE-16GB, 15.8GiB\nGPU(s) detected: 0 - Tesla V100-PCIE-16GB, 15.8GiB | 1 - Tesla V100-PCIE-16GB, 15.8GiB | 2 - Tesla V100-PCIE-16GB, 15.8GiB | 3 - Tesla V100-PCIE-16GB, 15.8GiB\nGPU(s) detected: 0 - Tesla V100-PCIE-16GB, 15.8GiB | 1 - Tesla V100-PCIE-16GB, 15.8GiB | 2 - Tesla V100-PCIE-16GB, 15.8GiB | 3 - Tesla V100-PCIE-16GB, 15.8GiB\nGPU(s) detected: 0 - Tesla V100-PCIE-16GB, 15.8GiB | 1 - Tesla V100-PCIE-16GB, 15.8GiB | 2 - Tesla V100-PCIE-16GB, 15.8GiB | 3 - Tesla V100-PCIE-16GB, 15.8GiB\nStarting MPI spawned worker (parent: MPI_COMM_WORLD, rank: 1) on gprSim with model 2/100 using 1 - Tesla V100-PCIE-16GB, 15.8GiB RAM\nStarting MPI spawned worker (parent: MPI_COMM_WORLD, rank: 3) on gprSim with model 1/100 using 3 - Tesla V100-PCIE-16GB, 15.8GiB RAM\nStarting MPI spawned worker (parent: MPI_COMM_WORLD, rank: 0) on gprSim with model 4/100 using 0 - Tesla V100-PCIE-16GB, 15.8GiB RAM\nStarting MPI spawned worker (parent: MPI_COMM_WORLD, rank: 2) on gprSim with model 3/100 using 2 - Tesla V100-PCIE-16GB, 15.8GiB RAM\n\n-----------------------------------------------------------------------------------\nHere is a sample of my simulation screens that I see.\n\nRunning simulation, model 11/100: 100%|██████████████████████| 1273/1273 [00:00<00:00, 1391.72it/s]\nProcessing geometry related cmds: 100%|███████████████████████████| 3/3 [00:00<00:00, 572.13cmds/s]\nBuilding PML boundaries: 100%|██████████████████████████████████████| 4/4 [00:00<00:00, 691.67it/s]\nBuilding main grid: 100%|███████████████████████████████████████████| 2/2 [00:00<00:00, 155.81it/s]\nWriting geometry view file 1/1, geo_view13.vti: 100%|███████| 90.0k/90.0k [00:00<00:00, 114Mbyte/s]\nWriting geometry object file 1/1, sim_geometry.h5: 100%|██████| 837k/837k [00:00<00:00, 167Mbyte/s]\nRunning simulation, model 12/100: 100%|██████████████████████| 1273/1273 [00:01<00:00, 1251.95it/s]\nCompleted MPI spawned worker (parent: MPI_COMM_WORLD, rank: 1) on gprSim with model 10/100 using 1 - Tesla V100-PCIE-16GB, 15.8GiB RAM in [HH:MM:SS]: 0:00:00.969334\n\nCompleted MPI spawned worker (parent: MPI_COMM_WORLD, rank: 0) on gprSim with model 11/100 using 0 - Tesla V100-PCIE-16GB, 15.8GiB RAM in [HH:MM:SS]: 0:00:00.933519\n\nStarting MPI spawned worker (parent: MPI_COMM_WORLD, rank: 1) on gprSim with model 14/100 using 1 - Tesla V100-PCIE-16GB, 15.8GiB RAM\n\nStarting MPI spawned worker (parent: MPI_COMM_WORLD, rank: 0) on gprSim with model 15/100 using 0 - Tesla V100-PCIE-16GB, 15.8GiB RAM\n-----------------------------------------------------------------------------------\n\n\nI’ve run the benchmark test from the gprMax website on the VM and here’s what it seems to be reporting.\n\npython -m tests.benchmarking.plot_benchmark tests/benchmarking/bench_100x100x100.npz\nHost: Microsoft Corporation Virtual Machine; 2 x Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz (12 cores); 441GiB RAM; Linux (4.18.0-1025-azure, debian)\nModel: tests/benchmarking/bench_100x100x100.npz\n12 CPU (OpenMP) thread(s): 105.919 s\n6 CPU (OpenMP) thread(s): 54.2655 s\n4 CPU (OpenMP) thread(s): 43.4001 s\n2 CPU (OpenMP) thread(s): 37.2981 s\n1 CPU (OpenMP) thread(s): 40.3951 s\n-----------------------------------------------------------------------------------\n\n\nEverything appears to be compiling/running okay without errors, so I’m not seeing a setup issue that I know of.\n\nMy questions are…\nDoes this seem like best/fastest time that I can get or expect from my Azure VM?\nAre there other tests or settings that I should be looking at?\n\nThank you...Gary"
    },
    "responses": [
      {
        "author": "Gary Bennett",
        "date": "Aug 14, 2019, 4:27:22PM",
        "content": "Here is a .png of my benchmark test."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Aug 15, 2019, 6:23:40AM",
        "content": "Hi Gary,\n\nI am not the best person to answer this especially with regards to settings etc. but if you first consider the CPU multithreaded only case you should be able to achieve a similar speedup trend as seen in Figure 1 of\n\n https://www.sciencedirect.com/science/article/pii/S0010465518303990#fig1\n\nYou are using a relatively small domain (100^3) which means the speedup will level off and be reduced after  8 to 10 threads or even less depending on the CPU, as communication and setting up threads etc. becomes more costly than computation itself. The bigger the domain the longer you can sustain an increase to speed up with the number of threads. However, from your results we do not see this. From serial execution to a two thread OpenMP one the speedup should be rather good (OK not linear ..) but your 1, 2, and 4 CPU results are rather poor.\n\nI don't know if this has to do with the VM setup.\n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 16, 2019, 2:26:26AM",
        "content": "Hi Gary,\n\nAs Antonis said the performance scaling for either CPU (with OpenMP) or GPU (with CUDA) is affected by the size of the model. It looks like your model is small, and certainly the 100^3 benchmark model won't scale well. \n\nI have benchmarked a V100, see the results https://twitter.com/gprMax_fdtd/status/1144264961792860160?s=20, so you should be able to achieve this level of performance. The results were calculated with the benchmark models and the following performance metric:\n\nP = (NX x NY x NZ x NT) / (T x 1e6),\n\nwhere NX, NY, and NZ are the size of the model domain in cells, NT is the number of time steps, and T is the runtime of the simulation.\n\nHope this helps,\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Gary Bennett",
        "date": "Aug 30, 2019, 3:30:04PM",
        "content": "Craig/Antonis,\n\nI hope you had a good holiday Craig.  It’s nice to take a long break every now and then.\n\nI agree with both of you on your comments on my last post(s).  I’m looking for more direction or hints on how I might speed up my VM to get the performance that you were seeing with your benchmarking.  I think that I’ve been following most of the install instructions on your website and with the other third-party sites.  I’ve tried to keep the installs simple and basic.\n\nSome changes that I’ve made since my first post, was to make a system call to gprMax instead of the api() call.  The api() call option just didn’t work in my program.  Second, I’ve upgrade the OpenMPI from version 2.1.1 to version 4.0.1.  I’m still using the CUDA 10.1.  I’ve appended the correct directories to the PATH and LD_LIBRARY_PATH environment variables.  I have the latest gprMax version 3.1.5 loaded onto the VM.\n\nI’ve tested the VM by running this test model from your website:\npython -m gprMax user_models/cylinder_Bscan_2D.in -n 60 -mpi 5 -gpu 0 1 2 3\nand that appears to execute without errors.  It appears that MPI and the gpu’s are defined and used.  Note that it took me 31 seconds to execute that model.\n…\nCompleted MPI spawned worker (parent: MPI_COMM_WORLD, rank: 0) on xbore with model 58/60 using 0 - Tesla V100-PCIE-16GB, 15.8GiB RAM  in [HH:MM:SS]: 0:00:00.502627\n\nCompleted MPI spawned worker (parent: MPI_COMM_WORLD, rank: 1) on xbore with model 57/60 using 1 - Tesla V100-PCIE-16GB, 15.8GiB RAM  in [HH:MM:SS]: 0:00:00.617820\n\nRunning simulation, model 59/60: 100%|█████████████████████████| 637/637 [00:00<00:00, 1621.02it/s]\nMemory (RAM) used: ~265MB host + ~337MB GPU\nSolving time [HH:MM:SS]: 0:00:00.394157\nRunning simulation, model 60/60:  88%|██████████████████████   | 561/637 [00:00<00:00, 1396.49it/s]Completed MPI spawned worker (parent: MPI_COMM_WORLD, rank: 2) on xbore with model 59/60 using 2 - Tesla V100-PCIE-16GB, 15.8GiB RAM  in [HH:MM:SS]: 0:00:00.394157\n\nRunning simulation, model 60/60: 100%|█████████████████████████| 637/637 [00:00<00:00, 1384.23it/s]\nMemory (RAM) used: ~263MB host + ~337MB GPU\nSolving time [HH:MM:SS]: 0:00:00.461212\nCompleted MPI spawned worker (parent: MPI_COMM_WORLD, rank: 3) on xbore with model 60/60 using 3 - Tesla V100-PCIE-16GB, 15.8GiB RAM  in [HH:MM:SS]: 0:00:00.461212\n\n=== MPI master (MPI_COMM_WORLD, rank: 0) on xbore completed simulation in [HH:MM:SS]: 0:00:30.920000 ======\n\nTo see if my VM is performing well, I’m comparing it to your results from your website, by running your benchmark model.\npython -m gprMax tests/benchmarking/bench_100x100x100.in -benchmark\nand\npython -m tests.benchmarking.plot_benchmark tests/benchmarking/bench_100x100x100.npz\nresults:\n(gprMax) xbore@xbore:~/repo/gprMax$ python -m tests.benchmarking.plot_benchmark tests/benchmarking/bench_100x100x100.npz\nHost: Microsoft Corporation Virtual Machine; 2 x Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz (12 cores); 441GiB RAM; Linux (5.0.0-1016-azure, debian)\nModel: tests/benchmarking/bench_100x100x100.npz\n12 CPU (OpenMP) thread(s): 132.226 s\n6 CPU (OpenMP) thread(s): 53.9589 s\n4 CPU (OpenMP) thread(s): 47.6545 s\n2 CPU (OpenMP) thread(s): 38.8219 s\n1 CPU (OpenMP) thread(s): 37.879 s\n\nI also ran the 450 benchmark.\n(gprMax) gb16393@xbore:~/Temp$ python -m tests.benchmarking.plot_benchmark bench_450x450x450.npz\nHost: Microsoft Corporation Virtual Machine; 2 x Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz (12 cores); 441GiB RAM; Linux (5.0.0-1016-azure, debian)\nModel: bench_450x450x450.npz\n12 CPU (OpenMP) thread(s): 5421.84 s\n6 CPU (OpenMP) thread(s): 4650.99 s\n4 CPU (OpenMP) thread(s): 4355.62 s\n2 CPU (OpenMP) thread(s): 3931.72 s\n1 CPU (OpenMP) thread(s): 3619.69 s\nIt took my VM 1hr 20minutes to run the benchmark_450x450x450 test.  Also, the ‘Number of CPU (OpenMP) threads’ is listed for ‘Time’ but not in the second ‘Speed-up factor’ graph. I don't know if this is telling of anything.\n\nAlso, I’m supposed to have (2) 12 core system for a total of 24 cores, but only 12 show up active.  I’ve not limited my total possible threads (OMP_NUM_THREADS).  I know that more cores doesn’t always speed up the processing, just an item of interest.\n\nI’m comparing my results to your Linux Dell PowerEdge R630 results, and it seems like my performance is completely opposite of yours.  The more CPU’s the slower and my GPU performance is 12-Mcells/s to your 2227-Mcells/s on your 100^3 benchmark test.  \n\nDo you have any thoughts or recommendations of what I might do to my VM to improve the performance?\n\nAre there any other gprMax diagnostic models that I can run to give me some idea what might be missing from my setup?\n\nDo you know of others that have used Microsoft Azure VM’s like my configuration with success?\n\nAt my current performance, it will take me 20-days to run my 10k simulations.  Any help, hints, or ideas would be greatly appreciated.  I’ve looked on some Azure forums, but haven’t found any clues to help me boost performance.  I’m sure it’s operator error somewhere, I just can’t find where.\n\nThank you,\n Gary"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 3, 2019, 3:51:06AM",
        "content": "Hi Gary,\n\nSo it looks like the GPUs and MPI are working together OK. Your system setup and installation all sounds OK, I don't see any obvious problems. The OpenMP CPU threading performance is very strange - there should always be some speed-up from increasing the number of cores. I would suggest a couple of things:\n\nLets confirm you are getting expected performance from the GPUs. If you can run each of the benchmark models, i.e. 100^3, 150^3, 200^3, 300^3, 400^3, and 450^3, on a single GPU without the benchmark flag, e.g. `python -m gprMax tests/benchmarking/bench_100x100x100.in -gpu 0`. Note the simulation time for each and then calculate the throughput based on the equation I gave in my previous post. For the larger models the V100 should be achieving ~6000 MCells/s\nWhen you run a model on CPU (without the benchmark flag) does gprMax correctly detect and use the 24 (2 x 12) cores?\nRun the tests in 1 on CPU, i.e. without the benchmark flag\nThe reason for not using the benchmark flag is that the code for that needs updated (or most probably removed) to better handle CPU and GPU benchmarking. It was added for convenience to the user, but in the next release we'll probably remove it and provide instructions for benchmarking (similar to the above) and an external script for the plotting.\n\nNo aware of anyone else who has tried gprMax on MS Azure VW.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Gary Bennett",
        "date": "Sep 3, 2019, 4:46:07PM",
        "content": "Craig,\n\nThanks for your speedy response.  Below are the tests that I ran per your request.  I added in a mpi/gpu test just as more data points.\n\nUsing cmds: `python -m gprMax tests/benchmarking/bench_100x100x100.in -gpu 0`\n    NX, NY, NZ NT         T(s)           P    \ngpu 0 100  1559 1.02         1531.49    \ngpu 0 150  1559 1.1         4783.30    \ngpu 0 200  1559 2.36         5284.75    \ngpu 0 300  1559 7.2         5846.25    \ngpu 0 400  1559 16.54 6032.41    \ngpu 0 450  1559 23.66 6004.39    \n        Using cmds: `python -m gprMax tests/benchmarking/bench_100x100x100.in` (no gpu)   \n NX, NY, NZ NT         T(s)          P    \ncpu 100          1559 9         173.22    \ncpu 150          1559 21          250.55    \ncpu 200          1559 41          304.20    \ncpu 300          1559 121          347.88    \ncpu 400          1559 288          346.44    \ncpu 450          1559 417          340.68    \n        Using cmds: ‘python -m gprMax tests/benchmarking/bench_450x450x450.in -n 60 -mpi 5 -gpu 0 1 2 3’\n(Trying the benchmark files with the mpi/gpu settings. The speed up factor is my assessment based on the single gpu 0 runs above.)\n NX, NY, NZ NT         T(s) P n T/n (s) % inc speed fact\nGpu/Mpi 100  1559 60 --- 60 1.00         1.8%  1.0\nGpu/Mpi 150  1559 73 --- 60 1.22         -10.6%  0.9\nGpu/Mpi 200  1559 105 --- 60 1.75          25.8%  1.3\nGpu/Mpi 300  1559 256 --- 60 4.27          40.7%  1.7\nGpu/Mpi 400  1559 538 --- 60 8.97          45.8%  1.8\nGpu/Mpi 450  1559 768 --- 60 12.80  45.9%  1.8\n\nObservations:\nUsing the mpi/gpu cmd, a number of the ‘Running simulation…’ would start with a gpu, get interrupted up to four times before completing the run, with a different gpu.  It usually will finish them, but it seems like a lot of interrupted processing. I assume that is messing with my speedup factor. (see below)\n--- Model 52/60, input file: tests/benchmarking/bench_450x450x450.in ------------------------------\nRunning simulation, model 50/60:  32%|████████▎                 | 497/1559 [00:06<00:16, 65.81it/s]Number of CPU (OpenMP) threads: 12\nGPU solving using: 1 - Tesla V100-PCIE-16GB\nSpatial discretisation: 0.001 x 0.001 x 0.001m\nDomain size: 0.45 x 0.45 x 0.45m (450 x 450 x 450 = 9.1125e+07 cells)\nMode: 3D\nTime step (at CFL limit): 1.92583e-12 secs\nTime window: 3e-09 secs (1559 iterations)\nRunning simulation, model 49/60:  43%|███████████▎              | 678/1559 [00:09<00:13, 65.81it/s]Hertzian dipole with polarity x at 0.05m, 0.05m, 0.05m, using waveform MySource created.\nMemory (RAM) required: ~6.51GB host + ~6.51GB GPU\nProcessing geometry related cmds: 0cmds [00:00, ?cmds/s]        | 769/1559 [00:10<00:12, 65.80it/s]\nPML: formulation: HORIPML, order: 1, thickness: 10\nBuilding main grid: 100%|████████████████████████████████████████████| 2/2 [00:12<00:00,  6.15s/it]\n\nOutput file: /home/xbore/repo/gprMax/tests/benchmarking/bench_450x450x45051.out\nBuilding PML boundaries: 100%|███████████████████████████████████████| 6/6 [00:11<00:00,  1.91s/it]\nRunning simulation, model 49/60: 100%|█████████████████████████| 1559/1559 [00:22<00:00, 68.63it/s]\nRunning simulation, model 51/60:  40%|██████████▍               | 628/1559 [00:08<00:14, 66.14it/s]Memory (RAM) used: ~2.83GB host + ~4.97GB GPU\nSolving time [HH:MM:SS]: 0:00:23.699740\nRunning simulation, model 51/60:  41%|██████████▌               | 635/1559 [00:08<00:14, 64.89it/s]Completed MPI spawned worker (parent: MPI_COMM_WORLD, rank: 2) on xbore with model 49/60 using 2 - Tesla V100-PCIE-16GB, 15.8GiB RAM  in [HH:MM:SS]: 0:00:23.699740\nStarting MPI spawned worker (parent: MPI_COMM_WORLD, rank: 2) on xbore with model 53/60 using 2 - Tesla V100-PCIE-16GB, 15.8GiB RAM \nRunning simulation, model 50/60:  93%|███████████████████████▎ | 1456/1559 [00:21<00:01, 66.07it/s]\nRunning simulation, model 50/60: 100%|█████████████████████████| 1559/1559 [00:22<00:00, 68.64it/s]\n--- Model 53/60, input file: tests/benchmarking/bench_450x450x450.in ------------------------------\n\n****\nThis is what gprMax reports for one of the tests.  It always indicates just 12-threads available out of the possible 24.  This is reported within gprMax.\n--- Model 1/1, input file: tests/benchmarking/bench_200x200x200.in -------------------------------------------\nNumber of CPU (OpenMP) threads: 12\nSpatial discretisation: 0.001 x 0.001 x 0.001m\nDomain size: 0.2 x 0.2 x 0.2m (200 x 200 x 200 = 8e+06 cells)\nMode: 3D\nTime step (at CFL limit): 1.92583e-12 secs\nTime window: 3e-09 secs (1559 iterations)\nMemory (RAM) required: ~626MB\nRunning simulation, model 1/1: 100%|███████████████████████████████████████████████████████| 1559/1559 [00:41<00:00, 37.98it/s]\nMemory (RAM) used: ~539MB\nSolving time [HH:MM:SS]: 0:07:55.453859\n=== Simulation completed in [HH:MM:SS]: 0:07:57.114321 ===================================\n\n****\nI ran this command on my VM to see what it detects for CPU/cores/threads after running some of the previous tests:\n(gprMax) xbore@xbore:~/repo/gprMax$ lscpu | egrep 'Model name|Socket|Thread|NUMA|CPU\\(s\\)'\nCPU(s):                   24\nOn-line CPU(s) list: 0-23\nThread(s) per core:  1\nSocket(s):                 2\nNUMA node(s):        2\nModel name:          Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz\nNUMA node0 CPU(s):   0-11\nNUMA node1 CPU(s):   12-23\n\n****\nAs an aside, for most of the performance tests I’ve used the ‘Running simulation’ time.  the ‘Solving time…’ and the ‘Simulation complete…’ times were sometimes radically different than the actual time.  I don’t know if it’s a bug, or if it represents something else.  This was a result of a single command, not when testing the mpi/gpu running multiple iterations.  The whole test actually took ~25-seconds for everything.\nRunning simulation, model 1/1: 100%|███████████████████████████████████████████████████████| 1559/1559 [00:21<00:00, 72.15it/s]\nMemory (RAM) used: ~277MB\nSolving time [HH:MM:SS]: 0:04:04.026181\n=== Simulation completed in [HH:MM:SS]: 0:04:04.997465 ========================\n\n\nThank you very much for your help on this issue.  Let me know if I can gather any more data.\n Gary"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 3, 2019, 7:01:18PM",
        "content": "I think we need to check how the OpenMP Cythonised parts of the code work with a NUMA architecture. This is not really something we have tested with and it might explain why gprMax sees by default on part of the machine i.e. one NUMA node. I am not sure this is the problem but otherwise does not make much sense. On normal SMP machines gprMax sees all the cores across the number of CPUs. The memory model of a NUMA machine is not identical to SMP but OpenMP does support it (at least v 4 and above).\n\nJust a thought ...\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 5, 2019, 3:22:41AM",
        "content": "Some more comments/thoughts:\n\nPerformance of the V100 GPU looks fine, and in line with what we have seen.\nThe 'Solving time' is the only time for benchmarking you should use as measures the solver, which is the parallelised bit (OpenMP or CUDA). Use of the other times may skew the results as they include the time taken to build the model, and the model building is not parallelised.\nI don't think the simulations are getting interrupted when running with GPUs and MPI. It is just the printing of messages (including progress bars) to the Terminal is asynchronous. You can check when the simulations are running on GPU with the 'nvidia-smi' tool to see what's going on.\nI remember thinking about the NUMA regions and Cython/OpenMP previously, but don't recall what the conclusion was. What would be useful to observe is if the allocated threads are being placed on a single NUMA region, i.e. when 12 threads are requested do they all go on NUMA region 0? Not sure how to monitor this, but there must a tool?\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 5, 2019, 3:29:11PM",
        "content": "Another couple of comments:\n\nIt seems the package we are using to detect number of physical and logical CPU cores is not working correctly with multi-socket architectures - basically reporting the wrong number of available physical cores, usually just for one socket. I've pushed a workaround to the master branch, so this should now report the correct number of cores on your system, i.e. 2 x 12 = 24 physical cores (48 logical cores). So now by default gprMax will try to use all physical cores (24) as OpenMP threads.\nHow the OpenMP threads are mapped onto cores across the 2 x NUMA regions on your system is another question. This is handled by setting a couple of OMP environment variables. We currently do this in the 'input_cmds_singleuse.py' module at lines 79 and 80. I'm pretty certain that OMP_PLACES should be set to 'cores' as we always want threads to map to physical cores. OMP_PROC_BIND is currently set to 'True' but it might be worth experimenting with values of 'close' and 'spread' to see how this effects performance on multi-socket systems. My feeling is that 'spread' might be optimal, as the FDTD algorithm is memory bandwidth bound, therefore spreading the threads as widely as possible between the sockets should mean they are not mostly sharing the same memory bus. Thoughts?\nKind regards,\n\nCraig"
      },
      {
        "author": "Gary Bennett",
        "date": "Sep 6, 2019, 11:47:33AM",
        "content": "Craig,\n\nI agree with your previous statements.  I think it was more of a logging issue and not a gpu interruption.  Just trying to find something to explain the slower speed.\n\nI did a pull and rebuilt/install.  ‘Number of CPU (OpenMP) threads: 24’, so that is looking better.  I did a lot of trying different combinations, but I was unable to improve the total time of processing.  I tried various combinations of OMP_PLACES=‘threads and cores’ along with OMP_PROC_BIND=‘spread and close’.  Nothing appeared to help.  I initially tried just modifying my ‘.bashrc’ file, but that actually caused my time to increase by another 30-sec to 1-minute, so modified the ‘input_cmds_singleuse.py’ and did a rebuild/install each time.\n\nI’ve been using the following command for all my evaluations.  I figured it was large enough to take advantage of the gpu, but not take too much time.  The best overall time that I’ve had was 4-minutes 26-seconds.\n$ python -m gprMax tests/benchmarking/bench_300x300x300.in -n 60 -mpi 5 -gpu 0 1 2 3\nDo you have access to a comparable machine as mine, and can you run that same command to see how long it takes to run on another machine?  \nWhat kind of time can I expect to see?  \nI want to make sure that my expectations are valid.  Maybe what I have is as good as it’s going to get.\n\nI don’t know if this was what you were interested in as far as threads and NUMA nodes, but I did run some simple commands to get some data outputs below.\n\nThis I think correctly identified the available nodes and cpu(s), statically.\n(base) xbore@xbore:~$ numactl --hardware\navailable: 2 nodes (0-1)\nnode 0 cpus: 0 1 2 3 4 5 6 7 8 9 10 11\nnode 0 size: 225694 MB\nnode 0 free: 224574 MB\nnode 1 cpus: 12 13 14 15 16 17 18 19 20 21 22 23\nnode 1 size: 225776 MB\nnode 1 free: 224710 MB\nnode distances:\nnode   0   1 \n  0:  10  20 \n  1:  20  10 \n\nThis is just some general overall info.\n(base) xbore@xbore:~$ lscpu\nArchitecture:        x86_64\nCPU op-mode(s):      32-bit, 64-bit\nByte Order:          Little Endian\nCPU(s):              24\nOn-line CPU(s) list: 0-23\nThread(s) per core:  1\nCore(s) per socket:  12\nSocket(s):           2\nNUMA node(s):        2\nVendor ID:           GenuineIntel\nCPU family:          6\nModel:               79\nModel name:          Intel(R) Xeon(R) CPU E5-2690 v4 @ 2.60GHz\nStepping:            1\nCPU MHz:             2593.992\nBogoMIPS:            5187.98\nHypervisor vendor:   Microsoft\nVirtualization type: full\nL1d cache:           32K\nL1i cache:           32K\nL2 cache:            256K\nL3 cache:            35840K\nNUMA node0 CPU(s):   0-11\nNUMA node1 CPU(s):   12-23\nFlags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single pti fsgsbase bmi1 hle avx2 smep bmi2 erms invpcid rtm rdseed adx smap xsaveopt md_clear\n\nThis shows some association between gpu(s) and cpu(s), statically.\n(base) xbore@xbore:~$ nvidia-smi topo -mp\n GPU0 GPU1 GPU2 GPU3 CPU Affinity\nGPU0  X  NODE NODE NODE 0-11\nGPU1 NODE  X  NODE NODE 0-11\nGPU2 NODE NODE  X  NODE 0-11\nGPU3 NODE NODE NODE  X  0-11\nLegend:\n  X    = Self\n  SYS  = Connection traversing PCIe as well as the SMP interconnect between NUMA nodes (e.g., QPI/UPI)\n  NODE = Connection traversing PCIe as well as the interconnect between PCIe Host Bridges within a NUMA node\n  PHB  = Connection traversing PCIe as well as a PCIe Host Bridge (typically the CPU)\n  PXB  = Connection traversing multiple PCIe switches (without traversing the PCIe Host Bridge)\n  PIX  = Connection traversing a single PCIe switch\n\nThis is monitoring the gpu(s), dynamically\n(base) xbore@xbore:~$ nvidia-smi -l 2\nThu Sep  5 16:32:39 2019       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 418.87.00    Driver Version: 418.87.00    CUDA Version: 10.1     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Tesla V100-PCIE...  On   | 0000A950:00:00.0 Off |                  Off |\n| N/A   32C    P0    41W / 250W |     23MiB / 16130MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  Tesla V100-PCIE...  On   | 0000BEF0:00:00.0 Off |                  Off |\n| N/A   30C    P0    39W / 250W |     25MiB / 16130MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   2  Tesla V100-PCIE...  On   | 0000D8C6:00:00.0 Off |                  Off |\n| N/A   30C    P0    40W / 250W |     25MiB / 16130MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n|   3  Tesla V100-PCIE...  On   | 0000F85D:00:00.0 Off |                  Off |\n| N/A   31C    P0    40W / 250W |     25MiB / 16130MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\nThu Sep  5 16:32:42 2019       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 418.87.00    Driver Version: 418.87.00    CUDA Version: 10.1     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Tesla V100-PCIE...  On   | 0000A950:00:00.0 Off |                  Off |\n| N/A   36C    P0   157W / 250W |    744MiB / 16130MiB |    100%      Default |\n+-------------------------------+----------------------+----------------------+\n|   1  Tesla V100-PCIE...  On   | 0000BEF0:00:00.0 Off |                  Off |\n| N/A   33C    P0   158W / 250W |    744MiB / 16130MiB |    100%      Default |\n+-------------------------------+----------------------+----------------------+\n|   2  Tesla V100-PCIE...  On   | 0000D8C6:00:00.0 Off |                  Off |\n| N/A   34C    P0   166W / 250W |    744MiB / 16130MiB |    100%      Default |\n+-------------------------------+----------------------+----------------------+\n|   3  Tesla V100-PCIE...  On   | 0000F85D:00:00.0 Off |                  Off |\n| N/A   34C    P0   157W / 250W |    744MiB / 16130MiB |    100%      Default |\n+-------------------------------+----------------------+----------------------+\n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n|    0     42611      C   ...xbore/miniconda3/envs/gprMax/bin/python    14MiB |\n|    1     42612      C   ...xbore/miniconda3/envs/gprMax/bin/python    14MiB |\n|    2     42613      C   ...xbore/miniconda3/envs/gprMax/bin/python    14MiB |\n|    3     42614      C   ...xbore/miniconda3/envs/gprMax/bin/python    14MiB |\n+-----------------------------------------------------------------------------+\n                                                                  Interesting observation while running the ‘watch -n0.1 nvidia-smi’ command.  Half to two-thirds of the time the ‘GPU-Util’ would indicate 0% for all gpu’s.  They all appeared to be uniform in quickly ramping up from 0% to 100%, then dropping to 0%, pausing for a number of seconds, and then cycling back up. I’m not sure if this is really happening, or just the way the program/tool works.  Again, I was running ‘python -m gprMax tests/benchmarking/bench_300x300x300.in -n 60 -mpi 5 -gpu 0 1 2 3’ to exercise the VM.\n\nThis was a screenshot from running ‘$ htop’.\n\nThis is a screenshot from running ‘$ glance’\nI’m not sure if this helps or not.  Any other ideas?\n\nAgain, my system is kind-of working, but it seems like it should be performing a lot better.\n\nThanks again,\nGary"
      },
      {
        "author": "Gary Bennett",
        "date": "Sep 6, 2019, 4:15:25PM",
        "content": "Craig,\n\nA couple of updates to my last post.  For kicks, I thought I would try ‘OMP_PLACES=sockets’ to see what would happen to my performance.  It turns out, that was the biggest change in performance.  I was able to get my overall time down from 4 minutes 30 seconds to 3 minutes 15 seconds.  Again that was using the ‘python -m gprMax tests/benchmarking/bench_300x300x300.in -n 60 -mpi 5 -gpu 0 1 2 3’ test command.  I tried all the OMP_PROC_BIND settings, but that didn’t really have any impact.  I left it on ‘spread’ as a setting.\n\nI did a test using just one gpu and I got the results that you would expect.  It took four times longer to process my test (12 minutes 4 seconds).\n\nAgain, I would be curious if you or anyone else would run the same test on their 4-gpu machine to see what processing times that they get.  I wonder if it may be a Microsoft Azure issue and if I would get similar results using Amazon web service (AWS), using comparable machine configurations.\n\nStill open to other suggestions.\n\nThanks again,\n Gary"
      },
      {
        "author": "Craig Warren",
        "date": "Sep 8, 2019, 3:30:18AM",
        "content": "Hi Gary,\n\nOn our test machine which is:\n\n2 x Intel Xeon E5-2640 v4 (2.4GHz, 2x10=20 physical cores)\n2 x GeForce GTX 1080Ti\n2 x TITAN X\n\nIf I run ‘python -m gprMax tests/benchmarking/bench_300x300x300.in -n 60 -mpi 5 -gpu 0 1 2 3’ then it takes ~9mins 25secs. So I think your test with the V100s is fine as they have a much faster memory bandwidth than the TITAN X or 1080Ti.\n\nOne of the key points in that playing with OMP environment variables won't make any difference when you are using the GPUs, it only effects the parallelised CPU solver, i.e. ‘python -m gprMax tests/benchmarking/bench_300x300x300.in'. You can use '#num_threads' in the input file to control the number of OpenMP threads used if you want to test different numbers for benchmarking.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9ZcgqWKSFBY",
    "title": "Possible bug in v4: erroneous asymmetry in TWTL sim compared with v3",
    "original_post": {
      "author": "Colin Stark",
      "date": "Mar 19, 2024, 3:47:45AM",
      "content": "Running a sim of EM wave propagation along a two-wire transmission line (TWTL), I found a possible bug in gprMax v.4.0.0b0 (or possibly some misuse by me of the new API). The v4 sim exhibits non-physical asymmetry, while the same sim in v.3.1.7 is perfectly symmetric as expected.\n\nThe main sim domain is ~150mm long by about 40x40mm and has 1mm cells. A pair of parallel 1mm-thick PEC lines 11mm apart models the TWTL; these lines are bent at 90º at each end to bring them together at 1mm-wide transmission line inputs. One input provides a continuous sine ±1V source at 400MHz (50Ω); the other dummy input is set at 0V. (An alternative setup using voltage sources and receivers behaves in a similar manner). The ambient medium is 1-pole Debye water in a PMMA box 5mm thick, with PML beyond. Therefore the sim generates a ~TEM wave that initiates at the source, propagates along the parallel \"wires\", and should set up a steadily varying EM field perfectly symmetric about the centre line between them.\n\n\\\n\nThe sim runs for 500ns with ~0.5ns time steps. As you can see from the pic here (at time 250ns), the Ez field component reveals unexpected asymmetry in the v4 sim, whereas the v3 sim behaves as we would expect (visualization in ParaView 5.12). There's also a strong E-field at places within the PEC in v4 but not in v3.\n\nIt's possible that I have set up the v4 sim incorrectly, but it's not at all obvious to me how. I'm attaching here the v3 .in file and the v4 .py file (which exploits the new pure-Python API). If I have accidentally introduced an asymmetry, could someone please show me where?\n\nI'm going to try to supply a video of both 500ns sims in a follow up post.\n\nAny help would be much appreciated!\nThanks,\nColin"
    },
    "responses": [
      {
        "author": "Colin Stark",
        "date": "Mar 19, 2024, 3:52:34AM",
        "content": "Here's the video\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2024, 9:27:30AM",
        "content": "Hi Colin,\n\nThanks - this is a really useful comparison - can you file it on our GitHub issue tracker please. It will take me a while to dig into the detail of your model and check the v3/v4 behaviour differences. If you have time can you try to create a minimum working example that shows the potential issue, e.g. one of the first things would be to remove the water and eliminate any potential issue from the dispersive materials. You could also plot the specific source output in case it is some sort of issue with the source definition. As I say, I will get to looking at this, but it may take a while.\n\nKind regards,\nCraig\n"
      },
      {
        "author": "Colin Stark",
        "date": "Mar 19, 2024, 9:35:09AM",
        "content": "Craig,\n\nYeah, it makes sense to simplify it a bit and plot the inputs and outputs. I'll get to that tomorrow.\n\nColin\n"
      },
      {
        "author": "Colin Stark",
        "date": "Mar 20, 2024, 6:30:38AM",
        "content": "Craig,\n\nI posted an issue on GitHub after testing with a simplified pair of input files. The behaviour is unchanged.\n      https://github.com/gprMax/gprMax/issues/433\n\nI've also included plots of the TL source input voltage and TL output total voltage – for both the v3 and v4 sims. You'll see that the v4 output oscillates in a non-physical way, while the v3 output is stable.\n\nGood luck with tracking down the origin of this problem! I hope it's just me doing something wrong in v4, but I suspect it's not.\n\nCheers,\nColin\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/2Sl6RjP7uJI",
    "title": "Tool to convert PNG images to HDF5",
    "original_post": {
      "author": "Craig Warren",
      "date": "Apr 4, 2017, 9:31:31AM",
      "content": "Hi folks,\n\nBased on some discussion on this forum I have created a module (part of the tools sub-package in gprMax) called convert_png2h5.py which is available if you pull the latest code from the master branch of GitHub.\n\nThe module enables a Portable Network Graphics (PNG) image file to be converted into a HDF5 file that can then be used to import geometry into gprMax (see the #geometry_objects_read command for information on how to use the HDF5 file with a materials file to import the geometry). The resulting geometry will be 2D but maybe extended in the z-(invariate) direction if a 3D model was desired. The module will display the PNG image and allow the user to select colours that will be used to define discrete materials in the model. When the user has finished selecting colours the window should be closed, whereupon the HDF5 file will be written.\n\nFull info on how to use it is in the User Guide at: http://docs.gprmax.com/en/latest/utils.html#convert-png2h5-py\n\nThis is a new tool so it might be a bit rough around the edges. Feedback (and proposed changes) welcome!\n\nI hope it is useful.\n\nKind regards,\n\nCraig"
    },
    "responses": [
      {
        "author": "Mohamed Elsaid",
        "date": "Aug 17, 2017, 6:13:45PM",
        "content": "Hi Craig,\n\nGreat efforts to introduce this module to us. when I try to use this module to convert PNG image to HDF5 file, there are problem appear in the implementing this conversion representing in the attached syntax error.\nI don't know what's the problem. can you help me in understanding this error? and how I can solve this problem?\n\n\nRegards,\nMohamed"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 4:41:00AM",
        "content": "Looks like a problem with your PNG file name and/or path.\n\nCraig"
      },
      {
        "author": "Mohamed Elsaid",
        "date": "Aug 19, 2017, 10:39:33AM",
        "content": "I checked o the file name and path, I'm sure that there's no mistake in it. may be in the last command I did't write the extension (PNG)of the file,\nand I modify it and use the following command in the current directory of the gprmax\npython -m tools.convert_png2h5 my_PMA.png 0.002 0.002 0.002 -zcells 150\n\nand obtain the same syntax error. Now I'm sure that the name and the path are correct and still don't know the problem.\nCan you help me? \n\nThanks\nMohamed"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 20, 2017, 5:07:27PM",
        "content": "Hi Mohamed,\n\nIn which case can you report it (and attach the PNG file you are testing with) on our GitHub issue tracker please - https://github.com/gprmax/gprMax/issues This allows us to better track and respond to potential issue with the code.\n\nThanks,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "Mar 29, 2019, 4:05:03AM",
        "content": "Hi Craig:\n                  I have some question about the convert_png2h5.py , is there any more specific requirements about the png inputfile ? like dimensional proportion ? does the zoom of png file influence the output HDF5 file?\n\n     Kind regards,\n           Dongyang"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 29, 2019, 4:43:33AM",
        "content": "Hi Dongyang,\n\nThe size, i.e. pixel dimensions, of the image when multiplied by the spatial resolution you specify will determine the physical dimensions that the geometry will occupy in the model.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/YSSlp2cLqgQ",
    "title": "Cannot see the Complex geometry view using Paraview",
    "original_post": {
      "author": "Shikhar Sharma",
      "date": "Jun 20, 2023, 10:53:56AM",
      "content": "Hello Everyone,\n\nI would like to thanks Dr. Craig Warren and Dr. Antonis Giannopoulos for gprMax software it saves lot of time and cost for data collection.\n\nI am a data scientist and have good understanding of  python, I converted below mine simulation code into my_model.in file  for visualization as given below.\n\n#python:\nfrom gprMax.input_cmd_funcs import *\n\ncommand('title', 'Simulation with a mine object')\n\n# Define simulation parameters\nz_dim = 0.002\nresolution = 0.002\ntsim = 5e-9\nB_scan = False\n\n# Set up the domain and grid resolution\ndomain = domain(x=1.000, y=0.250, z=0.450)\ndx = dx_dy_dz(resolution, resolution, z_dim)\n\n# Set the simulation time window\ntime_window(tsim)\n\n# Define the half-space material\nmaterial(permittivity=3.5, conductivity=0.01, permeability=1.0, magconductivity=0, name='bakelite')\nmaterial(permittivity=6.0, conductivity=0.01, permeability=1.0, magconductivity=0, name='rubber')\nmaterial(permittivity=3.0, conductivity=0.00001, permeability=2.0, magconductivity=0.01, name='dry_sand')\nmaterial(permittivity=2.86, conductivity=0.00048, permeability=1.0, magconductivity=9.75, name='TNT')\n\n# Define the waveform\nidentifier = waveform('ricker', amplitude=1, frequency=1.5e9, identifier='my_ricker')\n\n\nif B_scan:\n    x_ant = 8e-2\nelse:\n    x_ant = domain.x/2 - 1e-3 # in the middle of the x-axis\n\ntx = hertzian_dipole('x',\n                     0.100, 0.110, 0.360 , # minus 4 cm in y-direction\n                     identifier)\n\nrx(0.100, 0.140, 0.360)     # 2 cm away in x-direction from tx\n\n\nif B_scan:\n    src_steps(dx=0.006)\n    rx_steps(dx=0.006)\n\nb0, b1 = box(0, 0, 0,\n             1.000, 0.250, 0.200, # same as domain, minus 4 cm in y-direction\n             'dry_sand')\n\n\n#cylinder: 0.500 0.125 0.147 0.500 0.125 0.097 0.002 pec\n\ncylinder(0.500, 0.125, 0.150,\n         0.500, 0.125, 0.147,\n         0.056, material='rubber')\ncylinder(0.500, 0.125, 0.147,\n         0.500, 0.125, 0.094,\n         0.056, material='bakelite')\ncylinder(0.500, 0.125, 0.147,\n         0.500, 0.125, 0.097,\n         0.053, material='TNT')\ncylinder(0.500, 0.125, 0.147,\n         0.500, 0.125, 0.097,\n         0.002, material='pec')\n\n# Define outputs, geometry view, and snapshots\ngeometry_view(0, 0, 0, domain.x, domain.y, z_dim, dx.x, dx.y, dx.z, 'my_mine', 'n')\n\nN = 32\nfor i in range(1, N+1):\n    snapshot(0, 0, 0, domain.x, domain.y, z_dim, dx.x, dx.y, dx.z, i*(tsim/N), 'snapshot' + str(i))\n\n#end_python:\n\n\nAnd i generated .VTI file using commands \n python -m gprMax --geometry-only user_models/my_model.in\n\n\nI am trying  to visualize it using paraview software  so that i can see mine like the given two https://docs.gprmax.com/en/latest/user_libs_landmines.html\n\n\nParaview screenshot\n\n\n\n\nPlease help me to visualize Landmine . How actually it looks ? Thanks In advance"
    },
    "responses": [
      {
        "author": "Brad Artman",
        "date": "Jun 20, 2023, 12:39:02PM",
        "content": "In my opinion, Paraview is a terrible experience, with a high barrier to entry: developers gone wild with government funding.\nJust stick to Python when you can.\n\nI paste below the python functions I use to deal with model.in, model.out,  and vii files. Sorry about the formatting (I use dark mode in PyCharm).\nNote in readHDF, one hint for multiple shots in a single HDF, is to make a new pointer to each shot:\nsrc1HDF = srcsHDF['src1'] # make a smaller HDF file from src1 subdictionary\n\nvtiRead gets most of everything from pv.read(file). The pv library can instantly plot and show you all the instances in the file.\n\nimport gc\n\nimport numpy as np\nimport pandas as pd\nimport pyvista as pv\nimport csv\nimport h5py\nimport os\nimport sys\nimport warnings\nimport nexusformat.nexus as nx\n\ndef convertLineToArrayOfFloats(s):\nfor idx, x in enumerate(s):\ntry:\ns[idx] = float(x)\nexcept ValueError:\npass\nreturn np.array(s)\ndef makeAxis(nSamples, discretization, origin=0):\naxis = np.linspace(discretization, (int(nSamples) - 1) * discretization, num=nSamples) + origin\nreturn axis #function makeAxis\ndef findIndex(location, sampling, origin=0.):\ndistance = location - origin\nn = (distance / sampling) # -1 (minus required?)\nreturn int(n)\ndef parsemodelin(directory, modelin):\nif not os.path.isfile(modelin):\nraise Exception(\"File: \" + modelin + \" does not exist\")\npipe = np.zeros(7)\npipeRadius = 0.\n\nfreespace = [1., 0., 1., 0.]\nd_freespace = freespace[0]\nc_freespace = freespace[1]\nnExtenalProperties = np.array([0])\nexternalProperties = []\nwith open(modelin, \"r\") as in_file:\ncsvreader = csv.reader(in_file, delimiter=' ')\n# next(csvreader) # skip top line, but why?\n## very poor way to do it, but I need reference to both firs and last lines of file to make below work\nfor row in csvreader:\nif \"#title:\" in row: #odd I can't make this work\nfullPathTitle = row[1]\ndirTitle = row[1].split(sep='/')[-1]\ndirConcepts = np.array(dirTitle.split(sep='_'))\nif row[0] == \"#dx_dy_dz:\":\nsamplings = convertLineToArrayOfFloats(row[1:4])\nif row[0] == \"#rx_array:\":\nrx_array = convertLineToArrayOfFloats(row[1:])\nif \"#domain:\" in row: #hmm. another way to do it\ndomains = convertLineToArrayOfFloats(row[1:4])\nif row[0] == \"#hertzian_dipole:\":\nsource1type = str(row[1])\nsource1location = convertLineToArrayOfFloats(row[2:5])\nif row[0] == \"#src_steps:\":\nsourceSteps = convertLineToArrayOfFloats(row[1:])\nif row[0] == \"#cylinder:\": #see http://docs.gprmax.com/en/latest/input.html?highlight=cylinder#cylinder\npipe = convertLineToArrayOfFloats(row[1:-3])\npipeRadius = pipe[6]\nif row[0] == \"#box:\":\nif row[7] == 'lower':\ndimensionLower = convertLineToArrayOfFloats(row[1:7])\nif row[7] == 'upper':\ndimensionUpper = convertLineToArrayOfFloats(row[1:7])\ntvd_earth = dimensionUpper[4]\nairthickness = (domains[1] - tvd_earth)\nairsamples = int(airthickness / samplings[1])\n# if homogeneous, default the trench stuff to upper stuff\ndimensionBedding = dimensionUpper\ndimensionInitial = dimensionUpper\ndimensionFill = dimensionUpper\nif row[7] == 'bedding':\ndimensionBedding = convertLineToArrayOfFloats(row[1:7])\nif row[7] == 'initial':\ndimensionInitial = convertLineToArrayOfFloats(row[1:7])\nif row[7] == 'fill':\ndimensionFill = convertLineToArrayOfFloats(row[1:7])\nif row[0] == \"#material:\":\nif row[5] == \"lower\":\nmaterialLower = convertLineToArrayOfFloats(row[1:5])\nd_lower = materialLower[0]\nc_lower = materialLower[1]\nif row[5] == \"upper\":\nmaterialUpper = convertLineToArrayOfFloats(row[1:5])\nd_upper = materialUpper[0]\nc_upper = materialUpper[1]\n# if homogeneous, default the trench stuff to upper stuff\n# not needed as I always included all materials, just didn't use them to model\n# materialFill = materialUpper; materialInitial = materialUpper; materialBedding = materialUpper\nif row[5] == \"bedding\":\nmaterialBedding = convertLineToArrayOfFloats(row[1:5])\nd_bedding = materialBedding[0]\nc_bedding = materialBedding[1]\nif row[5] == \"initial\":\nmaterialInitial = convertLineToArrayOfFloats(row[1:5])\nd_initial = materialInitial[0]\nc_initial = materialInitial[1]\nif row[5] == \"fill\":\nmaterialFill = convertLineToArrayOfFloats(row[1:5])\nd_fill = materialFill[0]\nc_fill = materialFill[1]\n\nif row[0] == \"seismiclower:\":\ns_l = (convertLineToArrayOfFloats(row[1:-1]))\nexternalProperties.append(row[0])\nif row[0] == \"seismicupper:\":\ns_u = (convertLineToArrayOfFloats(row[1:-1]))\nexternalProperties.append(row[0])\nif row[0] == \"seismicbedding:\":\ns_b = (convertLineToArrayOfFloats(row[1:-1]))\nexternalProperties.append(row[0])\nif row[0] == \"seismicinitial:\":\ns_i = (convertLineToArrayOfFloats(row[1:-1]))\nexternalProperties.append(row[0])\nif row[0] == \"seismicfinal:\":\ns_f = (convertLineToArrayOfFloats(row[1:-1]))\nexternalProperties.append(row[0])\nif row[0] == \"seismicfreespace:\":\ns_fs = (convertLineToArrayOfFloats(row[1:-1]))\nexternalProperties.append(row[0])\nmodelIndictionary = {directory: {\"Sampling\": samplings, \"Domain\": domains, \"Source Type\": source1type,\n\"Source1 Location\": source1location, \"Source Steps\": sourceSteps, \"Source Type\": source1type,\n\"Receiver Line\": rx_array, \"Domain Extents\": domains, \"Domain Sampling\": samplings,\n\"Dimension Lower\": dimensionLower, \"Dimension Upper\": dimensionUpper, \"Dimension Bedding\": dimensionBedding,\n\"Dimension Fill\": dimensionFill, \"Dimension Initial\": dimensionInitial,\n\"Material Lower\": materialLower, \"Material Upper\": materialUpper, \"Material Bedding\": materialBedding,\n\"Material Initial\": materialInitial, \"Material Fill\": materialFill,\n\"Dielectric Lower\": d_lower, \"Conductivity Lower\": c_lower,\n\"Dielectric Upper\": d_upper, \"Conductivity Upper\": c_upper,\n\"Dielectric Bedding\": d_bedding, \"Conductivity Bedding\": c_bedding,\n\"Dielectric Initial\": d_upper, \"Conductivity Initial\": c_initial,\n\"Dielectric Fill\": d_fill, \"Conductivity Fill\": c_fill,\n\"Dielectric FreeSpace\": d_freespace, \"Conductivity FreeSpace\": c_freespace,\n\"External Properties\": externalProperties, \"N External Properies\": len(externalProperties),\n\"Vp Lower\": s_l[0], \"Vs Lower\": s_l[1], \"Density Lower\": s_l[2],\n\"Vp Upper\": s_u[0], \"Vs Upper\": s_u[1], \"Density Upper\": s_u[2],\n\"Vp Bedding\": s_b[0], \"Vs Bedding\": s_b[1], \"Density Bedding\": s_b[2],\n\"Vp Initial\": s_i[0], \"Vs Initial\": s_i[1], \"Density Initial\": s_i[2],\n\"Vp Fill\": s_f[0], \"Vs Fill\": s_f[1], \"Density Fill\": s_f[2],\n\"Vp FreeSpace\": s_fs[0], \"Vs FreeSpace\": s_fs[1], \"Density FreeSpace\": s_fs[2],\n\"Air\": np.array((airthickness, airsamples)), \"Directory Concepts\": dirConcepts,\n\"Pipe\": pipe, \"Pipe Radius\": pipeRadius,\n\"TVD_earth\": tvd_earth, \"Full Path\": fullPathTitle, \"Directory\": dirTitle\n}}\ngc.collect()\nreturn modelIndictionary\ndef readVTI(file, getdata=True): #TODO make into dictionary like HDFread above\nprint(\"Making model cube from VTI: \" + file)\nif not os.path.isfile(file):\nraise Exception(\"File: \" + file + \" does not exist\")\nvtiRead = pv.read(file)\n# vtiRead.plot()\n# . . Model dimensions\n# WARNING: Jeff's idea of z is depth, whereas gprMax conventions use y for vertical, and z for into plane\n# . . Discretization intervals\nvSampling = vtiRead.spacing\n# . . Define axes\nvnx = vtiRead.dimensions[0] - 1 # minus 1 appropriate?\nvny = vtiRead.dimensions[1] - 1\nvnz = vtiRead.dimensions[2] - 1\nvnDimensions = np.array([vnx, vny, vnz])\n\nif getdata:\nvtiValues = vtiRead['Material']\nmodelImage = np.array(vtiValues.reshape((vny, vnx, vnz)))\nelse:\nmodelImage = []\n\n#TODO make sure this is the right order of x,y,z\nVTIdictionary = {\"Sampling\": vtiRead.spacing, \"NDimensions\": vnDimensions,\n\"Center\": vtiRead.center, \"Length\": vtiRead.length,\n\"Origin\": vtiRead.origin, \"Array Names\": vtiRead.array_names,\n\"Another Material Key\": vtiRead.active_scalars_name,\n\"vtiDataCube\": modelImage\n} #might be some more of interest\ngc.collect()\nreturn VTIdictionary # read getVTI\ndef readHDF(fileHDF, typesHere, getdata=True):\n# usefull for exploring HDF tree, but not needed for run time\n# filecheck = nx.nxload(fileHDF)\n# tree = filecheck.tree\n# print(filecheck.tree)\nprint(\"Reading-- Headers from: \" + fileHDF)\n# assumes all coordinate ordinates origins begin at 0.00\nfileNameHDF = h5py.File(fileHDF, 'r')\nntHDF = fileNameHDF.attrs['Iterations'] # nt\ndtHDF= fileNameHDF.attrs['dt'] # dt\nHDFtime = np.hstack((ntHDF, dtHDF))\n\n# domain info\ndomainSamplingHDF = fileNameHDF.attrs['dx_dy_dz']\ndomainSizeHDF = fileNameHDF.attrs['nx_ny_nz']\n# domain[0]=nx, domain[1]=ny, domain[3]=dx ...\n\n# receiver array info\nrnHDF = fileNameHDF.attrs['nrx']\n# make a smaller HDF file from rec subdictionary\n# is this a pointer or a whole new hdf file? It would be a nice memory trick to not have the data 2x\nrxsHDF = fileNameHDF['rxs']\nrecKeys =rxsHDF.keys()\naa = rxsHDF['rx1']\n\n# read first 2 receiver info to calculate sampling interval\n# could probably make references to rather than create new HDF's\nrx1HDF = rxsHDF['rx1']\nrx2HDF = rxsHDF['rx2']\nrxEndHDF = rxsHDF['rx' + str(rnHDF)]\nrx1HDFLocationIndexString = rx1HDF.attrs['Name']\nrx1ModelLocations = rx1HDF.attrs['Position']\nrx2ModelLocations = rx2HDF.attrs['Position']\nrxEndModelLocations = rxEndHDF.attrs['Position']\nrxdx = (rx2ModelLocations[0] - rx1ModelLocations[0])\nrxdy = (rx2ModelLocations[1] - rx1ModelLocations[1])\nrxdz = (rx2ModelLocations[2] - rx1ModelLocations[2])\nrxDisrectizatin = np.array([rxdx, rxdy, rxdz])\n# Assuming regularly sampled linear array in X, no need to query all receiver entries\n# Otherwise loop over rx'1' to rx'rnHDF' and make a much bigger out array\n# receivers[0]=rec1Origin[m], receivers[1]=rec1Ylocation[m], receivers[3]=rec1Origin[index], receivers[6]=nr\n# Don't forget to change floats to integers for Indexes when using\nreceiversHDF = np.hstack((rx1ModelLocations, rnHDF, rxDisrectizatin, rxEndModelLocations))\n\n# extract source info\nnsrcsHDF = fileNameHDF.attrs['nsrc']\nsrcsHDF = fileNameHDF['srcs'] # make a smaller HDF file from srcs subdictionary\nsrc1HDF = srcsHDF['src1'] # make a smaller HDF file from src1 subdictionary\ns1ModelPositionArray = np.hstack((src1HDF.attrs['Position'], nsrcsHDF))\nif nsrcsHDF > 1:\nsrc2HDF = srcsHDF['src2']\ns2ModelPositionArray = src2HDF.attrs['Position']\nsourcesHDF = np.hstack((s1ModelPositionArray, s2ModelPositionArray))\nelse:\nsourcesHDF = s1ModelPositionArray\n\nif sourcesHDF[1] != receiversHDF[1]:\nwarnings.warn(\"Source (\" + sourcesHDF[1] + \") and Receiver (\" + receiversHDF[1] + \" not on same Y level\")\n\nif getdata:\ncube = np.zeros([len(typesHere), rnHDF, ntHDF])\nprint(\"Reading-- Data traces from: \" + fileHDF)\nfor itype, typename in enumerate(typesHere):\nfor iTraceNum in range(rnHDF):\ntrace = np.array(rxsHDF['/rxs/rx' + str(iTraceNum+1) + '/' + typename][:])\ncube[itype, iTraceNum, 0:ntHDF] = trace\nelse:\ncube = []\n# if fileNameHDF:\n# print(\"Yes it is open\")\n# #what are possible ideas?: aaa = fileNameHDF.filename\n# if rxsHDF:\n# print(\"rxsHDF exists\")\n# if srcsHDF:\n# print(\"srcsHDF exists\")\nfileNameHDF.close()\n# if not rxsHDF:\n# print(\"rxsHDF does not exist\")\n# if not srcsHDF:\n# print(\"srcsHDF does not exist\")\n# I suppose the child HDF slices go away with the parent\nHDFdictionary = {\"Domain Sampling\": domainSamplingHDF, \"Domain Size\": domainSizeHDF,\n\"Receivers\": receiversHDF, \"Sources\": sourcesHDF,\n\"N receivers\": rnHDF, \"D receivers\": rxdx, \"N sources\": nsrcsHDF,\n\"nt\": ntHDF, \"dt\": dtHDF, \"Data\": cube}\ngc.collect()\nreturn HDFdictionary # readHDF\ndef runStatistics(cube): # asume zero phase, no need to do min and max and delta\nprint(\"Finding Big traces in all shots, all types\")\nnsrcs = cube.shape[0]\nntypes = cube.shape[1]\nnrcvs = cube.shape[2]\ntypeMaxLocation = np.zeros([ntypes, 2], dtype='uint32')\ntypeMax = np.zeros(ntypes)\nfor iType in range(ntypes):\nfor iShot in range(nsrcs):\nfor iRec in range(nrcvs):\ntrace = cube[iShot, iType, iRec, :]\n#traceMin = min(trace)\ntraceMax = np.max(trace)\n#traceDelta = traceMax - traceMin\n# deltascube[iShot, iType, iRec, iRec] = traceDelta\n#if traceDelta > typeMax[iType]:\nif traceMax > typeMax[iType]:\ntypeMaxLocation[iType, 0] = iShot\ntypeMaxLocation[iType, 1] = iRec\n#typeMax[iType] = traceDelta\ntypeMax[iType] = traceMax\n# # try max axis\n# a = cube[0,0,:,:]\n# b = cube[1,0,:,:]\n# b = np.max(a, axis=[0, 1], out=buffer)\nprint(\" done Finding\")\nreturn typeMaxLocation\ndef distanceCalc(time, dielectric):\nc = 299792458 # speed of light [m/s]\nv = c / np.sqrt(dielectric)\ndistance = v * time # [m]\nreturn distance\ndef timeCalc(distance, dielectric):\nc = 299792458 # speed of light [m/s]\nv = c / np.sqrt(dielectric)\ntime = distance / v # [s]\nreturn time\ndef semicircle(center_x, center_y, radius, stepsize=0.001):\n# ((x - x0) / a) ** 2 + ((y - y0) / b) ** 2 == 1\na = radius\nb = radius\nx0 = center_x\ny0 = center_y\nx = np.linspace(-a + x0, a + x0)\ny = b * np.sqrt(1 - ((x - x0) / a) ** 2) + y0\n\n\nreturn x, y\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 20, 2023, 12:59:44PM",
        "content": "Hi Shikhar,\n\nThanks for your nice words. The problem is that your geometry view command uses z_dim instead of domain.z So, you are just getting a 2D slice of your model at the lower Z boundary that is the end of the PML and most likely has 0 ID as it should. Also, as you are dealing with small details for targets try using 'f' instead of 'n' to get all the edges in the display and not only volumetric information for the cells. The files will become bigger but you will see more detail like the one I have attached here.\n\nBest \n\nAntonis\n\n\n\n\n"
      },
      {
        "author": "Brad Artman",
        "date": "Jun 20, 2023, 1:00:10PM",
        "content": "Another frustration in the VTI files is that it's an integer lookup table. So parse the model.in file and apply physical properties with a where() once you figure out the table (like 1 might be free space, 2 one of your box specifications, if you go down the soil model path, it gets quite weird...)\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jul 6, 2023, 7:08:28AM",
        "content": "Hi Brad,\n\nAgree with you on Paraview.\n\nJust to answer the lookup table point. This is a design choice with gprMax. There are two approaches you can take when designing an FDTD solver: \nOne approach is to store the material coefficients at every cell in the FDTD grid. This has the advantage that you have no need for a lookup table, however, it is very memory intensive. Its especially wasteful when you have a relatively limited number of materials in the model, i.e. 100 or so.\nThe other approach is to use a lookup table - which is what we do with gprMax. An integer value is stored for each cell (actually each cell edge - field component) which is used to 'lookup' all the update coefficients for that material. This reduces the memory footprint significantly. Obviously this approach translates to visualising the cell (FDTD mesh geometry). We could convert the mesh to something other than VTK but we have yet to see a viable alternative - which is surprising given how terrible VTK and Paraview are. Always open to listen if there are other geometry visualisation approaches out there for voxelised models.\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Gw3--myAJqI",
    "title": "about 3D model——Integrated transceiver antenna",
    "original_post": {
      "author": "王莹",
      "date": "Feb 20, 2024, 6:24:37PM",
      "content": "Hello, everyone, I encountered a strange phenomenon: I built a simple three-dimensional model, the antenna's transmitting point and receiving point placed in the same position, the result after removing the direct wave waveform is shown in the image above. Why did it come to this. I tried antenna separation and placement to remove the direct wave and the results were normal.My in file is also very simple, as shown below:"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 21, 2024, 5:37:56AM",
        "content": "Can you post the raw trace from the model, i.e. before you remove the direct wave.\n\nCraig"
      },
      {
        "author": "王莹",
        "date": "Feb 21, 2024, 6:06:07AM",
        "content": "This is the original waveform that I didn't remove the direct wavefront from, and I actually found that if the antenna transmit and the receiving point are placed in the same place the direct wavefront is so strong that I can't see the reflection behind the plate, but when I tried to place them separately the simulation results were better. I would like to ask whether gprMax supports the simulation of the antenna as a transceiver. If so, why does this phenomenon occur?\n Thank you very much for your reply and answer\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7UoGnFMImn8",
    "title": "AustinMan/AustinWoman access problem",
    "original_post": {
      "author": "Qiang An",
      "date": "Feb 24, 2019, 9:48:23AM",
      "content": "Hi all,\nCould anyone kindly provide me with some suggestions on how to get access to the AustinMan/AustinWoman EM human models.\nI am working on a project of using SFCW signal to image the front profile of a human target behind a concrete wall. I did all the previous wall clutter mitigation and MIMO (multiple-input multiple output) array configuration work by employing the gprMax simulations. However, when it comes to the 3D through-the-wall radar imaging simulation using the optimized MIMO array. I found that I was in a very awkward situation that I don't have access to the AustinMan/AustinWoman model. \nThen, I turned to other EM simulation softwares like HFSS. Whereas, HFSS just provides plane wave and cylindrical wave as incident wave. Thus, only SAR TWRI simulation can be done using HFSS. But, the near field 3D MIMO TWRI of an EM human model cannot be realized other than the gprMax simulation.\nI tried to contact Dr. Yilmaz, who developed the AustinMan/AustinWoman model, since last December for several time following the gprMax docs instruction. Unfortunately, it seems that my emails never reached Dr. Yilmaz. I didn't get any response till now. I don't know what else can I do. So I turn to you guys for a help.\nI really appreciate any informations. Thank you very much.\nWith regards,\nQiang An"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 25, 2019, 4:03:12AM",
        "content": "Hi Qiang,\n\nSounds an interesting project. Unfortunately, we do not control the release of the AustinMan/Woman models, that is down to Prof Yilmaz and his group at The University of Texas at Austin. We just provide the ability to be able to import the models and simulate realistic materials for the human body using some of the dispersive material handling in gprMax.\n\nSorry I can't be of further help.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Qiang An",
        "date": "Feb 25, 2019, 6:43:45AM",
        "content": "Hi Craig,\nThank you so much for you information and quick response. I really appreciate it. Then I think the only feasible way is to turn to HFSS and use real antenna to radiate the behind wall scene. Thank you anyway.\nWith regards,\nQiang An"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8TtTGGiXgwo",
    "title": "about the Ricker wavelet source",
    "original_post": {
      "author": "Echo",
      "date": "Mar 21, 2019, 11:24:26AM",
      "content": "Hi,\nI have a question about the source below:\n\n when I simulate a homogeneous medium and put a ricker wavelet source at (0.1 0.17 0), a receiver at (0.10,0.130,0). the input script is below:\n\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.10 0.130 0\n\nthen I plot the A_scan:\n\nIn my opinion, I just record the source signal, so the signal I received should be a ricker-wavelet-like waveform. the signal I received, at least, is symmetric. but now the amplitude of the right-hand side is larger than the left-hand side...\n\ncan somebody tell me why?"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 21, 2019, 1:15:53PM",
        "content": "Hi Echo,\n\nUnfortunately your opinion is not correct. In a 2D model you record the electric field radiated by a line source with a current time waveform I(t) specified by the \"ricker\" wavelet. The expectation of symmetry is not really warranted especially if you check the analytical solution for this problem. This - for vacuum -  is given by the following scalar Greens function.\n\ng(t,r) = H(t-s*r)/(2*pi*sqrt(t^2 - s^2 * r^2)\n\nwhere s=1/c (c speed of light) r is radial distance as the solution is developed in cylindrical coordinates. H is the Heaviside Step function.\n\nConvolving the above with your current source wavelet I(t) will give you the response at distance r from the source which is not symmetric. Actually we do check gprMax against these simple solutions to make sure we at least OK with basic electromagnetic problems. \n\nHope this helps \n\nAntonis"
      },
      {
        "author": "Echo",
        "date": "Mar 21, 2019, 2:00:37PM",
        "content": "Hi Antonis,\n\nThank you very much for your reply and so detailed explanation. \n\nThis indeed helps me. Thanks again.\n\nEcho"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/S5RR1xOPoKY",
    "title": "Ascan in python form",
    "original_post": {
      "author": "Ahmed Antar",
      "date": "Dec 17, 2019, 9:58:48AM",
      "content": "Hallo every body ,\n\ni want to write in code in python. in papers i have to write the code between \n\n#python: \n\n#end_python:\n\n\n\nbut what about the other instructions .how can i write it in python .\n\n*****************************************************************************************************************\n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 6 0 1 0 half_space\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.002 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.002 0.002 0.002 0.002 cylinder_half_space n\n\n************************************************************************************************************************************************\n#python: \n\n\n#end_python:\nfrom gprMax.input_cmd_funcs import *\ncommand('title', 'A or B scan from a metal cylinder buried in a dielectric half-space')\ndomain(0.240,  0.210 , 0.002)"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_vYS-xYYj_g",
    "title": "BP imaging in MATLAB with B - scan matrix",
    "original_post": {
      "author": "ccc ccc",
      "date": "May 21, 2025, 2:09:01AM (8 days ago)",
      "content": "Dear GPRMax Team,  \nI want to achieve BP imaging with a B - scan matrix in MATLAB.But I can't find the source code online.The result is like this Figure。"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EboQK7xgwg8",
    "title": "Capturing of Radar data",
    "original_post": {
      "author": "Anshul Glarus",
      "date": "Feb 22, 2022, 6:55:30AM",
      "content": "Hello, \n\nI am new to the Radar environment. I wish to capture the data of the radar sensor  CDM324 Motion doppler radar using A scan and plot on the MATLAB. Seeking for the guidance how to proceed."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 22, 2022, 7:15:12AM",
        "content": "You question is not clear - are you trying to simulate this sensor or extract measured data from it? If it is the latter then you need to contact the manufacturer of the system.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/QcLV4XBT3jA",
    "title": "Can't see any response in the B_scan result.",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Nov 18, 2019, 6:03:58AM",
      "content": "Hi Craig:\n\nThanks for your last help ,it works successfully with my RTX2080Ti now.\nResently I wrote a 3-D railway model in order to study the multi-reflection caused by the rails and sleepers. But I can't see any response from the bottom interface(even I add gain to the B_scan result ), it seems that the EM wave can hardly pass through the rails and sleepers. \nIn the first model, I define the rails and sleepers as pec. In the second model, I define them as(#material: 2 1e5 1 0 rail), but there seem no difference between the two B_scan results.\nThe central frequency I used is 200MHz, model size(10 7 2.6). \n\nCan you tell me where the problem is ?\nAttached with the model ,the input file and the result.\n\nKind regards,\nDongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 22, 2019, 4:04:43AM",
        "content": "Hi Dongyang,\n\nCan you post output file for a A-scan with the PEC rail structure removed, and then one with the structure in the model. I'd like to see the difference.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Muhammad ishfaque Sulimani",
        "date": "Nov 23, 2019, 6:26:43PM",
        "content": "I am a new user on gprMax 3.1. I have install gprMax and run a 2D example. the output file give following problem in the example.\n\n(gprMax) C:\\Users\\Muhammad Ishfaque\\gprMax>python -m tools.outputfiles_merge user_models/cylinder_Bscan_2D 60\nusage: cd gprMax; python -m tools.outputfiles_merge basefilename\noutputfiles_merge.py: error: unrecognized arguments: 60\n\n(gprMax) C:\\Users\\Muhammad Ishfaque\\gprMax>python -m tools.plot_Bscan user_models/cylinder_Bscan_2D_merged.out Ez\nTraceback (most recent call last):\n  File \"C:\\Users\\Muhammad Ishfaque\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Users\\Muhammad Ishfaque\\Miniconda3\\envs\\gprMax\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\Muhammad Ishfaque\\gprMax\\tools\\plot_Bscan.py\", line 82, in <module>\n    f = h5py.File(args.outputfile, 'r')\n  File \"C:\\Users\\Muhammad Ishfaque\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\h5py\\_hl\\files.py\", line 394, in __init__\n    swmr=swmr)\n  File \"C:\\Users\\Muhammad Ishfaque\\Miniconda3\\envs\\gprMax\\lib\\site-packages\\h5py\\_hl\\files.py\", line 170, in make_fid\n    fid = h5f.open(name, flags, fapl=fapl)\n  File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\n  File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\n  File \"h5py\\h5f.pyx\", line 85, in h5py.h5f.open\nOSError: Unable to open file (unable to open file: name = 'user_models/cylinder_Bscan_2D_merged.out', errno = 2, error message = 'No such file or directory', flags = 0, o_flags = 0)\n\nPlease guide me what is the issue in program gprMax 3.1."
      },
      {
        "author": "Craig Warren",
        "date": "Nov 26, 2019, 4:23:28AM",
        "content": "Dear Muhammad,\n\nPlease post this as a separate question so as not to confuse this thread.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zXjtDMiFM6E",
    "title": "Performance benchmarking (errors in the new file)",
    "original_post": {
      "author": "Iliyana",
      "date": "Apr 20, 2017, 12:37:47PM",
      "content": "Howdy,\n\nI updated gprMax a couple of days ago, but the new 'plot_benchmark.py' did not work for me.\n\n1. The 'baseresult' keys were changed ('cputhreads' instead of 'threads', and 'cputimes' instead of 'benchtimes') resulting in KeyErrors. Benchmarking works when I copied the old  'plot_benchmark.py' and used in instead.\n\n2. Another error I had was 'IndexError: list index out of range' resulting from this line\n\n    cpuID = cpuID.split('GHz')[0].split('x')[1][1::] + 'GHz'\n\nThis was fixed when I changed the 'x' to 'X' (since I only had a capital 'X' in my cpuID.\n\nThank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 21, 2017, 3:19:34AM",
        "content": "Hi Iliyana,\n\n1. Yes, the benchmarking mode has been overhauled recently, so the new 'plot_benchmark.py' script will only plot recent benchmarks. One of the changes, as you've spotted, was changing some of the key names in the dictionary.\n\n2. Thanks for spotting this, I'll look into making it more robust. I've reported it as a bug in our issue tracker https://github.com/gprMax/gprMax/issues/106\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2017, 5:32:49AM",
        "content": "So I think the issue with getting the CPU ID should not occur when you have run a benchmark with the overhauled code. I think the reason you were seeing it was when loading (and plotting) a benchmark run with the older code.\n\nCraig"
      },
      {
        "author": "Iliyana",
        "date": "Apr 25, 2017, 10:08:42AM",
        "content": "I updated gprMax on my laptop and desktop, but I haven't asked to have the software updated on the supercomputer.\n\nLet me email to have this done and then I can test the new benchmarking function, but I am sure that it will work.\n\nThank you very much for your quick reply."
      },
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2017, 10:15:50AM",
        "content": "Great.\n\nYou should be able to install gprMax in user space on your HPC. This means you can update it whenever you want and don't have to email your IT support team to get it installed. It just needs git and anaconda which are modules that are usually available on a HPC. I have installed gprMax on a few HPCs in different institutions this way.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Iliyana",
        "date": "Apr 25, 2017, 10:50:56AM",
        "content": "This would be ideal, I have to ask if I am allowed to install anything in my user space.\n\nI use this script to run gprMax (using Slurm).\n\nI have a question - can I use gprMax across multiple nodes?\n\n#!/bin/bash\n##ENVIRONMENT SETTINGS; CHANGE WITH CAUTION\n#SBATCH --export=NONE                #Do not propagate environment\n#SBATCH --get-user-env=L             #Replicate login environment\n\n##NECESSARY JOB SPECIFICATIONS\n#SBATCH --job-name=gprmax_run1               #Set the job name to \"gprmax_1\"\n#SBATCH --time=24:00:00                      #Set the wall clock limit to 10hr and 0min\n#SBATCH --nodes=1                            #Request 1 node\n#SBATCH --ntasks-per-node=28                 #Request 28 tasks/cores per node\n#SBATCH --mem=55G                            #Request 55GB per node\n#SBATCH --output=gprmax_run1_out.%j          #Send stdout/err to \"gprmax_run1_out.[jobID]\"\n\n#First Executable Line\n\n### Load gprMax module\n\nml purge\nml gprMax/3.0.17-intel-2017A-Python-3.5.2\n\n### Set number of OpenMP threads for each gprMax model\nexport OMP_NUM_THREADS=28\n\n### run gprMax\n### python -m gprMax ./test_GSSI_1.5a.in -n 158\n\n#python -m gprMax ./cylinder_Bscan_GSSI_1500_exp1.in --geometry-only\n\npython -m gprMax ./cylinder_Bscan_GSSI_1500_exp2.in --geometry-only"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 25, 2017, 11:10:27AM",
        "content": "No, models can't be run across multiple cluster nodes, as gprMax is parallelised using OpenMP which uses a shared memory model. You should be able to run some pretty decent sized models within 64GB of RAM. I guess your issue maybe that you have to wait sometime for that resource to become available?\n\nYour submission scripts looks very similar to what I use on our HPC at the University of Edinburgh, except we use Grid Engine. You can just pull the code directly from GitHub into your user space using the same commands as for desktop/laptop. You'll need to see if you have an Anaconda module available, i.e. ml anaconda. You then need to build the conda environment for gprMax in your user space, as you would on a desktop/laptop. Modify your submission script to something like this:\n\n#!/bin/bash\n##ENVIRONMENT SETTINGS; CHANGE WITH CAUTION\n#SBATCH --export=NONE                #Do not propagate environment\n#SBATCH --get-user-env=L             #Replicate login environment\n\n##NECESSARY JOB SPECIFICATIONS\n#SBATCH --job-name=gprmax_run1               #Set the job name to \"gprmax_1\"\n#SBATCH --time=24:00:00                      #Set the wall clock limit to 10hr and 0min\n#SBATCH --nodes=1                            #Request 1 node\n#SBATCH --ntasks-per-node=28                 #Request 28 tasks/cores per node\n#SBATCH --mem=55G                            #Request 55GB per node\n#SBATCH --output=gprmax_run1_out.%j          #Send stdout/err to \"gprmax_run1_out.[jobID]\"\n\nml purge\nml anaconda\n\n\n### Set number of OpenMP threads for each gprMax model\nexport OMP_NUM_THREADS=28\n\n\n### Load Anaconda environment for gprMax\nsource activate gprMax\n\n### run gprMax\n\npython -m gprMax ./cylinder_Bscan_GSSI_1500_exp2.in --geometry-only\n\n\nCraig"
      },
      {
        "author": "Iliyana",
        "date": "Apr 25, 2017, 11:16:51AM",
        "content": "Thank you for the script!"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/BYhlW0neGFo",
    "title": "Typos in gprMax documentation",
    "original_post": {
      "author": "Prodromos Nikolaidis",
      "date": "May 8, 2021, 7:00:24AM",
      "content": "Hello everyone,\n\nAs a new user learning how-to-gprMax, I'm actively reading the documentation. From time to time I come along with some small typos here and there. I was wondering if it is interesting for the developers for us users to report such things (either here on this group or somewhere else dedicated for this purpose) in order for a later version of the documentation to be improved.\n\nFor example, http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model the .in file misses the hash # in the script so when someone tries to create the geometry file they receive an error message.\n\nBest,\n\nProdromos"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 10, 2021, 6:23:34AM",
        "content": "Hi Prodromos,\n\nYou are very welcome to suggest changes/corrections to the docs. Since they are on Github like the code, you can do a pull request for the docs in the same way you would for code corrections.\n\nBy the way, I think the specific issue you mention is deliberately missing the hash so that geometry is not produced for every A-scan in the B-scan antenna model, i.e. the user can put it back to see geometry if they want.\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/tZt-LUWHkQA",
    "title": "About Dipersive Simulation",
    "original_post": {
      "author": "HT.T",
      "date": "Oct 1, 2020, 5:16:00AM",
      "content": "Dear Warren\n        I  found a puzzle in simulating the dispersion characteristics of media. The dielectric model I used is Debye model. \n\nThe real part is basically the same, but the imaginary part is quite different.When I pick up the waveform of the same\n\n position for time domain waveform analysis, I found that the amplitude of the model with larger imaginary part is larger\n\n than that of the model with smaller imaginary part, which is quite different from my general understanding. I know \n\nAfter analyzing the wavelength, it is found that the model with larger imaginary part has longer wavelength and \n\nlower frequency.\n\n  Kind regard\n   HT.T\n\nTime domain waveform\n\n\n\n\nDebye model\n\n\n\nin.file\n\n#domain: 18 0.8 0.004 \n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 256e-9\n\n## zn000\n#material: 13.8 0 1 0 zn000\n#add_dispersion_debye: 2  0.9384868   2.968029e-10   507699656024141   159138.593770403  zn000\n\n#box: 0 0.1  0 18 0.11 0.004 pec\n#box: 0 0.11 0 18 0.56  0.004 zn000\n#waveform: ricker 30 900e6 my_ricker\n#hertzian_dipole: z 1 0.56 0.002 my_ricker\n#rx: 2 0.56 0.002\n##rx_array: 2 0.56 0.002 14 0.56 0.001 0.05 0  0\n##src_steps: 0.01 0 0\n#rx_steps: 0.15 0 0"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JTPnp1c1IwU",
    "title": "Question about run gprmax with mpi.",
    "original_post": {
      "author": "nan Hu",
      "date": "Feb 28, 2023, 1:56:08AM",
      "content": "I have a 4 * 32G Tesla V100 machine and try to run the gprmax with mpi.\nhere is the command:\npython -m gprMax auto_gene_test/in_data/cylinder_Bscan_2D.in -n 512 -mpi 5 -gpu 0 1 2 3\nIt success run 4 scan, and I get 4 .out files:\n\nbut after that, the shell is stunned, and shows nothing.\nI want to know how can I get the whole file(0-512 scan).\nand make the file exit with code 0."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2023, 6:36:51AM",
        "content": "Hi,\n\nThis could be related to this problem - https://github.com/gprMax/gprMax/issues/326, i.e. the GPU memory is not being freed after the initial 4 models are run. It looks like your models require most of the 32GB of GPU memory, so this might be the case. I would suggest monitoring using nvidia-smi in another terminal window and look to see what happens to the memory usage after the first 4 models have run.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "nan Hu",
        "date": "Mar 4, 2023, 4:53:21AM",
        "content": "Hi\n\nAs you advise, I run the script at GPU 2,3.（0,1 is used by other user）\nhere is the screenshot, seems like the GPU memory usage is low。\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gJLf-kuNnTM",
    "title": "gssi antenna problems in an article",
    "original_post": {
      "author": "Mahdi Njf",
      "date": "Jul 3, 2022, 12:34:03PM",
      "content": "Hi,\nFirst, thanks to GPRMAX team to make their nice code available open source its very usefull.\nim working on an article named (Creating finite-difference time-domain models of commercial ground-penetrating radar antennas using Taguchi’s optimization method) and i have 2 problem:\n1.gssi crosstalk have a phase difference how can i achive to the article photo?\n2. when i use a plate for gssi i have a big crosstalk and some times i cant even see the reflected wave . i tested a lot of codes but there is also problem!\nif you can help me please"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 4, 2022, 6:09:04AM",
        "content": "Unless you are using a transmission line model and receive a Voltage directly you need to convert the Electric field output to voltage. Across a single cell edge this can be done by V= - E * DL (think of the units to see why or look at EM books that explain this ...)\nReplicating the experimental setup with a model as accurately as possible will get the best agreement. Obviously the data need to be normalised to compare as what you get out of the GSSI system are not in the right units.\n\nHope that helps\n\nAntonis\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/SWVhHGRog-w",
    "title": "GPU out of memory",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "Nov 9, 2019, 6:34:55AM",
      "content": "Hi Guys:\n\nRcenetly I upgraded my GPU to GeForce RTX 2080 Ti with memory of 11G, and I have two CPU(Intel Xeon Gold 5118), totally 24 cores(48 threads)with memory of 272G.\nWhen I use the workstation to simulate a 3D model(140A_scans)  combine OpenMP(=3)/MPI(=15) and GPU, it gives the follow traceback(attached picture),\nFrom the error message, it didn't reach the max 11G(just 7.51G for the GPU), so where the problem is?\n\nBest\nDongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 11, 2019, 5:50:55AM",
        "content": "Hi Dongyang,\n\nIf you only have a single GPU then using MPI will be of no benefit, and is most likely what is causing your memory issues as MPI is trying to run multiple models on a single GPU.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qTYtHof0Fis",
    "title": "monopole antenna simulation",
    "original_post": {
      "author": "xianyang gao",
      "date": "Apr 10, 2018, 10:35:50AM",
      "content": "Dear Everyone,\n\nI recently simulated monopole antennas (shown in the picture) in both gprMax and CST. I found the o21 results of two monopole antennas facing each other in the air at a distance 10 cm are quite different in gprMax and CST, while the CST result matches the measurement much better.\n\nI tried to think whether it is the material properties that caused such problem. However, when I remove all the other materials and only kept 'pec' triangle antenna and circle ground in both gprMax and CST, the trend remains the same - CST result is more similar to the experiment.\n\nAny idea what is the problem in my code? or is there some problems for gprMax to simulate the monopole antenna (feed point problem)?\n\nIn both gprMax and CST, I put a 50 Ohms port between triangle antenna and circle ground.\n\nThank you very much.\nBest regards\nXianyang"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 10, 2018, 3:55:51PM",
        "content": "Hi Xianyang,\n\nVery interesting comparison. CST has a number of advanced tools that gprMax does not implement (yet, or even ever!) Do you use a coaxial feeding source in CST? or is that a simple voltage gap source with 50 Ohms resistance? The retransmission line model that gprMax is not really a good choice for a monopole. It is easy to get a coaxial feed but is not yet available. Other points could be the conformal meshing option that CST has (i.e. reduce stair casing effects) and how thick are the \"thin\" materials. Are they simulated in each case with the same FDTD cells? Finally, we need to make sure that the distance to the PMLs are the same (i.e. the two models are similar in size) \n\nBest\n\nAntonis"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 11, 2018, 5:21:37AM",
        "content": "Hi Xianyang,\n\nA couple of things I noticed about your simulations that might be causing problems:\n\nHave you checked the geometry of your model thoroughly? In the input file you attached, you specify the triangle command (which creates the monopole) before you place cylinders for the ground plane and plastic mounting. So from what I can see, you are overwriting (and thus destroying) the triangle, thus not simulating a monopole.\nIt also looks like the monopoles and feeds/receivers in the model are not in the same position as the real antenna - in the model they are a significant distance from the ground plane, yet in the real antenna it looks like there are only the thickness of the plastic from the ground plane. So you should check this also.\nCan you plot the comparisons on a single graph. Even the measured data looks different on the gprMax and CST plots.\nWe have carried out (and published) comparisons for dipole antennas in free space and over half spaces, modelled using gprMax (FDTD), CST (FIT), and time domain integral equations (TDIE). The match between gprMax and CST was very good, you can see the results at - http://www.jpier.org/PIERM/pierm57/18.17021602.pdf\n\nAlso, as Antonis pointed out, you must ensure you are comparing apples with apples. So in your case, using the same feed mechanism in each model, and ensuring CST is not using any conformal meshing.\n\nLet us know how you get on.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/8YaABFoz7g4",
    "title": "Something is wrong when I am running antenna field patterns",
    "original_post": {
      "author": "Ruonan Chen",
      "date": "Jul 7, 2020, 5:20:15AM",
      "content": "Hi,\n\nWhen I am running the example of antenna patterns, something is wrong.\n\nMy steps are as follows:\nFirst,\n->Modify the running time in ''antenna_like_GSSI_1500_patterns_E.in'' in user_models, from 4.5e-9 to 4.5e-10.\n\nThen, running the command \n-> python -m gprMax antenna_like_GSSI_1500_patterns_E.in\n\nThen,\n-> python -m user_libs.antenna_patterns.initial_save user_models/antenna_like_GSSI_1500_patterns_E.out\n\nLast,\n-> python -m user_libs.antenna_patterns.plot_fields user_models/antenna_like_GSSI_1500_patterns_E.npy\n\nThen it got the following error: AttributeError: ‘Text’ object has no property 'frac', details are as shown in the figure.\n\nCould you please help me?\n\nThanks.\n\nBest wishes,\nRuonan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 13, 2020, 8:54:25AM",
        "content": "Dear Ruonan,\n\nI think the error you are receiving is from a deprecated property ('frac') used in the plotting of the patterns. It only effects where tick marks are placed on the polar plots. I have removed it in the latest commit. So if you update your gprMax and try again it should now work.\n\nPlease let me know.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/61zwr0l5LEY",
    "title": "Re: Share a Matlab general operation script for gprMax. Good for batch processing.",
    "original_post": {
      "author": "",
      "date": "",
      "content": ""
    },
    "responses": [
      {
        "author": "Zoey",
        "date": "Aug 26, 2019, 9:49:10PM",
        "content": "Hi Zhou!\n\nI tried to e-mail to you but your address maybe wrong. \n\nI am a student in HIT and try to use gprMax. I want to communicate with you , could I add your Wechat? My Wechat is xiawuyou1996.\n\nThank you!\n\nXuzihan"
      },
      {
        "author": "Dongyang Liu",
        "date": "Jan 8, 2020, 7:01:59AM",
        "content": "Hi Xu!\n\nHave you contacted with the initial author?\n\nI'm a student in CSU, I want to do machine learning with GPR image which involve with batch processing .\n\nMuch appreciate it if you can help .Hope to get your reply.\n\nSincerely\n\nDongyang"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/M1443JQs9N4",
    "title": "Error",
    "original_post": {
      "author": "ben khalifa Montassar",
      "date": "Dec 16, 2016, 10:43:00AM",
      "content": "Hello, GprMax Masters! Thanks for your help to beginners like me .\ni have simulate this example\nbut i have an error.\nCan anyone help me out with this? Thanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Dec 16, 2016, 10:56:34AM",
        "content": "Hi Ben,\n\nWelcome to the forum!\n\nRead the error message, check your domain size and spatial discretisation - you only have 2 cells in the x and y directions which is why the standard PML boundary which is 10 cells (on each boundary) won't fit in your domain.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "ben khalifa Montassar",
        "date": "Dec 19, 2016, 3:18:32AM",
        "content": "Hi Graig,\n\n  I tried to change the domaine size (See Example 2) I have now 12 cells in the x and y directions, But I'm getting the same error message !! (see Fig2). \nThank you again for your help."
      },
      {
        "author": "Craig Warren",
        "date": "Dec 19, 2016, 6:02:13AM",
        "content": "Hi Ben,\n\nTake a look at the simple 2D example in the User Guide - http://docs.gprmax.com/en/latest/examples_simple_2D.html#a-scan-from-a-metal-cylinder\n\nIn particular if you look at the geometry (http://docs.gprmax.com/en/latest/_images/cylinder_half_space_geo.png) you'll see the PML absorbing boundary is applied on all sides of the domain. So as I explained with a default PML, which is 10 cells, your domain must be at least 20 cells for the PML and then probably another 30 cells to include any targets and make sure they are not too close to the boundary.\n\nI suggest reading the Guidance on GPR modelling and following the examples to make sure you really understand what is going on with the models.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/9GJPTw_EuLk",
    "title": "GeneralError: MPI is not beneficial when there is only one model to run",
    "original_post": {
      "author": "Elizabeth",
      "date": "Apr 22, 2017, 8:33:52AM",
      "content": "Hi everyone,\n\nWhen I finish my code and run it, there is a general error——MPI is not beneficial when there is only one model to run.Who can tell me what's wrong with it and how to solve this problem?TT\nAnd also，there is a value warning——Maximum dimension allowed exceed. It seems that my model has too many cells. But I just copy the number from a thesis\n\nBest regard."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 22, 2017, 10:43:59AM",
        "content": "Elizabeth,\n\nMPI refers to the Message Passing Interface, which is generally for use on High Performance Computers (HPC). It is used to task farm multiple A-scans http://docs.gprmax.com/en/latest/openmp_mpi.html#parallel-execution Using MPI is a advanced topic, and you need to understand a bit about parallel programming and HPC environments to use it.\n\nI don't know what the second error message you mention refers to. Please provide more details. However I did notice in your model you have set a time window of 40e9 seconds which is unnecessarily large, I think you meant 40e-9 seconds.\n\nIt is not good practice to just copy data from other sources (such as a thesis) without having a clear understanding of what the original model was trying to achieve.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Elizabeth",
        "date": "Apr 22, 2017, 8:43:56PM",
        "content": "Craig,\n\nThanks for your advice. I set a wrong time window. I change it to 40e-9 seconds and it works.\nYes you are right. I should learn and understand more about gprMax and FDTD.\n\nBest regard.\nElizabeth"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/vFH7x4BGP9k",
    "title": "How to generate a stationary wave?",
    "original_post": {
      "author": "Jonhatan Barriga",
      "date": "Sep 2, 2016, 12:10:24PM",
      "content": "Hi:\n\nI want to model a typical metal detector with a coil with stationary current (not a pulse)...Is this possible in gprMax?\n\nThanks.\n\nJOB-M"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 5, 2016, 7:56:21AM",
        "content": "You cannot really do this with gprMax in any reasonable way. An EMI sensor uses very low-frequency EM fields that diffuse into the ground instead of propagating like waves. The physics are different and although the full Maxwell equations still describe the phenomena the solution using standard FDTD like gprMax is unreasonably computationally expensive. So, standard FDTD is not the best modelling approach for low-frequency EM modelling."
      },
      {
        "author": "Jonhatan Barriga",
        "date": "Sep 5, 2016, 10:18:39AM",
        "content": "Sure, but you could have the same platform: gprMax. And I could share enviroment models and to model once and test differents antennas."
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Sep 5, 2016, 11:14:32AM",
        "content": "Yes, you could develop a low-frequency EM modelling process using gprMax as a general platform to make model building etc. easy. You need to alter the solver part in gprMax and offer an option for a low frequency diffusion solver and that is not necessarily difficult. However, it is not trivial either and it needs work by someone who knows what is doing ...\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MJ_RPcpc55U",
    "title": "Hi, Yekuaraw",
    "original_post": {
      "author": "Yekuaraw",
      "date": "Feb 16, 2018, 6:08:43AM",
      "content": "I want to display my geometry using paraview but is their any difference between paraview and vtk. \n\n Thanks!"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 17, 2018, 4:36:34AM",
        "content": "Hi Yekuaraw,\n\nWelcome to the forum!\n\nVTK (https://www.vtk.org) - Visualisation Toolkit - refers to the system and format that, in our case, we use to store the geometry information of the model. Paraview (https://www.paraview.org) is a free viewer that can view (amongst others) VTK files.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZXRQtXpmn3g",
    "title": "Why do I get uncompleted images?",
    "original_post": {
      "author": "m mh",
      "date": "Jan 11, 2018, 8:40:50PM",
      "content": "Hi, \n First, I have a question. How to determine the PML region with in a domain? \n\nSecond,  I have this issue here that I do not know how to solve \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nand this is the code \n\n\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 4 0 1 0 half_space\n#material: 4.5 0 1 0 Concrete\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.110 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.075 0.168 0 0.075 0.168 0.002 0.010 pec\n\nand this is another image \n\n#domain: 0.240 0.210 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n\n#material: 8 0 1 0 half_space\n#material: 4.5 0 1 0 Concrete\n\n#waveform: ricker 1 1.5e9 my_ricker\n#hertzian_dipole: z 0.040 0.170 0 my_ricker\n#rx: 0.110 0.170 0\n#src_steps: 0.002 0 0\n#rx_steps: 0.002 0 0\n\n#box: 0 0 0 0.240 0.170 0.002 half_space\n#cylinder: 0.075 0.168 0 0.075 0.168 0.002 0.050 pec"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 12, 2018, 5:10:45AM",
        "content": "Dear m mh,\n\nYou should always check the geometry of your model before running it to ensure it is correct. This will also show you the PML regions - the default PML is 10 cells thick on all domain boundaries.\n\nIf you check the geometry for your model you will immediately see the problem (see attached image) - your cylinder is not buried!\n\nKind regards,\n\nCraig"
      },
      {
        "author": "m mh",
        "date": "Jan 12, 2018, 10:20:42AM",
        "content": "Thank you for your reply\nWhat program did you use to show the geometry and the PML? PARAVIEW did not work with me"
      },
      {
        "author": "Craig Warren",
        "date": "Jan 15, 2018, 4:40:24AM",
        "content": "Paraview is the software we recommend for viewing geometry.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/37Un4uIdzYE",
    "title": "Custom transmitter and receiver",
    "original_post": {
      "author": "Delfina RJ",
      "date": "Jul 26, 2023, 1:56:26PM",
      "content": "Hi! I'm working in an experimental project on electromagnetic scattering and gprMax turned to be really useful, thanks!. However, i'm having trouble in uploading a custom antenna to gprMax, and using it as a transmitter and a receiver. Could you help me?\n\nBest regards,\nDelfina"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 11:08:45AM",
        "content": "Hi Delfina,\n\nAre you talking about 1) a complete antenna geometry? or 2) just a custom waveform? \n\nFor 1) you would have to build the antenna using gprMax geometry primitives (#box, #plate, #edge etc...) or you could import a geometry using the #geometry_objects_read command if you can get it in a suitable format, see docs - https://docs.gprmax.com/en/latest/input.html#geometry-objects-read\nFor 2) you can import a custom waveform shape from a file and use it with a simple source such as a Hertzian dipole, again see docs - https://docs.gprmax.com/en/latest/input.html#excitation-file and https://docs.gprmax.com/en/latest/input.html#hertzian-dipole\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/C-PdztmH4VU",
    "title": "Create irregular shaped geometry",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Dec 10, 2018, 9:07:05PM",
      "content": "Hi all,\n\nI will like to create a geometry to represent a plume of fluid in the soil. What is the best way to create such a geometry?\n\nThanks,\nIkechukwu"
    },
    "responses": [
      {
        "author": "Dimitrios Angelis",
        "date": "Dec 11, 2018, 7:47:39AM",
        "content": "Hello Ikechukwu,\n\nYou can use convert_png2h5.py module to do that.\n\nSee the example below.\n\n\n\nKind regards,\n\nDimitris"
      },
      {
        "author": "Ikechukwu",
        "date": "Dec 11, 2018, 9:10:28AM",
        "content": "Hi Dimitris,\n\nThanks for the prompt response. I will check it out.\n\nCheers\nIkechukwu"
      },
      {
        "author": "Ikechukwu",
        "date": "Dec 12, 2018, 12:51:28AM",
        "content": "Hi Dimitris,\n\nHow do make the dimensions of the geometry in the png image correspond to the dimensions in gprmax. For example, the dimensions of the ellipse in the png image is 10 cm by 76 cm but the size becomes larger when imported into the gprmax geometry as you see from the output from Paraview 5.6. (the size of the circle is 10 cm by 10 cm). Kindly find all files attached.\n\nThanks in anticipation\n\nIkechukwu"
      },
      {
        "author": "Dimitrios Angelis",
        "date": "Dec 12, 2018, 3:05:44AM",
        "content": "Hi Ikechukwu,\n\nI think that if you design the whole model as a png image it would be easier than trying to add the targets separately.\n\nEach pixel of the png image correspond to a cell in gprMax. In your case domain: 0.80 0.440 0.002 and dx_dy_dz: 0.002 0.002 0.002\nthe pixels of your image should be 0.80/0.002 = 400, 0.440/0.002 = 220\n\nIf you still want to add targets separately i think that your elipse png image pixels should be 0.76/0.002 = 380, 0.1/0.002 = 50. But again half of your elipse will be outside of the model, since your domain size (x) is 0.8m.\n\nI hope the above helps :)\n\nKind regards,\nDimitris"
      },
      {
        "author": "Ikechukwu",
        "date": "Dec 12, 2018, 9:49:50AM",
        "content": "Hi Dimitiris,\n\nIt worked perfectly!\n\nThanks for your help.\n\nCheers\nIkechukwu"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dUSNYpMi5eU",
    "title": "Using Built-in pec in #material",
    "original_post": {
      "author": "Del Buan",
      "date": "Feb 8, 2025, 11:38:10PM",
      "content": "Dear gprMax team,\n\nI'm currently creating a model in gprMax. I'm looking into how to use the built-in PEC (Perfect Electrical Conductor) in gprMax as one of my materials in the #material section.\n\nI came across the documentation and it stated that in order to call a material, it needs to be in this format: #material: f1 f2 f3 f4 str1.\n\n For PEC, the parameters are:\neps_r = 1\nSigma [S/m] = inf (infinite)\nmu_r = 1\nSigma* [Ohm/m] = 0\n\nAnd translates to the format according to the documentation: #material: 1 inf 1 0 pec.\n\nTherefore, to use the built-in PEC in gprMax as one of my materials according to the format above, do I replace f2 to \"inf\" or is there other methods for this?\n\nThank you in advance!"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Feb 9, 2025, 10:55:55AM",
        "content": "To use the building PEC material you hast specify it in any of the object building commends without the need to define it with a material command. PEC is applied as a boundary condition where the electric field is zero. The electrical parameters do not really matter. On PEC materials the electric field is zero. It is simple. Equally you can use free_space to get the properties of empty space (vacuum) as default. \n\nHope this helps\n\nAntonis\n"
      },
      {
        "author": "Del Buan",
        "date": "Mar 4, 2025, 1:49:34PM",
        "content": "Hi Prof. Antonis,\n\nMy scenario would be importing a geometry \"geometry_1.h5\" and I would like to define the PEC material in the material.txt file to set some metallic bars. How can I do that? \n\nThank you!\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 5, 2025, 8:50:31AM",
        "content": "If you are importing your own geometry and materials then it is probably best to define your own PEC, e.g. #material: 1 inf 1 0 mypec, in your materials file.\n\nCraig\n\n"
      },
      {
        "author": "Del Buan",
        "date": "Mar 6, 2025, 7:33:00AM",
        "content": "Hi Craig,\n\nI have defined the method you have suggested: #material: 1 inf 1 0 in my materials file for the PEC material. But when I see my B-Scan, the part that I have defined the PEC supposed to have a stronger reflection, but it has a weaker reflection instead. These are the parameters for my input file: \n\n#domain: 1.80 1.30 0.20\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 10e-09\n\n#waveform: ricker 10 1.3e9 my_ricker\n#hertzian_dipole: x 0.4 0.20 0.10 my_ricker\n#rx: 0.5 0.20 0.10\n\n#src_steps: 0.02 0 0\n#rx_steps: 0.02 0 0\n\n#pml_cells: 20 20 20 20 20 20\n\n#geometry_objects_read: 0 0 0 C:\\Users\\dev\\OneDrive\\Desktop\\gprMax_Simulations\\Simulations\\geometry_1.h5 C:\\Users\\dev\\OneDrive\\Desktop\\gprMax_Simulations\\Simulations\\materials.txt \n\nAfter checking the input file, I can't seem to find the issue as to why there is a weaker reflection for the PEC part where it supposed to have a stronger reflection. Need help on this, thank you!\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 6, 2025, 4:53:21PM",
        "content": "Can you post a screenshort or export of the model geometry from Paraview please.\n\nCraig\n\n"
      },
      {
        "author": "Del Buan",
        "date": "Mar 7, 2025, 5:06:54AM",
        "content": "Hi Craig,\n\nThe below screenshot is the model geometry from ParaView. From the geometry in the screenshot, the part that I wanted to put my PEC is annotated in red.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2025, 12:01:27PM",
        "content": "So when you select your mypec material in Paraview does it show the correct volume?\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/-0Q9Y8cj34M",
    "title": "synthetic data",
    "original_post": {
      "author": "naween dissanayake",
      "date": "Feb 26, 2024, 4:03:39AM",
      "content": "Dear All,\n\nWould that be possible to synthetically generate PVC pipes water inside and some leaky part of the data. ? \n\nHere I will attach some example that i generate and now i wan to fill this pvc pipe with water and some leaky area?"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Kp9QJXh4AbY",
    "title": "Bandwidth of GSSI 1.5GHz antenna model",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Jun 1, 2019, 2:47:34PM",
      "content": "Hi everyone,\n\nIs there a way of knowing the bandwidth of the GSSI 1.5GHz antenna model? I tried using the a plot_antenna_param script but I got error about some files not being found even though it worked with the dipole antenna.\n\nThanks\nIkechukwu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jun 3, 2019, 4:31:53AM",
        "content": "Use (and customise if required) the `-fft` option with the plot_Ascan tool - http://docs.gprmax.com/en/latest/plotting.html#plot-ascan-py\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 3, 2019, 4:35:19AM",
        "content": "BTW The 'plot_antenna_params' tool can be used to plot s11 but requires you to use a transmission line in the antenna model. The GSSI 1.5GHz uses a voltage source by default.\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/VjZUcVD-jQ8",
    "title": "Processing time too long",
    "original_post": {
      "author": "ming zhao",
      "date": "Nov 24, 2022, 11:39:04PM",
      "content": "Hello everyone！\n         When using HPC simulation, why does the multi-node calculation take longer than the single node calculation? I tried three nodes and it took longer than the single node calculation. Here is the script I used."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 26, 2022, 6:45:56AM",
        "content": "Be careful with your batch script variables, see https://slurm.schedmd.com/sbatch.html \n\nIn your example script you are requesting a single node (-N 1) and five tasks (-n 5), each using 16 threads (-c 16 and OMP_NUM_THREADS). So you are trying to run all 5 tasks on a single node, which is probably why you are seeing a reduction in performance. Also be careful with the setting of the -pe ($NSLOTS) setting as this should be the number of MPI tasks (i.e. 5 in this case) times the number of threads per task (i.e. 16 in this case), so a total of 80 not the 176 you specify.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zVII7lIwC0s",
    "title": "Subject: Inquiry About Simulating Larger Batches in gprMax",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Mar 11, 2025, 4:52:01PM",
      "content": "Dear gprMax Community,\nI hope this message finds you well. I am currently simulating a soil channel and, due to my HPC access limitations, can run up to 20,000 simulations per week.\nI would like to increase this to 100,000 simulations. To achieve this, I am considering dividing the simulations into five batchesand run the simulations in parallel. My question is: for the second batch, can I start the current simulation run from 20,001? This way, I can extend my data seamlessly from 20,000 to 100,000 without needing to manipulate or process the data, ensuring each set of 20,000 simulations is mapped with their actual labeling.\nIf you have any suggestions or insights on this approach, I would greatly appreciate your input.\nThank you for your support."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2025, 12:05:29PM",
        "content": "You can use the --restart command line argument (https://docs.gprmax.com/en/latest/include_readme.html#optional-command-line-arguments) to tell gprMax to start from a specific numbered input file.\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/SeEyZ4A_sZI",
    "title": "No results for MALA Antenna",
    "original_post": {
      "author": "Mohamed Elsaid",
      "date": "Aug 8, 2017, 5:47:20PM",
      "content": "First of all I would like to thank Craig Warren to guide me to this forum. I’m beginner in using the software package gprmax and try to use the MALA Antenna in my code but the result B scan didn’t have any hyperbola. I don’t know what’s the wrong in my code.\nThe code:-\n#title: B-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.280 0.280 0.280\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 3e-9\n#material: 6 0 1 0 half_space\n#python:\nfrom user_libs.antennas import antenna_like_MALA_1200\nantenna_like_MALA_1200(0.13,0.1,0.17,0.002)\n#end_python:\n#box: 0.05 0.05 0.05 0.23 0.230 0.170 half_space\n#cylinder: 0.150 0.10 0.1 0.150 0.10 0.15 0.010 pec\n#geometry_view: 0 0 0 0.280 0.280 0.280 0.002 0.002 0.002 MALA_Antenna n\nIf possible let me know what’s the mistakes in this code"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 9, 2017, 5:09:58AM",
        "content": "Hi Mohamed,\n\nWelcome to the forum! To create a B-scan using a full antenna model (such as the one like the Mala 1.2GHz antenna), you need to move the antenna between each A-scan run. See the example in the User Guide at http://docs.gprmax.com/en/latest/examples_antennas.html#b-scan-with-a-bowtie-antenna-model The Python variable 'current_model_run' is used to make the antenna move (in the x-direction) for each A-scan that comprises the B-scan. With the model you have at the moment your antenna is stationary so you will get the same A-scan each time the model is run.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mohamed Elsaid",
        "date": "Aug 17, 2017, 1:36:02PM",
        "content": "Hi Craig,\n\nI'm thankful for your supporting for this issue and I would like to ask some questions:-\n\n1. Is gprmax support the usage of these two antennas only  (GSSI and MALA)? or can I create other model (by modifying the antennas.py file according to the specification of another antenna ) and insert it in the simulation for another antenna (say, UTSI antenna)?\n\n2. Can I insert any features related to antenna inside the antenna library (antennas.py) like the power of the antenna and directivity?\n\n3. When I use the command python -m tools.plot_antenna_params file.out   to plot the antenna parameters, the gprmax show keyerror can't open the attribute (can't locate the attribute: 'dx ,dy, dz''). is this error in the output file or this command can be used in different manner?\n\nSorry for taking much of your time.\n\nThanks,\nMohamed"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 18, 2017, 4:38:56AM",
        "content": "Hi Mohamed,\n\nTo answer your questions:\n\nI created antenna models (which are in the antennas.py module) that are like the GSSI 1.5GHz antenna and MALA 1.2GHz. If you have the necessary information (geometry, material information, feed method etc...) you can create a model of any antenna you like. You don't have to put the model in the antennas.py module, you can include the details directly in your input file or make your own module to store the antenna model.\nI don't understand what you mean. Are you talking about describing the antenna via a power pattern?\nThis error suggests there is a problem with your output file. All gprMax output files should contain the attribute 'dx, dy, dz' which gives the spatial discretisation in the x, y, and z-directions.\nKind regards,\n\nCraig"
      },
      {
        "author": "Mohamed Elsaid",
        "date": "Aug 19, 2017, 11:27:06AM",
        "content": "Hi Craig,\n\nfor the 2nd question, yes this is what I mean, describe the antenna via its power.\nfor the 3rd,You are right, all output files should have the attribute dx,dy,dz. whatever, I change the output file and try to plot the antenna parameter, but have error \"unable to open the object <component not found>\"\n\nThanks for your help\nMohamed"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 20, 2017, 4:57:15PM",
        "content": "Mohamed,\n\nYou can't directly use the power pattern of an antenna as source(s) in a model. In any case the pattern of an antenna will change depending upon whatever material(s) the antenna is next to.\nThe 'plot_antenna_params.py' module is designed to be used when a model of an antenna is used in a simulation (and that antenna model should be excited using the transmission line feed). The model you are running (from what I can see) is one of the examples that uses a Hertzian dipole to represent an antenna, so this module will not work.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mohamed Elsaid",
        "date": "Aug 25, 2017, 4:17:39PM",
        "content": "Hi Craig,\n\nNo,you looked only to the name of the file but i have modified this file. The used antenna is one of the antenna models (MALA antenna). I tried once more for more models, but obtain the same result. I sent the used model in the attachment. \n\nSorry for disturbing,\nRegards,\nMohamed."
      },
      {
        "author": "Craig Warren",
        "date": "Aug 28, 2017, 7:14:03PM",
        "content": "Mohamed,\n\nI see you are using the antenna model like a Mala 1.2GHz antenna in this input file. However, to get s11 parameters from an antenna you must feed it using the #transmission_line source (see http://docs.gprmax.com/en/latest/plotting.html#plot-antenna-params-py) which is not the case for the Mala antenna model - it is fed using a #voltage_source (see line 405 in the antennas.py module). You can change this but you need to have a good understanding of the different source models and a bit of Python.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Mohamed Elsaid",
        "date": "Sep 10, 2017, 5:32:10AM",
        "content": "Hi Craig,\n\nThank you for your kind reply and your time for explaining this issue.\n\nRegards,\nMohamed"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/7WhfFyN85kk",
    "title": "I would like to know where the issue lies. I have uploaded my .in file and B-SCAN. Could you please assist me?Why is there a blurred concave region in the B-SCAN",
    "original_post": {
      "author": "王晨",
      "date": "Feb 7, 2024, 7:35:14PM",
      "content": ""
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 21, 2024, 5:36:55AM",
        "content": "Can you post a screenshot of the geometry view please.\n\nCraig\n\nOn Thursday 8 February 2024 at 00:35:14 UTC chen...@gmail.com wrote:"
      },
      {
        "author": "liu ft",
        "date": "Mar 17, 2025, 11:18:48AM",
        "content": "I also encountered this situation when drawing cross-polarized images, how did you solve it later?\n\n在2024年2月8日星期四 UTC+8 08:35:14<chen...@gmail.com> 写道："
      },
      {
        "author": "Craig Warren",
        "date": "Mar 17, 2025, 12:03:56PM",
        "content": "Please post an image showing your geometry.\n\nCraig\n\n"
      },
      {
        "author": "liu ft",
        "date": "Mar 19, 2025, 2:36:41AM",
        "content": "Thank you for your reply!\nThis is my .in file\n\nWhen I drew the Bscan for Ex and Ey directions, the following results appeared:\nEx：\nEy：\nI have two questions:\n① : Why is the hyperbola incomplete in cross-polarized Bscan images\n② : Why is the cross-polarized signal stronger than the positively polarized one, even after removing the direct wave\n\nLooking forward to your reply, thanks!\nLiu ft\n"
      },
      {
        "author": "Craig Warren",
        "date": "Mar 19, 2025, 11:51:55AM",
        "content": "Please post an image of your geometry (mesh) generated from your input file, i.e. by using a geometry_view in your input file.\n\nCraig\n\n"
      },
      {
        "author": "liu ft",
        "date": "Mar 25, 2025, 4:35:24AM",
        "content": "Thank you for your reply. This is my model, in which the transceiver antenna is too small, I circled it in red.\n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 25, 2025, 6:19:09AM",
        "content": "You are looking at the Ey component which is a vertical component for your geometry. This is not the cross-polarised response that the Ez will give you as a good estimate (there is a small offset in the components and it is not exactly cross-pol) of GPR cross-polarised response. \n\nThe vertical component above a metal target approaches a minimum directly over it. It looks asymmetric because it is the field received above the target irrespectively of the position of the transmitter. In your Ex scan the apex of the hyperbola is at the mid-point of your Tx and Rx as it should. However, the vertical component is at a minimum directly over the target. That means that it should appear before the apex and when the Rx itself is above the target and not when the mid-point of the Tx and Rx is over it.\n\nI have done a similar analysis in my PhD thesis very very long time ago looking in the response of the magnetic fields but the concepts are the same.\n\nIf you are interested in the cross-polarised response  that some GPRs provide  then you are looking at the wrong component. In this case you need the Ez one. Your model is otherwise OK.\n\nHope this helps\n\nAntonis\n\n"
      },
      {
        "author": "liu ft",
        "date": "Apr 23, 2025, 6:43:43AM",
        "content": "Thank you for your reply!\n\nI have another question. When I set the transmitted wave in the x-direction and plot the B-scan of the Ez component, its amplitude appears very small (compared to the previous two cases), even after removing the direct wave using the mean value method. Additionally, the B-sscan seems to have slight gaps.\n\nLooking forward to your reply.\n\nLiuft\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/3YHLII8NTmI",
    "title": "An MPI problem when running on cluster with the SGE scheduler.",
    "original_post": {
      "author": "Ethan Hereth",
      "date": "Feb 13, 2019, 4:59:14PM",
      "content": "I'm not a gprMax expert, I'm trying to get the code installed and configured on a HPC cluster for a scientist. I've been able to get the OMP and OMP/GPU versions working, but I cannot figure out how to get the MPI version to run. I'm hoping somebody here can help me figure out what's going on.\n\nI'm using SGE to submit a job with the script below: (gleaned from http://docs.gprmax.com/en/latest/openmp_mpi.html)\n\n#!/bin/bash\n#####################################################################################\n### Change to current working directory:\n#$ -cwd\n\n### Specify runtime (hh:mm:ss):\n#$ -l h_rt=01:00:00\n\n### Parallel environment ($NSLOTS):\n#$ -pe openmpi 56\n\n### Job script name:\n#$ -N test\n\n### Specify shell\n#$ -S /bin/bash\n#####################################################################################\n\n### Initialize module environment\n. /etc/profile.d/modules.sh\n\n### Load and activate Anaconda environment for gprMax, i.e. Python 3 and required packages\nmodule load anaconda\n\nsource activate gprMax\n\n### Load OpenMPI, cuda\nmodule load openmpi/gcc/64/3.1.0\nmodule load cuda92/toolkit/9.2.88\n\n### Set number of OpenMP threads per MPI task (each gprMax model)\nexport OMP_NUM_THREADS=28\n\necho \"****************************************\"\nprintenv\necho \"****************************************\"\n\n### Run gprMax with input file\npython -m gprMax cylinder_Ascan_2D.in -n 2 -mpi 3\n\n\nI keep getting the following error:\n\n--------------------------------------------------------------------------\nYour application has invoked an MPI function that is not supported in\nthis environment.\n\n  MPI function: MPI_Comm_spawn\n  Reason:       the Yalla (MXM) PML does not support MPI dynamic process functionality\n--------------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/cm/shared/apps/anaconda/5.0.1/envs/gprMax/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/cm/shared/apps/anaconda/5.0.1/envs/gprMax/lib/python3.7/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/cm/shared/apps/anaconda/5.0.1/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/__main__.py\", line 6, in <module>\n    gprMax.gprMax.main()\n  File \"/cm/shared/apps/anaconda/5.0.1/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/gprMax.py\", line 70, in main\n    run_main(args)\n  File \"/cm/shared/apps/anaconda/5.0.1/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/gprMax.py\", line 193, in run_main\n    run_mpi_sim(args, inputfile, usernamespace)\n  File \"/cm/shared/apps/anaconda/5.0.1/envs/gprMax/lib/python3.7/site-packages/gprMax-3.1.4-py3.7-linux-x86_64.egg/gprMax/gprMax.py\", line 424, in run_mpi_sim\n    newcomm = comm.Spawn(sys.executable, args=['-m', 'gprMax'] + myargv + [workerflag], maxprocs=numworkers)\n  File \"mpi4py/MPI/Comm.pyx\", line 1534, in mpi4py.MPI.Intracomm.Spawn\nmpi4py.MPI.Exception: MPI_ERR_INTERN: internal error\n\n\ngprMax outputs:\n\n === Electromagnetic modelling software based on the Finite-Difference Time-Domain (FDTD) method \n\n    www.gprmax.com   __  __\n     __ _ _ __  _ __|  \\/  | __ ___  __\n    / _` | '_ \\| '__| |\\/| |/ _` \\ \\/ /\n   | (_| | |_) | |  | |  | | (_| |>  <\n    \\__, | .__/|_|  |_|  |_|\\__,_/_/\\_\\\n    |___/|_|\n                     v3.1.4 (Big Smoke)\n\n Copyright (C) 2015-2019: The University of Edinburgh\n Authors: Craig Warren and Antonis Giannopoulos\n\n gprMax is free software: you can redistribute it and/or modify it under the\n  terms of the GNU General Public License as published by the Free Software\n  Foundation, either version 3 of the License, or (at your option) any later\n  version.\n gprMax is distributed in the hope that it will be useful, but WITHOUT ANY\n  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR\n  A PARTICULAR PURPOSE.  See the GNU General Public License for more details.\n You should have received a copy of the GNU General Public License along with\n  gprMax.  If not, see www.gnu.org/licenses.\n\nHost: ts07 | Dell Inc. PowerEdge R730 | 2 x Intel(R) Xeon(R) CPU E5-2680 v4 @ 2.40GHz (28 cores) | 126GiB RAM | Linux (3.10.0-327.3.1.el7.x86_64, CentOS Linux)\n[1550094536.264641] [ts07:27513:0]         sys.c:744  MXM  WARN  Conflicting CPU frequencies detected, using: 3112.31\n[1550094536.269429] [ts07:27513:0]         mxm.c:196  MXM  WARN  The 'ulimit -s' on the system is set to 'unlimited'. This may have negative performance implications. Please set the stack size to the default value (10240) \n[1550094536.272767] [ts07:27513:0]         mxm.c:196  MXM  WARN  The 'ulimit -s' on the system is set to 'unlimited'. This may have negative performance implications. Please set the stack size to the default value (10240) \nMPI master (MPI_COMM_WORLD, rank 0) on ts07 using 2 workers\n\n\nAnd the job fails; I am not sure what's going on and I'm not familiar enough with all the underlying systems (python, mpi4py, etc.) to figure out what's going on here. I gather that this has something to do with our Mellanox IB network but I'm not sure. Frankly, I'm not even sure how the mpi job is getting spawned (i.e., how sge is setting up and running the mpi job) to figure out how I might even debug this problem. The following forum seems to have similar problems, but, I don't know how to use the info: https://www.mail-archive.com/us...@lists.open-mpi.org/msg32370.html\n\nCurrently, my user is very happy with the performance he's getting from a single server (each with P100 GPU) but I would really like to figure out how to get this to work with MPI, and then, MPI+GPU.\n\nI'm sorry if this is a stupid question, I've wasted quite a bit of time trying to figure it out myself to no avail and I'd be much obliged if somebody here could help shed some light on the issue.\n\nThank you for your time and support."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 14, 2019, 5:25:07AM",
        "content": "Hi Ethan,\n\nIt looks like it is failing because your system (or version of OpenMPI) does not support (or is not configured) for the MPI Spawn command. We have seen this on other HPC systems, but I don't know enough about configuring HPCs to know how to enable it - it works for us on our single node, multi-GPU server with OpenMPI. gprMax uses MPI.Spawn to spawn the required number of MPI tasks. \n\nI also note that you have not requested enough slots, it should be number of MPI tasks times the number of OpenMP threads per task, so in your example that would be 3 x 28 = 84\n\nWe do have an alternate way of using the MPI task farm that you can try if you can't get the MPI Spawn support working. To use it, replace your line calling gprMax with:\n\nmpirun -n 3 python -m gprMax user_models/cylinder_Ascan_2D.in -n 2 -mpialt\n\nIf this works you should then be able to add the -gpu to get working on multiple GPUs. Note for multi-GPUs you can decrease the number of OpenMP threads as these will only be used for model building, not running.\n\nLet me know how it goes.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ZTpt6_HVBZY",
    "title": "Complex permittivity modelling",
    "original_post": {
      "author": "Kaushal Kishore",
      "date": "Jan 25, 2022, 6:44:00PM",
      "content": "Hi all,\n\nIs there a way we can obtain complex permittivity of different materials using GprMax?\n\nKind regards"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 1, 2022, 11:01:44AM",
        "content": "Dear Kaushal,\n\ngprMax can model materials with complex permittivity via a variety of mechanisms, e.g. multi-pole Debye, Drude, and Lorenz models. See our docs - http://docs.gprmax.com/en/latest/input.html#add-dispersion-debye\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/5OckYLInJxY",
    "title": "IWAGPR2017 Conference",
    "original_post": {
      "author": "Craig Warren",
      "date": "Nov 18, 2016, 5:33:04AM",
      "content": "Hi folks,\n\nIn case you didn't know the 9th International Workshop on Advanced Ground Penetrating Radar (IWAGPR2017) will be held in Edinburgh, Scotland from 28-30 June 2017.\n\nThe three-day workshop is aimed at exploring advancements in Ground Penetrating Radar (GPR) techniques and applications. A wide range of high-quality scientific and technical information will be presented, relevant for scientists, engineers, and end-users of GPR technologies from academia and industry. There will be networking opportunities for participants to discuss and exchange ideas. Read more about the specific content of the workshop.\n\nIt is being organised by Dr Antonis Giannopoulos, myself, and the School of Engineering at The University of Edinburgh.\n\nDetails of the conference, how to submit a paper, registration and more are available from the website: www.iwagpr2017.org\n\nOf specific interest for gprMax users, there will be a free pre-conference workshop on using GPR modelling using gprMax. For details see: www.iwagpr2017.org/registration.shtml \n\nWe encourage you to submit a paper, and look forward to hopefully seeing you in Edinburgh next year!\n\nKind regards,\n\nCraig"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 13, 2017, 5:57:01AM",
        "content": "Quick reminder that the extended deadline for papers for the 9th International Workshop on Advanced Ground Penetrating Radar (IWAGPR2017) is in a few days - Monday 16th January 2017.\n\nWe would be delighted to see papers on modelling and simulation.....especially using gprMax ;-) \n\nThere will be a session in the conference on modelling and inversion. More details from the conference website - www.iwagpr2017.org\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/4nKCvwF-AFc",
    "title": "Run gprmax3.0 totally in Matlab-A successful case.",
    "original_post": {
      "author": "Feng Zhou",
      "date": "Oct 25, 2017, 10:36:28PM",
      "content": "gprMax 3.0 provides an operation in DOS or Anaconda commend prompt. However, typewriting is not convennient. For me, I am used to programming in Matlab and I need to make some codes with Matlab to produce the input file for gprMax. Thus, I prefer to implement gprMax in Matlab environment without turning to CMD or Anaconda prompt.\n\nTo use Matlab for gprMax running, the following codes are effective:\n\ndos('cmd.exe');                            %then Matlab can operate all dos commends and the implementation directories are in DOS instead of Matlab\ncd C:\\Users\\CUG\\gprMax\\          %all operations are like in DOS\nactivate gprmax    \npython -m gprMax C:\\Users\\CUG\\gprMax\\ZF_gpu_test/cylinder_Ascan_2D.in              \n\nNote: 'system' and 'dos' commends in Matlab are not useful to run gprmax because they only call CMD commends but the running environment is still under Matlab."
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ptOrr3eS65E",
    "title": "Plate below the soil box",
    "original_post": {
      "author": "Sepideh Harajchi",
      "date": "Apr 13, 2024, 3:21:45AM",
      "content": "Hi everyone.\n\nI tried to put a conductive plate below the soil box, but wasn't successful. Can you help me maybe?\n\n1 #title: Heterogeneous soil \n2 #domain: 0.15 0.15 0.1\n3 #dx_dy_dz: 0.001 0.001 0.001\n4 #time_window: 6e-9\n5\n6 #waveform: ricker 1 1.5e9 my_ricker\n7 #hertzian_dipole: y 0.045 0.075 0.085 my_ricker\n8 #rx: 0.105 0.075 0.085\n\n9 \n10 #soil_peplinski: 0.5 0.5 2.0 2.66 0.001 0.25 my_soil\n11 #fractal_box: 0 0 0 0.15 0.15 0.070 1.5 1 1 1 50 my_soil my_soil_box\n12 #add_surface_roughness: 0 0 0.070 0.15 0.15 0.070 1.5 1 1 0.065 0.080 my_soil_box\n13 #plate: 0 0 0 0.15 0.15 0.01 pec\n\n14 #geometry_view: 0 0 0 0.15 0.15 0.1 0.001 0.001 0.001 heterogeneous_soil n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Apr 13, 2024, 5:12:37AM",
        "content": "You won't see the plate in your geometry view unless you switch to the fine (per-cell-edge) view, see the docs - https://docs.gprmax.com/en/latest/input.html#geometry-view Remember you probably don't want a fine geometry view of your entire domain (that would be a large file), just add a fine view for the volume around your plate so you can confirm it is there.\n\nCraig\n\n"
      },
      {
        "author": "Sepideh Harajchi",
        "date": "Apr 13, 2024, 8:34:28AM",
        "content": "Thank you so much for your explanations. I actually removed the geometry view code. Still have errors! \nShould I use the box command instead? \n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Apr 14, 2024, 11:10:09AM",
        "content": "As the error says you are not specifying the coordinates of the plate correctly - one pair should be the same so you construct a 2D object.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/MGo4m_MZdo8",
    "title": "problem with src_steps and rx_steps",
    "original_post": {
      "author": "Jürgen Lammer",
      "date": "Oct 4, 2016, 9:31:57AM",
      "content": "Hello,\n\nI am rather new to gprMax, but i think I understand the basics now for some simple simulations.\n\nAs said in the Title I got a problem moving my sources and recivers. They move the direction i want them to, but not as far as i would expect them to. (or as they should by my calculations)\nI understand that \"src_steps:\" moves the source in x y z direction with the following numbers, and this numbers also represent the witdt of movement. I expect that to be in METERS (i could not find any specification anywhere)\n\nIn my model the source starts at the coordinates \"0.462 0.7 0\" and is moved by the command src_steps: \"0.003333333 0 0\" which should be ca. 0.00333 METER in X direction.\n\nas i did a bscan with 300 runs (and i really did 300 runs) by the calculation 0.462+0.00333*300 (start position + x offset * turns) the end position of the source should be at 1.452 m.\n\nBut the Reciver reaches this point at turn number  ~ 250 and the last 50 measurements are done in a area i do not want to model.\n\nI suspect that the  x y z coordinates of src_steps are not in meters. \n\nIf somebody could enlighten my world in this case i woud be very happy.\n\n\nbest regards and thank you\n\nJürgen"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Oct 4, 2016, 11:07:10AM",
        "content": "Hi Jurgen,\n\nWelcome to the forum!\n\ngprMax is based in SI units and the information on spatial and temporal steps and units are given at:\n\nhttp://docs.gprmax.com/en/latest/input.html\n\nso, your steps are in meters. \n\nThe key problem is due to your step size. gprMax is basically an FDTD solver and as such it uses the Yee Cell. Information is only available at specific positions in the Yee Cells. This is described in\n\nhttp://docs.gprmax.com/en/latest/gprmodelling.html\n\nSo, if you have a spatial step #dx_dy_dz:  0.002 your sources and receivers can move ONLY to a multiple of these steps. This is discussed in the manual as well but maybe we should make it a bit clearer especially for people who have not used FDTD before and they are not very familiar with the process. \n\nBack to your model. If you specify a step of 0.003333333 you actually internally get a step of 0.004 (the alternative will have been 0.002 which is much further from your required value). Your source and receiver actually go up to:\n\n0.462+0.004*300 = 1.662\n\nand in 250 steps you have arrived at 1.462 which is the same as doing 300 steps at 0.00333333 \n\nThe bottom line here is that all spatial coordinates must be rounded to integer Cell numbers internally! \n\nFurther, not accepting the simulation result, if it does not make sense, it is always a good idea until you get to the bottom of  what has happened and explain why it happens. More often than not, problems are related to modelling other things than the ones we think we are asking the code to do ... It happens to all (even to us who are doing this for a while ...)\n\nMy other final suggestion is to check some good online videos on FDTD and online resources which might be helpful as the complexity of what you model increases.\n\nGood luck with your work and I hope that you are now reasonably happy ;-)\n\nBest\n\nAntonis"
      },
      {
        "author": "Jürgen Lammer",
        "date": "Oct 4, 2016, 11:15:51AM",
        "content": "Thank you for this quick response.\n\nthat makes many things clearer.\ni thought about changing the spatial resolution, but i didnt see the importance.\n\nlooks like i have to do some mor literature studies ;)\n\nthanks again\n\nJürgen"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/azvmQJ6VJm0",
    "title": "3D software for gprMax modelling",
    "original_post": {
      "author": "Simen Husøy",
      "date": "Aug 10, 2017, 8:10:05AM",
      "content": "Hi, we are trying to build a new antenna i gprMax and are planing to define it in a HDF5 file, since it is much easier to import complex figures this way. Do anybody know of a 3D modelling software where you can make a 3D geometry and get a 3-dimensional array out that you can use as basis for an HDF5 file? It seems impracticable to define the new antenna (or any other complex geometry) by calling the built in geometry functions."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 10, 2017, 8:48:20AM",
        "content": "Hi Simen,\n\nIt is a good question! I don't know of a CAD (or 3D modelling package) that can output a 3D array in HDF5 format of the kind required by gprMax. Certainly building up an antenna model using the builtin geometry commands is a bit of a task.\n\nIn terms of future gprMax development, myself and Antonis have had some discussions about creating a tool that can convert from a standard CAD format to HDF5. Though this is not a straightforward task, as you as essentially creating a FDTD meshing tool, and most likely an iterative process will be required. However, it would mean that you could create your geometry in whichever CAD package you liked and then output to HDF5 for gprMax.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/dKh_yFsoumw",
    "title": "What is written in #snapshot to make video of the field propagation?",
    "original_post": {
      "author": "Sony Achmad Louis",
      "date": "Aug 20, 2016, 6:54:43PM",
      "content": "Hello gprMax,\n\nI want to ask about scripting #snapshot to get \"snapshot files\" with python.\nI tried to write as manual as written in input file of gprMax,\n\n#python:\nfor i in range(1, 31):\nprint('#snapshot: x1 y1 z1 x2 y2 z2 dx dy dz {} snapshot{}'.format((i/10)*1e-9, i))\n#end_python:\n\nI replaced initial value of  x1, y1, z1, x2, y2, z2, dx, dy, dz.\nHowever, I got this in terminal.\n\n\nWhat should I do to fix this?\n\nThanks in advance."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 21, 2016, 2:48:50PM",
        "content": "Hi Sony,\n\nLooking at the error message, probably you have not indented your print statement. Python requires the body of any loop to be indented - this is what indicates the statement is part of the body of the loop.\n\nCraig"
      },
      {
        "author": "Sony Achmad Louis",
        "date": "Aug 21, 2016, 7:24:26PM",
        "content": "Thank you for your attention in my question, Mr. Craig.\n\nYour explanation is really helpful. Now, I have succeeded to run my model."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/HtDBHa7dQo4",
    "title": "Can't understand why the waveform is wrong",
    "original_post": {
      "author": "Emiliano",
      "date": "Mar 21, 2018, 10:54:01AM",
      "content": "Good morning everyone!\n\nI can't find the error(s) in my input file that causes problems in the waveform.\nFor example, in this simple input file i've created a source with a herzian dipole and i've implemented a sine. There is no material, so the wave is propagated in the free_space. The wavelength is sampled by 49cells. Why at the receiver the sine is so deformed? . I've this problem also with the others waveforms, materials, domanin size and discretization.\n\n#title: sineinair\n#domain: 0.2 0.20 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 10e-9\n\n#waveform: sine 1 1.5e9 my_sine\n#hertzian_dipole: z 0.05 0.1 0 my_sine\n#rx: 0.150 0.1 0\n\n#geometry_view: 0 0 0 0.2 0.2 0.001 0.001 0.001 0.001 2.3sineAIR n\n\nThank you in advance and sorry for the question, but i've not found the answer.\nEmiliano"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 22, 2018, 5:49:00AM",
        "content": "Hi Emiliano,\n\nI checked your input file with the waveforms: gaussiandotdotnorm, contsine, and sine, and all results look as expected. The sine waveform is a single cycle of a sinusoid, and therefore the end transition is quite sharp. This why you see some high-frequency effects in the output. Other waveforms, e.g. the gaussiandotdotnorm, have smooth transitions at the start and end, so this is not the case. Hope this helps clarify. \n\nWhy are you choosing to use the single cycle sinusoid waveform?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Emiliano",
        "date": "Mar 22, 2018, 12:50:52PM",
        "content": "Thank you for the quick answer.\nI'm trying to understand if it is possibile to estimate the sizes of an object using the informations of the frequencies of the signal registered by the receiver (through FFT).So i've thought to use a waveform composed by only one frequency.\n\nKind regards\n\nEmiliano"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Mar 22, 2018, 3:33:08PM",
        "content": "Hi Emiliano,\n\nYou need to understand the relationship of time and frequency domains for a number of signals etc. This is basic signal analysis stuff. A single cycle of a sine (i.e. a sine pulse) contains rather a lot of frequencies. The shorter the duration of a signal in time the more frequencies it contains or requires to be represented. \n\nWhat you are doing is not really what you think you are trying to get ...\n\nBest\n\nAntonis"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/XwJd8Aq3sO8",
    "title": "Segmentation fault",
    "original_post": {
      "author": "Prodromos Nikolaidis",
      "date": "May 5, 2021, 8:12:29AM",
      "content": "Hello everyone,\n\nThis is my first message in the group so first of all I'd like to express my sincere gratitude to the developers of gprMax for creating such a useful tool and distributing it as open-source. Thank you all and hope you're continuing this great work!\n\nFollowing, I'd like to ask if someone has already encountered the next problem and if so, how did you manage to deal with it.\n\nThe problem is that I'm unable to visualize the results (B-scan) after the simulation is completed and the HPC cluster I'm using is returning a Segmentation fault. Initially I thought that the problem was due to my input file but this seems not to be the case because I tried to re-visualize the results of an older simulation and got back the same error. Back then when I did this older simulation I visualized the results with no problem so I suspect that it might be a thing with the cluster I use. Further, I tried to visualize with two methods: either 1) by using the cluster's login node where I get the Segmentation fault directly on my terminal or 2) by submitting the job to the cluster's batch system where in this case I get the job file which includes an error of Exited with exit code 1 ( _tkinter.TclError: couldn't connect to display \"eu-login-44:12.0\").\n\nI did some Googling and found two interesting topics related to this issue, see:\n\nhttps://stackoverflow.com/questions/19518352/tkinter-tclerror-couldnt-connect-to-display-localhost18-0/44922799\n\nhttps://discourse.matplotlib.org/t/tclerror-couldnt-connect-to-display-0-0/10785\n\nIn these, it is suggested to change the backend of matplotlib but to be honest and due to my little experience, I'm not fully aware of how exactly to do this. The strange thing is that I'm using the exact same commands as I did for previous simulations - back then it worked with no problems and now I get this error. Has anyone encountered a similar problem before? Any suggestions on how I can potentially deal with it are very welcome!\n\nCheers,\n\nProdromos"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 5, 2021, 4:00:14PM",
        "content": "Hi Prodromos,\n\nIt sounds like an issue with matplotlib on your HPC. Just to confirm, the segmentation fault occurs when you run our plot_Bscan module on your HPC? As a first test, I would try downloading your output file and plotting the results on your local machine. If you really want to visualise the results on the HPC you certainly shouldn't need to submit a batch job - the login node will be fine. Is your connection (ssh?) setup to allow x11 forwarding? This is usually required to allow graphical applications to work, in this case the B-scan plotting. If all that is working then probably you need to check the compatibility of the version of Linux being run on the HPC with the version of matplotlib that is installed.\n\nKind regards,\n\nCraig \n\n"
      },
      {
        "author": "Prodromos Nikolaidis",
        "date": "May 6, 2021, 7:18:37AM",
        "content": "Dear Craig,\n\nThank you for your reply.\n\nIndeed the segmentation fault occured when using plot_Bscan on the HPC (although last week week using the same command there was no problem at all). Unfortunately my local machine can not run gprMax (it's kind of a \"fossilized\" one and that's the reason I do everything on the HPC). Indeed the connection was SSH and X11 forwarding was enabled.\n\nAnyway, the good news is that the issue seems to have been solved at the moment! For the record, I changed the backend of matplotlib using export MPLBACKEND=TkAgg according to https://matplotlib.org/stable/tutorials/introductory/usage.html#what-is-a-backend and now the simulation results are being visualized with no problem.\n\nThank you for your input and feedback with this issue!\n\nRegards,\n\nProdromos\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/gAA6mYhuSew",
    "title": "Soil types",
    "original_post": {
      "author": "sravanip...@gmail.com",
      "date": "Oct 25, 2022, 3:01:13AM",
      "content": "Hi team,\nI am very new to gprMax. Can you please suggest how to change the soil types with conductivity and permittivity in gprmax. i didn't see much difference between them. can you please suggest any other solution to change the soil types. Thank you in advance.\n\nInput file for coastal soil:\n#domain: 0.7 0.5 0.4\n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 10e-9\n\n#waveform: impulse 1 1.8e9 impulse_waveform\n#hertzian_dipole: z 0.100 0.070 0.3 impulse_waveform\n#rx: 0.140 0.070 0.3\n\n#material: 10 0.002 1 0 sand_coastal\n#box: 0 0 0 0.18 0.1 0.1 sand_coastal\n##fractal_box: 0 0 0 0.4 0.4 0.20 1.5 1 1 1 5 sand_coastal my_soil_box\n\n#geometry_view: 0 0 0 0.7 0.5 0.4 0.004 0.004 0.004 impulse_coastal_soil n \n\nInput file for agriculture soil:\n#domain: 0.7 0.5 0.4\n#dx_dy_dz: 0.004 0.004 0.004\n#time_window: 10e-9\n\n#waveform: impulse 1 1.8e9 impulse_waveform\n#hertzian_dipole: z 0.100 0.070 0.3 impulse_waveform\n#rx: 0.140 0.070 0.3\n\n#material: 15 0.01 1 0 agriculture\n#box: 0 0 0 0.18 0.1 0.1 agriculture\n##fractal_box: 0 0 0 0.4 0.4 0.20 1.5 1 1 1 2 agriculture my_soil_box\n\n#geometry_view: 0 0 0 0.7 0.5 0.4 0.004 0.004 0.004 impulse_agriculture n"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 10, 2022, 4:13:33AM",
        "content": "My answer to your other question should help - https://groups.google.com/g/gprmax/c/OiIefTIBvw0/m/oj7OyY6RAAAJ. I also suggest you look in our publications list and read some background on the Peplinski soil model.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/yJnMWq7HJa0",
    "title": "Individual effect of Dielectric constant and electric conductivity on the reflected wave",
    "original_post": {
      "author": "Ahmed Mahbubah",
      "date": "Dec 18, 2024, 11:53:21AM",
      "content": "Hi, \n\nI have been working with gprMax for last four months. I have tried to find the effect of varied dielectric constant and electric conductivity of soil individually on the the arrival time and peak attenuation of the reflected wave. I have tried this keeping one value fixed and changing the other one individually in a homogenous 3D soil medium. Unfortunately, the effect seems complex. So far, I  have understood that wave arrival time depends on dielectric constant as it control wave speed and peak attenuation occurs due to electric conductivity. But, the relation is not straightforward. I would like to explore the underneath mechanism (the scientific calculation), how gprMax calculates it.\n\nCould you please guide me in this regard or suggest me  any document where I can fid this details?\n\nThank you for your time.\n\nSincerely, \nMahbubah"
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Dec 18, 2024, 12:50:19PM",
        "content": "Hi Mahbubah,\n\nIndeed the effect of the electrical properties of materials to materials can be complex and sometimes not easily understood by using the simplified formulas that you can get from a book on electromagnetics that they present them mostly for 1D plane waves. gprMax does not apply any specific formulas to calculate the fields. It solves Maxwell's equations directly using a numerical method called FDTD (Finite-Difference Time-Domain). In 3D, solving the equations analytically for a homogenous medium with a single source is possible if the material is not attenuating. For attenuating materials  is not as straightforward but still possible. For a source over a half space the analytical solution is not possible in closed form (i.e. no formula exist) \n\nSo, to answer your question there is no specific formula that is used inside gprMax to calculate the attenuation or determine the velocity. All these phenomena are accounted for automatically when the governing Maxwell's equations are solved numerically in gprMax. If you want to study how the FDTD method works, which is what gprMax uses to solve the problems,  there are a number of good books about it. If you want a free online guide from someone with a lot experience on FDTD you can see the book on the link provided here. However, the material in this book is not about GPR but about solving Maxwell's equations in general. GPR modelling is just a small application of Maxwell's equations! (https://eecs.wsu.edu/~schneidj/ufdtd/) \n\nHope this helps\n\nAntonis \n\n"
      },
      {
        "author": "Ahmed Mahbubah",
        "date": "Dec 18, 2024, 1:17:00PM",
        "content": "Dear Prof. Giannopoulos,\n\nThank you so much for your insightful reply. It really helped.\n\nSincerely, \nMahbubah\n "
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/jkg9V_Rm-ZQ",
    "title": "Reading indication for Debye parameters for rocks",
    "original_post": {
      "author": "Bruno Barauna",
      "date": "Oct 2, 2020, 1:00:03PM",
      "content": "Hi,\nCould someone inform me of an article in the literature that measures debye's parameters for a pole or more. I look for rock parameters in general.\n\nBest regards,\n\nBruno Barauna"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/h_OpLkiesuU",
    "title": "Question regarding OpenMP/MPI",
    "original_post": {
      "author": "larent",
      "date": "Feb 12, 2020, 12:23:53AM",
      "content": "Hi guys!\n\nThese days I'm testing simulations based on OpenMP/MPI. For this, I installed MS-MPI, resulting in generation of Microsoft MPI folder in C:\\Program Files. (My OS is Windows 10, 64 bits.)\nI opened a Command Prompt, activated gprMax, and moved into C:\\Program Files\\Microsoft MPI\\Bin.\nAnd then I performed running simulations using ' -mpiexec -n 8 python -m gprMax C:\\users\\username\\gprMax\\user_models\\filename.in -n 100 --mpi-no-spawn' command.\nThe simulations were performed well, but after the simulations, I found that there was no result (all data were zeros). How can I fix this?\n\nYour response would be appreciated. Thank you."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 12, 2020, 4:54:59AM",
        "content": "Dear Larent,\n\nWelcome to the forum!\n\nWe need some more details of what you are doing to be able to help. Can you share the input file you are testing? What is the spec of your machine? When you say you got zeros, do you mean the EM field output in the receivers in your model was all zero?\n\nKind regards,\n\nCraig"
      },
      {
        "author": "larent",
        "date": "Feb 12, 2020, 7:58:42AM",
        "content": "Dear Craig,\n\nBelow is the code of my input file, whose name is 'Line01_.in'.\n\n#title: test\n#domain: 0.6 1.0 0.9\n#dx_dy_dz: 0.002 0.002 0.002\n#time_window: 18e-9\n#material: 10 0.01 1 0 soil\n#box: 0 0 0 0.6 1.0 0.7 soil n\n#sphere: 0.3 0.5 0.2 0.05 free_space y\n#python:\nfrom user_libs.antennas.MALA import antenna_like_MALA_1200\nantenna_like_MALA_1200(0.16, 0.15 + current_model_run * 0.01, 0.7, resolution=0.001, rotate90=True)\n#end_python:\n#num_threads: 4\n#geometry_view: 0 0 0 0.6 1.0 0.9 0.002 0.002 0.002 Line01_ n\n\nIn 'C:\\Program Files\\Microsoft MPI\\Bin' directory, my command was actually ' -mpiexec -n 8 python -m gprMax C:\\users\\myname\\gprMax\\user_models\\Line01_.in -n 69 --mpi-no-spawn'.\nMy personal workstation has 2 sockets, each of which contains 14 cores, thus 28 cores in total.\nI set #num_threads as 4, and the number of mpi tasks as 8, thus 4*(8-1) = 28 threads in total may be right as I thought.\nBut the result was, only Ex field data existed, while all others were gone. Also, all Ex field data were zeros."
      },
      {
        "author": "Craig Warren",
        "date": "Feb 12, 2020, 8:44:49AM",
        "content": "Larent,\n\nThe first thing I notice (which may be the route cause of the problem) is that the resolution of the antenna model and the simulation do not match. If you are using a 2mm spatial resolution for the simulation, then the antenna must use the same, i.e.\n\nantenna_like_MALA_1200(0.16, 0.15 + current_model_run * 0.01, 0.7, resolution=0.002, rotate90=True)\n\nAlso since the antenna is rotated 90 degrees from its usual orientation I would only expect to see a Ex component in the output.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "larent",
        "date": "Feb 14, 2020, 3:31:43PM",
        "content": "Craig,\n\nPlease find the attached file, which contains 5 models with essentially similar scenarios.\nFrom Model_01 to Model_03, the scale of the models is small for simulation using GPU (My GPU RAM is just 4GB).\nFrom Model_04 to Model_05, the simulations were performed using OpenMP/MPI. The scale of the models is bigger since I have enough memory.\n I used GSSI400 in Model_01 and Model_04, GSSI1500 in Model_02 and Model_05, and Mala1200 in Model_03.\nI found that the results of Model_02 and Model_03 were as expected, where Ex is dominant while Ey is negligible.\nIn the results of Model_01, Ex is seen to be much smaller than Ey. I wonder the orientation of GSSI400 differs from GSSI1500 and Mala1200.\nMoreover, there were errors in showing the results of Model_04 and Model_05 using MATLAB scripts.\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 17, 2020, 7:53:15AM",
        "content": "Dear Larent,\n\nI don't have time to look in-depth at your models, but a couple of things I noticed:\n\n- All antenna models in their normal rotation should be excited in the y-direction, thus when rotated in the x-direction.\n- In some models the antenna is inside the PML. This needs fixing as will not yield correct results. Please make sure you check geometry before running models.\n- I am not the author of the GSSI 400MHz model - see http://docs.gprmax.com/en/latest/user_libs_antennas.html - however I have just committed some changes to that model which may fix a problem when it is rotated.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/GKcdYqAcEkI",
    "title": "cannot install gprMax correctly",
    "original_post": {
      "author": "Vincent Lin",
      "date": "Aug 4, 2019, 11:53:38AM",
      "content": "Hi all, I was trying to install gprMax following the procedure listed in gitHub. However, it always generated a fatal error (as shown in the attached figure). My OS is win10-64bit. I have tried to re-install all VC C++2015 but the error still there. My installation is under Anaconda-prompt. So I will really appreciate that anyone can come up with ideas about this issue. Thanks a lot."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Aug 5, 2019, 4:47:58AM",
        "content": "Hi Vincent,\n\nIn order for us to help, can you print the full history from after you issued the 'python setup.py build' command please.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Vincent Lin",
        "date": "Aug 5, 2019, 9:51:10AM",
        "content": "Hi Dr. Warren, \n\nPlease see the attached .png files. \n\nI have tried two different OS. One is win10 while the other one is windows server 2016. Both of them print the same history after I tried to build up the gprMax. \n\nThanks a lot for your help. \n\nBest, \n\nLin"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 6, 2019, 5:30:30AM",
        "content": "There look to be several issues going on with MS Build Tools and conda.\n\n1. Did you install Miniconda? As it looks like the full Anaconda is installed.\n2. You seem to be using MSVS Community Edition 2017, please see specific instructions on what MSVS to use - https://github.com/gprMax/gprMax#microsoft-windows\n3. You seem to have installed a mixture of build kits for Windows 8 and Windows 10. Again read the instructions, specifically 'Use the custom installation option and deselect everything apart from the Windows SDK for your version of Windows.'\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Vincent Lin",
        "date": "Aug 6, 2019, 9:16:06PM",
        "content": "Hi Dr. Warren,\n\nMany thanks to your advice. Following your instruction, I remove all MSVS and reinstall by only select win10 SDK. Meanwhile, I also tried to install Miniconda. However, all I tried failed and generated the exactly same errors as before. \n\nIt looks that cl.exe can be called but it failed to find the path of fields_updates_ext.c file. Is that possible due to the path definition in setup.py file or somewhere? \n\nThanks a lot for your patience. \n\nBest, \nLin"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 7, 2019, 3:30:49AM",
        "content": "Vincent,\n\nI don't think there is a problem with setup.py as I ran a test installation on my Windows 10 virtual machine yesterday and it was fine. Did you install Miniconda before MSVS Build tools?\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/uKxVGlCDgPs",
    "title": "Problem about GPU using",
    "original_post": {
      "author": "Dongyang Liu",
      "date": "May 29, 2019, 8:12:24AM",
      "content": "Hi everyoney:\n                    My GPU is Quadro K620 , and the cuda version I install is cuda_10.1 , I haved checked that my GPU should be compatible with the cuda version.But when I use GPU ,it occured error as shown in the png.\n   Does anyone know where the problem is ?\n Kind regards:\n             Dongyang"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 29, 2019, 8:27:39AM",
        "content": "The Quadra K620 is quite an old card (https://www.nvidia.com/content/dam/en-zz/Solutions/design-visualization/documents/75509_DS_NV_Quadro_K620_US_NV_HR.pdf) and only supports CUDA compute capability 5 - https://developer.nvidia.com/cuda-gpus. So it is most likely does not support some feature we are using. However, if you can show the entire error message traceback that might help us.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Dongyang Liu",
        "date": "May 29, 2019, 8:43:09PM",
        "content": "Thanks Craig , this is the entire error message traceback:"
      },
      {
        "author": "Craig Warren",
        "date": "May 30, 2019, 4:05:54AM",
        "content": "Could be that CUDA is not installed properly. Try running some of the examples that come with CUDA - usually found in the 'samples' folder within the CUDA installation - that will test whether CUDA is correctly installed and setup.\n\nAlso make sure you have followed http://docs.gprmax.com/en/latest/gpu.html#extra-installation-steps-for-gpu-usage\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/rO0nTpQsRdw",
    "title": "Snapshots and Reading VTK into Matlab",
    "original_post": {
      "author": "Adam Mangel",
      "date": "Nov 5, 2018, 5:07:24PM",
      "content": "I want to capture a snapshot of the electric field at every iteration. Is there an easy way to do this in the input file with Python? Can I use the number of iterations in the input file in a for loop to generate the snapshot calls?\n\ne.g.\n\n#python:\nfor i in range(1, niterations):\n    print('#snapshot: x1 y1 z1 x2 y2 z2 dx dy dz {} snapshot{}'.format((i), i))\n#end_python:\n\nAlso, I've never worked with .vtk files before. Is there an easy way to read this information into Matlab?\n\nAdam"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Nov 6, 2018, 6:23:53AM",
        "content": "Hi Adam,\n\nYes, what you propose is generally fine to generate the snapshots. A couple of notes:\nThere is no constant for the number of iterations that is directly accessible within a Python block in the input file. So you will need to hard code the number of iterations into your for loop. Easiest to start a model running, note the number of iterations and use that.\nDepending on the volume your snapshot occupies, taking one at every iteration will significantly increase the simulation time, and potentially generated a lot of data in the snapshot files.\nAFAIK VTK files cannot be directly imported into MATLAB. We moved to the VTK format for geometry so we did not use a propriety format, and also because rendering big 3D models in MATLAB was becoming difficult. In my experience you can do most things you need to with geometry and snapshot files in Paraview.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 6, 2018, 7:07:45AM",
        "content": "Hey Craig,\n\nThere are other uses for the wavefield besides making pictures, volumes, or videos. For example, if I wanted to perform reverse time migrations or full waveform inversions with GPRMax. Is there any other way to access the electric field data besides saving snapshots?\n\nAdam"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 6, 2018, 8:44:29AM",
        "content": "Hi Adam,\n\nYes, for RTM or FWI where you need the entire wavefield, you will need to use the snapshot command. What you might take a look at is in the 'snapshots.py' module there is a general function 'store' which stores the snapshot information in memory. I have then written a separate function which saves this data to VTK file, after the simulation has finished. You could considering writing your own function to store the snapshots in whatever file format is most suited for you, and then call it where appropriate.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 6, 2018, 11:02:24AM",
        "content": "Craig,\n\nThanks for the quick reply. I've edited the store function to pass the Ez field out to a binary file. A couple more questions:\n\nHow can I stop the code from calling the write_vtk_imagedata function?\n\nHow can I specify the same folder where the snapshot .vtk files were being stored. I found that I need the variable appendmodelnumber  but I can't find it. If I have it, I can use set_filename and use self.filename to name my binary files.\n\nCan you tell me how you are calculating the number of iterations in the code? I would assume it has to do with dx, dt, vmin, vmax, which I can calculate outside the code before running the model. This way I can create all the snapshots I need without having to run the model twice.\n\nThanks!\n\nAdam"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 6, 2018, 11:27:15AM",
        "content": "Adam,\n\nI wouldn't advise modifying the 'store' function as it is called in the simulation loop, and if you write to file in this loop it will be slow. However, you may want to modify lines 129-130 to change the way the data is stored in memory (a numpy array), as it is currently arranged for Paraview. I would then duplicate and modify the 'write_vtk_imagedata' function to write your binary file. 'write_vtk_imagedata' is called from the 'model_build_run' module at line 373. You'll find the 'filename' is set just before this line which you should just have to change the extension of for your binary files.\n\nAlso the Code Overview docs may help - http://docs.gprmax.com/en/latest/coding.html\n\nIterations are calculated in 'input_cmds_singleuse.py' module - look around lines 143-205.\n\nI don't have a lot more time at the moment to assist you, but happy to do so when my schedule improves!\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 6, 2018, 12:24:25PM",
        "content": "Craig,\n\nI seem to have it working well now. Any advice on best practices for injecting current at all receiver locations? I'm assuming I should be using #voltage_source and #excitation_file to specify the voltages at receiver locations.\n\nAdam"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Nov 6, 2018, 3:43:57PM",
        "content": "Hi Adam,\n\nYou need to be careful with excitation to achieve specific outcomes. For example the Hertzian Dipole will introduce a current element in the equations and the variation prescribed by the waveform is the assume current on the infinitesimal source. The voltage source prescribes indirectly an electric field as E=-V/dl If there is no resistance the voltage source prescribes directly in essence a scaled electric field value. If there is resistance is a lossy source. \n\nIf you want to excite directly field components it is easy to modify the code to do just that. We were planning to have such functionality but is not needed in our applications but is useful if you want to model waveguides etc. However, in your case if you want to try FWI you might need to be able to excite the model with fields components and not theoretical sources.\n\nHope this helps\n\nAntonis"
      },
      {
        "author": "HJJ HJJ",
        "date": "Nov 15, 2018, 12:45:02AM",
        "content": "Indeed, the snapshot-fields should be available. I encountered the same problem when use the speed-advantage of gprMax to do other calculations. Do you have found a good solution?"
      },
      {
        "author": "Adam Mangel",
        "date": "Nov 15, 2018, 9:09:11AM",
        "content": "HJJ HJJ,\n\nI simply followed the advice that Craig gave to store the wavefields but I haven't had the time to investigate how to inject current at receiver locations. There used to be a #Tx function that I think I could use, but it seems to be removed from the more recent version of gprMAX.\n\nFrom Craig on saving wavefields (from this thread);\n"
      },
      {
        "author": "HJJ HJJ",
        "date": "Nov 15, 2018, 6:57:03PM",
        "content": "Hi Adam Mangel,\n1. I got a stupid way to inject receiver data at the receiver locations. Just repeatedly copy the \"tx\" with different locations. Please see the attached file-a  simple model with three source file-. When do RTM you can use '#excitation_file' to generate new source file. I tried to use 'for' or 'while', but failed. \n2. The picture in your response did not display well, and I am still confused. Would you please show me the more details. Thanks."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/_jVtGA1Geek",
    "title": "fractal_box disables macro functionality",
    "original_post": {
      "author": "Volkan Özcan",
      "date": "Oct 30, 2017, 8:08:37PM",
      "content": "Hello,\n\nWhenever I add a fractal box to my model, clicking on the macro shortcut on paraview stops to function. No branches are created. \n\nI also tried heterogeneous_soil example in user libs but same problem occurs, so its certainly not code related. \n\nI updated everything including paraview to last version.\n\nIs there any chance you experienced a similar problem and know a solution? Is there another way to get materials listen in paraview other than the macro?\n\nBest wishes,\n\nVolkan Ozcan"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Oct 31, 2017, 5:06:11AM",
        "content": "Hi Volkan,\n\nThis is a potential issue with the code. Can you therefore report it through our GitHub Issue tracker - https://github.com/gprMax/gprMax/issues Please also state what operating system you are using and what version of Paraview. Then I can look into it.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Volkan Özcan",
        "date": "Oct 31, 2017, 5:12:05AM",
        "content": "Hello,\n\nOf course, I'll.\n\nCould you send me a proper .vti file with fractal box that you know works as expected? If you can I can report that if problem still occurs or not. That might help you to find the root of the solution.\n\nBest wishes"
      },
      {
        "author": "Craig Warren",
        "date": "Oct 31, 2017, 2:14:53PM",
        "content": "Hi Volkan,\n\nAttached is the screenshot of what is produced from the 'heterogeneous_soil.in' example when run on macOS Sierra (10.12.6) using the latest version of gprMax and viewed with Paraview 5.4.1 RC4.\n\nYou can download the geometry file at: https://www.dropbox.com/s/d5nl0sxcfi7914i/heterogeneous_soil.vti?dl=0\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Jiannan Cai",
        "date": "Oct 31, 2017, 7:29:51PM",
        "content": "Hello Craig,\n\nI met the same problem as well. I even cannot see the geometry of the example  'heterogeneous_soil.in'. And I am using Windows, with ParaView 5.4.1. I have had this problem for a while, and I found the model can be viewed in macOS, but it does not work on Windows. Is there any solution?\n\nThank you very much,\n\nJiannan"
      },
      {
        "author": "刘梦娜",
        "date": "Nov 1, 2017, 9:48:24AM",
        "content": "Hello Craig,\n\ni met the same problem too .i used the 'heterogeneous_soil.in' example but no branch was created. And I am using Windows, with ParaView 5.4.1. \n\nThanks you.\n\nnana"
      },
      {
        "author": "Craig Warren",
        "date": "Nov 1, 2017, 10:26:05AM",
        "content": "Hi guys,\n\nI have update the Paraview macro. If you pull the latest code from GitHub then delete and re-add the modified macro to Paraview. This should fix the problem. I haven't entirely got to the bottom of the issue, but it appears that the geometry file is not being correctly read by Python 2.x (which is what is used by Paraview) on Windows. By changing the mode of file reading to binary it seems to have fixed the problem. \n\nI have opened an issue on our Issue Tracker (https://github.com/gprMax/gprMax/issues/135), so if you are still having problems, please report them there.\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/oRqcn83K9Jg",
    "title": "optimisation of computing-process",
    "original_post": {
      "author": "Michael Fehér",
      "date": "Feb 23, 2021, 2:37:46AM",
      "content": "Dear people\n\nCurrently I'm processing a big set of simulations.\n\nI am wondering if and how it would be possible to optimize thi time-schedule op this.\n\nthe model is about\n\n#domain: 0.92 0.7 0.50\n#dx_dy_dz: 0.001 0.001 0.001\n\nI want to calculate crossing b-scans at a step of 0.002 m and line-distance of 0.025 m\n\nwhile mpi doesn't work on my system (see other thread) I'm using two instances of gprMax, for each GPU one.\n\nI'm using #geometry_objects_read to read my model and use herzian dipoles as TX/RX\n\nthe computingtime is quite heavy, but time isn't THAT problem yet.\n\nthe CPU calcultes part (building geometry etc) takes about 1 minute\nthe solving-time at the GPU is about 5 minutes\n\nI'm wondering if there is a trick to schedule the CPU-part before the prevous model is completely solved.\n\nThe point is, that I want to use 3D-antenna-models for the next run. There is the geometry much more time-consuming. I want to keep the outtake of the GPU's as short as possible, since this is te most time-consuming part where I am not really able to do something about.\n\nplease come with any suggestion.\n\n\nSincerly, Micha"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 23, 2021, 5:53:56AM",
        "content": "Its a good point. Currently its not possible to overlap the running of model on GPU whilst building the next model on CPU. A model is regarded as a single entity and a B-scan is just a collection of models (which gprMax views individually). I have filed this as an issue on GitHub (https://github.com/gprMax/gprMax/issues/280) so we can keep track of it, and hopefully look into what is possible in the future....when time permits!\n\nThanks,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/baKbrPzN0TQ",
    "title": "How best to estimate time of flight",
    "original_post": {
      "author": "Ikechukwu",
      "date": "Jul 20, 2017, 2:21:01PM",
      "content": "Hi All,\n\nIn estimating the time of flight, should one start from t=0 or is there an offset i.e. between t=0 and the peak of the transmitted pulse? if their is an offset, how do one estimate the value of the offset for a ricker wave?\n\nThanks in anticipation.\nIkechukwu"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 31, 2017, 4:37:29AM",
        "content": "Hi Ikechukwu,\n\nYou can see the definitions and plot any of the builtin waveforms - http://docs.gprmax.com/en/latest/plotting.html#built-in-waveforms From the plot, definition, or printed information you will be able to get the time of whatever peak of the waveform you need to use for time zero.\n\nYou might be interested in a paper on the subject by Richard Yelf - 'Where is true time zero?' - http://ieeexplore.ieee.org/document/1343425/\n\nKind regards,\n\nCraig"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/qdbHwmE0vgc",
    "title": "How to use GPU in API",
    "original_post": {
      "author": "Matthijs van Delft",
      "date": "Mar 11, 2019, 11:21:32AM",
      "content": "Dear people,\n\nHow do I set the flag for using the GPU in the API? It is so easy in the command line by using -gpu, but it seems it needs an argument now doing it in the API and this confuses me.\n\napi(filename, n=48, geometry_only=False, gpu=?)\n\nCan somebody please help me out.\n\nKind regards,\n\nMatthijs"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 11, 2019, 11:32:19AM",
        "content": "Hi Matthijs,\n\nWelcome to the forum!\n\nAs it happens I have just been updating usage of the -gpu flag. Given on its own at the command line, it chooses the GPU with a device ID of 0. It can also be given with a list of GPU device IDs, e.g. -gpu 0 1 2. To use it via the API you must also provide a list, e.g.\n\napi(filename, n=48, geometry_only=False, gpu=[0])\n\nor \n\napi(filename, n=48, geometry_only=False, gpu=[0 1 2])\n\nPlease make sure you pull the latest version of gprMax from GitHub.\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Matthijs van Delft",
        "date": "Mar 12, 2019, 8:13:27AM",
        "content": "Hi Craig!\n\nThank you very much, I didn't know it should be a list. It works now!\n\nKind regards,\n\nMatthijs"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/NoycyDMOFeI",
    "title": "post processing",
    "original_post": {
      "author": "Patrick Carson",
      "date": "May 18, 2016, 9:52:49AM",
      "content": "Hi,\n\nI am working on removing the antenna ring and ground reflected signal from radar b-scans. Whilst I think I have been successful in doing this for B-scans with a flat surface I am having trouble applying the same method to B-scans defined with a rough surface. I am applying a singular value decomposition to the raw data and filtering out the dominant eigen images via the following code:\n\n# convert to numpy array\ndata_as_array = numpy.array(data)\n\n# calculate SVD\nU, sigma, V = np.linalg.svd(data)\n\n# pull out 3 dominant eigen images\neigen_image = np.matrix(U[:, :3]) * np.diag(sigma[:3]) * np.matrix(V[:3, :])\n\n# subtract from raw data\nb_scan = data_as_array - eigen_image\n\n# plot\nfig = plt.figure(num=file, figsize=(10, 5), facecolor='w', edgecolor='w')\nax = plt.Axes(fig, [0., 0., 1., 1.])\nax.set_axis_off()\nfig.add_axes(ax)\nax.imshow(b_scan,cmap='gray',interpolation='bicubic',aspect='auto')\n\nI am pretty unfamiliar unfamiliar with signal processing. I am not 100% sure that the technique above is correct(?). Any explanation to why this method doesn't work for b-scans with a rough surface would be appreciated, and if there are any other techniques that are able to remove the antenna/ground noise from the b-scan.\n\nAttached is the ground removal technique for flat surface and the same technique applied to rough surfaces.\n\nPatrick"
    },
    "responses": [
      {
        "author": "Patrick Carson",
        "date": "Jun 1, 2016, 11:25:25AM",
        "content": "I know this isn't strictly to do with gprMax but any pointers would be really helpful!"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 2, 2016, 6:02:33AM",
        "content": "Hi Patrick,\n\nI don't think you do something wrong. This approach works in a similar way to background removal for the first eigenvalues. Obviously you can remove a lot more and be more granular but the results are not as well understood and you can create artefacts. I think depending on the surface roughness this approach might be better than background removal based on an average trace but not necessarily a perfect solution. Algorithmically (although not an expert on this myself!) seems that you do the right thing. I will point your request to my ex PhD student who did has used the SVD approach in processing.\n\nBest\n\nAntonis"
      },
      {
        "author": "Patrick Carson",
        "date": "Jun 2, 2016, 8:47:37AM",
        "content": "Hi Antonis,\n\nThanks. I just don't fully understand why this method doesn't work so well on a radargram when the surface is defined as rough.\n\nCheers"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jun 2, 2016, 8:52:59AM",
        "content": "You might find this interesting if you have not got it.\n\nhttps://www.researchgate.net/publication/226057451_Removal_of_ringing_noise_in_GPR_data_by_signal_processing\n\nAntonis"
      },
      {
        "author": "Patrick Carson",
        "date": "Jun 22, 2016, 11:14:04AM",
        "content": "Is it because SVD assumes that the noise is linear, therefore it works for the specular reflection from a flat surface but not so well when the gpr waves reflected off a rough surface is at random and in all directions.\n\nIm trying to replicate the pre-processing results in this paper: http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=7229259&tag=1.\n\npwhc"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/6I1sMx53yqo",
    "title": "issues with Paraview (Windows 8)",
    "original_post": {
      "author": "Olga Marszalkowska",
      "date": "Mar 12, 2019, 10:40:29AM",
      "content": "Hi All,\n\nI'm wondering if anyone experienced problems with Paraview on a Windows 8 laptop. I downloaded and installed versions 5.6, 5.5, 5.4 and 5.3 and none of them work on my computer. Versions 5.6 and 5.4 show a message 'paraview stopped working' before the software even starts and 5.5 doesn't display the file (show a black screen where graphic should be displayed). I managed to get a 5.2 version working but was wondering if anyone else experienced this problem and might have a different solution?\n\nThank you"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Mar 13, 2019, 5:00:58AM",
        "content": "Hi Olga,\n\nWindows 8 is not a version I routinely test - we mainly focus on Windows 10. Since this sounds mainly like an issue with Paraview, I suggest you might post it on their forum for a more speedy answer - https://discourse.paraview.org/c/paraview-support\n\nKind regards,\n\nCraig"
      },
      {
        "author": "Paul-Benjamin Riedel",
        "date": "Mar 19, 2019, 4:25:10PM",
        "content": "This might be due to Paraview dropping support for older openGL Versions lately. \n\nI had this problem sitting at an old Geforce Quadro that only supported 2.2, had to upgrade to a better card. \n\nYou either are lucky and there is more recent drivers that include OpenGL 3.x or you are out of luck and have to keep older versions."
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/EDbz9PaVDLc",
    "title": "Waveform Inversion",
    "original_post": {
      "author": "Diksha Sharma",
      "date": "Jul 5, 2024, 12:16:26AM",
      "content": "Hi all,\n\nCan anyone tell me why the waveform (ex. ricker) gets inverted in the receive data? I have attached the snapshots of transmit waveform and Ez response for a pec cylinder target. (i used cylinder_Ascan_2D.in file form library)"
    },
    "responses": [
      {
        "author": "Jorge Luis Alva Alarcon",
        "date": "Jul 5, 2024, 4:41:23PM",
        "content": "Hello,\nFrom my short experience it can be many things, as:\n- if the waveform is a custom one and don't have many points in time\n- if you are not considering enough points for the PML boundaries\nMaybe you can put a RX very close to your TX to see it. Also, it would be a nice idea to share the file.in that your are using.\nRegards,\n"
      },
      {
        "author": "Diksha Sharma",
        "date": "Jul 8, 2024, 1:08:24AM",
        "content": "here is the .in file i used. and also i have attached the complete output and in that \"Hy field\" completely resembles ricker waveform (transmit wave) rest all are of different shape. \n\n#title: A-scan from a metal cylinder buried in a dielectric half-space\n#domain: 0.240 0.210 0.001\n#dx_dy_dz: 0.001 0.001 0.001\n#time_window: 20e-9\n\n#material: 2 0 1 0 half_space\n\n#waveform: ricker 1 1.25e9 my_ricker\n#hertzian_dipole: z 0.100 0.170 0 my_ricker\n#rx: 0.140 0.170 0\n\n#box: 0 0 0 0.240 0.170 0.001 half_space\n#cylinder: 0.120 0.080 0 0.120 0.080 0.001 0.010 pec\n\n#geometry_view: 0 0 0 0.240 0.210 0.001 0.001 0.001 0.001 cylinder_half_space n\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Jul 8, 2024, 4:44:06AM",
        "content": "You need to study the fields of a line source (you are using a 2D model) close to a half-space to understand their pattern both in the near, intermediate and far fields. The boo from W.Chew (1990) \"Waves and Fields in inhomogeneous Media\" is a good place to start for proper 3D analytical solution of the dipole problem then there a lot more. Your response will change with height from the interface as well as distance from the source. There is no simple one line answer to explain this.\n\nHope that helps\n\nAntonis\n\n"
      },
      {
        "author": "Diksha Sharma",
        "date": "Jul 8, 2024, 11:52:28PM",
        "content": "Thank you so much for replying to this query Prof. Antonis. Surely i will go through the book .\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/ESC0zhGUo0M",
    "title": "PML celss and the position of Tx and Rx",
    "original_post": {
      "author": "Himan Namdari",
      "date": "Feb 27, 2023, 6:42:34PM",
      "content": "Dear All, \n\nBased on gprMax documentation for PML cell:\n\nThe cells of the RIPML, which have a user adjustable thickness, very efficiently absorb most waves that propagate in them. Although, source and output points can be specified inside these cells it is wrong to do so from the point of view of correct modelling. \n\nHere is my model; please correct me if I am wrong:\n\n#domain: 0.260 0.260 0.002\n#dx_dy_dz: 0.002 0.002 0.002\n\n\nWhich of these modeling below is best suited for the Tx and Rx position? \n\n#hertzian_dipole: z 0.12 0.250 0 my_ricker\n#rx: 0.14 0.250 0\nThe signal variation respecting permittivity is more. \n\n#hertzian_dipole: z 0.12 0.230 0 my_ricker\n#rx: 0.14 0.230 0\nThe signal variation respecting permittivity is less.\n\nCan we place the Tx and Rx inside the absorbing boundary or NOT? \n\nLet me know if you need more information. \nBest \n\nHiman"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2023, 6:25:56AM",
        "content": "Dear Himan,\n\nYou should NOT place sources or receivers inside the PML, and you should try to keep sources and receivers at least 15 cells away from the PML - https://docs.gprmax.com/en/latest/gprmodelling.html#absorbing-boundary-conditions\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Feb 28, 2023, 6:26:31AM",
        "content": "Dear Himan,\n\nYou should NOT place sources or receivers inside the PML, and you should try to keep sources and receivers at least 15 cells away from the PML - https://docs.gprmax.com/en/latest/gprmodelling.html#absorbing-boundary-conditions\n\nKind regards,\nCraig\n\nOn Monday, 27 February 2023 at 23:42:34 UTC himan....@gmail.com wrote:\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/J-J_1irJgY0",
    "title": "Mac os Install error",
    "original_post": {
      "author": "Taemin Lee",
      "date": "Jul 24, 2023, 3:19:57AM",
      "content": "Hello, \nI am installing the gprMax program on mac os, but the following error occurs.\n\n(gprMax)$ python setup.py build 실행 /Users/*****/miniconda3/envs/gprMax/include/python3.11/Python.h:23:12: fatal error: stdlib.h: No such file or directory\n\n\nI would appreciate it if you could tell me the cause and solution for the error.\n\nThanks"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jul 24, 2023, 10:14:11AM",
        "content": "Could be from the miniconda install. I try removing miniconda and re-installing it.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Taemin Lee",
        "date": "Jul 31, 2023, 10:04:03PM",
        "content": "I uninstalled and reinstalled miniconda as you recommended, but when I do it as a package, I get a message saying that it can't be done in the previous MacOS version. Actually, my MacOs are Ventur 13.3, which is the latest version. Maybe it's because it only supports older MacOs. Anyway, so I downloaded and installed the bash shell version (I've done this before, but this time I installed a slightly lower version for Python 3.9. There are two download files for installation. One is a package and the other is a shell file). You can install it using shell. However, even after reinstalling the rest of the installation in order, it still results in the same error message. Also gcc is version 13. Please reply again.\n\n2023년 7월 24일 월요일 오후 11시 14분 11초 UTC+9에 Craig Warren님이 작성:\n"
      },
      {
        "author": "Craig Warren",
        "date": "Aug 17, 2023, 11:11:09AM",
        "content": "Definitely sounds like a Miniconda problem. For macOS the there are currently only bash shell versions for either x86 or Apple M-series CPU, so make sure you select the correct version for your machine. Make sure you can successfully use Python from Miniconda before proceeding to install gprMax.\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/x3P-DY5HFkc",
    "title": "GPR distance above the ground",
    "original_post": {
      "author": "alpergenc",
      "date": "Apr 5, 2017, 1:42:45AM",
      "content": "Hi everybody,\n\nWhen I simulate a model by using GPRmax, is there a rule to calculate the optimum distance between GPR antenna and the ground? Moreover, how can I calculate the optimum distance between TX and RX of GPR antenna? \n\nKind regards,\nAlper"
    },
    "responses": []
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/Rc50cKjm2FQ",
    "title": "Query related to updating gprMax",
    "original_post": {
      "author": "Rohit Karnena",
      "date": "May 18, 2021, 1:29:25AM",
      "content": "Dear all,\n               Currently I have gprMax version 3.1.3 in my laptop. I want to update to the latest version 3.1.5. I followed the latest manual released in April 2021. I followed he following steps:\n\n1. conda update --all\n2. git pull\n3. python setup.py cleanall\n\nThe first two steps were executed well. But while executing the fourth step, i have been facing error as\nDLL load failed: The specified module could not be found\ngprMax requires the Numpy package.\nI didn't get the problem.\nCan someone please help me to fix this error.\n\nThank you\n\nRegards\nRohit"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 18, 2021, 4:00:42AM",
        "content": "Sounds like you don't have the gprMax conda environment loaded when you are trying to perform the cleanall step.\n\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Rohit Karnena",
        "date": "May 18, 2021, 7:44:13AM",
        "content": "Dear sir.\n\nThank you for your suggestion. I upgraded gprMax to the latest version 3.1.5. But still I am facing the same error of \"can't open attributes dx_dy_dz\", while executing the function \"plot_antenna_params\". This means HDF5 file structure has not updated. How to fix this. Please help me sir\n\n"
      },
      {
        "author": "Craig Warren",
        "date": "Jun 1, 2021, 5:49:24AM",
        "content": "Dear Rohit,\n\nPlease make sure you re-run your model with the updated version (3.1.5) of gprMax - https://github.com/gprMax/gprMax/commit/a1512086bc2a4eaaa363f54bfdb784c37689f7a9#diff-b21960d32e3908b9073cb271899c98f3a28d8b47527078fa18750d901b11429d\n\nKind regards,\n\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/X6Cpn4_iSbY",
    "title": "Creating 3D from 1D",
    "original_post": {
      "author": "Amin",
      "date": "May 13, 2021, 10:31:43AM",
      "content": "Hello Fellow gprMax users and amazing Team behind gprMax,\n\nI am trying to create a 3D model by creating an input file (.in) for each trace in my 3D volume and then run each input file separately to create Ascan for each trace. After spending a few days reading the manuals and forum posts I couldn't find any downside to my approach when it comes to wave physics or significant computational cost. so I have two questions and I would appreciate any comment, suggestion, or insight.\n\n1) my antennas are off the ground. Therefore, the area of wave interaction with the ground (radar swath) is larger than if the radar was in contact with the ground. Will the contribution of the entire radar swath be captured in the Ascan? I think it should since the wave equations are computed in 3D but I am not fully certain if I am missing something or not.\n\n2) I am using spyder as my IDE of choice (python is pretty new to me). However, It has been challenging to execute lines such as \"python -m gprMax user_models/cylinder_Ascan_2D.in\" in spyder. I would appreciate any tips on how to execute such commands in IDE."
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "May 13, 2021, 10:56:44AM",
        "content": "Dear Amin,\n\nI'll give a quick answers that others can expand on:\n\nSo long as the model domain is big enough to capture the footprint of the antenna then all should be fine. Obviously this can make the model large and computationally expensive when the antenna is off ground.\nI don't have experience with Spyder - my preferred IDE currently is MS Visual Studio Code which I find surprisingly good for a MS product. It also works on Windows and Mac.\nKind regards,\nCraig\n\n"
      },
      {
        "author": "Amin",
        "date": "May 14, 2021, 10:42:30AM",
        "content": "Thank you greatly for your quick response. per your suggestion, I have installed VS Code. However, I keep getting similar errors about some modules missing even when they exist and are updated in the gprMax environment. I believe it has to do with making sure the right environment lib is being used. Would you or anyone else be able to shed some light on how you set up and import the required libraries to run a simple Ascan such as \" python -m gprMax user_models/cylinder_Ascan_2D.in\" in your VS Code? I understand if this discussion is beyond the scope of this forum and in advance thank you for taking the time.\n"
      },
      {
        "author": "Amin",
        "date": "May 14, 2021, 11:59:03AM",
        "content": "I have finally solved the issue. In my case, the VS Code has to be launched from the Anaconda command prompt and after the gprMax has been activated.\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/zLxqW5kEKBU",
    "title": "Problem with installation",
    "original_post": {
      "author": "jamaledin baniamerian",
      "date": "Jan 18, 2023, 6:04:52PM",
      "content": "Hello\nI have a problem with the installation of gprMax.\nAfter installing Minicoda3, in the command prompt the command\n.... conda update conda\ngives the following error:\n'conda' is not recognized as an internal or external command,\noperable program or batch file.\n\nI tried different versions of minicoda but the error always remains. This error does not allow me to proceed. \n\nRegards\nJ.Baiamerian"
    },
    "responses": [
      {
        "author": "Craig Warren",
        "date": "Jan 23, 2023, 12:26:35PM",
        "content": "Hi,\n\nDefinitely sounds like your installation of miniconda has not worked properly. Unfortunately we don't have the resources to extensively troubleshoot issues with all the tools gprMax uses, e.g. conda, unless the issue is widespread. It sounds like conda is not being correctly added to your PATH, did you check that option during the installation?\n\nKind regards,\nCraig\n\n"
      }
    ]
  },
  {
    "url": "https://groups.google.com/g/gprmax/c/JI4xMySbKIM",
    "title": "2D hertzian dipole Implementation in GPRMax",
    "original_post": {
      "author": "Hamed Ghorbani",
      "date": "Apr 30, 2025, 5:59:06AM",
      "content": "Dear GPRMax Team,  \n\nI hope this email finds you well. Thank you for your work on this powerful open-source tool—it has been invaluable to my research.  \n\nI have a question regarding 2D simulations with Hertzian dipoles, as described in the documentation: When converting a point dipole to a line source (*z*-direction), could you kindly direct me to:  \n1. The analytical relationships used for field calculations (and their code implementation)?  \n2. The specific code section(s) handling this conversion and  the relationships?  \n\nAny guidance would help me better interpret my results.  \n\nThank you for your time."
    },
    "responses": [
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 30, 2025, 7:22:15AM",
        "content": "There are not any analytical relationships that are used directly in an FDTD numerical code to simulate sources. gprMax does not use an analytical formula to calculate the fields of a line source in 2D or of a dipole in 3D. When you have a 2D model your source is a line source as it is infinite in the invariance direction. The same implementation in 3D will give you a dipole. It is the dimensionality of your code that produces a line source or a dipole.  If not he other hand  you want to check how the gprMax response  compares with an analytical solution then there is a formula that allows you to do this - for simple cases - as the solution of a line source in a homogenous medium is available analytically. \n\nThe formula to use for that can easily be found in the literature. For example,  it is in the book by W.C. Chew (1990) \"Wave and Fields in inhomogeneous media\"  and other places. If you cannot find this reference or the formula it is also in my thesis which is available as a PDF (link from the gprMax website). (equation 4.115, page 107). This formula is the Green's function of a line source in free space. You can convolve this with your suitable excitation as used in FDTD (gprMax) and compare the results to see how accurate your FDTD model is. \n\nThere are no code sections that handle analytically the source but there is code that implements sources in FDTD and this is easy to find in the \"sources.py\"\n\nHope this helps\n\nAntonis\n"
      },
      {
        "author": "Hamed Ghorbani",
        "date": "Apr 30, 2025, 12:38:53PM",
        "content": "Dear Antonis,\nThank you for your previous explanation regarding the source implementation in gprMax.\nAfter reviewing the gprMax documentation and the sources.py file, I understand that in 2D simulations, the source is modeled as a line source due to the invariance in the z-direction. I also recognize that gprMax does not directly use analytical field expressions but relies on the numerical approximation inherent in the FDTD method.\nTo deepen my understanding, I have a few specific questions:\nNumerical Representation of the Source: How is the z-directed line source (Hertzian dipole) numerically implemented in the FDTD update equations within gprMax? Specifically, is it introduced as a current density term Jz added to Maxwell’s equations?\nCode Implementation Details: Could you point me to the specific sections in sources.py or other relevant files where this source injection is handled? Understanding the exact implementation will help me relate the numerical model to the physical source.\nAnalytical Comparison: I plan to compute the analytical solution for a line source in a homogeneous medium (e.g., using the Green's function from Chew's book or your thesis) and compare it with gprMax simulation results. To ensure a valid comparison, could you advise on any considerations or adjustments needed when aligning the analytical model with the numerical implementation in gprMax?\nI appreciate your guidance in helping me bridge the gap between the numerical implementation in gprMax and the underlying physical models.\nBest regards,\nHamed.\n"
      },
      {
        "author": "Antonis Giannopoulos",
        "date": "Apr 30, 2025, 12:49:26PM",
        "content": "Hi Hamed,\n\n1. The sources.py in the current master branch contains the implementation of the various sources. The \"class HertzianDipole(Source)\" is what is used in both 3D and 2D. The line source is an automatic result from the model being 2D. The source module is to introduce a J term in Maxwell's equations. What you specify for these sources is the current waveform on the source. \n\n2. (see point 1 above)\n\n3. J sources in FDTD are applied half a time step away from the E field. This is a result of balancing the discrete equation in both time instance and space. When you convolving a source function with the analytical impulse response small time misalignments might result in small discrepancies between the responses. I think we do provide some comparisons with an analytical Hertzian dipole source in the docs and these can be found in the \"tests\" sub package.\n\nGood luck with your tests and your work.\n\nAntonis\n"
      }
    ]
  }
]
